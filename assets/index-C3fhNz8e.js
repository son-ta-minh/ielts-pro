const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/Dashboard-CuvtDFYM.js","assets/list-todo-Bcp8mCZS.js","assets/file-clock-Bjx_lKaK.js","assets/split-X3QphMxl.js","assets/keyboard-DBK3Muae.js","assets/ReviewSession-Bbe0owNa.js","assets/trophy-CKvRNBCU.js","assets/WordList-BoNacI-5.js","assets/WordTable-4NrB4pfJ.js","assets/WordTable_UI-B709bGyH.js","assets/TagBrowser-Bd9nZ-uy.js","assets/tag-CNCrcfMZ.js","assets/columns-2-DjZySAzc.js","assets/calendar-DNKLZ6Mn.js","assets/square-check-big-Bc_ifhoG.js","assets/chevron-left-C1Ll9m-c.js","assets/ReadingUnitPage-BHVT5uQ-.js","assets/minus-CTBAdgZG.js","assets/ResourceActions-C1Ksm0NG.js","assets/ViewMenu-B6F0yyNj.js","assets/filter-gtNiRkaN.js","assets/UniversalCard-CpIq4h9t.js","assets/FileSelector-DhCanECd.js","assets/server-DluSRbWP.js","assets/music-CUtAfPh1.js","assets/SettingsView-C7EoqSY2.js","assets/AvatarSelectionModal-7WUZ72xq.js","assets/palette-CKZ0OjYP.js","assets/Discover-DPznAvib.js","assets/layout-grid-CFx05qoI.js","assets/WritingStudioPage-OOL8f9ow.js","assets/chart-no-axes-column-increasing-BnL8GxYD.js","assets/IrregularVerbs-C0QMf4f9.js","assets/library-CIn8MT8t.js","assets/MimicPractice-Bljw9ybC.js","assets/ear-BOZJdR63.js","assets/LessonLibraryV2-DBOo5flZ.js","assets/headphones-BK31sfLf.js","assets/PlanningPage-PKa9bPoq.js","assets/grip-vertical-5HZzsEKn.js","assets/SpeakingCardPage-D2-TFfpb.js","assets/WordBookPage-D01OU5u-.js","assets/CourseList-D7NtCFV2.js"])))=>i.map(i=>d[i]);
(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const f of document.querySelectorAll('link[rel="modulepreload"]'))o(f);new MutationObserver(f=>{for(const d of f)if(d.type==="childList")for(const p of d.addedNodes)p.tagName==="LINK"&&p.rel==="modulepreload"&&o(p)}).observe(document,{childList:!0,subtree:!0});function i(f){const d={};return f.integrity&&(d.integrity=f.integrity),f.referrerPolicy&&(d.referrerPolicy=f.referrerPolicy),f.crossOrigin==="use-credentials"?d.credentials="include":f.crossOrigin==="anonymous"?d.credentials="omit":d.credentials="same-origin",d}function o(f){if(f.ep)return;f.ep=!0;const d=i(f);fetch(f.href,d)}})();function cy(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var _d={exports:{}},ni={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Fm;function _S(){if(Fm)return ni;Fm=1;var n=Symbol.for("react.transitional.element"),r=Symbol.for("react.fragment");function i(o,f,d){var p=null;if(d!==void 0&&(p=""+d),f.key!==void 0&&(p=""+f.key),"key"in f){d={};for(var g in f)g!=="key"&&(d[g]=f[g])}else d=f;return f=d.ref,{$$typeof:n,type:o,key:p,ref:f!==void 0?f:null,props:d}}return ni.Fragment=r,ni.jsx=i,ni.jsxs=i,ni}var $m;function AS(){return $m||($m=1,_d.exports=_S()),_d.exports}var l=AS(),Ad={exports:{}},Ue={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Wm;function TS(){if(Wm)return Ue;Wm=1;var n=Symbol.for("react.transitional.element"),r=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),o=Symbol.for("react.strict_mode"),f=Symbol.for("react.profiler"),d=Symbol.for("react.consumer"),p=Symbol.for("react.context"),g=Symbol.for("react.forward_ref"),h=Symbol.for("react.suspense"),m=Symbol.for("react.memo"),y=Symbol.for("react.lazy"),v=Symbol.for("react.activity"),w=Symbol.iterator;function N(b){return b===null||typeof b!="object"?null:(b=w&&b[w]||b["@@iterator"],typeof b=="function"?b:null)}var O={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},I=Object.assign,_={};function j(b,T,k){this.props=b,this.context=T,this.refs=_,this.updater=k||O}j.prototype.isReactComponent={},j.prototype.setState=function(b,T){if(typeof b!="object"&&typeof b!="function"&&b!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,b,T,"setState")},j.prototype.forceUpdate=function(b){this.updater.enqueueForceUpdate(this,b,"forceUpdate")};function L(){}L.prototype=j.prototype;function D(b,T,k){this.props=b,this.context=T,this.refs=_,this.updater=k||O}var M=D.prototype=new L;M.constructor=D,I(M,j.prototype),M.isPureReactComponent=!0;var P=Array.isArray;function Y(){}var U={H:null,A:null,T:null,S:null},G=Object.prototype.hasOwnProperty;function A(b,T,k){var Q=k.ref;return{$$typeof:n,type:b,key:T,ref:Q!==void 0?Q:null,props:k}}function V(b,T){return A(b.type,T,b.props)}function F(b){return typeof b=="object"&&b!==null&&b.$$typeof===n}function $(b){var T={"=":"=0",":":"=2"};return"$"+b.replace(/[=:]/g,function(k){return T[k]})}var ae=/\/+/g;function me(b,T){return typeof b=="object"&&b!==null&&b.key!=null?$(""+b.key):T.toString(36)}function fe(b){switch(b.status){case"fulfilled":return b.value;case"rejected":throw b.reason;default:switch(typeof b.status=="string"?b.then(Y,Y):(b.status="pending",b.then(function(T){b.status==="pending"&&(b.status="fulfilled",b.value=T)},function(T){b.status==="pending"&&(b.status="rejected",b.reason=T)})),b.status){case"fulfilled":return b.value;case"rejected":throw b.reason}}throw b}function C(b,T,k,Q,ue){var ie=typeof b;(ie==="undefined"||ie==="boolean")&&(b=null);var he=!1;if(b===null)he=!0;else switch(ie){case"bigint":case"string":case"number":he=!0;break;case"object":switch(b.$$typeof){case n:case r:he=!0;break;case y:return he=b._init,C(he(b._payload),T,k,Q,ue)}}if(he)return ue=ue(b),he=Q===""?"."+me(b,0):Q,P(ue)?(k="",he!=null&&(k=he.replace(ae,"$&/")+"/"),C(ue,T,k,"",function(J){return J})):ue!=null&&(F(ue)&&(ue=V(ue,k+(ue.key==null||b&&b.key===ue.key?"":(""+ue.key).replace(ae,"$&/")+"/")+he)),T.push(ue)),1;he=0;var B=Q===""?".":Q+":";if(P(b))for(var le=0;le<b.length;le++)Q=b[le],ie=B+me(Q,le),he+=C(Q,T,k,ie,ue);else if(le=N(b),typeof le=="function")for(b=le.call(b),le=0;!(Q=b.next()).done;)Q=Q.value,ie=B+me(Q,le++),he+=C(Q,T,k,ie,ue);else if(ie==="object"){if(typeof b.then=="function")return C(fe(b),T,k,Q,ue);throw T=String(b),Error("Objects are not valid as a React child (found: "+(T==="[object Object]"?"object with keys {"+Object.keys(b).join(", ")+"}":T)+"). If you meant to render a collection of children, use an array instead.")}return he}function ne(b,T,k){if(b==null)return b;var Q=[],ue=0;return C(b,Q,"","",function(ie){return T.call(k,ie,ue++)}),Q}function te(b){if(b._status===-1){var T=b._result;T=T(),T.then(function(k){(b._status===0||b._status===-1)&&(b._status=1,b._result=k)},function(k){(b._status===0||b._status===-1)&&(b._status=2,b._result=k)}),b._status===-1&&(b._status=0,b._result=T)}if(b._status===1)return b._result.default;throw b._result}var q=typeof reportError=="function"?reportError:function(b){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var T=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof b=="object"&&b!==null&&typeof b.message=="string"?String(b.message):String(b),error:b});if(!window.dispatchEvent(T))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",b);return}console.error(b)},z={map:ne,forEach:function(b,T,k){ne(b,function(){T.apply(this,arguments)},k)},count:function(b){var T=0;return ne(b,function(){T++}),T},toArray:function(b){return ne(b,function(T){return T})||[]},only:function(b){if(!F(b))throw Error("React.Children.only expected to receive a single React element child.");return b}};return Ue.Activity=v,Ue.Children=z,Ue.Component=j,Ue.Fragment=i,Ue.Profiler=f,Ue.PureComponent=D,Ue.StrictMode=o,Ue.Suspense=h,Ue.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=U,Ue.__COMPILER_RUNTIME={__proto__:null,c:function(b){return U.H.useMemoCache(b)}},Ue.cache=function(b){return function(){return b.apply(null,arguments)}},Ue.cacheSignal=function(){return null},Ue.cloneElement=function(b,T,k){if(b==null)throw Error("The argument must be a React element, but you passed "+b+".");var Q=I({},b.props),ue=b.key;if(T!=null)for(ie in T.key!==void 0&&(ue=""+T.key),T)!G.call(T,ie)||ie==="key"||ie==="__self"||ie==="__source"||ie==="ref"&&T.ref===void 0||(Q[ie]=T[ie]);var ie=arguments.length-2;if(ie===1)Q.children=k;else if(1<ie){for(var he=Array(ie),B=0;B<ie;B++)he[B]=arguments[B+2];Q.children=he}return A(b.type,ue,Q)},Ue.createContext=function(b){return b={$$typeof:p,_currentValue:b,_currentValue2:b,_threadCount:0,Provider:null,Consumer:null},b.Provider=b,b.Consumer={$$typeof:d,_context:b},b},Ue.createElement=function(b,T,k){var Q,ue={},ie=null;if(T!=null)for(Q in T.key!==void 0&&(ie=""+T.key),T)G.call(T,Q)&&Q!=="key"&&Q!=="__self"&&Q!=="__source"&&(ue[Q]=T[Q]);var he=arguments.length-2;if(he===1)ue.children=k;else if(1<he){for(var B=Array(he),le=0;le<he;le++)B[le]=arguments[le+2];ue.children=B}if(b&&b.defaultProps)for(Q in he=b.defaultProps,he)ue[Q]===void 0&&(ue[Q]=he[Q]);return A(b,ie,ue)},Ue.createRef=function(){return{current:null}},Ue.forwardRef=function(b){return{$$typeof:g,render:b}},Ue.isValidElement=F,Ue.lazy=function(b){return{$$typeof:y,_payload:{_status:-1,_result:b},_init:te}},Ue.memo=function(b,T){return{$$typeof:m,type:b,compare:T===void 0?null:T}},Ue.startTransition=function(b){var T=U.T,k={};U.T=k;try{var Q=b(),ue=U.S;ue!==null&&ue(k,Q),typeof Q=="object"&&Q!==null&&typeof Q.then=="function"&&Q.then(Y,q)}catch(ie){q(ie)}finally{T!==null&&k.types!==null&&(T.types=k.types),U.T=T}},Ue.unstable_useCacheRefresh=function(){return U.H.useCacheRefresh()},Ue.use=function(b){return U.H.use(b)},Ue.useActionState=function(b,T,k){return U.H.useActionState(b,T,k)},Ue.useCallback=function(b,T){return U.H.useCallback(b,T)},Ue.useContext=function(b){return U.H.useContext(b)},Ue.useDebugValue=function(){},Ue.useDeferredValue=function(b,T){return U.H.useDeferredValue(b,T)},Ue.useEffect=function(b,T){return U.H.useEffect(b,T)},Ue.useEffectEvent=function(b){return U.H.useEffectEvent(b)},Ue.useId=function(){return U.H.useId()},Ue.useImperativeHandle=function(b,T,k){return U.H.useImperativeHandle(b,T,k)},Ue.useInsertionEffect=function(b,T){return U.H.useInsertionEffect(b,T)},Ue.useLayoutEffect=function(b,T){return U.H.useLayoutEffect(b,T)},Ue.useMemo=function(b,T){return U.H.useMemo(b,T)},Ue.useOptimistic=function(b,T){return U.H.useOptimistic(b,T)},Ue.useReducer=function(b,T,k){return U.H.useReducer(b,T,k)},Ue.useRef=function(b){return U.H.useRef(b)},Ue.useState=function(b){return U.H.useState(b)},Ue.useSyncExternalStore=function(b,T,k){return U.H.useSyncExternalStore(b,T,k)},Ue.useTransition=function(){return U.H.useTransition()},Ue.version="19.2.4",Ue}var Qm;function jf(){return Qm||(Qm=1,Ad.exports=TS()),Ad.exports}var E=jf();const Kt=cy(E);var Td={exports:{}},si={},jd={exports:{}},Id={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Zm;function jS(){return Zm||(Zm=1,(function(n){function r(C,ne){var te=C.length;C.push(ne);e:for(;0<te;){var q=te-1>>>1,z=C[q];if(0<f(z,ne))C[q]=ne,C[te]=z,te=q;else break e}}function i(C){return C.length===0?null:C[0]}function o(C){if(C.length===0)return null;var ne=C[0],te=C.pop();if(te!==ne){C[0]=te;e:for(var q=0,z=C.length,b=z>>>1;q<b;){var T=2*(q+1)-1,k=C[T],Q=T+1,ue=C[Q];if(0>f(k,te))Q<z&&0>f(ue,k)?(C[q]=ue,C[Q]=te,q=Q):(C[q]=k,C[T]=te,q=T);else if(Q<z&&0>f(ue,te))C[q]=ue,C[Q]=te,q=Q;else break e}}return ne}function f(C,ne){var te=C.sortIndex-ne.sortIndex;return te!==0?te:C.id-ne.id}if(n.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var d=performance;n.unstable_now=function(){return d.now()}}else{var p=Date,g=p.now();n.unstable_now=function(){return p.now()-g}}var h=[],m=[],y=1,v=null,w=3,N=!1,O=!1,I=!1,_=!1,j=typeof setTimeout=="function"?setTimeout:null,L=typeof clearTimeout=="function"?clearTimeout:null,D=typeof setImmediate<"u"?setImmediate:null;function M(C){for(var ne=i(m);ne!==null;){if(ne.callback===null)o(m);else if(ne.startTime<=C)o(m),ne.sortIndex=ne.expirationTime,r(h,ne);else break;ne=i(m)}}function P(C){if(I=!1,M(C),!O)if(i(h)!==null)O=!0,Y||(Y=!0,$());else{var ne=i(m);ne!==null&&fe(P,ne.startTime-C)}}var Y=!1,U=-1,G=5,A=-1;function V(){return _?!0:!(n.unstable_now()-A<G)}function F(){if(_=!1,Y){var C=n.unstable_now();A=C;var ne=!0;try{e:{O=!1,I&&(I=!1,L(U),U=-1),N=!0;var te=w;try{t:{for(M(C),v=i(h);v!==null&&!(v.expirationTime>C&&V());){var q=v.callback;if(typeof q=="function"){v.callback=null,w=v.priorityLevel;var z=q(v.expirationTime<=C);if(C=n.unstable_now(),typeof z=="function"){v.callback=z,M(C),ne=!0;break t}v===i(h)&&o(h),M(C)}else o(h);v=i(h)}if(v!==null)ne=!0;else{var b=i(m);b!==null&&fe(P,b.startTime-C),ne=!1}}break e}finally{v=null,w=te,N=!1}ne=void 0}}finally{ne?$():Y=!1}}}var $;if(typeof D=="function")$=function(){D(F)};else if(typeof MessageChannel<"u"){var ae=new MessageChannel,me=ae.port2;ae.port1.onmessage=F,$=function(){me.postMessage(null)}}else $=function(){j(F,0)};function fe(C,ne){U=j(function(){C(n.unstable_now())},ne)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(C){C.callback=null},n.unstable_forceFrameRate=function(C){0>C||125<C?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):G=0<C?Math.floor(1e3/C):5},n.unstable_getCurrentPriorityLevel=function(){return w},n.unstable_next=function(C){switch(w){case 1:case 2:case 3:var ne=3;break;default:ne=w}var te=w;w=ne;try{return C()}finally{w=te}},n.unstable_requestPaint=function(){_=!0},n.unstable_runWithPriority=function(C,ne){switch(C){case 1:case 2:case 3:case 4:case 5:break;default:C=3}var te=w;w=C;try{return ne()}finally{w=te}},n.unstable_scheduleCallback=function(C,ne,te){var q=n.unstable_now();switch(typeof te=="object"&&te!==null?(te=te.delay,te=typeof te=="number"&&0<te?q+te:q):te=q,C){case 1:var z=-1;break;case 2:z=250;break;case 5:z=1073741823;break;case 4:z=1e4;break;default:z=5e3}return z=te+z,C={id:y++,callback:ne,priorityLevel:C,startTime:te,expirationTime:z,sortIndex:-1},te>q?(C.sortIndex=te,r(m,C),i(h)===null&&C===i(m)&&(I?(L(U),U=-1):I=!0,fe(P,te-q))):(C.sortIndex=z,r(h,C),O||N||(O=!0,Y||(Y=!0,$()))),C},n.unstable_shouldYield=V,n.unstable_wrapCallback=function(C){var ne=w;return function(){var te=w;w=ne;try{return C.apply(this,arguments)}finally{w=te}}}})(Id)),Id}var Km;function IS(){return Km||(Km=1,jd.exports=jS()),jd.exports}var Od={exports:{}},ra={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Xm;function OS(){if(Xm)return ra;Xm=1;var n=jf();function r(h){var m="https://react.dev/errors/"+h;if(1<arguments.length){m+="?args[]="+encodeURIComponent(arguments[1]);for(var y=2;y<arguments.length;y++)m+="&args[]="+encodeURIComponent(arguments[y])}return"Minified React error #"+h+"; visit "+m+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function i(){}var o={d:{f:i,r:function(){throw Error(r(522))},D:i,C:i,L:i,m:i,X:i,S:i,M:i},p:0,findDOMNode:null},f=Symbol.for("react.portal");function d(h,m,y){var v=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:f,key:v==null?null:""+v,children:h,containerInfo:m,implementation:y}}var p=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function g(h,m){if(h==="font")return"";if(typeof m=="string")return m==="use-credentials"?m:""}return ra.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=o,ra.createPortal=function(h,m){var y=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!m||m.nodeType!==1&&m.nodeType!==9&&m.nodeType!==11)throw Error(r(299));return d(h,m,null,y)},ra.flushSync=function(h){var m=p.T,y=o.p;try{if(p.T=null,o.p=2,h)return h()}finally{p.T=m,o.p=y,o.d.f()}},ra.preconnect=function(h,m){typeof h=="string"&&(m?(m=m.crossOrigin,m=typeof m=="string"?m==="use-credentials"?m:"":void 0):m=null,o.d.C(h,m))},ra.prefetchDNS=function(h){typeof h=="string"&&o.d.D(h)},ra.preinit=function(h,m){if(typeof h=="string"&&m&&typeof m.as=="string"){var y=m.as,v=g(y,m.crossOrigin),w=typeof m.integrity=="string"?m.integrity:void 0,N=typeof m.fetchPriority=="string"?m.fetchPriority:void 0;y==="style"?o.d.S(h,typeof m.precedence=="string"?m.precedence:void 0,{crossOrigin:v,integrity:w,fetchPriority:N}):y==="script"&&o.d.X(h,{crossOrigin:v,integrity:w,fetchPriority:N,nonce:typeof m.nonce=="string"?m.nonce:void 0})}},ra.preinitModule=function(h,m){if(typeof h=="string")if(typeof m=="object"&&m!==null){if(m.as==null||m.as==="script"){var y=g(m.as,m.crossOrigin);o.d.M(h,{crossOrigin:y,integrity:typeof m.integrity=="string"?m.integrity:void 0,nonce:typeof m.nonce=="string"?m.nonce:void 0})}}else m==null&&o.d.M(h)},ra.preload=function(h,m){if(typeof h=="string"&&typeof m=="object"&&m!==null&&typeof m.as=="string"){var y=m.as,v=g(y,m.crossOrigin);o.d.L(h,y,{crossOrigin:v,integrity:typeof m.integrity=="string"?m.integrity:void 0,nonce:typeof m.nonce=="string"?m.nonce:void 0,type:typeof m.type=="string"?m.type:void 0,fetchPriority:typeof m.fetchPriority=="string"?m.fetchPriority:void 0,referrerPolicy:typeof m.referrerPolicy=="string"?m.referrerPolicy:void 0,imageSrcSet:typeof m.imageSrcSet=="string"?m.imageSrcSet:void 0,imageSizes:typeof m.imageSizes=="string"?m.imageSizes:void 0,media:typeof m.media=="string"?m.media:void 0})}},ra.preloadModule=function(h,m){if(typeof h=="string")if(m){var y=g(m.as,m.crossOrigin);o.d.m(h,{as:typeof m.as=="string"&&m.as!=="script"?m.as:void 0,crossOrigin:y,integrity:typeof m.integrity=="string"?m.integrity:void 0})}else o.d.m(h)},ra.requestFormReset=function(h){o.d.r(h)},ra.unstable_batchedUpdates=function(h,m){return h(m)},ra.useFormState=function(h,m,y){return p.H.useFormState(h,m,y)},ra.useFormStatus=function(){return p.H.useHostTransitionStatus()},ra.version="19.2.4",ra}var Jm;function CS(){if(Jm)return Od.exports;Jm=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(r){console.error(r)}}return n(),Od.exports=OS(),Od.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var eg;function RS(){if(eg)return si;eg=1;var n=IS(),r=jf(),i=CS();function o(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var a=2;a<arguments.length;a++)t+="&args[]="+encodeURIComponent(arguments[a])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function f(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function d(e){var t=e,a=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,(t.flags&4098)!==0&&(a=t.return),e=t.return;while(e)}return t.tag===3?a:null}function p(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function g(e){if(e.tag===31){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function h(e){if(d(e)!==e)throw Error(o(188))}function m(e){var t=e.alternate;if(!t){if(t=d(e),t===null)throw Error(o(188));return t!==e?null:e}for(var a=e,s=t;;){var c=a.return;if(c===null)break;var u=c.alternate;if(u===null){if(s=c.return,s!==null){a=s;continue}break}if(c.child===u.child){for(u=c.child;u;){if(u===a)return h(c),e;if(u===s)return h(c),t;u=u.sibling}throw Error(o(188))}if(a.return!==s.return)a=c,s=u;else{for(var x=!1,S=c.child;S;){if(S===a){x=!0,a=c,s=u;break}if(S===s){x=!0,s=c,a=u;break}S=S.sibling}if(!x){for(S=u.child;S;){if(S===a){x=!0,a=u,s=c;break}if(S===s){x=!0,s=u,a=c;break}S=S.sibling}if(!x)throw Error(o(189))}}if(a.alternate!==s)throw Error(o(190))}if(a.tag!==3)throw Error(o(188));return a.stateNode.current===a?e:t}function y(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e;for(e=e.child;e!==null;){if(t=y(e),t!==null)return t;e=e.sibling}return null}var v=Object.assign,w=Symbol.for("react.element"),N=Symbol.for("react.transitional.element"),O=Symbol.for("react.portal"),I=Symbol.for("react.fragment"),_=Symbol.for("react.strict_mode"),j=Symbol.for("react.profiler"),L=Symbol.for("react.consumer"),D=Symbol.for("react.context"),M=Symbol.for("react.forward_ref"),P=Symbol.for("react.suspense"),Y=Symbol.for("react.suspense_list"),U=Symbol.for("react.memo"),G=Symbol.for("react.lazy"),A=Symbol.for("react.activity"),V=Symbol.for("react.memo_cache_sentinel"),F=Symbol.iterator;function $(e){return e===null||typeof e!="object"?null:(e=F&&e[F]||e["@@iterator"],typeof e=="function"?e:null)}var ae=Symbol.for("react.client.reference");function me(e){if(e==null)return null;if(typeof e=="function")return e.$$typeof===ae?null:e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case I:return"Fragment";case j:return"Profiler";case _:return"StrictMode";case P:return"Suspense";case Y:return"SuspenseList";case A:return"Activity"}if(typeof e=="object")switch(e.$$typeof){case O:return"Portal";case D:return e.displayName||"Context";case L:return(e._context.displayName||"Context")+".Consumer";case M:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case U:return t=e.displayName||null,t!==null?t:me(e.type)||"Memo";case G:t=e._payload,e=e._init;try{return me(e(t))}catch{}}return null}var fe=Array.isArray,C=r.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ne=i.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,te={pending:!1,data:null,method:null,action:null},q=[],z=-1;function b(e){return{current:e}}function T(e){0>z||(e.current=q[z],q[z]=null,z--)}function k(e,t){z++,q[z]=e.current,e.current=t}var Q=b(null),ue=b(null),ie=b(null),he=b(null);function B(e,t){switch(k(ie,t),k(ue,e),k(Q,null),t.nodeType){case 9:case 11:e=(e=t.documentElement)&&(e=e.namespaceURI)?mm(e):0;break;default:if(e=t.tagName,t=t.namespaceURI)t=mm(t),e=gm(t,e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}T(Q),k(Q,e)}function le(){T(Q),T(ue),T(ie)}function J(e){e.memoizedState!==null&&k(he,e);var t=Q.current,a=gm(t,e.type);t!==a&&(k(ue,e),k(Q,a))}function ee(e){ue.current===e&&(T(Q),T(ue)),he.current===e&&(T(he),Jr._currentValue=te)}var ye,ve;function Ce(e){if(ye===void 0)try{throw Error()}catch(a){var t=a.stack.trim().match(/\n( *(at )?)/);ye=t&&t[1]||"",ve=-1<a.stack.indexOf(`
    at`)?" (<anonymous>)":-1<a.stack.indexOf("@")?"@unknown:0:0":""}return`
`+ye+e+ve}var it=!1;function be(e,t){if(!e||it)return"";it=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var s={DetermineComponentFrameRoot:function(){try{if(t){var de=function(){throw Error()};if(Object.defineProperty(de.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(de,[])}catch(se){var X=se}Reflect.construct(e,[],de)}else{try{de.call()}catch(se){X=se}e.call(de.prototype)}}else{try{throw Error()}catch(se){X=se}(de=e())&&typeof de.catch=="function"&&de.catch(function(){})}}catch(se){if(se&&X&&typeof se.stack=="string")return[se.stack,X.stack]}return[null,null]}};s.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var c=Object.getOwnPropertyDescriptor(s.DetermineComponentFrameRoot,"name");c&&c.configurable&&Object.defineProperty(s.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var u=s.DetermineComponentFrameRoot(),x=u[0],S=u[1];if(x&&S){var R=x.split(`
`),K=S.split(`
`);for(c=s=0;s<R.length&&!R[s].includes("DetermineComponentFrameRoot");)s++;for(;c<K.length&&!K[c].includes("DetermineComponentFrameRoot");)c++;if(s===R.length||c===K.length)for(s=R.length-1,c=K.length-1;1<=s&&0<=c&&R[s]!==K[c];)c--;for(;1<=s&&0<=c;s--,c--)if(R[s]!==K[c]){if(s!==1||c!==1)do if(s--,c--,0>c||R[s]!==K[c]){var oe=`
`+R[s].replace(" at new "," at ");return e.displayName&&oe.includes("<anonymous>")&&(oe=oe.replace("<anonymous>",e.displayName)),oe}while(1<=s&&0<=c);break}}}finally{it=!1,Error.prepareStackTrace=a}return(a=e?e.displayName||e.name:"")?Ce(a):""}function pe(e,t){switch(e.tag){case 26:case 27:case 5:return Ce(e.type);case 16:return Ce("Lazy");case 13:return e.child!==t&&t!==null?Ce("Suspense Fallback"):Ce("Suspense");case 19:return Ce("SuspenseList");case 0:case 15:return be(e.type,!1);case 11:return be(e.type.render,!1);case 1:return be(e.type,!0);case 31:return Ce("Activity");default:return""}}function Pe(e){try{var t="",a=null;do t+=pe(e,a),a=e,e=e.return;while(e);return t}catch(s){return`
Error generating stack: `+s.message+`
`+s.stack}}var Qe=Object.prototype.hasOwnProperty,re=n.unstable_scheduleCallback,Ae=n.unstable_cancelCallback,Re=n.unstable_shouldYield,Xe=n.unstable_requestPaint,ke=n.unstable_now,ze=n.unstable_getCurrentPriorityLevel,Ge=n.unstable_ImmediatePriority,Ze=n.unstable_UserBlockingPriority,dt=n.unstable_NormalPriority,ts=n.unstable_LowPriority,Cn=n.unstable_IdlePriority,vn=n.log,Sn=n.unstable_setDisableYieldValue,Dt=null,vt=null;function qt(e){if(typeof vn=="function"&&Sn(e),vt&&typeof vt.setStrictMode=="function")try{vt.setStrictMode(Dt,e)}catch{}}var It=Math.clz32?Math.clz32:ml,ca=Math.log,Da=Math.LN2;function ml(e){return e>>>=0,e===0?32:31-(ca(e)/Da|0)|0}var xe=256,je=262144,_e=4194304;function Ke(e){var t=e&42;if(t!==0)return t;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return e&261888;case 262144:case 524288:case 1048576:case 2097152:return e&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return e&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function Je(e,t,a){var s=e.pendingLanes;if(s===0)return 0;var c=0,u=e.suspendedLanes,x=e.pingedLanes;e=e.warmLanes;var S=s&134217727;return S!==0?(s=S&~u,s!==0?c=Ke(s):(x&=S,x!==0?c=Ke(x):a||(a=S&~e,a!==0&&(c=Ke(a))))):(S=s&~u,S!==0?c=Ke(S):x!==0?c=Ke(x):a||(a=s&~e,a!==0&&(c=Ke(a)))),c===0?0:t!==0&&t!==c&&(t&u)===0&&(u=c&-c,a=t&-t,u>=a||u===32&&(a&4194048)!==0)?t:c}function Le(e,t){return(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&t)===0}function Nt(e,t){switch(e){case 1:case 2:case 4:case 8:case 64:return t+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function ht(){var e=_e;return _e<<=1,(_e&62914560)===0&&(_e=4194304),e}function mt(e){for(var t=[],a=0;31>a;a++)t.push(e);return t}function sa(e,t){e.pendingLanes|=t,t!==268435456&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function Xt(e,t,a,s,c,u){var x=e.pendingLanes;e.pendingLanes=a,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=a,e.entangledLanes&=a,e.errorRecoveryDisabledLanes&=a,e.shellSuspendCounter=0;var S=e.entanglements,R=e.expirationTimes,K=e.hiddenUpdates;for(a=x&~a;0<a;){var oe=31-It(a),de=1<<oe;S[oe]=0,R[oe]=-1;var X=K[oe];if(X!==null)for(K[oe]=null,oe=0;oe<X.length;oe++){var se=X[oe];se!==null&&(se.lane&=-536870913)}a&=~de}s!==0&&Xa(e,s,0),u!==0&&c===0&&e.tag!==0&&(e.suspendedLanes|=u&~(x&~t))}function Xa(e,t,a){e.pendingLanes|=t,e.suspendedLanes&=~t;var s=31-It(t);e.entangledLanes|=t,e.entanglements[s]=e.entanglements[s]|1073741824|a&261930}function Ja(e,t){var a=e.entangledLanes|=t;for(e=e.entanglements;a;){var s=31-It(a),c=1<<s;c&t|e[s]&t&&(e[s]|=t),a&=~c}}function en(e,t){var a=t&-t;return a=(a&42)!==0?1:tn(a),(a&(e.suspendedLanes|t))!==0?0:a}function tn(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function an(e){return e&=-e,2<e?8<e?(e&134217727)!==0?32:268435456:8:2}function Ls(){var e=ne.p;return e!==0?e:(e=window.event,e===void 0?32:Bm(e.type))}function Ms(e,t){var a=ne.p;try{return ne.p=e,t()}finally{ne.p=a}}var za=Math.random().toString(36).slice(2),Yt="__reactFiber$"+za,la="__reactProps$"+za,as="__reactContainer$"+za,ur="__reactEvents$"+za,yc="__reactListeners$"+za,bc="__reactHandles$"+za,Ai="__reactResources$"+za,ns="__reactMarker$"+za;function dr(e){delete e[Yt],delete e[la],delete e[ur],delete e[yc],delete e[bc]}function ss(e){var t=e[Yt];if(t)return t;for(var a=e.parentNode;a;){if(t=a[as]||a[Yt]){if(a=t.alternate,t.child!==null||a!==null&&a.child!==null)for(e=wm(e);e!==null;){if(a=e[Yt])return a;e=wm(e)}return t}e=a,a=e.parentNode}return null}function ls(e){if(e=e[Yt]||e[as]){var t=e.tag;if(t===5||t===6||t===13||t===31||t===26||t===27||t===3)return e}return null}function Us(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e.stateNode;throw Error(o(33))}function rs(e){var t=e[Ai];return t||(t=e[Ai]={hoistableStyles:new Map,hoistableScripts:new Map}),t}function zt(e){e[ns]=!0}var Ti=new Set,ji={};function Rn(e,t){nn(e,t),nn(e+"Capture",t)}function nn(e,t){for(ji[e]=t,e=0;e<t.length;e++)Ti.add(t[e])}var vc=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),fr={},pr={};function u0(e){return Qe.call(pr,e)?!0:Qe.call(fr,e)?!1:vc.test(e)?pr[e]=!0:(fr[e]=!0,!1)}function hr(e,t,a){if(u0(t))if(a===null)e.removeAttribute(t);else{switch(typeof a){case"undefined":case"function":case"symbol":e.removeAttribute(t);return;case"boolean":var s=t.toLowerCase().slice(0,5);if(s!=="data-"&&s!=="aria-"){e.removeAttribute(t);return}}e.setAttribute(t,""+a)}}function mr(e,t,a){if(a===null)e.removeAttribute(t);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(t);return}e.setAttribute(t,""+a)}}function En(e,t,a,s){if(s===null)e.removeAttribute(a);else{switch(typeof s){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(a);return}e.setAttributeNS(t,a,""+s)}}function Na(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Se(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function De(e,t,a){var s=Object.getOwnPropertyDescriptor(e.constructor.prototype,t);if(!e.hasOwnProperty(t)&&typeof s<"u"&&typeof s.get=="function"&&typeof s.set=="function"){var c=s.get,u=s.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return c.call(this)},set:function(x){a=""+x,u.call(this,x)}}),Object.defineProperty(e,t,{enumerable:s.enumerable}),{getValue:function(){return a},setValue:function(x){a=""+x},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Me(e){if(!e._valueTracker){var t=Se(e)?"checked":"value";e._valueTracker=De(e,t,""+e[t])}}function Ie(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var a=t.getValue(),s="";return e&&(s=Se(e)?e.checked?"true":"false":e.value),e=s,e!==a?(t.setValue(e),!0):!1}function $e(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}var gt=/[\n"\\]/g;function St(e){return e.replace(gt,function(t){return"\\"+t.charCodeAt(0).toString(16)+" "})}function Bt(e,t,a,s,c,u,x,S){e.name="",x!=null&&typeof x!="function"&&typeof x!="symbol"&&typeof x!="boolean"?e.type=x:e.removeAttribute("type"),t!=null?x==="number"?(t===0&&e.value===""||e.value!=t)&&(e.value=""+Na(t)):e.value!==""+Na(t)&&(e.value=""+Na(t)):x!=="submit"&&x!=="reset"||e.removeAttribute("value"),t!=null?wn(e,x,Na(t)):a!=null?wn(e,x,Na(a)):s!=null&&e.removeAttribute("value"),c==null&&u!=null&&(e.defaultChecked=!!u),c!=null&&(e.checked=c&&typeof c!="function"&&typeof c!="symbol"),S!=null&&typeof S!="function"&&typeof S!="symbol"&&typeof S!="boolean"?e.name=""+Na(S):e.removeAttribute("name")}function ha(e,t,a,s,c,u,x,S){if(u!=null&&typeof u!="function"&&typeof u!="symbol"&&typeof u!="boolean"&&(e.type=u),t!=null||a!=null){if(!(u!=="submit"&&u!=="reset"||t!=null)){Me(e);return}a=a!=null?""+Na(a):"",t=t!=null?""+Na(t):a,S||t===e.value||(e.value=t),e.defaultValue=t}s=s??c,s=typeof s!="function"&&typeof s!="symbol"&&!!s,e.checked=S?e.checked:!!s,e.defaultChecked=!!s,x!=null&&typeof x!="function"&&typeof x!="symbol"&&typeof x!="boolean"&&(e.name=x),Me(e)}function wn(e,t,a){t==="number"&&$e(e.ownerDocument)===e||e.defaultValue===""+a||(e.defaultValue=""+a)}function _a(e,t,a,s){if(e=e.options,t){t={};for(var c=0;c<a.length;c++)t["$"+a[c]]=!0;for(a=0;a<e.length;a++)c=t.hasOwnProperty("$"+e[a].value),e[a].selected!==c&&(e[a].selected=c),c&&s&&(e[a].defaultSelected=!0)}else{for(a=""+Na(a),t=null,c=0;c<e.length;c++){if(e[c].value===a){e[c].selected=!0,s&&(e[c].defaultSelected=!0);return}t!==null||e[c].disabled||(t=e[c])}t!==null&&(t.selected=!0)}}function gl(e,t,a){if(t!=null&&(t=""+Na(t),t!==e.value&&(e.value=t),a==null)){e.defaultValue!==t&&(e.defaultValue=t);return}e.defaultValue=a!=null?""+Na(a):""}function d0(e,t,a,s){if(t==null){if(s!=null){if(a!=null)throw Error(o(92));if(fe(s)){if(1<s.length)throw Error(o(93));s=s[0]}a=s}a==null&&(a=""),t=a}a=Na(t),e.defaultValue=a,s=e.textContent,s===a&&s!==""&&s!==null&&(e.value=s),Me(e)}function xl(e,t){if(t){var a=e.firstChild;if(a&&a===e.lastChild&&a.nodeType===3){a.nodeValue=t;return}}e.textContent=t}var vv=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function f0(e,t,a){var s=t.indexOf("--")===0;a==null||typeof a=="boolean"||a===""?s?e.setProperty(t,""):t==="float"?e.cssFloat="":e[t]="":s?e.setProperty(t,a):typeof a!="number"||a===0||vv.has(t)?t==="float"?e.cssFloat=a:e[t]=(""+a).trim():e[t]=a+"px"}function p0(e,t,a){if(t!=null&&typeof t!="object")throw Error(o(62));if(e=e.style,a!=null){for(var s in a)!a.hasOwnProperty(s)||t!=null&&t.hasOwnProperty(s)||(s.indexOf("--")===0?e.setProperty(s,""):s==="float"?e.cssFloat="":e[s]="");for(var c in t)s=t[c],t.hasOwnProperty(c)&&a[c]!==s&&f0(e,c,s)}else for(var u in t)t.hasOwnProperty(u)&&f0(e,u,t[u])}function Sc(e){if(e.indexOf("-")===-1)return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Sv=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Ev=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Ii(e){return Ev.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}function kn(){}var Ec=null;function wc(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var yl=null,bl=null;function h0(e){var t=ls(e);if(t&&(e=t.stateNode)){var a=e[la]||null;e:switch(e=t.stateNode,t.type){case"input":if(Bt(e,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name),t=a.name,a.type==="radio"&&t!=null){for(a=e;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll('input[name="'+St(""+t)+'"][type="radio"]'),t=0;t<a.length;t++){var s=a[t];if(s!==e&&s.form===e.form){var c=s[la]||null;if(!c)throw Error(o(90));Bt(s,c.value,c.defaultValue,c.defaultValue,c.checked,c.defaultChecked,c.type,c.name)}}for(t=0;t<a.length;t++)s=a[t],s.form===e.form&&Ie(s)}break e;case"textarea":gl(e,a.value,a.defaultValue);break e;case"select":t=a.value,t!=null&&_a(e,!!a.multiple,t,!1)}}}var Nc=!1;function m0(e,t,a){if(Nc)return e(t,a);Nc=!0;try{var s=e(t);return s}finally{if(Nc=!1,(yl!==null||bl!==null)&&(xo(),yl&&(t=yl,e=bl,bl=yl=null,h0(t),e)))for(t=0;t<e.length;t++)h0(e[t])}}function gr(e,t){var a=e.stateNode;if(a===null)return null;var s=a[la]||null;if(s===null)return null;a=s[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(s=!s.disabled)||(e=e.type,s=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!s;break e;default:e=!1}if(e)return null;if(a&&typeof a!="function")throw Error(o(231,t,typeof a));return a}var Ln=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),_c=!1;if(Ln)try{var xr={};Object.defineProperty(xr,"passive",{get:function(){_c=!0}}),window.addEventListener("test",xr,xr),window.removeEventListener("test",xr,xr)}catch{_c=!1}var is=null,Ac=null,Oi=null;function g0(){if(Oi)return Oi;var e,t=Ac,a=t.length,s,c="value"in is?is.value:is.textContent,u=c.length;for(e=0;e<a&&t[e]===c[e];e++);var x=a-e;for(s=1;s<=x&&t[a-s]===c[u-s];s++);return Oi=c.slice(e,1<s?1-s:void 0)}function Ci(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Ri(){return!0}function x0(){return!1}function ma(e){function t(a,s,c,u,x){this._reactName=a,this._targetInst=c,this.type=s,this.nativeEvent=u,this.target=x,this.currentTarget=null;for(var S in e)e.hasOwnProperty(S)&&(a=e[S],this[S]=a?a(u):u[S]);return this.isDefaultPrevented=(u.defaultPrevented!=null?u.defaultPrevented:u.returnValue===!1)?Ri:x0,this.isPropagationStopped=x0,this}return v(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=Ri)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=Ri)},persist:function(){},isPersistent:Ri}),t}var Ds={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ki=ma(Ds),yr=v({},Ds,{view:0,detail:0}),wv=ma(yr),Tc,jc,br,Li=v({},yr,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Oc,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==br&&(br&&e.type==="mousemove"?(Tc=e.screenX-br.screenX,jc=e.screenY-br.screenY):jc=Tc=0,br=e),Tc)},movementY:function(e){return"movementY"in e?e.movementY:jc}}),y0=ma(Li),Nv=v({},Li,{dataTransfer:0}),_v=ma(Nv),Av=v({},yr,{relatedTarget:0}),Ic=ma(Av),Tv=v({},Ds,{animationName:0,elapsedTime:0,pseudoElement:0}),jv=ma(Tv),Iv=v({},Ds,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Ov=ma(Iv),Cv=v({},Ds,{data:0}),b0=ma(Cv),Rv={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},kv={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Lv={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Mv(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=Lv[e])?!!t[e]:!1}function Oc(){return Mv}var Uv=v({},yr,{key:function(e){if(e.key){var t=Rv[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Ci(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?kv[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Oc,charCode:function(e){return e.type==="keypress"?Ci(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Ci(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),Dv=ma(Uv),zv=v({},Li,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),v0=ma(zv),Bv=v({},yr,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Oc}),Hv=ma(Bv),Gv=v({},Ds,{propertyName:0,elapsedTime:0,pseudoElement:0}),Pv=ma(Gv),Vv=v({},Li,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),qv=ma(Vv),Yv=v({},Ds,{newState:0,oldState:0}),Fv=ma(Yv),$v=[9,13,27,32],Cc=Ln&&"CompositionEvent"in window,vr=null;Ln&&"documentMode"in document&&(vr=document.documentMode);var Wv=Ln&&"TextEvent"in window&&!vr,S0=Ln&&(!Cc||vr&&8<vr&&11>=vr),E0=" ",w0=!1;function N0(e,t){switch(e){case"keyup":return $v.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function _0(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var vl=!1;function Qv(e,t){switch(e){case"compositionend":return _0(t);case"keypress":return t.which!==32?null:(w0=!0,E0);case"textInput":return e=t.data,e===E0&&w0?null:e;default:return null}}function Zv(e,t){if(vl)return e==="compositionend"||!Cc&&N0(e,t)?(e=g0(),Oi=Ac=is=null,vl=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return S0&&t.locale!=="ko"?null:t.data;default:return null}}var Kv={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function A0(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!Kv[e.type]:t==="textarea"}function T0(e,t,a,s){yl?bl?bl.push(s):bl=[s]:yl=s,t=No(t,"onChange"),0<t.length&&(a=new ki("onChange","change",null,a,s),e.push({event:a,listeners:t}))}var Sr=null,Er=null;function Xv(e){cm(e,0)}function Mi(e){var t=Us(e);if(Ie(t))return e}function j0(e,t){if(e==="change")return t}var I0=!1;if(Ln){var Rc;if(Ln){var kc="oninput"in document;if(!kc){var O0=document.createElement("div");O0.setAttribute("oninput","return;"),kc=typeof O0.oninput=="function"}Rc=kc}else Rc=!1;I0=Rc&&(!document.documentMode||9<document.documentMode)}function C0(){Sr&&(Sr.detachEvent("onpropertychange",R0),Er=Sr=null)}function R0(e){if(e.propertyName==="value"&&Mi(Er)){var t=[];T0(t,Er,e,wc(e)),m0(Xv,t)}}function Jv(e,t,a){e==="focusin"?(C0(),Sr=t,Er=a,Sr.attachEvent("onpropertychange",R0)):e==="focusout"&&C0()}function e1(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Mi(Er)}function t1(e,t){if(e==="click")return Mi(t)}function a1(e,t){if(e==="input"||e==="change")return Mi(t)}function n1(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Aa=typeof Object.is=="function"?Object.is:n1;function wr(e,t){if(Aa(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var a=Object.keys(e),s=Object.keys(t);if(a.length!==s.length)return!1;for(s=0;s<a.length;s++){var c=a[s];if(!Qe.call(t,c)||!Aa(e[c],t[c]))return!1}return!0}function k0(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function L0(e,t){var a=k0(e);e=0;for(var s;a;){if(a.nodeType===3){if(s=e+a.textContent.length,e<=t&&s>=t)return{node:a,offset:t-e};e=s}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=k0(a)}}function M0(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?M0(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function U0(e){e=e!=null&&e.ownerDocument!=null&&e.ownerDocument.defaultView!=null?e.ownerDocument.defaultView:window;for(var t=$e(e.document);t instanceof e.HTMLIFrameElement;){try{var a=typeof t.contentWindow.location.href=="string"}catch{a=!1}if(a)e=t.contentWindow;else break;t=$e(e.document)}return t}function Lc(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}var s1=Ln&&"documentMode"in document&&11>=document.documentMode,Sl=null,Mc=null,Nr=null,Uc=!1;function D0(e,t,a){var s=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;Uc||Sl==null||Sl!==$e(s)||(s=Sl,"selectionStart"in s&&Lc(s)?s={start:s.selectionStart,end:s.selectionEnd}:(s=(s.ownerDocument&&s.ownerDocument.defaultView||window).getSelection(),s={anchorNode:s.anchorNode,anchorOffset:s.anchorOffset,focusNode:s.focusNode,focusOffset:s.focusOffset}),Nr&&wr(Nr,s)||(Nr=s,s=No(Mc,"onSelect"),0<s.length&&(t=new ki("onSelect","select",null,t,a),e.push({event:t,listeners:s}),t.target=Sl)))}function zs(e,t){var a={};return a[e.toLowerCase()]=t.toLowerCase(),a["Webkit"+e]="webkit"+t,a["Moz"+e]="moz"+t,a}var El={animationend:zs("Animation","AnimationEnd"),animationiteration:zs("Animation","AnimationIteration"),animationstart:zs("Animation","AnimationStart"),transitionrun:zs("Transition","TransitionRun"),transitionstart:zs("Transition","TransitionStart"),transitioncancel:zs("Transition","TransitionCancel"),transitionend:zs("Transition","TransitionEnd")},Dc={},z0={};Ln&&(z0=document.createElement("div").style,"AnimationEvent"in window||(delete El.animationend.animation,delete El.animationiteration.animation,delete El.animationstart.animation),"TransitionEvent"in window||delete El.transitionend.transition);function Bs(e){if(Dc[e])return Dc[e];if(!El[e])return e;var t=El[e],a;for(a in t)if(t.hasOwnProperty(a)&&a in z0)return Dc[e]=t[a];return e}var B0=Bs("animationend"),H0=Bs("animationiteration"),G0=Bs("animationstart"),l1=Bs("transitionrun"),r1=Bs("transitionstart"),i1=Bs("transitioncancel"),P0=Bs("transitionend"),V0=new Map,zc="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");zc.push("scrollEnd");function sn(e,t){V0.set(e,t),Rn(t,[e])}var Ui=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)},Ba=[],wl=0,Bc=0;function Di(){for(var e=wl,t=Bc=wl=0;t<e;){var a=Ba[t];Ba[t++]=null;var s=Ba[t];Ba[t++]=null;var c=Ba[t];Ba[t++]=null;var u=Ba[t];if(Ba[t++]=null,s!==null&&c!==null){var x=s.pending;x===null?c.next=c:(c.next=x.next,x.next=c),s.pending=c}u!==0&&q0(a,c,u)}}function zi(e,t,a,s){Ba[wl++]=e,Ba[wl++]=t,Ba[wl++]=a,Ba[wl++]=s,Bc|=s,e.lanes|=s,e=e.alternate,e!==null&&(e.lanes|=s)}function Hc(e,t,a,s){return zi(e,t,a,s),Bi(e)}function Hs(e,t){return zi(e,null,null,t),Bi(e)}function q0(e,t,a){e.lanes|=a;var s=e.alternate;s!==null&&(s.lanes|=a);for(var c=!1,u=e.return;u!==null;)u.childLanes|=a,s=u.alternate,s!==null&&(s.childLanes|=a),u.tag===22&&(e=u.stateNode,e===null||e._visibility&1||(c=!0)),e=u,u=u.return;return e.tag===3?(u=e.stateNode,c&&t!==null&&(c=31-It(a),e=u.hiddenUpdates,s=e[c],s===null?e[c]=[t]:s.push(t),t.lane=a|536870912),u):null}function Bi(e){if(50<Fr)throw Fr=0,Qu=null,Error(o(185));for(var t=e.return;t!==null;)e=t,t=e.return;return e.tag===3?e.stateNode:null}var Nl={};function o1(e,t,a,s){this.tag=e,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=s,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ta(e,t,a,s){return new o1(e,t,a,s)}function Gc(e){return e=e.prototype,!(!e||!e.isReactComponent)}function Mn(e,t){var a=e.alternate;return a===null?(a=Ta(e.tag,t,e.key,e.mode),a.elementType=e.elementType,a.type=e.type,a.stateNode=e.stateNode,a.alternate=e,e.alternate=a):(a.pendingProps=t,a.type=e.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=e.flags&65011712,a.childLanes=e.childLanes,a.lanes=e.lanes,a.child=e.child,a.memoizedProps=e.memoizedProps,a.memoizedState=e.memoizedState,a.updateQueue=e.updateQueue,t=e.dependencies,a.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},a.sibling=e.sibling,a.index=e.index,a.ref=e.ref,a.refCleanup=e.refCleanup,a}function Y0(e,t){e.flags&=65011714;var a=e.alternate;return a===null?(e.childLanes=0,e.lanes=t,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=a.childLanes,e.lanes=a.lanes,e.child=a.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=a.memoizedProps,e.memoizedState=a.memoizedState,e.updateQueue=a.updateQueue,e.type=a.type,t=a.dependencies,e.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),e}function Hi(e,t,a,s,c,u){var x=0;if(s=e,typeof e=="function")Gc(e)&&(x=1);else if(typeof e=="string")x=pS(e,a,Q.current)?26:e==="html"||e==="head"||e==="body"?27:5;else e:switch(e){case A:return e=Ta(31,a,t,c),e.elementType=A,e.lanes=u,e;case I:return Gs(a.children,c,u,t);case _:x=8,c|=24;break;case j:return e=Ta(12,a,t,c|2),e.elementType=j,e.lanes=u,e;case P:return e=Ta(13,a,t,c),e.elementType=P,e.lanes=u,e;case Y:return e=Ta(19,a,t,c),e.elementType=Y,e.lanes=u,e;default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case D:x=10;break e;case L:x=9;break e;case M:x=11;break e;case U:x=14;break e;case G:x=16,s=null;break e}x=29,a=Error(o(130,e===null?"null":typeof e,"")),s=null}return t=Ta(x,a,t,c),t.elementType=e,t.type=s,t.lanes=u,t}function Gs(e,t,a,s){return e=Ta(7,e,s,t),e.lanes=a,e}function Pc(e,t,a){return e=Ta(6,e,null,t),e.lanes=a,e}function F0(e){var t=Ta(18,null,null,0);return t.stateNode=e,t}function Vc(e,t,a){return t=Ta(4,e.children!==null?e.children:[],e.key,t),t.lanes=a,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}var $0=new WeakMap;function Ha(e,t){if(typeof e=="object"&&e!==null){var a=$0.get(e);return a!==void 0?a:(t={value:e,source:t,stack:Pe(t)},$0.set(e,t),t)}return{value:e,source:t,stack:Pe(t)}}var _l=[],Al=0,Gi=null,_r=0,Ga=[],Pa=0,os=null,Nn=1,_n="";function Un(e,t){_l[Al++]=_r,_l[Al++]=Gi,Gi=e,_r=t}function W0(e,t,a){Ga[Pa++]=Nn,Ga[Pa++]=_n,Ga[Pa++]=os,os=e;var s=Nn;e=_n;var c=32-It(s)-1;s&=~(1<<c),a+=1;var u=32-It(t)+c;if(30<u){var x=c-c%5;u=(s&(1<<x)-1).toString(32),s>>=x,c-=x,Nn=1<<32-It(t)+c|a<<c|s,_n=u+e}else Nn=1<<u|a<<c|s,_n=e}function qc(e){e.return!==null&&(Un(e,1),W0(e,1,0))}function Yc(e){for(;e===Gi;)Gi=_l[--Al],_l[Al]=null,_r=_l[--Al],_l[Al]=null;for(;e===os;)os=Ga[--Pa],Ga[Pa]=null,_n=Ga[--Pa],Ga[Pa]=null,Nn=Ga[--Pa],Ga[Pa]=null}function Q0(e,t){Ga[Pa++]=Nn,Ga[Pa++]=_n,Ga[Pa++]=os,Nn=t.id,_n=t.overflow,os=e}var Jt=null,xt=null,We=!1,cs=null,Va=!1,Fc=Error(o(519));function us(e){var t=Error(o(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Ar(Ha(t,e)),Fc}function Z0(e){var t=e.stateNode,a=e.type,s=e.memoizedProps;switch(t[Yt]=e,t[la]=s,a){case"dialog":qe("cancel",t),qe("close",t);break;case"iframe":case"object":case"embed":qe("load",t);break;case"video":case"audio":for(a=0;a<Wr.length;a++)qe(Wr[a],t);break;case"source":qe("error",t);break;case"img":case"image":case"link":qe("error",t),qe("load",t);break;case"details":qe("toggle",t);break;case"input":qe("invalid",t),ha(t,s.value,s.defaultValue,s.checked,s.defaultChecked,s.type,s.name,!0);break;case"select":qe("invalid",t);break;case"textarea":qe("invalid",t),d0(t,s.value,s.defaultValue,s.children)}a=s.children,typeof a!="string"&&typeof a!="number"&&typeof a!="bigint"||t.textContent===""+a||s.suppressHydrationWarning===!0||pm(t.textContent,a)?(s.popover!=null&&(qe("beforetoggle",t),qe("toggle",t)),s.onScroll!=null&&qe("scroll",t),s.onScrollEnd!=null&&qe("scrollend",t),s.onClick!=null&&(t.onclick=kn),t=!0):t=!1,t||us(e,!0)}function K0(e){for(Jt=e.return;Jt;)switch(Jt.tag){case 5:case 31:case 13:Va=!1;return;case 27:case 3:Va=!0;return;default:Jt=Jt.return}}function Tl(e){if(e!==Jt)return!1;if(!We)return K0(e),We=!0,!1;var t=e.tag,a;if((a=t!==3&&t!==27)&&((a=t===5)&&(a=e.type,a=!(a!=="form"&&a!=="button")||ud(e.type,e.memoizedProps)),a=!a),a&&xt&&us(e),K0(e),t===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(o(317));xt=Em(e)}else if(t===31){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(o(317));xt=Em(e)}else t===27?(t=xt,Ns(e.type)?(e=md,md=null,xt=e):xt=t):xt=Jt?Ya(e.stateNode.nextSibling):null;return!0}function Ps(){xt=Jt=null,We=!1}function $c(){var e=cs;return e!==null&&(ba===null?ba=e:ba.push.apply(ba,e),cs=null),e}function Ar(e){cs===null?cs=[e]:cs.push(e)}var Wc=b(null),Vs=null,Dn=null;function ds(e,t,a){k(Wc,t._currentValue),t._currentValue=a}function zn(e){e._currentValue=Wc.current,T(Wc)}function Qc(e,t,a){for(;e!==null;){var s=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,s!==null&&(s.childLanes|=t)):s!==null&&(s.childLanes&t)!==t&&(s.childLanes|=t),e===a)break;e=e.return}}function Zc(e,t,a,s){var c=e.child;for(c!==null&&(c.return=e);c!==null;){var u=c.dependencies;if(u!==null){var x=c.child;u=u.firstContext;e:for(;u!==null;){var S=u;u=c;for(var R=0;R<t.length;R++)if(S.context===t[R]){u.lanes|=a,S=u.alternate,S!==null&&(S.lanes|=a),Qc(u.return,a,e),s||(x=null);break e}u=S.next}}else if(c.tag===18){if(x=c.return,x===null)throw Error(o(341));x.lanes|=a,u=x.alternate,u!==null&&(u.lanes|=a),Qc(x,a,e),x=null}else x=c.child;if(x!==null)x.return=c;else for(x=c;x!==null;){if(x===e){x=null;break}if(c=x.sibling,c!==null){c.return=x.return,x=c;break}x=x.return}c=x}}function jl(e,t,a,s){e=null;for(var c=t,u=!1;c!==null;){if(!u){if((c.flags&524288)!==0)u=!0;else if((c.flags&262144)!==0)break}if(c.tag===10){var x=c.alternate;if(x===null)throw Error(o(387));if(x=x.memoizedProps,x!==null){var S=c.type;Aa(c.pendingProps.value,x.value)||(e!==null?e.push(S):e=[S])}}else if(c===he.current){if(x=c.alternate,x===null)throw Error(o(387));x.memoizedState.memoizedState!==c.memoizedState.memoizedState&&(e!==null?e.push(Jr):e=[Jr])}c=c.return}e!==null&&Zc(t,e,a,s),t.flags|=262144}function Pi(e){for(e=e.firstContext;e!==null;){if(!Aa(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function qs(e){Vs=e,Dn=null,e=e.dependencies,e!==null&&(e.firstContext=null)}function ea(e){return X0(Vs,e)}function Vi(e,t){return Vs===null&&qs(e),X0(e,t)}function X0(e,t){var a=t._currentValue;if(t={context:t,memoizedValue:a,next:null},Dn===null){if(e===null)throw Error(o(308));Dn=t,e.dependencies={lanes:0,firstContext:t},e.flags|=524288}else Dn=Dn.next=t;return a}var c1=typeof AbortController<"u"?AbortController:function(){var e=[],t=this.signal={aborted:!1,addEventListener:function(a,s){e.push(s)}};this.abort=function(){t.aborted=!0,e.forEach(function(a){return a()})}},u1=n.unstable_scheduleCallback,d1=n.unstable_NormalPriority,Ht={$$typeof:D,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Kc(){return{controller:new c1,data:new Map,refCount:0}}function Tr(e){e.refCount--,e.refCount===0&&u1(d1,function(){e.controller.abort()})}var jr=null,Xc=0,Il=0,Ol=null;function f1(e,t){if(jr===null){var a=jr=[];Xc=0,Il=td(),Ol={status:"pending",value:void 0,then:function(s){a.push(s)}}}return Xc++,t.then(J0,J0),t}function J0(){if(--Xc===0&&jr!==null){Ol!==null&&(Ol.status="fulfilled");var e=jr;jr=null,Il=0,Ol=null;for(var t=0;t<e.length;t++)(0,e[t])()}}function p1(e,t){var a=[],s={status:"pending",value:null,reason:null,then:function(c){a.push(c)}};return e.then(function(){s.status="fulfilled",s.value=t;for(var c=0;c<a.length;c++)(0,a[c])(t)},function(c){for(s.status="rejected",s.reason=c,c=0;c<a.length;c++)(0,a[c])(void 0)}),s}var ep=C.S;C.S=function(e,t){Dh=ke(),typeof t=="object"&&t!==null&&typeof t.then=="function"&&f1(e,t),ep!==null&&ep(e,t)};var Ys=b(null);function Jc(){var e=Ys.current;return e!==null?e:ft.pooledCache}function qi(e,t){t===null?k(Ys,Ys.current):k(Ys,t.pool)}function tp(){var e=Jc();return e===null?null:{parent:Ht._currentValue,pool:e}}var Cl=Error(o(460)),eu=Error(o(474)),Yi=Error(o(542)),Fi={then:function(){}};function ap(e){return e=e.status,e==="fulfilled"||e==="rejected"}function np(e,t,a){switch(a=e[a],a===void 0?e.push(t):a!==t&&(t.then(kn,kn),t=a),t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,lp(e),e;default:if(typeof t.status=="string")t.then(kn,kn);else{if(e=ft,e!==null&&100<e.shellSuspendCounter)throw Error(o(482));e=t,e.status="pending",e.then(function(s){if(t.status==="pending"){var c=t;c.status="fulfilled",c.value=s}},function(s){if(t.status==="pending"){var c=t;c.status="rejected",c.reason=s}})}switch(t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,lp(e),e}throw $s=t,Cl}}function Fs(e){try{var t=e._init;return t(e._payload)}catch(a){throw a!==null&&typeof a=="object"&&typeof a.then=="function"?($s=a,Cl):a}}var $s=null;function sp(){if($s===null)throw Error(o(459));var e=$s;return $s=null,e}function lp(e){if(e===Cl||e===Yi)throw Error(o(483))}var Rl=null,Ir=0;function $i(e){var t=Ir;return Ir+=1,Rl===null&&(Rl=[]),np(Rl,e,t)}function Or(e,t){t=t.props.ref,e.ref=t!==void 0?t:null}function Wi(e,t){throw t.$$typeof===w?Error(o(525)):(e=Object.prototype.toString.call(t),Error(o(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)))}function rp(e){function t(W,H){if(e){var Z=W.deletions;Z===null?(W.deletions=[H],W.flags|=16):Z.push(H)}}function a(W,H){if(!e)return null;for(;H!==null;)t(W,H),H=H.sibling;return null}function s(W){for(var H=new Map;W!==null;)W.key!==null?H.set(W.key,W):H.set(W.index,W),W=W.sibling;return H}function c(W,H){return W=Mn(W,H),W.index=0,W.sibling=null,W}function u(W,H,Z){return W.index=Z,e?(Z=W.alternate,Z!==null?(Z=Z.index,Z<H?(W.flags|=67108866,H):Z):(W.flags|=67108866,H)):(W.flags|=1048576,H)}function x(W){return e&&W.alternate===null&&(W.flags|=67108866),W}function S(W,H,Z,ce){return H===null||H.tag!==6?(H=Pc(Z,W.mode,ce),H.return=W,H):(H=c(H,Z),H.return=W,H)}function R(W,H,Z,ce){var Te=Z.type;return Te===I?oe(W,H,Z.props.children,ce,Z.key):H!==null&&(H.elementType===Te||typeof Te=="object"&&Te!==null&&Te.$$typeof===G&&Fs(Te)===H.type)?(H=c(H,Z.props),Or(H,Z),H.return=W,H):(H=Hi(Z.type,Z.key,Z.props,null,W.mode,ce),Or(H,Z),H.return=W,H)}function K(W,H,Z,ce){return H===null||H.tag!==4||H.stateNode.containerInfo!==Z.containerInfo||H.stateNode.implementation!==Z.implementation?(H=Vc(Z,W.mode,ce),H.return=W,H):(H=c(H,Z.children||[]),H.return=W,H)}function oe(W,H,Z,ce,Te){return H===null||H.tag!==7?(H=Gs(Z,W.mode,ce,Te),H.return=W,H):(H=c(H,Z),H.return=W,H)}function de(W,H,Z){if(typeof H=="string"&&H!==""||typeof H=="number"||typeof H=="bigint")return H=Pc(""+H,W.mode,Z),H.return=W,H;if(typeof H=="object"&&H!==null){switch(H.$$typeof){case N:return Z=Hi(H.type,H.key,H.props,null,W.mode,Z),Or(Z,H),Z.return=W,Z;case O:return H=Vc(H,W.mode,Z),H.return=W,H;case G:return H=Fs(H),de(W,H,Z)}if(fe(H)||$(H))return H=Gs(H,W.mode,Z,null),H.return=W,H;if(typeof H.then=="function")return de(W,$i(H),Z);if(H.$$typeof===D)return de(W,Vi(W,H),Z);Wi(W,H)}return null}function X(W,H,Z,ce){var Te=H!==null?H.key:null;if(typeof Z=="string"&&Z!==""||typeof Z=="number"||typeof Z=="bigint")return Te!==null?null:S(W,H,""+Z,ce);if(typeof Z=="object"&&Z!==null){switch(Z.$$typeof){case N:return Z.key===Te?R(W,H,Z,ce):null;case O:return Z.key===Te?K(W,H,Z,ce):null;case G:return Z=Fs(Z),X(W,H,Z,ce)}if(fe(Z)||$(Z))return Te!==null?null:oe(W,H,Z,ce,null);if(typeof Z.then=="function")return X(W,H,$i(Z),ce);if(Z.$$typeof===D)return X(W,H,Vi(W,Z),ce);Wi(W,Z)}return null}function se(W,H,Z,ce,Te){if(typeof ce=="string"&&ce!==""||typeof ce=="number"||typeof ce=="bigint")return W=W.get(Z)||null,S(H,W,""+ce,Te);if(typeof ce=="object"&&ce!==null){switch(ce.$$typeof){case N:return W=W.get(ce.key===null?Z:ce.key)||null,R(H,W,ce,Te);case O:return W=W.get(ce.key===null?Z:ce.key)||null,K(H,W,ce,Te);case G:return ce=Fs(ce),se(W,H,Z,ce,Te)}if(fe(ce)||$(ce))return W=W.get(Z)||null,oe(H,W,ce,Te,null);if(typeof ce.then=="function")return se(W,H,Z,$i(ce),Te);if(ce.$$typeof===D)return se(W,H,Z,Vi(H,ce),Te);Wi(H,ce)}return null}function Ee(W,H,Z,ce){for(var Te=null,et=null,Ne=H,He=H=0,Fe=null;Ne!==null&&He<Z.length;He++){Ne.index>He?(Fe=Ne,Ne=null):Fe=Ne.sibling;var tt=X(W,Ne,Z[He],ce);if(tt===null){Ne===null&&(Ne=Fe);break}e&&Ne&&tt.alternate===null&&t(W,Ne),H=u(tt,H,He),et===null?Te=tt:et.sibling=tt,et=tt,Ne=Fe}if(He===Z.length)return a(W,Ne),We&&Un(W,He),Te;if(Ne===null){for(;He<Z.length;He++)Ne=de(W,Z[He],ce),Ne!==null&&(H=u(Ne,H,He),et===null?Te=Ne:et.sibling=Ne,et=Ne);return We&&Un(W,He),Te}for(Ne=s(Ne);He<Z.length;He++)Fe=se(Ne,W,He,Z[He],ce),Fe!==null&&(e&&Fe.alternate!==null&&Ne.delete(Fe.key===null?He:Fe.key),H=u(Fe,H,He),et===null?Te=Fe:et.sibling=Fe,et=Fe);return e&&Ne.forEach(function(Is){return t(W,Is)}),We&&Un(W,He),Te}function Oe(W,H,Z,ce){if(Z==null)throw Error(o(151));for(var Te=null,et=null,Ne=H,He=H=0,Fe=null,tt=Z.next();Ne!==null&&!tt.done;He++,tt=Z.next()){Ne.index>He?(Fe=Ne,Ne=null):Fe=Ne.sibling;var Is=X(W,Ne,tt.value,ce);if(Is===null){Ne===null&&(Ne=Fe);break}e&&Ne&&Is.alternate===null&&t(W,Ne),H=u(Is,H,He),et===null?Te=Is:et.sibling=Is,et=Is,Ne=Fe}if(tt.done)return a(W,Ne),We&&Un(W,He),Te;if(Ne===null){for(;!tt.done;He++,tt=Z.next())tt=de(W,tt.value,ce),tt!==null&&(H=u(tt,H,He),et===null?Te=tt:et.sibling=tt,et=tt);return We&&Un(W,He),Te}for(Ne=s(Ne);!tt.done;He++,tt=Z.next())tt=se(Ne,W,He,tt.value,ce),tt!==null&&(e&&tt.alternate!==null&&Ne.delete(tt.key===null?He:tt.key),H=u(tt,H,He),et===null?Te=tt:et.sibling=tt,et=tt);return e&&Ne.forEach(function(NS){return t(W,NS)}),We&&Un(W,He),Te}function ut(W,H,Z,ce){if(typeof Z=="object"&&Z!==null&&Z.type===I&&Z.key===null&&(Z=Z.props.children),typeof Z=="object"&&Z!==null){switch(Z.$$typeof){case N:e:{for(var Te=Z.key;H!==null;){if(H.key===Te){if(Te=Z.type,Te===I){if(H.tag===7){a(W,H.sibling),ce=c(H,Z.props.children),ce.return=W,W=ce;break e}}else if(H.elementType===Te||typeof Te=="object"&&Te!==null&&Te.$$typeof===G&&Fs(Te)===H.type){a(W,H.sibling),ce=c(H,Z.props),Or(ce,Z),ce.return=W,W=ce;break e}a(W,H);break}else t(W,H);H=H.sibling}Z.type===I?(ce=Gs(Z.props.children,W.mode,ce,Z.key),ce.return=W,W=ce):(ce=Hi(Z.type,Z.key,Z.props,null,W.mode,ce),Or(ce,Z),ce.return=W,W=ce)}return x(W);case O:e:{for(Te=Z.key;H!==null;){if(H.key===Te)if(H.tag===4&&H.stateNode.containerInfo===Z.containerInfo&&H.stateNode.implementation===Z.implementation){a(W,H.sibling),ce=c(H,Z.children||[]),ce.return=W,W=ce;break e}else{a(W,H);break}else t(W,H);H=H.sibling}ce=Vc(Z,W.mode,ce),ce.return=W,W=ce}return x(W);case G:return Z=Fs(Z),ut(W,H,Z,ce)}if(fe(Z))return Ee(W,H,Z,ce);if($(Z)){if(Te=$(Z),typeof Te!="function")throw Error(o(150));return Z=Te.call(Z),Oe(W,H,Z,ce)}if(typeof Z.then=="function")return ut(W,H,$i(Z),ce);if(Z.$$typeof===D)return ut(W,H,Vi(W,Z),ce);Wi(W,Z)}return typeof Z=="string"&&Z!==""||typeof Z=="number"||typeof Z=="bigint"?(Z=""+Z,H!==null&&H.tag===6?(a(W,H.sibling),ce=c(H,Z),ce.return=W,W=ce):(a(W,H),ce=Pc(Z,W.mode,ce),ce.return=W,W=ce),x(W)):a(W,H)}return function(W,H,Z,ce){try{Ir=0;var Te=ut(W,H,Z,ce);return Rl=null,Te}catch(Ne){if(Ne===Cl||Ne===Yi)throw Ne;var et=Ta(29,Ne,null,W.mode);return et.lanes=ce,et.return=W,et}finally{}}}var Ws=rp(!0),ip=rp(!1),fs=!1;function tu(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function au(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function ps(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function hs(e,t,a){var s=e.updateQueue;if(s===null)return null;if(s=s.shared,(at&2)!==0){var c=s.pending;return c===null?t.next=t:(t.next=c.next,c.next=t),s.pending=t,t=Bi(e),q0(e,null,a),t}return zi(e,s,t,a),Bi(e)}function Cr(e,t,a){if(t=t.updateQueue,t!==null&&(t=t.shared,(a&4194048)!==0)){var s=t.lanes;s&=e.pendingLanes,a|=s,t.lanes=a,Ja(e,a)}}function nu(e,t){var a=e.updateQueue,s=e.alternate;if(s!==null&&(s=s.updateQueue,a===s)){var c=null,u=null;if(a=a.firstBaseUpdate,a!==null){do{var x={lane:a.lane,tag:a.tag,payload:a.payload,callback:null,next:null};u===null?c=u=x:u=u.next=x,a=a.next}while(a!==null);u===null?c=u=t:u=u.next=t}else c=u=t;a={baseState:s.baseState,firstBaseUpdate:c,lastBaseUpdate:u,shared:s.shared,callbacks:s.callbacks},e.updateQueue=a;return}e=a.lastBaseUpdate,e===null?a.firstBaseUpdate=t:e.next=t,a.lastBaseUpdate=t}var su=!1;function Rr(){if(su){var e=Ol;if(e!==null)throw e}}function kr(e,t,a,s){su=!1;var c=e.updateQueue;fs=!1;var u=c.firstBaseUpdate,x=c.lastBaseUpdate,S=c.shared.pending;if(S!==null){c.shared.pending=null;var R=S,K=R.next;R.next=null,x===null?u=K:x.next=K,x=R;var oe=e.alternate;oe!==null&&(oe=oe.updateQueue,S=oe.lastBaseUpdate,S!==x&&(S===null?oe.firstBaseUpdate=K:S.next=K,oe.lastBaseUpdate=R))}if(u!==null){var de=c.baseState;x=0,oe=K=R=null,S=u;do{var X=S.lane&-536870913,se=X!==S.lane;if(se?(Ye&X)===X:(s&X)===X){X!==0&&X===Il&&(su=!0),oe!==null&&(oe=oe.next={lane:0,tag:S.tag,payload:S.payload,callback:null,next:null});e:{var Ee=e,Oe=S;X=t;var ut=a;switch(Oe.tag){case 1:if(Ee=Oe.payload,typeof Ee=="function"){de=Ee.call(ut,de,X);break e}de=Ee;break e;case 3:Ee.flags=Ee.flags&-65537|128;case 0:if(Ee=Oe.payload,X=typeof Ee=="function"?Ee.call(ut,de,X):Ee,X==null)break e;de=v({},de,X);break e;case 2:fs=!0}}X=S.callback,X!==null&&(e.flags|=64,se&&(e.flags|=8192),se=c.callbacks,se===null?c.callbacks=[X]:se.push(X))}else se={lane:X,tag:S.tag,payload:S.payload,callback:S.callback,next:null},oe===null?(K=oe=se,R=de):oe=oe.next=se,x|=X;if(S=S.next,S===null){if(S=c.shared.pending,S===null)break;se=S,S=se.next,se.next=null,c.lastBaseUpdate=se,c.shared.pending=null}}while(!0);oe===null&&(R=de),c.baseState=R,c.firstBaseUpdate=K,c.lastBaseUpdate=oe,u===null&&(c.shared.lanes=0),bs|=x,e.lanes=x,e.memoizedState=de}}function op(e,t){if(typeof e!="function")throw Error(o(191,e));e.call(t)}function cp(e,t){var a=e.callbacks;if(a!==null)for(e.callbacks=null,e=0;e<a.length;e++)op(a[e],t)}var kl=b(null),Qi=b(0);function up(e,t){e=$n,k(Qi,e),k(kl,t),$n=e|t.baseLanes}function lu(){k(Qi,$n),k(kl,kl.current)}function ru(){$n=Qi.current,T(kl),T(Qi)}var ja=b(null),qa=null;function ms(e){var t=e.alternate;k(kt,kt.current&1),k(ja,e),qa===null&&(t===null||kl.current!==null||t.memoizedState!==null)&&(qa=e)}function iu(e){k(kt,kt.current),k(ja,e),qa===null&&(qa=e)}function dp(e){e.tag===22?(k(kt,kt.current),k(ja,e),qa===null&&(qa=e)):gs()}function gs(){k(kt,kt.current),k(ja,ja.current)}function Ia(e){T(ja),qa===e&&(qa=null),T(kt)}var kt=b(0);function Zi(e){for(var t=e;t!==null;){if(t.tag===13){var a=t.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||pd(a)||hd(a)))return t}else if(t.tag===19&&(t.memoizedProps.revealOrder==="forwards"||t.memoizedProps.revealOrder==="backwards"||t.memoizedProps.revealOrder==="unstable_legacy-backwards"||t.memoizedProps.revealOrder==="together")){if((t.flags&128)!==0)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Bn=0,Be=null,ot=null,Gt=null,Ki=!1,Ll=!1,Qs=!1,Xi=0,Lr=0,Ml=null,h1=0;function Ot(){throw Error(o(321))}function ou(e,t){if(t===null)return!1;for(var a=0;a<t.length&&a<e.length;a++)if(!Aa(e[a],t[a]))return!1;return!0}function cu(e,t,a,s,c,u){return Bn=u,Be=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,C.H=e===null||e.memoizedState===null?Wp:Nu,Qs=!1,u=a(s,c),Qs=!1,Ll&&(u=pp(t,a,s,c)),fp(e),u}function fp(e){C.H=Dr;var t=ot!==null&&ot.next!==null;if(Bn=0,Gt=ot=Be=null,Ki=!1,Lr=0,Ml=null,t)throw Error(o(300));e===null||Pt||(e=e.dependencies,e!==null&&Pi(e)&&(Pt=!0))}function pp(e,t,a,s){Be=e;var c=0;do{if(Ll&&(Ml=null),Lr=0,Ll=!1,25<=c)throw Error(o(301));if(c+=1,Gt=ot=null,e.updateQueue!=null){var u=e.updateQueue;u.lastEffect=null,u.events=null,u.stores=null,u.memoCache!=null&&(u.memoCache.index=0)}C.H=Qp,u=t(a,s)}while(Ll);return u}function m1(){var e=C.H,t=e.useState()[0];return t=typeof t.then=="function"?Mr(t):t,e=e.useState()[0],(ot!==null?ot.memoizedState:null)!==e&&(Be.flags|=1024),t}function uu(){var e=Xi!==0;return Xi=0,e}function du(e,t,a){t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a}function fu(e){if(Ki){for(e=e.memoizedState;e!==null;){var t=e.queue;t!==null&&(t.pending=null),e=e.next}Ki=!1}Bn=0,Gt=ot=Be=null,Ll=!1,Lr=Xi=0,Ml=null}function ua(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Gt===null?Be.memoizedState=Gt=e:Gt=Gt.next=e,Gt}function Lt(){if(ot===null){var e=Be.alternate;e=e!==null?e.memoizedState:null}else e=ot.next;var t=Gt===null?Be.memoizedState:Gt.next;if(t!==null)Gt=t,ot=e;else{if(e===null)throw Be.alternate===null?Error(o(467)):Error(o(310));ot=e,e={memoizedState:ot.memoizedState,baseState:ot.baseState,baseQueue:ot.baseQueue,queue:ot.queue,next:null},Gt===null?Be.memoizedState=Gt=e:Gt=Gt.next=e}return Gt}function Ji(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Mr(e){var t=Lr;return Lr+=1,Ml===null&&(Ml=[]),e=np(Ml,e,t),t=Be,(Gt===null?t.memoizedState:Gt.next)===null&&(t=t.alternate,C.H=t===null||t.memoizedState===null?Wp:Nu),e}function eo(e){if(e!==null&&typeof e=="object"){if(typeof e.then=="function")return Mr(e);if(e.$$typeof===D)return ea(e)}throw Error(o(438,String(e)))}function pu(e){var t=null,a=Be.updateQueue;if(a!==null&&(t=a.memoCache),t==null){var s=Be.alternate;s!==null&&(s=s.updateQueue,s!==null&&(s=s.memoCache,s!=null&&(t={data:s.data.map(function(c){return c.slice()}),index:0})))}if(t==null&&(t={data:[],index:0}),a===null&&(a=Ji(),Be.updateQueue=a),a.memoCache=t,a=t.data[t.index],a===void 0)for(a=t.data[t.index]=Array(e),s=0;s<e;s++)a[s]=V;return t.index++,a}function Hn(e,t){return typeof t=="function"?t(e):t}function to(e){var t=Lt();return hu(t,ot,e)}function hu(e,t,a){var s=e.queue;if(s===null)throw Error(o(311));s.lastRenderedReducer=a;var c=e.baseQueue,u=s.pending;if(u!==null){if(c!==null){var x=c.next;c.next=u.next,u.next=x}t.baseQueue=c=u,s.pending=null}if(u=e.baseState,c===null)e.memoizedState=u;else{t=c.next;var S=x=null,R=null,K=t,oe=!1;do{var de=K.lane&-536870913;if(de!==K.lane?(Ye&de)===de:(Bn&de)===de){var X=K.revertLane;if(X===0)R!==null&&(R=R.next={lane:0,revertLane:0,gesture:null,action:K.action,hasEagerState:K.hasEagerState,eagerState:K.eagerState,next:null}),de===Il&&(oe=!0);else if((Bn&X)===X){K=K.next,X===Il&&(oe=!0);continue}else de={lane:0,revertLane:K.revertLane,gesture:null,action:K.action,hasEagerState:K.hasEagerState,eagerState:K.eagerState,next:null},R===null?(S=R=de,x=u):R=R.next=de,Be.lanes|=X,bs|=X;de=K.action,Qs&&a(u,de),u=K.hasEagerState?K.eagerState:a(u,de)}else X={lane:de,revertLane:K.revertLane,gesture:K.gesture,action:K.action,hasEagerState:K.hasEagerState,eagerState:K.eagerState,next:null},R===null?(S=R=X,x=u):R=R.next=X,Be.lanes|=de,bs|=de;K=K.next}while(K!==null&&K!==t);if(R===null?x=u:R.next=S,!Aa(u,e.memoizedState)&&(Pt=!0,oe&&(a=Ol,a!==null)))throw a;e.memoizedState=u,e.baseState=x,e.baseQueue=R,s.lastRenderedState=u}return c===null&&(s.lanes=0),[e.memoizedState,s.dispatch]}function mu(e){var t=Lt(),a=t.queue;if(a===null)throw Error(o(311));a.lastRenderedReducer=e;var s=a.dispatch,c=a.pending,u=t.memoizedState;if(c!==null){a.pending=null;var x=c=c.next;do u=e(u,x.action),x=x.next;while(x!==c);Aa(u,t.memoizedState)||(Pt=!0),t.memoizedState=u,t.baseQueue===null&&(t.baseState=u),a.lastRenderedState=u}return[u,s]}function hp(e,t,a){var s=Be,c=Lt(),u=We;if(u){if(a===void 0)throw Error(o(407));a=a()}else a=t();var x=!Aa((ot||c).memoizedState,a);if(x&&(c.memoizedState=a,Pt=!0),c=c.queue,yu(xp.bind(null,s,c,e),[e]),c.getSnapshot!==t||x||Gt!==null&&Gt.memoizedState.tag&1){if(s.flags|=2048,Ul(9,{destroy:void 0},gp.bind(null,s,c,a,t),null),ft===null)throw Error(o(349));u||(Bn&127)!==0||mp(s,t,a)}return a}function mp(e,t,a){e.flags|=16384,e={getSnapshot:t,value:a},t=Be.updateQueue,t===null?(t=Ji(),Be.updateQueue=t,t.stores=[e]):(a=t.stores,a===null?t.stores=[e]:a.push(e))}function gp(e,t,a,s){t.value=a,t.getSnapshot=s,yp(t)&&bp(e)}function xp(e,t,a){return a(function(){yp(t)&&bp(e)})}function yp(e){var t=e.getSnapshot;e=e.value;try{var a=t();return!Aa(e,a)}catch{return!0}}function bp(e){var t=Hs(e,2);t!==null&&va(t,e,2)}function gu(e){var t=ua();if(typeof e=="function"){var a=e;if(e=a(),Qs){qt(!0);try{a()}finally{qt(!1)}}}return t.memoizedState=t.baseState=e,t.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Hn,lastRenderedState:e},t}function vp(e,t,a,s){return e.baseState=a,hu(e,ot,typeof s=="function"?s:Hn)}function g1(e,t,a,s,c){if(so(e))throw Error(o(485));if(e=t.action,e!==null){var u={payload:c,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(x){u.listeners.push(x)}};C.T!==null?a(!0):u.isTransition=!1,s(u),a=t.pending,a===null?(u.next=t.pending=u,Sp(t,u)):(u.next=a.next,t.pending=a.next=u)}}function Sp(e,t){var a=t.action,s=t.payload,c=e.state;if(t.isTransition){var u=C.T,x={};C.T=x;try{var S=a(c,s),R=C.S;R!==null&&R(x,S),Ep(e,t,S)}catch(K){xu(e,t,K)}finally{u!==null&&x.types!==null&&(u.types=x.types),C.T=u}}else try{u=a(c,s),Ep(e,t,u)}catch(K){xu(e,t,K)}}function Ep(e,t,a){a!==null&&typeof a=="object"&&typeof a.then=="function"?a.then(function(s){wp(e,t,s)},function(s){return xu(e,t,s)}):wp(e,t,a)}function wp(e,t,a){t.status="fulfilled",t.value=a,Np(t),e.state=a,t=e.pending,t!==null&&(a=t.next,a===t?e.pending=null:(a=a.next,t.next=a,Sp(e,a)))}function xu(e,t,a){var s=e.pending;if(e.pending=null,s!==null){s=s.next;do t.status="rejected",t.reason=a,Np(t),t=t.next;while(t!==s)}e.action=null}function Np(e){e=e.listeners;for(var t=0;t<e.length;t++)(0,e[t])()}function _p(e,t){return t}function Ap(e,t){if(We){var a=ft.formState;if(a!==null){e:{var s=Be;if(We){if(xt){t:{for(var c=xt,u=Va;c.nodeType!==8;){if(!u){c=null;break t}if(c=Ya(c.nextSibling),c===null){c=null;break t}}u=c.data,c=u==="F!"||u==="F"?c:null}if(c){xt=Ya(c.nextSibling),s=c.data==="F!";break e}}us(s)}s=!1}s&&(t=a[0])}}return a=ua(),a.memoizedState=a.baseState=t,s={pending:null,lanes:0,dispatch:null,lastRenderedReducer:_p,lastRenderedState:t},a.queue=s,a=Yp.bind(null,Be,s),s.dispatch=a,s=gu(!1),u=wu.bind(null,Be,!1,s.queue),s=ua(),c={state:t,dispatch:null,action:e,pending:null},s.queue=c,a=g1.bind(null,Be,c,u,a),c.dispatch=a,s.memoizedState=e,[t,a,!1]}function Tp(e){var t=Lt();return jp(t,ot,e)}function jp(e,t,a){if(t=hu(e,t,_p)[0],e=to(Hn)[0],typeof t=="object"&&t!==null&&typeof t.then=="function")try{var s=Mr(t)}catch(x){throw x===Cl?Yi:x}else s=t;t=Lt();var c=t.queue,u=c.dispatch;return a!==t.memoizedState&&(Be.flags|=2048,Ul(9,{destroy:void 0},x1.bind(null,c,a),null)),[s,u,e]}function x1(e,t){e.action=t}function Ip(e){var t=Lt(),a=ot;if(a!==null)return jp(t,a,e);Lt(),t=t.memoizedState,a=Lt();var s=a.queue.dispatch;return a.memoizedState=e,[t,s,!1]}function Ul(e,t,a,s){return e={tag:e,create:a,deps:s,inst:t,next:null},t=Be.updateQueue,t===null&&(t=Ji(),Be.updateQueue=t),a=t.lastEffect,a===null?t.lastEffect=e.next=e:(s=a.next,a.next=e,e.next=s,t.lastEffect=e),e}function Op(){return Lt().memoizedState}function ao(e,t,a,s){var c=ua();Be.flags|=e,c.memoizedState=Ul(1|t,{destroy:void 0},a,s===void 0?null:s)}function no(e,t,a,s){var c=Lt();s=s===void 0?null:s;var u=c.memoizedState.inst;ot!==null&&s!==null&&ou(s,ot.memoizedState.deps)?c.memoizedState=Ul(t,u,a,s):(Be.flags|=e,c.memoizedState=Ul(1|t,u,a,s))}function Cp(e,t){ao(8390656,8,e,t)}function yu(e,t){no(2048,8,e,t)}function y1(e){Be.flags|=4;var t=Be.updateQueue;if(t===null)t=Ji(),Be.updateQueue=t,t.events=[e];else{var a=t.events;a===null?t.events=[e]:a.push(e)}}function Rp(e){var t=Lt().memoizedState;return y1({ref:t,nextImpl:e}),function(){if((at&2)!==0)throw Error(o(440));return t.impl.apply(void 0,arguments)}}function kp(e,t){return no(4,2,e,t)}function Lp(e,t){return no(4,4,e,t)}function Mp(e,t){if(typeof t=="function"){e=e();var a=t(e);return function(){typeof a=="function"?a():t(null)}}if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function Up(e,t,a){a=a!=null?a.concat([e]):null,no(4,4,Mp.bind(null,t,e),a)}function bu(){}function Dp(e,t){var a=Lt();t=t===void 0?null:t;var s=a.memoizedState;return t!==null&&ou(t,s[1])?s[0]:(a.memoizedState=[e,t],e)}function zp(e,t){var a=Lt();t=t===void 0?null:t;var s=a.memoizedState;if(t!==null&&ou(t,s[1]))return s[0];if(s=e(),Qs){qt(!0);try{e()}finally{qt(!1)}}return a.memoizedState=[s,t],s}function vu(e,t,a){return a===void 0||(Bn&1073741824)!==0&&(Ye&261930)===0?e.memoizedState=t:(e.memoizedState=a,e=Bh(),Be.lanes|=e,bs|=e,a)}function Bp(e,t,a,s){return Aa(a,t)?a:kl.current!==null?(e=vu(e,a,s),Aa(e,t)||(Pt=!0),e):(Bn&42)===0||(Bn&1073741824)!==0&&(Ye&261930)===0?(Pt=!0,e.memoizedState=a):(e=Bh(),Be.lanes|=e,bs|=e,t)}function Hp(e,t,a,s,c){var u=ne.p;ne.p=u!==0&&8>u?u:8;var x=C.T,S={};C.T=S,wu(e,!1,t,a);try{var R=c(),K=C.S;if(K!==null&&K(S,R),R!==null&&typeof R=="object"&&typeof R.then=="function"){var oe=p1(R,s);Ur(e,t,oe,Ra(e))}else Ur(e,t,s,Ra(e))}catch(de){Ur(e,t,{then:function(){},status:"rejected",reason:de},Ra())}finally{ne.p=u,x!==null&&S.types!==null&&(x.types=S.types),C.T=x}}function b1(){}function Su(e,t,a,s){if(e.tag!==5)throw Error(o(476));var c=Gp(e).queue;Hp(e,c,t,te,a===null?b1:function(){return Pp(e),a(s)})}function Gp(e){var t=e.memoizedState;if(t!==null)return t;t={memoizedState:te,baseState:te,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Hn,lastRenderedState:te},next:null};var a={};return t.next={memoizedState:a,baseState:a,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Hn,lastRenderedState:a},next:null},e.memoizedState=t,e=e.alternate,e!==null&&(e.memoizedState=t),t}function Pp(e){var t=Gp(e);t.next===null&&(t=e.alternate.memoizedState),Ur(e,t.next.queue,{},Ra())}function Eu(){return ea(Jr)}function Vp(){return Lt().memoizedState}function qp(){return Lt().memoizedState}function v1(e){for(var t=e.return;t!==null;){switch(t.tag){case 24:case 3:var a=Ra();e=ps(a);var s=hs(t,e,a);s!==null&&(va(s,t,a),Cr(s,t,a)),t={cache:Kc()},e.payload=t;return}t=t.return}}function S1(e,t,a){var s=Ra();a={lane:s,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null},so(e)?Fp(t,a):(a=Hc(e,t,a,s),a!==null&&(va(a,e,s),$p(a,t,s)))}function Yp(e,t,a){var s=Ra();Ur(e,t,a,s)}function Ur(e,t,a,s){var c={lane:s,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null};if(so(e))Fp(t,c);else{var u=e.alternate;if(e.lanes===0&&(u===null||u.lanes===0)&&(u=t.lastRenderedReducer,u!==null))try{var x=t.lastRenderedState,S=u(x,a);if(c.hasEagerState=!0,c.eagerState=S,Aa(S,x))return zi(e,t,c,0),ft===null&&Di(),!1}catch{}finally{}if(a=Hc(e,t,c,s),a!==null)return va(a,e,s),$p(a,t,s),!0}return!1}function wu(e,t,a,s){if(s={lane:2,revertLane:td(),gesture:null,action:s,hasEagerState:!1,eagerState:null,next:null},so(e)){if(t)throw Error(o(479))}else t=Hc(e,a,s,2),t!==null&&va(t,e,2)}function so(e){var t=e.alternate;return e===Be||t!==null&&t===Be}function Fp(e,t){Ll=Ki=!0;var a=e.pending;a===null?t.next=t:(t.next=a.next,a.next=t),e.pending=t}function $p(e,t,a){if((a&4194048)!==0){var s=t.lanes;s&=e.pendingLanes,a|=s,t.lanes=a,Ja(e,a)}}var Dr={readContext:ea,use:eo,useCallback:Ot,useContext:Ot,useEffect:Ot,useImperativeHandle:Ot,useLayoutEffect:Ot,useInsertionEffect:Ot,useMemo:Ot,useReducer:Ot,useRef:Ot,useState:Ot,useDebugValue:Ot,useDeferredValue:Ot,useTransition:Ot,useSyncExternalStore:Ot,useId:Ot,useHostTransitionStatus:Ot,useFormState:Ot,useActionState:Ot,useOptimistic:Ot,useMemoCache:Ot,useCacheRefresh:Ot};Dr.useEffectEvent=Ot;var Wp={readContext:ea,use:eo,useCallback:function(e,t){return ua().memoizedState=[e,t===void 0?null:t],e},useContext:ea,useEffect:Cp,useImperativeHandle:function(e,t,a){a=a!=null?a.concat([e]):null,ao(4194308,4,Mp.bind(null,t,e),a)},useLayoutEffect:function(e,t){return ao(4194308,4,e,t)},useInsertionEffect:function(e,t){ao(4,2,e,t)},useMemo:function(e,t){var a=ua();t=t===void 0?null:t;var s=e();if(Qs){qt(!0);try{e()}finally{qt(!1)}}return a.memoizedState=[s,t],s},useReducer:function(e,t,a){var s=ua();if(a!==void 0){var c=a(t);if(Qs){qt(!0);try{a(t)}finally{qt(!1)}}}else c=t;return s.memoizedState=s.baseState=c,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:c},s.queue=e,e=e.dispatch=S1.bind(null,Be,e),[s.memoizedState,e]},useRef:function(e){var t=ua();return e={current:e},t.memoizedState=e},useState:function(e){e=gu(e);var t=e.queue,a=Yp.bind(null,Be,t);return t.dispatch=a,[e.memoizedState,a]},useDebugValue:bu,useDeferredValue:function(e,t){var a=ua();return vu(a,e,t)},useTransition:function(){var e=gu(!1);return e=Hp.bind(null,Be,e.queue,!0,!1),ua().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,t,a){var s=Be,c=ua();if(We){if(a===void 0)throw Error(o(407));a=a()}else{if(a=t(),ft===null)throw Error(o(349));(Ye&127)!==0||mp(s,t,a)}c.memoizedState=a;var u={value:a,getSnapshot:t};return c.queue=u,Cp(xp.bind(null,s,u,e),[e]),s.flags|=2048,Ul(9,{destroy:void 0},gp.bind(null,s,u,a,t),null),a},useId:function(){var e=ua(),t=ft.identifierPrefix;if(We){var a=_n,s=Nn;a=(s&~(1<<32-It(s)-1)).toString(32)+a,t="_"+t+"R_"+a,a=Xi++,0<a&&(t+="H"+a.toString(32)),t+="_"}else a=h1++,t="_"+t+"r_"+a.toString(32)+"_";return e.memoizedState=t},useHostTransitionStatus:Eu,useFormState:Ap,useActionState:Ap,useOptimistic:function(e){var t=ua();t.memoizedState=t.baseState=e;var a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return t.queue=a,t=wu.bind(null,Be,!0,a),a.dispatch=t,[e,t]},useMemoCache:pu,useCacheRefresh:function(){return ua().memoizedState=v1.bind(null,Be)},useEffectEvent:function(e){var t=ua(),a={impl:e};return t.memoizedState=a,function(){if((at&2)!==0)throw Error(o(440));return a.impl.apply(void 0,arguments)}}},Nu={readContext:ea,use:eo,useCallback:Dp,useContext:ea,useEffect:yu,useImperativeHandle:Up,useInsertionEffect:kp,useLayoutEffect:Lp,useMemo:zp,useReducer:to,useRef:Op,useState:function(){return to(Hn)},useDebugValue:bu,useDeferredValue:function(e,t){var a=Lt();return Bp(a,ot.memoizedState,e,t)},useTransition:function(){var e=to(Hn)[0],t=Lt().memoizedState;return[typeof e=="boolean"?e:Mr(e),t]},useSyncExternalStore:hp,useId:Vp,useHostTransitionStatus:Eu,useFormState:Tp,useActionState:Tp,useOptimistic:function(e,t){var a=Lt();return vp(a,ot,e,t)},useMemoCache:pu,useCacheRefresh:qp};Nu.useEffectEvent=Rp;var Qp={readContext:ea,use:eo,useCallback:Dp,useContext:ea,useEffect:yu,useImperativeHandle:Up,useInsertionEffect:kp,useLayoutEffect:Lp,useMemo:zp,useReducer:mu,useRef:Op,useState:function(){return mu(Hn)},useDebugValue:bu,useDeferredValue:function(e,t){var a=Lt();return ot===null?vu(a,e,t):Bp(a,ot.memoizedState,e,t)},useTransition:function(){var e=mu(Hn)[0],t=Lt().memoizedState;return[typeof e=="boolean"?e:Mr(e),t]},useSyncExternalStore:hp,useId:Vp,useHostTransitionStatus:Eu,useFormState:Ip,useActionState:Ip,useOptimistic:function(e,t){var a=Lt();return ot!==null?vp(a,ot,e,t):(a.baseState=e,[e,a.queue.dispatch])},useMemoCache:pu,useCacheRefresh:qp};Qp.useEffectEvent=Rp;function _u(e,t,a,s){t=e.memoizedState,a=a(s,t),a=a==null?t:v({},t,a),e.memoizedState=a,e.lanes===0&&(e.updateQueue.baseState=a)}var Au={enqueueSetState:function(e,t,a){e=e._reactInternals;var s=Ra(),c=ps(s);c.payload=t,a!=null&&(c.callback=a),t=hs(e,c,s),t!==null&&(va(t,e,s),Cr(t,e,s))},enqueueReplaceState:function(e,t,a){e=e._reactInternals;var s=Ra(),c=ps(s);c.tag=1,c.payload=t,a!=null&&(c.callback=a),t=hs(e,c,s),t!==null&&(va(t,e,s),Cr(t,e,s))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var a=Ra(),s=ps(a);s.tag=2,t!=null&&(s.callback=t),t=hs(e,s,a),t!==null&&(va(t,e,a),Cr(t,e,a))}};function Zp(e,t,a,s,c,u,x){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(s,u,x):t.prototype&&t.prototype.isPureReactComponent?!wr(a,s)||!wr(c,u):!0}function Kp(e,t,a,s){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(a,s),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(a,s),t.state!==e&&Au.enqueueReplaceState(t,t.state,null)}function Zs(e,t){var a=t;if("ref"in t){a={};for(var s in t)s!=="ref"&&(a[s]=t[s])}if(e=e.defaultProps){a===t&&(a=v({},a));for(var c in e)a[c]===void 0&&(a[c]=e[c])}return a}function Xp(e){Ui(e)}function Jp(e){console.error(e)}function eh(e){Ui(e)}function lo(e,t){try{var a=e.onUncaughtError;a(t.value,{componentStack:t.stack})}catch(s){setTimeout(function(){throw s})}}function th(e,t,a){try{var s=e.onCaughtError;s(a.value,{componentStack:a.stack,errorBoundary:t.tag===1?t.stateNode:null})}catch(c){setTimeout(function(){throw c})}}function Tu(e,t,a){return a=ps(a),a.tag=3,a.payload={element:null},a.callback=function(){lo(e,t)},a}function ah(e){return e=ps(e),e.tag=3,e}function nh(e,t,a,s){var c=a.type.getDerivedStateFromError;if(typeof c=="function"){var u=s.value;e.payload=function(){return c(u)},e.callback=function(){th(t,a,s)}}var x=a.stateNode;x!==null&&typeof x.componentDidCatch=="function"&&(e.callback=function(){th(t,a,s),typeof c!="function"&&(vs===null?vs=new Set([this]):vs.add(this));var S=s.stack;this.componentDidCatch(s.value,{componentStack:S!==null?S:""})})}function E1(e,t,a,s,c){if(a.flags|=32768,s!==null&&typeof s=="object"&&typeof s.then=="function"){if(t=a.alternate,t!==null&&jl(t,a,c,!0),a=ja.current,a!==null){switch(a.tag){case 31:case 13:return qa===null?yo():a.alternate===null&&Ct===0&&(Ct=3),a.flags&=-257,a.flags|=65536,a.lanes=c,s===Fi?a.flags|=16384:(t=a.updateQueue,t===null?a.updateQueue=new Set([s]):t.add(s),Xu(e,s,c)),!1;case 22:return a.flags|=65536,s===Fi?a.flags|=16384:(t=a.updateQueue,t===null?(t={transitions:null,markerInstances:null,retryQueue:new Set([s])},a.updateQueue=t):(a=t.retryQueue,a===null?t.retryQueue=new Set([s]):a.add(s)),Xu(e,s,c)),!1}throw Error(o(435,a.tag))}return Xu(e,s,c),yo(),!1}if(We)return t=ja.current,t!==null?((t.flags&65536)===0&&(t.flags|=256),t.flags|=65536,t.lanes=c,s!==Fc&&(e=Error(o(422),{cause:s}),Ar(Ha(e,a)))):(s!==Fc&&(t=Error(o(423),{cause:s}),Ar(Ha(t,a))),e=e.current.alternate,e.flags|=65536,c&=-c,e.lanes|=c,s=Ha(s,a),c=Tu(e.stateNode,s,c),nu(e,c),Ct!==4&&(Ct=2)),!1;var u=Error(o(520),{cause:s});if(u=Ha(u,a),Yr===null?Yr=[u]:Yr.push(u),Ct!==4&&(Ct=2),t===null)return!0;s=Ha(s,a),a=t;do{switch(a.tag){case 3:return a.flags|=65536,e=c&-c,a.lanes|=e,e=Tu(a.stateNode,s,e),nu(a,e),!1;case 1:if(t=a.type,u=a.stateNode,(a.flags&128)===0&&(typeof t.getDerivedStateFromError=="function"||u!==null&&typeof u.componentDidCatch=="function"&&(vs===null||!vs.has(u))))return a.flags|=65536,c&=-c,a.lanes|=c,c=ah(c),nh(c,e,a,s),nu(a,c),!1}a=a.return}while(a!==null);return!1}var ju=Error(o(461)),Pt=!1;function ta(e,t,a,s){t.child=e===null?ip(t,null,a,s):Ws(t,e.child,a,s)}function sh(e,t,a,s,c){a=a.render;var u=t.ref;if("ref"in s){var x={};for(var S in s)S!=="ref"&&(x[S]=s[S])}else x=s;return qs(t),s=cu(e,t,a,x,u,c),S=uu(),e!==null&&!Pt?(du(e,t,c),Gn(e,t,c)):(We&&S&&qc(t),t.flags|=1,ta(e,t,s,c),t.child)}function lh(e,t,a,s,c){if(e===null){var u=a.type;return typeof u=="function"&&!Gc(u)&&u.defaultProps===void 0&&a.compare===null?(t.tag=15,t.type=u,rh(e,t,u,s,c)):(e=Hi(a.type,null,s,t,t.mode,c),e.ref=t.ref,e.return=t,t.child=e)}if(u=e.child,!Uu(e,c)){var x=u.memoizedProps;if(a=a.compare,a=a!==null?a:wr,a(x,s)&&e.ref===t.ref)return Gn(e,t,c)}return t.flags|=1,e=Mn(u,s),e.ref=t.ref,e.return=t,t.child=e}function rh(e,t,a,s,c){if(e!==null){var u=e.memoizedProps;if(wr(u,s)&&e.ref===t.ref)if(Pt=!1,t.pendingProps=s=u,Uu(e,c))(e.flags&131072)!==0&&(Pt=!0);else return t.lanes=e.lanes,Gn(e,t,c)}return Iu(e,t,a,s,c)}function ih(e,t,a,s){var c=s.children,u=e!==null?e.memoizedState:null;if(e===null&&t.stateNode===null&&(t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),s.mode==="hidden"){if((t.flags&128)!==0){if(u=u!==null?u.baseLanes|a:a,e!==null){for(s=t.child=e.child,c=0;s!==null;)c=c|s.lanes|s.childLanes,s=s.sibling;s=c&~u}else s=0,t.child=null;return oh(e,t,u,a,s)}if((a&536870912)!==0)t.memoizedState={baseLanes:0,cachePool:null},e!==null&&qi(t,u!==null?u.cachePool:null),u!==null?up(t,u):lu(),dp(t);else return s=t.lanes=536870912,oh(e,t,u!==null?u.baseLanes|a:a,a,s)}else u!==null?(qi(t,u.cachePool),up(t,u),gs(),t.memoizedState=null):(e!==null&&qi(t,null),lu(),gs());return ta(e,t,c,a),t.child}function zr(e,t){return e!==null&&e.tag===22||t.stateNode!==null||(t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),t.sibling}function oh(e,t,a,s,c){var u=Jc();return u=u===null?null:{parent:Ht._currentValue,pool:u},t.memoizedState={baseLanes:a,cachePool:u},e!==null&&qi(t,null),lu(),dp(t),e!==null&&jl(e,t,s,!0),t.childLanes=c,null}function ro(e,t){return t=oo({mode:t.mode,children:t.children},e.mode),t.ref=e.ref,e.child=t,t.return=e,t}function ch(e,t,a){return Ws(t,e.child,null,a),e=ro(t,t.pendingProps),e.flags|=2,Ia(t),t.memoizedState=null,e}function w1(e,t,a){var s=t.pendingProps,c=(t.flags&128)!==0;if(t.flags&=-129,e===null){if(We){if(s.mode==="hidden")return e=ro(t,s),t.lanes=536870912,zr(null,e);if(iu(t),(e=xt)?(e=Sm(e,Va),e=e!==null&&e.data==="&"?e:null,e!==null&&(t.memoizedState={dehydrated:e,treeContext:os!==null?{id:Nn,overflow:_n}:null,retryLane:536870912,hydrationErrors:null},a=F0(e),a.return=t,t.child=a,Jt=t,xt=null)):e=null,e===null)throw us(t);return t.lanes=536870912,null}return ro(t,s)}var u=e.memoizedState;if(u!==null){var x=u.dehydrated;if(iu(t),c)if(t.flags&256)t.flags&=-257,t=ch(e,t,a);else if(t.memoizedState!==null)t.child=e.child,t.flags|=128,t=null;else throw Error(o(558));else if(Pt||jl(e,t,a,!1),c=(a&e.childLanes)!==0,Pt||c){if(s=ft,s!==null&&(x=en(s,a),x!==0&&x!==u.retryLane))throw u.retryLane=x,Hs(e,x),va(s,e,x),ju;yo(),t=ch(e,t,a)}else e=u.treeContext,xt=Ya(x.nextSibling),Jt=t,We=!0,cs=null,Va=!1,e!==null&&Q0(t,e),t=ro(t,s),t.flags|=4096;return t}return e=Mn(e.child,{mode:s.mode,children:s.children}),e.ref=t.ref,t.child=e,e.return=t,e}function io(e,t){var a=t.ref;if(a===null)e!==null&&e.ref!==null&&(t.flags|=4194816);else{if(typeof a!="function"&&typeof a!="object")throw Error(o(284));(e===null||e.ref!==a)&&(t.flags|=4194816)}}function Iu(e,t,a,s,c){return qs(t),a=cu(e,t,a,s,void 0,c),s=uu(),e!==null&&!Pt?(du(e,t,c),Gn(e,t,c)):(We&&s&&qc(t),t.flags|=1,ta(e,t,a,c),t.child)}function uh(e,t,a,s,c,u){return qs(t),t.updateQueue=null,a=pp(t,s,a,c),fp(e),s=uu(),e!==null&&!Pt?(du(e,t,u),Gn(e,t,u)):(We&&s&&qc(t),t.flags|=1,ta(e,t,a,u),t.child)}function dh(e,t,a,s,c){if(qs(t),t.stateNode===null){var u=Nl,x=a.contextType;typeof x=="object"&&x!==null&&(u=ea(x)),u=new a(s,u),t.memoizedState=u.state!==null&&u.state!==void 0?u.state:null,u.updater=Au,t.stateNode=u,u._reactInternals=t,u=t.stateNode,u.props=s,u.state=t.memoizedState,u.refs={},tu(t),x=a.contextType,u.context=typeof x=="object"&&x!==null?ea(x):Nl,u.state=t.memoizedState,x=a.getDerivedStateFromProps,typeof x=="function"&&(_u(t,a,x,s),u.state=t.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof u.getSnapshotBeforeUpdate=="function"||typeof u.UNSAFE_componentWillMount!="function"&&typeof u.componentWillMount!="function"||(x=u.state,typeof u.componentWillMount=="function"&&u.componentWillMount(),typeof u.UNSAFE_componentWillMount=="function"&&u.UNSAFE_componentWillMount(),x!==u.state&&Au.enqueueReplaceState(u,u.state,null),kr(t,s,u,c),Rr(),u.state=t.memoizedState),typeof u.componentDidMount=="function"&&(t.flags|=4194308),s=!0}else if(e===null){u=t.stateNode;var S=t.memoizedProps,R=Zs(a,S);u.props=R;var K=u.context,oe=a.contextType;x=Nl,typeof oe=="object"&&oe!==null&&(x=ea(oe));var de=a.getDerivedStateFromProps;oe=typeof de=="function"||typeof u.getSnapshotBeforeUpdate=="function",S=t.pendingProps!==S,oe||typeof u.UNSAFE_componentWillReceiveProps!="function"&&typeof u.componentWillReceiveProps!="function"||(S||K!==x)&&Kp(t,u,s,x),fs=!1;var X=t.memoizedState;u.state=X,kr(t,s,u,c),Rr(),K=t.memoizedState,S||X!==K||fs?(typeof de=="function"&&(_u(t,a,de,s),K=t.memoizedState),(R=fs||Zp(t,a,R,s,X,K,x))?(oe||typeof u.UNSAFE_componentWillMount!="function"&&typeof u.componentWillMount!="function"||(typeof u.componentWillMount=="function"&&u.componentWillMount(),typeof u.UNSAFE_componentWillMount=="function"&&u.UNSAFE_componentWillMount()),typeof u.componentDidMount=="function"&&(t.flags|=4194308)):(typeof u.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=s,t.memoizedState=K),u.props=s,u.state=K,u.context=x,s=R):(typeof u.componentDidMount=="function"&&(t.flags|=4194308),s=!1)}else{u=t.stateNode,au(e,t),x=t.memoizedProps,oe=Zs(a,x),u.props=oe,de=t.pendingProps,X=u.context,K=a.contextType,R=Nl,typeof K=="object"&&K!==null&&(R=ea(K)),S=a.getDerivedStateFromProps,(K=typeof S=="function"||typeof u.getSnapshotBeforeUpdate=="function")||typeof u.UNSAFE_componentWillReceiveProps!="function"&&typeof u.componentWillReceiveProps!="function"||(x!==de||X!==R)&&Kp(t,u,s,R),fs=!1,X=t.memoizedState,u.state=X,kr(t,s,u,c),Rr();var se=t.memoizedState;x!==de||X!==se||fs||e!==null&&e.dependencies!==null&&Pi(e.dependencies)?(typeof S=="function"&&(_u(t,a,S,s),se=t.memoizedState),(oe=fs||Zp(t,a,oe,s,X,se,R)||e!==null&&e.dependencies!==null&&Pi(e.dependencies))?(K||typeof u.UNSAFE_componentWillUpdate!="function"&&typeof u.componentWillUpdate!="function"||(typeof u.componentWillUpdate=="function"&&u.componentWillUpdate(s,se,R),typeof u.UNSAFE_componentWillUpdate=="function"&&u.UNSAFE_componentWillUpdate(s,se,R)),typeof u.componentDidUpdate=="function"&&(t.flags|=4),typeof u.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof u.componentDidUpdate!="function"||x===e.memoizedProps&&X===e.memoizedState||(t.flags|=4),typeof u.getSnapshotBeforeUpdate!="function"||x===e.memoizedProps&&X===e.memoizedState||(t.flags|=1024),t.memoizedProps=s,t.memoizedState=se),u.props=s,u.state=se,u.context=R,s=oe):(typeof u.componentDidUpdate!="function"||x===e.memoizedProps&&X===e.memoizedState||(t.flags|=4),typeof u.getSnapshotBeforeUpdate!="function"||x===e.memoizedProps&&X===e.memoizedState||(t.flags|=1024),s=!1)}return u=s,io(e,t),s=(t.flags&128)!==0,u||s?(u=t.stateNode,a=s&&typeof a.getDerivedStateFromError!="function"?null:u.render(),t.flags|=1,e!==null&&s?(t.child=Ws(t,e.child,null,c),t.child=Ws(t,null,a,c)):ta(e,t,a,c),t.memoizedState=u.state,e=t.child):e=Gn(e,t,c),e}function fh(e,t,a,s){return Ps(),t.flags|=256,ta(e,t,a,s),t.child}var Ou={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Cu(e){return{baseLanes:e,cachePool:tp()}}function Ru(e,t,a){return e=e!==null?e.childLanes&~a:0,t&&(e|=Ca),e}function ph(e,t,a){var s=t.pendingProps,c=!1,u=(t.flags&128)!==0,x;if((x=u)||(x=e!==null&&e.memoizedState===null?!1:(kt.current&2)!==0),x&&(c=!0,t.flags&=-129),x=(t.flags&32)!==0,t.flags&=-33,e===null){if(We){if(c?ms(t):gs(),(e=xt)?(e=Sm(e,Va),e=e!==null&&e.data!=="&"?e:null,e!==null&&(t.memoizedState={dehydrated:e,treeContext:os!==null?{id:Nn,overflow:_n}:null,retryLane:536870912,hydrationErrors:null},a=F0(e),a.return=t,t.child=a,Jt=t,xt=null)):e=null,e===null)throw us(t);return hd(e)?t.lanes=32:t.lanes=536870912,null}var S=s.children;return s=s.fallback,c?(gs(),c=t.mode,S=oo({mode:"hidden",children:S},c),s=Gs(s,c,a,null),S.return=t,s.return=t,S.sibling=s,t.child=S,s=t.child,s.memoizedState=Cu(a),s.childLanes=Ru(e,x,a),t.memoizedState=Ou,zr(null,s)):(ms(t),ku(t,S))}var R=e.memoizedState;if(R!==null&&(S=R.dehydrated,S!==null)){if(u)t.flags&256?(ms(t),t.flags&=-257,t=Lu(e,t,a)):t.memoizedState!==null?(gs(),t.child=e.child,t.flags|=128,t=null):(gs(),S=s.fallback,c=t.mode,s=oo({mode:"visible",children:s.children},c),S=Gs(S,c,a,null),S.flags|=2,s.return=t,S.return=t,s.sibling=S,t.child=s,Ws(t,e.child,null,a),s=t.child,s.memoizedState=Cu(a),s.childLanes=Ru(e,x,a),t.memoizedState=Ou,t=zr(null,s));else if(ms(t),hd(S)){if(x=S.nextSibling&&S.nextSibling.dataset,x)var K=x.dgst;x=K,s=Error(o(419)),s.stack="",s.digest=x,Ar({value:s,source:null,stack:null}),t=Lu(e,t,a)}else if(Pt||jl(e,t,a,!1),x=(a&e.childLanes)!==0,Pt||x){if(x=ft,x!==null&&(s=en(x,a),s!==0&&s!==R.retryLane))throw R.retryLane=s,Hs(e,s),va(x,e,s),ju;pd(S)||yo(),t=Lu(e,t,a)}else pd(S)?(t.flags|=192,t.child=e.child,t=null):(e=R.treeContext,xt=Ya(S.nextSibling),Jt=t,We=!0,cs=null,Va=!1,e!==null&&Q0(t,e),t=ku(t,s.children),t.flags|=4096);return t}return c?(gs(),S=s.fallback,c=t.mode,R=e.child,K=R.sibling,s=Mn(R,{mode:"hidden",children:s.children}),s.subtreeFlags=R.subtreeFlags&65011712,K!==null?S=Mn(K,S):(S=Gs(S,c,a,null),S.flags|=2),S.return=t,s.return=t,s.sibling=S,t.child=s,zr(null,s),s=t.child,S=e.child.memoizedState,S===null?S=Cu(a):(c=S.cachePool,c!==null?(R=Ht._currentValue,c=c.parent!==R?{parent:R,pool:R}:c):c=tp(),S={baseLanes:S.baseLanes|a,cachePool:c}),s.memoizedState=S,s.childLanes=Ru(e,x,a),t.memoizedState=Ou,zr(e.child,s)):(ms(t),a=e.child,e=a.sibling,a=Mn(a,{mode:"visible",children:s.children}),a.return=t,a.sibling=null,e!==null&&(x=t.deletions,x===null?(t.deletions=[e],t.flags|=16):x.push(e)),t.child=a,t.memoizedState=null,a)}function ku(e,t){return t=oo({mode:"visible",children:t},e.mode),t.return=e,e.child=t}function oo(e,t){return e=Ta(22,e,null,t),e.lanes=0,e}function Lu(e,t,a){return Ws(t,e.child,null,a),e=ku(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function hh(e,t,a){e.lanes|=t;var s=e.alternate;s!==null&&(s.lanes|=t),Qc(e.return,t,a)}function Mu(e,t,a,s,c,u){var x=e.memoizedState;x===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:s,tail:a,tailMode:c,treeForkCount:u}:(x.isBackwards=t,x.rendering=null,x.renderingStartTime=0,x.last=s,x.tail=a,x.tailMode=c,x.treeForkCount=u)}function mh(e,t,a){var s=t.pendingProps,c=s.revealOrder,u=s.tail;s=s.children;var x=kt.current,S=(x&2)!==0;if(S?(x=x&1|2,t.flags|=128):x&=1,k(kt,x),ta(e,t,s,a),s=We?_r:0,!S&&e!==null&&(e.flags&128)!==0)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&hh(e,a,t);else if(e.tag===19)hh(e,a,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}switch(c){case"forwards":for(a=t.child,c=null;a!==null;)e=a.alternate,e!==null&&Zi(e)===null&&(c=a),a=a.sibling;a=c,a===null?(c=t.child,t.child=null):(c=a.sibling,a.sibling=null),Mu(t,!1,c,a,u,s);break;case"backwards":case"unstable_legacy-backwards":for(a=null,c=t.child,t.child=null;c!==null;){if(e=c.alternate,e!==null&&Zi(e)===null){t.child=c;break}e=c.sibling,c.sibling=a,a=c,c=e}Mu(t,!0,a,null,u,s);break;case"together":Mu(t,!1,null,null,void 0,s);break;default:t.memoizedState=null}return t.child}function Gn(e,t,a){if(e!==null&&(t.dependencies=e.dependencies),bs|=t.lanes,(a&t.childLanes)===0)if(e!==null){if(jl(e,t,a,!1),(a&t.childLanes)===0)return null}else return null;if(e!==null&&t.child!==e.child)throw Error(o(153));if(t.child!==null){for(e=t.child,a=Mn(e,e.pendingProps),t.child=a,a.return=t;e.sibling!==null;)e=e.sibling,a=a.sibling=Mn(e,e.pendingProps),a.return=t;a.sibling=null}return t.child}function Uu(e,t){return(e.lanes&t)!==0?!0:(e=e.dependencies,!!(e!==null&&Pi(e)))}function N1(e,t,a){switch(t.tag){case 3:B(t,t.stateNode.containerInfo),ds(t,Ht,e.memoizedState.cache),Ps();break;case 27:case 5:J(t);break;case 4:B(t,t.stateNode.containerInfo);break;case 10:ds(t,t.type,t.memoizedProps.value);break;case 31:if(t.memoizedState!==null)return t.flags|=128,iu(t),null;break;case 13:var s=t.memoizedState;if(s!==null)return s.dehydrated!==null?(ms(t),t.flags|=128,null):(a&t.child.childLanes)!==0?ph(e,t,a):(ms(t),e=Gn(e,t,a),e!==null?e.sibling:null);ms(t);break;case 19:var c=(e.flags&128)!==0;if(s=(a&t.childLanes)!==0,s||(jl(e,t,a,!1),s=(a&t.childLanes)!==0),c){if(s)return mh(e,t,a);t.flags|=128}if(c=t.memoizedState,c!==null&&(c.rendering=null,c.tail=null,c.lastEffect=null),k(kt,kt.current),s)break;return null;case 22:return t.lanes=0,ih(e,t,a,t.pendingProps);case 24:ds(t,Ht,e.memoizedState.cache)}return Gn(e,t,a)}function gh(e,t,a){if(e!==null)if(e.memoizedProps!==t.pendingProps)Pt=!0;else{if(!Uu(e,a)&&(t.flags&128)===0)return Pt=!1,N1(e,t,a);Pt=(e.flags&131072)!==0}else Pt=!1,We&&(t.flags&1048576)!==0&&W0(t,_r,t.index);switch(t.lanes=0,t.tag){case 16:e:{var s=t.pendingProps;if(e=Fs(t.elementType),t.type=e,typeof e=="function")Gc(e)?(s=Zs(e,s),t.tag=1,t=dh(null,t,e,s,a)):(t.tag=0,t=Iu(null,t,e,s,a));else{if(e!=null){var c=e.$$typeof;if(c===M){t.tag=11,t=sh(null,t,e,s,a);break e}else if(c===U){t.tag=14,t=lh(null,t,e,s,a);break e}}throw t=me(e)||e,Error(o(306,t,""))}}return t;case 0:return Iu(e,t,t.type,t.pendingProps,a);case 1:return s=t.type,c=Zs(s,t.pendingProps),dh(e,t,s,c,a);case 3:e:{if(B(t,t.stateNode.containerInfo),e===null)throw Error(o(387));s=t.pendingProps;var u=t.memoizedState;c=u.element,au(e,t),kr(t,s,null,a);var x=t.memoizedState;if(s=x.cache,ds(t,Ht,s),s!==u.cache&&Zc(t,[Ht],a,!0),Rr(),s=x.element,u.isDehydrated)if(u={element:s,isDehydrated:!1,cache:x.cache},t.updateQueue.baseState=u,t.memoizedState=u,t.flags&256){t=fh(e,t,s,a);break e}else if(s!==c){c=Ha(Error(o(424)),t),Ar(c),t=fh(e,t,s,a);break e}else{switch(e=t.stateNode.containerInfo,e.nodeType){case 9:e=e.body;break;default:e=e.nodeName==="HTML"?e.ownerDocument.body:e}for(xt=Ya(e.firstChild),Jt=t,We=!0,cs=null,Va=!0,a=ip(t,null,s,a),t.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling}else{if(Ps(),s===c){t=Gn(e,t,a);break e}ta(e,t,s,a)}t=t.child}return t;case 26:return io(e,t),e===null?(a=Tm(t.type,null,t.pendingProps,null))?t.memoizedState=a:We||(a=t.type,e=t.pendingProps,s=_o(ie.current).createElement(a),s[Yt]=t,s[la]=e,aa(s,a,e),zt(s),t.stateNode=s):t.memoizedState=Tm(t.type,e.memoizedProps,t.pendingProps,e.memoizedState),null;case 27:return J(t),e===null&&We&&(s=t.stateNode=Nm(t.type,t.pendingProps,ie.current),Jt=t,Va=!0,c=xt,Ns(t.type)?(md=c,xt=Ya(s.firstChild)):xt=c),ta(e,t,t.pendingProps.children,a),io(e,t),e===null&&(t.flags|=4194304),t.child;case 5:return e===null&&We&&((c=s=xt)&&(s=eS(s,t.type,t.pendingProps,Va),s!==null?(t.stateNode=s,Jt=t,xt=Ya(s.firstChild),Va=!1,c=!0):c=!1),c||us(t)),J(t),c=t.type,u=t.pendingProps,x=e!==null?e.memoizedProps:null,s=u.children,ud(c,u)?s=null:x!==null&&ud(c,x)&&(t.flags|=32),t.memoizedState!==null&&(c=cu(e,t,m1,null,null,a),Jr._currentValue=c),io(e,t),ta(e,t,s,a),t.child;case 6:return e===null&&We&&((e=a=xt)&&(a=tS(a,t.pendingProps,Va),a!==null?(t.stateNode=a,Jt=t,xt=null,e=!0):e=!1),e||us(t)),null;case 13:return ph(e,t,a);case 4:return B(t,t.stateNode.containerInfo),s=t.pendingProps,e===null?t.child=Ws(t,null,s,a):ta(e,t,s,a),t.child;case 11:return sh(e,t,t.type,t.pendingProps,a);case 7:return ta(e,t,t.pendingProps,a),t.child;case 8:return ta(e,t,t.pendingProps.children,a),t.child;case 12:return ta(e,t,t.pendingProps.children,a),t.child;case 10:return s=t.pendingProps,ds(t,t.type,s.value),ta(e,t,s.children,a),t.child;case 9:return c=t.type._context,s=t.pendingProps.children,qs(t),c=ea(c),s=s(c),t.flags|=1,ta(e,t,s,a),t.child;case 14:return lh(e,t,t.type,t.pendingProps,a);case 15:return rh(e,t,t.type,t.pendingProps,a);case 19:return mh(e,t,a);case 31:return w1(e,t,a);case 22:return ih(e,t,a,t.pendingProps);case 24:return qs(t),s=ea(Ht),e===null?(c=Jc(),c===null&&(c=ft,u=Kc(),c.pooledCache=u,u.refCount++,u!==null&&(c.pooledCacheLanes|=a),c=u),t.memoizedState={parent:s,cache:c},tu(t),ds(t,Ht,c)):((e.lanes&a)!==0&&(au(e,t),kr(t,null,null,a),Rr()),c=e.memoizedState,u=t.memoizedState,c.parent!==s?(c={parent:s,cache:s},t.memoizedState=c,t.lanes===0&&(t.memoizedState=t.updateQueue.baseState=c),ds(t,Ht,s)):(s=u.cache,ds(t,Ht,s),s!==c.cache&&Zc(t,[Ht],a,!0))),ta(e,t,t.pendingProps.children,a),t.child;case 29:throw t.pendingProps}throw Error(o(156,t.tag))}function Pn(e){e.flags|=4}function Du(e,t,a,s,c){if((t=(e.mode&32)!==0)&&(t=!1),t){if(e.flags|=16777216,(c&335544128)===c)if(e.stateNode.complete)e.flags|=8192;else if(Vh())e.flags|=8192;else throw $s=Fi,eu}else e.flags&=-16777217}function xh(e,t){if(t.type!=="stylesheet"||(t.state.loading&4)!==0)e.flags&=-16777217;else if(e.flags|=16777216,!Rm(t))if(Vh())e.flags|=8192;else throw $s=Fi,eu}function co(e,t){t!==null&&(e.flags|=4),e.flags&16384&&(t=e.tag!==22?ht():536870912,e.lanes|=t,Hl|=t)}function Br(e,t){if(!We)switch(e.tailMode){case"hidden":t=e.tail;for(var a=null;t!==null;)t.alternate!==null&&(a=t),t=t.sibling;a===null?e.tail=null:a.sibling=null;break;case"collapsed":a=e.tail;for(var s=null;a!==null;)a.alternate!==null&&(s=a),a=a.sibling;s===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:s.sibling=null}}function yt(e){var t=e.alternate!==null&&e.alternate.child===e.child,a=0,s=0;if(t)for(var c=e.child;c!==null;)a|=c.lanes|c.childLanes,s|=c.subtreeFlags&65011712,s|=c.flags&65011712,c.return=e,c=c.sibling;else for(c=e.child;c!==null;)a|=c.lanes|c.childLanes,s|=c.subtreeFlags,s|=c.flags,c.return=e,c=c.sibling;return e.subtreeFlags|=s,e.childLanes=a,t}function _1(e,t,a){var s=t.pendingProps;switch(Yc(t),t.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return yt(t),null;case 1:return yt(t),null;case 3:return a=t.stateNode,s=null,e!==null&&(s=e.memoizedState.cache),t.memoizedState.cache!==s&&(t.flags|=2048),zn(Ht),le(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(e===null||e.child===null)&&(Tl(t)?Pn(t):e===null||e.memoizedState.isDehydrated&&(t.flags&256)===0||(t.flags|=1024,$c())),yt(t),null;case 26:var c=t.type,u=t.memoizedState;return e===null?(Pn(t),u!==null?(yt(t),xh(t,u)):(yt(t),Du(t,c,null,s,a))):u?u!==e.memoizedState?(Pn(t),yt(t),xh(t,u)):(yt(t),t.flags&=-16777217):(e=e.memoizedProps,e!==s&&Pn(t),yt(t),Du(t,c,e,s,a)),null;case 27:if(ee(t),a=ie.current,c=t.type,e!==null&&t.stateNode!=null)e.memoizedProps!==s&&Pn(t);else{if(!s){if(t.stateNode===null)throw Error(o(166));return yt(t),null}e=Q.current,Tl(t)?Z0(t):(e=Nm(c,s,a),t.stateNode=e,Pn(t))}return yt(t),null;case 5:if(ee(t),c=t.type,e!==null&&t.stateNode!=null)e.memoizedProps!==s&&Pn(t);else{if(!s){if(t.stateNode===null)throw Error(o(166));return yt(t),null}if(u=Q.current,Tl(t))Z0(t);else{var x=_o(ie.current);switch(u){case 1:u=x.createElementNS("http://www.w3.org/2000/svg",c);break;case 2:u=x.createElementNS("http://www.w3.org/1998/Math/MathML",c);break;default:switch(c){case"svg":u=x.createElementNS("http://www.w3.org/2000/svg",c);break;case"math":u=x.createElementNS("http://www.w3.org/1998/Math/MathML",c);break;case"script":u=x.createElement("div"),u.innerHTML="<script><\/script>",u=u.removeChild(u.firstChild);break;case"select":u=typeof s.is=="string"?x.createElement("select",{is:s.is}):x.createElement("select"),s.multiple?u.multiple=!0:s.size&&(u.size=s.size);break;default:u=typeof s.is=="string"?x.createElement(c,{is:s.is}):x.createElement(c)}}u[Yt]=t,u[la]=s;e:for(x=t.child;x!==null;){if(x.tag===5||x.tag===6)u.appendChild(x.stateNode);else if(x.tag!==4&&x.tag!==27&&x.child!==null){x.child.return=x,x=x.child;continue}if(x===t)break e;for(;x.sibling===null;){if(x.return===null||x.return===t)break e;x=x.return}x.sibling.return=x.return,x=x.sibling}t.stateNode=u;e:switch(aa(u,c,s),c){case"button":case"input":case"select":case"textarea":s=!!s.autoFocus;break e;case"img":s=!0;break e;default:s=!1}s&&Pn(t)}}return yt(t),Du(t,t.type,e===null?null:e.memoizedProps,t.pendingProps,a),null;case 6:if(e&&t.stateNode!=null)e.memoizedProps!==s&&Pn(t);else{if(typeof s!="string"&&t.stateNode===null)throw Error(o(166));if(e=ie.current,Tl(t)){if(e=t.stateNode,a=t.memoizedProps,s=null,c=Jt,c!==null)switch(c.tag){case 27:case 5:s=c.memoizedProps}e[Yt]=t,e=!!(e.nodeValue===a||s!==null&&s.suppressHydrationWarning===!0||pm(e.nodeValue,a)),e||us(t,!0)}else e=_o(e).createTextNode(s),e[Yt]=t,t.stateNode=e}return yt(t),null;case 31:if(a=t.memoizedState,e===null||e.memoizedState!==null){if(s=Tl(t),a!==null){if(e===null){if(!s)throw Error(o(318));if(e=t.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(o(557));e[Yt]=t}else Ps(),(t.flags&128)===0&&(t.memoizedState=null),t.flags|=4;yt(t),e=!1}else a=$c(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=a),e=!0;if(!e)return t.flags&256?(Ia(t),t):(Ia(t),null);if((t.flags&128)!==0)throw Error(o(558))}return yt(t),null;case 13:if(s=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(c=Tl(t),s!==null&&s.dehydrated!==null){if(e===null){if(!c)throw Error(o(318));if(c=t.memoizedState,c=c!==null?c.dehydrated:null,!c)throw Error(o(317));c[Yt]=t}else Ps(),(t.flags&128)===0&&(t.memoizedState=null),t.flags|=4;yt(t),c=!1}else c=$c(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=c),c=!0;if(!c)return t.flags&256?(Ia(t),t):(Ia(t),null)}return Ia(t),(t.flags&128)!==0?(t.lanes=a,t):(a=s!==null,e=e!==null&&e.memoizedState!==null,a&&(s=t.child,c=null,s.alternate!==null&&s.alternate.memoizedState!==null&&s.alternate.memoizedState.cachePool!==null&&(c=s.alternate.memoizedState.cachePool.pool),u=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(u=s.memoizedState.cachePool.pool),u!==c&&(s.flags|=2048)),a!==e&&a&&(t.child.flags|=8192),co(t,t.updateQueue),yt(t),null);case 4:return le(),e===null&&ld(t.stateNode.containerInfo),yt(t),null;case 10:return zn(t.type),yt(t),null;case 19:if(T(kt),s=t.memoizedState,s===null)return yt(t),null;if(c=(t.flags&128)!==0,u=s.rendering,u===null)if(c)Br(s,!1);else{if(Ct!==0||e!==null&&(e.flags&128)!==0)for(e=t.child;e!==null;){if(u=Zi(e),u!==null){for(t.flags|=128,Br(s,!1),e=u.updateQueue,t.updateQueue=e,co(t,e),t.subtreeFlags=0,e=a,a=t.child;a!==null;)Y0(a,e),a=a.sibling;return k(kt,kt.current&1|2),We&&Un(t,s.treeForkCount),t.child}e=e.sibling}s.tail!==null&&ke()>mo&&(t.flags|=128,c=!0,Br(s,!1),t.lanes=4194304)}else{if(!c)if(e=Zi(u),e!==null){if(t.flags|=128,c=!0,e=e.updateQueue,t.updateQueue=e,co(t,e),Br(s,!0),s.tail===null&&s.tailMode==="hidden"&&!u.alternate&&!We)return yt(t),null}else 2*ke()-s.renderingStartTime>mo&&a!==536870912&&(t.flags|=128,c=!0,Br(s,!1),t.lanes=4194304);s.isBackwards?(u.sibling=t.child,t.child=u):(e=s.last,e!==null?e.sibling=u:t.child=u,s.last=u)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=ke(),e.sibling=null,a=kt.current,k(kt,c?a&1|2:a&1),We&&Un(t,s.treeForkCount),e):(yt(t),null);case 22:case 23:return Ia(t),ru(),s=t.memoizedState!==null,e!==null?e.memoizedState!==null!==s&&(t.flags|=8192):s&&(t.flags|=8192),s?(a&536870912)!==0&&(t.flags&128)===0&&(yt(t),t.subtreeFlags&6&&(t.flags|=8192)):yt(t),a=t.updateQueue,a!==null&&co(t,a.retryQueue),a=null,e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(a=e.memoizedState.cachePool.pool),s=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(s=t.memoizedState.cachePool.pool),s!==a&&(t.flags|=2048),e!==null&&T(Ys),null;case 24:return a=null,e!==null&&(a=e.memoizedState.cache),t.memoizedState.cache!==a&&(t.flags|=2048),zn(Ht),yt(t),null;case 25:return null;case 30:return null}throw Error(o(156,t.tag))}function A1(e,t){switch(Yc(t),t.tag){case 1:return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return zn(Ht),le(),e=t.flags,(e&65536)!==0&&(e&128)===0?(t.flags=e&-65537|128,t):null;case 26:case 27:case 5:return ee(t),null;case 31:if(t.memoizedState!==null){if(Ia(t),t.alternate===null)throw Error(o(340));Ps()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 13:if(Ia(t),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(o(340));Ps()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return T(kt),null;case 4:return le(),null;case 10:return zn(t.type),null;case 22:case 23:return Ia(t),ru(),e!==null&&T(Ys),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 24:return zn(Ht),null;case 25:return null;default:return null}}function yh(e,t){switch(Yc(t),t.tag){case 3:zn(Ht),le();break;case 26:case 27:case 5:ee(t);break;case 4:le();break;case 31:t.memoizedState!==null&&Ia(t);break;case 13:Ia(t);break;case 19:T(kt);break;case 10:zn(t.type);break;case 22:case 23:Ia(t),ru(),e!==null&&T(Ys);break;case 24:zn(Ht)}}function Hr(e,t){try{var a=t.updateQueue,s=a!==null?a.lastEffect:null;if(s!==null){var c=s.next;a=c;do{if((a.tag&e)===e){s=void 0;var u=a.create,x=a.inst;s=u(),x.destroy=s}a=a.next}while(a!==c)}}catch(S){lt(t,t.return,S)}}function xs(e,t,a){try{var s=t.updateQueue,c=s!==null?s.lastEffect:null;if(c!==null){var u=c.next;s=u;do{if((s.tag&e)===e){var x=s.inst,S=x.destroy;if(S!==void 0){x.destroy=void 0,c=t;var R=a,K=S;try{K()}catch(oe){lt(c,R,oe)}}}s=s.next}while(s!==u)}}catch(oe){lt(t,t.return,oe)}}function bh(e){var t=e.updateQueue;if(t!==null){var a=e.stateNode;try{cp(t,a)}catch(s){lt(e,e.return,s)}}}function vh(e,t,a){a.props=Zs(e.type,e.memoizedProps),a.state=e.memoizedState;try{a.componentWillUnmount()}catch(s){lt(e,t,s)}}function Gr(e,t){try{var a=e.ref;if(a!==null){switch(e.tag){case 26:case 27:case 5:var s=e.stateNode;break;case 30:s=e.stateNode;break;default:s=e.stateNode}typeof a=="function"?e.refCleanup=a(s):a.current=s}}catch(c){lt(e,t,c)}}function An(e,t){var a=e.ref,s=e.refCleanup;if(a!==null)if(typeof s=="function")try{s()}catch(c){lt(e,t,c)}finally{e.refCleanup=null,e=e.alternate,e!=null&&(e.refCleanup=null)}else if(typeof a=="function")try{a(null)}catch(c){lt(e,t,c)}else a.current=null}function Sh(e){var t=e.type,a=e.memoizedProps,s=e.stateNode;try{e:switch(t){case"button":case"input":case"select":case"textarea":a.autoFocus&&s.focus();break e;case"img":a.src?s.src=a.src:a.srcSet&&(s.srcset=a.srcSet)}}catch(c){lt(e,e.return,c)}}function zu(e,t,a){try{var s=e.stateNode;W1(s,e.type,a,t),s[la]=t}catch(c){lt(e,e.return,c)}}function Eh(e){return e.tag===5||e.tag===3||e.tag===26||e.tag===27&&Ns(e.type)||e.tag===4}function Bu(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||Eh(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.tag===27&&Ns(e.type)||e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Hu(e,t,a){var s=e.tag;if(s===5||s===6)e=e.stateNode,t?(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a).insertBefore(e,t):(t=a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,t.appendChild(e),a=a._reactRootContainer,a!=null||t.onclick!==null||(t.onclick=kn));else if(s!==4&&(s===27&&Ns(e.type)&&(a=e.stateNode,t=null),e=e.child,e!==null))for(Hu(e,t,a),e=e.sibling;e!==null;)Hu(e,t,a),e=e.sibling}function uo(e,t,a){var s=e.tag;if(s===5||s===6)e=e.stateNode,t?a.insertBefore(e,t):a.appendChild(e);else if(s!==4&&(s===27&&Ns(e.type)&&(a=e.stateNode),e=e.child,e!==null))for(uo(e,t,a),e=e.sibling;e!==null;)uo(e,t,a),e=e.sibling}function wh(e){var t=e.stateNode,a=e.memoizedProps;try{for(var s=e.type,c=t.attributes;c.length;)t.removeAttributeNode(c[0]);aa(t,s,a),t[Yt]=e,t[la]=a}catch(u){lt(e,e.return,u)}}var Vn=!1,Vt=!1,Gu=!1,Nh=typeof WeakSet=="function"?WeakSet:Set,Qt=null;function T1(e,t){if(e=e.containerInfo,od=Ro,e=U0(e),Lc(e)){if("selectionStart"in e)var a={start:e.selectionStart,end:e.selectionEnd};else e:{a=(a=e.ownerDocument)&&a.defaultView||window;var s=a.getSelection&&a.getSelection();if(s&&s.rangeCount!==0){a=s.anchorNode;var c=s.anchorOffset,u=s.focusNode;s=s.focusOffset;try{a.nodeType,u.nodeType}catch{a=null;break e}var x=0,S=-1,R=-1,K=0,oe=0,de=e,X=null;t:for(;;){for(var se;de!==a||c!==0&&de.nodeType!==3||(S=x+c),de!==u||s!==0&&de.nodeType!==3||(R=x+s),de.nodeType===3&&(x+=de.nodeValue.length),(se=de.firstChild)!==null;)X=de,de=se;for(;;){if(de===e)break t;if(X===a&&++K===c&&(S=x),X===u&&++oe===s&&(R=x),(se=de.nextSibling)!==null)break;de=X,X=de.parentNode}de=se}a=S===-1||R===-1?null:{start:S,end:R}}else a=null}a=a||{start:0,end:0}}else a=null;for(cd={focusedElem:e,selectionRange:a},Ro=!1,Qt=t;Qt!==null;)if(t=Qt,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,Qt=e;else for(;Qt!==null;){switch(t=Qt,u=t.alternate,e=t.flags,t.tag){case 0:if((e&4)!==0&&(e=t.updateQueue,e=e!==null?e.events:null,e!==null))for(a=0;a<e.length;a++)c=e[a],c.ref.impl=c.nextImpl;break;case 11:case 15:break;case 1:if((e&1024)!==0&&u!==null){e=void 0,a=t,c=u.memoizedProps,u=u.memoizedState,s=a.stateNode;try{var Ee=Zs(a.type,c);e=s.getSnapshotBeforeUpdate(Ee,u),s.__reactInternalSnapshotBeforeUpdate=e}catch(Oe){lt(a,a.return,Oe)}}break;case 3:if((e&1024)!==0){if(e=t.stateNode.containerInfo,a=e.nodeType,a===9)fd(e);else if(a===1)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":fd(e);break;default:e.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((e&1024)!==0)throw Error(o(163))}if(e=t.sibling,e!==null){e.return=t.return,Qt=e;break}Qt=t.return}}function _h(e,t,a){var s=a.flags;switch(a.tag){case 0:case 11:case 15:Yn(e,a),s&4&&Hr(5,a);break;case 1:if(Yn(e,a),s&4)if(e=a.stateNode,t===null)try{e.componentDidMount()}catch(x){lt(a,a.return,x)}else{var c=Zs(a.type,t.memoizedProps);t=t.memoizedState;try{e.componentDidUpdate(c,t,e.__reactInternalSnapshotBeforeUpdate)}catch(x){lt(a,a.return,x)}}s&64&&bh(a),s&512&&Gr(a,a.return);break;case 3:if(Yn(e,a),s&64&&(e=a.updateQueue,e!==null)){if(t=null,a.child!==null)switch(a.child.tag){case 27:case 5:t=a.child.stateNode;break;case 1:t=a.child.stateNode}try{cp(e,t)}catch(x){lt(a,a.return,x)}}break;case 27:t===null&&s&4&&wh(a);case 26:case 5:Yn(e,a),t===null&&s&4&&Sh(a),s&512&&Gr(a,a.return);break;case 12:Yn(e,a);break;case 31:Yn(e,a),s&4&&jh(e,a);break;case 13:Yn(e,a),s&4&&Ih(e,a),s&64&&(e=a.memoizedState,e!==null&&(e=e.dehydrated,e!==null&&(a=U1.bind(null,a),aS(e,a))));break;case 22:if(s=a.memoizedState!==null||Vn,!s){t=t!==null&&t.memoizedState!==null||Vt,c=Vn;var u=Vt;Vn=s,(Vt=t)&&!u?Fn(e,a,(a.subtreeFlags&8772)!==0):Yn(e,a),Vn=c,Vt=u}break;case 30:break;default:Yn(e,a)}}function Ah(e){var t=e.alternate;t!==null&&(e.alternate=null,Ah(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&dr(t)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var Et=null,ga=!1;function qn(e,t,a){for(a=a.child;a!==null;)Th(e,t,a),a=a.sibling}function Th(e,t,a){if(vt&&typeof vt.onCommitFiberUnmount=="function")try{vt.onCommitFiberUnmount(Dt,a)}catch{}switch(a.tag){case 26:Vt||An(a,t),qn(e,t,a),a.memoizedState?a.memoizedState.count--:a.stateNode&&(a=a.stateNode,a.parentNode.removeChild(a));break;case 27:Vt||An(a,t);var s=Et,c=ga;Ns(a.type)&&(Et=a.stateNode,ga=!1),qn(e,t,a),Zr(a.stateNode),Et=s,ga=c;break;case 5:Vt||An(a,t);case 6:if(s=Et,c=ga,Et=null,qn(e,t,a),Et=s,ga=c,Et!==null)if(ga)try{(Et.nodeType===9?Et.body:Et.nodeName==="HTML"?Et.ownerDocument.body:Et).removeChild(a.stateNode)}catch(u){lt(a,t,u)}else try{Et.removeChild(a.stateNode)}catch(u){lt(a,t,u)}break;case 18:Et!==null&&(ga?(e=Et,bm(e.nodeType===9?e.body:e.nodeName==="HTML"?e.ownerDocument.body:e,a.stateNode),Wl(e)):bm(Et,a.stateNode));break;case 4:s=Et,c=ga,Et=a.stateNode.containerInfo,ga=!0,qn(e,t,a),Et=s,ga=c;break;case 0:case 11:case 14:case 15:xs(2,a,t),Vt||xs(4,a,t),qn(e,t,a);break;case 1:Vt||(An(a,t),s=a.stateNode,typeof s.componentWillUnmount=="function"&&vh(a,t,s)),qn(e,t,a);break;case 21:qn(e,t,a);break;case 22:Vt=(s=Vt)||a.memoizedState!==null,qn(e,t,a),Vt=s;break;default:qn(e,t,a)}}function jh(e,t){if(t.memoizedState===null&&(e=t.alternate,e!==null&&(e=e.memoizedState,e!==null))){e=e.dehydrated;try{Wl(e)}catch(a){lt(t,t.return,a)}}}function Ih(e,t){if(t.memoizedState===null&&(e=t.alternate,e!==null&&(e=e.memoizedState,e!==null&&(e=e.dehydrated,e!==null))))try{Wl(e)}catch(a){lt(t,t.return,a)}}function j1(e){switch(e.tag){case 31:case 13:case 19:var t=e.stateNode;return t===null&&(t=e.stateNode=new Nh),t;case 22:return e=e.stateNode,t=e._retryCache,t===null&&(t=e._retryCache=new Nh),t;default:throw Error(o(435,e.tag))}}function fo(e,t){var a=j1(e);t.forEach(function(s){if(!a.has(s)){a.add(s);var c=D1.bind(null,e,s);s.then(c,c)}})}function xa(e,t){var a=t.deletions;if(a!==null)for(var s=0;s<a.length;s++){var c=a[s],u=e,x=t,S=x;e:for(;S!==null;){switch(S.tag){case 27:if(Ns(S.type)){Et=S.stateNode,ga=!1;break e}break;case 5:Et=S.stateNode,ga=!1;break e;case 3:case 4:Et=S.stateNode.containerInfo,ga=!0;break e}S=S.return}if(Et===null)throw Error(o(160));Th(u,x,c),Et=null,ga=!1,u=c.alternate,u!==null&&(u.return=null),c.return=null}if(t.subtreeFlags&13886)for(t=t.child;t!==null;)Oh(t,e),t=t.sibling}var ln=null;function Oh(e,t){var a=e.alternate,s=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:xa(t,e),ya(e),s&4&&(xs(3,e,e.return),Hr(3,e),xs(5,e,e.return));break;case 1:xa(t,e),ya(e),s&512&&(Vt||a===null||An(a,a.return)),s&64&&Vn&&(e=e.updateQueue,e!==null&&(s=e.callbacks,s!==null&&(a=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=a===null?s:a.concat(s))));break;case 26:var c=ln;if(xa(t,e),ya(e),s&512&&(Vt||a===null||An(a,a.return)),s&4){var u=a!==null?a.memoizedState:null;if(s=e.memoizedState,a===null)if(s===null)if(e.stateNode===null){e:{s=e.type,a=e.memoizedProps,c=c.ownerDocument||c;t:switch(s){case"title":u=c.getElementsByTagName("title")[0],(!u||u[ns]||u[Yt]||u.namespaceURI==="http://www.w3.org/2000/svg"||u.hasAttribute("itemprop"))&&(u=c.createElement(s),c.head.insertBefore(u,c.querySelector("head > title"))),aa(u,s,a),u[Yt]=e,zt(u),s=u;break e;case"link":var x=Om("link","href",c).get(s+(a.href||""));if(x){for(var S=0;S<x.length;S++)if(u=x[S],u.getAttribute("href")===(a.href==null||a.href===""?null:a.href)&&u.getAttribute("rel")===(a.rel==null?null:a.rel)&&u.getAttribute("title")===(a.title==null?null:a.title)&&u.getAttribute("crossorigin")===(a.crossOrigin==null?null:a.crossOrigin)){x.splice(S,1);break t}}u=c.createElement(s),aa(u,s,a),c.head.appendChild(u);break;case"meta":if(x=Om("meta","content",c).get(s+(a.content||""))){for(S=0;S<x.length;S++)if(u=x[S],u.getAttribute("content")===(a.content==null?null:""+a.content)&&u.getAttribute("name")===(a.name==null?null:a.name)&&u.getAttribute("property")===(a.property==null?null:a.property)&&u.getAttribute("http-equiv")===(a.httpEquiv==null?null:a.httpEquiv)&&u.getAttribute("charset")===(a.charSet==null?null:a.charSet)){x.splice(S,1);break t}}u=c.createElement(s),aa(u,s,a),c.head.appendChild(u);break;default:throw Error(o(468,s))}u[Yt]=e,zt(u),s=u}e.stateNode=s}else Cm(c,e.type,e.stateNode);else e.stateNode=Im(c,s,e.memoizedProps);else u!==s?(u===null?a.stateNode!==null&&(a=a.stateNode,a.parentNode.removeChild(a)):u.count--,s===null?Cm(c,e.type,e.stateNode):Im(c,s,e.memoizedProps)):s===null&&e.stateNode!==null&&zu(e,e.memoizedProps,a.memoizedProps)}break;case 27:xa(t,e),ya(e),s&512&&(Vt||a===null||An(a,a.return)),a!==null&&s&4&&zu(e,e.memoizedProps,a.memoizedProps);break;case 5:if(xa(t,e),ya(e),s&512&&(Vt||a===null||An(a,a.return)),e.flags&32){c=e.stateNode;try{xl(c,"")}catch(Ee){lt(e,e.return,Ee)}}s&4&&e.stateNode!=null&&(c=e.memoizedProps,zu(e,c,a!==null?a.memoizedProps:c)),s&1024&&(Gu=!0);break;case 6:if(xa(t,e),ya(e),s&4){if(e.stateNode===null)throw Error(o(162));s=e.memoizedProps,a=e.stateNode;try{a.nodeValue=s}catch(Ee){lt(e,e.return,Ee)}}break;case 3:if(jo=null,c=ln,ln=Ao(t.containerInfo),xa(t,e),ln=c,ya(e),s&4&&a!==null&&a.memoizedState.isDehydrated)try{Wl(t.containerInfo)}catch(Ee){lt(e,e.return,Ee)}Gu&&(Gu=!1,Ch(e));break;case 4:s=ln,ln=Ao(e.stateNode.containerInfo),xa(t,e),ya(e),ln=s;break;case 12:xa(t,e),ya(e);break;case 31:xa(t,e),ya(e),s&4&&(s=e.updateQueue,s!==null&&(e.updateQueue=null,fo(e,s)));break;case 13:xa(t,e),ya(e),e.child.flags&8192&&e.memoizedState!==null!=(a!==null&&a.memoizedState!==null)&&(ho=ke()),s&4&&(s=e.updateQueue,s!==null&&(e.updateQueue=null,fo(e,s)));break;case 22:c=e.memoizedState!==null;var R=a!==null&&a.memoizedState!==null,K=Vn,oe=Vt;if(Vn=K||c,Vt=oe||R,xa(t,e),Vt=oe,Vn=K,ya(e),s&8192)e:for(t=e.stateNode,t._visibility=c?t._visibility&-2:t._visibility|1,c&&(a===null||R||Vn||Vt||Ks(e)),a=null,t=e;;){if(t.tag===5||t.tag===26){if(a===null){R=a=t;try{if(u=R.stateNode,c)x=u.style,typeof x.setProperty=="function"?x.setProperty("display","none","important"):x.display="none";else{S=R.stateNode;var de=R.memoizedProps.style,X=de!=null&&de.hasOwnProperty("display")?de.display:null;S.style.display=X==null||typeof X=="boolean"?"":(""+X).trim()}}catch(Ee){lt(R,R.return,Ee)}}}else if(t.tag===6){if(a===null){R=t;try{R.stateNode.nodeValue=c?"":R.memoizedProps}catch(Ee){lt(R,R.return,Ee)}}}else if(t.tag===18){if(a===null){R=t;try{var se=R.stateNode;c?vm(se,!0):vm(R.stateNode,!1)}catch(Ee){lt(R,R.return,Ee)}}}else if((t.tag!==22&&t.tag!==23||t.memoizedState===null||t===e)&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;a===t&&(a=null),t=t.return}a===t&&(a=null),t.sibling.return=t.return,t=t.sibling}s&4&&(s=e.updateQueue,s!==null&&(a=s.retryQueue,a!==null&&(s.retryQueue=null,fo(e,a))));break;case 19:xa(t,e),ya(e),s&4&&(s=e.updateQueue,s!==null&&(e.updateQueue=null,fo(e,s)));break;case 30:break;case 21:break;default:xa(t,e),ya(e)}}function ya(e){var t=e.flags;if(t&2){try{for(var a,s=e.return;s!==null;){if(Eh(s)){a=s;break}s=s.return}if(a==null)throw Error(o(160));switch(a.tag){case 27:var c=a.stateNode,u=Bu(e);uo(e,u,c);break;case 5:var x=a.stateNode;a.flags&32&&(xl(x,""),a.flags&=-33);var S=Bu(e);uo(e,S,x);break;case 3:case 4:var R=a.stateNode.containerInfo,K=Bu(e);Hu(e,K,R);break;default:throw Error(o(161))}}catch(oe){lt(e,e.return,oe)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function Ch(e){if(e.subtreeFlags&1024)for(e=e.child;e!==null;){var t=e;Ch(t),t.tag===5&&t.flags&1024&&t.stateNode.reset(),e=e.sibling}}function Yn(e,t){if(t.subtreeFlags&8772)for(t=t.child;t!==null;)_h(e,t.alternate,t),t=t.sibling}function Ks(e){for(e=e.child;e!==null;){var t=e;switch(t.tag){case 0:case 11:case 14:case 15:xs(4,t,t.return),Ks(t);break;case 1:An(t,t.return);var a=t.stateNode;typeof a.componentWillUnmount=="function"&&vh(t,t.return,a),Ks(t);break;case 27:Zr(t.stateNode);case 26:case 5:An(t,t.return),Ks(t);break;case 22:t.memoizedState===null&&Ks(t);break;case 30:Ks(t);break;default:Ks(t)}e=e.sibling}}function Fn(e,t,a){for(a=a&&(t.subtreeFlags&8772)!==0,t=t.child;t!==null;){var s=t.alternate,c=e,u=t,x=u.flags;switch(u.tag){case 0:case 11:case 15:Fn(c,u,a),Hr(4,u);break;case 1:if(Fn(c,u,a),s=u,c=s.stateNode,typeof c.componentDidMount=="function")try{c.componentDidMount()}catch(K){lt(s,s.return,K)}if(s=u,c=s.updateQueue,c!==null){var S=s.stateNode;try{var R=c.shared.hiddenCallbacks;if(R!==null)for(c.shared.hiddenCallbacks=null,c=0;c<R.length;c++)op(R[c],S)}catch(K){lt(s,s.return,K)}}a&&x&64&&bh(u),Gr(u,u.return);break;case 27:wh(u);case 26:case 5:Fn(c,u,a),a&&s===null&&x&4&&Sh(u),Gr(u,u.return);break;case 12:Fn(c,u,a);break;case 31:Fn(c,u,a),a&&x&4&&jh(c,u);break;case 13:Fn(c,u,a),a&&x&4&&Ih(c,u);break;case 22:u.memoizedState===null&&Fn(c,u,a),Gr(u,u.return);break;case 30:break;default:Fn(c,u,a)}t=t.sibling}}function Pu(e,t){var a=null;e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(a=e.memoizedState.cachePool.pool),e=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(e=t.memoizedState.cachePool.pool),e!==a&&(e!=null&&e.refCount++,a!=null&&Tr(a))}function Vu(e,t){e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&Tr(e))}function rn(e,t,a,s){if(t.subtreeFlags&10256)for(t=t.child;t!==null;)Rh(e,t,a,s),t=t.sibling}function Rh(e,t,a,s){var c=t.flags;switch(t.tag){case 0:case 11:case 15:rn(e,t,a,s),c&2048&&Hr(9,t);break;case 1:rn(e,t,a,s);break;case 3:rn(e,t,a,s),c&2048&&(e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&Tr(e)));break;case 12:if(c&2048){rn(e,t,a,s),e=t.stateNode;try{var u=t.memoizedProps,x=u.id,S=u.onPostCommit;typeof S=="function"&&S(x,t.alternate===null?"mount":"update",e.passiveEffectDuration,-0)}catch(R){lt(t,t.return,R)}}else rn(e,t,a,s);break;case 31:rn(e,t,a,s);break;case 13:rn(e,t,a,s);break;case 23:break;case 22:u=t.stateNode,x=t.alternate,t.memoizedState!==null?u._visibility&2?rn(e,t,a,s):Pr(e,t):u._visibility&2?rn(e,t,a,s):(u._visibility|=2,Dl(e,t,a,s,(t.subtreeFlags&10256)!==0||!1)),c&2048&&Pu(x,t);break;case 24:rn(e,t,a,s),c&2048&&Vu(t.alternate,t);break;default:rn(e,t,a,s)}}function Dl(e,t,a,s,c){for(c=c&&((t.subtreeFlags&10256)!==0||!1),t=t.child;t!==null;){var u=e,x=t,S=a,R=s,K=x.flags;switch(x.tag){case 0:case 11:case 15:Dl(u,x,S,R,c),Hr(8,x);break;case 23:break;case 22:var oe=x.stateNode;x.memoizedState!==null?oe._visibility&2?Dl(u,x,S,R,c):Pr(u,x):(oe._visibility|=2,Dl(u,x,S,R,c)),c&&K&2048&&Pu(x.alternate,x);break;case 24:Dl(u,x,S,R,c),c&&K&2048&&Vu(x.alternate,x);break;default:Dl(u,x,S,R,c)}t=t.sibling}}function Pr(e,t){if(t.subtreeFlags&10256)for(t=t.child;t!==null;){var a=e,s=t,c=s.flags;switch(s.tag){case 22:Pr(a,s),c&2048&&Pu(s.alternate,s);break;case 24:Pr(a,s),c&2048&&Vu(s.alternate,s);break;default:Pr(a,s)}t=t.sibling}}var Vr=8192;function zl(e,t,a){if(e.subtreeFlags&Vr)for(e=e.child;e!==null;)kh(e,t,a),e=e.sibling}function kh(e,t,a){switch(e.tag){case 26:zl(e,t,a),e.flags&Vr&&e.memoizedState!==null&&hS(a,ln,e.memoizedState,e.memoizedProps);break;case 5:zl(e,t,a);break;case 3:case 4:var s=ln;ln=Ao(e.stateNode.containerInfo),zl(e,t,a),ln=s;break;case 22:e.memoizedState===null&&(s=e.alternate,s!==null&&s.memoizedState!==null?(s=Vr,Vr=16777216,zl(e,t,a),Vr=s):zl(e,t,a));break;default:zl(e,t,a)}}function Lh(e){var t=e.alternate;if(t!==null&&(e=t.child,e!==null)){t.child=null;do t=e.sibling,e.sibling=null,e=t;while(e!==null)}}function qr(e){var t=e.deletions;if((e.flags&16)!==0){if(t!==null)for(var a=0;a<t.length;a++){var s=t[a];Qt=s,Uh(s,e)}Lh(e)}if(e.subtreeFlags&10256)for(e=e.child;e!==null;)Mh(e),e=e.sibling}function Mh(e){switch(e.tag){case 0:case 11:case 15:qr(e),e.flags&2048&&xs(9,e,e.return);break;case 3:qr(e);break;case 12:qr(e);break;case 22:var t=e.stateNode;e.memoizedState!==null&&t._visibility&2&&(e.return===null||e.return.tag!==13)?(t._visibility&=-3,po(e)):qr(e);break;default:qr(e)}}function po(e){var t=e.deletions;if((e.flags&16)!==0){if(t!==null)for(var a=0;a<t.length;a++){var s=t[a];Qt=s,Uh(s,e)}Lh(e)}for(e=e.child;e!==null;){switch(t=e,t.tag){case 0:case 11:case 15:xs(8,t,t.return),po(t);break;case 22:a=t.stateNode,a._visibility&2&&(a._visibility&=-3,po(t));break;default:po(t)}e=e.sibling}}function Uh(e,t){for(;Qt!==null;){var a=Qt;switch(a.tag){case 0:case 11:case 15:xs(8,a,t);break;case 23:case 22:if(a.memoizedState!==null&&a.memoizedState.cachePool!==null){var s=a.memoizedState.cachePool.pool;s!=null&&s.refCount++}break;case 24:Tr(a.memoizedState.cache)}if(s=a.child,s!==null)s.return=a,Qt=s;else e:for(a=e;Qt!==null;){s=Qt;var c=s.sibling,u=s.return;if(Ah(s),s===a){Qt=null;break e}if(c!==null){c.return=u,Qt=c;break e}Qt=u}}}var I1={getCacheForType:function(e){var t=ea(Ht),a=t.data.get(e);return a===void 0&&(a=e(),t.data.set(e,a)),a},cacheSignal:function(){return ea(Ht).controller.signal}},O1=typeof WeakMap=="function"?WeakMap:Map,at=0,ft=null,Ve=null,Ye=0,st=0,Oa=null,ys=!1,Bl=!1,qu=!1,$n=0,Ct=0,bs=0,Xs=0,Yu=0,Ca=0,Hl=0,Yr=null,ba=null,Fu=!1,ho=0,Dh=0,mo=1/0,go=null,vs=null,Ft=0,Ss=null,Gl=null,Wn=0,$u=0,Wu=null,zh=null,Fr=0,Qu=null;function Ra(){return(at&2)!==0&&Ye!==0?Ye&-Ye:C.T!==null?td():Ls()}function Bh(){if(Ca===0)if((Ye&536870912)===0||We){var e=je;je<<=1,(je&3932160)===0&&(je=262144),Ca=e}else Ca=536870912;return e=ja.current,e!==null&&(e.flags|=32),Ca}function va(e,t,a){(e===ft&&(st===2||st===9)||e.cancelPendingCommit!==null)&&(Pl(e,0),Es(e,Ye,Ca,!1)),sa(e,a),((at&2)===0||e!==ft)&&(e===ft&&((at&2)===0&&(Xs|=a),Ct===4&&Es(e,Ye,Ca,!1)),Tn(e))}function Hh(e,t,a){if((at&6)!==0)throw Error(o(327));var s=!a&&(t&127)===0&&(t&e.expiredLanes)===0||Le(e,t),c=s?k1(e,t):Ku(e,t,!0),u=s;do{if(c===0){Bl&&!s&&Es(e,t,0,!1);break}else{if(a=e.current.alternate,u&&!C1(a)){c=Ku(e,t,!1),u=!1;continue}if(c===2){if(u=t,e.errorRecoveryDisabledLanes&u)var x=0;else x=e.pendingLanes&-536870913,x=x!==0?x:x&536870912?536870912:0;if(x!==0){t=x;e:{var S=e;c=Yr;var R=S.current.memoizedState.isDehydrated;if(R&&(Pl(S,x).flags|=256),x=Ku(S,x,!1),x!==2){if(qu&&!R){S.errorRecoveryDisabledLanes|=u,Xs|=u,c=4;break e}u=ba,ba=c,u!==null&&(ba===null?ba=u:ba.push.apply(ba,u))}c=x}if(u=!1,c!==2)continue}}if(c===1){Pl(e,0),Es(e,t,0,!0);break}e:{switch(s=e,u=c,u){case 0:case 1:throw Error(o(345));case 4:if((t&4194048)!==t)break;case 6:Es(s,t,Ca,!ys);break e;case 2:ba=null;break;case 3:case 5:break;default:throw Error(o(329))}if((t&62914560)===t&&(c=ho+300-ke(),10<c)){if(Es(s,t,Ca,!ys),Je(s,0,!0)!==0)break e;Wn=t,s.timeoutHandle=xm(Gh.bind(null,s,a,ba,go,Fu,t,Ca,Xs,Hl,ys,u,"Throttled",-0,0),c);break e}Gh(s,a,ba,go,Fu,t,Ca,Xs,Hl,ys,u,null,-0,0)}}break}while(!0);Tn(e)}function Gh(e,t,a,s,c,u,x,S,R,K,oe,de,X,se){if(e.timeoutHandle=-1,de=t.subtreeFlags,de&8192||(de&16785408)===16785408){de={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:kn},kh(t,u,de);var Ee=(u&62914560)===u?ho-ke():(u&4194048)===u?Dh-ke():0;if(Ee=mS(de,Ee),Ee!==null){Wn=u,e.cancelPendingCommit=Ee(Qh.bind(null,e,t,u,a,s,c,x,S,R,oe,de,null,X,se)),Es(e,u,x,!K);return}}Qh(e,t,u,a,s,c,x,S,R)}function C1(e){for(var t=e;;){var a=t.tag;if((a===0||a===11||a===15)&&t.flags&16384&&(a=t.updateQueue,a!==null&&(a=a.stores,a!==null)))for(var s=0;s<a.length;s++){var c=a[s],u=c.getSnapshot;c=c.value;try{if(!Aa(u(),c))return!1}catch{return!1}}if(a=t.child,t.subtreeFlags&16384&&a!==null)a.return=t,t=a;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Es(e,t,a,s){t&=~Yu,t&=~Xs,e.suspendedLanes|=t,e.pingedLanes&=~t,s&&(e.warmLanes|=t),s=e.expirationTimes;for(var c=t;0<c;){var u=31-It(c),x=1<<u;s[u]=-1,c&=~x}a!==0&&Xa(e,a,t)}function xo(){return(at&6)===0?($r(0),!1):!0}function Zu(){if(Ve!==null){if(st===0)var e=Ve.return;else e=Ve,Dn=Vs=null,fu(e),Rl=null,Ir=0,e=Ve;for(;e!==null;)yh(e.alternate,e),e=e.return;Ve=null}}function Pl(e,t){var a=e.timeoutHandle;a!==-1&&(e.timeoutHandle=-1,K1(a)),a=e.cancelPendingCommit,a!==null&&(e.cancelPendingCommit=null,a()),Wn=0,Zu(),ft=e,Ve=a=Mn(e.current,null),Ye=t,st=0,Oa=null,ys=!1,Bl=Le(e,t),qu=!1,Hl=Ca=Yu=Xs=bs=Ct=0,ba=Yr=null,Fu=!1,(t&8)!==0&&(t|=t&32);var s=e.entangledLanes;if(s!==0)for(e=e.entanglements,s&=t;0<s;){var c=31-It(s),u=1<<c;t|=e[c],s&=~u}return $n=t,Di(),a}function Ph(e,t){Be=null,C.H=Dr,t===Cl||t===Yi?(t=sp(),st=3):t===eu?(t=sp(),st=4):st=t===ju?8:t!==null&&typeof t=="object"&&typeof t.then=="function"?6:1,Oa=t,Ve===null&&(Ct=1,lo(e,Ha(t,e.current)))}function Vh(){var e=ja.current;return e===null?!0:(Ye&4194048)===Ye?qa===null:(Ye&62914560)===Ye||(Ye&536870912)!==0?e===qa:!1}function qh(){var e=C.H;return C.H=Dr,e===null?Dr:e}function Yh(){var e=C.A;return C.A=I1,e}function yo(){Ct=4,ys||(Ye&4194048)!==Ye&&ja.current!==null||(Bl=!0),(bs&134217727)===0&&(Xs&134217727)===0||ft===null||Es(ft,Ye,Ca,!1)}function Ku(e,t,a){var s=at;at|=2;var c=qh(),u=Yh();(ft!==e||Ye!==t)&&(go=null,Pl(e,t)),t=!1;var x=Ct;e:do try{if(st!==0&&Ve!==null){var S=Ve,R=Oa;switch(st){case 8:Zu(),x=6;break e;case 3:case 2:case 9:case 6:ja.current===null&&(t=!0);var K=st;if(st=0,Oa=null,Vl(e,S,R,K),a&&Bl){x=0;break e}break;default:K=st,st=0,Oa=null,Vl(e,S,R,K)}}R1(),x=Ct;break}catch(oe){Ph(e,oe)}while(!0);return t&&e.shellSuspendCounter++,Dn=Vs=null,at=s,C.H=c,C.A=u,Ve===null&&(ft=null,Ye=0,Di()),x}function R1(){for(;Ve!==null;)Fh(Ve)}function k1(e,t){var a=at;at|=2;var s=qh(),c=Yh();ft!==e||Ye!==t?(go=null,mo=ke()+500,Pl(e,t)):Bl=Le(e,t);e:do try{if(st!==0&&Ve!==null){t=Ve;var u=Oa;t:switch(st){case 1:st=0,Oa=null,Vl(e,t,u,1);break;case 2:case 9:if(ap(u)){st=0,Oa=null,$h(t);break}t=function(){st!==2&&st!==9||ft!==e||(st=7),Tn(e)},u.then(t,t);break e;case 3:st=7;break e;case 4:st=5;break e;case 7:ap(u)?(st=0,Oa=null,$h(t)):(st=0,Oa=null,Vl(e,t,u,7));break;case 5:var x=null;switch(Ve.tag){case 26:x=Ve.memoizedState;case 5:case 27:var S=Ve;if(x?Rm(x):S.stateNode.complete){st=0,Oa=null;var R=S.sibling;if(R!==null)Ve=R;else{var K=S.return;K!==null?(Ve=K,bo(K)):Ve=null}break t}}st=0,Oa=null,Vl(e,t,u,5);break;case 6:st=0,Oa=null,Vl(e,t,u,6);break;case 8:Zu(),Ct=6;break e;default:throw Error(o(462))}}L1();break}catch(oe){Ph(e,oe)}while(!0);return Dn=Vs=null,C.H=s,C.A=c,at=a,Ve!==null?0:(ft=null,Ye=0,Di(),Ct)}function L1(){for(;Ve!==null&&!Re();)Fh(Ve)}function Fh(e){var t=gh(e.alternate,e,$n);e.memoizedProps=e.pendingProps,t===null?bo(e):Ve=t}function $h(e){var t=e,a=t.alternate;switch(t.tag){case 15:case 0:t=uh(a,t,t.pendingProps,t.type,void 0,Ye);break;case 11:t=uh(a,t,t.pendingProps,t.type.render,t.ref,Ye);break;case 5:fu(t);default:yh(a,t),t=Ve=Y0(t,$n),t=gh(a,t,$n)}e.memoizedProps=e.pendingProps,t===null?bo(e):Ve=t}function Vl(e,t,a,s){Dn=Vs=null,fu(t),Rl=null,Ir=0;var c=t.return;try{if(E1(e,c,t,a,Ye)){Ct=1,lo(e,Ha(a,e.current)),Ve=null;return}}catch(u){if(c!==null)throw Ve=c,u;Ct=1,lo(e,Ha(a,e.current)),Ve=null;return}t.flags&32768?(We||s===1?e=!0:Bl||(Ye&536870912)!==0?e=!1:(ys=e=!0,(s===2||s===9||s===3||s===6)&&(s=ja.current,s!==null&&s.tag===13&&(s.flags|=16384))),Wh(t,e)):bo(t)}function bo(e){var t=e;do{if((t.flags&32768)!==0){Wh(t,ys);return}e=t.return;var a=_1(t.alternate,t,$n);if(a!==null){Ve=a;return}if(t=t.sibling,t!==null){Ve=t;return}Ve=t=e}while(t!==null);Ct===0&&(Ct=5)}function Wh(e,t){do{var a=A1(e.alternate,e);if(a!==null){a.flags&=32767,Ve=a;return}if(a=e.return,a!==null&&(a.flags|=32768,a.subtreeFlags=0,a.deletions=null),!t&&(e=e.sibling,e!==null)){Ve=e;return}Ve=e=a}while(e!==null);Ct=6,Ve=null}function Qh(e,t,a,s,c,u,x,S,R){e.cancelPendingCommit=null;do vo();while(Ft!==0);if((at&6)!==0)throw Error(o(327));if(t!==null){if(t===e.current)throw Error(o(177));if(u=t.lanes|t.childLanes,u|=Bc,Xt(e,a,u,x,S,R),e===ft&&(Ve=ft=null,Ye=0),Gl=t,Ss=e,Wn=a,$u=u,Wu=c,zh=s,(t.subtreeFlags&10256)!==0||(t.flags&10256)!==0?(e.callbackNode=null,e.callbackPriority=0,z1(dt,function(){return em(),null})):(e.callbackNode=null,e.callbackPriority=0),s=(t.flags&13878)!==0,(t.subtreeFlags&13878)!==0||s){s=C.T,C.T=null,c=ne.p,ne.p=2,x=at,at|=4;try{T1(e,t,a)}finally{at=x,ne.p=c,C.T=s}}Ft=1,Zh(),Kh(),Xh()}}function Zh(){if(Ft===1){Ft=0;var e=Ss,t=Gl,a=(t.flags&13878)!==0;if((t.subtreeFlags&13878)!==0||a){a=C.T,C.T=null;var s=ne.p;ne.p=2;var c=at;at|=4;try{Oh(t,e);var u=cd,x=U0(e.containerInfo),S=u.focusedElem,R=u.selectionRange;if(x!==S&&S&&S.ownerDocument&&M0(S.ownerDocument.documentElement,S)){if(R!==null&&Lc(S)){var K=R.start,oe=R.end;if(oe===void 0&&(oe=K),"selectionStart"in S)S.selectionStart=K,S.selectionEnd=Math.min(oe,S.value.length);else{var de=S.ownerDocument||document,X=de&&de.defaultView||window;if(X.getSelection){var se=X.getSelection(),Ee=S.textContent.length,Oe=Math.min(R.start,Ee),ut=R.end===void 0?Oe:Math.min(R.end,Ee);!se.extend&&Oe>ut&&(x=ut,ut=Oe,Oe=x);var W=L0(S,Oe),H=L0(S,ut);if(W&&H&&(se.rangeCount!==1||se.anchorNode!==W.node||se.anchorOffset!==W.offset||se.focusNode!==H.node||se.focusOffset!==H.offset)){var Z=de.createRange();Z.setStart(W.node,W.offset),se.removeAllRanges(),Oe>ut?(se.addRange(Z),se.extend(H.node,H.offset)):(Z.setEnd(H.node,H.offset),se.addRange(Z))}}}}for(de=[],se=S;se=se.parentNode;)se.nodeType===1&&de.push({element:se,left:se.scrollLeft,top:se.scrollTop});for(typeof S.focus=="function"&&S.focus(),S=0;S<de.length;S++){var ce=de[S];ce.element.scrollLeft=ce.left,ce.element.scrollTop=ce.top}}Ro=!!od,cd=od=null}finally{at=c,ne.p=s,C.T=a}}e.current=t,Ft=2}}function Kh(){if(Ft===2){Ft=0;var e=Ss,t=Gl,a=(t.flags&8772)!==0;if((t.subtreeFlags&8772)!==0||a){a=C.T,C.T=null;var s=ne.p;ne.p=2;var c=at;at|=4;try{_h(e,t.alternate,t)}finally{at=c,ne.p=s,C.T=a}}Ft=3}}function Xh(){if(Ft===4||Ft===3){Ft=0,Xe();var e=Ss,t=Gl,a=Wn,s=zh;(t.subtreeFlags&10256)!==0||(t.flags&10256)!==0?Ft=5:(Ft=0,Gl=Ss=null,Jh(e,e.pendingLanes));var c=e.pendingLanes;if(c===0&&(vs=null),an(a),t=t.stateNode,vt&&typeof vt.onCommitFiberRoot=="function")try{vt.onCommitFiberRoot(Dt,t,void 0,(t.current.flags&128)===128)}catch{}if(s!==null){t=C.T,c=ne.p,ne.p=2,C.T=null;try{for(var u=e.onRecoverableError,x=0;x<s.length;x++){var S=s[x];u(S.value,{componentStack:S.stack})}}finally{C.T=t,ne.p=c}}(Wn&3)!==0&&vo(),Tn(e),c=e.pendingLanes,(a&261930)!==0&&(c&42)!==0?e===Qu?Fr++:(Fr=0,Qu=e):Fr=0,$r(0)}}function Jh(e,t){(e.pooledCacheLanes&=t)===0&&(t=e.pooledCache,t!=null&&(e.pooledCache=null,Tr(t)))}function vo(){return Zh(),Kh(),Xh(),em()}function em(){if(Ft!==5)return!1;var e=Ss,t=$u;$u=0;var a=an(Wn),s=C.T,c=ne.p;try{ne.p=32>a?32:a,C.T=null,a=Wu,Wu=null;var u=Ss,x=Wn;if(Ft=0,Gl=Ss=null,Wn=0,(at&6)!==0)throw Error(o(331));var S=at;if(at|=4,Mh(u.current),Rh(u,u.current,x,a),at=S,$r(0,!1),vt&&typeof vt.onPostCommitFiberRoot=="function")try{vt.onPostCommitFiberRoot(Dt,u)}catch{}return!0}finally{ne.p=c,C.T=s,Jh(e,t)}}function tm(e,t,a){t=Ha(a,t),t=Tu(e.stateNode,t,2),e=hs(e,t,2),e!==null&&(sa(e,2),Tn(e))}function lt(e,t,a){if(e.tag===3)tm(e,e,a);else for(;t!==null;){if(t.tag===3){tm(t,e,a);break}else if(t.tag===1){var s=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof s.componentDidCatch=="function"&&(vs===null||!vs.has(s))){e=Ha(a,e),a=ah(2),s=hs(t,a,2),s!==null&&(nh(a,s,t,e),sa(s,2),Tn(s));break}}t=t.return}}function Xu(e,t,a){var s=e.pingCache;if(s===null){s=e.pingCache=new O1;var c=new Set;s.set(t,c)}else c=s.get(t),c===void 0&&(c=new Set,s.set(t,c));c.has(a)||(qu=!0,c.add(a),e=M1.bind(null,e,t,a),t.then(e,e))}function M1(e,t,a){var s=e.pingCache;s!==null&&s.delete(t),e.pingedLanes|=e.suspendedLanes&a,e.warmLanes&=~a,ft===e&&(Ye&a)===a&&(Ct===4||Ct===3&&(Ye&62914560)===Ye&&300>ke()-ho?(at&2)===0&&Pl(e,0):Yu|=a,Hl===Ye&&(Hl=0)),Tn(e)}function am(e,t){t===0&&(t=ht()),e=Hs(e,t),e!==null&&(sa(e,t),Tn(e))}function U1(e){var t=e.memoizedState,a=0;t!==null&&(a=t.retryLane),am(e,a)}function D1(e,t){var a=0;switch(e.tag){case 31:case 13:var s=e.stateNode,c=e.memoizedState;c!==null&&(a=c.retryLane);break;case 19:s=e.stateNode;break;case 22:s=e.stateNode._retryCache;break;default:throw Error(o(314))}s!==null&&s.delete(t),am(e,a)}function z1(e,t){return re(e,t)}var So=null,ql=null,Ju=!1,Eo=!1,ed=!1,ws=0;function Tn(e){e!==ql&&e.next===null&&(ql===null?So=ql=e:ql=ql.next=e),Eo=!0,Ju||(Ju=!0,H1())}function $r(e,t){if(!ed&&Eo){ed=!0;do for(var a=!1,s=So;s!==null;){if(e!==0){var c=s.pendingLanes;if(c===0)var u=0;else{var x=s.suspendedLanes,S=s.pingedLanes;u=(1<<31-It(42|e)+1)-1,u&=c&~(x&~S),u=u&201326741?u&201326741|1:u?u|2:0}u!==0&&(a=!0,rm(s,u))}else u=Ye,u=Je(s,s===ft?u:0,s.cancelPendingCommit!==null||s.timeoutHandle!==-1),(u&3)===0||Le(s,u)||(a=!0,rm(s,u));s=s.next}while(a);ed=!1}}function B1(){nm()}function nm(){Eo=Ju=!1;var e=0;ws!==0&&Z1()&&(e=ws);for(var t=ke(),a=null,s=So;s!==null;){var c=s.next,u=sm(s,t);u===0?(s.next=null,a===null?So=c:a.next=c,c===null&&(ql=a)):(a=s,(e!==0||(u&3)!==0)&&(Eo=!0)),s=c}Ft!==0&&Ft!==5||$r(e),ws!==0&&(ws=0)}function sm(e,t){for(var a=e.suspendedLanes,s=e.pingedLanes,c=e.expirationTimes,u=e.pendingLanes&-62914561;0<u;){var x=31-It(u),S=1<<x,R=c[x];R===-1?((S&a)===0||(S&s)!==0)&&(c[x]=Nt(S,t)):R<=t&&(e.expiredLanes|=S),u&=~S}if(t=ft,a=Ye,a=Je(e,e===t?a:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),s=e.callbackNode,a===0||e===t&&(st===2||st===9)||e.cancelPendingCommit!==null)return s!==null&&s!==null&&Ae(s),e.callbackNode=null,e.callbackPriority=0;if((a&3)===0||Le(e,a)){if(t=a&-a,t===e.callbackPriority)return t;switch(s!==null&&Ae(s),an(a)){case 2:case 8:a=Ze;break;case 32:a=dt;break;case 268435456:a=Cn;break;default:a=dt}return s=lm.bind(null,e),a=re(a,s),e.callbackPriority=t,e.callbackNode=a,t}return s!==null&&s!==null&&Ae(s),e.callbackPriority=2,e.callbackNode=null,2}function lm(e,t){if(Ft!==0&&Ft!==5)return e.callbackNode=null,e.callbackPriority=0,null;var a=e.callbackNode;if(vo()&&e.callbackNode!==a)return null;var s=Ye;return s=Je(e,e===ft?s:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),s===0?null:(Hh(e,s,t),sm(e,ke()),e.callbackNode!=null&&e.callbackNode===a?lm.bind(null,e):null)}function rm(e,t){if(vo())return null;Hh(e,t,!0)}function H1(){X1(function(){(at&6)!==0?re(Ge,B1):nm()})}function td(){if(ws===0){var e=Il;e===0&&(e=xe,xe<<=1,(xe&261888)===0&&(xe=256)),ws=e}return ws}function im(e){return e==null||typeof e=="symbol"||typeof e=="boolean"?null:typeof e=="function"?e:Ii(""+e)}function om(e,t){var a=t.ownerDocument.createElement("input");return a.name=t.name,a.value=t.value,e.id&&a.setAttribute("form",e.id),t.parentNode.insertBefore(a,t),e=new FormData(e),a.parentNode.removeChild(a),e}function G1(e,t,a,s,c){if(t==="submit"&&a&&a.stateNode===c){var u=im((c[la]||null).action),x=s.submitter;x&&(t=(t=x[la]||null)?im(t.formAction):x.getAttribute("formAction"),t!==null&&(u=t,x=null));var S=new ki("action","action",null,s,c);e.push({event:S,listeners:[{instance:null,listener:function(){if(s.defaultPrevented){if(ws!==0){var R=x?om(c,x):new FormData(c);Su(a,{pending:!0,data:R,method:c.method,action:u},null,R)}}else typeof u=="function"&&(S.preventDefault(),R=x?om(c,x):new FormData(c),Su(a,{pending:!0,data:R,method:c.method,action:u},u,R))},currentTarget:c}]})}}for(var ad=0;ad<zc.length;ad++){var nd=zc[ad],P1=nd.toLowerCase(),V1=nd[0].toUpperCase()+nd.slice(1);sn(P1,"on"+V1)}sn(B0,"onAnimationEnd"),sn(H0,"onAnimationIteration"),sn(G0,"onAnimationStart"),sn("dblclick","onDoubleClick"),sn("focusin","onFocus"),sn("focusout","onBlur"),sn(l1,"onTransitionRun"),sn(r1,"onTransitionStart"),sn(i1,"onTransitionCancel"),sn(P0,"onTransitionEnd"),nn("onMouseEnter",["mouseout","mouseover"]),nn("onMouseLeave",["mouseout","mouseover"]),nn("onPointerEnter",["pointerout","pointerover"]),nn("onPointerLeave",["pointerout","pointerover"]),Rn("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Rn("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Rn("onBeforeInput",["compositionend","keypress","textInput","paste"]),Rn("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Rn("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Rn("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Wr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),q1=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Wr));function cm(e,t){t=(t&4)!==0;for(var a=0;a<e.length;a++){var s=e[a],c=s.event;s=s.listeners;e:{var u=void 0;if(t)for(var x=s.length-1;0<=x;x--){var S=s[x],R=S.instance,K=S.currentTarget;if(S=S.listener,R!==u&&c.isPropagationStopped())break e;u=S,c.currentTarget=K;try{u(c)}catch(oe){Ui(oe)}c.currentTarget=null,u=R}else for(x=0;x<s.length;x++){if(S=s[x],R=S.instance,K=S.currentTarget,S=S.listener,R!==u&&c.isPropagationStopped())break e;u=S,c.currentTarget=K;try{u(c)}catch(oe){Ui(oe)}c.currentTarget=null,u=R}}}}function qe(e,t){var a=t[ur];a===void 0&&(a=t[ur]=new Set);var s=e+"__bubble";a.has(s)||(um(t,e,2,!1),a.add(s))}function sd(e,t,a){var s=0;t&&(s|=4),um(a,e,s,t)}var wo="_reactListening"+Math.random().toString(36).slice(2);function ld(e){if(!e[wo]){e[wo]=!0,Ti.forEach(function(a){a!=="selectionchange"&&(q1.has(a)||sd(a,!1,e),sd(a,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[wo]||(t[wo]=!0,sd("selectionchange",!1,t))}}function um(e,t,a,s){switch(Bm(t)){case 2:var c=yS;break;case 8:c=bS;break;default:c=vd}a=c.bind(null,t,a,e),c=void 0,!_c||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(c=!0),s?c!==void 0?e.addEventListener(t,a,{capture:!0,passive:c}):e.addEventListener(t,a,!0):c!==void 0?e.addEventListener(t,a,{passive:c}):e.addEventListener(t,a,!1)}function rd(e,t,a,s,c){var u=s;if((t&1)===0&&(t&2)===0&&s!==null)e:for(;;){if(s===null)return;var x=s.tag;if(x===3||x===4){var S=s.stateNode.containerInfo;if(S===c)break;if(x===4)for(x=s.return;x!==null;){var R=x.tag;if((R===3||R===4)&&x.stateNode.containerInfo===c)return;x=x.return}for(;S!==null;){if(x=ss(S),x===null)return;if(R=x.tag,R===5||R===6||R===26||R===27){s=u=x;continue e}S=S.parentNode}}s=s.return}m0(function(){var K=u,oe=wc(a),de=[];e:{var X=V0.get(e);if(X!==void 0){var se=ki,Ee=e;switch(e){case"keypress":if(Ci(a)===0)break e;case"keydown":case"keyup":se=Dv;break;case"focusin":Ee="focus",se=Ic;break;case"focusout":Ee="blur",se=Ic;break;case"beforeblur":case"afterblur":se=Ic;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":se=y0;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":se=_v;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":se=Hv;break;case B0:case H0:case G0:se=jv;break;case P0:se=Pv;break;case"scroll":case"scrollend":se=wv;break;case"wheel":se=qv;break;case"copy":case"cut":case"paste":se=Ov;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":se=v0;break;case"toggle":case"beforetoggle":se=Fv}var Oe=(t&4)!==0,ut=!Oe&&(e==="scroll"||e==="scrollend"),W=Oe?X!==null?X+"Capture":null:X;Oe=[];for(var H=K,Z;H!==null;){var ce=H;if(Z=ce.stateNode,ce=ce.tag,ce!==5&&ce!==26&&ce!==27||Z===null||W===null||(ce=gr(H,W),ce!=null&&Oe.push(Qr(H,ce,Z))),ut)break;H=H.return}0<Oe.length&&(X=new se(X,Ee,null,a,oe),de.push({event:X,listeners:Oe}))}}if((t&7)===0){e:{if(X=e==="mouseover"||e==="pointerover",se=e==="mouseout"||e==="pointerout",X&&a!==Ec&&(Ee=a.relatedTarget||a.fromElement)&&(ss(Ee)||Ee[as]))break e;if((se||X)&&(X=oe.window===oe?oe:(X=oe.ownerDocument)?X.defaultView||X.parentWindow:window,se?(Ee=a.relatedTarget||a.toElement,se=K,Ee=Ee?ss(Ee):null,Ee!==null&&(ut=d(Ee),Oe=Ee.tag,Ee!==ut||Oe!==5&&Oe!==27&&Oe!==6)&&(Ee=null)):(se=null,Ee=K),se!==Ee)){if(Oe=y0,ce="onMouseLeave",W="onMouseEnter",H="mouse",(e==="pointerout"||e==="pointerover")&&(Oe=v0,ce="onPointerLeave",W="onPointerEnter",H="pointer"),ut=se==null?X:Us(se),Z=Ee==null?X:Us(Ee),X=new Oe(ce,H+"leave",se,a,oe),X.target=ut,X.relatedTarget=Z,ce=null,ss(oe)===K&&(Oe=new Oe(W,H+"enter",Ee,a,oe),Oe.target=Z,Oe.relatedTarget=ut,ce=Oe),ut=ce,se&&Ee)t:{for(Oe=Y1,W=se,H=Ee,Z=0,ce=W;ce;ce=Oe(ce))Z++;ce=0;for(var Te=H;Te;Te=Oe(Te))ce++;for(;0<Z-ce;)W=Oe(W),Z--;for(;0<ce-Z;)H=Oe(H),ce--;for(;Z--;){if(W===H||H!==null&&W===H.alternate){Oe=W;break t}W=Oe(W),H=Oe(H)}Oe=null}else Oe=null;se!==null&&dm(de,X,se,Oe,!1),Ee!==null&&ut!==null&&dm(de,ut,Ee,Oe,!0)}}e:{if(X=K?Us(K):window,se=X.nodeName&&X.nodeName.toLowerCase(),se==="select"||se==="input"&&X.type==="file")var et=j0;else if(A0(X))if(I0)et=a1;else{et=e1;var Ne=Jv}else se=X.nodeName,!se||se.toLowerCase()!=="input"||X.type!=="checkbox"&&X.type!=="radio"?K&&Sc(K.elementType)&&(et=j0):et=t1;if(et&&(et=et(e,K))){T0(de,et,a,oe);break e}Ne&&Ne(e,X,K),e==="focusout"&&K&&X.type==="number"&&K.memoizedProps.value!=null&&wn(X,"number",X.value)}switch(Ne=K?Us(K):window,e){case"focusin":(A0(Ne)||Ne.contentEditable==="true")&&(Sl=Ne,Mc=K,Nr=null);break;case"focusout":Nr=Mc=Sl=null;break;case"mousedown":Uc=!0;break;case"contextmenu":case"mouseup":case"dragend":Uc=!1,D0(de,a,oe);break;case"selectionchange":if(s1)break;case"keydown":case"keyup":D0(de,a,oe)}var He;if(Cc)e:{switch(e){case"compositionstart":var Fe="onCompositionStart";break e;case"compositionend":Fe="onCompositionEnd";break e;case"compositionupdate":Fe="onCompositionUpdate";break e}Fe=void 0}else vl?N0(e,a)&&(Fe="onCompositionEnd"):e==="keydown"&&a.keyCode===229&&(Fe="onCompositionStart");Fe&&(S0&&a.locale!=="ko"&&(vl||Fe!=="onCompositionStart"?Fe==="onCompositionEnd"&&vl&&(He=g0()):(is=oe,Ac="value"in is?is.value:is.textContent,vl=!0)),Ne=No(K,Fe),0<Ne.length&&(Fe=new b0(Fe,e,null,a,oe),de.push({event:Fe,listeners:Ne}),He?Fe.data=He:(He=_0(a),He!==null&&(Fe.data=He)))),(He=Wv?Qv(e,a):Zv(e,a))&&(Fe=No(K,"onBeforeInput"),0<Fe.length&&(Ne=new b0("onBeforeInput","beforeinput",null,a,oe),de.push({event:Ne,listeners:Fe}),Ne.data=He)),G1(de,e,K,a,oe)}cm(de,t)})}function Qr(e,t,a){return{instance:e,listener:t,currentTarget:a}}function No(e,t){for(var a=t+"Capture",s=[];e!==null;){var c=e,u=c.stateNode;if(c=c.tag,c!==5&&c!==26&&c!==27||u===null||(c=gr(e,a),c!=null&&s.unshift(Qr(e,c,u)),c=gr(e,t),c!=null&&s.push(Qr(e,c,u))),e.tag===3)return s;e=e.return}return[]}function Y1(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5&&e.tag!==27);return e||null}function dm(e,t,a,s,c){for(var u=t._reactName,x=[];a!==null&&a!==s;){var S=a,R=S.alternate,K=S.stateNode;if(S=S.tag,R!==null&&R===s)break;S!==5&&S!==26&&S!==27||K===null||(R=K,c?(K=gr(a,u),K!=null&&x.unshift(Qr(a,K,R))):c||(K=gr(a,u),K!=null&&x.push(Qr(a,K,R)))),a=a.return}x.length!==0&&e.push({event:t,listeners:x})}var F1=/\r\n?/g,$1=/\u0000|\uFFFD/g;function fm(e){return(typeof e=="string"?e:""+e).replace(F1,`
`).replace($1,"")}function pm(e,t){return t=fm(t),fm(e)===t}function ct(e,t,a,s,c,u){switch(a){case"children":typeof s=="string"?t==="body"||t==="textarea"&&s===""||xl(e,s):(typeof s=="number"||typeof s=="bigint")&&t!=="body"&&xl(e,""+s);break;case"className":mr(e,"class",s);break;case"tabIndex":mr(e,"tabindex",s);break;case"dir":case"role":case"viewBox":case"width":case"height":mr(e,a,s);break;case"style":p0(e,s,u);break;case"data":if(t!=="object"){mr(e,"data",s);break}case"src":case"href":if(s===""&&(t!=="a"||a!=="href")){e.removeAttribute(a);break}if(s==null||typeof s=="function"||typeof s=="symbol"||typeof s=="boolean"){e.removeAttribute(a);break}s=Ii(""+s),e.setAttribute(a,s);break;case"action":case"formAction":if(typeof s=="function"){e.setAttribute(a,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof u=="function"&&(a==="formAction"?(t!=="input"&&ct(e,t,"name",c.name,c,null),ct(e,t,"formEncType",c.formEncType,c,null),ct(e,t,"formMethod",c.formMethod,c,null),ct(e,t,"formTarget",c.formTarget,c,null)):(ct(e,t,"encType",c.encType,c,null),ct(e,t,"method",c.method,c,null),ct(e,t,"target",c.target,c,null)));if(s==null||typeof s=="symbol"||typeof s=="boolean"){e.removeAttribute(a);break}s=Ii(""+s),e.setAttribute(a,s);break;case"onClick":s!=null&&(e.onclick=kn);break;case"onScroll":s!=null&&qe("scroll",e);break;case"onScrollEnd":s!=null&&qe("scrollend",e);break;case"dangerouslySetInnerHTML":if(s!=null){if(typeof s!="object"||!("__html"in s))throw Error(o(61));if(a=s.__html,a!=null){if(c.children!=null)throw Error(o(60));e.innerHTML=a}}break;case"multiple":e.multiple=s&&typeof s!="function"&&typeof s!="symbol";break;case"muted":e.muted=s&&typeof s!="function"&&typeof s!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(s==null||typeof s=="function"||typeof s=="boolean"||typeof s=="symbol"){e.removeAttribute("xlink:href");break}a=Ii(""+s),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",a);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":s!=null&&typeof s!="function"&&typeof s!="symbol"?e.setAttribute(a,""+s):e.removeAttribute(a);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":s&&typeof s!="function"&&typeof s!="symbol"?e.setAttribute(a,""):e.removeAttribute(a);break;case"capture":case"download":s===!0?e.setAttribute(a,""):s!==!1&&s!=null&&typeof s!="function"&&typeof s!="symbol"?e.setAttribute(a,s):e.removeAttribute(a);break;case"cols":case"rows":case"size":case"span":s!=null&&typeof s!="function"&&typeof s!="symbol"&&!isNaN(s)&&1<=s?e.setAttribute(a,s):e.removeAttribute(a);break;case"rowSpan":case"start":s==null||typeof s=="function"||typeof s=="symbol"||isNaN(s)?e.removeAttribute(a):e.setAttribute(a,s);break;case"popover":qe("beforetoggle",e),qe("toggle",e),hr(e,"popover",s);break;case"xlinkActuate":En(e,"http://www.w3.org/1999/xlink","xlink:actuate",s);break;case"xlinkArcrole":En(e,"http://www.w3.org/1999/xlink","xlink:arcrole",s);break;case"xlinkRole":En(e,"http://www.w3.org/1999/xlink","xlink:role",s);break;case"xlinkShow":En(e,"http://www.w3.org/1999/xlink","xlink:show",s);break;case"xlinkTitle":En(e,"http://www.w3.org/1999/xlink","xlink:title",s);break;case"xlinkType":En(e,"http://www.w3.org/1999/xlink","xlink:type",s);break;case"xmlBase":En(e,"http://www.w3.org/XML/1998/namespace","xml:base",s);break;case"xmlLang":En(e,"http://www.w3.org/XML/1998/namespace","xml:lang",s);break;case"xmlSpace":En(e,"http://www.w3.org/XML/1998/namespace","xml:space",s);break;case"is":hr(e,"is",s);break;case"innerText":case"textContent":break;default:(!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(a=Sv.get(a)||a,hr(e,a,s))}}function id(e,t,a,s,c,u){switch(a){case"style":p0(e,s,u);break;case"dangerouslySetInnerHTML":if(s!=null){if(typeof s!="object"||!("__html"in s))throw Error(o(61));if(a=s.__html,a!=null){if(c.children!=null)throw Error(o(60));e.innerHTML=a}}break;case"children":typeof s=="string"?xl(e,s):(typeof s=="number"||typeof s=="bigint")&&xl(e,""+s);break;case"onScroll":s!=null&&qe("scroll",e);break;case"onScrollEnd":s!=null&&qe("scrollend",e);break;case"onClick":s!=null&&(e.onclick=kn);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!ji.hasOwnProperty(a))e:{if(a[0]==="o"&&a[1]==="n"&&(c=a.endsWith("Capture"),t=a.slice(2,c?a.length-7:void 0),u=e[la]||null,u=u!=null?u[a]:null,typeof u=="function"&&e.removeEventListener(t,u,c),typeof s=="function")){typeof u!="function"&&u!==null&&(a in e?e[a]=null:e.hasAttribute(a)&&e.removeAttribute(a)),e.addEventListener(t,s,c);break e}a in e?e[a]=s:s===!0?e.setAttribute(a,""):hr(e,a,s)}}}function aa(e,t,a){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":qe("error",e),qe("load",e);var s=!1,c=!1,u;for(u in a)if(a.hasOwnProperty(u)){var x=a[u];if(x!=null)switch(u){case"src":s=!0;break;case"srcSet":c=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(o(137,t));default:ct(e,t,u,x,a,null)}}c&&ct(e,t,"srcSet",a.srcSet,a,null),s&&ct(e,t,"src",a.src,a,null);return;case"input":qe("invalid",e);var S=u=x=c=null,R=null,K=null;for(s in a)if(a.hasOwnProperty(s)){var oe=a[s];if(oe!=null)switch(s){case"name":c=oe;break;case"type":x=oe;break;case"checked":R=oe;break;case"defaultChecked":K=oe;break;case"value":u=oe;break;case"defaultValue":S=oe;break;case"children":case"dangerouslySetInnerHTML":if(oe!=null)throw Error(o(137,t));break;default:ct(e,t,s,oe,a,null)}}ha(e,u,S,R,K,x,c,!1);return;case"select":qe("invalid",e),s=x=u=null;for(c in a)if(a.hasOwnProperty(c)&&(S=a[c],S!=null))switch(c){case"value":u=S;break;case"defaultValue":x=S;break;case"multiple":s=S;default:ct(e,t,c,S,a,null)}t=u,a=x,e.multiple=!!s,t!=null?_a(e,!!s,t,!1):a!=null&&_a(e,!!s,a,!0);return;case"textarea":qe("invalid",e),u=c=s=null;for(x in a)if(a.hasOwnProperty(x)&&(S=a[x],S!=null))switch(x){case"value":s=S;break;case"defaultValue":c=S;break;case"children":u=S;break;case"dangerouslySetInnerHTML":if(S!=null)throw Error(o(91));break;default:ct(e,t,x,S,a,null)}d0(e,s,c,u);return;case"option":for(R in a)if(a.hasOwnProperty(R)&&(s=a[R],s!=null))switch(R){case"selected":e.selected=s&&typeof s!="function"&&typeof s!="symbol";break;default:ct(e,t,R,s,a,null)}return;case"dialog":qe("beforetoggle",e),qe("toggle",e),qe("cancel",e),qe("close",e);break;case"iframe":case"object":qe("load",e);break;case"video":case"audio":for(s=0;s<Wr.length;s++)qe(Wr[s],e);break;case"image":qe("error",e),qe("load",e);break;case"details":qe("toggle",e);break;case"embed":case"source":case"link":qe("error",e),qe("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(K in a)if(a.hasOwnProperty(K)&&(s=a[K],s!=null))switch(K){case"children":case"dangerouslySetInnerHTML":throw Error(o(137,t));default:ct(e,t,K,s,a,null)}return;default:if(Sc(t)){for(oe in a)a.hasOwnProperty(oe)&&(s=a[oe],s!==void 0&&id(e,t,oe,s,a,void 0));return}}for(S in a)a.hasOwnProperty(S)&&(s=a[S],s!=null&&ct(e,t,S,s,a,null))}function W1(e,t,a,s){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var c=null,u=null,x=null,S=null,R=null,K=null,oe=null;for(se in a){var de=a[se];if(a.hasOwnProperty(se)&&de!=null)switch(se){case"checked":break;case"value":break;case"defaultValue":R=de;default:s.hasOwnProperty(se)||ct(e,t,se,null,s,de)}}for(var X in s){var se=s[X];if(de=a[X],s.hasOwnProperty(X)&&(se!=null||de!=null))switch(X){case"type":u=se;break;case"name":c=se;break;case"checked":K=se;break;case"defaultChecked":oe=se;break;case"value":x=se;break;case"defaultValue":S=se;break;case"children":case"dangerouslySetInnerHTML":if(se!=null)throw Error(o(137,t));break;default:se!==de&&ct(e,t,X,se,s,de)}}Bt(e,x,S,R,K,oe,u,c);return;case"select":se=x=S=X=null;for(u in a)if(R=a[u],a.hasOwnProperty(u)&&R!=null)switch(u){case"value":break;case"multiple":se=R;default:s.hasOwnProperty(u)||ct(e,t,u,null,s,R)}for(c in s)if(u=s[c],R=a[c],s.hasOwnProperty(c)&&(u!=null||R!=null))switch(c){case"value":X=u;break;case"defaultValue":S=u;break;case"multiple":x=u;default:u!==R&&ct(e,t,c,u,s,R)}t=S,a=x,s=se,X!=null?_a(e,!!a,X,!1):!!s!=!!a&&(t!=null?_a(e,!!a,t,!0):_a(e,!!a,a?[]:"",!1));return;case"textarea":se=X=null;for(S in a)if(c=a[S],a.hasOwnProperty(S)&&c!=null&&!s.hasOwnProperty(S))switch(S){case"value":break;case"children":break;default:ct(e,t,S,null,s,c)}for(x in s)if(c=s[x],u=a[x],s.hasOwnProperty(x)&&(c!=null||u!=null))switch(x){case"value":X=c;break;case"defaultValue":se=c;break;case"children":break;case"dangerouslySetInnerHTML":if(c!=null)throw Error(o(91));break;default:c!==u&&ct(e,t,x,c,s,u)}gl(e,X,se);return;case"option":for(var Ee in a)if(X=a[Ee],a.hasOwnProperty(Ee)&&X!=null&&!s.hasOwnProperty(Ee))switch(Ee){case"selected":e.selected=!1;break;default:ct(e,t,Ee,null,s,X)}for(R in s)if(X=s[R],se=a[R],s.hasOwnProperty(R)&&X!==se&&(X!=null||se!=null))switch(R){case"selected":e.selected=X&&typeof X!="function"&&typeof X!="symbol";break;default:ct(e,t,R,X,s,se)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Oe in a)X=a[Oe],a.hasOwnProperty(Oe)&&X!=null&&!s.hasOwnProperty(Oe)&&ct(e,t,Oe,null,s,X);for(K in s)if(X=s[K],se=a[K],s.hasOwnProperty(K)&&X!==se&&(X!=null||se!=null))switch(K){case"children":case"dangerouslySetInnerHTML":if(X!=null)throw Error(o(137,t));break;default:ct(e,t,K,X,s,se)}return;default:if(Sc(t)){for(var ut in a)X=a[ut],a.hasOwnProperty(ut)&&X!==void 0&&!s.hasOwnProperty(ut)&&id(e,t,ut,void 0,s,X);for(oe in s)X=s[oe],se=a[oe],!s.hasOwnProperty(oe)||X===se||X===void 0&&se===void 0||id(e,t,oe,X,s,se);return}}for(var W in a)X=a[W],a.hasOwnProperty(W)&&X!=null&&!s.hasOwnProperty(W)&&ct(e,t,W,null,s,X);for(de in s)X=s[de],se=a[de],!s.hasOwnProperty(de)||X===se||X==null&&se==null||ct(e,t,de,X,s,se)}function hm(e){switch(e){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function Q1(){if(typeof performance.getEntriesByType=="function"){for(var e=0,t=0,a=performance.getEntriesByType("resource"),s=0;s<a.length;s++){var c=a[s],u=c.transferSize,x=c.initiatorType,S=c.duration;if(u&&S&&hm(x)){for(x=0,S=c.responseEnd,s+=1;s<a.length;s++){var R=a[s],K=R.startTime;if(K>S)break;var oe=R.transferSize,de=R.initiatorType;oe&&hm(de)&&(R=R.responseEnd,x+=oe*(R<S?1:(S-K)/(R-K)))}if(--s,t+=8*(u+x)/(c.duration/1e3),e++,10<e)break}}if(0<e)return t/e/1e6}return navigator.connection&&(e=navigator.connection.downlink,typeof e=="number")?e:5}var od=null,cd=null;function _o(e){return e.nodeType===9?e:e.ownerDocument}function mm(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function gm(e,t){if(e===0)switch(t){case"svg":return 1;case"math":return 2;default:return 0}return e===1&&t==="foreignObject"?0:e}function ud(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.children=="bigint"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var dd=null;function Z1(){var e=window.event;return e&&e.type==="popstate"?e===dd?!1:(dd=e,!0):(dd=null,!1)}var xm=typeof setTimeout=="function"?setTimeout:void 0,K1=typeof clearTimeout=="function"?clearTimeout:void 0,ym=typeof Promise=="function"?Promise:void 0,X1=typeof queueMicrotask=="function"?queueMicrotask:typeof ym<"u"?function(e){return ym.resolve(null).then(e).catch(J1)}:xm;function J1(e){setTimeout(function(){throw e})}function Ns(e){return e==="head"}function bm(e,t){var a=t,s=0;do{var c=a.nextSibling;if(e.removeChild(a),c&&c.nodeType===8)if(a=c.data,a==="/$"||a==="/&"){if(s===0){e.removeChild(c),Wl(t);return}s--}else if(a==="$"||a==="$?"||a==="$~"||a==="$!"||a==="&")s++;else if(a==="html")Zr(e.ownerDocument.documentElement);else if(a==="head"){a=e.ownerDocument.head,Zr(a);for(var u=a.firstChild;u;){var x=u.nextSibling,S=u.nodeName;u[ns]||S==="SCRIPT"||S==="STYLE"||S==="LINK"&&u.rel.toLowerCase()==="stylesheet"||a.removeChild(u),u=x}}else a==="body"&&Zr(e.ownerDocument.body);a=c}while(a);Wl(t)}function vm(e,t){var a=e;e=0;do{var s=a.nextSibling;if(a.nodeType===1?t?(a._stashedDisplay=a.style.display,a.style.display="none"):(a.style.display=a._stashedDisplay||"",a.getAttribute("style")===""&&a.removeAttribute("style")):a.nodeType===3&&(t?(a._stashedText=a.nodeValue,a.nodeValue=""):a.nodeValue=a._stashedText||""),s&&s.nodeType===8)if(a=s.data,a==="/$"){if(e===0)break;e--}else a!=="$"&&a!=="$?"&&a!=="$~"&&a!=="$!"||e++;a=s}while(a)}function fd(e){var t=e.firstChild;for(t&&t.nodeType===10&&(t=t.nextSibling);t;){var a=t;switch(t=t.nextSibling,a.nodeName){case"HTML":case"HEAD":case"BODY":fd(a),dr(a);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(a.rel.toLowerCase()==="stylesheet")continue}e.removeChild(a)}}function eS(e,t,a,s){for(;e.nodeType===1;){var c=a;if(e.nodeName.toLowerCase()!==t.toLowerCase()){if(!s&&(e.nodeName!=="INPUT"||e.type!=="hidden"))break}else if(s){if(!e[ns])switch(t){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if(u=e.getAttribute("rel"),u==="stylesheet"&&e.hasAttribute("data-precedence"))break;if(u!==c.rel||e.getAttribute("href")!==(c.href==null||c.href===""?null:c.href)||e.getAttribute("crossorigin")!==(c.crossOrigin==null?null:c.crossOrigin)||e.getAttribute("title")!==(c.title==null?null:c.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(u=e.getAttribute("src"),(u!==(c.src==null?null:c.src)||e.getAttribute("type")!==(c.type==null?null:c.type)||e.getAttribute("crossorigin")!==(c.crossOrigin==null?null:c.crossOrigin))&&u&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else if(t==="input"&&e.type==="hidden"){var u=c.name==null?null:""+c.name;if(c.type==="hidden"&&e.getAttribute("name")===u)return e}else return e;if(e=Ya(e.nextSibling),e===null)break}return null}function tS(e,t,a){if(t==="")return null;for(;e.nodeType!==3;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!a||(e=Ya(e.nextSibling),e===null))return null;return e}function Sm(e,t){for(;e.nodeType!==8;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!t||(e=Ya(e.nextSibling),e===null))return null;return e}function pd(e){return e.data==="$?"||e.data==="$~"}function hd(e){return e.data==="$!"||e.data==="$?"&&e.ownerDocument.readyState!=="loading"}function aS(e,t){var a=e.ownerDocument;if(e.data==="$~")e._reactRetry=t;else if(e.data!=="$?"||a.readyState!=="loading")t();else{var s=function(){t(),a.removeEventListener("DOMContentLoaded",s)};a.addEventListener("DOMContentLoaded",s),e._reactRetry=s}}function Ya(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?"||t==="$~"||t==="&"||t==="F!"||t==="F")break;if(t==="/$"||t==="/&")return null}}return e}var md=null;function Em(e){e=e.nextSibling;for(var t=0;e;){if(e.nodeType===8){var a=e.data;if(a==="/$"||a==="/&"){if(t===0)return Ya(e.nextSibling);t--}else a!=="$"&&a!=="$!"&&a!=="$?"&&a!=="$~"&&a!=="&"||t++}e=e.nextSibling}return null}function wm(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var a=e.data;if(a==="$"||a==="$!"||a==="$?"||a==="$~"||a==="&"){if(t===0)return e;t--}else a!=="/$"&&a!=="/&"||t++}e=e.previousSibling}return null}function Nm(e,t,a){switch(t=_o(a),e){case"html":if(e=t.documentElement,!e)throw Error(o(452));return e;case"head":if(e=t.head,!e)throw Error(o(453));return e;case"body":if(e=t.body,!e)throw Error(o(454));return e;default:throw Error(o(451))}}function Zr(e){for(var t=e.attributes;t.length;)e.removeAttributeNode(t[0]);dr(e)}var Fa=new Map,_m=new Set;function Ao(e){return typeof e.getRootNode=="function"?e.getRootNode():e.nodeType===9?e:e.ownerDocument}var Qn=ne.d;ne.d={f:nS,r:sS,D:lS,C:rS,L:iS,m:oS,X:uS,S:cS,M:dS};function nS(){var e=Qn.f(),t=xo();return e||t}function sS(e){var t=ls(e);t!==null&&t.tag===5&&t.type==="form"?Pp(t):Qn.r(e)}var Yl=typeof document>"u"?null:document;function Am(e,t,a){var s=Yl;if(s&&typeof t=="string"&&t){var c=St(t);c='link[rel="'+e+'"][href="'+c+'"]',typeof a=="string"&&(c+='[crossorigin="'+a+'"]'),_m.has(c)||(_m.add(c),e={rel:e,crossOrigin:a,href:t},s.querySelector(c)===null&&(t=s.createElement("link"),aa(t,"link",e),zt(t),s.head.appendChild(t)))}}function lS(e){Qn.D(e),Am("dns-prefetch",e,null)}function rS(e,t){Qn.C(e,t),Am("preconnect",e,t)}function iS(e,t,a){Qn.L(e,t,a);var s=Yl;if(s&&e&&t){var c='link[rel="preload"][as="'+St(t)+'"]';t==="image"&&a&&a.imageSrcSet?(c+='[imagesrcset="'+St(a.imageSrcSet)+'"]',typeof a.imageSizes=="string"&&(c+='[imagesizes="'+St(a.imageSizes)+'"]')):c+='[href="'+St(e)+'"]';var u=c;switch(t){case"style":u=Fl(e);break;case"script":u=$l(e)}Fa.has(u)||(e=v({rel:"preload",href:t==="image"&&a&&a.imageSrcSet?void 0:e,as:t},a),Fa.set(u,e),s.querySelector(c)!==null||t==="style"&&s.querySelector(Kr(u))||t==="script"&&s.querySelector(Xr(u))||(t=s.createElement("link"),aa(t,"link",e),zt(t),s.head.appendChild(t)))}}function oS(e,t){Qn.m(e,t);var a=Yl;if(a&&e){var s=t&&typeof t.as=="string"?t.as:"script",c='link[rel="modulepreload"][as="'+St(s)+'"][href="'+St(e)+'"]',u=c;switch(s){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":u=$l(e)}if(!Fa.has(u)&&(e=v({rel:"modulepreload",href:e},t),Fa.set(u,e),a.querySelector(c)===null)){switch(s){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(a.querySelector(Xr(u)))return}s=a.createElement("link"),aa(s,"link",e),zt(s),a.head.appendChild(s)}}}function cS(e,t,a){Qn.S(e,t,a);var s=Yl;if(s&&e){var c=rs(s).hoistableStyles,u=Fl(e);t=t||"default";var x=c.get(u);if(!x){var S={loading:0,preload:null};if(x=s.querySelector(Kr(u)))S.loading=5;else{e=v({rel:"stylesheet",href:e,"data-precedence":t},a),(a=Fa.get(u))&&gd(e,a);var R=x=s.createElement("link");zt(R),aa(R,"link",e),R._p=new Promise(function(K,oe){R.onload=K,R.onerror=oe}),R.addEventListener("load",function(){S.loading|=1}),R.addEventListener("error",function(){S.loading|=2}),S.loading|=4,To(x,t,s)}x={type:"stylesheet",instance:x,count:1,state:S},c.set(u,x)}}}function uS(e,t){Qn.X(e,t);var a=Yl;if(a&&e){var s=rs(a).hoistableScripts,c=$l(e),u=s.get(c);u||(u=a.querySelector(Xr(c)),u||(e=v({src:e,async:!0},t),(t=Fa.get(c))&&xd(e,t),u=a.createElement("script"),zt(u),aa(u,"link",e),a.head.appendChild(u)),u={type:"script",instance:u,count:1,state:null},s.set(c,u))}}function dS(e,t){Qn.M(e,t);var a=Yl;if(a&&e){var s=rs(a).hoistableScripts,c=$l(e),u=s.get(c);u||(u=a.querySelector(Xr(c)),u||(e=v({src:e,async:!0,type:"module"},t),(t=Fa.get(c))&&xd(e,t),u=a.createElement("script"),zt(u),aa(u,"link",e),a.head.appendChild(u)),u={type:"script",instance:u,count:1,state:null},s.set(c,u))}}function Tm(e,t,a,s){var c=(c=ie.current)?Ao(c):null;if(!c)throw Error(o(446));switch(e){case"meta":case"title":return null;case"style":return typeof a.precedence=="string"&&typeof a.href=="string"?(t=Fl(a.href),a=rs(c).hoistableStyles,s=a.get(t),s||(s={type:"style",instance:null,count:0,state:null},a.set(t,s)),s):{type:"void",instance:null,count:0,state:null};case"link":if(a.rel==="stylesheet"&&typeof a.href=="string"&&typeof a.precedence=="string"){e=Fl(a.href);var u=rs(c).hoistableStyles,x=u.get(e);if(x||(c=c.ownerDocument||c,x={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},u.set(e,x),(u=c.querySelector(Kr(e)))&&!u._p&&(x.instance=u,x.state.loading=5),Fa.has(e)||(a={rel:"preload",as:"style",href:a.href,crossOrigin:a.crossOrigin,integrity:a.integrity,media:a.media,hrefLang:a.hrefLang,referrerPolicy:a.referrerPolicy},Fa.set(e,a),u||fS(c,e,a,x.state))),t&&s===null)throw Error(o(528,""));return x}if(t&&s!==null)throw Error(o(529,""));return null;case"script":return t=a.async,a=a.src,typeof a=="string"&&t&&typeof t!="function"&&typeof t!="symbol"?(t=$l(a),a=rs(c).hoistableScripts,s=a.get(t),s||(s={type:"script",instance:null,count:0,state:null},a.set(t,s)),s):{type:"void",instance:null,count:0,state:null};default:throw Error(o(444,e))}}function Fl(e){return'href="'+St(e)+'"'}function Kr(e){return'link[rel="stylesheet"]['+e+"]"}function jm(e){return v({},e,{"data-precedence":e.precedence,precedence:null})}function fS(e,t,a,s){e.querySelector('link[rel="preload"][as="style"]['+t+"]")?s.loading=1:(t=e.createElement("link"),s.preload=t,t.addEventListener("load",function(){return s.loading|=1}),t.addEventListener("error",function(){return s.loading|=2}),aa(t,"link",a),zt(t),e.head.appendChild(t))}function $l(e){return'[src="'+St(e)+'"]'}function Xr(e){return"script[async]"+e}function Im(e,t,a){if(t.count++,t.instance===null)switch(t.type){case"style":var s=e.querySelector('style[data-href~="'+St(a.href)+'"]');if(s)return t.instance=s,zt(s),s;var c=v({},a,{"data-href":a.href,"data-precedence":a.precedence,href:null,precedence:null});return s=(e.ownerDocument||e).createElement("style"),zt(s),aa(s,"style",c),To(s,a.precedence,e),t.instance=s;case"stylesheet":c=Fl(a.href);var u=e.querySelector(Kr(c));if(u)return t.state.loading|=4,t.instance=u,zt(u),u;s=jm(a),(c=Fa.get(c))&&gd(s,c),u=(e.ownerDocument||e).createElement("link"),zt(u);var x=u;return x._p=new Promise(function(S,R){x.onload=S,x.onerror=R}),aa(u,"link",s),t.state.loading|=4,To(u,a.precedence,e),t.instance=u;case"script":return u=$l(a.src),(c=e.querySelector(Xr(u)))?(t.instance=c,zt(c),c):(s=a,(c=Fa.get(u))&&(s=v({},a),xd(s,c)),e=e.ownerDocument||e,c=e.createElement("script"),zt(c),aa(c,"link",s),e.head.appendChild(c),t.instance=c);case"void":return null;default:throw Error(o(443,t.type))}else t.type==="stylesheet"&&(t.state.loading&4)===0&&(s=t.instance,t.state.loading|=4,To(s,a.precedence,e));return t.instance}function To(e,t,a){for(var s=a.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),c=s.length?s[s.length-1]:null,u=c,x=0;x<s.length;x++){var S=s[x];if(S.dataset.precedence===t)u=S;else if(u!==c)break}u?u.parentNode.insertBefore(e,u.nextSibling):(t=a.nodeType===9?a.head:a,t.insertBefore(e,t.firstChild))}function gd(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.title==null&&(e.title=t.title)}function xd(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.integrity==null&&(e.integrity=t.integrity)}var jo=null;function Om(e,t,a){if(jo===null){var s=new Map,c=jo=new Map;c.set(a,s)}else c=jo,s=c.get(a),s||(s=new Map,c.set(a,s));if(s.has(e))return s;for(s.set(e,null),a=a.getElementsByTagName(e),c=0;c<a.length;c++){var u=a[c];if(!(u[ns]||u[Yt]||e==="link"&&u.getAttribute("rel")==="stylesheet")&&u.namespaceURI!=="http://www.w3.org/2000/svg"){var x=u.getAttribute(t)||"";x=e+x;var S=s.get(x);S?S.push(u):s.set(x,[u])}}return s}function Cm(e,t,a){e=e.ownerDocument||e,e.head.insertBefore(a,t==="title"?e.querySelector("head > title"):null)}function pS(e,t,a){if(a===1||t.itemProp!=null)return!1;switch(e){case"meta":case"title":return!0;case"style":if(typeof t.precedence!="string"||typeof t.href!="string"||t.href==="")break;return!0;case"link":if(typeof t.rel!="string"||typeof t.href!="string"||t.href===""||t.onLoad||t.onError)break;switch(t.rel){case"stylesheet":return e=t.disabled,typeof t.precedence=="string"&&e==null;default:return!0}case"script":if(t.async&&typeof t.async!="function"&&typeof t.async!="symbol"&&!t.onLoad&&!t.onError&&t.src&&typeof t.src=="string")return!0}return!1}function Rm(e){return!(e.type==="stylesheet"&&(e.state.loading&3)===0)}function hS(e,t,a,s){if(a.type==="stylesheet"&&(typeof s.media!="string"||matchMedia(s.media).matches!==!1)&&(a.state.loading&4)===0){if(a.instance===null){var c=Fl(s.href),u=t.querySelector(Kr(c));if(u){t=u._p,t!==null&&typeof t=="object"&&typeof t.then=="function"&&(e.count++,e=Io.bind(e),t.then(e,e)),a.state.loading|=4,a.instance=u,zt(u);return}u=t.ownerDocument||t,s=jm(s),(c=Fa.get(c))&&gd(s,c),u=u.createElement("link"),zt(u);var x=u;x._p=new Promise(function(S,R){x.onload=S,x.onerror=R}),aa(u,"link",s),a.instance=u}e.stylesheets===null&&(e.stylesheets=new Map),e.stylesheets.set(a,t),(t=a.state.preload)&&(a.state.loading&3)===0&&(e.count++,a=Io.bind(e),t.addEventListener("load",a),t.addEventListener("error",a))}}var yd=0;function mS(e,t){return e.stylesheets&&e.count===0&&Co(e,e.stylesheets),0<e.count||0<e.imgCount?function(a){var s=setTimeout(function(){if(e.stylesheets&&Co(e,e.stylesheets),e.unsuspend){var u=e.unsuspend;e.unsuspend=null,u()}},6e4+t);0<e.imgBytes&&yd===0&&(yd=62500*Q1());var c=setTimeout(function(){if(e.waitingForImages=!1,e.count===0&&(e.stylesheets&&Co(e,e.stylesheets),e.unsuspend)){var u=e.unsuspend;e.unsuspend=null,u()}},(e.imgBytes>yd?50:800)+t);return e.unsuspend=a,function(){e.unsuspend=null,clearTimeout(s),clearTimeout(c)}}:null}function Io(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Co(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}}var Oo=null;function Co(e,t){e.stylesheets=null,e.unsuspend!==null&&(e.count++,Oo=new Map,t.forEach(gS,e),Oo=null,Io.call(e))}function gS(e,t){if(!(t.state.loading&4)){var a=Oo.get(e);if(a)var s=a.get(null);else{a=new Map,Oo.set(e,a);for(var c=e.querySelectorAll("link[data-precedence],style[data-precedence]"),u=0;u<c.length;u++){var x=c[u];(x.nodeName==="LINK"||x.getAttribute("media")!=="not all")&&(a.set(x.dataset.precedence,x),s=x)}s&&a.set(null,s)}c=t.instance,x=c.getAttribute("data-precedence"),u=a.get(x)||s,u===s&&a.set(null,c),a.set(x,c),this.count++,s=Io.bind(this),c.addEventListener("load",s),c.addEventListener("error",s),u?u.parentNode.insertBefore(c,u.nextSibling):(e=e.nodeType===9?e.head:e,e.insertBefore(c,e.firstChild)),t.state.loading|=4}}var Jr={$$typeof:D,Provider:null,Consumer:null,_currentValue:te,_currentValue2:te,_threadCount:0};function xS(e,t,a,s,c,u,x,S,R){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=mt(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=mt(0),this.hiddenUpdates=mt(null),this.identifierPrefix=s,this.onUncaughtError=c,this.onCaughtError=u,this.onRecoverableError=x,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=R,this.incompleteTransitions=new Map}function km(e,t,a,s,c,u,x,S,R,K,oe,de){return e=new xS(e,t,a,x,R,K,oe,de,S),t=1,u===!0&&(t|=24),u=Ta(3,null,null,t),e.current=u,u.stateNode=e,t=Kc(),t.refCount++,e.pooledCache=t,t.refCount++,u.memoizedState={element:s,isDehydrated:a,cache:t},tu(u),e}function Lm(e){return e?(e=Nl,e):Nl}function Mm(e,t,a,s,c,u){c=Lm(c),s.context===null?s.context=c:s.pendingContext=c,s=ps(t),s.payload={element:a},u=u===void 0?null:u,u!==null&&(s.callback=u),a=hs(e,s,t),a!==null&&(va(a,e,t),Cr(a,e,t))}function Um(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var a=e.retryLane;e.retryLane=a!==0&&a<t?a:t}}function bd(e,t){Um(e,t),(e=e.alternate)&&Um(e,t)}function Dm(e){if(e.tag===13||e.tag===31){var t=Hs(e,67108864);t!==null&&va(t,e,67108864),bd(e,67108864)}}function zm(e){if(e.tag===13||e.tag===31){var t=Ra();t=tn(t);var a=Hs(e,t);a!==null&&va(a,e,t),bd(e,t)}}var Ro=!0;function yS(e,t,a,s){var c=C.T;C.T=null;var u=ne.p;try{ne.p=2,vd(e,t,a,s)}finally{ne.p=u,C.T=c}}function bS(e,t,a,s){var c=C.T;C.T=null;var u=ne.p;try{ne.p=8,vd(e,t,a,s)}finally{ne.p=u,C.T=c}}function vd(e,t,a,s){if(Ro){var c=Sd(s);if(c===null)rd(e,t,s,ko,a),Hm(e,s);else if(SS(c,e,t,a,s))s.stopPropagation();else if(Hm(e,s),t&4&&-1<vS.indexOf(e)){for(;c!==null;){var u=ls(c);if(u!==null)switch(u.tag){case 3:if(u=u.stateNode,u.current.memoizedState.isDehydrated){var x=Ke(u.pendingLanes);if(x!==0){var S=u;for(S.pendingLanes|=2,S.entangledLanes|=2;x;){var R=1<<31-It(x);S.entanglements[1]|=R,x&=~R}Tn(u),(at&6)===0&&(mo=ke()+500,$r(0))}}break;case 31:case 13:S=Hs(u,2),S!==null&&va(S,u,2),xo(),bd(u,2)}if(u=Sd(s),u===null&&rd(e,t,s,ko,a),u===c)break;c=u}c!==null&&s.stopPropagation()}else rd(e,t,s,null,a)}}function Sd(e){return e=wc(e),Ed(e)}var ko=null;function Ed(e){if(ko=null,e=ss(e),e!==null){var t=d(e);if(t===null)e=null;else{var a=t.tag;if(a===13){if(e=p(t),e!==null)return e;e=null}else if(a===31){if(e=g(t),e!==null)return e;e=null}else if(a===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null)}}return ko=e,null}function Bm(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(ze()){case Ge:return 2;case Ze:return 8;case dt:case ts:return 32;case Cn:return 268435456;default:return 32}default:return 32}}var wd=!1,_s=null,As=null,Ts=null,ei=new Map,ti=new Map,js=[],vS="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Hm(e,t){switch(e){case"focusin":case"focusout":_s=null;break;case"dragenter":case"dragleave":As=null;break;case"mouseover":case"mouseout":Ts=null;break;case"pointerover":case"pointerout":ei.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":ti.delete(t.pointerId)}}function ai(e,t,a,s,c,u){return e===null||e.nativeEvent!==u?(e={blockedOn:t,domEventName:a,eventSystemFlags:s,nativeEvent:u,targetContainers:[c]},t!==null&&(t=ls(t),t!==null&&Dm(t)),e):(e.eventSystemFlags|=s,t=e.targetContainers,c!==null&&t.indexOf(c)===-1&&t.push(c),e)}function SS(e,t,a,s,c){switch(t){case"focusin":return _s=ai(_s,e,t,a,s,c),!0;case"dragenter":return As=ai(As,e,t,a,s,c),!0;case"mouseover":return Ts=ai(Ts,e,t,a,s,c),!0;case"pointerover":var u=c.pointerId;return ei.set(u,ai(ei.get(u)||null,e,t,a,s,c)),!0;case"gotpointercapture":return u=c.pointerId,ti.set(u,ai(ti.get(u)||null,e,t,a,s,c)),!0}return!1}function Gm(e){var t=ss(e.target);if(t!==null){var a=d(t);if(a!==null){if(t=a.tag,t===13){if(t=p(a),t!==null){e.blockedOn=t,Ms(e.priority,function(){zm(a)});return}}else if(t===31){if(t=g(a),t!==null){e.blockedOn=t,Ms(e.priority,function(){zm(a)});return}}else if(t===3&&a.stateNode.current.memoizedState.isDehydrated){e.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Lo(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var a=Sd(e.nativeEvent);if(a===null){a=e.nativeEvent;var s=new a.constructor(a.type,a);Ec=s,a.target.dispatchEvent(s),Ec=null}else return t=ls(a),t!==null&&Dm(t),e.blockedOn=a,!1;t.shift()}return!0}function Pm(e,t,a){Lo(e)&&a.delete(t)}function ES(){wd=!1,_s!==null&&Lo(_s)&&(_s=null),As!==null&&Lo(As)&&(As=null),Ts!==null&&Lo(Ts)&&(Ts=null),ei.forEach(Pm),ti.forEach(Pm)}function Mo(e,t){e.blockedOn===t&&(e.blockedOn=null,wd||(wd=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,ES)))}var Uo=null;function Vm(e){Uo!==e&&(Uo=e,n.unstable_scheduleCallback(n.unstable_NormalPriority,function(){Uo===e&&(Uo=null);for(var t=0;t<e.length;t+=3){var a=e[t],s=e[t+1],c=e[t+2];if(typeof s!="function"){if(Ed(s||a)===null)continue;break}var u=ls(a);u!==null&&(e.splice(t,3),t-=3,Su(u,{pending:!0,data:c,method:a.method,action:s},s,c))}}))}function Wl(e){function t(R){return Mo(R,e)}_s!==null&&Mo(_s,e),As!==null&&Mo(As,e),Ts!==null&&Mo(Ts,e),ei.forEach(t),ti.forEach(t);for(var a=0;a<js.length;a++){var s=js[a];s.blockedOn===e&&(s.blockedOn=null)}for(;0<js.length&&(a=js[0],a.blockedOn===null);)Gm(a),a.blockedOn===null&&js.shift();if(a=(e.ownerDocument||e).$$reactFormReplay,a!=null)for(s=0;s<a.length;s+=3){var c=a[s],u=a[s+1],x=c[la]||null;if(typeof u=="function")x||Vm(a);else if(x){var S=null;if(u&&u.hasAttribute("formAction")){if(c=u,x=u[la]||null)S=x.formAction;else if(Ed(c)!==null)continue}else S=x.action;typeof S=="function"?a[s+1]=S:(a.splice(s,3),s-=3),Vm(a)}}}function qm(){function e(u){u.canIntercept&&u.info==="react-transition"&&u.intercept({handler:function(){return new Promise(function(x){return c=x})},focusReset:"manual",scroll:"manual"})}function t(){c!==null&&(c(),c=null),s||setTimeout(a,20)}function a(){if(!s&&!navigation.transition){var u=navigation.currentEntry;u&&u.url!=null&&navigation.navigate(u.url,{state:u.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var s=!1,c=null;return navigation.addEventListener("navigate",e),navigation.addEventListener("navigatesuccess",t),navigation.addEventListener("navigateerror",t),setTimeout(a,100),function(){s=!0,navigation.removeEventListener("navigate",e),navigation.removeEventListener("navigatesuccess",t),navigation.removeEventListener("navigateerror",t),c!==null&&(c(),c=null)}}}function Nd(e){this._internalRoot=e}Do.prototype.render=Nd.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(o(409));var a=t.current,s=Ra();Mm(a,s,e,t,null,null)},Do.prototype.unmount=Nd.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Mm(e.current,2,null,e,null,null),xo(),t[as]=null}};function Do(e){this._internalRoot=e}Do.prototype.unstable_scheduleHydration=function(e){if(e){var t=Ls();e={blockedOn:null,target:e,priority:t};for(var a=0;a<js.length&&t!==0&&t<js[a].priority;a++);js.splice(a,0,e),a===0&&Gm(e)}};var Ym=r.version;if(Ym!=="19.2.4")throw Error(o(527,Ym,"19.2.4"));ne.findDOMNode=function(e){var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(o(188)):(e=Object.keys(e).join(","),Error(o(268,e)));return e=m(t),e=e!==null?y(e):null,e=e===null?null:e.stateNode,e};var wS={bundleType:0,version:"19.2.4",rendererPackageName:"react-dom",currentDispatcherRef:C,reconcilerVersion:"19.2.4"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var zo=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!zo.isDisabled&&zo.supportsFiber)try{Dt=zo.inject(wS),vt=zo}catch{}}return si.createRoot=function(e,t){if(!f(e))throw Error(o(299));var a=!1,s="",c=Xp,u=Jp,x=eh;return t!=null&&(t.unstable_strictMode===!0&&(a=!0),t.identifierPrefix!==void 0&&(s=t.identifierPrefix),t.onUncaughtError!==void 0&&(c=t.onUncaughtError),t.onCaughtError!==void 0&&(u=t.onCaughtError),t.onRecoverableError!==void 0&&(x=t.onRecoverableError)),t=km(e,1,!1,null,null,a,s,null,c,u,x,qm),e[as]=t.current,ld(e),new Nd(t)},si.hydrateRoot=function(e,t,a){if(!f(e))throw Error(o(299));var s=!1,c="",u=Xp,x=Jp,S=eh,R=null;return a!=null&&(a.unstable_strictMode===!0&&(s=!0),a.identifierPrefix!==void 0&&(c=a.identifierPrefix),a.onUncaughtError!==void 0&&(u=a.onUncaughtError),a.onCaughtError!==void 0&&(x=a.onCaughtError),a.onRecoverableError!==void 0&&(S=a.onRecoverableError),a.formState!==void 0&&(R=a.formState)),t=km(e,1,!0,t,a??null,s,c,R,u,x,S,qm),t.context=Lm(null),a=t.current,s=Ra(),s=tn(s),c=ps(s),c.callback=null,hs(a,c,s),a=s,t.current.lanes=a,sa(t,a),Tn(t),e[as]=t.current,ld(e),new Do(t)},si.version="19.2.4",si}var tg;function kS(){if(tg)return Td.exports;tg=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(r){console.error(r)}}return n(),Td.exports=RS(),Td.exports}var LS=kS();const MS=cy(LS);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const US=n=>n.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),uy=(...n)=>n.filter((r,i,o)=>!!r&&r.trim()!==""&&o.indexOf(r)===i).join(" ").trim();/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var DS={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zS=E.forwardRef(({color:n="currentColor",size:r=24,strokeWidth:i=2,absoluteStrokeWidth:o,className:f="",children:d,iconNode:p,...g},h)=>E.createElement("svg",{ref:h,...DS,width:r,height:r,stroke:n,strokeWidth:o?Number(i)*24/Number(r):i,className:uy("lucide",f),...g},[...p.map(([m,y])=>E.createElement(m,y)),...Array.isArray(d)?d:[d]]));/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ge=(n,r)=>{const i=E.forwardRef(({className:o,...f},d)=>E.createElement(zS,{ref:d,iconNode:r,className:uy(`lucide-${US(n)}`,o),...f}));return i.displayName=`${n}`,i};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BS=ge("Archive",[["rect",{width:"20",height:"5",x:"2",y:"3",rx:"1",key:"1wp1u1"}],["path",{d:"M4 8v11a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8",key:"1s80jp"}],["path",{d:"M10 12h4",key:"a56b0p"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dy=ge("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fi=ge("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const If=ge("AtSign",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M16 8v5a3 3 0 0 0 6 0v-1a10 10 0 1 0-4 8",key:"7n84p3"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HS=ge("AudioLines",[["path",{d:"M2 10v3",key:"1fnikh"}],["path",{d:"M6 6v11",key:"11sgs0"}],["path",{d:"M10 3v18",key:"yhl04a"}],["path",{d:"M14 8v7",key:"3a1oy3"}],["path",{d:"M18 5v13",key:"123xd1"}],["path",{d:"M22 10v3",key:"154ddg"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cd=ge("Binary",[["rect",{x:"14",y:"14",width:"4",height:"6",rx:"2",key:"p02svl"}],["rect",{x:"6",y:"4",width:"4",height:"6",rx:"2",key:"xm4xkj"}],["path",{d:"M6 20h4",key:"1i6q5t"}],["path",{d:"M14 10h4",key:"ru81e7"}],["path",{d:"M6 14h2v6",key:"16z9wg"}],["path",{d:"M14 4h2v6",key:"1idq9u"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GS=ge("Bolt",[["path",{d:"M21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16z",key:"yt0hxn"}],["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PS=ge("BookCopy",[["path",{d:"M2 16V4a2 2 0 0 1 2-2h11",key:"spzkk5"}],["path",{d:"M22 18H11a2 2 0 1 0 0 4h10.5a.5.5 0 0 0 .5-.5v-15a.5.5 0 0 0-.5-.5H11a2 2 0 0 0-2 2v12",key:"1wz07i"}],["path",{d:"M5 14H4a2 2 0 1 0 0 4h1",key:"16gqf9"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nc=ge("BookOpen",[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ko=ge("BookText",[["path",{d:"M4 19.5v-15A2.5 2.5 0 0 1 6.5 2H19a1 1 0 0 1 1 1v18a1 1 0 0 1-1 1H6.5a1 1 0 0 1 0-5H20",key:"k3hazp"}],["path",{d:"M8 11h8",key:"vwpz6n"}],["path",{d:"M8 7h6",key:"1f0q6e"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VS=ge("Book",[["path",{d:"M4 19.5v-15A2.5 2.5 0 0 1 6.5 2H19a1 1 0 0 1 1 1v18a1 1 0 0 1-1 1H6.5a1 1 0 0 1 0-5H20",key:"k3hazp"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qS=ge("Bot",[["path",{d:"M12 8V4H8",key:"hb8ula"}],["rect",{width:"16",height:"12",x:"4",y:"8",rx:"2",key:"enze0r"}],["path",{d:"M2 14h2",key:"vft8re"}],["path",{d:"M20 14h2",key:"4cs60a"}],["path",{d:"M15 13v2",key:"1xurst"}],["path",{d:"M9 13v2",key:"rq6x2g"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fy=ge("BrainCircuit",[["path",{d:"M12 5a3 3 0 1 0-5.997.125 4 4 0 0 0-2.526 5.77 4 4 0 0 0 .556 6.588A4 4 0 1 0 12 18Z",key:"l5xja"}],["path",{d:"M9 13a4.5 4.5 0 0 0 3-4",key:"10igwf"}],["path",{d:"M6.003 5.125A3 3 0 0 0 6.401 6.5",key:"105sqy"}],["path",{d:"M3.477 10.896a4 4 0 0 1 .585-.396",key:"ql3yin"}],["path",{d:"M6 18a4 4 0 0 1-1.967-.516",key:"2e4loj"}],["path",{d:"M12 13h4",key:"1ku699"}],["path",{d:"M12 18h6a2 2 0 0 1 2 2v1",key:"105ag5"}],["path",{d:"M12 8h8",key:"1lhi5i"}],["path",{d:"M16 8V5a2 2 0 0 1 2-2",key:"u6izg6"}],["circle",{cx:"16",cy:"13",r:".5",key:"ry7gng"}],["circle",{cx:"18",cy:"3",r:".5",key:"1aiba7"}],["circle",{cx:"20",cy:"21",r:".5",key:"yhc1fs"}],["circle",{cx:"20",cy:"8",r:".5",key:"1e43v0"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YS=ge("Briefcase",[["path",{d:"M16 20V4a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"jecpp"}],["rect",{width:"20",height:"14",x:"2",y:"6",rx:"2",key:"i6l2r4"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rr=ge("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const py=ge("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xo=ge("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kn=ge("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FS=ge("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const on=ge("CircleCheck",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $S=ge("CircleHelp",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WS=ge("CircleMinus",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QS=ge("CircleX",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uf=ge("ClipboardList",[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"M12 11h4",key:"1jrz19"}],["path",{d:"M12 16h4",key:"n85exb"}],["path",{d:"M8 11h.01",key:"1dfujw"}],["path",{d:"M8 16h.01",key:"18s6g9"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hy=ge("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ag=ge("CloudDownload",[["path",{d:"M12 13v8l-4-4",key:"1f5nwf"}],["path",{d:"m12 21 4-4",key:"1lfcce"}],["path",{d:"M4.393 15.269A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 2.436 8.284",key:"ui1hmy"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ng=ge("CloudUpload",[["path",{d:"M12 13v8",key:"1l5pq0"}],["path",{d:"M4 14.899A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 2.5 8.242",key:"1pljnt"}],["path",{d:"m8 17 4-4 4 4",key:"1quai1"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const my=ge("Cloud",[["path",{d:"M17.5 19H9a7 7 0 1 1 6.71-9h1.79a4.5 4.5 0 1 1 0 9Z",key:"p7xjir"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sc=ge("Combine",[["path",{d:"M10 18H5a3 3 0 0 1-3-3v-1",key:"ru65g8"}],["path",{d:"M14 2a2 2 0 0 1 2 2v4a2 2 0 0 1-2 2",key:"e30een"}],["path",{d:"M20 2a2 2 0 0 1 2 2v4a2 2 0 0 1-2 2",key:"2ahx8o"}],["path",{d:"m7 21 3-3-3-3",key:"127cv2"}],["rect",{x:"14",y:"14",width:"8",height:"8",rx:"2",key:"1b0bso"}],["rect",{x:"2",y:"2",width:"8",height:"8",rx:"2",key:"1x09vl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZS=ge("Command",[["path",{d:"M15 6v12a3 3 0 1 0 3-3H6a3 3 0 1 0 3 3V6a3 3 0 1 0-3 3h12a3 3 0 1 0-3-3",key:"11bfej"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Of=ge("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KS=ge("CornerDownLeft",[["polyline",{points:"9 10 4 15 9 20",key:"r3jprv"}],["path",{d:"M20 4v7a4 4 0 0 1-4 4H4",key:"6o5b7l"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gy=ge("CornerLeftUp",[["polyline",{points:"14 9 9 4 4 9",key:"m9oyvo"}],["path",{d:"M20 20h-7a4 4 0 0 1-4-4V4",key:"1blwi3"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XS=ge("Database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JS=ge("Eraser",[["path",{d:"m7 21-4.3-4.3c-1-1-1-2.5 0-3.4l9.6-9.6c1-1 2.5-1 3.4 0l5.6 5.6c1 1 1 2.5 0 3.4L13 21",key:"182aya"}],["path",{d:"M22 21H7",key:"t4ddhn"}],["path",{d:"m5 11 9 9",key:"1mo9qw"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xy=ge("ExternalLink",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const df=ge("EyeOff",[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bi=ge("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eE=ge("FileAudio",[["path",{d:"M17.5 22h.5a2 2 0 0 0 2-2V7l-5-5H6a2 2 0 0 0-2 2v3",key:"rslqgf"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M2 19a2 2 0 1 1 4 0v1a2 2 0 1 1-4 0v-4a6 6 0 0 1 12 0v4a2 2 0 1 1-4 0v-1a2 2 0 1 1 4 0",key:"9f7x3i"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tE=ge("FileJson",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 12a1 1 0 0 0-1 1v1a1 1 0 0 1-1 1 1 1 0 0 1 1 1v1a1 1 0 0 0 1 1",key:"1oajmo"}],["path",{d:"M14 18a1 1 0 0 0 1-1v-1a1 1 0 0 1 1-1 1 1 0 0 1-1-1v-1a1 1 0 0 0-1-1",key:"mpwhp6"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aE=ge("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nE=ge("Flag",[["path",{d:"M4 15s1-1 4-1 5 2 8 2 4-1 4-1V3s-1 1-4 1-5-2-8-2-4 1-4 1z",key:"i9b6wo"}],["line",{x1:"4",x2:"4",y1:"22",y2:"15",key:"1cm3nv"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yy=ge("Folder",[["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const by=ge("Ghost",[["path",{d:"M9 10h.01",key:"qbtxuw"}],["path",{d:"M15 10h.01",key:"1qmjsl"}],["path",{d:"M12 2a8 8 0 0 0-8 8v12l3-3 2.5 2.5L12 19l2.5 2.5L17 19l3 3V10a8 8 0 0 0-8-8z",key:"uwwb07"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vy=ge("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sy=ge("GraduationCap",[["path",{d:"M21.42 10.922a1 1 0 0 0-.019-1.838L12.83 5.18a2 2 0 0 0-1.66 0L2.6 9.08a1 1 0 0 0 0 1.832l8.57 3.908a2 2 0 0 0 1.66 0z",key:"j76jl0"}],["path",{d:"M22 10v6",key:"1lu8f3"}],["path",{d:"M6 12.5V16a6 3 0 0 0 12 0v-3.5",key:"1r8lef"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sE=ge("Grid2x2",[["path",{d:"M12 3v18",key:"108xh3"}],["path",{d:"M3 12h18",key:"1i2n21"}],["rect",{x:"3",y:"3",width:"18",height:"18",rx:"2",key:"h1oib"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ey=ge("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wy=ge("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lE=ge("Key",[["path",{d:"m15.5 7.5 2.3 2.3a1 1 0 0 0 1.4 0l2.1-2.1a1 1 0 0 0 0-1.4L19 4",key:"g0fldk"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rE=ge("Languages",[["path",{d:"m5 8 6 6",key:"1wu5hv"}],["path",{d:"m4 14 6-6 2-3",key:"1k1g8d"}],["path",{d:"M2 5h12",key:"or177f"}],["path",{d:"M7 2h1",key:"1t2jsx"}],["path",{d:"m22 22-5-10-5 10",key:"don7ne"}],["path",{d:"M14 18h6",key:"1m8k6r"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ny=ge("Layers",[["path",{d:"m12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83Z",key:"8b97xw"}],["path",{d:"m22 17.65-9.17 4.16a2 2 0 0 1-1.66 0L2 17.65",key:"dd6zsq"}],["path",{d:"m22 12.65-9.17 4.16a2 2 0 0 1-1.66 0L2 12.65",key:"ep9fru"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cf=ge("Lightbulb",[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _y=ge("Link",[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iE=ge("ListPlus",[["path",{d:"M11 12H3",key:"51ecnj"}],["path",{d:"M16 6H3",key:"1wxfjs"}],["path",{d:"M16 18H3",key:"12xzn7"}],["path",{d:"M18 9v6",key:"1twb98"}],["path",{d:"M21 12h-6",key:"bt1uis"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const At=ge("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oE=ge("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rf=ge("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pl=ge("Mic",[["path",{d:"M12 2a3 3 0 0 0-3 3v7a3 3 0 0 0 6 0V5a3 3 0 0 0-3-3Z",key:"131961"}],["path",{d:"M19 10v2a7 7 0 0 1-14 0v-2",key:"1vc78b"}],["line",{x1:"12",x2:"12",y1:"19",y2:"22",key:"x3vr5v"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ay=ge("Network",[["rect",{x:"16",y:"16",width:"6",height:"6",rx:"1",key:"4q2zg0"}],["rect",{x:"2",y:"16",width:"6",height:"6",rx:"1",key:"8cvhb9"}],["rect",{x:"9",y:"2",width:"6",height:"6",rx:"1",key:"1egb70"}],["path",{d:"M5 16v-3a1 1 0 0 1 1-1h12a1 1 0 0 1 1 1v3",key:"1jsf9p"}],["path",{d:"M12 12V8",key:"2874zd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kf=ge("Pause",[["rect",{x:"14",y:"4",width:"4",height:"16",rx:"1",key:"zuxfzm"}],["rect",{x:"6",y:"4",width:"4",height:"16",rx:"1",key:"1okwgv"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cE=ge("PenLine",[["path",{d:"M12 20h9",key:"t2du7b"}],["path",{d:"M16.376 3.622a1 1 0 0 1 3.002 3.002L7.368 18.635a2 2 0 0 1-.855.506l-2.872.838a.5.5 0 0 1-.62-.62l.838-2.872a2 2 0 0 1 .506-.854z",key:"1ykcvy"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uE=ge("Pen",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vi=ge("Play",[["polygon",{points:"6 3 20 12 6 21 6 3",key:"1oa8hb"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const In=ge("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lc=ge("Quote",[["path",{d:"M16 3a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2 1 1 0 0 1 1 1v1a2 2 0 0 1-2 2 1 1 0 0 0-1 1v2a1 1 0 0 0 1 1 6 6 0 0 0 6-6V5a2 2 0 0 0-2-2z",key:"rib7q0"}],["path",{d:"M5 3a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2 1 1 0 0 1 1 1v1a2 2 0 0 1-2 2 1 1 0 0 0-1 1v2a1 1 0 0 0 1 1 6 6 0 0 0 6-6V5a2 2 0 0 0-2-2z",key:"1ymkrd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dE=ge("Radio",[["path",{d:"M4.9 19.1C1 15.2 1 8.8 4.9 4.9",key:"1vaf9d"}],["path",{d:"M7.8 16.2c-2.3-2.3-2.3-6.1 0-8.5",key:"u1ii0m"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}],["path",{d:"M16.2 7.8c2.3 2.3 2.3 6.1 0 8.5",key:"1j5fej"}],["path",{d:"M19.1 4.9C23 8.8 23 15.1 19.1 19",key:"10b0cb"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ir=ge("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fE=ge("RotateCw",[["path",{d:"M21 12a9 9 0 1 1-9-9c2.52 0 4.93 1 6.74 2.74L21 8",key:"1p45f6"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ty=ge("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pE=ge("ScanLine",[["path",{d:"M3 7V5a2 2 0 0 1 2-2h2",key:"aa7l1z"}],["path",{d:"M17 3h2a2 2 0 0 1 2 2v2",key:"4qcy5o"}],["path",{d:"M21 17v2a2 2 0 0 1-2 2h-2",key:"6vwrx8"}],["path",{d:"M7 21H5a2 2 0 0 1-2-2v-2",key:"ioqczr"}],["path",{d:"M7 12h10",key:"b7w52i"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hE=ge("ScanSearch",[["path",{d:"M3 7V5a2 2 0 0 1 2-2h2",key:"aa7l1z"}],["path",{d:"M17 3h2a2 2 0 0 1 2 2v2",key:"4qcy5o"}],["path",{d:"M21 17v2a2 2 0 0 1-2 2h-2",key:"6vwrx8"}],["path",{d:"M7 21H5a2 2 0 0 1-2-2v-2",key:"ioqczr"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}],["path",{d:"m16 16-1.9-1.9",key:"1dq9hf"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mE=ge("Scissors",[["circle",{cx:"6",cy:"6",r:"3",key:"1lh9wr"}],["path",{d:"M8.12 8.12 12 12",key:"1alkpv"}],["path",{d:"M20 4 8.12 15.88",key:"xgtan2"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["path",{d:"M14.8 14.8 20 20",key:"ptml3r"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sg=ge("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gE=ge("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xE=ge("ShieldAlert",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"M12 8v4",key:"1got3b"}],["path",{d:"M12 16h.01",key:"1drbdi"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jy=ge("ShieldCheck",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Iy=ge("ShieldX",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m14.5 9.5-5 5",key:"17q4r4"}],["path",{d:"m9.5 9.5 5 5",key:"18nt4w"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yE=ge("Shuffle",[["path",{d:"m18 14 4 4-4 4",key:"10pe0f"}],["path",{d:"m18 2 4 4-4 4",key:"pucp1d"}],["path",{d:"M2 18h1.973a4 4 0 0 0 3.3-1.7l5.454-8.6a4 4 0 0 1 3.3-1.7H22",key:"1ailkh"}],["path",{d:"M2 6h1.972a4 4 0 0 1 3.6 2.2",key:"km57vx"}],["path",{d:"M22 18h-6.041a4 4 0 0 1-3.3-1.8l-.359-.45",key:"os18l9"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const or=ge("Sparkles",[["path",{d:"M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z",key:"4pj2yx"}],["path",{d:"M20 3v4",key:"1olli1"}],["path",{d:"M22 5h-4",key:"1gvqau"}],["path",{d:"M4 17v2",key:"vumght"}],["path",{d:"M5 18H3",key:"zchphs"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rc=ge("Square",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bE=ge("StickyNote",[["path",{d:"M16 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V8Z",key:"qazsjp"}],["path",{d:"M15 3v4a2 2 0 0 0 2 2h4",key:"40519r"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vE=ge("Swords",[["polyline",{points:"14.5 17.5 3 6 3 3 6 3 17.5 14.5",key:"1hfsw2"}],["line",{x1:"13",x2:"19",y1:"19",y2:"13",key:"1vrmhu"}],["line",{x1:"16",x2:"20",y1:"16",y2:"20",key:"1bron3"}],["line",{x1:"19",x2:"21",y1:"21",y2:"19",key:"13pww6"}],["polyline",{points:"14.5 6.5 18 3 21 3 21 6 17.5 9.5",key:"hbey2j"}],["line",{x1:"5",x2:"9",y1:"14",y2:"18",key:"1hf58s"}],["line",{x1:"7",x2:"4",y1:"17",y2:"20",key:"pidxm4"}],["line",{x1:"3",x2:"5",y1:"19",y2:"21",key:"1pehsh"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SE=ge("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lf=ge("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ic=ge("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EE=ge("Type",[["polyline",{points:"4 7 4 4 20 4 20 7",key:"1nosan"}],["line",{x1:"9",x2:"15",y1:"20",y2:"20",key:"swin9y"}],["line",{x1:"12",x2:"12",y1:"4",y2:"20",key:"1tx1rr"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mf=ge("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wE=ge("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NE=ge("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _E=ge("UsersRound",[["path",{d:"M18 21a8 8 0 0 0-16 0",key:"3ypg7q"}],["circle",{cx:"10",cy:"8",r:"5",key:"o932ke"}],["path",{d:"M22 20c0-3.37-2-6.5-4-8a5 5 0 0 0-.45-8.3",key:"10s06x"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Oy=ge("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cn=ge("Volume2",[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["path",{d:"M16 9a5 5 0 0 1 0 6",key:"1q6k2b"}],["path",{d:"M19.364 18.364a9 9 0 0 0 0-12.728",key:"ijwkga"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cy=ge("WandSparkles",[["path",{d:"m21.64 3.64-1.28-1.28a1.21 1.21 0 0 0-1.72 0L2.36 18.64a1.21 1.21 0 0 0 0 1.72l1.28 1.28a1.2 1.2 0 0 0 1.72 0L21.64 5.36a1.2 1.2 0 0 0 0-1.72",key:"ul74o6"}],["path",{d:"m14 7 3 3",key:"1r5n42"}],["path",{d:"M5 6v4",key:"ilb8ba"}],["path",{d:"M19 14v4",key:"blhpug"}],["path",{d:"M10 2v2",key:"7u0qdc"}],["path",{d:"M7 8H3",key:"zfb6yr"}],["path",{d:"M21 16h-4",key:"1cnmox"}],["path",{d:"M11 3H9",key:"1obp7u"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lg=ge("Waves",[["path",{d:"M2 6c.6.5 1.2 1 2.5 1C7 7 7 5 9.5 5c2.6 0 2.4 2 5 2 2.5 0 2.5-2 5-2 1.3 0 1.9.5 2.5 1",key:"knzxuh"}],["path",{d:"M2 12c.6.5 1.2 1 2.5 1 2.5 0 2.5-2 5-2 2.6 0 2.4 2 5 2 2.5 0 2.5-2 5-2 1.3 0 1.9.5 2.5 1",key:"2jd2cc"}],["path",{d:"M2 18c.6.5 1.2 1 2.5 1 2.5 0 2.5-2 5-2 2.6 0 2.4 2 5 2 2.5 0 2.5-2 5-2 1.3 0 1.9.5 2.5 1",key:"rd2r6e"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rg=ge("WifiOff",[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}],["path",{d:"M5 12.859a10 10 0 0 1 5.17-2.69",key:"1dl1wf"}],["path",{d:"M19 12.859a10 10 0 0 0-2.007-1.523",key:"4k23kn"}],["path",{d:"M2 8.82a15 15 0 0 1 4.177-2.643",key:"1grhjp"}],["path",{d:"M22 8.82a15 15 0 0 0-11.288-3.764",key:"z3jwby"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AE=ge("Wifi",[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M2 8.82a15 15 0 0 1 20 0",key:"dnpr2z"}],["path",{d:"M5 12.859a10 10 0 0 1 14 0",key:"1x1e6c"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TE=ge("Wrench",[["path",{d:"M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.77-3.77a6 6 0 0 1-7.94 7.94l-6.91 6.91a2.12 2.12 0 0 1-3-3l6.91-6.91a6 6 0 0 1 7.94-7.94l-3.76 3.76z",key:"cbrjhi"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ut=ge("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oc=ge("Zap",[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]]);var nt=(n=>(n.FORGOT="FORGOT",n.HARD="HARD",n.EASY="EASY",n.LEARNED="LEARNED",n))(nt||{}),pt=(n=>(n.RAW="RAW",n.REFINED="REFINED",n.VERIFIED="VERIFIED",n.FAILED="FAILED",n))(pt||{}),ff=(n=>(n.VARIETY="VARIETY",n.MORE_ACADEMIC="MORE_ACADEMIC",n.LESS_ACADEMIC="LESS_ACADEMIC",n))(ff||{});const pi="u-vocab-master",jE="/data/data.json",IE=[],ar=[{id:"topic_family",title:"Family & Roots",description:"Relationships, upbringing, and the foundations of society.",backgroundTheme:"from-orange-100 to-rose-50",icon:"",segments:[{id:"seg_fam_1",title:"Family Ties",description:"The core units of human connection.",tagCriteria:"family",basicWords:["mother","father","brother","sister","child"],intermediateWords:["upbringing","nuclear family","sibling","guardian","relative"],advancedWords:["genealogy","consanguinity","authoritarian","matriarch","progeny"],visualIcon:"",boss:{name:"Family Elder",hp:20,dialogueIntro:"Do you truly know those you share your blood with?",dialogueWin:"The bonds of kinship are well understood.",dialogueLose:"You ignore your foundations.",image:"",dropBadgeId:"family_crest"}},{id:"seg_fam_2",title:"Modern Society",description:"How we live together in the 21st century.",tagCriteria:"society",basicWords:["people","city","house","friend","neighbor"],intermediateWords:["community","urbanization","demographics","infrastructure","diversity"],advancedWords:["egalitarian","stratification","cosmopolitan","secular","socioeconomic"],visualIcon:"",boss:{name:"The Architect",hp:20,dialogueIntro:"A city is more than stone and mortar. It is a collective mind.",dialogueWin:"You see the patterns in the crowd.",dialogueLose:"Lost in the concrete jungle.",image:"",dropBadgeId:"family_crest"}}]},{id:"topic_education",title:"The Academy",description:"Learning systems, pedagogy, and academic pursuits.",backgroundTheme:"from-yellow-100 to-amber-50",icon:"",segments:[{id:"seg_edu_1",title:"Primary School",description:"The beginning of the educational journey.",tagCriteria:"school",basicWords:["study","learn","teacher","book","class"],intermediateWords:["curriculum","assignment","literacy","discipline","tuition"],advancedWords:["pedagogy","didactic","erudition","rote learning","epistemology"],visualIcon:"",boss:{name:"The Headmaster",hp:20,dialogueIntro:"Class is in session. Don't be late.",dialogueWin:"A star student indeed.",dialogueLose:"Detention for you.",image:"",dropBadgeId:"education_scroll"}},{id:"seg_edu_2",title:"Higher Education",description:"University life and specialized research.",tagCriteria:"university",basicWords:["college","exam","paper","degree","lesson"],intermediateWords:["undergraduate","scholarship","dissertation","vocational","faculty"],advancedWords:["theoretical","specialization","prestigious","alumnus","doctoral"],visualIcon:"",boss:{name:"The Dean",hp:20,dialogueIntro:"Submit your thesis or fail the semester.",dialogueWin:"Your research is groundbreaking.",dialogueLose:"Insufficient evidence for your claims.",image:"",dropBadgeId:"education_scroll"}}]}],OE="IELTSVocabProDB_V2",wt="vocabulary",un="users",La="units",rl="paraphrase_logs",il="speaking_logs",ol="speaking_topics",Ma="writing_topics",Jn="writing_logs",Ua="irregular_verbs",dn="lessons",cl="listening_items",fn="native_speak_items",pn="conversation_items",hn="free_talk_items",mn="compositions",gn="word_books",ul="reading_books",pf="lesson_books",hf="listening_books",mf="speaking_books",gf="writing_books",xn="planning_goals",CE=27;let $a=null,Zn=null;const Ry=async()=>{if(navigator.storage&&navigator.storage.persist)try{await navigator.storage.persisted()||await navigator.storage.persist()}catch{}},Si=()=>$a?Promise.resolve($a):Zn||(Zn=new Promise((n,r)=>{try{const i=indexedDB.open(OE,CE);i.onblocked=()=>{console.warn("[DB] Database upgrade blocked. Please close other tabs/windows of this app.")},i.onupgradeneeded=o=>{const f=o.target.result;if(!f){console.error("Database not available during onupgradeneeded");return}if(f.objectStoreNames.contains(wt)){const d=i.transaction.objectStore(wt);d.indexNames.contains("word")||d.createIndex("word","word",{unique:!1})}else{const d=f.createObjectStore(wt,{keyPath:"id"});d.createIndex("userId","userId",{unique:!1}),d.createIndex("nextReview","nextReview",{unique:!1}),d.createIndex("userId_word",["userId","word"],{unique:!1}),d.createIndex("word","word",{unique:!1})}if(f.objectStoreNames.contains(un)||f.createObjectStore(un,{keyPath:"id"}),f.objectStoreNames.contains(La)||f.createObjectStore(La,{keyPath:"id"}).createIndex("userId","userId",{unique:!1}),!f.objectStoreNames.contains(rl)){const d=f.createObjectStore(rl,{keyPath:"id"});d.createIndex("userId","userId",{unique:!1}),d.createIndex("timestamp","timestamp",{unique:!1})}if(!f.objectStoreNames.contains(il)){const d=f.createObjectStore(il,{keyPath:"id"});d.createIndex("userId","userId",{unique:!1}),d.createIndex("timestamp","timestamp",{unique:!1})}if(o.oldVersion<9&&(f.objectStoreNames.contains(ol)||f.createObjectStore(ol,{keyPath:"id"}).createIndex("userId","userId",{unique:!1})),o.oldVersion<10&&(f.objectStoreNames.contains(Ma)||f.createObjectStore(Ma,{keyPath:"id"}).createIndex("userId","userId",{unique:!1}),!f.objectStoreNames.contains(Jn))){const d=f.createObjectStore(Jn,{keyPath:"id"});d.createIndex("userId","userId",{unique:!1}),d.createIndex("timestamp","timestamp",{unique:!1})}o.oldVersion<12&&f.objectStoreNames.contains("word_comparison_groups")&&f.deleteObjectStore("word_comparison_groups"),o.oldVersion<13&&(f.objectStoreNames.contains(Ua)||f.createObjectStore(Ua,{keyPath:"id"}).createIndex("userId","userId",{unique:!1})),o.oldVersion<14&&(f.objectStoreNames.contains(dn)||f.createObjectStore(dn,{keyPath:"id"}).createIndex("userId","userId",{unique:!1})),o.oldVersion<15&&(f.objectStoreNames.contains(cl)||f.createObjectStore(cl,{keyPath:"id"}).createIndex("userId","userId",{unique:!1})),o.oldVersion<16&&(f.objectStoreNames.contains(fn)||f.createObjectStore(fn,{keyPath:"id"}).createIndex("userId","userId",{unique:!1})),o.oldVersion<17&&(f.objectStoreNames.contains(mn)||f.createObjectStore(mn,{keyPath:"id"}).createIndex("userId","userId",{unique:!1})),f.objectStoreNames.contains("calendar_events")&&f.deleteObjectStore("calendar_events"),o.oldVersion<19&&(f.objectStoreNames.contains(gn)||f.createObjectStore(gn,{keyPath:"id"}).createIndex("userId","userId",{unique:!1})),o.oldVersion<20&&(f.objectStoreNames.contains(ul)||f.createObjectStore(ul,{keyPath:"id"}).createIndex("userId","userId",{unique:!1})),o.oldVersion<21&&(f.objectStoreNames.contains(pf)||f.createObjectStore(pf,{keyPath:"id"}).createIndex("userId","userId",{unique:!1})),o.oldVersion<22&&(f.objectStoreNames.contains(hf)||f.createObjectStore(hf,{keyPath:"id"}).createIndex("userId","userId",{unique:!1}),f.objectStoreNames.contains(mf)||f.createObjectStore(mf,{keyPath:"id"}).createIndex("userId","userId",{unique:!1}),f.objectStoreNames.contains(gf)||f.createObjectStore(gf,{keyPath:"id"}).createIndex("userId","userId",{unique:!1})),o.oldVersion<23&&(f.objectStoreNames.contains(xn)||f.createObjectStore(xn,{keyPath:"id"}).createIndex("userId","userId",{unique:!1})),o.oldVersion<24&&(f.objectStoreNames.contains(pn)||f.createObjectStore(pn,{keyPath:"id"}).createIndex("userId","userId",{unique:!1})),o.oldVersion<26&&(f.objectStoreNames.contains(hn)||f.createObjectStore(hn,{keyPath:"id"}).createIndex("userId","userId",{unique:!1})),f.objectStoreNames.contains("comparison_groups")&&f.deleteObjectStore("comparison_groups")},i.onsuccess=()=>{$a=i.result,$a.onclose=()=>{console.warn("[DB] Database connection closed unexpectedly."),$a=null,Zn=null,window.dispatchEvent(new CustomEvent("db-connection-lost"))},$a.onversionchange=()=>{console.warn("[DB] Database version change detected. Closing connection."),$a==null||$a.close(),$a=null,Zn=null,window.location.reload()},n($a)},i.onerror=o=>{console.error("[DB] Open DB Error:",o.target.error),Zn=null,r(o.target.error)}}catch(i){console.error("[DB] Open DB Exception:",i),Zn=null,r(i)}}),Zn),ky=async()=>cc(async()=>{const n=await Si();return new Promise((r,i)=>{const o=[un,wt,La,rl,il,ol,Jn,Ma,Ua,dn,cl,fn,pn,hn,mn,gn,ul,pf,hf,mf,gf,xn],f=n.transaction(o,"readwrite");o.forEach(d=>{n.objectStoreNames.contains(d)&&f.objectStore(d).clear()}),f.oncomplete=()=>{localStorage.removeItem("vocab_pro_mimic_practice_queue"),localStorage.removeItem("vocab_pro_db_marker"),localStorage.removeItem("vocab_pro_emergency_backup"),r()},f.onerror=()=>i(f.error)})}),cc=async(n,r=3,i=200)=>{var o,f,d;for(let p=0;p<r;p++)try{return await n()}catch(g){if(console.warn(`[DB] Operation failed, retrying (${p+1}/${r}). Error:`,g),((g==null?void 0:g.name)==="InvalidStateError"||(o=g==null?void 0:g.message)!=null&&o.toLowerCase().includes("closed")||((d=(f=g==null?void 0:g.target)==null?void 0:f.error)==null?void 0:d.name)==="InvalidStateError")&&($a=null,Zn=null),p===r-1)throw g;await new Promise(h=>setTimeout(h,i*Math.pow(2,p)))}throw new Error("Operation failed after retries")},we=async(n,r,i="readwrite")=>cc(async()=>{const o=await Si();return new Promise((f,d)=>{try{const p=o.transaction(n,i),g=r(p);p.oncomplete=()=>f(g?g.result:void 0),p.onerror=()=>d(p.error),p.onabort=()=>d(new Error("Transaction aborted"))}catch(p){d(p)}})}),Uf=async(n=!1)=>{try{const r=await Si(),i=r.transaction(un,"readonly"),o=await new Promise((y,v)=>{const w=i.objectStore(un).getAll();w.onsuccess=()=>y(w.result||[]),w.onerror=()=>v(w.error)}),f=localStorage.getItem("vocab_pro_emergency_backup"),d=localStorage.getItem("vocab_pro_db_marker");if(o.length===0&&f)try{const y=JSON.parse(f);if(Array.isArray(y)&&y.length>0&&(await dl(y),o.length===0)){const v={id:y[0].userId||pi,name:"Recovered User",avatar:"https://api.dicebear.com/7.x/avataaars/svg?seed=Recovered",lastLogin:Date.now(),role:"Language Learner",experience:0,level:1,adventure:{currentNodeIndex:0,energy:5,energyShards:0,unlockedChapterIds:ar.map(w=>w.id),completedSegmentIds:[],segmentStars:{},badges:[],keys:1,keyFragments:0,map:[]}};return await Za(v),v}}catch(y){console.error("[DB]  Failed to restore from Emergency Backup:",y)}if(o.length===0&&d==="exists"&&!n)return console.error("[DB]  CRITICAL: LocalStorage marker found but IDB returned 0 users. Aborting auto-seed to prevent data loss."),null;const g=r.transaction(wt,"readonly").objectStore(wt).count(),h=await new Promise(y=>{g.onsuccess=()=>y(g.result>0),g.onerror=()=>{console.error("[DB] Failed to check for existing data. Assuming data exists to prevent overwrite."),y(!0)}});if(!n&&o.length>0&&(d!=="exists"&&localStorage.setItem("vocab_pro_db_marker","exists"),h||sessionStorage.getItem("ielts_pro_skip_seed")==="true"))return null;let m;if(o.length===0?(m={id:pi,name:"Vocab Master",avatar:"https://api.dicebear.com/7.x/avataaars/svg?seed=Master",lastLogin:Date.now(),role:"Language Learner",currentLevel:"Intermediate",target:"Advanced Fluency",experience:0,level:1,peakLevel:1,adventure:{currentNodeIndex:0,energy:5,energyShards:0,unlockedChapterIds:ar.map(y=>y.id),completedSegmentIds:[],segmentStars:{},badges:[],keys:1,keyFragments:0,map:[]}},await Za(m),localStorage.setItem("vocab_pro_db_marker","exists")):(m=o[0],m.experience===void 0&&(m.experience=0),m.level===void 0&&(m.level=1),m.peakLevel===void 0&&(m.peakLevel=m.level),m.adventure||(m.adventure={currentNodeIndex:0,energy:5,energyShards:0,unlockedChapterIds:ar.map(y=>y.id),completedSegmentIds:[],segmentStars:{},badges:[],keys:1,keyFragments:0,map:[]}),await Za(m)),!h){let y=[];try{const w=await fetch(jE);if(w.ok){const N=await w.json();y=Array.isArray(N)?N:N.vocabulary||[]}}catch(w){console.error("Failed to fetch local seed data:",w)}y.length===0&&(y=IE);const v=y.map(w=>({...w,nextReview:w.nextReview||Date.now(),lastXpEarnedTime:w.lastXpEarnedTime||void 0,quality:w.quality||pt.VERIFIED,source:"app"}));await dl(v)}return m}catch(r){return console.error("[DB] Seed check failed completely:",r),null}},nr=async()=>we(un,n=>n.objectStore(un).getAll(),"readonly"),Za=async n=>(n&&n.id&&localStorage.setItem("vocab_pro_db_marker","exists"),we(un,r=>r.objectStore(un).put(n))),Ly=async(n,r)=>cc(async()=>{const i=await Si();return new Promise(o=>{const p=i.transaction(wt,"readonly").objectStore(wt).openCursor(),g=r.trim().toLowerCase();p.onsuccess=h=>{const m=h.target.result;m?m.value.userId===n&&m.value.word.trim().toLowerCase()===g?o(m.value):m.continue():o(null)},p.onerror=()=>{o(null)}})}),My=async(n,r)=>cc(async()=>{const i=await Si();return new Promise(o=>{const d=i.transaction(wt,"readonly").objectStore(wt).getAll();d.onsuccess=()=>{const p=d.result,g=["To express an idea or feeling","A state of great comfort and luxury","Happening or developing gradually","To influence or change someone or something","A formal meeting for discussion","Necessary for a particular purpose","The ability to do something well","A careful and detailed study of something","To make something new or original"],y=[...Array.from(new Set(p.filter(v=>v.id!==r&&v.quality===pt.VERIFIED&&v.meaningVi&&v.meaningVi.trim().length>0&&v.meaningVi.length<150).map(v=>v.meaningVi.trim())))].sort(()=>Math.random()-.5).slice(0,n);if(y.length<n){const v=n-y.length,w=[...g].sort(()=>Math.random()-.5);for(let N=0;N<v;N++){const O=w[N%w.length];y.includes(O)||y.push(O)}}o([...y].sort(()=>Math.random()-.5))},d.onerror=()=>{o([])}})}),Uy=(n,r,i,o,f,d,p="all",g=null,h="all",m=null,y="all",v=null)=>{var O;const w=r.toLowerCase().trim();if(w&&!(n.word.toLowerCase().includes(w)||n.meaningVi.toLowerCase().includes(w))||n.isPassive&&!i.includes("archive")||o!=="all"&&(o==="refined"&&n.quality!==pt.REFINED||o==="verified"&&n.quality!==pt.VERIFIED||o==="failed"&&n.quality!==pt.FAILED||o==="raw"&&n.quality!==pt.RAW||o==="not_refined"&&n.quality!==pt.RAW))return!1;if(f!=="all"){const I=!n.lastReview,_=!!n.lastReview&&n.consecutiveCorrect===1&&n.lastGrade!==nt.FORGOT,j=!!n.lastReview&&n.consecutiveCorrect>1&&n.lastGrade===nt.EASY,L=!!n.lastReview&&n.consecutiveCorrect>1&&n.lastGrade===nt.HARD,D=!!n.lastReview&&n.lastGrade===nt.FORGOT;if(f==="new"&&!I||f==="learned"&&!_||f==="easy"&&!j||f==="hard"&&!L||f==="forgot"&&!D)return!1}if(d!=="all"&&(n.register||"raw")!==d||p!=="all"&&(n.source||"raw")!==p)return!1;if(g){if(g==="Uncategorized"){if(n.groups&&n.groups.length>0)return!1}else if(!((O=n.groups)!=null&&O.some(I=>I.startsWith(g))))return!1}if(h!=="all"&&m){const I=m.has(n.id);if(h==="composed"&&!I||h==="not_composed"&&I)return!1}if(y!=="all"&&v){const I=v.has(n.word.toLowerCase());if(y==="in_book"&&!I||y==="not_in_book"&&I)return!1}if(i.includes("all")||i.length===0)return!n.isPassive;for(const I of i)if(I==="archive"&&n.isPassive||I==="idiom"&&n.isIdiom||I==="phrasal"&&n.isPhrasalVerb||I==="colloc"&&n.isCollocation||I==="phrase"&&n.isStandardPhrase||I==="vocab"&&!n.isIdiom&&!n.isPhrasalVerb&&!n.isCollocation&&!n.isStandardPhrase)return!0;return!1},Dy=async(n,r)=>{r&&r.id&&localStorage.setItem("vocab_pro_db_marker","exists"),await we([wt,un],i=>{i.objectStore(wt).put(n),i.objectStore(un).put(r)})},zy=async(n,r)=>{await we([wt,La],i=>{n&&i.objectStore(wt).put(n),i.objectStore(La).put(r)})},By=async n=>{n.updatedAt=Date.now(),await we(wt,r=>r.objectStore(wt).put(n))},Hy=async n=>{await we(wt,r=>r.objectStore(wt).delete(n))},Gy=async n=>{await we(wt,r=>{const i=r.objectStore(wt);n.forEach(o=>i.delete(o))})},dl=async n=>{n.length!==0&&await we(wt,r=>{const i=r.objectStore(wt);n.forEach(o=>i.put(o))})},cr=async()=>await we(wt,n=>n.objectStore(wt).getAll(),"readonly"),Py=async n=>{n.updatedAt=Date.now(),await we(La,r=>r.objectStore(La).put(n))},RE=async n=>{await we(La,r=>r.objectStore(La).delete(n))},uc=async()=>await we(La,n=>n.objectStore(La).getAll(),"readonly"),kE=async n=>(await uc()).filter(i=>i.wordIds.includes(n)),Vy=async n=>{await we(La,r=>{const i=r.objectStore(La);n.forEach(o=>i.put(o))})},Df=async()=>(await we(rl,r=>r.objectStore(rl).getAll(),"readonly")).sort((r,i)=>i.timestamp-r.timestamp),qy=async n=>{await we(rl,r=>{const i=r.objectStore(rl);n.forEach(o=>i.put(o))})},zf=async()=>await we(il,n=>n.objectStore(il).getAll(),"readonly"),Yy=async n=>{await we(il,r=>{const i=r.objectStore(il);n.forEach(o=>i.put(o))})},Bf=async()=>await we(ol,n=>n.objectStore(ol).getAll(),"readonly"),Fy=async n=>{await we(ol,r=>{const i=r.objectStore(ol);n.forEach(o=>i.put(o))})},$y=async n=>{n.updatedAt=Date.now(),await we(fn,r=>r.objectStore(fn).put(n))},Hf=async()=>await we(fn,n=>n.objectStore(fn).getAll(),"readonly"),Wy=async n=>{await we(fn,r=>r.objectStore(fn).delete(n))},Qy=async n=>{await we(fn,r=>{const i=r.objectStore(fn);n.forEach(o=>i.put(o))})},Zy=async n=>{n.updatedAt=Date.now(),await we(pn,r=>r.objectStore(pn).put(n))},Gf=async()=>await we(pn,n=>n.objectStore(pn).getAll(),"readonly"),Ky=async n=>{await we(pn,r=>r.objectStore(pn).delete(n))},Xy=async n=>{await we(pn,r=>{const i=r.objectStore(pn);n.forEach(o=>i.put(o))})},Jy=async n=>{n.updatedAt=Date.now(),await we(hn,r=>r.objectStore(hn).put(n))},Pf=async()=>await we(hn,n=>n.objectStore(hn).getAll(),"readonly"),eb=async n=>{await we(hn,r=>r.objectStore(hn).delete(n))},tb=async n=>{await we(hn,r=>{const i=r.objectStore(hn);n.forEach(o=>i.put(o))})},LE=async n=>{await we(Jn,r=>r.objectStore(Jn).put(n))},Vf=async()=>await we(Jn,n=>n.objectStore(Jn).getAll(),"readonly"),ab=async n=>{await we(Jn,r=>{const i=r.objectStore(Jn);n.forEach(o=>i.put(o))})},nb=async n=>{n.updatedAt=Date.now(),await we(Ma,r=>r.objectStore(Ma).put(n))},sb=async n=>{await we(Ma,r=>r.objectStore(Ma).delete(n))},ME=async()=>await we(Ma,n=>n.objectStore(Ma).getAll(),"readonly"),qf=async()=>await we(Ma,n=>n.objectStore(Ma).getAll(),"readonly"),lb=async n=>{await we(Ma,r=>{const i=r.objectStore(Ma);n.forEach(o=>i.put(o))})},UE=async n=>{n.updatedAt=Date.now(),await we(Ua,r=>r.objectStore(Ua).put(n))},Yf=async()=>await we(Ua,n=>n.objectStore(Ua).getAll(),"readonly"),DE=async n=>{await we(Ua,r=>r.objectStore(Ua).delete(n))},rb=async n=>{await we(Ua,r=>{const i=r.objectStore(Ua);n.forEach(o=>i.put(o))})},zE=async n=>{await we(Ua,r=>{const i=r.objectStore(Ua);n.forEach(o=>i.delete(o))})},ib=async n=>{n.updatedAt=Date.now(),await we(dn,r=>r.objectStore(dn).put(n))},Ff=async()=>await we(dn,n=>n.objectStore(dn).getAll(),"readonly"),ob=async n=>{await we(dn,r=>r.objectStore(dn).delete(n))},cb=async n=>{await we(dn,r=>{const i=r.objectStore(dn);n.forEach(o=>i.put(o))})},$f=async()=>await we(cl,n=>n.objectStore(cl).getAll(),"readonly"),ub=async n=>{await we(cl,r=>{const i=r.objectStore(cl);n.forEach(o=>i.put(o))})},db=async n=>{n.updatedAt=Date.now(),await we(mn,r=>r.objectStore(mn).put(n))},Ei=async()=>await we(mn,n=>n.objectStore(mn).getAll(),"readonly"),fb=async n=>{await we(mn,r=>r.objectStore(mn).delete(n))},pb=async n=>{await we(mn,r=>{const i=r.objectStore(mn);n.forEach(o=>i.put(o))})},hb=async n=>{await we(gn,r=>r.objectStore(gn).put(n))},wi=async()=>await we(gn,n=>n.objectStore(gn).getAll(),"readonly"),BE=async n=>{await we(gn,r=>r.objectStore(gn).delete(n))},mb=async n=>{await we(gn,r=>{const i=r.objectStore(gn);n.forEach(o=>i.put(o))})},Wf=async()=>await we(ul,n=>n.objectStore(ul).getAll(),"readonly"),gb=async n=>{await we(ul,r=>{const i=r.objectStore(ul);n.forEach(o=>i.put(o))})},xb=async n=>{await we(xn,r=>r.objectStore(xn).put(n))},Qf=async()=>await we(xn,n=>n.objectStore(xn).getAll(),"readonly"),yb=async n=>{await we(xn,r=>r.objectStore(xn).delete(n))},bb=async n=>{await we(xn,r=>{const i=r.objectStore(xn);n.forEach(o=>i.put(o))})},HE=Object.freeze(Object.defineProperty({__proto__:null,bulkDeleteIrregularVerbs:zE,bulkDeleteWords:Gy,bulkSaveCompositions:pb,bulkSaveConversationItems:Xy,bulkSaveFreeTalkItems:tb,bulkSaveIrregularVerbs:rb,bulkSaveLessons:cb,bulkSaveListeningItems:ub,bulkSaveNativeSpeakItems:Qy,bulkSaveParaphraseLogs:qy,bulkSavePlanningGoals:bb,bulkSaveReadingBooks:gb,bulkSaveSpeakingLogs:Yy,bulkSaveSpeakingTopics:Fy,bulkSaveUnits:Vy,bulkSaveWordBooks:mb,bulkSaveWords:dl,bulkSaveWritingLogs:ab,bulkSaveWritingTopics:lb,clearVocabularyOnly:ky,deleteComposition:fb,deleteConversationItem:Ky,deleteFreeTalkItem:eb,deleteIrregularVerb:DE,deleteLesson:ob,deleteNativeSpeakItem:Wy,deletePlanningGoal:yb,deleteUnit:RE,deleteWordBook:BE,deleteWordFromDB:Hy,deleteWritingTopic:sb,filterItem:Uy,findWordByText:Ly,getAllSpeakingLogsForExport:zf,getAllSpeakingTopicsForExport:Bf,getAllUsers:nr,getAllWordsForExport:cr,getAllWritingLogsForExport:Vf,getAllWritingTopicsForExport:qf,getCompositionsByUserId:Ei,getConversationItemsByUserId:Gf,getFreeTalkItemsByUserId:Pf,getIrregularVerbsByUserId:Yf,getLessonsByUserId:Ff,getListeningItemsByUserId:$f,getNativeSpeakItemsByUserId:Hf,getParaphraseLogs:Df,getPlanningGoalsByUserId:Qf,getRandomMeanings:My,getReadingBooksByUserId:Wf,getUnitsByUserId:uc,getUnitsContainingWord:kE,getWordBooksByUserId:wi,getWritingTopicsByUserId:ME,saveComposition:db,saveConversationItem:Zy,saveFreeTalkItem:Jy,saveIrregularVerb:UE,saveLesson:ib,saveNativeSpeakItem:$y,savePlanningGoal:xb,saveUnit:Py,saveUser:Za,saveWord:By,saveWordAndUnit:zy,saveWordAndUser:Dy,saveWordBook:hb,saveWritingLog:LE,saveWritingTopic:nb,seedDatabaseIfEmpty:Uf,tryPersistStorage:Ry},Symbol.toStringTag,{value:"Module"})),GE=["Vietnamese","Spanish","Chinese (Simplified)","Chinese (Traditional)","Japanese","Korean","French","German","Italian","Portuguese","Russian","Arabic","Hindi","Thai","Indonesian","Turkish"],PE=[{id:"learner",label:"General Learner",icon:fy},{id:"professional",label:"Professional",icon:YS},{id:"student",label:"Student",icon:Sy}],VE=({users:n,isCreating:r,setIsCreating:i,loading:o,hasApiKey:f,newName:d,setNewName:p,newRole:g,setNewRole:h,newLevel:m,setNewLevel:y,newTarget:v,setNewTarget:w,newLanguage:N,setNewLanguage:O,newAudience:I,setNewAudience:_,selectedPersona:j,handleSelectKey:L,handlePersonaSelect:D,handleCreateProfile:M,onLogin:P})=>o?l.jsx("div",{className:"h-screen flex items-center justify-center bg-neutral-50",children:l.jsxs("div",{className:"flex flex-col items-center space-y-4",children:[l.jsx(At,{className:"animate-spin text-neutral-300",size:40}),l.jsx("p",{className:"text-xs font-black text-neutral-400 uppercase tracking-widest",children:"Initializing Lab..."})]})}):l.jsx("div",{className:"min-h-screen flex items-center justify-center bg-neutral-50 p-6",children:l.jsxs("div",{className:"max-w-md w-full space-y-10",children:[l.jsxs("div",{className:"text-center space-y-2",children:[l.jsx("div",{className:"inline-flex p-4 bg-white rounded-3xl shadow-sm border border-neutral-100 mb-4",children:l.jsx(or,{className:"text-neutral-900",size:32})}),l.jsx("h1",{className:"text-4xl font-black text-neutral-900 tracking-tight",children:"Vocab Pro"}),l.jsx("p",{className:"text-neutral-500 font-medium italic",children:"Your words. Your context. Your mastery."})]}),!f&&n.length===0&&l.jsxs("div",{className:"bg-amber-50 border-2 border-amber-100 p-6 rounded-[2rem] space-y-4 animate-in fade-in slide-in-from-top-4",children:[l.jsxs("div",{className:"flex items-start space-x-3 text-amber-800",children:[l.jsx(Kn,{size:24,className:"shrink-0 mt-1"}),l.jsxs("div",{children:[l.jsx("h3",{className:"font-black text-lg",children:"AI Configuration Required"}),l.jsx("p",{className:"text-sm font-medium mt-1 opacity-80",children:"To enable AI word analysis and suggestions, you must select a Gemini API key."})]})]}),l.jsxs("div",{className:"space-y-3",children:[l.jsxs("button",{onClick:L,className:"w-full py-4 bg-amber-600 text-white font-black rounded-2xl shadow-lg hover:bg-amber-700 transition-all flex items-center justify-center space-x-2 active:scale-95",children:[l.jsx(lE,{size:18}),l.jsx("span",{children:"CONNECT GEMINI API"})]}),l.jsxs("a",{href:"https://ai.google.dev/gemini-api/docs/billing",target:"_blank",rel:"noopener noreferrer",className:"flex items-center justify-center space-x-1.5 text-[10px] font-black text-amber-600 uppercase tracking-widest hover:underline",children:[l.jsx("span",{children:"Billing Documentation"}),l.jsx(xy,{size:10})]})]})]}),r?l.jsxs("form",{onSubmit:M,className:"bg-white p-8 rounded-[2.5rem] shadow-xl border border-neutral-200 animate-in zoom-in-95 duration-300 space-y-6",children:[l.jsxs("h2",{className:"text-xl font-bold flex items-center",children:[l.jsx(wE,{className:"mr-2",size:20})," Create Profile"]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs font-bold text-neutral-400 uppercase tracking-widest mb-2",children:"Display Name"}),l.jsx("input",{autoFocus:!0,type:"text",value:d,onChange:Y=>p(Y.target.value),placeholder:"Enter your name",className:"w-full px-5 py-3 bg-neutral-50 border border-neutral-200 rounded-xl text-md font-bold focus:ring-2 focus:ring-neutral-900 focus:outline-none"})]}),l.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[l.jsxs("div",{children:[l.jsxs("label",{className:"block text-xs font-bold text-neutral-400 uppercase tracking-widest mb-2 flex items-center gap-2",children:[l.jsx(vy,{size:14})," Language"]}),l.jsx("select",{value:N,onChange:Y=>O(Y.target.value),className:"w-full px-5 py-3 bg-neutral-50 border border-neutral-200 rounded-xl text-sm font-medium focus:ring-2 focus:ring-neutral-900 focus:outline-none appearance-none",children:GE.map(Y=>l.jsx("option",{value:Y,children:Y},Y))})]}),l.jsxs("div",{children:[l.jsxs("label",{className:"block text-xs font-bold text-neutral-400 uppercase tracking-widest mb-2 flex items-center gap-2",children:[l.jsx(Oy,{size:14})," Audience"]}),l.jsxs("select",{value:I,onChange:Y=>_(Y.target.value),className:"w-full px-5 py-3 bg-neutral-50 border border-neutral-200 rounded-xl text-sm font-medium focus:ring-2 focus:ring-neutral-900 focus:outline-none appearance-none",children:[l.jsx("option",{value:"Kid",children:"Kid"}),l.jsx("option",{value:"Adult",children:"Adult"})]})]})]}),l.jsxs("div",{className:"space-y-3",children:[l.jsx("label",{className:"block text-xs font-bold text-neutral-400 uppercase tracking-widest",children:"About Me (Quick Start)"}),l.jsx("div",{className:"grid grid-cols-3 gap-2",children:PE.map(Y=>{const U=Y.icon;return l.jsxs("button",{type:"button",onClick:()=>D(Y.id),className:`p-3 border-2 rounded-2xl flex flex-col items-center justify-center space-y-1.5 transition-all text-center ${j===Y.id?"bg-neutral-900 border-neutral-900 text-white shadow-lg":"bg-white border-neutral-100 text-neutral-400 hover:border-neutral-200 hover:text-neutral-900"}`,children:[l.jsx(U,{size:20}),l.jsx("span",{className:"text-[10px] font-black uppercase tracking-tight",children:Y.label})]},Y.id)})})]}),l.jsxs("div",{className:"space-y-4 pt-4 border-t border-neutral-100",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs font-bold text-neutral-400 uppercase tracking-widest mb-2",children:"Starting Role"}),l.jsx("input",{type:"text",value:g,onChange:Y=>h(Y.target.value),placeholder:"e.g., Working Professional, Student",className:"w-full px-5 py-3 bg-neutral-50 border border-neutral-200 rounded-xl text-md font-medium focus:ring-2 focus:ring-neutral-900 focus:outline-none"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs font-bold text-neutral-400 uppercase tracking-widest mb-2",children:"Current Level"}),l.jsx("input",{type:"text",value:m,onChange:Y=>y(Y.target.value),placeholder:"e.g., Intermediate",className:"w-full px-5 py-3 bg-neutral-50 border border-neutral-200 rounded-xl text-md font-medium focus:ring-2 focus:ring-neutral-900 focus:outline-none"})]})]}),l.jsxs("div",{className:"flex space-x-3 pt-4",children:[l.jsx("button",{type:"button",onClick:()=>i(!1),className:"flex-1 py-4 text-neutral-500 font-bold hover:bg-neutral-50 rounded-2xl transition-colors",children:"Back"}),l.jsx("button",{type:"submit",disabled:!d.trim(),className:"flex-[2] py-4 bg-neutral-900 text-white font-bold rounded-2xl shadow-lg hover:scale-[1.02] active:scale-95 transition-all disabled:opacity-50",children:"Start Learning"})]})]}):l.jsxs("div",{className:"space-y-4",children:[l.jsx("div",{className:"grid grid-cols-1 gap-3",children:n.map(Y=>l.jsxs("button",{onClick:()=>P(Y),className:"bg-white p-5 rounded-3xl border border-neutral-200 shadow-sm flex items-center justify-between hover:border-neutral-900 hover:shadow-md transition-all group",children:[l.jsxs("div",{className:"flex items-center space-x-4",children:[l.jsx("img",{src:Y.avatar,className:"w-12 h-12 rounded-2xl bg-neutral-100 p-1",alt:Y.name}),l.jsxs("div",{className:"text-left",children:[l.jsx("div",{className:"font-bold text-neutral-900",children:Y.name}),l.jsxs("div",{className:"text-xs text-neutral-400",children:[Y.role?Y.role:"Learner","  Last seen: ",new Date(Y.lastLogin).toLocaleDateString()]})]})]}),l.jsx(Xo,{size:20,className:"text-neutral-300 group-hover:text-neutral-900 transition-colors"})]},Y.id))}),l.jsxs("button",{onClick:()=>i(!0),className:"w-full p-5 bg-neutral-100 border border-dashed border-neutral-300 text-neutral-500 rounded-3xl font-bold flex items-center justify-center space-x-2 hover:bg-neutral-200 transition-all",children:[l.jsx(In,{size:20}),l.jsx("span",{children:"Add New User"})]})]})]})}),qE=({onLogin:n})=>{const[r,i]=E.useState([]),[o,f]=E.useState(!1),[d,p]=E.useState(""),[g,h]=E.useState(""),[m,y]=E.useState(""),[v,w]=E.useState(""),[N,O]=E.useState("English"),[I,_]=E.useState("Adult"),[j,L]=E.useState("learner"),[D,M]=E.useState(!0),[P,Y]=E.useState(!0),U=[{id:"learner",role:"Vocab Learner",level:"Intermediate English",target:"Expand active vocabulary"},{id:"professional",role:"Working Professional",level:"Intermediate English",target:"Fluent business communication"},{id:"student",role:"Primary Student",level:"Beginner English",target:"Build school vocabulary"}];E.useEffect(()=>{G()},[]),E.useEffect(()=>{o&&V("learner")},[o]);const G=async()=>{M(!0);try{if(window.aistudio){const ae=await window.aistudio.hasSelectedApiKey();Y(ae)}const $=(await nr()).filter(ae=>!ae.name.toLowerCase().includes("book"));i($)}catch($){console.error("Auth initialization error:",$)}finally{M(!1)}},A=async()=>{window.aistudio&&(await window.aistudio.openSelectKey(),Y(!0))},V=$=>{const ae=U.find(me=>me.id===$);ae&&(L($),h(ae.role),y(ae.level),w(ae.target),_($==="student"?"Kid":"Adult"))},F=async $=>{if($.preventDefault(),!d.trim())return;const ae={id:"u-"+Date.now(),name:d.trim(),avatar:`https://api.dicebear.com/7.x/avataaars/svg?seed=${d}`,lastLogin:Date.now(),role:g.trim(),currentLevel:m.trim(),target:v.trim(),nativeLanguage:N,experience:0,level:1,peakLevel:1,adventure:{currentNodeIndex:0,energyShards:0,energy:5,keys:1,keyFragments:0,badges:[],unlockedChapterIds:ar.map(me=>me.id),completedSegmentIds:[],segmentStars:{}},lessonPreferences:{language:N,targetAudience:I,tone:I==="Kid"?"friendly_elementary":"professional_professor"}};await Za(ae),n(ae)};return l.jsx(VE,{users:r,isCreating:o,setIsCreating:f,loading:D,hasApiKey:P,newName:d,setNewName:p,newRole:g,setNewRole:h,newLevel:m,setNewLevel:y,newTarget:v,setNewTarget:w,newLanguage:N,setNewLanguage:O,newAudience:I,setNewAudience:_,selectedPersona:j,handleSelectKey:A,handlePersonaSelect:V,handleCreateProfile:F,onLogin:n})},vb=E.createContext(void 0),YE=({children:n})=>{const[r,i]=E.useState([]),o=E.useCallback(d=>{i(p=>p.filter(g=>g.id!==d))},[]),f=E.useCallback((d,p="info",g=3e3)=>{const h=Date.now().toString()+Math.random(),m={id:h,type:p,message:d};i(y=>[...y,m]),g>0&&setTimeout(()=>{o(h)},g)},[o]);return l.jsxs(vb.Provider,{value:{showToast:f},children:[n,l.jsx("div",{className:"fixed top-6 left-1/2 -translate-x-1/2 z-[9999] flex flex-col gap-2 w-full max-w-sm px-4 pointer-events-none",children:r.map(d=>l.jsxs("div",{className:`
              pointer-events-auto flex items-center justify-between p-4 rounded-2xl shadow-xl border backdrop-blur-md animate-in slide-in-from-top-2 fade-in duration-300
              ${d.type==="success"?"bg-neutral-900/90 text-white border-neutral-800":""}
              ${d.type==="error"?"bg-red-500/90 text-white border-red-600":""}
              ${d.type==="info"?"bg-white/90 text-neutral-900 border-neutral-200":""}
            `,children:[l.jsxs("div",{className:"flex items-center gap-3",children:[d.type==="success"&&l.jsx(on,{size:20,className:"text-green-400"}),d.type==="error"&&l.jsx(Kn,{size:20,className:"text-white"}),d.type==="info"&&l.jsx(wy,{size:20,className:"text-blue-500"}),l.jsx("span",{className:"text-sm font-bold leading-tight",children:d.message})]}),l.jsx("button",{onClick:()=>o(d.id),className:"p-1 hover:opacity-70 transition-opacity ml-4",children:l.jsx(Ut,{size:16})})]},d.id))})]})},On=()=>{const n=E.useContext(vb);if(!n)throw new Error("useToast must be used within a ToastProvider");return n},R_={locked_chest:{name:"Locked Chest",icon:""},lucky_dice:{name:"Lucky Dice",icon:""},badge_of_courage:{name:"Badge of Courage",icon:""},badge_of_wisdom:{name:"Badge of Wisdom",icon:""},badge_of_strength:{name:"Badge of Strength",icon:""},badge_of_speed:{name:"Badge of Speed",icon:""},badge_of_endurance:{name:"Badge of Endurance",icon:""},badge_of_precision:{name:"Badge of Precision",icon:""},badge_of_focus:{name:"Badge of Focus",icon:""},badge_of_logic:{name:"Badge of Logic",icon:""},badge_of_creativity:{name:"Badge of Creativity",icon:""},badge_of_eloquence:{name:"Badge of Eloquence",icon:""},badge_of_resilience:{name:"Badge of Resilience",icon:""},badge_of_harmony:{name:"Badge of Harmony",icon:""},badge_of_vitality:{name:"Badge of Vitality",icon:""},badge_of_willpower:{name:"Badge of Willpower",icon:""},badge_of_serenity:{name:"Badge of Serenity",icon:""},badge_of_insight:{name:"Badge of Insight",icon:""},badge_of_mystery:{name:"Badge of Mystery",icon:""},badge_of_adventure:{name:"Badge of Adventure",icon:""},badge_of_fortune:{name:"Badge of Fortune",icon:""},badge_of_innovation:{name:"Badge of Innovation",icon:""}},ig=[{name:"Cyber Sentinel",image:"",hp:20,dialogueIntro:"Logic is absolute. Prove yours.",dialogueWin:"Error... System... Crash...",dialogueLose:"Your logic is flawed."},{name:"Inferno Dragon",image:"",hp:25,dialogueIntro:"I breathe fire. What do you breathe?",dialogueWin:"Your spirit burns brighter...",dialogueLose:"Burn to ash!"},{name:"Abyssal Kraken",image:"",hp:20,dialogueIntro:"The depths hold many secrets.",dialogueWin:"You have navigated the abyss.",dialogueLose:"Join the sunken ones."},{name:"Spectral Wraith",image:"",hp:15,dialogueIntro:"Can you touch what isn't there?",dialogueWin:"I fade into the light...",dialogueLose:"Your soul is mine."},{name:"Ancient Mummy",image:"",hp:20,dialogueIntro:"My curse is eternal.",dialogueWin:"Rest... finally...",dialogueLose:"Join my tomb."},{name:"Alien Warlord",image:"",hp:20,dialogueIntro:"Your language is primitive.",dialogueWin:"Acknowledged. You are superior.",dialogueLose:"Earth is ours."},{name:"Primal T-Rex",image:"",hp:25,dialogueIntro:"ROOOARRR! The earth shakes beneath me!",dialogueWin:"Extinction... comes for me...",dialogueLose:"You are merely prey."},{name:"Shadow Ninja",image:"",hp:18,dialogueIntro:"Silence is the loudest scream.",dialogueWin:"Honorable defeat...",dialogueLose:"Too slow."},{name:"Vampire Lord",image:"",hp:20,dialogueIntro:"The night is young.",dialogueWin:"The sun... it burns...",dialogueLose:"Delicious."},{name:"Oni Warlord",image:"",hp:22,dialogueIntro:"Face the demon within!",dialogueWin:"Your spirit is unbreakable.",dialogueLose:"Another soul for the mask."},{name:"Syntax Serpent",image:"",hp:20,dialogueIntro:"Untangle my sentences if you can.",dialogueWin:"Your logic is impeccable.",dialogueLose:"Your structure is flawed."},{name:"Dread Scorpion",image:"",hp:25,dialogueIntro:"One sting is all it takes.",dialogueWin:"My venom... ineffective?",dialogueLose:"Paralyzed by fear."}];function hi(n){const r=[];let i=0;for(let o=0;o<n;o++){const f={id:o,type:"standard"};if((o+1)%10===0)f.type="boss",f.boss_details=ig[i%ig.length],i++;else{const d=Math.random();d<.1?f.type="treasure":d<.3&&(f.type="key_fragment")}r.push(f)}return r}hi(100);const Ea={userId:"uid",word:"w",ipaUs:"i_us",ipaUk:"i_uk",pronSim:"ps",ipaMistakes:"im",meaningVi:"m",example:"ex",collocationsArray:"col",idiomsList:"idm",note:"nt",tags:"tg",groups:"gr",createdAt:"ca",updatedAt:"ua",wordFamily:"fam",prepositions:"prp",paraphrases:"prph",register:"reg",isIdiom:"is_id",isPhrasalVerb:"is_pv",isCollocation:"is_col",isStandardPhrase:"is_phr",isIrregular:"is_irr",isExampleLocked:"is_exl",isPassive:"is_pas",quality:"q",source:"s",nextReview:"nr",interval:"iv",easeFactor:"ef",consecutiveCorrect:"cc",lastReview:"lr",lastGrade:"lg",forgotCount:"fc",lastTestResults:"ltr",lastXpEarnedTime:"lxp",gameEligibility:"ge",masteryScore:"ms",complexity:"cx",topic:"tp",icon:"ic",words:"wds",color:"clr",titleColor:"tc",titleSize:"ts",d:"ds",text:"x",isIgnored:"g",prep:"p",usage:"u",tone:"t",context:"c",anchor:"anch",sentence:"sent",nouns:"ns",verbs:"v",adjs:"j",advs:"d",standard:"std",answers:"ans",speakers:"spks",sentences:"snts",speakerName:"sn",voiceName:"vn",accentCode:"ac",sex:"sx",title:"tl",content:"ct",sentenceScores:"ss"},Zf=Object.fromEntries(Object.entries(Ea).map(([n,r])=>[r,n])),xf={name:"n",avatar:"av",lastLogin:"ll",role:"r",currentLevel:"cl",target:"t",nativeLanguage:"nl",experience:"xp",level:"lv",peakLevel:"pl",adventure:"adv",adventureLastDailyStar:"alds",unlockedChapterIds:"uc",completedSegmentIds:"cs",segmentStars:"ss",badges:"b",keys:"k",keyFragments:"kf",currentNodeIndex:"cni",energy:"e",energyShards:"es",map:"m"},og=Object.fromEntries(Object.entries(xf).map(([n,r])=>[r,n])),Sb={COLLO_CONNECT:"cc",MEANING_MATCH:"mm",IPA_SORTER:"is",SENTENCE_SCRAMBLE:"ss",PREPOSITION_POWER:"pp",WORD_TRANSFORMER:"wt",IDIOM_CONNECT:"ic",PARAPHRASE_CONTEXT:"pc"},FE=Object.fromEntries(Object.entries(Sb).map(([n,r])=>[r,n])),Eb={SPELLING:"sp",IPA_QUIZ:"iq",PREPOSITION_QUIZ:"pq",WORD_FAMILY:"wf",MEANING_QUIZ:"mq",PARAPHRASE_QUIZ:"prq",SENTENCE_SCRAMBLE:"sc",HETERONYM_QUIZ:"hq",PRONUNCIATION:"p",COLLOCATION_QUIZ:"cq",IDIOM_QUIZ:"idq",PARAPHRASE_CONTEXT_QUIZ:"pcq",WORD_FAMILY_NOUNS:"wf_n",WORD_FAMILY_VERBS:"wf_v",WORD_FAMILY_ADJS:"wf_j",WORD_FAMILY_ADVS:"wf_d"},$E=Object.fromEntries(Object.entries(Eb).map(([n,r])=>[r,n])),wb={intensified:"int",softened:"sft",synonym:"syn",academic:"acd",casual:"cas",idiomatic:"idm"},WE=Object.fromEntries(Object.entries(wb).map(([n,r])=>[r,n])),Jo={user:!0,vocabulary:!0,lesson:!0,reading:!0,writing:!0,speaking:!0,listening:!0,mimic:!0,wordBook:!0,planning:!0};function Nb(n,r){return n&&(r==="paraphrases"?n.map(i=>{const o={[Ea.word]:i.word,[Ea.tone]:wb[i.tone]||i.tone,[Ea.context]:i.context};return i.isIgnored===!0&&(o[Ea.isIgnored]=!0),o}):n.map(i=>{if(typeof i!="object"||i===null)return i;const o={};for(const f in i)if(Object.prototype.hasOwnProperty.call(i,f)){const d=i[f];if(d===!1)continue;o[Ea[f]||f]=d}return o}))}function QE(n){if(!n)return n;const r={},i=["nouns","verbs","adjs","advs"];for(const o of i)if(n[o]){const f=Ea[o]||o;r[f]=Nb(n[o],o)}return r}function jn(n){const r={};for(const i in n){if(!Object.prototype.hasOwnProperty.call(n,i)||i==="tags"||i==="v2"||i==="v3"||i==="ipa"||i==="needsPronunciationFocus")continue;const o=n[i];if(o===!1)continue;const f=Ea[i]||i;if(["collocationsArray","idiomsList","prepositions","paraphrases","words","speakers","sentences","answers"].includes(i))r[f]=Nb(o,i);else if(i==="wordFamily")r[f]=QE(o);else if(i==="lastTestResults"&&o){const d={},p=new Set(["WORD_FAMILY","WORD_FAMILY_NOUNS","WORD_FAMILY_VERBS","WORD_FAMILY_ADJS","WORD_FAMILY_ADVS","wf","wf_n","wf_v","wf_j","wf_d"]);for(const g in o)if(Object.prototype.hasOwnProperty.call(o,g)){if(p.has(g))continue;const h=g.split(":");if(h[0]==="WORD_FAMILY"&&h.length===2)continue;const m=h[0],v=[Eb[m]||m,...h.slice(1)].join(":");d[v]=o[g]}r[f]=d}else i==="gameEligibility"&&Array.isArray(o)?r[f]=o.map(d=>Sb[d]||d):r[f]=o}return r}function _b(n){const r={};for(const i in n){if(!Object.prototype.hasOwnProperty.call(n,i))continue;const o=n[i],f=xf[i]||i;if(i==="adventure"&&o){const d={};for(const p in o){if(!Object.prototype.hasOwnProperty.call(o,p))continue;const g=xf[p]||p;d[g]=o[p]}r[f]=d}else r[f]=o}return r}function Ab(n,r){return n&&(r==="paraphrases"?n.map(i=>{const o={word:i[Ea.word],tone:WE[i[Ea.tone]]||i[Ea.tone],context:i[Ea.context]};return i[Ea.isIgnored]!==void 0?o.isIgnored=i[Ea.isIgnored]:o.isIgnored=!1,o}):n.map(i=>{if(typeof i!="object"||i===null)return i;const o={};for(const f in i)if(Object.prototype.hasOwnProperty.call(i,f)){const d=Zf[f]||f;if(["nouns","verbs","adjs","advs"].includes(r)&&(d==="ipa"||d==="ipaUs"||d==="ipaUk"))continue;o[d]=i[f]}return o}))}function ZE(n){const r={};for(const i in n){const o=Zf[i]||i;r[o]=Ab(n[i],o)}return r}function Zl(n){const r={};for(const i in n){if(!Object.prototype.hasOwnProperty.call(n,i))continue;const o=n[i],f=Zf[i]||i;if(!(f==="tags"||f==="v2"||f==="v3"||f==="needsPronunciationFocus")){if(i==="i"&&!r.ipaUs){r.ipaUs=o;continue}if(f==="ipa"){r.ipaUs||(r.ipaUs=o);continue}if(["collocationsArray","idiomsList","prepositions","paraphrases","words","speakers","sentences","answers"].includes(f))r[f]=Ab(o,f);else if(f==="wordFamily"&&o)r[f]=ZE(o);else if(f==="lastTestResults"&&o){const d={};for(const p in o)if(Object.prototype.hasOwnProperty.call(o,p)){const g=p.split(":"),h=g[0],y=[$E[h]||h,...g.slice(1)].join(":");d[y]=o[p]}r[f]=d}else f==="gameEligibility"&&Array.isArray(o)?r[f]=o.map(d=>FE[d]||d):r[f]=o}}return r}function KE(n){const r={};for(const i in n){if(!Object.prototype.hasOwnProperty.call(n,i))continue;const o=n[i],f=og[i]||i;if(f==="adventure"&&o){const d={};for(const p in o){if(!Object.prototype.hasOwnProperty.call(o,p))continue;const g=og[p]||p;d[g]=o[p]}r[f]=d}else r[f]=o}return r}function XE(n){if(!n)return n;const r={...n};if(r.ipa&&!r.ipaUs&&(r.ipaUs=r.ipa),delete r.v2,delete r.v3,delete r.tags,delete r.ipa,delete r.needsPronunciationFocus,r.isIdiom===void 0&&(r.isIdiom=!1),r.isPhrasalVerb===void 0&&(r.isPhrasalVerb=!1),r.isCollocation===void 0&&(r.isCollocation=!1),r.isStandardPhrase===void 0&&(r.isStandardPhrase=!1),r.isIrregular===void 0&&(r.isIrregular=!1),r.isPassive===void 0&&(r.isPassive=!1),r.wordFamily){const i=o=>Array.isArray(o)?o.map(f=>{const d={...f};return delete d.ipa,delete d.ipaUs,delete d.ipaUk,d}):o;r.wordFamily.nouns&&(r.wordFamily.nouns=i(r.wordFamily.nouns)),r.wordFamily.verbs&&(r.wordFamily.verbs=i(r.wordFamily.verbs)),r.wordFamily.adjs&&(r.wordFamily.adjs=i(r.wordFamily.adjs)),r.wordFamily.advs&&(r.wordFamily.advs=i(r.wordFamily.advs))}return r}const Tb=async(n,r,i=Jo)=>new Promise(o=>{const f=i&&typeof i=="object"&&typeof i.vocabulary=="boolean"?i:Jo,d=new FileReader;d.onload=async p=>{var g;try{const h=JSON.parse((g=p.target)==null?void 0:g.result),m=h.ca?new Date(h.ca).getTime():void 0,y=Array.isArray(h)?h:h.vocabulary||h.vocab||[];let w=y.length>0&&(y[0].uid||!y[0].userId)?y.map(Zl):y;w=w.map(XE);const N=Array.isArray(h)?void 0:h.units||h.u,O=Array.isArray(h)?void 0:h.paraphraseLogs||h.pl,I=Array.isArray(h)?void 0:h.speakingTopics||h.st,_=Array.isArray(h)?void 0:h.speakingLogs||h.sl,j=Array.isArray(h)?void 0:h.writingTopics||h.wt,L=Array.isArray(h)?void 0:h.writingLogs||h.wl,D=Array.isArray(h)?void 0:h.irregularVerbs||h.iv,M=Array.isArray(h)?void 0:h.lessons,P=Array.isArray(h)?void 0:h.listeningItems,Y=Array.isArray(h)?void 0:h.nativeSpeakItems||h.nsi,U=Y?Y.map(Zl):void 0,G=Array.isArray(h)?void 0:h.conversationItems||h.ci,A=G?G.map(Zl):void 0,V=Array.isArray(h)?void 0:h.freeTalkItems||h.fti,F=V?V.map(Zl):void 0,$=Array.isArray(h)?void 0:h.compositions,ae=Array.isArray(h)?void 0:h.mimicQueue,me=Array.isArray(h)?void 0:h.wordBooks||h.wb,fe=me?me.map(Zl):void 0,C=Array.isArray(h)?void 0:h.readingShelves||h.rs,ne=Array.isArray(h)?void 0:h.readingBooks||h.rb,te=Array.isArray(h)?void 0:h.planningGoals||h.pg,q=Array.isArray(h)?void 0:h.user;let z;q&&(z="n"in q||"av"in q?KE(q):q);const b=z?z.id:r,T=Array.isArray(h)?void 0:h.customAdventure||h.adv,k=Array.isArray(h)?void 0:h.settings||h.sys;if(!Array.isArray(w))throw new Error("Invalid JSON: 'vocabulary' array missing.");let Q=0,ue=0,ie=0;if(f.vocabulary){const B=await cr(r),le=new Map(B.map(ee=>[ee.word.toLowerCase().trim(),ee])),J=[];for(const ee of w){if(!ee.word)continue;const ye=le.get(ee.word.toLowerCase().trim());if(ye)(ee.updatedAt||0)>(ye.updatedAt||0)?(J.push({...ye,...ee,id:ye.id,userId:b,updatedAt:Date.now()}),ue++):ie++;else{const ve=Date.now();J.push({...ee,id:ee.id||`w-${ve}-${Math.random()}`,userId:b,createdAt:ee.createdAt||ve,updatedAt:ve}),Q++}}J.length>0&&await dl(J)}f.reading&&(N&&await Vy(N.map(B=>({...B,userId:b}))),ne&&await gb(ne.map(B=>({...B,userId:b}))),C&&localStorage.setItem("reading_books_shelves",JSON.stringify(C))),(f.lesson||f.writing)&&O&&await qy(O.map(B=>({...B,userId:b}))),f.speaking&&(I&&await Fy(I.map(B=>({...B,userId:b}))),_&&await Yy(_.map(B=>({...B,userId:b}))),U&&await Qy(U.map(B=>({...B,userId:b}))),A&&await Xy(A.map(B=>({...B,userId:b}))),F&&await tb(F.map(B=>({...B,userId:b})))),f.writing&&(j&&await lb(j.map(B=>({...B,userId:b}))),L&&await ab(L.map(B=>({...B,userId:b}))),$&&await pb($.map(B=>({...B,userId:b})))),f.lesson&&(D&&await rb(D.map(B=>({...B,userId:b}))),M&&await cb(M.map(B=>({...B,userId:b})))),f.listening&&P&&await ub(P.map(B=>({...B,userId:b}))),f.mimic&&ae&&localStorage.setItem("vocab_pro_mimic_practice_queue",JSON.stringify(ae)),f.wordBook&&fe&&await mb(fe.map(B=>({...B,userId:b}))),f.planning&&te&&await bb(te.map(B=>({...B,userId:b})));let he;if(f.user&&z){const B={...z,id:b};await Za(B),he=B}T&&f.user&&(T.ch&&localStorage.setItem("vocab_pro_adventure_chapters",JSON.stringify(T.ch)),T.b&&localStorage.setItem("vocab_pro_custom_badges",JSON.stringify(T.b))),f.user&&k&&(localStorage.setItem("vocab_pro_system_config",JSON.stringify(k)),window.dispatchEvent(new Event("config-updated"))),o({type:"success",message:"Restore data successfully",detail:`Words: ${Q} new, ${ue} updated.`,updatedUser:he,backupTimestamp:m})}catch(h){o({type:"error",message:"JSON Import Error",detail:h.message})}},d.readAsText(n)}),JE=async(n,r,i=Jo)=>{const o=i&&typeof i=="object"&&typeof i.vocabulary=="boolean"?i:Jo,[f,d,p,g,h,m,y,v,w,N,O,I,_,j,L,D,M]=await Promise.all([o.vocabulary?cr():[],o.reading?uc():[],o.reading?Wf():[],o.lesson||o.writing?Df():[],o.speaking?Bf():[],o.speaking?zf():[],o.speaking?Hf():[],o.speaking?Gf():[],o.speaking?Pf():[],o.writing?qf():[],o.writing?Vf():[],o.writing?Ei():[],o.lesson?Yf():[],o.lesson?Ff():[],o.listening?$f():[],o.wordBook?wi():[],o.planning?Qf():[]]),P=localStorage.getItem("vocab_pro_mimic_practice_queue"),Y=localStorage.getItem("vocab_pro_adventure_chapters"),U=localStorage.getItem("vocab_pro_custom_badges"),G=localStorage.getItem("reading_books_shelves"),A=localStorage.getItem("vocab_pro_system_config");return{v:8,ca:new Date().toISOString(),user:_b(r),vocab:f.map(V=>jn(V)),u:d,pl:g,st:h,sl:m,wt:N,wl:O,iv:_,lessons:j,listeningItems:L,nativeSpeakItems:y.map(V=>jn(V)),conversationItems:v.map(V=>jn(V)),freeTalkItems:w.map(V=>jn(V)),compositions:I,mimicQueue:P?JSON.parse(P):[],wordBooks:D.map(V=>jn(V)),readingBooks:p,pg:M,adv:{ch:Y?JSON.parse(Y):null,b:U?JSON.parse(U):null},readingShelves:G?JSON.parse(G):null,settings:A?JSON.parse(A):null}},k_=async(n,r)=>{const i={v:8,ca:new Date().toISOString(),u:n,user:{id:r}},o=new Blob([JSON.stringify(i,null,2)],{type:"application/json"}),f=URL.createObjectURL(o),d=document.createElement("a");d.href=f,d.download=`vocab-pro-units-${new Date().toISOString().split("T")[0]}.json`,d.click(),URL.revokeObjectURL(f)},ew={initialEasy:4,initialHard:1,easyEasy:2.5,hardEasy:2,hardHard:1.3,easyHardPenalty:.5,forgotInterval:1},tw={host:"localhost",port:3e3,useCustomUrl:!1,customUrl:"",backupPath:"backups"},aw={mode:"system",preferredSystemVoice:"",appliedAccent:"US"},nw={max_learn_per_day:10,max_review_per_day:10},sw={preferredTypes:[]},lw={topic1Options:["Grammar","Vocabulary","Pronunciation"],topic2Options:{Grammar:["Tenses","Conditionals","Passive Voice","Reported Speech"],Vocabulary:["Topic: Work","Topic: Environment","Collocations","Idioms"],Pronunciation:["Vowel Sounds","Consonant Sounds","Intonation"]}},rw={autoBackupEnabled:!1,autoBackupInterval:60,lastSyncTime:null},cg={server:tw,ai:{enableGeminiApi:!0,modelForComplexTasks:"gemini-3-pro-preview",modelForBasicTasks:"gemini-3-flash-preview",modelForTts:"gemini-2.5-flash-preview-tts"},srs:ew,audio:aw,audioCoach:{activeCoach:"female",coaches:{male:{name:"Victor",avatar:"man_teacher",persona:"professional_professor",enVoice:"",enAccent:"en_US",viVoice:"",viAccent:"vi_VN"},female:{name:"Sofia",avatar:"woman_teacher",persona:"friendly_elementary",enVoice:"",enAccent:"en_US",viVoice:"",viAccent:"vi_VN"}}},dailyGoals:nw,interface:{studyBuddyLanguage:"vi",buddyVoiceEnabled:!1,studyBuddyAvatar:"woman_teacher",junkTags:["ielts","general","common"],rightClickCommandEnabled:!0},test:sw,lesson:lw,sync:rw},jb="vocab_pro_system_config";function Rd(n){return n&&typeof n=="object"&&!Array.isArray(n)}function Ib(n,r){const i={...n};if(Rd(n)&&Rd(r))for(const o of Object.keys(r))Rd(r[o])?o in n?i[o]=Ib(n[o],r[o]):Object.assign(i,{[o]:r[o]}):Object.assign(i,{[o]:r[o]});return i}const Mt=n=>n.server.useCustomUrl&&n.server.customUrl?n.server.customUrl.replace(/\/$/,""):`https://${n.server.host}:${n.server.port}`;function rt(){const n=localStorage.getItem(jb),r=n?JSON.parse(n):null;if(!r)return cg;const i=Ib(cg,r);return r.audio&&r.audio.serverPort&&r.audio.serverUrl,i}function mi(n,r=!1){try{localStorage.setItem(jb,JSON.stringify(n)),window.dispatchEvent(new Event("config-updated")),r||window.dispatchEvent(new Event("vocab-pro-trigger-backup"))}catch(i){console.error("Failed to save system config.",i)}}const iw=["i:","","u:","","","e","",":","",":","e","","s","","t","d","","","t","d","n","l","","v","w"],ow=n=>!n||n.length<2?!1:iw.some(r=>{if(r==="t"||r==="d")return n.includes(r);const i=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");let o;return r==="d"?o=new RegExp(`${i}(?!)`):r==="t"?o=new RegExp(`${i}(?!)`):r===""?o=new RegExp(`(?<!t)${i}`):r===""?o=new RegExp(`(?<!d)${i}`):r===""?o=new RegExp(`(?<![ae])${i}`):r===""?o=new RegExp(`(?<![a])${i}`):r==="e"?o=new RegExp(`${i}(?!)`):o=new RegExp(i),o.test(n)}),yn=n=>{if(n.quality!==pt.VERIFIED||!n.lastReview)return[];const r=[];return n.collocationsArray&&n.collocationsArray.some(i=>!i.isIgnored)&&r.push("COLLO_CONNECT"),n.word&&n.meaningVi&&n.meaningVi.trim().length>0&&r.push("MEANING_MATCH"),n.ipaUs&&ow(n.ipaUs)&&r.push("IPA_SORTER"),n.example&&n.example.trim().split(/\s+/).filter(Boolean).length>=5&&r.push("SENTENCE_SCRAMBLE"),n.example&&n.example.trim().split(/\s+/).filter(Boolean).length>=4&&r.push("DICTATION"),n.example&&n.prepositions&&n.prepositions.some(i=>!i.isIgnored)&&r.push("PREPOSITION_POWER"),n.paraphrases&&n.paraphrases.filter(i=>!i.isIgnored&&i.context&&i.context.trim()).length>=2&&r.push("PARAPHRASE_CONTEXT"),r};function ug(n,r){const i=.95+Math.random()*.1,o=Math.max(1,r*i),f=new Date(n);return f.setHours(0,0,0,0),f.setDate(f.getDate()+Math.round(o)),f.getTime()}function Ob(n,r){const i=rt().srs,o={...n},f=Date.now();if(r===nt.LEARNED)o.consecutiveCorrect=1,o.interval=i.initialHard,o.nextReview=ug(f,i.initialHard);else{let d=n.interval||0,p=1;const g=1440*60*1e3,h=n.lastReview||f,m=Math.max(0,(f-h)/g),y=m>d;if(r===nt.FORGOT)p=i.forgotInterval,o.consecutiveCorrect=0,o.forgotCount+=1;else if(r===nt.HARD)n.lastGrade===nt.EASY?p=Math.max(1,Math.floor(d*i.easyHardPenalty)):p=d===0?i.initialHard:Math.max(1,Math.floor(d*i.hardHard)),o.consecutiveCorrect+=1;else if(r===nt.EASY){let v=d;y&&(v=Math.max(d,m)),n.lastGrade===nt.HARD?p=d===0?i.initialEasy:Math.max(i.initialEasy,Math.floor(v*i.hardEasy)):p=d===0?i.initialEasy:Math.max(i.initialEasy,Math.floor(v*i.easyEasy)),o.consecutiveCorrect+=1}o.interval=Math.round(p),o.nextReview=ug(f,o.interval)}return o.lastGrade=r,o.lastReview=f,o.updatedAt=f,o.complexity=bn(o),o.masteryScore=wa(o),o.gameEligibility=yn(o),o}function Cb(n){const r=Date.now(),i={...n,nextReview:r,interval:0,easeFactor:2.5,consecutiveCorrect:0,forgotCount:0,lastGrade:void 0,lastReview:void 0,updatedAt:r,lastXpEarnedTime:void 0,lastTestResults:n.lastTestResults??{},masteryScore:n.masteryScore};return i.complexity=bn(i),i.gameEligibility=yn(i),i}function cw(n){const r=Date.now(),i=n-r,o=1440*60*1e3;if(i<=0)return{label:"DUE",urgency:"due"};const f=Math.ceil(i/o);return{label:`${f}d`,urgency:f<=1?"soon":"later"}}function Rb(n,r,i,o,f,d,p=!1,g=!1,h=!1,m=!1,y=!1,v="manual"){const w=Date.now(),N={id:crypto.randomUUID?crypto.randomUUID():"id-"+Date.now()+"-"+Math.random().toString(36).substr(2,9),userId:"",word:n.trim(),ipaUs:r.trim(),meaningVi:i.trim(),example:o.trim(),note:f,groups:d,isIdiom:p,isPhrasalVerb:g,isCollocation:h,isStandardPhrase:m,isPassive:y,register:"raw",quality:pt.RAW,source:v,isExampleLocked:!1,createdAt:w,updatedAt:w,nextReview:w,interval:0,easeFactor:2.5,consecutiveCorrect:0,forgotCount:0,lastTestResults:{}};return N.complexity=bn(N),N.masteryScore=wa(N),N.gameEligibility=yn(N),N}function Kf(n){const r=[];if(r.push({key:"spelling",testKeys:["SPELLING"]}),n.ipaUs&&r.push({key:"pronunciation",testKeys:["PRONUNCIATION"]}),n.ipaUs&&n.ipaUs.trim()&&n.ipaMistakes&&n.ipaMistakes.length>0&&r.push({key:"ipa_recognition",testKeys:["IPA_QUIZ"]}),n.meaningVi&&n.meaningVi.trim()&&r.push({key:"meaning",testKeys:["MEANING_QUIZ"]}),n.example&&n.example.trim()&&r.push({key:"context",testKeys:["SENTENCE_SCRAMBLE"]}),n.collocationsArray&&n.collocationsArray.filter(i=>!i.isIgnored&&i.d&&i.d.trim()).forEach(i=>{const o=i.text;r.push({key:`colloc:${o}`,testKeys:[`COLLOCATION_QUIZ:${o}`,`COLLOCATION_MULTICHOICE_QUIZ:${o}`,`COLLOCATION_CONTEXT_QUIZ:${o}`]})}),n.idiomsList&&n.idiomsList.filter(i=>!i.isIgnored&&i.d&&i.d.trim()).forEach(i=>{const o=i.text;r.push({key:`idiom:${o}`,testKeys:[`IDIOM_QUIZ:${o}`,`IDIOM_CONTEXT_QUIZ:${o}`]})}),n.prepositions&&n.prepositions.filter(i=>!i.isIgnored).forEach(i=>{const o=i.prep;r.push({key:`prep:${o}`,testKeys:[`PREPOSITION_QUIZ:${o}`]})}),n.paraphrases&&n.paraphrases.filter(i=>!i.isIgnored&&i.context&&i.context.trim()).forEach(i=>{const o=i.word;r.push({key:`para:${o}`,testKeys:[`PARAPHRASE_QUIZ:${o}`,`PARAPHRASE_CONTEXT_QUIZ:${o}`]})}),n.wordFamily){const i=["nouns","verbs","adjs","advs"],o={nouns:"n",verbs:"v",adjs:"j",advs:"d"},f=n.word.toLowerCase(),d=i.flatMap(p=>{const g=n.wordFamily[p];return Array.isArray(g)?g.filter(h=>!h.isIgnored&&h.word):[]});d.length===1&&d[0].word.toLowerCase()===f||i.forEach(p=>{const g=n.wordFamily[p];Array.isArray(g)&&g.filter(h=>!h.isIgnored&&h.word).forEach(h=>{const m=h.word,y=o[p];r.push({key:`fam:${y}:${m}`,testKeys:[`WORD_FAMILY:${y}:${m}`]})})})}return r}function bn(n){return Kf(n).length}function wa(n){const r=Kf(n);if(r.length===0)return 0;const i=n.lastTestResults||{};let o=0;const f=[],d=[];r.forEach(g=>{g.testKeys.length>0&&g.testKeys.some(m=>i[m]===!0)?(o++,f.push(g.key)):d.push({key:g.key,reason:`None of [${g.testKeys.join(", ")}] passed.`})});const p=Math.round(o/r.length*100);return Math.max(0,Math.min(100,p))}let sr=!1,Wo=!1,oa=new Map;const es=new Set,ks=new Set,fl=new Map;let gi=null,kb={reviewCounts:{total:0,due:0,new:0,learned:0,mastered:0,statusForgot:0,statusHard:0,statusEasy:0,statusLearned:0},dashboardStats:{categories:{vocab:{total:0,learned:0},idiom:{total:0,learned:0},phrasal:{total:0,learned:0},colloc:{total:0,learned:0},phrase:{total:0,learned:0},preposition:{total:0,learned:0}},refinedCount:0,rawCount:0},dayProgress:{learned:0,reviewed:0,learnedWords:[],reviewedWords:[]}};function Rt(){localStorage.setItem("vocab_pro_local_last_modified",String(Date.now()))}let Xn=null,Os=null;async function dg(){Xn&&(clearTimeout(Xn),Xn=null),Os&&(clearTimeout(Os),Os=null);try{const n=Array.from(oa.values()),r=JSON.stringify(n);if(localStorage.setItem("vocab_pro_emergency_backup",r),gi){const i=(await nr()).find(o=>o.id===gi);i&&await Qo(gi,i)}}catch(n){console.warn("[DataStore] Backup failed:",n)}}function yf(){Xn&&(clearTimeout(Xn),Xn=null),Os&&(clearTimeout(Os),Os=null),sl&&(clearTimeout(sl),sl=null)}function Tt(){if(window.isRestoring)return;const r=(rt().sync.autoBackupInterval||60)*1e3,i=Math.max(r*3,3e5);Xn&&clearTimeout(Xn);const o=Date.now()+r;window.dispatchEvent(new CustomEvent("backup-scheduled",{detail:{targetTime:o}})),Xn=window.setTimeout(dg,r),Os||(Os=window.setTimeout(()=>{dg()},i))}function hl(n){const r=Date.now(),o=Array.from(oa.values()).filter(P=>!P.isPassive&&P.userId===n),f=o.length,d=o.filter(P=>P.lastReview&&P.nextReview<=r&&P.quality!==pt.FAILED).length,p=o.filter(P=>!P.lastReview&&P.quality===pt.VERIFIED).length,g=o.filter(P=>P.interval>21).length,h=o.filter(P=>!!P.lastReview&&P.interval<=21),m=h.length,y=h.filter(P=>P.lastGrade===nt.FORGOT).length,v=h.filter(P=>P.lastGrade===nt.HARD).length,w=h.filter(P=>P.lastGrade===nt.EASY).length,N=h.filter(P=>P.lastGrade===nt.LEARNED).length,O=o.filter(P=>P.quality===pt.REFINED).length,I=o.filter(P=>P.quality===pt.RAW).length,_={vocab:{total:0,learned:0},idiom:{total:0,learned:0},phrasal:{total:0,learned:0},colloc:{total:0,learned:0},phrase:{total:0,learned:0},preposition:{total:0,learned:0}};o.forEach(P=>{const Y=!!P.lastReview,U=G=>{_[G].total++,Y&&_[G].learned++};P.isIdiom&&U("idiom"),P.isPhrasalVerb&&U("phrasal"),P.isCollocation&&U("colloc"),P.isStandardPhrase&&U("phrase"),P.prepositions&&P.prepositions.length>0&&!P.isPhrasalVerb&&U("preposition"),!P.isIdiom&&!P.isPhrasalVerb&&!P.isCollocation&&!P.isStandardPhrase&&U("vocab")});const j=new Date;j.setHours(0,0,0,0);const L=j.getTime(),D=[],M=[];o.forEach(P=>{P.lastReview&&P.lastReview>=L&&P.lastReviewSessionType!=="boss_battle"&&(P.lastGrade===nt.LEARNED?D.push(P):M.push(P))}),kb={reviewCounts:{total:f,due:d,new:p,learned:m,mastered:g,statusForgot:y,statusHard:v,statusEasy:w,statusLearned:N},dashboardStats:{categories:_,refinedCount:O,rawCount:I},dayProgress:{learned:D.length,reviewed:M.length,learnedWords:D,reviewedWords:M}}}let sl=null;function jt(){sl&&clearTimeout(sl),sl=window.setTimeout(()=>{window.dispatchEvent(new CustomEvent("datastore-updated")),sl=null},100)}let fg=0;const Wt=()=>{const n=Date.now();return n-fg<1e3?(window.dispatchEvent(new CustomEvent("datastore-cooldown")),!1):(fg=n,!0)};typeof window<"u"&&window.addEventListener("vocab-pro-trigger-backup",()=>{sr&&(jt(),Tt())});async function Lb(n){if(!(sr||Wo)){Wo=!0,gi=n;try{let r=await cr(n);if(r.length===0){const d=localStorage.getItem("vocab_pro_emergency_backup");if(d)try{const p=JSON.parse(d);Array.isArray(p)&&p.length>0&&(await dl(p),r=await cr(n))}catch(p){console.error("[DataStore] Failed to restore from emergency backup:",p)}}const[i,o]=await Promise.all([Ei(n),wi(n)]);es.clear(),i.forEach(d=>{(d.linkedWordIds||[]).forEach(p=>es.add(p))}),ks.clear(),fl.clear(),o.forEach(d=>{const p=new Set;(d.words||[]).forEach(g=>{const h=g.word.toLowerCase();ks.add(h),p.add(h)}),fl.set(d.id,p)});const f=[];for(const d of r){let p=!1;const g=d.ipa;g&&!d.ipaUs&&(d.ipaUs=g,delete d.ipa,p=!0),g&&d.ipaUs&&(delete d.ipa,p=!0),d.needsPronunciationFocus!==void 0&&(delete d.needsPronunciationFocus,p=!0);const h=bn(d),m=wa(d),y=yn(d);d.complexity!==h&&(d.complexity=h,p=!0),d.masteryScore!==m&&(d.masteryScore=m,p=!0),JSON.stringify(d.gameEligibility)!==JSON.stringify(y)&&(d.gameEligibility=y,p=!0),typeof d.register>"u"&&(d.register="raw",p=!0),p&&f.push(d)}f.length>0&&await dl(f),oa=new Map(r.map(d=>[d.id,d])),hl(n),sr=!0}catch(r){console.error("DataStore initialization failed:",r),sr=!1}finally{Wo=!1}}}async function bf(n){sr=!1,Wo=!1,oa.clear(),es.clear(),ks.clear(),fl.clear(),await Lb(n),jt()}async function Mb(){oa.clear(),es.clear(),ks.clear(),fl.clear(),sr=!1,gi=null,await ky();const n=["vocab_pro_system_config","gemini_api_keys"],r=[];for(let i=0;i<localStorage.length;i++){const o=localStorage.key(i);o&&!n.includes(o)&&r.push(o)}r.forEach(i=>localStorage.removeItem(i)),sessionStorage.clear()}async function Ub(n){try{const r=await Ei(n);es.clear(),r.forEach(i=>{(i.linkedWordIds||[]).forEach(o=>es.add(o))}),jt()}catch(r){console.error("Failed to refresh composition index",r)}}async function uw(n){try{const r=await wi(n);ks.clear(),fl.clear(),r.forEach(i=>{const o=new Set;(i.words||[]).forEach(f=>{const d=f.word.toLowerCase();ks.add(d),o.add(d)}),fl.set(i.id,o)}),jt()}catch(r){console.error("Failed to refresh word book index",r)}}function dw(n){return es.has(n)}function L_(){return es}function M_(){return ks}function Db(){return kb}function Cs(){return Array.from(oa.values())}function pg(n){return oa.get(n)}function U_(n,r,i,o="",f=["all"],d="all",p="all",g="all",h="all",m=null,y="all",v="all",w=""){const N=Array.from(oa.values()).filter(D=>D.userId===n);let O=N;if(f.includes("duplicate")){const D=new Map;N.forEach(P=>{const Y=P.word.toLowerCase().trim();D.set(Y,(D.get(Y)||0)+1)});const M=new Set;for(const[P,Y]of D.entries())Y>1&&M.add(P);O=O.filter(P=>M.has(P.word.toLowerCase().trim()))}const I=f.filter(D=>D!=="duplicate");let _=null;v==="specific"&&w&&(_=fl.get(w)||null);const j=O.filter(D=>Uy(D,o,I,d,p,g,h,m,y,es,v==="specific"?"all":v,ks)?v==="specific"&&_?_.has(D.word.toLowerCase()):!0:!1);f.includes("duplicate")?j.sort((D,M)=>D.word.localeCompare(M.word)||D.createdAt-M.createdAt):j.sort((D,M)=>M.createdAt-D.createdAt);const L=r*i;return{words:j.slice(L,L+i),totalCount:j.length}}async function vf(n,r){return Ly(n,r)}async function fw(n,r){Wt()&&(Rt(),n.complexity=bn(n),n.masteryScore=wa(n),n.gameEligibility=yn(n),await Dy(n,r),oa.set(n.id,n),hl(n.userId),Tt(),jt())}async function D_(n,r){Wt()&&(Rt(),n&&(n.complexity=bn(n),n.masteryScore=wa(n),n.gameEligibility=yn(n)),await zy(n,r),n&&oa.set(n.id,n),Tt(),hl(r.userId),jt())}async function dc(n){Wt()&&(Rt(),n.complexity=bn(n),n.masteryScore=wa(n),n.gameEligibility=yn(n),await By(n),oa.set(n.id,n),hl(n.userId),Tt(),jt())}async function pw(n){n.length!==0&&(Rt(),n.forEach(r=>{r.complexity=bn(r),r.masteryScore=wa(r),r.gameEligibility=yn(r)}),await dl(n),n.forEach(r=>oa.set(r.id,r)),n[0]&&hl(n[0].userId),Tt(),jt())}async function hw(n){const r=oa.get(n);!r||!Wt()||(Rt(),await Hy(n),oa.delete(n),hl(r.userId),Tt(),jt())}async function mw(n){if(n.length===0)return;const r=oa.get(n[0]);r&&(Rt(),await Gy(n),n.forEach(i=>oa.delete(i)),hl(r.userId),Tt(),jt())}async function z_(n){Wt()&&(Rt(),await Py(n),Tt(),jt())}async function B_(n){Wt()&&(Rt(),await db(n),await Ub(n.userId),Tt())}async function H_(n,r){Rt(),await fb(n),await Ub(r),Tt()}async function G_(n){Wt()&&(Rt(),await hb(n),await uw(n.userId),Tt())}async function P_(n){Wt()&&(Rt(),await $y(n),Tt(),jt())}async function V_(n){Wt()&&(Rt(),await Wy(n),Tt(),jt())}async function q_(n){Wt()&&(Rt(),await Zy(n),Tt(),jt())}async function Y_(n){Wt()&&(Rt(),await Ky(n),Tt(),jt())}async function F_(n){Wt()&&(Rt(),await Jy(n),Tt(),jt())}async function $_(n){Wt()&&(Rt(),await eb(n),Tt(),jt())}async function W_(n){Wt()&&(Rt(),await ib(n),Tt(),jt())}async function Q_(n){Wt()&&(Rt(),await ob(n),Tt(),jt())}async function Z_(n){Wt()&&(Rt(),await nb(n),Tt(),jt())}async function K_(n){Wt()&&(Rt(),await sb(n),Tt(),jt())}async function X_(n){Wt()&&(Rt(),await xb(n),Tt(),jt())}async function J_(n){Wt()&&(Rt(),await yb(n),Tt(),jt())}const{getUnitsContainingWord:gw,seedDatabaseIfEmpty:xw,clearVocabularyOnly:zb,bulkSavePlanningGoals:eA}=HE,yw={user:!0,vocabulary:!0,lesson:!0,reading:!0,writing:!0,speaking:!0,listening:!0,mimic:!0,wordBook:!0,planning:!0};let kd=!1;const Qo=async(n,r,i=!1)=>{if(window.isRestoring||kd)return;const o=rt();if(!o.sync.autoBackupEnabled&&!i)return;kd=!0;const f=Mt(o);try{const d=await vw(n,r),p=JSON.stringify(d),g=(new Blob([p]).size/(1024*1024)).toFixed(2),h=r.name?`&username=${encodeURIComponent(r.name)}`:"",m=await fetch(`${f}/api/backup?userId=${encodeURIComponent(n)}${h}&app=vocab`,{method:"POST",headers:{"Content-Type":"application/json"},body:p});if(!m.ok)throw new Error(`Server error: ${m.statusText}`);const y=Date.now(),v={...o};v.sync.lastSyncTime=y,mi(v,!0),localStorage.setItem("vocab_pro_local_last_modified",String(y)),window.dispatchEvent(new CustomEvent("backup-complete",{detail:{success:!0,size:g}}))}catch(d){console.warn("[Backup] Upload failed:",d),window.dispatchEvent(new CustomEvent("backup-complete",{detail:{success:!1}}))}finally{kd=!1}},Bo=async()=>{try{const n=rt(),r=Mt(n),i=await fetch(`${r}/api/backups?app=vocab`);return i.ok?(await i.json()).backups||[]:[]}catch(n){return console.warn("[Backup] Failed to fetch list:",n),[]}},Bb=async n=>{try{const r=rt(),o=`${Mt(r)}/api/backup/${encodeURIComponent(n)}?t=${Date.now()}&app=vocab`,f=await fetch(o,{method:"GET",headers:{"Cache-Control":"no-cache"},mode:"cors"});if(!f.ok)return null;const d=await f.blob(),p=new File([d],"restore.json",{type:"application/json"}),g=await Tb(p,n,yw);return g.type==="success"&&g.updatedUser?(await bf(g.updatedUser.id),g):null}catch(r){return console.error("[Backup] Restore exception:",r),null}},bw=async n=>{try{const r=rt(),i=Mt(r),o=await fetch(`${i}/api/library/lookup`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({words:n})});if(o.ok){const f=await o.json();if(Array.isArray(f.found))return f.found.map(d=>Zl(d))}return[]}catch(r){return console.warn("[Backup] Library lookup failed:",r),[]}};async function vw(n,r){const[i,o,f,d,p,g,h,m,y,v,w,N,O,I,_,j,L]=await Promise.all([cr(),uc(),Wf(),Df(),Bf(),zf(),Hf(),Gf(),Pf(),qf(),Vf(),Ei(),Yf(),Ff(),$f(),wi(),Qf()]),D=localStorage.getItem("vocab_pro_mimic_practice_queue"),M=localStorage.getItem("vocab_pro_adventure_chapters"),P=localStorage.getItem("vocab_pro_custom_badges"),Y=localStorage.getItem("reading_books_shelves"),U=localStorage.getItem("vocab_pro_system_config");return{v:8,ca:new Date().toISOString(),user:_b(r),vocab:i.map(G=>jn(G)),u:o,pl:d,st:p,sl:g,wt:v,wl:w,iv:O,lessons:I,listeningItems:_,nativeSpeakItems:h.map(G=>jn(G)),conversationItems:m.map(G=>jn(G)),freeTalkItems:y.map(G=>jn(G)),compositions:N,mimicQueue:D?JSON.parse(D):[],wordBooks:j.map(G=>jn(G)),readingBooks:f,pg:L,adv:{ch:M?JSON.parse(M):null,b:P?JSON.parse(P):null},readingShelves:Y?JSON.parse(Y):null,settings:U?JSON.parse(U):null}}const Sw=()=>{const[n,r]=E.useState(null),[i,o]=E.useState(!1),[f,d]=E.useState(!1),p=E.useCallback(async()=>{o(!1),d(!1);const y=localStorage.getItem("vocab_pro_current_user_id"),v=localStorage.getItem("vocab_pro_current_user_name"),w=localStorage.getItem("vocab_pro_auto_restore");let N=(await nr()).filter(M=>!M.name.toLowerCase().includes("book"));const O=N.length===0,I=w==="true"||O,_=v||y||"Vocab Master";if(I){window.isRestoring=!0;try{const M=await Bb(_);M&&M.type==="success"&&(M.backupTimestamp&&localStorage.setItem("vocab_pro_last_backup_timestamp",String(M.backupTimestamp)),N=(await nr()).filter(P=>!P.name.toLowerCase().includes("book")),M.updatedUser&&(localStorage.setItem("vocab_pro_current_user_id",M.updatedUser.id),localStorage.setItem("vocab_pro_current_user_name",M.updatedUser.name)))}catch{}finally{setTimeout(()=>{window.isRestoring=!1},2e3)}w&&localStorage.removeItem("vocab_pro_auto_restore")}await Uf();const j=(await nr()).filter(M=>!M.name.toLowerCase().includes("book"));let L=null;const D=localStorage.getItem("vocab_pro_current_user_id");if(j.length===1?(L=j[0],d(!0)):D&&j.length>1&&(L=j.find(M=>M.id===D)||null,L&&d(!0)),L){let M=!1;L.adventure?(L.adventure.completedSegmentIds.length===0&&(L.adventure.keys===0||L.adventure.keys===void 0)&&(L.adventure.keys=1,M=!0),L.adventure.map||(L.adventure.map=hi(100),M=!0)):(L.adventure={currentNodeIndex:0,energy:5,energyShards:0,unlockedChapterIds:ar.map(P=>P.id),completedSegmentIds:[],segmentStars:{},badges:[],keys:1,keyFragments:0,map:hi(100)},M=!0),M&&await Za(L),r(L),localStorage.setItem("vocab_pro_current_user_id",L.id),localStorage.setItem("vocab_pro_current_user_name",L.name)}o(!0)},[]);return E.useEffect(()=>{p()},[p]),{currentUser:n,isLoaded:i,handleLogin:async y=>{y.adventure.map||(y.adventure.map=hi(100),await Za(y)),r(y),localStorage.setItem("vocab_pro_current_user_id",y.id),localStorage.setItem("vocab_pro_current_user_name",y.name);const v={...y,lastLogin:Date.now()};Za(v)},handleLogout:()=>{r(null),localStorage.removeItem("vocab_pro_current_user_id")},handleUpdateUser:async y=>{await Za(y),r(y),y.id===localStorage.getItem("vocab_pro_current_user_id")&&localStorage.setItem("vocab_pro_current_user_name",y.name)},setCurrentUser:r,shouldSkipAuth:f}},Ew=({setView:n,setIsSidebarOpen:r})=>{const[i,o]=E.useState(null),[f,d]=E.useState(null),[p,g]=E.useState(null);E.useEffect(()=>{try{const y=sessionStorage.getItem("vocab_pro_active_session");if(y){const{words:v,type:w}=JSON.parse(y);Array.isArray(v)&&v.length>0&&(o(v),g(w))}}catch(y){console.error("Failed to restore session",y),sessionStorage.removeItem("vocab_pro_active_session")}},[]);const h=E.useCallback((y,v,w=null)=>{if(y.length>0){const O=[...Array.from(new Map(y.map(I=>[I.id,I])).values())].sort(()=>Math.random()-.5);o(O),g(v),d(w),sessionStorage.setItem("vocab_pro_active_session",JSON.stringify({words:O,type:v})),sessionStorage.removeItem("vocab_pro_session_progress"),sessionStorage.removeItem("vocab_pro_session_outcomes"),n("REVIEW"),r(!1)}},[n,r]),m=E.useCallback(()=>{sessionStorage.removeItem("vocab_pro_active_session"),sessionStorage.removeItem("vocab_pro_session_progress"),sessionStorage.removeItem("vocab_pro_session_outcomes"),o(null),g(null),d(null)},[]);return{sessionWords:i,setSessionWords:o,sessionType:p,sessionFocus:f,startSession:h,clearSessionState:m}},Kl=n=>n<1?0:n<=5?100+n*50:n<=10?350+(n-5)*100:850+(n-10)*200,ww=[{level:1,title:"Vocab Novice"},{level:5,title:"Word Apprentice"},{level:10,title:"Lexical Explorer"},{level:20,title:"Master Grammarian"},{level:30,title:"IELTS Wordsmith"},{level:50,title:"IELTS Luminary"}],Ld=n=>{let r="Vocab Novice";for(const i of ww)if(n>=i.level)r=i.title;else break;return r},hg=(n,r)=>{let i=0;for(let o=1;o<n;o++)i+=Kl(o);return i+=r,i},Nw=({currentUser:n,onUpdateUser:r,onSaveWordAndUser:i})=>{const[o,f]=E.useState(null),{showToast:d}=On(),p=E.useRef(n);E.useEffect(()=>{p.current=n},[n]);const g=E.useCallback(async(y,v,w,N)=>{const O=p.current;if(!O)return 0;let I=y;if(v){const F=Date.now(),$=new Date(F).toDateString();if(v.lastXpEarnedTime&&new Date(v.lastXpEarnedTime).toDateString()===$)return 0;if(N&&N.tested>0){const ae=N.correct/N.tested;I*=1+(ae-.7)}w===nt.EASY&&(I*=1.1),w===nt.FORGOT&&(I*=.1),I=Math.round(Math.max(5,I)),v.lastXpEarnedTime=F}const j=hg(O.level,O.experience)+Math.round(I);let L=1,D=j,M=Kl(L);for(;D>=M;)D-=M,L++,M=Kl(L);const P=Math.floor(D),Y=O.level,U=L>Y,G=Ld(L),A={...O,experience:P,level:L,peakLevel:Math.max(O.peakLevel||Y,L),role:G};let V=!1;if(!v&&y>0&&Math.random()<.2){const F={...A.adventure};F.keyFragments=(F.keyFragments||0)+1,d("You found a Key Fragment! ","success",2e3),F.keyFragments>=3&&(F.keyFragments-=3,F.keys=(F.keys||0)+1,V=!0),A.adventure=F}return v?await i(v,A):await r(A),V&&d(" Key Fragments assembled into a Magic Key!","success",4e3),f({amount:Math.round(I),levelUp:U,newLevel:U?L:null}),setTimeout(()=>f(null),U?5e3:2e3),U&&d(` Level Up to ${L}! New title: "${G}"`,"success",5e3),Math.round(I)},[r,i,d]),h=E.useCallback(async y=>{const v=p.current;if(!v)return;const w=hg(v.level,v.experience),N=y-w;if(N===0)return;let O=1,I=y,_=Kl(O);for(;I>=_;)I-=_,O++,_=Kl(O);const j=Math.floor(I),L=v.level,D=v.peakLevel||L,M=Math.max(D,O),P=Ld(O),Y=O>L,U=O>D,G=P!==Ld(D),A={...v,experience:j,level:O,peakLevel:M,role:P};if(U){let V=1,F=!1,$=` New Peak Level: ${O}! +1 Key Fragment`;for(G&&(V++,$=`New Title: "${P}"! +2 Key Fragments`),A.adventure.keyFragments=(A.adventure.keyFragments||0)+V;A.adventure.keyFragments>=3;)A.adventure.keyFragments-=3,A.adventure.keys=(A.adventure.keys||0)+1,F=!0;d($,"success",6e3),F&&d(" Key Fragments assembled into a Magic Key!","success",4e3)}else if(Y)d(` Level Up to ${O}!`,"success",4e3);else if(N!==0){const V=N>0?"+":"";d(`XP Recalculated: ${V}${N} XP`,"info",2e3)}await r(A),f({amount:N,levelUp:Y,newLevel:Y?O:null}),setTimeout(()=>f(null),Y?5e3:2e3)},[d,r]),m=E.useMemo(()=>n?Kl(n.level):0,[n]);return{recalculateXpAndLevelUp:h,gainExperienceAndLevelUp:g,xpGained:o,xpToNextLevel:m}};function Ni(n,r){try{const i=localStorage.getItem(n);if(i)return JSON.parse(i)}catch(i){console.error(`Error parsing JSON from localStorage for key "${n}":`,i)}return r}function Xf(n,r){try{localStorage.setItem(n,JSON.stringify(r))}catch(i){console.error(`Error saving JSON to localStorage for key "${n}":`,i)}}const _w="vocab_pro_adventure_chapters";function Aw(){return Ni(_w,ar)}const Tw=({currentUser:n,onUpdateUser:r})=>{const[i,o]=E.useState({total:0,due:0,new:0,learned:0}),[f,d]=E.useState(null),[p,g]=E.useState(null),[h,m]=E.useState(!1),[y,v]=E.useState({count:0,date:""}),{showToast:w}=On(),N=E.useCallback(async()=>{if(!n)return;await Lb(n.id);const _=Db();o(_.reviewCounts);const j=Cs().filter(U=>U.userId===n.id),D=j.filter(U=>!U.isPassive).filter(U=>U.quality===pt.VERIFIED);let M=null;if(p)M=p;else if(D.length>0){const U=new Date().toISOString().slice(0,10).replace(/-/g,""),G=n.id.length>4&&parseInt(n.id.substring(n.id.length-4),16)||1234,V=(parseInt(U)+G)%D.length;M=D[V]}d(M),m(M?dw(M.id):!1);const P=Aw(),Y=n.adventure;if(Y){const U=new Map(j.map($=>[$.word.toLowerCase(),$])),G={...Y};let A=!1,V=!1;const F=new Date().toISOString().split("T")[0];for(const $ of P)for(const ae of $.segments){if(!G.completedSegmentIds.includes(ae.id))continue;let me=G.segmentStars[ae.id]||0;const fe=(C,ne)=>{G.segmentStars[ae.id]=C,G.keyFragments=(G.keyFragments||0)+1,A=!0,w(ne,"success",5e3),!V&&n.adventureLastDailyStar!==F&&(G.keyFragments++,V=!0,w("Bonus: First star of the day! (+1 Key Fragment)","success",6e3))};me<3&&(me<1&&ae.basicWords.length>0&&ae.basicWords.every(C=>{var ne;return(((ne=U.get(C.toLowerCase()))==null?void 0:ne.consecutiveCorrect)??0)>0})&&(fe(1,` 1-Star Mastery for "${ae.title}"! (+1 Key Fragment)`),me=1),me===1&&ae.intermediateWords.length>0&&ae.intermediateWords.every(C=>{var ne;return(((ne=U.get(C.toLowerCase()))==null?void 0:ne.consecutiveCorrect)??0)>0})&&(fe(2,` 2-Star Mastery for "${ae.title}"! (+1 Key Fragment)`),me=2),me===2&&ae.advancedWords.length>0&&ae.advancedWords.every(C=>{var ne;return(((ne=U.get(C.toLowerCase()))==null?void 0:ne.consecutiveCorrect)??0)>0})&&fe(3,` Boss unlocked for "${ae.title}"! (+1 Key Fragment)`))}if(A){for(;G.keyFragments>=3;)G.keyFragments-=3,G.keys=(G.keys||0)+1,w(" Key Fragments assembled into a Magic Key!","success",4e3);const $={...n,adventure:G,adventureLastDailyStar:V?F:n.adventureLastDailyStar};r($)}}},[n,w,r,p]);E.useEffect(()=>{p&&N()},[p]),E.useEffect(()=>{n&&N();const _=()=>{w("Saving too quickly. Please wait.","info",1500)};return window.addEventListener("datastore-updated",N),window.addEventListener("datastore-cooldown",_),()=>{window.removeEventListener("datastore-updated",N),window.removeEventListener("datastore-cooldown",_)}},[n,N,w]);const O=E.useCallback(()=>{const _=new Date().toISOString().split("T")[0];let j=Ni("vocab_pro_api_usage",{count:0,date:"1970-01-01"});j.date!==_&&(j={count:0,date:_}),v(j)},[]);return E.useEffect(()=>(O(),window.addEventListener("apiUsageUpdated",O),()=>{window.removeEventListener("apiUsageUpdated",O)}),[O]),{stats:i,wotd:f,setWotd:d,apiUsage:y,refreshGlobalStats:N,isWotdComposed:h,randomizeWotd:()=>{if(!n)return;const j=Cs().filter(L=>L.userId===n.id).filter(L=>!L.isPassive&&L.quality===pt.VERIFIED);if(j.length>0){const L=j[Math.floor(Math.random()*j.length)];g(L)}}}},jw=n=>{const{currentUser:r,setView:i,refreshGlobalStats:o,sessionWords:f,setSessionWords:d,globalViewWord:p,setGlobalViewWord:g,onUpdateUser:h}=n,{showToast:m}=On(),y=()=>{var F;const U=Number(localStorage.getItem("vocab_pro_last_backup_timestamp"))||0,A=((F=rt().sync)==null?void 0:F.lastSyncTime)||0,V=Math.max(U,A);return V>0?V:null},[v,w]=E.useState(y()),N=E.useCallback(()=>{w(y())},[]),O=async U=>{if(!r)return;const G=U||{vocabulary:!0,lesson:!0,reading:!0,writing:!0,speaking:!0,listening:!0,wordBook:!0,planning:!0},A=await JE(r.id,r,G),V=new Blob([JSON.stringify(A,null,2)],{type:"application/json"}),F=URL.createObjectURL(V),$=document.createElement("a");$.href=F,$.download=`vocab-pro-backup-${new Date().toISOString().slice(0,10)}.json`,document.body.appendChild($),$.click(),document.body.removeChild($),URL.revokeObjectURL(F);const ae=Date.now();localStorage.setItem("vocab_pro_last_backup_timestamp",String(ae)),localStorage.setItem("vocab_pro_local_last_modified",String(ae)),N(),sessionStorage.removeItem("vocab_pro_just_restored"),m("Backup file downloaded.","success")},I=async(U,G,A)=>{var me;yf();const V=rt();if(G)try{const fe=JSON.parse(G),C={...V,server:fe.server};localStorage.setItem("vocab_pro_system_config",JSON.stringify(C)),window.dispatchEvent(new Event("config-updated"))}catch(fe){console.error("[Restore] Failed to merge config",fe)}sessionStorage.setItem("vocab_pro_just_restored","true");const F=A||U.backupTimestamp||Date.now();localStorage.setItem("vocab_pro_last_backup_timestamp",String(F)),localStorage.setItem("vocab_pro_local_last_modified",String(F));const $=rt();mi({...$,sync:{...$.sync,lastSyncTime:F}},!0);const ae=((me=U.updatedUser)==null?void 0:me.id)||(r==null?void 0:r.id);ae&&await bf(ae),U.updatedUser&&(localStorage.setItem("vocab_pro_current_user_id",U.updatedUser.id),localStorage.setItem("vocab_pro_current_user_name",U.updatedUser.name),await h(U.updatedUser)),m("Restore successful!","success",2e3),o(),window.dispatchEvent(new Event("vocab-pro-restore-complete")),window.dispatchEvent(new Event("vocab-pro-force-ui-reload")),setTimeout(()=>{window.isRestoring=!1},1e3)};return{lastBackupTime:v,refreshBackupTime:N,handleBackup:O,restoreFromServerAction:async(U,G)=>{const A=rt(),V=JSON.stringify(A);window.isRestoring=!0,yf();try{const F=U||(r?r.name||r.id:null);if(!F){window.isRestoring=!1;return}await Mb(),V&&(localStorage.setItem("vocab_pro_system_config",V),window.dispatchEvent(new Event("config-updated")));const $=await Bb(F);$&&$.type==="success"?await I($,V,G):(m("Server restore failed. Manual restore may be required.","error"),window.isRestoring=!1)}catch(F){console.error("[DataActions] Restore error:",F),m("Restore encountered a fatal error.","error"),window.isRestoring=!1}},triggerLocalRestore:()=>{const U=rt(),G=JSON.stringify(U),A=document.createElement("input");A.type="file",A.accept=".json",A.style.display="none",A.onchange=async V=>{var F;A.parentNode&&A.parentNode.removeChild(A);try{const $=(F=V.target.files)==null?void 0:F[0];if(!$)return;const ae={user:!0,vocabulary:!0,lesson:!0,reading:!0,writing:!0,speaking:!0,listening:!0,mimic:!0,wordBook:!0,planning:!0};window.isRestoring=!0;const me=r?r.id:"temp-restore",fe=await Tb($,me,ae);fe.type==="success"?await I(fe,G):(m(`Restore failed: ${fe.message}`,"error",5e3),window.isRestoring=!1)}catch($){console.error("Fatal error during local restore:",$),window.isRestoring=!1}},document.body.appendChild(A),A.click()},handleLibraryReset:async()=>{if(r)try{await zb(),sessionStorage.removeItem("vocab_pro_skip_seed"),await xw(!0),await bf(r.id),o(),i("DASHBOARD")}catch{window.location.reload()}},updateWord:async U=>{await dc(U),f&&d(G=>(G||[]).map(A=>A.id===U.id?U:A)),p&&p.id===U.id&&(U.masteryScore=wa(U),g(U))},deleteWord:async U=>{p&&p.id===U&&g(null),await hw(U)},bulkDeleteWords:async U=>{await mw(U)},bulkUpdateWords:async U=>{await pw(U)}}},Iw=async(n,r)=>{const i=["localhost","127.0.0.1","macm2.local","macm4.local"],d=[];for(let h=3e3;h<=3020;h++)i.forEach(m=>{d.push({host:m,port:h,url:`http://${m}:${h}`}),d.push({host:m,port:h,url:`https://${m}:${h}`})});const p=async h=>{if(r!=null&&r.aborted)return null;n&&n(h.url);const m=new AbortController,y=setTimeout(()=>m.abort(),1500),v=()=>m.abort();r==null||r.addEventListener("abort",v);try{const w=await fetch(`${h.url}/api/health`,{signal:m.signal,mode:"cors",cache:"no-cache"});return clearTimeout(y),r==null||r.removeEventListener("abort",v),w.ok?h:null}catch{return clearTimeout(y),r==null||r.removeEventListener("abort",v),null}},g=8;for(let h=0;h<d.length;h+=g){if(r!=null&&r.aborted)return null;const m=d.slice(h,h+g),v=(await Promise.all(m.map(p))).find(w=>w!==null);if(v)return{host:v.host,port:v.port}}return null},Ow=()=>{const{showToast:n}=On(),{currentUser:r,isLoaded:i,handleLogin:o,handleUpdateUser:f,setCurrentUser:d,shouldSkipAuth:p}=Sw(),[g,h]=E.useState("AUTH"),[m,y]=E.useState(!1),[v,w]=E.useState(null),[N,O]=E.useState(null),[I,_]=E.useState(!1),[j,L]=E.useState(Date.now()),[D,M]=E.useState("disconnected"),[P,Y]=E.useState(!1),[U,G]=E.useState("idle"),[A,V]=E.useState(""),F=E.useRef(!1),$=E.useRef(null),[ae,me]=E.useState(null),[fe,C]=E.useState(!1),ne=E.useRef(!1),[te,q]=E.useState(!1),[z,b]=E.useState(!1),[T,k]=E.useState(null),[Q,ue]=E.useState(null),[ie,he]=E.useState(null),B=E.useCallback(()=>he(null),[]),[le,J]=E.useState(null),ee=E.useCallback(()=>J(null),[]),[ye,ve]=E.useState(null),Ce=E.useCallback(()=>ve(null),[]),[it,be]=E.useState(null),pe=E.useCallback(()=>be(null),[]),[Pe,Qe]=E.useState(null),re=E.useCallback(()=>Qe(null),[]),[Ae,Re]=E.useState(null),Xe=E.useCallback(()=>Re(null),[]),[ke,ze]=E.useState([]),[Ge,Ze]=E.useState(!1),dt=E.useRef(!1),[ts,Cn]=E.useState(!1),[vn,Sn]=E.useState(""),{sessionWords:Dt,setSessionWords:vt,sessionType:qt,sessionFocus:It,startSession:ca,clearSessionState:Da}=Ew({setView:h,setIsSidebarOpen:y}),{stats:ml,wotd:xe,apiUsage:je,refreshGlobalStats:_e,isWotdComposed:Ke,randomizeWotd:Je}=Tw({currentUser:r,onUpdateUser:f}),Le=E.useCallback(async(Se=!1,De,Me=!1,Ie)=>{const $e=rt(),gt=De||Mt($e),St=async Bt=>{const ha=new AbortController,wn=setTimeout(()=>ha.abort(),1200),_a=()=>ha.abort();Ie==null||Ie.addEventListener("abort",_a);try{const gl=await fetch(`${Bt}/api/health`,{signal:ha.signal,mode:"cors"});return clearTimeout(wn),Ie==null||Ie.removeEventListener("abort",_a),gl.ok}catch{return clearTimeout(wn),Ie==null||Ie.removeEventListener("abort",_a),!1}};if(!Me&&(V(gt),await St(gt))){if(M("connected"),$e.sync.autoBackupEnabled||mi({...$e,sync:{...$e.sync,autoBackupEnabled:!0}},!0),De){const ha={...$e,server:{...$e.server,useCustomUrl:!0,customUrl:De},sync:{...$e.sync,autoBackupEnabled:!0}};mi(ha,!0),n(`Connected to ${De}`,"success")}return!0}if(!De&&Se||Me){if(Ie!=null&&Ie.aborted)return!1;const Bt=await Iw(ha=>{V(ha)},Ie);if(Bt){const ha={...$e,server:{...$e.server,host:Bt.host,port:Bt.port,useCustomUrl:!1},sync:{...$e.sync,autoBackupEnabled:!0}};return mi(ha,!0),M("connected"),n(`Server found at ${Bt.host}:${Bt.port}`,"success"),!0}}return Ie!=null&&Ie.aborted||M("disconnected"),!1},[n]),Nt=async Se=>{$.current&&$.current.abort(),$.current=new AbortController;const De=$.current.signal;G("scanning");try{await new Promise((Ie,$e)=>{const gt=setTimeout(Ie,800);De.addEventListener("abort",()=>{clearTimeout(gt),$e(new Error("aborted"))})});const Me=await Le(!Se,Se,!Se,De);return De.aborted?!1:Me?(G("success"),setTimeout(()=>Y(!1),1e3),!0):(G("failed"),!1)}catch(Me){return Me.message==="aborted"||G("failed"),!1}},ht=()=>{$.current&&($.current.abort(),$.current=null),G("failed")},mt=E.useCallback(()=>r&&r.id===pi&&r.name==="Vocab Master",[r]);E.useEffect(()=>{if(i&&!F.current){F.current=!0;const Se=mt();Se&&(Y(!0),G("scanning")),Le(!0).then(Me=>{Me?(M("connected"),Se&&(G("success"),setTimeout(()=>Y(!1),800))):Se&&G("failed")});const De=setInterval(()=>Le(!1),3e4);return window.addEventListener("config-updated",()=>Le(!1)),()=>{clearInterval(De),window.removeEventListener("config-updated",()=>Le(!1))}}},[i,Le,mt]),E.useEffect(()=>{const De=setTimeout(async()=>{if(!(!i||D!=="connected"||!r||ne.current||P||Ge)){ne.current=!0;try{const Me=await Bo(),Ie=r.name||r.id,$e=Me.find(gt=>gt.id===Ie||gt.name===Ie);if($e){const gt=new Date($e.date).getTime(),St=Number(localStorage.getItem("vocab_pro_local_last_modified")||0),Bt=2e3;gt>St+Bt?me({isOpen:!0,type:"restore",localDate:St===0?"Never":new Date(St).toLocaleString(),serverDate:new Date(gt).toLocaleString(),serverId:$e.id,serverMtime:gt}):St>gt+Bt&&me({isOpen:!0,type:"push",localDate:new Date(St).toLocaleString(),serverDate:new Date(gt).toLocaleString(),serverId:$e.id,serverMtime:gt})}}catch(Me){console.warn("[Sync] Initial check failed:",Me)}}},2e3);return()=>clearTimeout(De)},[i,D,r==null?void 0:r.id,P,Ge]),E.useEffect(()=>{const De=setTimeout(async()=>{if(dt.current)return;const Me=sessionStorage.getItem("vocab_pro_suppress_auto_restore")==="true";if(i&&D==="connected"&&mt()&&!P&&!Me){dt.current=!0;try{const Ie=await Bo();Ie&&Ie.length>0&&(ze(Ie),Ze(!0))}catch(Ie){console.warn("[AutoRestore] Failed to fetch backups on init:",Ie)}}},1e3);return()=>clearTimeout(De)},[i,D,mt,P]);const{lastBackupTime:sa,refreshBackupTime:Xt,handleBackup:Xa,restoreFromServerAction:Ja,triggerLocalRestore:en,handleLibraryReset:tn,deleteWord:an,bulkDeleteWords:Ls,bulkUpdateWords:Ms}=jw({currentUser:r,setView:h,refreshGlobalStats:_e,sessionWords:Dt,setSessionWords:vt,globalViewWord:v,setGlobalViewWord:w,onUpdateUser:f}),za=async Se=>{me(null),Ze(!1),C(!0);try{const Me=(await Bo()).find($e=>$e.id===Se),Ie=Me?new Date(Me.date).getTime():void 0;await Ja(Se,Ie),C(!1)}catch{C(!1),n("Restore failed.","error")}},Yt=()=>{Ze(!1),en()},la=async()=>{sessionStorage.setItem("vocab_pro_suppress_auto_restore","true"),Ze(!1),Cn(!0),Sn("Wiping all data and preparing new profile...");try{await Mb();const Se=await Uf(!0);Se&&(o(Se),h("SETTINGS"),n("Welcome! Your data has been wiped. Please set up your new profile.","success"))}catch{n("Failed to prepare new profile.","error")}finally{Cn(!1)}},as=async()=>{if(!await Le(!0)){Y(!0),G("failed");return}if(sessionStorage.removeItem("vocab_pro_suppress_auto_restore"),dt.current=!1,r&&r.id!==pi){n("Syncing current profile...","info");try{await Qo(r.id,r,!0)}catch{n("Backup failed, proceeding...","error")}}try{await zb();const De=await Bo();ze(De),Ze(!0)}catch{n("Failed to fetch user list from server.","error")}},ur=async()=>{if(r){C(!0);try{await Qo(r.id,r,!0),n("Cloud backup updated!","success"),me(null)}catch{n("Push failed.","error")}finally{C(!1)}}},yc=async()=>{if(ae){C(!0);try{await Ja(ae.serverId,ae.serverMtime),me(null),C(!1)}catch{n("Restore failed.","error"),C(!1)}}};E.useEffect(()=>{const Se=()=>{window.isRestoring||q(!0)},De=()=>{q(!1),k(null)},Me=$e=>{const gt=$e;gt.detail&&gt.detail.targetTime&&k(gt.detail.targetTime)},Ie=$e=>{const gt=$e;gt.detail&&(gt.detail.success?(q(!1),k(null),Xt(),n("Cloud sync complete!","success",2e3)):q(!0))};return window.addEventListener("datastore-updated",Se),window.addEventListener("vocab-pro-restore-complete",De),window.addEventListener("backup-scheduled",Me),window.addEventListener("backup-complete",Ie),()=>{window.removeEventListener("datastore-updated",Se),window.removeEventListener("vocab-pro-restore-complete",De),window.removeEventListener("backup-scheduled",Me),window.removeEventListener("backup-complete",Ie)}},[Xt,n]);const bc=async()=>{if(!r)return;const Se=Db(),{learned:De,reviewed:Me}=Se.dayProgress,Ie=new Date().toISOString().split("T")[0],$e=Math.floor(De/3),gt=Math.floor(Me/10),St=$e+gt,Bt=r.adventure,ha=Bt.lastDailyEnergyAwardDate||"";let wn=Bt.dailyEnergyAwarded||0;if(ha!==Ie&&(wn=0),St>wn){const _a=St-wn,gl={...r,adventure:{...Bt,energy:(Bt.energy||0)+_a,dailyEnergyAwarded:St,lastDailyEnergyAwardDate:Ie}};await f(gl),n(`Daily Progress: +${_a} Energy `,"success",2e3)}};E.useEffect(()=>{i&&r&&bc()},[ml,i,r==null?void 0:r.id]);const Ai=async Se=>{const De=pg(Se.id);(!De||De.masteryScore!==Se.masteryScore)&&L(Date.now()),await dc(Se),Dt&&vt(Me=>(Me||[]).map(Ie=>Ie.id===Se.id?Se:Ie)),v&&v.id===Se.id&&w(Se)},ns=async()=>{r&&(yf(),q(!1),k(null),await Qo(r.id,r,!0))},dr=async()=>{D==="connected"&&r?await ns():await Xa()},ss=async Se=>{await Ms(Se)},ls=async(Se,De)=>{await fw(Se,De),d(De);const Me=pg(Se.id);(!Me||Me.masteryScore!==Se.masteryScore)&&L(Date.now()),Dt&&vt(Ie=>(Ie||[]).map($e=>$e.id===Se.id?Se:$e)),v&&v.id===Se.id&&w(Se)},{gainExperienceAndLevelUp:Us,recalculateXpAndLevelUp:rs,xpGained:zt,xpToNextLevel:Ti}=Nw({currentUser:r,onUpdateUser:f,onSaveWordAndUser:ls});E.useEffect(()=>{i&&(p&&r?h("DASHBOARD"):r||h("AUTH"))},[i,p,r==null?void 0:r.id]);const ji=async Se=>{Se.id!==pi&&sessionStorage.removeItem("vocab_pro_suppress_auto_restore"),Se.adventure.map||(Se.adventure.map=hi(100),await Za(Se)),d(Se),localStorage.setItem("vocab_pro_current_user_id",Se.id),localStorage.setItem("vocab_pro_current_user_name",Se.name),await Za({...Se,lastLogin:Date.now()})},Rn=()=>{d(null),localStorage.removeItem("vocab_pro_current_user_id")},nn=E.useCallback(()=>{Da(),h("DASHBOARD"),_e()},[Da,_e]),vc=E.useCallback(()=>{if(!Dt||Dt.length===0||!qt){nn();return}const Se=Dt.map(Me=>Me.id),De=Cs().filter(Me=>Se.includes(Me.id));De.length>0?ca(De,qt,It):nn()},[Dt,qt,It,ca,nn]),fr=E.useCallback(async()=>{if(!r)return;const Se=Cs(),De=Date.now(),Me=Se.filter(Ie=>!Ie.isPassive&&Ie.lastReview&&Ie.nextReview<=De&&Ie.quality!=="FAILED").sort((Ie,$e)=>Ie.nextReview-$e.nextReview).slice(0,30);if(Me.length===0){n("No words due for review!","success");return}ca(Me,"due")},[r,ca,n]),pr=E.useCallback(async()=>{if(!r)return;const De=Cs().filter(Me=>!Me.isPassive&&!Me.lastReview&&Me.quality==="VERIFIED").sort((Me,Ie)=>Me.createdAt-Ie.createdAt).slice(0,20);if(De.length===0){n("No new words to learn!","success");return}ca(De,"new")},[r,ca,n]);return{view:g,setView:h,currentUser:r,isLoaded:i,isResetting:ts,resetStep:vn,isSidebarOpen:m,setIsSidebarOpen:y,handleLogin:ji,handleLogout:Rn,handleUpdateUser:f,sessionWords:Dt,sessionFocus:It,sessionType:qt,startSession:ca,handleSessionComplete:nn,stats:ml,wotd:xe,refreshGlobalStats:_e,isWotdComposed:Ke,randomizeWotd:Je,globalViewWord:v,setGlobalViewWord:w,lastBackupTime:sa,handleBackup:dr,triggerLocalBackup:Xa,triggerServerBackup:ns,restoreFromServerAction:za,triggerLocalRestore:en,handleLibraryReset:tn,initialListFilter:N,setInitialListFilter:O,forceExpandAdd:I,setForceExpandAdd:_,apiUsage:je,updateWord:Ai,deleteWord:an,bulkDeleteWords:Ls,bulkUpdateWords:ss,handleNavigateToList:Se=>{O(Se),h("BROWSE")},openAddWordLibrary:()=>{h("BROWSE"),_(!0)},clearSessionState:Da,handleRetrySession:vc,gainExperienceAndLevelUp:Us,recalculateXpAndLevelUp:rs,xpGained:zt,xpToNextLevel:Ti,startDueReviewSession:fr,startNewLearnSession:pr,lastMasteryScoreUpdateTimestamp:j,writingContextWord:Q,handleComposeWithWord:Se=>{ue(Se),h("WRITING")},consumeWritingContext:()=>ue(null),targetLessonId:ie,setTargetLessonId:he,consumeTargetLessonId:B,targetLessonTag:le,consumeTargetLessonTag:ee,targetLessonType:ye,consumeTargetLessonType:Ce,targetCourseId:it,consumeTargetCourseId:pe,targetGameMode:Pe,consumeTargetGameMode:re,planningAction:Ae,setPlanningAction:Re,consumePlanningAction:Xe,serverStatus:D,hasUnsavedChanges:te,hasWritingUnsavedChanges:z,setHasWritingUnsavedChanges:b,nextAutoBackupTime:T,isAutoRestoreOpen:Ge,setIsAutoRestoreOpen:Ze,autoRestoreCandidates:ke,handleNewUserSetup:la,handleLocalRestoreSetup:Yt,handleSwitchUser:as,isConnectionModalOpen:P,setIsConnectionModalOpen:Y,connectionScanStatus:U,scanningUrl:A,handleScanAndConnect:Nt,handleStopScan:ht,syncPrompt:ae,setSyncPrompt:me,isSyncing:fe,handleSyncPush:ur,handleSyncRestore:yc,handleSpecialAction:(Se,De)=>{switch(Se){case"REVIEW":fr();break;case"BROWSE":pr();break;case"LESSON":De&&De.lessonId&&he(De.lessonId),h("LESSON");break;case"LESSON_ONLY":ve("ESSAY"),h("LESSON");break;case"LESSON_GRAMMAR":be("grammar"),h("COURSE");break;case"LESSON_SCALE":ve("INTENSITY"),h("LESSON");break;case"LESSON_DIFF":ve("COMPARISON"),h("LESSON");break;case"IRREGULAR_VERBS":h("IRREGULAR_VERBS");break;case"MIMIC":h("MIMIC");break;case"PRONUNCIATION_ROADMAP":be("pronunciation_roadmap"),h("COURSE");break;case"PLAN_AI":Re("AI"),h("PLANNING");break;case"PLAN_IMPORT":Re("IMPORT"),h("PLANNING");break;case"COLLO_CONNECT":case"DICTATION":case"SENTENCE_SCRAMBLE":case"MEANING_MATCH":case"IPA_SORTER":case"PREPOSITION_POWER":case"WORD_TRANSFORMER":case"PARAPHRASE_CONTEXT":case"IDIOM_CONNECT":case"WORD_SCATTER":case"NATURAL_EXPRESSION":case"INTENSITY_SCALE":case"COMPARISON_LAB":case"ADVENTURE":sessionStorage.setItem("dashboard_active_tab","PRACTICE"),Qe(Se),h("DISCOVER");break;default:h(Se)}}}},Cw="modulepreload",Rw=function(n){return"/ielts-pro/"+n},mg={},pa=function(r,i,o){let f=Promise.resolve();if(i&&i.length>0){let p=function(m){return Promise.all(m.map(y=>Promise.resolve(y).then(v=>({status:"fulfilled",value:v}),v=>({status:"rejected",reason:v}))))};document.getElementsByTagName("link");const g=document.querySelector("meta[property=csp-nonce]"),h=(g==null?void 0:g.nonce)||(g==null?void 0:g.getAttribute("nonce"));f=p(i.map(m=>{if(m=Rw(m),m in mg)return;mg[m]=!0;const y=m.endsWith(".css"),v=y?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${m}"]${v}`))return;const w=document.createElement("link");if(w.rel=y?"stylesheet":Cw,y||(w.as="script"),w.crossOrigin="",w.href=m,h&&w.setAttribute("nonce",h),document.head.appendChild(w),y)return new Promise((N,O)=>{w.addEventListener("load",N),w.addEventListener("error",()=>O(new Error(`Unable to preload CSS for ${m}`)))})}))}function d(p){const g=new Event("vite:preloadError",{cancelable:!0});if(g.payload=p,window.dispatchEvent(g),!g.defaultPrevented)throw p}return f.then(p=>{for(const g of p||[])g.status==="rejected"&&d(g.reason);return r().catch(d)})};function kw(n,r="Vietnamese"){return`You are an expert IELTS coach, examiner, and native English speaker.
    
    Analyze this list of vocabulary items: [${n.map(o=>`"${o}"`).join(", ")}].

    IMPORTANT RULES FOR HEADWORD (hw) IDENTIFICATION:
    1. FOR PHRASES/IDIOMS/EXPRESSIONS: If the input is a multi-word unit (e.g., "cut the road", "break the ice", "get over"), the headword (hw) MUST be the EXACT phrase provided. DO NOT reduce it to a single word.
    2. FOR SINGLE WORDS: If the input is a single inflected word, identify its base form and ensure it is in SINGULAR form (e.g., "running" -> "run", "cities" -> "city", "problems" -> "problem").
    3. All details (meaning, IPA, examples) MUST correspond to the identified headword (the whole phrase or the base word).
    4. If input has multiple distinct meanings as a phrase vs a single word, prioritize the meaning of the input as provided.

    LANGUAGE RULES:
    - All content in English, except "m" (Meaning) which must be in ${r}.

    FIELD GENERATION RULES:
    - If the headword (hw) is a PHRASE, PHRASAL VERB, or IDIOM (e.g., "break the ice"):
      - DO NOT generate 'fam' (word family). Return an empty object {} or null.
      - DO NOT generate 'col' (collocations). Return an empty array [].
    - Do NOT generate 'para' (paraphrase) for orthographic variants (e.g., space vs no space, hyphen vs no hyphen).

    RESPONSE OPTIMIZATION:
    - Omit "og" if it is identical to "hw".
    - Omit "ipa_uk" if "pron_sim" is "same".

    FIELD DEFINITIONS:
    - og: The EXACT string from the input list. (Include ONLY if different from "hw").
    - hw: The headword (Full phrase for expressions; base form for single words).
    - ipa_us: Primary IPA transcription (General American).
    - ipa_uk: Received Pronunciation (UK) IPA. (Omit if "pron_sim" is "same").
    - pron_sim: Similarity between US and UK pronunciation. MUST be: "same", "near", or "different".
    - ipa_m: Array of 2-4 common mispronunciation transcriptions (to test the user).
    - m: Definition of the headword in ${r}.
    - reg: Register. MUST be one of: "academic", "casual", or "neutral".
    - ex: A high-quality example sentence using the headword.
    - col: Array of 3-5 collocations. ONLY for single-word headwords. Items: {"text": "phrase", "d": "minimal descriptive cue for recall (5-10 words)"}.
    - idm: Array of 1-3 common idioms containing the headword (only if hw is a single word). Items: {"text": "phrase", "d": "descriptive cue"}.
    - prep: Array of dependent prepositions. If the headword does NOT take a fixed preposition, return an empty array []. Format: [{"p": "preposition", "c": "short usage example"}].
    - para: Controlled paraphrase system (max 5 items total). ONLY generate categories if a natural equivalent exists. Try to force all tone types but avoid unnatural versions.        - Each item MUST be an object: {"w": "word_or_phrase", "t": "tone_type", "c": "recall cue"}.
        - 't' (tone) MUST be one of: "academic", "casual", "synonym" (no hypernyms or hyponyms)
        - 'c' (context) = a short (2-5 words) situational recall cue (e.g., "job interview", "arguing with friend").
    - fam: Word family. ONLY for single-word headwords. 'n'=nouns, 'v'=verbs, 'j'=adjectives, 'adv'=adverbs. Format: [{"w": "word"}].
    - type: The grammatical classification. MUST be one of: "idiom", "phrasal_verb", "collocation", "phrase", "vocabulary", "irregular_verb".
    - is_pas: Boolean. True if the word is "Passive" (vulgar, slang, or should be archived).

    Response Example (Strict JSON Array):
    [{
      "hw": "unhappy",
      "ipa_us": "/nhpi/",
      "pron_sim": "same",
      "ipa_m": ["/nhepi/"],
      "m": "khng vui, bun",
      "reg": "neutral",
      "ex": "She was unhappy with the results of the experiment.",
      "col": [{"text": "deeply unhappy", "d": "extreme sadness about a life event"}],
      "idm": [],
      "prep": [{"p": "with", "c": "unhappy with the service"}], 
      "para": [
        { "w": "dissatisfied", "t": "academic", "c": "complaining about product quality" },
        { "w": "miserable", "t": "intensified", "c": "sitting alone in the rain" }
      ],
      "type": "vocabulary",
      "is_pas": false,
      "fam": { "n": [{"w": "unhappiness"}], "adv": [{"w": "unhappily"}] }
    }]`}function Lw(n){return`You are an expert English linguist.
    
    TASK: Provide the principal parts (past simple and past participle) for the following list of irregular verbs: [${n.map(i=>`"${i}"`).join(", ")}].

    RULES:
    1.  For each verb, provide its V1 (base form), V2 (past simple), and V3 (past participle).
    2.  If a verb has multiple common forms (e.g., "dreamt" / "dreamed"), provide the most common one first.
    3.  If a word is not an irregular verb, return its regular "-ed" forms.
    
    Return your analysis as a strict JSON array of objects. Each object must contain "v1", "v2", and "v3".

    Response Example (Strict JSON Array):
    [
      {
        "v1": "go",
        "v2": "went",
        "v3": "gone"
      },
      {
        "v1": "begin",
        "v2": "began",
        "v3": "begun"
      },
      {
        "v1": "dream",
        "v2": "dreamt",
        "v3": "dreamt"
      }
    ]`}function Mw(n,r){var o,f,d;const i={word:n.word,meaning:n.meaningVi,family:n.wordFamily,collocations:(o=n.collocationsArray)==null?void 0:o.map(p=>p.text),idioms:(f=n.idiomsList)==null?void 0:f.map(p=>p.text),paraphrases:(d=n.paraphrases)==null?void 0:d.map(p=>({word:p.word,tone:p.tone,context:p.context}))};return`You are an expert IELTS coach and English teacher. Your task is to provide learning recommendations for a vocabulary item based on a user's profile.

    USER PROFILE:
    - Role: ${r.role||"N/A"}
    - Current Level: ${r.currentLevel||"N/A"}
    - Target: ${r.target||"N/A"}

    VOCABULARY ITEM TO ANALYZE:
    ${JSON.stringify(i,null,2)}

    INSTRUCTIONS:
    1.  Analyze all components of the vocabulary item (word family, collocations, idioms, paraphrases).
    2.  Based on the USER PROFILE, decide whether each component is essential to learn ('learn') or can be ignored for now ('ignore').
    3.  Provide a concise, sharp 'reason' for each decision. Your reasoning is the most important part.
    4.  Be strict. For an IELTS learner, prioritize academic, high-impact, and flexible vocabulary. For a beginner, prioritize core meanings and common usage.

    EXAMPLE REASONING:
    - For an IELTS goal, if a paraphrase is "the process of a liquid turning into a gas," you should suggest 'ignore' and reason: "This is too descriptive and wordy for IELTS. A single academic term like 'evaporation' is more effective and scores higher for lexical resource."
    - For a primary school student goal, you might suggest 'learn' for the same phrase, reasoning: "This simple explanation is great for building foundational understanding before learning the scientific term."
    - For a common idiom, you might suggest 'learn' for an IELTS student: "Essential for demonstrating natural, native-like language in Speaking Part 1."

    Return a single, strict JSON object. Do not include any text outside the JSON block.

    STRICT JSON OUTPUT FORMAT:
    {
      "overall_summary": "string (A one-sentence summary of the learning strategy for this word, based on the user's goal.)",
      "wordFamily": [
        { "item": "string (the word form)", "suggestion": "learn" | "ignore", "reason": "string (your concise explanation)" }
      ],
      "collocations": [
        { "item": "string (the collocation)", "suggestion": "learn" | "ignore", "reason": "string" }
      ],
      "idioms": [
        { "item": "string (the idiom)", "suggestion": "learn" | "ignore", "reason": "string" }
      ],
      "paraphrases": [
        { "item": "string (the paraphrase word)", "suggestion": "learn" | "ignore", "reason": "string" }
      ]
    }
    `}function Uw(n,r,i){var d,p,g,h;const o=r.language||"English",f={word:n.word,meaning:n.meaningVi,family:n.wordFamily,collocations:(d=n.collocationsArray)==null?void 0:d.filter(m=>!m.isIgnored).map(m=>({text:m.text,hint:m.d})),idioms:(p=n.idiomsList)==null?void 0:p.filter(m=>!m.isIgnored).map(m=>({text:m.text,hint:m.d})),paraphrases:(g=n.paraphrases)==null?void 0:g.filter(m=>!m.isIgnored).map(m=>({word:m.word,tone:m.tone,context:m.context})),prepositions:(h=n.prepositions)==null?void 0:h.filter(m=>!m.isIgnored)};return`You are an expert IELTS coach${i?` named '${i}'`:""}. 
  
  TASK: Generate a highly structured "Usage Guide" for the word: "${n.word}".
  
  DATA: ${JSON.stringify(f)}

  INSTRUCTIONS:
  1. Create 5 distinct sections, each containing a Markdown Table:
     - **Prepositions**
     - **Word Family**
     - **Collocations**
     - **Variations (Paraphrases)**
     - **Idioms**
  
  2. Each table MUST have exactly these 3 columns:
     - **Word**: The specific form, collocation, or phrase.
     - **Context**: A brief explanation of *when* or *how* to use it (nuance, tone, or grammatical rule).
     - **Examples**: EXACTLY one high-quality, natural example sentence using that specific item.

  3. CONSTRAINTS:
     - Use ONLY Markdown tables for the usage data.
     - For line breaks WITHIN a table cell, use \`<br>\`. Do NOT use \`\\n\` or \`\\\\n\` inside table rows.
     - You MUST provide at least 1 example for every single item listed in the tables.
     - Keep the "Context" column concise (max 15 words).
     - If no data exists for a category (e.g., no idioms), you may skip that section or note it as "No common idioms".
     - All instructional text and headers should be in ${o}. All material/examples in English.

  Return a JSON object:
  {
    "content": "string (Markdown formatted with headers and tables, use \\n for newlines)"
  }`}function Dw(n,r,i){var d,p,g;const o=r.language||"English",f={word:n.word,meaning:n.meaningVi,collocations:(d=n.collocationsArray)==null?void 0:d.filter(h=>!h.isIgnored).map(h=>({text:h.text,hint:h.d})),idioms:(p=n.idiomsList)==null?void 0:p.filter(h=>!h.isIgnored).map(h=>({text:h.text,hint:h.d})),paraphrases:(g=n.paraphrases)==null?void 0:g.filter(h=>!h.isIgnored).map(h=>({word:h.word,tone:h.tone,context:h.context}))};return`You are an expert IELTS examiner${i?` working with coach '${i}'`:""}. Design an interactive PRACTICE TEST for: "${n.word}".
    
    DATA: ${JSON.stringify(f)}

    AVAILABLE TAGS:
    - [Select: Correct | Wrong 1 | Wrong 2] (Dropdown)
    - [Multi: Correct | Option 2 | Option 3] (Multiple Choice Buttons)
    - [Quiz: Answer] (Fill-in)

    TASK:
    Generate 5-8 questions covering:
    1. Nuanced collocation choice.
    2. Meaning selection.
    3. Sentence completion with correct word forms.
    4. Synonym selection for specific contexts.

    LANGUAGE: Instructions in ${o}, questions in English.

    Return a JSON object:
    {
      "content": "string (Markdown with interactive tags)"
    }`}const zw=()=>`Transcribe the text contained in this image exactly as it appears. 
    - Maintain the original language.
    - Do not add introductory or concluding remarks. 
    - If there is no text, return "No text detected."`,Bw=n=>{if(!n)return null;const r=_=>Array.isArray(_)?_.map(j=>typeof j=="string"?{word:j}:j&&(j.w||j.word)?{word:j.w||j.word,isIgnored:j.g??j.isIgnored}:null).filter(j=>j!==null&&!!j.word):[],i=_=>(_==null?void 0:_.map(j=>({word:j.w||j.word,tone:j.t||j.tone,context:j.c||j.context,isIgnored:j.g??j.isIgnored??!1})))||[],o=_=>Array.isArray(_)?_.map(j=>typeof j=="string"?{prep:j.trim(),usage:""}:{prep:(j.p||j.prep||"").trim(),usage:(j.c||j.usage||"").trim(),isIgnored:j.g??j.isIgnored??!1}).filter(j=>j.prep.length>0):[],f=_=>Array.isArray(_)?_.map(L=>{if(typeof L=="string")return{text:L,isIgnored:!1};const D=L.text||L.x;if(D){const M=L.d||L.ds;return{text:D,d:M,isIgnored:L.g??L.isIgnored??!1}}return null}).filter(L=>L!==null&&!!L.text):void 0;let d;Array.isArray(n.prepositionsArray)?d=n.prepositionsArray:Array.isArray(n.prep)&&(d=o(n.prep));const p=n.col||n.collocations;let g,h;Array.isArray(p)?(g=f(p),g&&(h=g.map(_=>_.text).join(`
`))):typeof p=="string"&&(h=p);const m=n.idm||n.idioms;let y;Array.isArray(m)&&(y=f(m));const v=n.hw||n.headword,w=n.pron_sim||n.pronSim||n.ps,N=n.ipa_us||n.ipaUs||n.ipa||n.i,O=n.type,I={isIdiom:O==="idiom",isPhrasalVerb:O==="phrasal_verb",isCollocation:O==="collocation",isStandardPhrase:O==="phrase",isIrregular:O==="irregular_verb"};return{original:n.og||n.original||v,headword:v,ipaUs:N,ipaUk:n.ipa_uk||n.ipaUk||(w==="same"?N:void 0),pronSim:w,ipaMistakes:n.ipa_m||n.ipaMistakes||n.im,meaningVi:n.m||n.meaningVi,register:n.reg||n.register,example:n.ex||n.example,collocations:h,collocationsArray:g,idioms:y?y.map(_=>_.text).join(`
`):void 0,idiomsList:y,prepositionString:typeof n.prep=="string"?n.prep:void 0,prepositionsArray:d,isIdiom:O?I.isIdiom:n.is_id??n.isIdiom,isPhrasalVerb:O?I.isPhrasalVerb:n.is_pv??n.isPhrasalVerb,isCollocation:O?I.isCollocation:n.is_col??n.isCollocation,isStandardPhrase:O?I.isStandardPhrase:n.is_phr??n.isStandardPhrase,isIrregular:O?I.isIrregular:n.is_irr??n.isIrregular,isPassive:n.is_pas??n.isPassive,paraphrases:i(n.para||n.paraphrases),wordFamily:n.fam?{nouns:r(n.fam.n||n.fam.ns||[]),verbs:r(n.fam.v||[]),adjs:r(n.fam.j||[]),advs:r(n.fam.adv||n.fam.d||[])}:n.wordFamily||void 0}},Hw=(n,r)=>{const i=Bw(r);if(!i)return n;const o={...n};o.ipaUs=i.ipaUs??n.ipaUs,o.ipaUk=i.ipaUk??n.ipaUk,o.pronSim=i.pronSim??n.pronSim,o.ipaMistakes=i.ipaMistakes??n.ipaMistakes,o.meaningVi=i.meaningVi??n.meaningVi,o.register=i.register??n.register;let d=[...n.collocationsArray||(n.collocations?n.collocations.split(`
`).map(m=>({text:m.trim(),isIgnored:!1})).filter(m=>m.text):[])];i.collocationsArray&&i.collocationsArray.forEach(m=>{const y=d.findIndex(v=>v.text.toLowerCase()===m.text.toLowerCase());y!==-1?(m.d&&!d[y].d&&(d[y].d=m.d),m.isIgnored&&(d[y].isIgnored=!0)):d.push({text:m.text,d:m.d,isIgnored:m.isIgnored||!1})}),o.collocationsArray=d,o.collocations=d.map(m=>m.text).join(`
`);let g=[...n.idiomsList||(n.idioms?n.idioms.split(`
`).map(m=>({text:m.trim(),isIgnored:!1})).filter(m=>m.text):[])];i.idiomsList&&i.idiomsList.forEach(m=>{const y=g.findIndex(v=>v.text.toLowerCase()===m.text.toLowerCase());y!==-1?(m.d&&!g[y].d&&(g[y].d=m.d),m.isIgnored&&(g[y].isIgnored=!0)):g.push({text:m.text,d:m.d,isIgnored:m.isIgnored||!1})}),o.idiomsList=g,o.idioms=g.map(m=>m.text).join(`
`);let h=n.prepositions||[];if(i.prepositionsArray&&Array.isArray(i.prepositionsArray)&&i.prepositionsArray.length>0){const m=i.prepositionsArray,y=[...h];m.forEach(v=>{v.prep&&(y.some(N=>N.prep.toLowerCase()===v.prep.toLowerCase()&&N.usage.toLowerCase()===v.usage.toLowerCase())||y.push({...v,isIgnored:v.isIgnored||!1}))}),h=y}if(o.prepositions=h.length>0?h:void 0,i.wordFamily&&(o.wordFamily=i.wordFamily),i.paraphrases&&Array.isArray(i.paraphrases)){const m=n.paraphrases||[],y=i.paraphrases,v=[...m];y.forEach(w=>{v.some(N=>N.word.toLowerCase()===w.word.toLowerCase())||v.push(w)}),o.paraphrases=v}if(i.example){let m=n.example||"";m.toLowerCase().includes(i.example.toLowerCase())||(m=m.trim()?`${m}
${i.example}`:i.example),o.example=m}return o.isIdiom=i.isIdiom!==void 0?!!i.isIdiom:n.isIdiom,o.isPhrasalVerb=i.isPhrasalVerb!==void 0?!!i.isPhrasalVerb:n.isPhrasalVerb,o.isCollocation=i.isCollocation!==void 0?!!i.isCollocation:n.isCollocation,o.isStandardPhrase=i.isStandardPhrase!==void 0?!!i.isStandardPhrase:n.isStandardPhrase,o.isIrregular=i.isIrregular!==void 0?!!i.isIrregular:n.isIrregular,o.isPassive=i.isPassive!==void 0?!!i.isPassive:n.isPassive,o.quality=pt.REFINED,o.complexity=bn(o),o.masteryScore=wa(o),o.gameEligibility=yn(o),o.updatedAt=Date.now(),o},gg=({label:n,options:r,selectedId:i,onSelect:o,buttonClass:f,disabled:d=!1})=>{const[p,g]=E.useState(!1),h=E.useRef(null),m=r.find(y=>y.id===i)||r[0];return E.useEffect(()=>{const y=v=>{h.current&&!h.current.contains(v.target)&&g(!1)};return document.addEventListener("mousedown",y),()=>document.removeEventListener("mousedown",y)},[]),l.jsxs("div",{className:"relative",ref:h,children:[l.jsxs("button",{type:"button",onClick:()=>g(!p),className:f,disabled:d,children:[n&&l.jsx("span",{className:"text-[9px] font-black uppercase tracking-widest text-neutral-400",children:n}),m.icon,l.jsx("span",{className:"text-xs font-black uppercase tracking-wider",children:m.label}),l.jsx(py,{size:14,className:`transition-transform duration-200 ${p?"rotate-180":""}`})]}),p&&!d&&l.jsx("div",{className:"absolute right-0 top-full mt-2 w-48 bg-white rounded-2xl shadow-xl border border-neutral-100 z-50 p-2 overflow-hidden animate-in fade-in zoom-in-95 flex flex-col gap-1",children:r.map(y=>l.jsxs("button",{type:"button",onClick:()=>{o(y.id),g(!1)},className:`w-full flex items-center gap-3 px-3 py-2.5 rounded-lg text-xs font-bold transition-colors ${i===y.id?"bg-neutral-100 text-neutral-900":"text-neutral-600 hover:bg-neutral-50 hover:text-neutral-900"}`,children:[y.icon,l.jsx("span",{children:y.label})]},y.id))})]})},Ql=({title:n,items:r,onUpdate:i,onToggleIgnore:o,onRemove:f,onAdd:d,placeholders:p,showDescription:g=!1})=>l.jsxs("div",{className:"space-y-2",children:[l.jsx("label",{className:"text-[10px] font-black text-neutral-400 uppercase tracking-widest",children:n}),l.jsxs("div",{className:"space-y-2 p-3 bg-neutral-50 border border-neutral-200 rounded-2xl",children:[(r||[]).map((h,m)=>l.jsxs("div",{className:`bg-white p-2 rounded-lg border border-neutral-100 flex items-start gap-2 group transition-opacity ${h.isIgnored?"opacity-50":""}`,children:[l.jsxs("div",{className:"flex-1 space-y-1",children:[l.jsx("div",{className:"flex items-center gap-2",children:l.jsx("input",{type:"text",value:h.text,onChange:y=>i(m,"text",y.target.value),placeholder:p.text,className:"flex-1 px-3 py-2 bg-neutral-50/50 border border-neutral-200 rounded-lg text-xs font-bold focus:bg-white focus:ring-1 focus:ring-neutral-900 outline-none"})}),g&&l.jsx("input",{type:"text",value:h.d||"",onChange:y=>i(m,"d",y.target.value),placeholder:p.d,className:"w-full px-3 py-1 bg-neutral-50/50 border border-transparent rounded-lg text-[10px] font-medium text-neutral-500 focus:bg-white focus:ring-1 focus:ring-neutral-900 focus:border-neutral-200 outline-none"})]}),l.jsxs("div",{className:"flex flex-col",children:[l.jsx("button",{type:"button",onClick:()=>o(m),className:"p-2 text-neutral-400 hover:text-neutral-700 rounded-lg hover:bg-neutral-100",children:h.isIgnored?l.jsx(df,{size:14}):l.jsx(bi,{size:14})}),l.jsx("button",{type:"button",onClick:()=>f(m),className:"p-2 text-neutral-400 hover:text-red-500 rounded-lg hover:bg-red-50",children:l.jsx(Ut,{size:14})})]})]},m)),l.jsxs("button",{type:"button",onClick:d,className:"w-full text-center py-2 bg-white hover:bg-neutral-100 text-neutral-400 hover:text-neutral-700 rounded-lg text-xs font-bold transition-colors flex items-center justify-center gap-1.5 border border-neutral-200 shadow-sm",children:[l.jsx(In,{size:12})," Add"]})]})]}),Gw=n=>{var P,Y,U,G;const{onClose:r,onSwitchToView:i,formData:o,setFormData:f,setFlag:d,familyHandler:p,prepList:g,collocList:h,idiomList:m,paraList:y,handleSubmit:v,onOpenAiRefine:w,onSuggestLearn:N,hasSuggestions:O}=n,[I,_]=E.useState("MAIN"),j=[{id:"MAIN",label:"Main",icon:VS},{id:"DETAILS",label:"Details",icon:wy},{id:"CONNECTIONS",label:"Links",icon:_y},{id:"USAGE",label:"Usage & Test",icon:Ko}],L=[{id:pt.RAW,label:"Raw",icon:l.jsx(by,{size:14,className:"text-neutral-400"})},{id:pt.REFINED,label:"Refined",icon:l.jsx(Cy,{size:14,className:"text-indigo-500"})},{id:pt.VERIFIED,label:"Verified",icon:l.jsx(jy,{size:14,className:"text-emerald-500"})},{id:pt.FAILED,label:"Incorrect",icon:l.jsx(Iy,{size:14,className:"text-rose-500"})}],D=[{id:"NEW",label:"New",icon:l.jsx("div",{className:"w-3 h-3 rounded-full bg-blue-500"})},{id:nt.LEARNED,label:"Learned",icon:l.jsx("div",{className:"w-3 h-3 rounded-full bg-cyan-500"})},{id:nt.FORGOT,label:"Forgot",icon:l.jsx("div",{className:"w-3 h-3 rounded-full bg-rose-500"})},{id:nt.HARD,label:"Hard",icon:l.jsx("div",{className:"w-3 h-3 rounded-full bg-orange-500"})},{id:nt.EASY,label:"Easy",icon:l.jsx("div",{className:"w-3 h-3 rounded-full bg-green-500"})}],M=["intensified","softened","synonym","academic","casual"];return l.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center p-4 bg-black/40 backdrop-blur-sm animate-in fade-in duration-200",children:l.jsxs("div",{className:"bg-white w-full max-w-4xl rounded-[2.5rem] shadow-2xl overflow-hidden flex flex-col max-h-[95vh]",children:[l.jsxs("header",{className:"px-6 py-4 border-b border-neutral-100 flex flex-col gap-4 shrink-0 bg-white/80 backdrop-blur-sm z-10",children:[l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsxs("div",{className:"flex items-center space-x-3",children:[l.jsx("button",{onClick:i,className:"p-2 bg-neutral-100 hover:bg-neutral-200 rounded-lg text-neutral-500 transition-colors",children:l.jsx(dy,{size:16})}),l.jsx("h3",{className:"font-black text-lg text-neutral-900 leading-none",children:"Edit Word"})]}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsxs("button",{type:"button",onClick:N,title:O?"View Suggestions":"Get Learning Suggestions",className:`px-3 py-2 border rounded-lg font-black text-[10px] flex items-center justify-center space-x-1.5 hover:bg-neutral-50 active:scale-95 transition-all shadow-sm ${O?"bg-amber-50 border-amber-200 text-amber-700":"bg-white border-neutral-200 text-neutral-600"}`,children:[l.jsx(Cf,{size:12,className:O?"text-amber-500":"text-neutral-400"}),l.jsx("span",{children:O?"View Suggestion":"Suggest"})]}),l.jsxs("button",{type:"button",onClick:w,className:"px-3 py-2 bg-white border border-neutral-200 text-neutral-600 rounded-lg font-black text-[10px] flex items-center justify-center space-x-1.5 hover:bg-neutral-50 active:scale-95 transition-all shadow-sm",children:[l.jsx(or,{size:12,className:"text-amber-500"}),l.jsx("span",{children:"Manual AI"})]}),l.jsxs("button",{type:"button",onClick:()=>v(),className:"px-5 py-2 bg-neutral-900 text-white rounded-lg font-black text-[10px] flex items-center justify-center space-x-1.5 hover:bg-neutral-800 active:scale-95 transition-all shadow-md shadow-neutral-900/10",children:[l.jsx(Ty,{size:12}),l.jsx("span",{children:"Save"})]}),l.jsx("button",{onClick:r,className:"p-2 text-neutral-400 hover:bg-neutral-100 hover:text-neutral-900 rounded-full transition-colors ml-2",children:l.jsx(Ut,{size:18})})]})]}),l.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4",children:[l.jsx("div",{className:"flex bg-neutral-100 p-1 rounded-xl w-fit",children:j.map(({id:A,label:V,icon:F})=>l.jsxs("button",{onClick:()=>_(A),className:`px-4 py-2 text-xs font-black rounded-lg transition-all flex items-center gap-2 ${I===A?"bg-white shadow-sm text-neutral-900":"text-neutral-500 hover:text-neutral-800"}`,children:[l.jsx(F,{size:14})," ",V]},A))}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(gg,{label:"Quality",options:L,selectedId:o.quality,onSelect:A=>f("quality",A),buttonClass:"flex items-center gap-2 px-3 py-2 bg-white rounded-lg hover:bg-neutral-100 transition-colors shadow-sm border border-neutral-200"}),l.jsx(gg,{label:"Learn Status",options:D,selectedId:o.studiedStatus,onSelect:A=>f("studiedStatus",A),buttonClass:"flex items-center gap-2 px-3 py-2 bg-white rounded-lg hover:bg-neutral-100 transition-colors shadow-sm border border-neutral-200"})]})]})]}),l.jsx("div",{className:"flex-1 overflow-y-auto no-scrollbar bg-neutral-50/50",children:l.jsxs("div",{className:"p-6 space-y-6",children:[I==="MAIN"&&l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-x-6 gap-y-4 animate-in fade-in duration-300",children:[l.jsxs("div",{className:"space-y-1",children:[l.jsx("label",{className:"text-[10px] font-black text-neutral-400 uppercase tracking-widest px-1",children:"Headword"}),l.jsx("input",{type:"text",value:o.word,onChange:A=>f("word",A.target.value),className:"w-full px-4 py-3 bg-white border border-neutral-200 rounded-xl text-lg font-bold focus:ring-2 focus:ring-neutral-900 outline-none"})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsxs("div",{className:"space-y-1",children:[l.jsx("label",{className:"text-[10px] font-black text-neutral-400 uppercase tracking-widest px-1",children:"Primary IPA / US"}),l.jsx("input",{type:"text",value:o.ipaUs||"",onChange:A=>f("ipaUs",A.target.value),placeholder:"/.../",className:"w-full px-4 py-2 bg-white border border-neutral-200 rounded-xl font-mono text-base text-neutral-600 focus:ring-2 focus:ring-neutral-900 outline-none"})]}),l.jsxs("div",{className:"space-y-1",children:[l.jsx("label",{className:"text-[10px] font-black text-neutral-400 uppercase tracking-widest px-1",children:"IPA UK (Optional)"}),l.jsx("input",{type:"text",value:o.ipaUk||"",onChange:A=>f("ipaUk",A.target.value),placeholder:"/.../",className:"w-full px-4 py-2 bg-white border border-neutral-200 rounded-xl font-mono text-base text-neutral-600 focus:ring-2 focus:ring-neutral-900 outline-none"})]}),l.jsxs("div",{className:"space-y-1",children:[l.jsx("label",{className:"text-[10px] font-black text-neutral-400 uppercase tracking-widest px-1",children:"Pronunciation Similarity"}),l.jsx("div",{className:"flex bg-neutral-100 p-1 rounded-xl w-full",children:["same","near","different"].map(A=>l.jsx("button",{type:"button",onClick:()=>f("pronSim",A),className:`flex-1 px-4 py-2 text-xs font-black rounded-lg transition-all flex items-center justify-center gap-2 ${o.pronSim===A?"bg-white shadow-sm text-neutral-900":"text-neutral-500 hover:text-neutral-800"}`,children:A.charAt(0).toUpperCase()+A.slice(1)},A))})]})]}),l.jsxs("div",{className:"md:col-span-2 space-y-1",children:[l.jsx("label",{className:"text-[10px] font-black text-neutral-400 uppercase tracking-widest px-1",children:"Definition / Meaning"}),l.jsx("input",{type:"text",value:o.meaningVi,onChange:A=>f("meaningVi",A.target.value),className:"w-full px-4 py-3 bg-white border border-neutral-200 rounded-xl text-base font-medium focus:ring-2 focus:ring-neutral-900 outline-none"})]}),l.jsxs("div",{className:"md:col-span-2 space-y-1",children:[l.jsx("label",{className:"text-[10px] font-black text-neutral-400 uppercase tracking-widest px-1",children:"Examples"}),l.jsx("textarea",{rows:5,value:o.example,onChange:A=>f("example",A.target.value),className:"w-full px-4 py-3 bg-white border border-neutral-200 rounded-xl text-sm leading-relaxed resize-y focus:ring-2 focus:ring-neutral-900 outline-none"})]})]}),I==="DETAILS"&&l.jsxs("div",{className:"space-y-6 animate-in fade-in duration-300",children:[l.jsxs("div",{className:"space-y-2",children:[l.jsx("label",{className:"text-[10px] font-black text-neutral-400 uppercase tracking-widest",children:"Flags"}),l.jsx("div",{className:"flex flex-wrap gap-2 p-3 bg-white border border-neutral-200 rounded-2xl",children:[{id:"isIdiom",label:"Idiom",icon:lc},{id:"isCollocation",label:"Colloc.",icon:sc},{id:"isStandardPhrase",label:"Phrase",icon:Rf},{id:"isPhrasalVerb",label:"Phrasal",icon:Ny},{id:"isIrregular",label:"Irregular",icon:fE},{id:"isPassive",label:"Archive",icon:o.isPassive?BS:Lf}].map(A=>l.jsxs("button",{type:"button",onClick:()=>d(A.id),className:`flex items-center space-x-1.5 py-1.5 px-3 rounded-lg border transition-all font-bold text-[9px] uppercase tracking-wider ${o[A.id]?"bg-neutral-900 border-neutral-900 text-white shadow-sm":"bg-white border-neutral-200 text-neutral-500 hover:border-neutral-300"}`,children:[l.jsx(A.icon,{size:10}),l.jsx("span",{children:A.label})]},A.id))})]}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-x-6 gap-y-4",children:[l.jsxs("div",{className:"space-y-1",children:[l.jsxs("label",{className:"text-[10px] font-black text-neutral-400 uppercase tracking-widest px-1 flex items-center",children:[l.jsx(_E,{size:10,className:"mr-1"}),"User Groups"]}),l.jsx("input",{type:"text",value:o.groupsString,onChange:A=>f("groupsString",A.target.value),placeholder:"bird_species, env_academic...",className:"w-full px-4 py-3 bg-white border border-neutral-200 rounded-xl text-sm focus:ring-1 focus:ring-neutral-900 outline-none"})]}),l.jsxs("div",{className:"md:col-span-2 space-y-1",children:[l.jsx("label",{className:"text-[10px] font-black text-neutral-400 uppercase tracking-widest px-1",children:"Register"}),l.jsx("div",{className:"flex bg-neutral-100 p-1 rounded-xl w-fit",children:["raw","neutral","academic","casual"].map(A=>l.jsx("button",{type:"button",onClick:()=>f("register",A),className:`px-4 py-2 text-xs font-black rounded-lg transition-all flex items-center gap-2 ${o.register===A||!o.register&&A==="raw"?"bg-white shadow-sm text-neutral-900":"text-neutral-500 hover:text-neutral-800"}`,children:A.charAt(0).toUpperCase()+A.slice(1)},A))})]})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsxs("label",{className:"text-[10px] font-black text-neutral-400 uppercase tracking-widest px-1 flex items-center",children:[l.jsx(If,{size:10,className:"mr-1"})," Prepositions / Patterns"]}),l.jsxs("div",{className:"space-y-2 p-3 bg-white border border-neutral-200 rounded-2xl",children:[o.prepositionsList.map((A,V)=>l.jsxs("div",{className:`flex items-center gap-2 transition-opacity ${A.isIgnored?"opacity-40":""}`,children:[l.jsx("input",{type:"text",value:A.prep,onChange:F=>g.update(V,{prep:F.target.value}),placeholder:"Prep",className:"w-24 px-3 py-2 bg-neutral-50 border border-neutral-200 rounded-lg text-xs font-bold focus:bg-white focus:ring-1 focus:ring-neutral-900 outline-none"}),l.jsx("input",{type:"text",value:A.usage,onChange:F=>g.update(V,{usage:F.target.value}),placeholder:"Usage Context",className:"flex-1 px-3 py-2 bg-neutral-50 border border-neutral-200 rounded-lg text-xs font-medium focus:bg-white focus:ring-1 focus:ring-neutral-900 outline-none"}),l.jsx("button",{type:"button",onClick:()=>g.toggleIgnore(V),className:"p-2 text-neutral-400 hover:text-neutral-700 rounded-lg hover:bg-neutral-100",children:A.isIgnored?l.jsx(df,{size:14}):l.jsx(bi,{size:14})}),l.jsx("button",{type:"button",onClick:()=>g.remove(V),className:"p-2 text-neutral-400 hover:text-red-500 rounded-lg hover:bg-red-50",children:l.jsx(Ut,{size:14})})]},V)),l.jsxs("button",{type:"button",onClick:()=>g.add({prep:"",usage:"",isIgnored:!1}),className:"w-full text-center py-2 bg-neutral-50 hover:bg-neutral-100 text-neutral-400 hover:text-neutral-700 rounded-lg text-xs font-bold transition-colors flex items-center justify-center gap-1.5 border border-neutral-200 shadow-sm",children:[l.jsx(In,{size:12})," Add Pattern"]})]})]}),l.jsxs("div",{className:"space-y-1",children:[l.jsxs("label",{className:"text-[10px] font-black text-neutral-400 uppercase tracking-widest px-1 flex items-center",children:[l.jsx(bE,{size:10,className:"mr-1"})," Private Note"]}),l.jsx("textarea",{rows:3,value:o.note,onChange:A=>f("note",A.target.value),className:"w-full px-4 py-3 bg-white border border-neutral-200 rounded-xl text-sm text-neutral-600 resize-y focus:ring-1 focus:ring-neutral-900 outline-none"})]})]}),I==="CONNECTIONS"&&l.jsxs("div",{className:"space-y-6 animate-in fade-in duration-300",children:[l.jsx(Ql,{title:"Collocations",items:o.collocationsArray,onUpdate:(A,V,F)=>h.update(A,{[V]:F}),onToggleIgnore:h.toggleIgnore,onRemove:h.remove,onAdd:()=>h.add({text:"",d:"",isIgnored:!1}),placeholders:{text:"Collocation phrase...",d:"Descriptive hint..."},showDescription:!0}),l.jsx(Ql,{title:"Related Idioms",items:o.idiomsList,onUpdate:(A,V,F)=>m.update(A,{[V]:F}),onToggleIgnore:m.toggleIgnore,onRemove:m.remove,onAdd:()=>m.add({text:"",d:"",isIgnored:!1}),placeholders:{text:"Idiom or phrase...",d:"Descriptive hint..."},showDescription:!0}),l.jsxs("div",{className:"space-y-2",children:[l.jsx("label",{className:"text-[10px] font-black text-neutral-400 uppercase tracking-widest",children:"Word Family"}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[l.jsx(Ql,{title:"Nouns",items:(((P=o.wordFamily)==null?void 0:P.nouns)||[]).map(A=>({text:A.word,isIgnored:A.isIgnored})),onUpdate:(A,V,F)=>{V==="text"&&p("nouns").update(A,"word",F)},onToggleIgnore:p("nouns").toggleIgnore,onRemove:p("nouns").remove,onAdd:p("nouns").add,placeholders:{text:"Noun form..."}}),l.jsx(Ql,{title:"Verbs",items:(((Y=o.wordFamily)==null?void 0:Y.verbs)||[]).map(A=>({text:A.word,isIgnored:A.isIgnored})),onUpdate:(A,V,F)=>{V==="text"&&p("verbs").update(A,"word",F)},onToggleIgnore:p("verbs").toggleIgnore,onRemove:p("verbs").remove,onAdd:p("verbs").add,placeholders:{text:"Verb form..."}}),l.jsx(Ql,{title:"Adjectives",items:(((U=o.wordFamily)==null?void 0:U.adjs)||[]).map(A=>({text:A.word,isIgnored:A.isIgnored})),onUpdate:(A,V,F)=>{V==="text"&&p("adjs").update(A,"word",F)},onToggleIgnore:p("adjs").toggleIgnore,onRemove:p("adjs").remove,onAdd:p("adjs").add,placeholders:{text:"Adjective form..."}}),l.jsx(Ql,{title:"Adverbs",items:(((G=o.wordFamily)==null?void 0:G.advs)||[]).map(A=>({text:A.word,isIgnored:A.isIgnored})),onUpdate:(A,V,F)=>{V==="text"&&p("advs").update(A,"word",F)},onToggleIgnore:p("advs").toggleIgnore,onRemove:p("advs").remove,onAdd:p("advs").add,placeholders:{text:"Adverb form..."}})]})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsxs("label",{className:"text-[10px] font-black text-neutral-400 uppercase tracking-widest flex items-center gap-1",children:[l.jsx(oc,{size:10,className:"text-amber-500"})," Word Power & Variations"]}),l.jsxs("div",{className:"space-y-2 p-3 bg-white border border-neutral-200 rounded-2xl",children:[(o.paraphrases||[]).map((A,V)=>l.jsxs("div",{className:`grid grid-cols-[1fr,auto,1fr,auto,auto] items-center gap-2 transition-opacity ${A.isIgnored?"opacity-40":""}`,children:[l.jsx("input",{type:"text",value:A.word,onChange:F=>y.update(V,{word:F.target.value}),placeholder:"Variation...",className:"px-3 py-2 bg-neutral-50 border border-neutral-200 rounded-lg text-xs font-bold focus:bg-white focus:ring-1 focus:ring-neutral-900 outline-none"}),l.jsx("select",{value:A.tone,onChange:F=>y.update(V,{tone:F.target.value}),className:"px-3 py-2 bg-neutral-50 border border-neutral-200 rounded-lg text-xs font-bold focus:bg-white focus:ring-1 focus:ring-neutral-900 outline-none appearance-none",children:M.map(F=>l.jsx("option",{value:F,children:F.charAt(0).toUpperCase()+F.slice(1)},F))}),l.jsx("input",{type:"text",value:A.context,onChange:F=>y.update(V,{context:F.target.value}),placeholder:"Context...",className:"px-3 py-2 bg-neutral-50 border border-neutral-200 rounded-lg text-xs font-medium focus:bg-white focus:ring-1 focus:ring-neutral-900 outline-none"}),l.jsx("button",{type:"button",onClick:()=>y.toggleIgnore(V),className:"p-2 text-neutral-400 hover:text-neutral-700 rounded-lg hover:bg-neutral-100",children:A.isIgnored?l.jsx(df,{size:14}):l.jsx(bi,{size:14})}),l.jsx("button",{type:"button",onClick:()=>y.remove(V),className:"p-2 text-neutral-400 hover:text-red-500 rounded-lg hover:bg-red-50",children:l.jsx(Ut,{size:14})})]},V)),l.jsxs("button",{type:"button",onClick:()=>y.add({word:"",context:"",tone:"synonym",isIgnored:!1}),className:"w-full text-center py-2 bg-neutral-50 hover:bg-neutral-100 text-neutral-400 hover:text-neutral-700 rounded-lg text-xs font-bold transition-colors flex items-center justify-center gap-1.5 border border-neutral-200 shadow-sm",children:[l.jsx(In,{size:12})," Add Variation"]})]})]})]}),I==="USAGE"&&l.jsxs("div",{className:"space-y-6 animate-in fade-in duration-300 h-full flex flex-col",children:[l.jsxs("div",{className:"space-y-2",children:[l.jsx("div",{className:"flex justify-between items-center px-1",children:l.jsxs("label",{className:"text-[10px] font-black text-neutral-400 uppercase tracking-widest flex items-center gap-2",children:[l.jsx(Ko,{size:12})," Usage Guide (Markdown)"]})}),l.jsx("textarea",{value:o.essayEdit,onChange:A=>f("essayEdit",A.target.value),rows:12,className:"w-full p-4 bg-white border border-neutral-200 rounded-2xl font-mono text-xs leading-relaxed focus:ring-2 focus:ring-neutral-900 outline-none resize-y",placeholder:"Enter the Usage Guide Markdown content here..."})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx("div",{className:"flex justify-between items-center px-1",children:l.jsxs("label",{className:"text-[10px] font-black text-neutral-400 uppercase tracking-widest flex items-center gap-2",children:[l.jsx(uf,{size:12})," Practice Test (Markdown)"]})}),l.jsx("textarea",{value:o.testEdit,onChange:A=>f("testEdit",A.target.value),rows:12,className:"w-full p-4 bg-white border border-neutral-200 rounded-2xl font-mono text-xs leading-relaxed focus:ring-2 focus:ring-neutral-900 outline-none resize-y",placeholder:"Enter the Practice Test Markdown content here..."})]})]})]})})]})})};async function fc(n){if(navigator.clipboard&&navigator.clipboard.writeText)try{return await navigator.clipboard.writeText(n),!0}catch{console.warn("Clipboard API failed, trying fallback strategy")}try{const r=document.createElement("textarea");r.value=n,r.style.position="fixed",r.style.left="-9999px",r.style.top="0",document.body.appendChild(r),r.focus(),r.select();const i=document.execCommand("copy");return document.body.removeChild(r),i}catch(r){return console.error("Copy failed",r),!1}}const Pw=n=>n?n.split(/[;\n\r\t,]+/).map(r=>r.trim()).filter(Boolean):[],tA=n=>{const r=new Map;return n&&Pw(n).forEach(o=>{const f=o.split(":").map(g=>g.trim()),d=f[0],p=f.length>1?f[1]:f[0];if(d&&p){const g=d.toLowerCase(),h=p.toLowerCase();r.set(g,h),r.has(h)||r.set(h,h)}}),r},aA=n=>{const r=Array.from(n.keys()).sort((o,f)=>f.length-o.length);if(r.length===0)return null;const i=r.map(o=>o.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"));return new RegExp(`\\b(${i.join("|")})\\b`,"gi")},Sf=({isOpen:n,onClose:r,type:i,title:o,description:f,initialData:d,onGeneratePrompt:p,onJsonReceived:g,hidePrimaryInput:h=!1,closeOnSuccess:m=!1})=>{const[y,v]=E.useState(""),[w,N]=E.useState(""),[O,I]=E.useState(""),[_,j]=E.useState(""),[L,D]=E.useState("CASUAL"),[M,P]=E.useState(""),[Y,U]=E.useState(ff.VARIETY),[G,A]=E.useState(""),[V,F]=E.useState("Adult"),[$,ae]=E.useState("English"),[me,fe]=E.useState("friendly_elementary"),[C,ne]=E.useState(""),[te,q]=E.useState(""),[z,b]=E.useState(null),[T,k]=E.useState(!1),[Q,ue]=E.useState(!1),[ie,he]=E.useState(!1),[B,le]=E.useState(""),J=E.useRef(null),ee=E.useRef(void 0),ye=["GENERATE_LESSON","GENERATE_WORD_LESSON","REFINE_UNIT","GENERATE_AUDIO_SCRIPT"].includes(i);if(E.useEffect(()=>{if(n&&!ee.current){if(v(""),N(""),I(""),j(""),D("CASUAL"),P(""),U(ff.VARIETY),ne(""),i==="REFINE_WORDS"&&(d!=null&&d.words)){const pe=d.words.replace(/\n/g,"; ");v(pe)}else ye&&(A(""),F((d==null?void 0:d.targetAudience)||"Adult"),ae((d==null?void 0:d.language)||"English"),fe((d==null?void 0:d.tone)||"friendly_elementary"));q(""),b(null),he(!1),k(!1),ue(!1)}ee.current=n},[n,i,d,ye]),E.useEffect(()=>{let pe={};i==="REFINE_WORDS"?pe={words:h?d==null?void 0:d.words:y}:i==="REFINE_UNIT"?pe={request:w,language:$,targetAudience:V,tone:me,format:"reading"}:i==="GENERATE_AUDIO_SCRIPT"?pe={request:w,language:$,targetAudience:V,tone:me,format:"listening"}:i==="GENERATE_CHAPTER"?pe={request:O}:i==="GENERATE_SEGMENT"?pe={request:_}:i==="GENERATE_PARAPHRASE"?pe={tone:L,context:M,mode:Y}:i==="EVALUATE_PARAPHRASE"?pe=d:i==="GENERATE_LESSON"||i==="GENERATE_WORD_LESSON"?pe={topic:G,language:$,targetAudience:V,tone:me,format:"reading"}:i==="GENERATE_UNIT"?pe={request:w}:i==="GENERATE_PLAN"&&(pe={request:C}),le(p(pe))},[i,y,w,O,_,L,M,Y,d,h,G,V,$,me,C,p]),!n)return null;const ve=async()=>{await fc(B),he(!0),setTimeout(()=>he(!1),2e3),setTimeout(()=>{var pe;return(pe=J.current)==null?void 0:pe.focus()},100)},Ce=async()=>{T||!te.trim()||(b(null),k(!0),setTimeout(async()=>{try{let pe=te.trim();pe=pe.replace(/^```json\s*/,"").replace(/^```\s*/,"").replace(/\s*```$/,"");let Pe;try{Pe=JSON.parse(pe)}catch{try{pe=pe.replace(/,\s*([}\]])/g,"$1"),Pe=JSON.parse(pe)}catch(Qe){throw new Error("Cannot read AI response. Please ensure you copied the full code.",{cause:Qe})}}ye?await g({result:Pe,preferences:{language:$,targetAudience:V,tone:me}}):await g(Pe),m?r():(k(!1),ue(!0))}catch(pe){console.error(pe),k(!1),b(pe.message||"Failed to process.")}},50))},it=pe=>{pe.key==="Enter"&&(pe.metaKey||pe.ctrlKey)&&(pe.preventDefault(),Ce())},be=()=>l.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-3",children:[l.jsxs("div",{className:"space-y-1",children:[l.jsxs("label",{className:"text-[9px] font-black text-neutral-400 uppercase tracking-widest px-1 flex items-center gap-1",children:[l.jsx(vy,{size:10})," Language"]}),l.jsxs("select",{value:$,onChange:pe=>ae(pe.target.value),className:"w-full px-3 py-2 bg-white border border-neutral-200 rounded-xl text-xs font-bold focus:ring-2 focus:ring-neutral-900 outline-none appearance-none cursor-pointer",children:[l.jsx("option",{value:"English",children:"English"}),l.jsx("option",{value:"Vietnamese",children:"Vietnamese"})]})]}),l.jsxs("div",{className:"space-y-1",children:[l.jsxs("label",{className:"text-[9px] font-black text-neutral-400 uppercase tracking-widest px-1 flex items-center gap-1",children:[l.jsx(SE,{size:10})," Audience"]}),l.jsxs("select",{value:V,onChange:pe=>F(pe.target.value),className:"w-full px-3 py-2 bg-white border border-neutral-200 rounded-xl text-xs font-bold focus:ring-2 focus:ring-neutral-900 outline-none appearance-none cursor-pointer",children:[l.jsx("option",{value:"Adult",children:"Adult"}),l.jsx("option",{value:"Kid",children:"Kid"})]})]}),l.jsxs("div",{className:"space-y-1",children:[l.jsxs("label",{className:"text-[9px] font-black text-neutral-400 uppercase tracking-widest px-1 flex items-center gap-1",children:[l.jsx(dE,{size:10})," Persona"]}),l.jsxs("select",{value:me,onChange:pe=>fe(pe.target.value),className:"w-full px-3 py-2 bg-white border border-neutral-200 rounded-xl text-xs font-bold focus:ring-2 focus:ring-neutral-900 outline-none appearance-none cursor-pointer",children:[l.jsx("option",{value:"friendly_elementary",children:"Friendly"}),l.jsx("option",{value:"professional_professor",children:"Professional"})]})]})]});return l.jsx("div",{className:"fixed inset-0 z-[300] flex items-center justify-center p-4 bg-white/10 backdrop-blur-sm animate-in fade-in duration-200",children:l.jsxs("div",{className:"bg-white w-full max-w-lg rounded-[2.5rem] shadow-2xl flex flex-col overflow-hidden border border-neutral-200 relative ring-4 ring-neutral-100",children:[l.jsx("button",{onClick:r,disabled:T,className:"absolute top-4 right-4 p-2 text-neutral-300 hover:text-neutral-900 hover:bg-neutral-50 rounded-full transition-all z-10 disabled:opacity-0",children:l.jsx(Ut,{size:18})}),l.jsxs("div",{className:"p-6 md:p-8 flex flex-col gap-6",children:[l.jsxs("div",{className:"space-y-1 pr-8",children:[l.jsxs("div",{className:"flex items-center gap-2 text-neutral-900",children:[l.jsx("div",{className:"p-1.5 bg-neutral-900 rounded-lg text-white",children:l.jsx(or,{size:14})}),l.jsx("h3",{className:"font-black text-lg tracking-tight",children:o})]}),l.jsx("p",{className:"text-xs font-medium text-neutral-400 pl-9",children:f})]}),l.jsxs("div",{className:"py-2 space-y-4",children:[!h&&i==="REFINE_WORDS"&&l.jsxs("div",{className:"space-y-1",children:[l.jsx("label",{className:"text-[9px] font-black text-neutral-400 uppercase tracking-widest px-1",children:"Vocabulary List"}),l.jsx("textarea",{value:y,onChange:pe=>v(pe.target.value),disabled:T||Q,className:"w-full h-32 p-4 bg-neutral-50/50 border border-neutral-200 rounded-2xl text-sm font-medium focus:ring-2 focus:ring-neutral-900 outline-none resize-none shadow-inner leading-relaxed transition-all focus:bg-white disabled:opacity-50",placeholder:"word1; word2; word3..."}),l.jsx("p",{className:"text-[9px] text-neutral-400 px-2 text-right",children:"Edit freely. Separated by semicolon (;) or newline."})]}),["REFINE_UNIT","GENERATE_AUDIO_SCRIPT"].includes(i)&&l.jsxs("div",{className:"space-y-1",children:[l.jsx("label",{className:"text-[9px] font-black text-neutral-400 uppercase tracking-widest px-1",children:"Your Instructions"}),l.jsx("textarea",{value:w,onChange:pe=>N(pe.target.value),disabled:T||Q,placeholder:i==="GENERATE_AUDIO_SCRIPT"?'e.g., "Focus on the definition of key terms"':'e.g., "Add more advanced vocabulary and examples."',className:"w-full h-24 p-4 bg-neutral-50/50 border border-neutral-200 rounded-2xl text-sm font-medium focus:ring-2 focus:ring-neutral-900 outline-none resize-none transition-all focus:bg-white disabled:opacity-50"})]}),(i==="GENERATE_LESSON"||i==="GENERATE_WORD_LESSON")&&l.jsx(l.Fragment,{children:l.jsxs("div",{className:"space-y-1",children:[l.jsxs("label",{className:"text-[9px] font-black text-neutral-400 uppercase tracking-widest px-1 flex items-center gap-1",children:[l.jsx(nc,{size:10})," Topic"]}),l.jsx("input",{value:G,onChange:pe=>A(pe.target.value),placeholder:"e.g. Present Perfect Tense, Space Travel",className:"w-full px-4 py-2 bg-neutral-50/50 border border-neutral-200 rounded-xl text-sm font-bold focus:ring-2 focus:ring-neutral-900 outline-none"})]})}),ye&&be(),i==="GENERATE_UNIT"&&l.jsxs("div",{className:"space-y-1",children:[l.jsx("label",{className:"text-[9px] font-black text-neutral-400 uppercase tracking-widest px-1",children:"Topic or Request"}),l.jsx("input",{value:w,onChange:pe=>N(pe.target.value),disabled:T||Q,placeholder:'e.g., "Trees", "Technology", "The Ocean"',className:"w-full px-4 py-3 bg-neutral-50/50 border border-neutral-200 rounded-xl text-sm font-bold focus:ring-2 focus:ring-neutral-900 outline-none"})]}),i==="GENERATE_PLAN"&&l.jsxs("div",{className:"space-y-1",children:[l.jsx("label",{className:"text-[9px] font-black text-neutral-400 uppercase tracking-widest px-1",children:"What is your goal?"}),l.jsx("textarea",{value:C,onChange:pe=>ne(pe.target.value),disabled:T||Q,placeholder:'e.g., "Prepare for IELTS in 30 days focusing on academic writing"',className:"w-full h-24 p-4 bg-neutral-50/50 border border-neutral-200 rounded-2xl text-sm font-medium focus:ring-2 focus:ring-neutral-900 outline-none resize-none transition-all focus:bg-white disabled:opacity-50"})]})]}),l.jsxs("div",{className:"space-y-3 pt-4 border-t border-neutral-100",children:[l.jsx("div",{className:"space-y-2",children:l.jsx("button",{onClick:ve,disabled:T||Q,className:`w-full py-3 px-4 rounded-xl font-bold text-xs flex items-center justify-between transition-all group ${ie?"bg-green-50 text-green-700 border border-green-200":"bg-neutral-50 text-neutral-600 border border-neutral-200 hover:border-neutral-300 hover:bg-white"} disabled:opacity-50`,children:l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("div",{className:`p-1.5 rounded-md ${ie?"bg-green-200 text-green-800":"bg-white text-neutral-400 shadow-sm"}`,children:ie?l.jsx(rr,{size:14}):l.jsx(ZS,{size:14})}),l.jsx("span",{className:"uppercase tracking-widest text-[10px]",children:ie?"Command Copied":"Step 1: Copy Command"})]})})}),l.jsxs("div",{className:`relative flex items-start gap-2 p-1.5 rounded-2xl border-2 transition-all ${z?"border-red-100 bg-red-50/30":Q?"border-green-200 bg-green-50":"border-neutral-100 bg-white focus-within:border-neutral-900 focus-within:shadow-md"}`,children:[l.jsx("div",{className:"pl-3 py-3 shrink-0",children:Q?l.jsx(rr,{size:18,className:"text-green-600"}):l.jsx(qS,{size:18,className:z?"text-red-400":"text-neutral-400"})}),l.jsx("textarea",{ref:J,value:Q?"Data applied! Success.":te,onChange:pe=>{q(pe.target.value),b(null)},onKeyDown:it,disabled:T||Q,placeholder:T?"Processing data...":"Step 2: Paste AI response...",className:`w-full bg-transparent border-none text-xs font-medium placeholder:text-neutral-400 focus:ring-0 outline-none resize-none min-h-[70px] p-2 ${Q?"text-green-700 font-bold":"text-neutral-800"}`,rows:3,autoComplete:"off"}),l.jsx("button",{onClick:Ce,disabled:!te.trim()||T,className:"p-2.5 rounded-xl transition-all shadow-md active:scale-90 flex items-center justify-center w-10 h-10 self-end bg-neutral-900 text-white hover:bg-neutral-800 disabled:opacity-20 disabled:scale-95",children:T?l.jsx(At,{size:16,className:"animate-spin"}):l.jsx(KS,{size:16})})]})]})]})]})})},Ho=({title:n,icon:r,suggestions:i})=>!i||i.length===0?null:l.jsxs("div",{className:"space-y-3",children:[l.jsxs("h4",{className:"text-xs font-black uppercase tracking-widest text-neutral-500 flex items-center gap-2 border-b border-neutral-200 pb-2",children:[r,n]}),l.jsx("ul",{className:"space-y-3",children:i.map((o,f)=>l.jsxs("li",{className:"flex items-start gap-3",children:[o.suggestion==="learn"?l.jsx(rr,{size:16,className:"text-green-500 shrink-0 mt-0.5"}):l.jsx(WS,{size:16,className:"text-neutral-400 shrink-0 mt-0.5"}),l.jsxs("div",{children:[l.jsx("p",{className:`font-bold text-sm ${o.suggestion==="ignore"?"text-neutral-500":"text-neutral-900"}`,children:o.item}),l.jsxs("p",{className:"text-xs text-neutral-600 italic",children:['"',o.reason,'"']})]})]},f))})]}),Vw=({isOpen:n,onClose:r,suggestions:i})=>!n||!i?null:l.jsx("div",{className:"fixed inset-0 z-[200] flex items-center justify-center p-4 bg-black/60 backdrop-blur-sm animate-in fade-in duration-200",children:l.jsxs("div",{className:"bg-white w-full max-w-2xl rounded-[2.5rem] shadow-2xl border border-neutral-200 flex flex-col max-h-[90vh]",children:[l.jsxs("header",{className:"px-8 py-6 border-b border-neutral-100 flex justify-between items-start shrink-0",children:[l.jsxs("div",{children:[l.jsxs("h3",{className:"text-xl font-black text-neutral-900 flex items-center gap-2",children:[l.jsx(Cf,{size:20,className:"text-amber-500"})," Learning Suggestions"]}),l.jsx("p",{className:"text-sm text-neutral-500 mt-1",children:i.overall_summary})]}),l.jsx("button",{type:"button",onClick:r,className:"p-2 -mr-2 text-neutral-400 hover:bg-neutral-100 rounded-full",children:l.jsx(Ut,{size:20})})]}),l.jsxs("main",{className:"p-8 overflow-y-auto space-y-6",children:[l.jsx(Ho,{title:"Word Family",icon:l.jsx(nc,{size:14}),suggestions:i.wordFamily}),l.jsx(Ho,{title:"Collocations",icon:l.jsx(sc,{size:14}),suggestions:i.collocations}),l.jsx(Ho,{title:"Idioms",icon:l.jsx(lc,{size:14}),suggestions:i.idioms}),l.jsx(Ho,{title:"Paraphrases (Word Power)",icon:l.jsx(oc,{size:14}),suggestions:i.paraphrases})]})]})});function xg(n,r){var i,o,f;switch(r.type){case"REINITIALIZE":const d=r.payload;return{...d,register:d.register||"raw",groupsString:((i=d.groups)==null?void 0:i.join(", "))||"",studiedStatus:d.lastReview&&d.lastGrade||"NEW",collocationsArray:d.collocationsArray||(d.collocations?d.collocations.split(`
`).map(m=>({text:m.trim(),isIgnored:!1})):[]),idiomsList:d.idiomsList||(d.idioms?d.idioms.split(`
`).map(m=>({text:m.trim(),isIgnored:!1})):[]),prepositionsList:d.prepositions||[],wordFamily:d.wordFamily||{nouns:[],verbs:[],adjs:[],advs:[]},paraphrases:d.paraphrases||[],essayEdit:((o=d.lesson)==null?void 0:o.essay)||"",testEdit:((f=d.lesson)==null?void 0:f.test)||""};case"SET_FIELD":return{...n,[r.payload.field]:r.payload.value};case"SET_FLAG":const{flag:p}=r.payload,g={...n,[p]:!n[p]};return["isIdiom","isPhrasalVerb","isCollocation","isStandardPhrase"].includes(p)&&g[p]&&(p!=="isIdiom"&&(g.isIdiom=!1),p!=="isPhrasalVerb"&&(g.isPhrasalVerb=!1),p!=="isCollocation"&&(g.isCollocation=!1),p!=="isStandardPhrase"&&(g.isStandardPhrase=!1)),g;case"SET_LIST_ITEM":return{...n,[r.payload.list]:r.payload.data};case"APPLY_AI_MERGE":const h=Hw(n,r.payload);return{...n,...h,register:h.register,prepositionsList:h.prepositions||[]};default:return n}}const qw=({word:n,user:r,onSave:i,onClose:o,onSwitchToView:f})=>{const{showToast:d}=On(),[p,g]=E.useReducer(xg,n,$=>xg({},{type:"REINITIALIZE",payload:$})),[h,m]=E.useState(!1),[y,v]=E.useState(null),[w,N]=E.useState(!1),[O,I]=E.useState(!1);E.useEffect(()=>{g({type:"REINITIALIZE",payload:n}),v(null)},[n]);const _=$=>kw($.words.split(/[,\n]+/).map(ae=>ae.trim()).filter(Boolean),r.nativeLanguage||"Vietnamese"),j=$=>{const ae=Array.isArray($)?$[0]:$;ae&&(g({type:"APPLY_AI_MERGE",payload:ae}),m(!1))},L=()=>{y?N(!0):I(!0)},D=$=>Mw(p,r),M=$=>{$&&$.overall_summary?(v($),I(!1),N(!0)):d("Invalid suggestion format from AI.","error")},P=$=>{$&&$.preventDefault();const{groupsString:ae,studiedStatus:me,collocationsArray:fe,idiomsList:C,prepositionsList:ne,essayEdit:te,testEdit:q,...z}=p;let b=z.wordFamily;if(b){const J={};let ee=!1;["nouns","verbs","adjs","advs"].forEach(ye=>{var Ce;const ve=((Ce=b[ye])==null?void 0:Ce.filter(it=>it.word.trim()))||[];ve.length>0&&(J[ye]=ve,ee=!0)}),b=ee?J:void 0}let T={...z,wordFamily:b,prepositions:ne.filter(J=>J.prep.trim()).length>0?ne.filter(J=>J.prep.trim()):void 0,collocationsArray:fe.filter(J=>J.text.trim()),collocations:fe.filter(J=>J.text.trim()).map(J=>J.text).join(`
`),idiomsList:C.filter(J=>J.text.trim()),idioms:C.filter(J=>J.text.trim()).map(J=>J.text).join(`
`),lesson:{essay:te,test:q},groups:ae.split(",").map(J=>J.trim()).filter(Boolean),updatedAt:Date.now()};const k={...T.lastTestResults||{}},Q=new Set((T.collocationsArray||[]).filter(J=>!J.isIgnored).map(J=>J.text.toLowerCase())),ue=new Set((T.idiomsList||[]).filter(J=>!J.isIgnored).map(J=>J.text.toLowerCase())),ie=new Set((T.prepositions||[]).filter(J=>!J.isIgnored).map(J=>J.prep.toLowerCase())),he=new Set((T.paraphrases||[]).filter(J=>!J.isIgnored).map(J=>J.word.toLowerCase())),B=new Set;T.wordFamily&&["nouns","verbs","adjs","advs"].forEach(J=>{(T.wordFamily[J]||[]).forEach(ee=>{!ee.isIgnored&&ee.word.trim()&&B.add(ee.word.trim().toLowerCase())})});for(const J in k){const ee=J.split(":"),ye=ee[0],ve=ee.slice(1).join(":").toLowerCase();let Ce=!1;switch(ye){case"COLLOCATION_QUIZ":Q.has(ve)||(Ce=!0);break;case"IDIOM_QUIZ":ue.has(ve)||(Ce=!0);break;case"PREPOSITION_QUIZ":ie.has(ve)||(Ce=!0);break;case"PARAPHRASE_QUIZ":he.has(ve)||(Ce=!0);break;case"WORD_FAMILY":B.has(ve)||(Ce=!0);break}Ce&&delete k[J]}T.lastTestResults=k;const le=n.lastReview&&n.lastGrade||"NEW";me!==le?me==="NEW"?T=Cb(T):T=Ob(T,me):(T.complexity=bn(T),T.masteryScore=wa(T),T.gameEligibility=yn(T)),i(T),d("Word saved successfully!","success")},Y=$=>{const ae=p[$]||[];return{update:(me,fe)=>g({type:"SET_LIST_ITEM",payload:{list:$,data:[...ae].map((C,ne)=>ne===me?{...C,...fe}:C)}}),toggleIgnore:me=>g({type:"SET_LIST_ITEM",payload:{list:$,data:[...ae].map((fe,C)=>C===me?{...fe,isIgnored:!fe.isIgnored}:fe)}}),remove:me=>g({type:"SET_LIST_ITEM",payload:{list:$,data:ae.filter((fe,C)=>C!==me)}}),add:me=>g({type:"SET_LIST_ITEM",payload:{list:$,data:[...ae,me]}})}},U=$=>{const ae=p.wordFamily||{nouns:[],verbs:[],adjs:[],advs:[]},me=fe=>g({type:"SET_LIST_ITEM",payload:{list:"wordFamily",data:{...ae,...fe}}});return{update:(fe,C,ne)=>{const te=[...ae[$]||[]];te[fe]={...te[fe],[C]:ne},me({[$]:te})},toggleIgnore:fe=>{const C=[...ae[$]||[]];C[fe]={...C[fe],isIgnored:!C[fe].isIgnored},me({[$]:C})},remove:fe=>{me({[$]:(ae[$]||[]).filter((C,ne)=>ne!==fe)})},add:()=>{const fe={word:"",isIgnored:$==="advs"};me({[$]:[...ae[$]||[],fe]})}}},G=Y("prepositionsList"),A=Y("collocationsArray"),V=Y("idiomsList"),F=Y("paraphrases");return l.jsxs(l.Fragment,{children:[l.jsx(Gw,{onClose:o,onSwitchToView:()=>f(n),formData:p,setFormData:($,ae)=>g({type:"SET_FIELD",payload:{field:$,value:ae}}),setFlag:$=>g({type:"SET_FLAG",payload:{flag:$}}),familyHandler:U,prepList:G,collocList:A,idiomList:V,paraList:F,handleSubmit:P,onOpenAiRefine:()=>m(!0),onSuggestLearn:L,hasSuggestions:!!y}),l.jsx(Vw,{isOpen:w,onClose:()=>N(!1),suggestions:y}),h&&l.jsx(Sf,{isOpen:h,onClose:()=>m(!1),type:"REFINE_WORDS",title:"Manual AI Refinement",description:`Refining details for "${p.word}"`,initialData:{words:p.word},user:r,onGeneratePrompt:_,onJsonReceived:j,actionLabel:"Apply to Word",hidePrimaryInput:!0}),O&&l.jsx(Sf,{isOpen:O,onClose:()=>I(!1),type:"REFINE_WORDS",title:"Get Learning Suggestions",description:"AI will suggest what to focus on based on your profile.",initialData:{words:n.word},user:r,onGeneratePrompt:D,onJsonReceived:M,hidePrimaryInput:!0})]})},Yw=1500;let Js=[],bt=null,ec=!1,$t=!1,Jf=[],ii=null,ka=!1,Qa=0,Xl=0,ll=1,el=null;function Fw(n){const r=n.numberOfChannels,i=n.length*r*2+44,o=new ArrayBuffer(i),f=new DataView(o),d=[];let p,g,h=0,m=0;for(v(1179011410),v(i-8),v(1163280727),v(544501094),v(16),y(1),y(r),v(n.sampleRate),v(n.sampleRate*2*r),y(r*2),y(16),v(1635017060),v(i-m-4),p=0;p<n.numberOfChannels;p++)d.push(n.getChannelData(p));for(;m<i;){for(p=0;p<r;p++)g=Math.max(-1,Math.min(1,d[p][h])),g=(g<0?g*32768:g*32767)|0,f.setInt16(m,g,!0),m+=2;h++}return new Blob([o],{type:"audio/wav"});function y(w){f.setUint16(m,w,!0),m+=2}function v(w){f.setUint32(m,w,!0),m+=4}}const $w=()=>{el=null},e0=async n=>{if(n)return el=n.replace(/\/$/,""),el;if(el)return el;const r=rt();return el=Mt(r),el};function Ww(){if(typeof window>"u"||!window.speechSynthesis)return;const n=()=>{const r=window.speechSynthesis.getVoices();r&&r.length>0&&(Js=Array.from(r))};n(),window.speechSynthesis.onvoiceschanged!==void 0&&(window.speechSynthesis.onvoiceschanged=n)}Ww();const Qw=()=>new Promise(n=>{const r=window.speechSynthesis.getVoices();if(r.length>0)Js=Array.from(r),n(Js);else{const i=()=>{const o=window.speechSynthesis.getVoices();o.length>0&&(Js=Array.from(o),n(Js),window.speechSynthesis.onvoiceschanged=null)};window.speechSynthesis.onvoiceschanged=i,setTimeout(()=>{const o=window.speechSynthesis.getVoices();Js=Array.from(o),n(Js)},1e3)}}),Zw=async n=>{try{const i=`${await e0(n)}/voices`,o=await fetch(i,{method:"GET",headers:{"Content-Type":"application/json"},signal:AbortSignal.timeout(2e3)});if(!o.ok)throw new Error(`HTTP ${o.status}`);return await o.json()}catch{return null}},Zt=n=>{ec=n,window.dispatchEvent(new CustomEvent("audio-status-changed",{detail:{isSpeaking:ec,isAudioPaused:$t,isSingleWordPlayback:ka}}))},pc=n=>String(n||"").trim().normalize("NFD").replace(/[\u0300-\u036f]/g,"").replace(//g,"d").replace(//g,"D").toLowerCase().replace(/[^a-z0-9'-]/g,""),Kw=n=>{if(!n)return null;const r=decodeURIComponent(n);if(!/quality_sound/i.test(r))return null;const f=(r.split("?")[0].split("#")[0].split("/").pop()||"").replace(/\.[a-z0-9]+$/i,"");if(!f)return null;const d=f.replace(/_(N|V|ADJ|ADV|PRO|PREP|CONJ|INTJ|X)_(US|UK)$/i,"").replace(/_(US|UK)$/i,"");return pc(d)||null},Xw=n=>{const r=pc(n);return r?!/\s/.test(String(n||"").trim())&&r.length>0:!1},xi=async n=>{const r=pc(n);if(!r)return!1;const i=rt(),o=Mt(i);try{const f=await fetch(`${o}/api/lookup/cambridge/cache?word=${encodeURIComponent(r)}`,{signal:AbortSignal.timeout(6e3),cache:"no-store"});if(f.ok){const d=await f.text(),p=d?JSON.parse(d):null;if(p!=null&&p.exists)return window.dispatchEvent(new CustomEvent("coach-cambridge-lookup-request",{detail:{word:r,data:p}})),!0}}catch{}try{const f=await fetch(`${o}/api/lookup/cambridge/simple?word=${encodeURIComponent(r)}`,{signal:AbortSignal.timeout(12e3),cache:"no-store"});if(!f.ok)return!1;const d=await f.text(),p=d?JSON.parse(d):null;if(!(p!=null&&p.exists))try{const g=await fetch(`${o}/api/convert/ipa?text=${encodeURIComponent(r)}&mode=2`,{signal:AbortSignal.timeout(6e3),cache:"no-store"});if(!g.ok)return!1;const h=await g.json().catch(()=>null);return h!=null&&h.ipa?(window.dispatchEvent(new CustomEvent("coach-ipa-fallback-request",{detail:{word:r,ipa:h.ipa}})),!0):!1}catch{return!1}return window.dispatchEvent(new CustomEvent("coach-cambridge-lookup-request",{detail:{word:r,data:p}})),!0}catch{return!1}},_i=n=>{Qa+=1,Xl+=1,bt&&(bt.pause(),bt.src="",bt=null),typeof window<"u"&&window.speechSynthesis&&window.speechSynthesis.cancel(),ii=null,ka=!1,$t=!1,Jf=[],n||Zt(!1)},Hb=()=>{_i(!1)},oi=()=>ec,ci=()=>$t,ui=()=>ka,Gb=()=>Jf,Zo=()=>ll,Pb=n=>{const r=Number.isFinite(n)?Math.min(2,Math.max(.5,n)):1;ll=Math.round(r*100)/100,bt&&(bt.playbackRate=ll),window.dispatchEvent(new CustomEvent("audio-status-changed",{detail:{isSpeaking:ec,isAudioPaused:$t,isSingleWordPlayback:ka,playbackRate:ll}}))},Vb=()=>{!bt||bt.paused||(bt.pause(),$t=!0,Zt(!0))},qb=async()=>{if(!(!bt||!bt.paused))try{await bt.play(),$t=!1,Zt(!0)}catch(n){throw Zt(!1),n}},Jw=async(n,r)=>{const i=rt(),o=Mt(i),f=r||t0(n),d=i.audioCoach.activeCoach,p=i.audioCoach.coaches[d],g=f==="vi"?p.viVoice:p.enVoice,h=f==="vi"?p.viAccent:p.enAccent;try{const m=`${o}/speak`,y=await fetch(m,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({text:n,language:f,accent:h,voice:g}),signal:AbortSignal.timeout(2e4)});if(y.ok)return await y.blob()}catch(m){console.error("Prefetch failed",m)}return null},Yb=(n,r)=>{_i(!0);const i=++Qa;$t=!1,ii=((r==null?void 0:r.source)==="quality"||(r==null?void 0:r.source)==="cambridge"||r!=null&&r.isSingleWord)&&(r!=null&&r.word)?r.word:null,ka=!!(r!=null&&r.isSingleWord),Zt(!0);const o=ii,f=o?xi(o):Promise.resolve(!1),d=URL.createObjectURL(n),p=new Audio(d);return p.playbackRate=ll,bt=p,new Promise((g,h)=>{p.play().then(()=>{p.onended=()=>{if(i!==Qa||bt!==p){URL.revokeObjectURL(d),g(!0);return}URL.revokeObjectURL(d),ii=null,$t=!1,Zt(!1),o&&f.then(m=>{m||xi(o)}),g(!0)}}).catch(m=>{if(i!==Qa||bt!==p){URL.revokeObjectURL(d),g(!1);return}URL.revokeObjectURL(d),ii=null,ka=!1,$t=!1,Zt(!1),h(m)})})},e2=async(n,r,i,o,f)=>{_i(!0);const d=++Xl,p=Xw(n);ka=p,$t=!1,Zt(!0);try{const h=`${await e0(f)}/speak`,y=await fetch(h,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({text:n,language:r,accent:i,voice:o}),signal:AbortSignal.timeout(2e4)});if(d!==Xl)return!0;if(!y.ok)throw new Error("Server unreachable");const v=y.headers.get("Content-Type");if(v&&v.includes("audio")){const w=await y.blob();if(d!==Xl)return!0;const N=y.headers.get("X-TTS-Source")||void 0,O=y.headers.get("X-TTS-Word")||void 0,I=p?pc(n):void 0;return await Yb(w,{source:N,word:O||I,isSingleWord:p})}else return d!==Xl||(ka=!1,$t=!1,Zt(!1)),!0}catch(g){if(d!==Xl)return!0;throw $t=!1,Zt(!1),g}},t2=(n,r,i="en")=>new Promise(o=>{if(typeof window>"u"||!window.speechSynthesis)return o(!1);_i(!0);const f=++Qa;$t=!1,Zt(!0);const d=new SpeechSynthesisUtterance(n);d.lang=i==="vi"?"vi-VN":"en-US";const p=window.speechSynthesis.getVoices(),g=r&&p.find(h=>h.name===r)||p.find(h=>h.lang.startsWith(i));g&&(d.voice=g),d.rate=Math.min(2,Math.max(.5,.95*ll)),d.onend=()=>{if(f!==Qa)return o(!0);$t=!1,Zt(!1),o(!0)},d.onerror=()=>{if(f!==Qa)return o(!1);$t=!1,Zt(!1),o(!1)},window.speechSynthesis.speak(d)}),t0=n=>/[]/i.test(n)?"vi":"en",a2=n=>n?n.substring(0,Yw).normalize("NFD").replace(/\*+/g,"").replace(//g,", ").replace(/[^a-zA-Z0-9.,!?%'\-\s\u00C0-\u1EF9]/g,"").trim():"",Sa=async(n,r=!1,i,o,f,d)=>{if(typeof window>"u"||!n)return;const p=a2(n);if(!p)return;if(d)try{await Yb(d);return}catch{console.warn("Play preloaded failed, falling back to standard")}const g=rt(),h=g.audioCoach.activeCoach,m=g.audioCoach.coaches[h],y=Mt(g),v=i||t0(p),w=o!==void 0?o:v==="vi"?m.viVoice:m.enVoice,N=f!==void 0?f:v==="vi"?m.viAccent:m.enAccent;try{await e2(p,v,N,w,y);return}catch{await t2(p,w,v)}},Fb=async(n,r,i,o)=>{_i(!0);const f=++Qa;Jf=o||[];const d=Kw(n);ka=!!d;const p=d?xi(d):Promise.resolve(!1),g=await e0();let h=n;if(!n.startsWith("http")){const y=n.startsWith("/")?n.slice(1):n;y.startsWith("api/")?h=`${g}/${y}`:h=`${g}/api/audio/stream/${y}`}const m=new Audio(h);return m.playbackRate=ll,bt=m,new Promise((y,v)=>{const w=()=>{if(r!==void 0&&(m.currentTime=r),i!==void 0){const N=(r||0)+i,O=()=>{if(m.currentTime>=N){if(f!==Qa||bt!==m){y(!0);return}m.pause(),Zt(!1),m.removeEventListener("timeupdate",O),d&&p.then(I=>{I||xi(d)}),ka=!1,y(!0)}};m.addEventListener("timeupdate",O)}Zt(!0),$t=!1,m.play().then(()=>{m.onended=()=>{if(f!==Qa||bt!==m){y(!0);return}ka=!1,$t=!1,Zt(!1),d&&p.then(N=>{N||xi(d)}),y(!0)}}).catch(N=>{if(f!==Qa||bt!==m){y(!1);return}ka=!1,$t=!1,Zt(!1),v(N)})};m.readyState>=1?w():m.onloadedmetadata=w,m.onerror=N=>{if(f!==Qa||bt!==m){y(!1);return}ka=!1,$t=!1,Zt(!1),v(N)}})},a0=async()=>{const n=await navigator.mediaDevices.getUserMedia({audio:!0}),r=["audio/webm;codecs=opus","audio/webm","audio/mp4"].find(i=>MediaRecorder.isTypeSupported(i));Wa=new MediaRecorder(n,r?{mimeType:r}:void 0),Ef=[],Wa.ondataavailable=i=>{i.data.size>0&&Ef.push(i.data)},Wa.start()};let Wa=null,Ef=[];const n0=()=>new Promise(n=>{if(!Wa)return n(null);const r=Wa.mimeType||"audio/webm";Wa.onstop=()=>{const i=new Blob(Ef,{type:r}),o=new FileReader;o.readAsDataURL(i),o.onloadend=()=>{const d=o.result.split(",")[1]||"";n({base64:d,mimeType:r})},Wa==null||Wa.stream.getTracks().forEach(f=>f.stop()),Wa=null},Wa.state!=="inactive"?Wa.stop():n(null)}),Jl=n=>{bt&&(bt.currentTime=n)},$b=()=>bt?{currentTime:bt.currentTime,duration:bt.duration||0}:null,n2=Object.freeze(Object.defineProperty({__proto__:null,bufferToWav:Fw,detectLanguage:t0,fetchServerVoices:Zw,getAudioProgress:$b,getAvailableVoices:Qw,getIsAudioPaused:ci,getIsSingleWordPlayback:ui,getIsSpeaking:oi,getMarkPoints:Gb,getPlaybackRate:Zo,pauseSpeaking:Vb,playSound:Fb,prefetchSpeech:Jw,resetAudioProtocolCache:$w,resumeSpeaking:qb,seekAudio:Jl,setPlaybackRate:Pb,speak:Sa,startRecording:a0,stopRecording:n0,stopSpeaking:Hb},Symbol.toStringTag,{value:"Module"}));typeof window<"u"&&(window.checkMarkdownQuiz=n=>{const r=n.getAttribute("data-answer");if(!r)return;const o=n.value.trim().toLowerCase()===r.trim().toLowerCase();n.classList.remove("border-neutral-300","text-neutral-900","focus:border-indigo-600"),n.classList.remove("border-green-500","text-green-700","bg-green-50"),n.classList.remove("border-red-500","text-red-700","bg-red-50"),o?n.classList.add("border-green-500","text-green-700","bg-green-50"):n.classList.add("border-red-500","text-red-700","bg-red-50")},window.checkDropdownQuiz=n=>{const r=n.parentElement;if(!r)return;const i=r.querySelector("select");if(!i)return;const o=i.getAttribute("data-answer"),f=i.value;if(!f)return;const d=f===o;if(i.disabled=!0,n.disabled=!0,n.classList.add("opacity-0","pointer-events-none"),i.classList.remove("border-neutral-300","text-neutral-900","focus:border-indigo-600"),i.classList.remove("bg-white"),d)i.classList.add("border-green-500","text-green-700","bg-green-50","font-bold");else{i.classList.add("border-red-500","text-red-700","bg-red-50","line-through");const p=document.createElement("span");p.className="ml-2 text-xs font-bold text-green-600 bg-green-50 px-1.5 py-0.5 rounded border border-green-200 animate-in fade-in",p.innerText=o||"",r.appendChild(p)}},window.checkMultiChoice=n=>{var d;const r=n.parentElement;if(!r)return;const i=r.getAttribute("data-answer"),o=(d=n.textContent)==null?void 0:d.trim();r.querySelectorAll("button").forEach(p=>{var g;p.disabled=!0,p.classList.add("opacity-50","cursor-not-allowed"),((g=p.textContent)==null?void 0:g.trim())===i&&(p.classList.remove("bg-white","text-neutral-700","opacity-50"),p.classList.add("bg-green-500","text-white","border-green-600"))}),o===i?(n.classList.remove("opacity-50"),n.classList.add("ring-2","ring-green-300")):(n.classList.remove("bg-white","text-neutral-700","opacity-50"),n.classList.add("bg-red-500","text-white","border-red-600"))},window.handleLessonSound=(n,r,i,o)=>{Fb(n,r,i,o).catch(f=>console.error("Sound play failed",f))},window.handleWordAudioSpeak=n=>{const r=window.handleLessonSpeak;typeof r=="function"?r(n):console.warn("handleLessonSpeak is not registered in current view.")},window.handleMarkdownNav=n=>{const r=String(n||"").trim().toLowerCase();if(!r)return;const i=window.resolveMarkdownNav;if(typeof i=="function"&&i(r))return;const o=Array.from(document.querySelectorAll("h1, h2, h3, h4")),f=o.find(g=>(g.textContent||"").trim().toLowerCase()===r),d=o.find(g=>(g.textContent||"").trim().toLowerCase().includes(r)),p=f||d;p&&p.scrollIntoView({behavior:"smooth",block:"start"})});const s2=n=>{if(!n[0].trim().startsWith("|"))return null;const r=[];for(const h of n)if(h.trim().startsWith("|"))r.push(h);else break;if(r.length===0)return null;const i=h=>{const m=h.split("|");return h.trim().startsWith("|")&&m.shift(),h.trim().endsWith("|")&&m.pop(),m.map(y=>y.trim())},o=/^\|?(\s*:?-+:?\s*\|)+\s*$/;let f=!1;r.length>1&&o.test(r[1].trim())&&(f=!0);let d='<div class="overflow-x-auto my-4 border border-neutral-200 rounded-xl shadow-sm"><table class="w-full text-sm text-left border-collapse">';const p=i(r[0]);d+='<thead class="bg-neutral-50 text-neutral-900 uppercase font-bold text-xs"><tr>',p.forEach(h=>d+=`<th class="px-6 py-3 border-b border-neutral-200 min-w-[100px]">${h}</th>`),d+="</tr></thead>",d+='<tbody class="divide-y divide-neutral-100 bg-white">';const g=f?2:1;for(let h=g;h<r.length;h++){const m=i(r[h]);d+='<tr class="hover:bg-neutral-50/50 transition-colors">';for(let y=0;y<p.length;y++){const v=m[y]||"";d+=`<td class="px-6 py-4 font-medium text-neutral-600 align-top">${v}</td>`}d+="</tr>"}return d+="</tbody></table></div>",{html:d,consumed:r.length}},l2=n=>n.replace(/\[HIDDEN:\s*(.*?)\]/gi,(r,i)=>`<button type="button" onclick="this.outerHTML='<span class=\\'px-1.5 py-0.5 bg-green-50 border border-green-200 text-green-800 rounded-md text-sm font-bold animate-in fade-in zoom-in-95 inline-block align-baseline mx-1\\'>${i.trim().replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"\\'")}</span>'" class="inline-flex flex-nowrap whitespace-nowrap items-center gap-1.5 px-2 py-0.5 bg-indigo-50 hover:bg-indigo-100 text-indigo-600 rounded-md text-[10px] font-black uppercase tracking-wider transition-colors select-none border border-indigo-100 shadow-sm align-middle my-0.5 mx-1"><svg xmlns="http://www.w3.org/2000/svg" width="10" height="10" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3" stroke-linecap="round" stroke-linejoin="round" class="shrink-0"><path d="M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z"/><circle cx="12" cy="12" r="3"/></svg>Reveal</button>`),r2=n=>n.replace(/\[Quiz:\s*(.*?)\]/gi,(r,i)=>{const o=i.trim(),f=Math.max(3,o.length);return`<span class="inline-flex items-center gap-1 align-middle mx-1 whitespace-nowrap"><input type="text" data-answer="${o.replace(/"/g,"&quot;")}" placeholder="?" class="border-b-2 border-neutral-300 bg-transparent text-center font-bold text-neutral-900 outline-none focus:border-indigo-600 transition-all rounded-t-md px-1 py-0.5 text-sm" style="width: ${f}ch; min-width: 40px;" onkeydown="if(event.key==='Enter') window.checkMarkdownQuiz(this)" /><button onclick="window.checkMarkdownQuiz(this.previousElementSibling)" class="p-1 text-neutral-400 hover:text-indigo-600 transition-colors bg-neutral-100 hover:bg-indigo-50 rounded-full shadow-sm" title="Check Answer"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3" stroke-linecap="round" stroke-linejoin="round"><path d="M20 6 9 17l-5-5"/></svg></button></span>`}),i2=n=>n.replace(/\[Select:\s*(.*?)\]/gi,(r,i)=>{const o=i.split("|").map(g=>g.trim()).filter(g=>g.length>0);if(o.length<2)return`[Invalid Select: ${i}]`;const f=o[0],d=[...o];for(let g=d.length-1;g>0;g--){const h=Math.floor(Math.random()*(g+1));[d[g],d[h]]=[d[h],d[g]]}let p='<span class="inline-flex items-center gap-1 align-middle mx-1 whitespace-nowrap">';return p+=`<select data-answer="${f.replace(/"/g,"&quot;")}" class="border-b-2 border-neutral-300 bg-transparent font-bold text-neutral-900 outline-none focus:border-indigo-600 transition-all rounded-t-md px-2 py-0.5 text-sm cursor-pointer hover:bg-neutral-50 appearance-none pr-6 relative" style="min-width: 80px;">`,p+='<option value="" disabled selected>Select...</option>',d.forEach(g=>{p+=`<option value="${g.replace(/"/g,"&quot;")}">${g}</option>`}),p+="</select>",p+='<button onclick="window.checkDropdownQuiz(this)" class="p-1 text-neutral-400 hover:text-indigo-600 transition-colors bg-neutral-100 hover:bg-indigo-50 rounded-full shadow-sm" title="Check Answer"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3" stroke-linecap="round" stroke-linejoin="round"><path d="M20 6 9 17l-5-5"/></svg></button>',p+="</span>",p}),o2=n=>n.replace(/\[Multi:\s*(.*?)\]/gi,(r,i)=>{const o=i.split("|").map(g=>g.trim()).filter(g=>g.length>0);if(o.length<2)return`[Invalid Multi: ${i}]`;const f=o[0],d=[...o];for(let g=d.length-1;g>0;g--){const h=Math.floor(Math.random()*(g+1));[d[g],d[h]]=[d[h],d[g]]}let p=`<span class="inline-flex flex-wrap items-center gap-1.5 align-middle mx-1" data-answer="${f.replace(/"/g,"&quot;")}">`;return d.forEach(g=>{p+=`<button onclick="window.checkMultiChoice(this)" class="px-2 py-1 bg-white border border-neutral-200 text-neutral-700 rounded-md text-xs font-bold hover:bg-neutral-50 hover:border-neutral-300 transition-all shadow-sm select-none">${g}</button>`}),p+="</span>",p}),c2=n=>n.replace(/\[Formula:?\s*(.*?)\]/gi,(r,i)=>{const o=i.split("|").map(d=>d.trim());let f='<div class="flex flex-wrap items-center gap-2 p-3 my-3 bg-amber-50 border-l-4 border-amber-400 rounded-r-xl shadow-sm">';return f+='<span class="text-[10px] font-black text-amber-500 uppercase tracking-widest mr-1 select-none">Formula</span>',o.forEach(d=>{/^[+,.]+$/.test(d)?f+=`<span class="font-bold text-amber-700">${d}</span>`:f+=`<span class="px-2 py-1 bg-white border border-amber-200 rounded-lg text-amber-900 font-mono text-sm font-bold shadow-sm">${d}</span>`}),f+="</div>",f}),u2=n=>{const r=/\[Audio-(VN|EN)\]([\s\S]*?)\[\/(?:Audio-(?:VN|EN))?\]/gi;return n.replace(r,(i,o,f)=>`<button onclick="window.handleLessonSpeak('${f.replace(/\[HIDDEN:.*?\]/gi,"").replace(/\[Quiz:.*?\]/gi,"").replace(/\[Select:.*?\]/gi,"").replace(/\[Multi:.*?\]/gi,"").replace(/\[Formula:.*?\]/gi,"").replace(/[#*`_~[\]()]/g,"").replace(/[\u{1F600}-\u{1F64F}\u{1F300}-\u{1F5FF}\u{1F680}-\u{1F6FF}\u{2600}-\u{26FF}\u{2700}-\u{27BF}]/gu,"").replace(/\n/g," ").trim().replace(/'/g,"\\'")}')" class="inline-flex items-center justify-center w-6 h-6 mr-1.5 bg-indigo-600 text-white hover:bg-indigo-700 rounded-md transition-all active:scale-90 align-middle shadow-sm" title="Listen"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3" stroke-linecap="round" stroke-linejoin="round"><path d="M11 5L6 9H2v6h4l5 4V5z"/><path d="M15.54 8.46a5 5 0 0 1 0 7.07"/></svg></button>`+f.trim())},d2=n=>{const r=/\[W_AUDIO\]([\s\S]*?)\[\/\]/gi;return n.replace(r,(i,o)=>{const f=String(o||"").split(",").map(p=>p.trim()).filter(p=>p.length>0);return f.length?`<span class="inline-flex flex-wrap items-center gap-1.5 align-middle my-1">${f.map(p=>`<button onclick="window.handleWordAudioSpeak('${p.replace(/'/g,"\\'")}')" class="inline-flex items-center px-2.5 py-1 bg-white border border-neutral-200 hover:border-indigo-300 hover:bg-indigo-50 text-neutral-700 hover:text-indigo-700 rounded-lg text-xs font-bold transition-all shadow-sm active:scale-95">${p}</button>`).join("")}</span>`:""})},f2=n=>{const r=/\[NAV(?:\s+([^\]]+))?\]([\s\S]*?)\[\/\]/gi;return n.replace(r,(i,o,f)=>{const d=String(f||"").trim(),p=String(o||d).trim();return!d||!p?"":`<button onclick="window.handleMarkdownNav('${p.replace(/\\/g,"\\\\").replace(/'/g,"\\'").replace(/\n/g," ")}')" class="inline-flex items-center gap-1 px-2.5 py-1 bg-neutral-100 border border-neutral-200 hover:bg-neutral-900 hover:text-white hover:border-neutral-900 text-neutral-700 rounded-lg text-xs font-bold transition-all active:scale-95 my-1">${d}</button>`})},p2=n=>n.replace(/\[SOUND\s*(.*?)\]/gi,(r,i)=>{let o=[],f=i;if(i.includes("<")){const v=i.split("<");f=v[0],o=v[1].split(",").map(w=>parseFloat(w.trim())).filter(w=>!isNaN(w)).slice(0,10)}const d=f.split("|").map(v=>v.trim());if(d.length<2)return`[Invalid Sound: ${i}]`;const p=d[0],g=d[1],h=d[2]?parseFloat(d[2]):void 0,m=d[3]?parseFloat(d[3]):void 0,y=[`'${g.replace(/'/g,"\\'")}'`];return(o.length>0||m!==void 0||h!==void 0)&&y.push(h!==void 0?h.toString():"undefined"),(o.length>0||m!==void 0)&&y.push(m!==void 0?m.toString():"undefined"),o.length>0&&y.push(`[${o.join(",")}]`),`<button onclick="window.handleLessonSound(${y.join(", ")})" class="inline-flex items-center gap-2 px-3 py-1.5 bg-white border border-neutral-200 hover:border-indigo-300 hover:bg-indigo-50 text-neutral-700 hover:text-indigo-600 rounded-xl text-xs font-bold transition-all shadow-sm active:scale-95 my-1 mx-1 select-none"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="text-indigo-500"><path d="M11 5L6 9H2v6h4l5 4V5z"/><path d="M15.54 8.46a5 5 0 0 1 0 7.07"/></svg>${p}</button>`}),h2=n=>n.replace(/\[IMG\s*(.*?)\]/gi,(r,i)=>{const o=i.split("|").map(m=>m.trim()),f=o[0],d=o[1];let p=f;if(!f.startsWith("http")){const m=rt(),y=Mt(m),v=f.startsWith("/")?f.slice(1):f;v.startsWith("api/")?p=`${y}/${v}`:p=`${y}/api/audio/stream/${v}`}const g=d?`style="width: ${d}; max-width: 100%; height: auto;"`:"";return`<img src="${p}" ${g} ${d?'class="rounded-lg my-4 shadow-md border border-neutral-200"':'class="max-w-full h-auto rounded-lg my-4 shadow-md border border-neutral-200"'} />`}),yg=n=>{if(!n)return"";const r=n.replace(/\\n/g,`
`);let i=u2(r);i=d2(i),i=f2(i),i=p2(i),i=h2(i),i=r2(i),i=i2(i),i=o2(i),i=c2(i),i=l2(i);const o=i.split(`
`),f=[],d=[],p=(g=0)=>{for(;d.length>g;){const h=d.pop();f.push(h.type==="ul"?"</ul>":"</ol>")}};for(let g=0;g<o.length;g++){const h=o[g],m=h.trim();if(!m&&d.length===0){f.push('<br class="block my-2" />');continue}const y=s2(o.slice(g));if(y){p(0),f.push(y.html),g+=y.consumed-1;continue}if(/^([-*_])\s*(\1\s*){2,}$/.test(m)){p(0),f.push('<hr class="my-6 border-t-2 border-neutral-100" />');continue}if(m.startsWith("# ")){p(0),f.push(`<h1 class="text-3xl font-black text-neutral-900 mb-4 mt-8 pb-2 border-b border-neutral-100 leading-tight">${m.substring(2)}</h1>`);continue}if(m.startsWith("## ")){p(0),f.push(`<h2 class="text-xl font-extrabold text-neutral-800 mb-3 mt-6 leading-tight">${m.substring(3)}</h2>`);continue}if(m.startsWith("### ")){p(0),f.push(`<h3 class="text-lg font-bold text-neutral-700 mb-2 mt-4 leading-tight">${m.substring(4)}</h3>`);continue}if(m.startsWith("#### ")){p(0),f.push(`<h4 class="text-sm font-bold text-neutral-600 mb-1 mt-3 uppercase tracking-wider">${m.substring(5)}</h4>`);continue}if(m.startsWith("> ")){p(0),f.push(`<blockquote class="border-l-4 border-amber-400 bg-amber-50 pl-4 py-3 pr-2 my-4 rounded-r-lg text-sm text-neutral-700 font-medium italic shadow-sm">${m.substring(2)}</blockquote>`);continue}const v=m.match(/^\[(?!(HIDDEN:|Quiz:|Select:|QUIZ:|Multi:|Formula:|Audio-|IMG|(\/\])))(.*)\]$/);if(v){p(0);const _='<svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="shrink-0 mt-0.5 text-sky-500"><path d="M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.8 1.3 1.5 1.5 2.5"/><path d="M9 18h6"/><path d="M10 22h4"/></svg>',j=v[3].trim();f.push(`
                <div class="flex items-start gap-3 my-4 p-4 bg-sky-50 border-l-4 border-sky-400 rounded-r-lg shadow-sm">
                    ${_}
                    <div class="text-sm text-sky-900 font-medium leading-relaxed">
                        ${j}
                    </div>
                </div>
            `);continue}const w=h.match(/^(\s*)/),N=w?w[0].length:0,O=h.match(/^\s*[-*]\s+(.*)/),I=h.match(/^\s*(\d+)\.\s+(.*)/);if(O||I){const _=O?"ul":"ol",j=O?O[1]:I[2],L=I?I[1]:void 0;if(d.length===0||N>d[d.length-1].indent)f.push(_==="ul"?'<ul class="list-disc list-outside pl-5 my-3 space-y-1 text-neutral-700 marker:text-neutral-400">':'<ol class="list-decimal list-outside pl-5 my-3 space-y-1 text-neutral-700 marker:font-bold marker:text-neutral-500">'),d.push({type:_,indent:N});else if(N<d[d.length-1].indent)for(;d.length>0&&N<d[d.length-1].indent;)p(d.length-1);_==="ol"&&L?f.push(`<li value="${L}" class="pl-1">${j}</li>`):f.push(`<li class="pl-1">${j}</li>`);continue}m!==""&&(p(0),f.push(`<p class="mb-2 leading-relaxed text-neutral-600">${h}</p>`))}return p(0),f.join("").replace(/!\[(.*?)\]\((.*?)\)/g,(g,h,m)=>{let y=m;if(!m.startsWith("http")){const v=rt(),w=Mt(v),N=m.startsWith("/")?m.slice(1):m;N.startsWith("api/")?y=`${w}/${N}`:y=`${w}/api/audio/stream/${N}`}return`<img alt="${h}" src="${y}" class="max-w-full h-auto rounded-lg my-4 shadow-md border border-neutral-200" />`}).replace(/\[(.*?)\]\((.*?)\)/g,'<a href="$2" target="_blank" rel="noopener noreferrer" class="text-indigo-600 font-bold hover:underline">$1</a>').replace(/\*\*(.*?)\*\*/g,'<strong class="font-black text-neutral-900">$1</strong>').replace(/\*(.*?)\*/g,'<span class="italic font-normal text-inherit">$1</span>').replace(/`([^`]+)`/g,'<code class="bg-neutral-100 text-pink-600 px-1.5 py-0.5 rounded text-xs font-mono font-bold border border-neutral-200">$1</code>')},m2=({score:n})=>{const f=2*Math.PI*16,d=f-n/100*f;let p="text-neutral-400";return n>=80?p="text-green-500":n>=50?p="text-yellow-500":n>0&&(p="text-orange-500"),l.jsxs("div",{className:"relative flex items-center justify-center",style:{width:36,height:36},children:[l.jsxs("svg",{className:"absolute",width:36,height:36,children:[l.jsx("circle",{className:"text-neutral-100",stroke:"currentColor",strokeWidth:4,fill:"transparent",r:16,cx:36/2,cy:36/2}),l.jsx("circle",{className:p,stroke:"currentColor",strokeWidth:4,fill:"transparent",r:16,cx:36/2,cy:36/2,strokeDasharray:f,strokeDashoffset:d,strokeLinecap:"round",style:{transform:"rotate(-90deg)",transformOrigin:"50% 50%",transition:"stroke-dashoffset 0.5s ease-out"}})]}),l.jsx("span",{className:`text-[10px] font-black ${p}`,children:n})]})},g2=({word:n})=>{const r=n.masteryScore??0;return l.jsxs("div",{className:"relative group/score",children:[l.jsx(m2,{score:r}),l.jsxs("div",{className:"absolute top-full left-1/2 -translate-x-1/2 mt-2 w-max px-3 py-1.5 bg-neutral-800 text-white text-[10px] font-black rounded-lg opacity-0 group-hover/score:opacity-100 transition-opacity pointer-events-none z-10 uppercase tracking-wider",children:["Mastery Score",l.jsx("div",{className:"absolute bottom-full left-1/2 -translate-x-1/2 w-2 h-2 bg-neutral-800 rotate-45"})]})]})},x2=({register:n})=>{if(!n||n==="neutral"||n==="raw")return null;const r={academic:"bg-purple-100 text-purple-800 border-purple-200",casual:"bg-sky-100 text-sky-800 border-sky-200"},i={academic:"ACADEMIC",casual:"CASUAL"};return l.jsx("span",{className:`px-2 py-0.5 rounded text-[8px] font-black uppercase border ${r[n]}`,children:i[n]})},y2=n=>{const r={intensified:"bg-orange-100 text-orange-700 border-orange-200",softened:"bg-blue-100 text-blue-700 border-blue-200",synonym:"bg-neutral-100 text-neutral-600 border-neutral-200",academic:"bg-purple-100 text-purple-700 border-purple-200",casual:"bg-sky-100 text-sky-700 border-sky-200"};return l.jsx("span",{className:`px-2 py-0.5 rounded text-[8px] font-black uppercase border ${r[n]||r.synonym}`,children:n})},bg=({label:n,options:r,selectedId:i,onSelect:o,buttonClass:f,disabled:d=!1})=>{const[p,g]=E.useState(!1),h=E.useRef(null),m=r.find(y=>y.id===i)||r[0];return E.useEffect(()=>{const y=v=>{h.current&&!h.current.contains(v.target)&&g(!1)};return document.addEventListener("mousedown",y),()=>document.removeEventListener("mousedown",y)},[]),l.jsxs("div",{className:"relative",ref:h,children:[l.jsxs("button",{type:"button",onClick:()=>g(!p),className:f,disabled:d,children:[n&&l.jsx("span",{className:"text-[9px] font-black uppercase tracking-widest text-neutral-400 mr-2",children:n}),m.icon,l.jsx("span",{className:"text-xs font-black uppercase tracking-wider",children:m.label}),l.jsx(py,{size:14,className:`transition-transform duration-200 ${p?"rotate-180":""}`})]}),p&&!d&&l.jsx("div",{className:"absolute right-0 top-full mt-2 w-48 bg-white rounded-2xl shadow-xl border border-neutral-100 z-50 p-2 overflow-hidden animate-in fade-in zoom-in-95 flex flex-col gap-1",children:r.map(y=>l.jsxs("button",{type:"button",onClick:()=>{o(y.id),g(!1)},className:`w-full flex items-center gap-3 px-3 py-2.5 rounded-lg text-xs font-bold transition-colors ${i===y.id?"bg-neutral-100 text-neutral-900":"text-neutral-600 hover:bg-neutral-50 hover:text-neutral-900"}`,children:[y.icon,l.jsx("span",{children:y.label})]},y.id))})]})},b2=({word:n,onClose:r,onChallengeRequest:i,onMimicRequest:o,onEditRequest:f,onUpdate:d,linkedUnits:p,relatedWords:g,relatedByGroup:h,onNavigateToWord:m,onAddVariantToLibrary:y,addingVariant:v,existingVariants:w,isViewOnly:N=!1,appliedAccent:O,initialTab:I="OVERVIEW",onGenerateLesson:_})=>{var he,B,le,J,ee,ye,ve,Ce,it,be,pe,Pe,Qe;const[j,L]=E.useState(()=>Ni("ielts_pro_word_view_settings",{showHidden:!1,highlightFailed:!0,isLearnView:!0})),[D,M]=E.useState(!1),[P,Y]=E.useState(I),[U,G]=E.useState(new Set),A=E.useRef(null),V=re=>{Sa(re),(async()=>{try{const Ae=Mt(rt()),Re=re.trim().toLowerCase(),Xe=await fetch(`${Ae}/api/lookup/cambridge/cache?word=${encodeURIComponent(Re)}`,{cache:"no-store"});if(Xe.ok){const Ze=await Xe.text(),dt=Ze?JSON.parse(Ze):null;if(dt!=null&&dt.exists){window.dispatchEvent(new CustomEvent("coach-cambridge-lookup-request",{detail:{word:Re,data:dt}}));return}}const ke=await fetch(`${Ae}/api/lookup/cambridge/simple?word=${encodeURIComponent(Re)}`,{cache:"no-store"});if(!ke.ok)return;const ze=await ke.text(),Ge=ze?JSON.parse(ze):null;if(!(Ge!=null&&Ge.exists))return;window.dispatchEvent(new CustomEvent("coach-cambridge-lookup-request",{detail:{word:Re,data:Ge}}))}catch{}})()};E.useEffect(()=>{Xf("ielts_pro_word_view_settings",j)},[j]);const F=(re,Ae)=>L(Re=>({...Re,[re]:Ae}));E.useEffect(()=>{const re=Ae=>{A.current&&!A.current.contains(Ae.target)&&M(!1)};return document.addEventListener("mousedown",re),()=>document.removeEventListener("mousedown",re)},[]),E.useEffect(()=>(window.handleLessonSpeak=re=>Sa(re),()=>{delete window.handleLessonSpeak}),[]);const $=[{id:"NEW",label:"New",icon:l.jsx("div",{className:"w-3 h-3 rounded-full bg-blue-500"})},{id:nt.LEARNED,label:"Learned",icon:l.jsx("div",{className:"w-3 h-3 rounded-full bg-cyan-500"})},{id:nt.FORGOT,label:"Forgot",icon:l.jsx("div",{className:"w-3 h-3 rounded-full bg-rose-500"})},{id:nt.HARD,label:"Hard",icon:l.jsx("div",{className:"w-3 h-3 rounded-full bg-orange-500"})},{id:nt.EASY,label:"Easy",icon:l.jsx("div",{className:"w-3 h-3 rounded-full bg-green-500"})}],ae=n.lastReview&&n.lastGrade||"NEW",me=re=>{if(!N)if(re==="NEW"){const Ae=Cb(n);d(Ae)}else{const Ae=Ob(n,re);d(Ae)}},fe=[{id:pt.RAW,label:"Raw",icon:l.jsx(by,{size:14,className:"text-neutral-400"})},{id:pt.REFINED,label:"Needs Review",icon:l.jsx(Cy,{size:14,className:"text-indigo-500"})},{id:pt.VERIFIED,label:"Verified",icon:l.jsx(jy,{size:14,className:"text-emerald-500"})},{id:pt.FAILED,label:"Incorrect",icon:l.jsx(Iy,{size:14,className:"text-rose-500"})}],C=(re,Ae,Re,Xe)=>{const ke=Array.isArray(Ae)?Ae.filter(ze=>j.showHidden||!ze.isIgnored):[];return ke.length===0?null:l.jsxs("div",{className:"space-y-1",children:[l.jsx("span",{className:`text-[8px] font-black uppercase text-${Re}-600 tracking-widest ml-1`,children:re}),l.jsx("div",{className:"flex flex-col gap-1",children:ke.map((ze,Ge)=>{var qt,It;const Ze=w.has(ze.word.toLowerCase()),dt=`WORD_FAMILY:${Xe}:${ze.word.toLowerCase().trim()}`,ts=n.lastTestResults&&dt in n.lastTestResults,Cn=ts?n.lastTestResults[dt]:void 0;let vn=!1;if(ts)vn=Cn===!1;else{const ca=`WORD_FAMILY_${Xe.toUpperCase()}`,Da=(qt=n.lastTestResults)==null?void 0:qt[ca];(Da===!1||Da===void 0&&((It=n.lastTestResults)==null?void 0:It.WORD_FAMILY)===!1)&&(vn=!0)}const Sn=j.highlightFailed&&vn&&!ze.isIgnored,Dt=ze.isIgnored;let vt="bg-white border-neutral-100 hover:border-neutral-300";return Sn?vt="bg-red-50 border-red-200 hover:border-red-300":Dt&&(vt="bg-neutral-50/50 border-neutral-100 opacity-60"),l.jsxs("div",{className:`flex items-center justify-between px-2 py-1.5 rounded-lg border group transition-colors ${vt}`,children:[" ",l.jsxs("div",{className:"flex flex-col overflow-hidden",children:[" ",l.jsxs("div",{className:"flex items-center gap-1.5",children:[" ",l.jsx("span",{className:`text-[10px] font-bold truncate ${Sn?"text-red-700":"text-neutral-900"} ${Dt?"line-through decoration-neutral-400":""}`,children:ze.word})," ",l.jsx("button",{onClick:ca=>{ca.stopPropagation(),Sa(ze.word)},className:"text-neutral-300 hover:text-indigo-500 transition-colors p-0.5",children:l.jsx(cn,{size:10})})," ",Sn&&l.jsx(Kn,{size:10,className:"text-red-500 fill-red-100 shrink-0"})," "]})," "]})," ",l.jsx("button",{type:"button",disabled:v===ze.word||Ze,onClick:()=>y({word:ze.word,ipa:""},"family"),className:`p-1 rounded-md transition-all ${Ze?"text-green-500 cursor-default":"text-neutral-300 hover:text-neutral-900 hover:bg-neutral-100"}`,children:v===ze.word?l.jsx(At,{size:10,className:"animate-spin"}):Ze?l.jsx(on,{size:10}):l.jsx(In,{size:10})})," "]},Ge)})})]})},ne=({title:re,icon:Ae,children:Re,className:Xe})=>l.jsxs("div",{className:`space-y-2 ${Xe||""}`,children:[l.jsxs("div",{className:"flex items-center gap-1.5 text-[10px] font-black uppercase tracking-widest text-neutral-400 border-b border-neutral-100 pb-1 mb-2",children:[l.jsx(Ae,{size:12}),l.jsx("span",{children:re})]}),Re]}),te=cw(n.nextReview),q=!!(n.wordFamily&&((he=n.wordFamily.nouns)!=null&&he.length||(B=n.wordFamily.verbs)!=null&&B.length||(le=n.wordFamily.adjs)!=null&&le.length||(J=n.wordFamily.advs)!=null&&J.length)),z=(n.prepositions||[]).filter(re=>j.showHidden||!re.isIgnored),b=(n.collocationsArray||[]).filter(re=>j.showHidden||!re.isIgnored),T=(n.idiomsList||[]).filter(re=>j.showHidden||!re.isIgnored),k=(n.paraphrases||[]).filter(re=>j.showHidden||!re.isIgnored),Q=j.highlightFailed&&((ee=n.lastTestResults)==null?void 0:ee.SPELLING)===!1;j.highlightFailed&&(((ye=n.lastTestResults)==null?void 0:ye.IPA_QUIZ)===!1||((ve=n.lastTestResults)==null||ve.PRONUNCIATION)),E.useMemo(()=>{if(!n.wordFamily)return[];const re=[],Ae=["nouns","verbs","adjs","advs"],Re={nouns:"Noun",verbs:"Verb",adjs:"Adjective",advs:"Adverb"};return Ae.forEach(Xe=>{(n.wordFamily[Xe]||[]).forEach(ke=>{(j.showHidden||!ke.isIgnored)&&re.push({word:ke.word,type:Re[Xe],ipa:ke.ipaUs})})}),re},[n.wordFamily,j.showHidden]);const ue=E.useMemo(()=>{var re;return(re=n.lesson)!=null&&re.essay?yg(n.lesson.essay):null},[(Ce=n.lesson)==null?void 0:Ce.essay]),ie=E.useMemo(()=>{var re;return(re=n.lesson)!=null&&re.test?yg(n.lesson.test):null},[(it=n.lesson)==null?void 0:it.test]);return l.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center p-4 bg-black/40 backdrop-blur-sm animate-in fade-in duration-200",children:l.jsxs("div",{className:"bg-white w-full max-w-6xl rounded-[2.5rem] shadow-2xl overflow-hidden flex flex-col max-h-[90vh]",children:[l.jsx("header",{className:"px-8 py-4 border-b border-neutral-100 bg-neutral-50/30 flex flex-col gap-1 shrink-0",children:l.jsxs("div",{className:"flex justify-between items-start w-full gap-4",children:[l.jsx("div",{className:"flex-1",children:l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("h2",{className:`text-2xl font-black tracking-tight leading-none ${Q?"text-red-600":"text-neutral-900"}`,children:n.word}),Q&&l.jsx(Kn,{size:16,className:"text-red-500 fill-red-100"}),!n.isPassive&&l.jsxs(l.Fragment,{children:[l.jsx("button",{onClick:re=>{re.stopPropagation(),V(n.word)},className:"p-2 text-neutral-400 hover:bg-neutral-100 hover:text-neutral-900 rounded-full transition-colors",title:"Pronounce",children:l.jsx(cn,{size:18})}),l.jsx("button",{onClick:re=>{re.stopPropagation(),o()},className:"p-2 text-neutral-400 hover:bg-neutral-100 hover:text-neutral-900 rounded-full transition-colors",title:"Mimic",children:l.jsx(pl,{size:18})})]}),l.jsxs("div",{className:"relative group",children:[l.jsx("button",{className:"p-2 text-neutral-400 hover:bg-neutral-100 hover:text-neutral-900 rounded-full transition-colors",children:l.jsx(nc,{size:18})}),l.jsxs("div",{className:"absolute top-full left-1/2 -translate-x-1/2 mt-2 w-max max-w-xs px-3 py-2 bg-neutral-800 text-white text-xs font-bold rounded-lg opacity-0 group-hover:opacity-100 transition-opacity pointer-events-none z-10",children:[n.meaningVi,l.jsx("div",{className:"absolute bottom-full left-1/2 -translate-x-1/2 w-2 h-2 bg-neutral-800 rotate-45"})]})]}),l.jsx(g2,{word:n})]})}),l.jsxs("div",{className:"flex items-center gap-2 flex-shrink-0",children:[l.jsx(bg,{options:$,selectedId:ae,onSelect:me,buttonClass:"flex items-center gap-2 px-3 py-2 bg-white rounded-lg hover:bg-neutral-100 transition-colors shadow-sm border border-neutral-200",disabled:N}),l.jsxs("div",{className:"relative",ref:A,children:[l.jsx("button",{onClick:()=>M(!D),className:`p-2 rounded-lg transition-colors ${D?"bg-neutral-900 text-white shadow-sm":"bg-white border border-neutral-200 text-neutral-400 hover:text-neutral-900"}`,title:"View Options",children:l.jsx(bi,{size:16})}),D&&l.jsxs("div",{className:"absolute right-0 top-full mt-2 w-56 bg-white rounded-2xl shadow-xl border border-neutral-100 z-50 p-2 overflow-hidden animate-in fade-in zoom-in-95 flex flex-col gap-1",children:[l.jsx("div",{className:"px-3 py-2 text-[9px] font-black text-neutral-400 uppercase tracking-widest border-b border-neutral-50",children:"View Options"}),l.jsxs("button",{onClick:()=>F("isLearnView",!j.isLearnView),className:"w-full flex items-center justify-between px-3 py-2 rounded-lg hover:bg-neutral-50 text-xs font-bold text-neutral-700 transition-colors",children:[l.jsx("span",{children:"Learn View"}),j.isLearnView?l.jsx(on,{size:14,className:"text-green-500"}):l.jsx("div",{className:"w-4 h-4 rounded-full border border-neutral-200"})]}),l.jsxs("button",{onClick:()=>F("showHidden",!j.showHidden),className:"w-full flex items-center justify-between px-3 py-2 rounded-lg hover:bg-neutral-50 text-xs font-bold text-neutral-700 transition-colors",children:[l.jsx("span",{children:"Show Ignored Items"}),j.showHidden?l.jsx(on,{size:14,className:"text-green-500"}):l.jsx("div",{className:"w-4 h-4 rounded-full border border-neutral-200"})]}),l.jsxs("button",{onClick:()=>F("highlightFailed",!j.highlightFailed),className:"w-full flex items-center justify-between px-3 py-2 rounded-lg hover:bg-neutral-50 text-xs font-bold text-neutral-700 transition-colors",children:[l.jsx("span",{children:"Highlight Failed"}),j.highlightFailed?l.jsx(on,{size:14,className:"text-green-500"}):l.jsx("div",{className:"w-4 h-4 rounded-full border border-neutral-200"})]})]})]}),!N&&l.jsxs(l.Fragment,{children:[l.jsx("button",{onClick:i,className:"p-2 bg-amber-100 text-amber-600 hover:text-amber-900 rounded-lg hover:bg-amber-200 transition-colors",title:"Practice",children:l.jsx(fy,{size:16})}),l.jsx("button",{onClick:f,className:"p-2 bg-neutral-100 text-neutral-600 hover:text-neutral-900 rounded-lg hover:bg-neutral-200 transition-colors",children:l.jsx(cE,{size:16})})]}),l.jsx("button",{onClick:r,className:"p-2 bg-white border border-neutral-200 text-neutral-400 hover:text-neutral-900 rounded-lg transition-colors",children:l.jsx(Ut,{size:16})})]})]})}),l.jsxs("nav",{className:"px-8 border-b border-neutral-100 bg-white flex items-center gap-6 shrink-0 overflow-x-auto no-scrollbar",children:[l.jsx("button",{onClick:()=>Y("OVERVIEW"),className:`py-3 px-1 text-[10px] font-black uppercase tracking-widest border-b-2 transition-all ${P==="OVERVIEW"?"border-neutral-900 text-neutral-900":"border-transparent text-neutral-400 hover:text-neutral-600"}`,children:"Overview"}),l.jsxs("button",{onClick:()=>Y("USAGE"),className:`py-3 px-1 text-[10px] font-black uppercase tracking-widest border-b-2 transition-all flex items-center gap-2 ${P==="USAGE"?"border-indigo-600 text-indigo-600":"border-transparent text-neutral-400 hover:text-neutral-600"}`,children:[l.jsx(Ko,{size:14})," Usage"]}),l.jsxs("button",{onClick:()=>Y("TEST"),className:`py-3 px-1 text-[10px] font-black uppercase tracking-widest border-b-2 transition-all flex items-center gap-2 ${P==="TEST"?"border-emerald-600 text-emerald-600":"border-transparent text-neutral-400 hover:text-neutral-600"}`,children:[l.jsx(uf,{size:14})," Practice Test"]})]}),l.jsxs("div",{className:"flex-1 overflow-y-auto no-scrollbar px-6 pt-4 pb-8 bg-neutral-50/20",children:[P==="OVERVIEW"&&l.jsxs("div",{className:"space-y-6 animate-in fade-in duration-300",children:[l.jsxs("div",{className:"px-2 py-3 bg-white border border-neutral-100 rounded-2xl flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4 shadow-sm",children:[l.jsxs("div",{className:"flex items-center gap-4 flex-wrap",children:[l.jsx("div",{className:"flex flex-col",children:l.jsx("p",{className:"px-2 py-1 bg-neutral-50 rounded-lg text-sm font-mono font-medium border border-neutral-200 text-neutral-500",children:n.ipaUs||"/?/"})}),l.jsxs("div",{className:"flex flex-col",children:[l.jsx(x2,{register:n.register}),(!n.register||n.register==="raw")&&l.jsx("span",{className:"px-2 py-1 bg-neutral-100 text-neutral-400 rounded-lg text-[10px] font-black uppercase tracking-tighter border border-neutral-200",children:"Neutral"})]})]}),l.jsxs("div",{className:"flex items-center gap-4",children:[l.jsx(bg,{label:"Quality",options:fe,selectedId:n.quality,onSelect:re=>d({...n,quality:re}),buttonClass:"flex items-center gap-2 p-1.5 bg-neutral-50 border border-neutral-200 hover:bg-neutral-100 rounded-xl transition-all",disabled:N}),!n.isPassive&&l.jsx("div",{className:"flex flex-col items-end",children:l.jsxs("div",{className:"flex items-center gap-1.5 px-2 py-1 bg-neutral-50 border border-neutral-200 rounded-lg text-xs font-bold text-neutral-500",title:`Next Review: ${te.label}`,children:[l.jsx(hy,{size:12}),l.jsx("span",{className:`text-[11px] font-black uppercase ${te.urgency==="due"?"text-rose-500":"text-green-600"}`,children:te.label})]})})]})]}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[n.note&&l.jsx("div",{className:"md:col-span-4",children:l.jsx("p",{className:"text-sm text-neutral-700 bg-yellow-50/50 p-4 rounded-xl border border-yellow-100 italic leading-relaxed whitespace-pre-wrap",children:n.note})}),l.jsx(ne,{title:"Examples",icon:lc,className:"md:col-span-4",children:n.example?l.jsx("div",{className:"flex flex-col gap-2",children:n.example.split(`
`).filter(re=>re.trim()!=="").map((re,Ae)=>l.jsxs("div",{className:"flex items-start gap-2 px-3 py-2 bg-neutral-50 border border-neutral-100 rounded-xl group hover:border-neutral-200 transition-all",children:[l.jsx("span",{className:"text-sm font-medium text-neutral-700 leading-relaxed flex-1 select-text cursor-text",children:re}),l.jsx("button",{onClick:()=>Sa(re),className:"p-1.5 text-neutral-400 hover:text-indigo-500 hover:bg-white rounded-lg transition-all shrink-0",children:l.jsx(cn,{size:14})})]},Ae))}):l.jsx("div",{className:"text-[10px] text-neutral-300 italic px-1",children:"No examples added."})}),l.jsxs("div",{className:"space-y-1 md:col-span-4",children:[l.jsxs("label",{className:"text-[10px] font-black text-neutral-400 uppercase tracking-widest flex items-center gap-1",children:[l.jsx(If,{size:10})," Prepositions"]}),z.length>0?l.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-5 gap-2 bg-white border border-neutral-100 p-3 rounded-xl shadow-sm",children:z.map((re,Ae)=>{var ze,Ge;const Re=`PREPOSITION_QUIZ:${re.prep}`,Xe=(ze=n.lastTestResults)==null?void 0:ze[Re],ke=j.highlightFailed&&(Xe===!1||Xe===void 0&&((Ge=n.lastTestResults)==null?void 0:Ge.PREPOSITION_QUIZ)===!1)&&!re.isIgnored;return l.jsxs("div",{className:`flex items-center justify-between gap-3 p-2 rounded-lg border transition-colors ${ke?"bg-red-50 border-red-200":"bg-neutral-50/30 border-neutral-100"} ${re.isIgnored?"opacity-50":""}`,children:[l.jsxs("div",{className:"flex items-center gap-2 min-w-0",children:[ke&&l.jsx(Kn,{size:10,className:"text-red-500 shrink-0"}),l.jsx("span",{className:`font-bold text-xs shrink-0 ${ke?"text-red-700":"text-neutral-900"} ${re.isIgnored?"line-through":""}`,children:re.prep}),l.jsx("span",{className:`font-medium text-[10px] truncate ${ke?"text-red-400":"text-neutral-500"}`,children:re.usage})]}),re.usage&&l.jsx("button",{onClick:()=>Sa(re.usage),className:"text-neutral-300 hover:text-indigo-500 transition-colors p-1 shrink-0",children:l.jsx(cn,{size:12})})]},Ae)})}):l.jsx("div",{className:"text-[10px] text-neutral-300 italic px-1",children:"No prepositions."})]}),l.jsxs("div",{className:"space-y-1 md:col-span-4",children:[l.jsxs("label",{className:"text-[10px] font-black text-neutral-400 uppercase tracking-widest flex items-center gap-1",children:[l.jsx(Ay,{size:10})," Word Family"]}),l.jsx("div",{className:"p-3 bg-neutral-50 rounded-xl border border-neutral-100",children:q?l.jsxs("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-3",children:[C("Nouns",(be=n.wordFamily)==null?void 0:be.nouns,"blue","nouns"),C("Verbs",(pe=n.wordFamily)==null?void 0:pe.verbs,"green","verbs"),C("Adjectives",(Pe=n.wordFamily)==null?void 0:Pe.adjs,"orange","adjs"),C("Adverbs",(Qe=n.wordFamily)==null?void 0:Qe.advs,"purple","advs")]}):l.jsx("span",{className:"text-[10px] text-neutral-300 italic",children:"No family data available."})})]}),l.jsxs("div",{className:"space-y-1 md:col-span-4",children:[l.jsxs("label",{className:"text-[10px] font-black text-neutral-400 uppercase tracking-widest flex items-center gap-1",children:[l.jsx(sc,{size:10})," Collocations"]}),b.length>0?l.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-5 gap-2 bg-white border border-neutral-200 p-3 rounded-xl",children:b.map((re,Ae)=>{var Ze,dt;const Re=w.has(re.text.toLowerCase()),Xe=`COLLOCATION_QUIZ:${re.text}`,ke=(Ze=n.lastTestResults)==null?void 0:Ze[Xe];let ze=!1;j.highlightFailed&&!re.isIgnored&&(ke===!1||ke===void 0&&((dt=n.lastTestResults)==null?void 0:dt.COLLOCATION_QUIZ)===!1)&&(ze=!0);let Ge="bg-indigo-50/50 border-indigo-100 text-indigo-900";return ze?Ge="bg-red-50 border-red-200 text-red-700":re.isIgnored&&(Ge="bg-neutral-50 border-neutral-100 text-neutral-400"),l.jsxs("div",{className:`flex items-start justify-between gap-2 px-3 py-2 rounded-lg border text-xs font-bold transition-colors ${Ge}`,children:[l.jsxs("div",{className:"flex-1 overflow-hidden",children:[ze&&l.jsx(Kn,{size:12,className:"text-red-500 shrink-0"}),l.jsx("span",{className:`truncate ${re.isIgnored?"line-through":""}`,title:re.text,children:re.text}),re.d&&!re.isIgnored&&l.jsx("div",{className:"text-[10px] italic text-neutral-400 mt-0.5 normal-case font-medium",children:re.d})]}),l.jsx("button",{onClick:()=>Sa(re.text),className:"text-neutral-300 hover:text-indigo-500 transition-colors p-0.5",children:l.jsx(cn,{size:10})}),l.jsx("button",{type:"button",disabled:v===re.text||Re||re.isIgnored,onClick:()=>y({word:re.text,ipa:""},"collocation"),className:`p-1 rounded-md transition-all shrink-0 ${Re?"text-green-500 cursor-default":re.isIgnored?"text-neutral-300 cursor-not-allowed":"text-neutral-400 hover:text-neutral-900 hover:bg-white/50"}`,title:Re?"Already in library":"Add to library",children:v===re.text?l.jsx(At,{size:12,className:"animate-spin"}):Re?l.jsx(on,{size:12}):l.jsx(In,{size:12})})]},Ae)})}):l.jsx("div",{className:"text-[10px] text-neutral-300 italic px-1",children:"No collocations."})]}),l.jsxs("div",{className:"space-y-1 md:col-span-4",children:[l.jsxs("label",{className:"text-[10px] font-black text-neutral-400 uppercase tracking-widest flex items-center gap-1",children:[l.jsx(oc,{size:10,className:"text-amber-500"})," Variations"]}),k.length>0?l.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-5 gap-3",children:k.map((re,Ae)=>{var Ze,dt;const Re=w.has(re.word.toLowerCase()),Xe=`PARAPHRASE_QUIZ:${re.word}`,ke=(Ze=n.lastTestResults)==null?void 0:Ze[Xe],ze=j.highlightFailed&&(ke===!1||ke===void 0&&((dt=n.lastTestResults)==null?void 0:dt.PARAPHRASE_QUIZ)===!1)&&!re.isIgnored,Ge=re.isIgnored;return l.jsxs("div",{className:`flex items-start justify-between gap-2 border px-3 py-2 rounded-xl shadow-sm ${ze?"bg-red-50 border-red-200":Ge?"bg-neutral-50 border-neutral-100 opacity-60":"bg-white border-neutral-200"}`,children:[l.jsxs("div",{className:"flex-1 overflow-hidden",children:[l.jsxs("div",{className:"flex justify-between items-center mb-1",children:[y2(re.tone),ze&&l.jsx(Kn,{size:12,className:"text-red-500 fill-red-100"})]}),l.jsxs("div",{className:"flex items-center gap-1",children:[l.jsx("div",{className:`text-xs font-bold ${ze?"text-red-800":"text-neutral-800"} ${Ge?"line-through":""}`,children:re.word}),l.jsx("button",{onClick:()=>Sa(re.word),className:"text-neutral-300 hover:text-indigo-500 transition-colors p-0.5",children:l.jsx(cn,{size:10})})]}),l.jsx("div",{className:`text-[10px] italic truncate ${ze?"text-red-400":"text-neutral-400"}`,title:re.context,children:re.context})]}),l.jsx("button",{type:"button",disabled:v===re.word||Re,onClick:()=>y({word:re.word,ipa:""},"paraphrase"),className:`p-1 rounded-md transition-all mt-1 shrink-0 ${Re?"text-green-500 cursor-default":"text-neutral-300 hover:text-neutral-900 hover:bg-neutral-100"}`,children:v===re.word?l.jsx(At,{size:10,className:"animate-spin"}):Re?l.jsx(on,{size:10}):l.jsx(In,{size:10})})]},Ae)})}):l.jsx("div",{className:"text-[10px] text-neutral-300 italic",children:"No variations available."})]}),l.jsxs("div",{className:"space-y-1 md:col-span-4",children:[l.jsxs("label",{className:"text-[10px] font-black text-neutral-400 uppercase tracking-widest flex items-center gap-1",children:[l.jsx(Rf,{size:10})," Related Idioms"]}),T.length>0?l.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-5 gap-2 bg-white border border-neutral-200 p-3 rounded-xl",children:T.map((re,Ae)=>{var Ze,dt;const Re=w.has(re.text.toLowerCase()),Xe=`IDIOM_QUIZ:${re.text}`,ke=(Ze=n.lastTestResults)==null?void 0:Ze[Xe];let ze=!1;j.highlightFailed&&!re.isIgnored&&(ke===!1||ke===void 0&&((dt=n.lastTestResults)==null?void 0:dt.IDIOM_QUIZ)===!1)&&(ze=!0);let Ge="bg-amber-50/50 border-amber-100 text-amber-900";return ze?Ge="bg-red-50 border-red-200 text-red-700":re.isIgnored&&(Ge="bg-neutral-50 border-neutral-100 text-neutral-400"),l.jsxs("div",{className:`flex items-start justify-between gap-2 px-3 py-2 rounded-lg border text-xs font-bold transition-colors ${Ge}`,children:[l.jsxs("div",{className:"flex-1 overflow-hidden",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[ze&&l.jsx(Kn,{size:12,className:"text-red-500 shrink-0"}),l.jsx("span",{className:`truncate ${re.isIgnored?"line-through":""}`,title:re.text,children:re.text}),l.jsx("button",{onClick:()=>Sa(re.text),className:"text-neutral-300 hover:text-indigo-500 transition-colors p-0.5",children:l.jsx(cn,{size:10})})]}),re.d&&!re.isIgnored&&l.jsx("div",{className:"text-[10px] italic text-neutral-400 mt-0.5 normal-case font-medium",children:re.d})]}),l.jsx("button",{type:"button",disabled:v===re.text||Re||re.isIgnored,onClick:()=>y({word:re.text,ipa:""},"idiom"),className:`p-1 rounded-md transition-all shrink-0 ${Re?"text-green-500 cursor-default":re.isIgnored?"text-neutral-300 cursor-not-allowed":"text-neutral-400 hover:text-neutral-900 hover:bg-white/50"}`,title:Re?"Already in library":"Add to library",children:v===re.text?l.jsx(At,{size:12,className:"animate-spin"}):Re?l.jsx(on,{size:12}):l.jsx(In,{size:12})})]},Ae)})}):l.jsx("div",{className:"text-[10px] text-neutral-300 italic px-1",children:"No related idioms found."})]})]})]}),P==="USAGE"&&l.jsxs("div",{className:"animate-in fade-in slide-in-from-bottom-2 duration-500 flex flex-col h-full space-y-8",children:[ue?l.jsx("div",{className:"prose prose-sm max-w-none prose-headings:font-black prose-headings:text-neutral-900 prose-p:text-neutral-600 prose-p:leading-relaxed prose-img:rounded-xl prose-img:shadow-md prose-strong:text-neutral-900 prose-a:text-indigo-600 overflow-x-auto",dangerouslySetInnerHTML:{__html:ue}}):l.jsxs("div",{className:"flex flex-col items-center justify-center py-20 bg-white border-2 border-dashed border-neutral-200 rounded-[2.5rem] space-y-4",children:[l.jsx("div",{className:"p-4 bg-indigo-50 rounded-full text-indigo-600",children:l.jsx(Ko,{size:32})}),l.jsxs("div",{className:"text-center",children:[l.jsx("p",{className:"font-black text-neutral-900",children:"No Usage Guide"}),l.jsx("p",{className:"text-xs text-neutral-400 font-medium",children:"Generate a structural guide with tables and examples."})]}),!N&&l.jsxs("button",{onClick:()=>_==null?void 0:_("ESSAY"),className:"px-6 py-3 bg-neutral-900 text-white rounded-2xl font-black text-xs uppercase tracking-widest flex items-center gap-2 hover:bg-neutral-800 transition-all active:scale-95 shadow-lg",children:[l.jsx(or,{size:16})," Generate Usage Guide"]})]}),ue&&!N&&l.jsx("div",{className:"flex justify-center border-t border-neutral-100 pt-6",children:l.jsxs("button",{onClick:()=>_==null?void 0:_("ESSAY"),className:"flex items-center gap-2 px-4 py-2 bg-neutral-50 text-neutral-500 hover:text-indigo-600 hover:bg-indigo-50 border border-neutral-200 hover:border-indigo-200 rounded-xl text-[10px] font-black uppercase tracking-widest transition-all",children:[l.jsx(ir,{size:12})," ",l.jsx("span",{children:"Refresh Usage Guide"})]})})]}),P==="TEST"&&l.jsxs("div",{className:"animate-in fade-in slide-in-from-bottom-2 duration-500 flex flex-col h-full space-y-8",children:[ie?l.jsx("div",{className:"prose prose-sm max-w-none prose-headings:font-black prose-headings:text-neutral-900 prose-p:text-neutral-600 prose-p:leading-relaxed prose-img:rounded-xl prose-img:shadow-md prose-strong:text-neutral-900 prose-a:text-indigo-600",dangerouslySetInnerHTML:{__html:ie}}):l.jsxs("div",{className:"flex flex-col items-center justify-center py-20 bg-white border-2 border-dashed border-neutral-200 rounded-[2.5rem] space-y-4",children:[l.jsx("div",{className:"p-4 bg-emerald-50 rounded-full text-emerald-600",children:l.jsx(uf,{size:32})}),l.jsxs("div",{className:"text-center",children:[l.jsx("p",{className:"font-black text-neutral-900",children:"No Practice Test"}),l.jsx("p",{className:"text-xs text-neutral-400 font-medium",children:"Create an interactive test based on this word's usage."})]}),!N&&l.jsxs("button",{onClick:()=>_==null?void 0:_("TEST"),className:"px-6 py-3 bg-neutral-900 text-white rounded-xl font-black text-xs uppercase tracking-widest flex items-center gap-2 hover:bg-neutral-800 transition-all active:scale-95 shadow-lg",children:[l.jsx(or,{size:16})," Generate Test"]})]}),ie&&!N&&l.jsx("div",{className:"flex justify-center border-t border-neutral-100 pt-6",children:l.jsxs("button",{onClick:()=>_==null?void 0:_("TEST"),className:"flex items-center gap-2 px-4 py-2 bg-neutral-50 text-neutral-500 hover:text-emerald-600 hover:bg-emerald-50 border border-neutral-200 hover:border-emerald-200 rounded-xl text-[10px] font-black uppercase tracking-widest transition-all",children:[l.jsx(ir,{size:12})," ",l.jsx("span",{children:"Regenerate Test"})]})})]})]})]})})},v2=({title:n,type:r,currentStep:i,totalSteps:o,onClose:f,onFinish:d,label:p="Challenge",isQuickFire:g,elapsedTime:h})=>l.jsxs("div",{className:"px-6 py-5 border-b border-neutral-100 flex items-center justify-between bg-neutral-50/50 shrink-0",children:[l.jsx("button",{onClick:f,className:"p-2 -ml-2 text-neutral-400 hover:text-neutral-900 transition-colors",title:g?"Exit to Dashboard":"Close",children:l.jsx(Ut,{size:20})}),l.jsxs("div",{className:"flex flex-col items-center",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsxs("span",{className:"text-[10px] font-black text-neutral-400 uppercase tracking-widest",children:[p," ",i," of ",o]}),h&&l.jsxs("div",{className:"flex items-center gap-1 bg-neutral-200/50 px-1.5 py-0.5 rounded-md",children:[l.jsx(hy,{size:10,className:"text-neutral-500"}),l.jsx("span",{className:"text-[10px] font-mono font-bold text-neutral-600",children:h})]})]}),l.jsx("span",{className:"text-xs font-black text-neutral-900",children:n})]}),l.jsx("button",{onClick:()=>d(g),className:"p-2 -mr-2 text-amber-500 hover:text-amber-700 transition-colors",title:g?"Finish Session & See Results":"Finish & Save",children:l.jsx(nE,{size:20,className:g?"fill-amber-500":""})})]});class s0{constructor(){this.recognition=null,this.finalTranscript="",this.onResultCallback=null,this.onEndCallback=null,this.initBrowserRecognition()}initBrowserRecognition(){const r=window.SpeechRecognition||window.webkitSpeechRecognition;r&&(this.recognition=new r,this.recognition.continuous=!0,this.recognition.interimResults=!0,this.recognition.lang="en-US",this.recognition.onresult=i=>{let o="",f="";for(let d=i.resultIndex;d<i.results.length;++d)i.results[d].isFinal?f+=i.results[d][0].transcript:o+=i.results[d][0].transcript;this.finalTranscript+=f,this.onResultCallback&&this.onResultCallback(this.finalTranscript,o)},this.recognition.onend=()=>{this.onEndCallback&&this.onEndCallback(this.finalTranscript)},this.recognition.onerror=i=>{console.error("Speech Recognition Error:",i.error),this.stop()})}async start(r,i){if(this.onResultCallback=r,this.onEndCallback=i,this.finalTranscript="",!this.recognition){console.error("Speech Recognition not supported in this browser.");return}try{this.recognition.start()}catch(o){console.error("Speech Recognition start failed:",o)}}stop(){if(this.recognition)try{this.recognition.stop()}catch{}}}const l0=({isListening:n,onClick:r,disabled:i,className:o})=>l.jsx("button",{onClick:r,disabled:i,className:`p-2.5 rounded-xl transition-all shadow-sm flex items-center justify-center
            ${n?"bg-red-500 text-white animate-pulse ring-2 ring-red-200 border-transparent":"bg-white border border-neutral-200 text-neutral-400 hover:text-indigo-600 hover:border-indigo-300"} ${o}`,title:n?"Stop Recording":"Use Voice Input",tabIndex:-1,children:n?l.jsx(rc,{size:18,fill:"currentColor"}):l.jsx(pl,{size:18})}),hc=()=>{const[n,r]=E.useState({});return{validationState:n,clearValidation:p=>{r(g=>{if(!g[p])return g;const h={...g};return delete h[p],h})},getValidationClass:p=>{const g=n[p];return g==="correct"?"!border-green-500 !ring-2 !ring-green-100 !bg-green-50 text-green-900":g==="incorrect"?"!border-red-500 !ring-2 !ring-red-100 !bg-red-50 text-red-900":""},handleSmartChange:(p,g,h)=>{const m=p.target.value;if(m===" ")g(h);else if(m.endsWith("  ")){const y=m.substring(0,m.length-2),v=y.length>0?" ":"";g(y+v+h)}else g(m)},handleValidationKeyDown:(p,g,h)=>{if(p.key==="Escape"){p.preventDefault(),p.stopPropagation();const m=p.currentTarget.value,y=w=>w.trim().toLowerCase().replace(/[^a-z0-9]/g,"");let v=!1;if(Array.isArray(h)){const w=m.split(",").map(y).filter(Boolean);if(w.length===0){r(O=>({...O,[g]:null}));return}const N=new Set(h.map(y));v=w.every(O=>N.has(O))}else{const w=y(m);if(!w){r(N=>({...N,[g]:null}));return}v=y(h)===w}r(w=>({...w,[g]:v?"correct":"incorrect"}))}}}},S2=({group:n,userAnswers:r,results:i,onAnswerChange:o,isFinishing:f,showHint:d,toggleListening:p,listeningId:g,containerRef:h})=>{const{clearValidation:m,handleSmartChange:y,handleValidationKeyDown:v,getValidationClass:w}=hc();return l.jsxs("div",{ref:h,className:"flex flex-col animate-in fade-in duration-300",children:[l.jsxs("div",{className:"text-center space-y-2 mb-6",children:[l.jsx("h3",{className:"text-lg font-black text-neutral-900",children:"Preposition Drill"}),l.jsx("p",{className:"text-xs text-neutral-500 font-medium max-w-xs mx-auto",children:"Complete the collocations. Type the missing preposition(s)."})]}),l.jsx("div",{className:"space-y-4",children:n.map(N=>{var U,G;const O=r[N.index]||"",I=i?i[N.index]:null,_=typeof I=="boolean"?I:I&&typeof I=="object"?I.correct:!1,j=I!==null&&!_,L=N.challenge.example.split("___"),D=(U=L[0])==null?void 0:U.trim(),M=(G=L[1])==null?void 0:G.trim(),P=`prep-${N.index}`,Y=g===P;return l.jsxs("div",{className:"w-full bg-neutral-50 border-2 border-neutral-100 rounded-2xl p-5 flex flex-wrap items-center justify-center gap-x-2 gap-y-3 shadow-sm transition-all focus-within:border-neutral-300 focus-within:shadow-md focus-within:bg-white",children:[D&&l.jsx("span",{className:"text-lg font-medium text-neutral-600 text-right",children:D}),l.jsxs("div",{className:"relative mx-1 flex items-center gap-2",children:[l.jsx("input",{type:"text",value:O,onChange:A=>{m(P),y(A,V=>o(N.index,V),N.challenge.answer)},onKeyDown:A=>{v(A,P,N.challenge.answer)},disabled:f,className:`h-10 min-w-[80px] max-w-[160px] w-[12ch] text-center text-lg font-bold rounded-lg border-b-2 outline-none transition-colors ${f?_?"bg-green-50 border-green-500 text-green-700":"bg-red-50 border-red-500 text-red-700 decoration-red-500 line-through decoration-2":`bg-white border-neutral-300 text-neutral-900 focus:border-neutral-900 focus:bg-neutral-50 ${w(P)}`}`,placeholder:"?",autoComplete:"off",autoCorrect:"off",autoCapitalize:"off"}),!f&&l.jsx(l0,{isListening:Y,onClick:()=>p(P,A=>o(N.index,A)),disabled:f}),(f&&j||d)&&l.jsxs("div",{className:"absolute left-1/2 -translate-x-1/2 top-full mt-2 z-10",children:[l.jsxs("div",{className:"bg-neutral-900 text-white text-xs font-bold py-1 px-3 rounded-lg shadow-lg whitespace-nowrap flex items-center gap-1 animate-in zoom-in-95",children:[l.jsx(fi,{size:10,className:"text-green-400"})," ",N.challenge.answer]}),l.jsx("div",{className:"w-2 h-2 bg-neutral-900 rotate-45 absolute left-1/2 -translate-x-1/2 -top-1"})]})]}),M&&l.jsx("span",{className:"text-lg font-medium text-neutral-800 text-left",children:M})]},N.index)})})]})},Md=({challenge:n,answer:r,onAnswer:i,isFinishing:o,result:f,showHint:d,itemLabel:p,instructionText:g,containerRef:h})=>{const[m,y]=E.useState(n.contexts.map(M=>({...M}))),[v,w]=E.useState(n.items.map(M=>({...M}))),[N,O]=E.useState(null),I=(M,P)=>{const Y=new Map(r);if(P===null)Y.delete(M);else{for(const[U,G]of Y.entries())G===P&&Y.delete(U);Y.set(M,P)}i(Y)};E.useEffect(()=>{const M=n.contexts.map(Y=>({...Y})),P=n.items.map(Y=>({...Y}));if(r)for(const[Y,U]of r.entries()){const G=M.findIndex(A=>A.id===Y);G!==-1&&(M[G].matchId=U)}y(M),w(P)},[r,n]);const _=M=>{o||O(P=>P===M?null:M)},j=M=>{o||!N||(I(M,N),O(null))},L=f&&typeof f=="object"&&"details"in f?f.details:{},D=()=>{o||i(new Map)};return l.jsxs("div",{ref:h,className:"flex flex-col gap-4 animate-in fade-in duration-300",children:[l.jsx("div",{className:"text-center",children:l.jsx("p",{className:"text-xs text-neutral-500 font-medium",children:g})}),l.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[l.jsx("div",{className:"space-y-3",children:m.map(M=>{var V;const P=o&&L[M.id]===!0,Y=o&&L[M.id]===!1,U=n.items.find(F=>F.id===M.matchId),G=(V=n.items.find(F=>F.pairId===M.pairId))==null?void 0:V.text;let A="border-neutral-200";return o?(P&&(A="border-green-400 bg-green-50"),Y&&(A="border-red-400 bg-red-50")):d?A="border-yellow-400 bg-yellow-50":M.matchId&&(A="border-neutral-400 bg-neutral-50"),l.jsxs("button",{onClick:()=>j(M.id),disabled:o||!N,className:`relative w-full p-3 rounded-xl border-2 text-left transition-all duration-200 ${A} disabled:cursor-not-allowed`,children:[p(M),l.jsx("p",{className:"font-medium text-xs leading-snug text-neutral-600",children:M.text}),M.matchId&&!o&&!d&&l.jsx("p",{className:"font-bold text-xs mt-2 pt-2 border-t border-neutral-200",children:U==null?void 0:U.text}),d&&!o&&l.jsxs("div",{className:"mt-2 pt-2 border-t flex items-center gap-2 text-yellow-700 animate-in fade-in",children:[l.jsx(rr,{size:14,className:"text-yellow-600"}),l.jsx("p",{className:"font-bold text-xs",children:G})]}),o&&l.jsxs("div",{className:"mt-2 pt-2 border-t flex items-center gap-2",children:[P?l.jsx(rr,{size:14,className:"text-green-500"}):l.jsx(Ut,{size:14,className:"text-red-500"}),l.jsx("p",{className:`font-bold text-xs ${Y?"text-red-700":"text-green-700"}`,children:(U==null?void 0:U.text)||"No selection"})]}),o&&Y&&l.jsxs("p",{className:"text-[10px] text-green-700 font-bold mt-1",children:["Correct: ",G]})]},M.id)})}),l.jsx("div",{className:"space-y-3",children:v.map(M=>{var G;const P=N===M.id,Y=r==null?void 0:r.has(((G=m.find(A=>A.matchId===M.id))==null?void 0:G.id)||"");let U="bg-white border-neutral-200 text-neutral-800 hover:border-neutral-900";return o&&Y?U="bg-neutral-100 border-neutral-200 text-neutral-400 opacity-60":P?U="bg-indigo-600 border-indigo-600 text-white ring-4 ring-indigo-100":Y&&(U="bg-neutral-100 border-neutral-200 text-neutral-400 opacity-60"),l.jsx("button",{onClick:()=>_(M.id),disabled:o||Y,className:`w-full p-3 rounded-xl border-2 text-left transition-all duration-200 disabled:cursor-not-allowed ${U}`,children:l.jsx("p",{className:"font-bold text-sm leading-snug",children:M.text})},M.id)})})]}),r&&r.size>0&&!o&&l.jsx("div",{className:"flex justify-center pt-2",children:l.jsxs("button",{onClick:D,className:"flex items-center gap-1.5 text-xs font-bold text-neutral-500 hover:text-neutral-900 transition-colors",children:[l.jsx(ir,{size:12})," Reset"]})})]})},E2=({challenge:n,onAnswer:r,isFinishing:i,result:o,containerRef:f})=>{const[d,p]=E.useState(!1),[g,h]=E.useState(""),m=E.useRef(null);E.useEffect(()=>{try{m.current=new s0}catch(O){console.error("Speech Recognition not supported",O)}return()=>{var O;(O=m.current)==null||O.stop()}},[]);const y=()=>{m.current&&(h(""),p(!0),m.current.start((O,I)=>h(O+I),O=>{p(!1),r(O)}))},v=()=>{var O;(O=m.current)==null||O.stop()},w=()=>{d?v():y()},N=o===!0;return l.jsxs("div",{ref:f,className:"text-center space-y-8 animate-in fade-in duration-300 flex flex-col items-center",children:[l.jsx("p",{className:"text-sm font-bold text-neutral-500",children:"Press the button and pronounce the word below."}),l.jsx("h2",{className:"text-4xl font-black text-neutral-900 tracking-tight",children:n.word.word}),l.jsx("button",{onClick:w,disabled:i,className:`w-24 h-24 rounded-full flex items-center justify-center shadow-lg transition-all active:scale-95 disabled:opacity-50
                    ${d?"bg-neutral-900 text-white animate-pulse":"bg-red-600 text-white hover:scale-105 shadow-red-500/30"}`,children:d?l.jsx(rc,{size:32,fill:"white"}):l.jsx(pl,{size:32})}),l.jsx("div",{className:"w-full max-w-sm min-h-[6rem] p-4 bg-neutral-50 border border-neutral-200 rounded-xl text-lg font-medium text-neutral-600 italic",children:g||"..."}),i&&l.jsxs("div",{className:`flex items-center gap-2 font-bold text-lg animate-in fade-in slide-in-from-bottom-2 ${N?"text-green-600":"text-red-600"}`,children:[N?l.jsx(FS,{size:20}):l.jsx(QS,{size:20}),l.jsx("span",{children:N?"Correct!":`Not quite. The word was "${n.word.word}".`})]})]})},Ud=({word:n,title:r,cue:i,options:o,answer:f,selected:d,onAnswer:p,isFinishing:g,showHint:h,containerRef:m})=>l.jsxs("div",{ref:m,className:"text-center space-y-6 animate-in fade-in duration-300 flex flex-col",children:[l.jsxs("div",{className:"space-y-1",children:[l.jsx("p",{className:"text-[10px] font-black uppercase text-neutral-400 tracking-widest",children:r}),l.jsx("h2",{className:"text-3xl font-black text-neutral-900",children:n.word}),i&&l.jsx("div",{className:"inline-flex items-center gap-2 bg-neutral-100 px-3 py-1.5 rounded-lg border border-neutral-200 max-w-sm mx-auto mt-2",children:l.jsx("span",{className:"text-xs font-bold text-neutral-700 italic",children:i})})]}),l.jsx("div",{className:"grid grid-cols-1 gap-3",children:o.map((y,v)=>{let w="bg-white border-neutral-200 hover:border-neutral-400 text-neutral-700";return g?y===f?w="bg-green-50 border-green-500 text-green-700 shadow-md ring-1 ring-green-500":y===d&&y!==f?w="bg-red-50 border-red-500 text-red-700 opacity-60":w="bg-neutral-50 border-neutral-100 text-neutral-400 opacity-40":h&&y===f?w="bg-yellow-50 border-yellow-400 text-yellow-800 shadow-md ring-1 ring-yellow-400":d===y&&(w="bg-neutral-900 border-neutral-900 text-white shadow-lg"),l.jsx("button",{disabled:g,onClick:()=>p(y),className:`p-4 rounded-2xl border-2 text-sm font-medium transition-all duration-200 text-left leading-snug active:scale-[0.98] ${w}`,children:y},v)})})]}),Dd=({word:n,title:r,cue:i,contextTag:o,answer:f,userAnswer:d,onAnswer:p,isFinishing:g,result:h,showHint:m,containerRef:y,toggleListening:v,listeningId:w})=>{const{clearValidation:N,handleSmartChange:O,handleValidationKeyDown:I,getValidationClass:_}=hc(),j=h===!0,L=h===!1,D="main",M=w===D;return l.jsxs("div",{ref:y,className:"text-center space-y-8 animate-in fade-in duration-300 flex flex-col items-center",children:[l.jsxs("div",{className:"space-y-4",children:[l.jsx("p",{className:"text-[10px] font-black uppercase text-neutral-400 tracking-widest",children:r}),l.jsx("h2",{className:"text-3xl font-black text-neutral-900",children:n.word}),(i||o)&&l.jsxs("div",{className:"inline-flex items-center gap-2 bg-neutral-100 px-3 py-1.5 rounded-lg border border-neutral-200 max-w-sm",children:[o&&l.jsx("span",{className:"text-[9px] font-black uppercase bg-white px-1.5 py-0.5 rounded border border-neutral-200 text-neutral-500",children:o}),i&&l.jsx("span",{className:"text-xs font-bold text-neutral-700 italic",children:i})]})]}),l.jsxs("div",{className:"w-full max-w-md flex flex-col items-center gap-3",children:[l.jsxs("div",{className:"relative w-full",children:[l.jsx("input",{type:"text",autoFocus:!0,value:d||"",onChange:P=>{N(D),O(P,p,n.word)},onKeyDown:P=>{I(P,D,f)},disabled:g,className:`w-full text-center py-4 pl-12 pr-12 rounded-2xl border-2 text-xl font-bold focus:outline-none placeholder:text-neutral-200 transition-colors duration-200 ${g?j?"bg-green-50 border-green-500 text-green-600":"bg-red-50 border-red-500 text-red-600":`bg-neutral-50 border-transparent focus:bg-white focus:border-neutral-900 text-neutral-900 shadow-sm ${_(D)}`}`,placeholder:"Type answer...",autoComplete:"off",autoCorrect:"off",autoCapitalize:"off"}),!g&&l.jsx("div",{className:"absolute right-3 top-1/2 -translate-y-1/2",children:l.jsx(l0,{isListening:M,onClick:()=>v(D,p),disabled:g})})]}),(g&&L||m)&&l.jsx("div",{className:"text-green-600 font-bold text-lg animate-in slide-in-from-top-2 bg-green-50 px-3 py-1 rounded-lg border border-green-100 inline-block",children:f})]})]})},w2=({word:n,userAnswer:r,onAnswer:i,isFinishing:o,resultDetails:f,showHint:d,containerRef:p,toggleListening:g,listeningId:h})=>{const{clearValidation:m,handleSmartChange:y,handleValidationKeyDown:v,getValidationClass:w}=hc(),N=n.wordFamily,O=r||{},I=(_,j)=>{i({...O,[_]:j})};return l.jsxs("div",{ref:p,className:"space-y-6 animate-in fade-in duration-300",children:[l.jsxs("div",{className:"text-center space-y-1",children:[l.jsx("p",{className:"text-[10px] font-black uppercase text-neutral-400 tracking-widest",children:"Word Family"}),l.jsx("h2",{className:"text-3xl font-black text-neutral-900",children:n.word}),l.jsx("p",{className:"text-xs font-bold text-neutral-500",children:"Fill related forms"})]}),l.jsx("div",{className:"grid grid-cols-1 gap-4",children:["nouns","verbs","adjs","advs"].map(_=>{const j=((N==null?void 0:N[_])||[]).filter(G=>!G.isIgnored).map(G=>G.word);if(j.length===0)return null;const L={nouns:"Noun",verbs:"Verb",adjs:"Adjective",advs:"Adverb"}[_],D=O[_]||"",M=f[_],P=o,Y=`fam-${_}`,U=h===Y;return l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("span",{className:"w-20 text-[10px] font-black uppercase text-neutral-400 text-right",children:L}),l.jsxs("div",{className:"flex-1 relative flex items-center gap-2",children:[l.jsx("input",{type:"text",value:D,onChange:G=>{m(Y),y(G,A=>I(_,A),n.word)},onKeyDown:G=>{v(G,Y,j)},disabled:o,className:`w-full px-4 py-2 bg-neutral-50 border-2 rounded-xl text-sm font-bold outline-none transition-all ${P?M?"border-green-500 bg-green-50 text-green-800":"border-red-500 bg-red-50 text-red-800":`border-neutral-100 focus:border-neutral-900 focus:bg-white ${w(Y)}`}`,placeholder:"..."}),!o&&l.jsx(l0,{isListening:U,onClick:()=>g(Y,G=>I(_,G)),disabled:o}),(P&&!M||d)&&l.jsx("div",{className:"text-[10px] font-bold text-green-600 mt-1 pl-1",children:((N==null?void 0:N[_])||[]).filter(G=>!G.isIgnored).map(G=>G.word).join(", ")})]})]},_)})})]})},N2=({word:n,original:r,shuffled:i,userAnswer:o,onAnswer:f,isFinishing:d,isCorrect:p,showHint:g,containerRef:h})=>{const[m,y]=Kt.useState(0),v=o||[],w=new Set;v.forEach(_=>{const j=i.findIndex((L,D)=>L===_&&!w.has(D));j!==-1&&w.add(j)});const N=_=>{if(d)return;const j=[...v];j.splice(m,0,_),f(j),y(L=>L+1)},O=_=>{if(d)return;const j=[...v];j.splice(_,1),f(j),m>_&&y(L=>L-1)},I=({index:_})=>{const j=_===m;return d?l.jsx("div",{className:"w-1 mx-0.5"}):l.jsx("div",{onClick:()=>y(_),className:`h-8 w-2 rounded-full cursor-pointer transition-all duration-200 mx-0.5 flex items-center justify-center ${j?"bg-indigo-500 scale-110 shadow-sm":"bg-transparent hover:bg-neutral-200"}`,children:l.jsx("div",{className:`w-1 h-4 rounded-full ${j?"bg-white/50":"bg-transparent"}`})})};return l.jsxs("div",{ref:h,className:"flex flex-col space-y-6 animate-in fade-in duration-300",children:[l.jsxs("div",{className:"text-center space-y-1",children:[l.jsx("p",{className:"text-[10px] font-black uppercase text-neutral-400 tracking-widest",children:"Sentence Builder"}),l.jsxs("p",{className:"text-xs text-neutral-500 font-medium",children:['Reconstruct the example sentence for "',n.word,'".']})]}),l.jsxs("div",{className:`min-h-[120px] p-6 rounded-[2rem] border-2 border-dashed flex flex-wrap gap-y-3 items-center justify-center transition-all ${d?p?"bg-green-50 border-green-200":"bg-red-50 border-red-200":"bg-neutral-50 border-neutral-200"}`,children:[v.length===0&&!d&&l.jsx("span",{className:"absolute text-sm font-bold text-neutral-300 italic pointer-events-none",children:"Click words below to build sentence..."}),l.jsx(I,{index:0}),v.map((_,j)=>l.jsxs(Kt.Fragment,{children:[l.jsxs("button",{onClick:()=>O(j),disabled:d,className:`px-3 py-2 rounded-xl text-sm font-bold shadow-sm transition-all active:scale-95 flex items-center gap-1 group ${d?p?"bg-green-600 text-white":"bg-red-500 text-white":"bg-white text-neutral-900 border border-neutral-100 hover:border-red-200 hover:text-red-500"}`,children:[_," ",!d&&l.jsx(Ut,{size:14,className:"opacity-40 group-hover:opacity-100"})]}),l.jsx(I,{index:j+1})]},`${_}-${j}`))]}),(d||g)&&l.jsxs("div",{className:"p-4 bg-yellow-50 rounded-2xl border border-yellow-100 animate-in slide-in-from-top-2",children:[l.jsx("p",{className:"text-xs font-black text-yellow-600 uppercase tracking-widest mb-1",children:"Correct Sentence"}),l.jsx("p",{className:"text-sm font-bold text-yellow-900 leading-relaxed",children:r})]}),l.jsx("div",{className:"flex flex-wrap gap-2 justify-center pt-4",children:i.map((_,j)=>{const L=w.has(j);return l.jsx("button",{onClick:()=>N(_),disabled:L||d,className:`px-4 py-2.5 rounded-xl text-sm font-bold transition-all active:scale-95 ${L?"bg-neutral-100 text-neutral-300 border-transparent cursor-default":"bg-white border-2 border-neutral-100 text-neutral-700 hover:border-neutral-900 hover:text-neutral-900 shadow-sm"}`,children:_},j)})}),!d&&v.length>0&&l.jsxs("button",{onClick:()=>f([]),className:"mx-auto flex items-center space-x-1.5 text-[10px] font-black uppercase text-neutral-400 hover:text-neutral-600 transition-colors",children:[l.jsx(Ut,{size:12}),l.jsx("span",{children:"Reset"})]})]})},_2=({word:n,forms:r,ipaOptions:i,userAnswer:o,onAnswer:f,isFinishing:d,result:p,showHint:g,containerRef:h})=>{const m=o||{},y=(v,w)=>{f({...m,[v]:w})};return l.jsxs("div",{ref:h,className:"text-center space-y-6 animate-in fade-in duration-300",children:[l.jsxs("p",{className:"text-sm font-bold text-neutral-500",children:["The word ",l.jsxs("span",{className:"font-black text-neutral-900",children:['"',n.word,'"']})," has different pronunciations. Match the IPA to the part of speech."]}),l.jsx("div",{className:"space-y-6",children:r.map(v=>{const w=m[v.pos];return l.jsxs("div",{className:"space-y-3",children:[l.jsxs("h4",{className:"text-sm font-black text-neutral-900 uppercase tracking-widest bg-neutral-100 py-1 rounded-md",children:["As a ",v.pos]}),l.jsx("div",{className:"grid grid-cols-2 gap-2",children:i.map(N=>{let O="bg-white border-neutral-200 hover:border-neutral-400 text-neutral-600";return d?N===v.ipa?O="bg-green-50 border-green-500 text-green-700 shadow-md":N===w?O="bg-red-50 border-red-500 text-red-700 opacity-60":O="bg-neutral-50 border-neutral-100 text-neutral-400 opacity-50":w===N&&(O="bg-neutral-900 border-neutral-900 text-white shadow-lg"),l.jsx("button",{disabled:d,onClick:()=>y(v.pos,N),className:`p-3 rounded-xl border-2 font-mono text-base font-medium transition-all duration-200 ${O}`,children:N},N)})})]},v.pos)})}),d&&p===!1&&!g&&l.jsx("div",{className:"text-center text-rose-600 font-bold text-sm",children:"One or more selections were incorrect."})]})},A2=({word:n,userAnswer:r,onAnswer:i,isFinishing:o,result:f,showHint:d,containerRef:p})=>{const{clearValidation:g,handleSmartChange:h,handleValidationKeyDown:m,getValidationClass:y}=hc(),v=f===!0,w=f===!1,N="main";return l.jsxs("div",{ref:p,className:"text-center space-y-8 animate-in fade-in duration-300",children:[l.jsx("p",{className:"text-sm font-bold text-neutral-500",children:"Listen carefully and type the word."}),l.jsxs("div",{className:"space-y-6 flex flex-col items-center",children:[l.jsx("button",{onClick:()=>Sa(n.word),className:"p-6 bg-neutral-50 hover:bg-neutral-100 text-neutral-900 rounded-full shadow-sm transition-all active:scale-95",children:l.jsx(cn,{size:32})}),l.jsxs("div",{className:"w-full max-w-sm flex flex-col items-center gap-4",children:[l.jsx("div",{className:"relative w-full",children:l.jsx("input",{type:"text",autoFocus:!0,value:r||"",onChange:O=>{g(N),h(O,i,n.word)},onKeyDown:O=>{m(O,N,n.word)},disabled:o,className:`w-full text-center py-4 rounded-2xl border-2 text-3xl font-bold focus:outline-none tracking-[0.1em] placeholder:text-neutral-200 transition-colors duration-200 ${o?v?"bg-green-50 border-green-500 text-green-600":"bg-red-50 border-red-500 text-red-600":`bg-neutral-50 border-transparent focus:bg-white focus:border-neutral-900 text-neutral-900 shadow-sm ${y(N)}`}`,placeholder:"TYPE HERE",autoComplete:"off",autoCorrect:"off",autoCapitalize:"off",spellCheck:"false"})}),(o&&w||d)&&l.jsx("div",{className:"text-xl font-black text-yellow-500 animate-in fade-in slide-in-from-bottom-2",children:n.word})]})]})]})},T2=({word:n,currentChallenge:r,currentChallengeIndex:i,userAnswers:o,handleAnswerChange:f,results:d,isFinishing:p,currentPrepositionGroup:g,showHint:h,onEnterPress:m})=>{const y=E.useRef(null),[v,w]=E.useState(null),N=E.useRef(null);E.useEffect(()=>{try{N.current=new s0}catch{}return()=>{var I;(I=N.current)==null||I.stop()}},[]),E.useEffect(()=>{var I;(I=N.current)==null||I.stop(),w(null)},[i,g]);const O=(I,_)=>{N.current&&(v===I?(N.current.stop(),w(null)):(v&&N.current.stop(),_(""),w(I),N.current.start((j,L)=>{const D=j+(L?(j?" ":"")+L:"");_(D)},j=>{const L=j.trim().replace(/[.]/g,"");_(L),w(null)})))};if(E.useEffect(()=>{const I=()=>{var L,D;const j=(L=y.current)==null?void 0:L.querySelector('input[type="text"]:not([disabled]), textarea:not([disabled])');j&&!((D=y.current)!=null&&D.contains(document.activeElement))&&j.focus()};setTimeout(I,50);const _=j=>{var L;if(!(j.metaKey||j.ctrlKey||j.altKey)){if(j.key==="Enter"){const D=document.activeElement;if(D&&D.tagName==="TEXTAREA"&&j.shiftKey)return;j.preventDefault(),m();return}if(j.key.length===1){const D=document.activeElement;((L=y.current)==null?void 0:L.contains(D))||I()}}};return window.addEventListener("keydown",_),()=>window.removeEventListener("keydown",_)},[i,m]),g)return l.jsx(S2,{containerRef:y,group:g.group,userAnswers:o,results:d,onAnswerChange:f,isFinishing:p,showHint:h,toggleListening:O,listeningId:v});switch(r.type){case"PARAPHRASE_CONTEXT_QUIZ":{const I=r;return l.jsx(Md,{containerRef:y,challenge:{contexts:I.contexts,items:I.paraphrases},answer:o[i],onAnswer:_=>f(i,_),isFinishing:p,result:d?d[i]:null,showHint:h,itemLabel:_=>_.tone&&l.jsx("span",{className:"inline-block text-[9px] font-black uppercase bg-neutral-100 text-neutral-500 px-1.5 py-0.5 rounded border border-neutral-200 mb-1",children:_.tone}),instructionText:"Match each phrase on the right to its correct context on the left."})}case"COLLOCATION_CONTEXT_QUIZ":{const I=r;return l.jsx(Md,{containerRef:y,challenge:{contexts:I.contexts,items:I.collocations},answer:o[i],onAnswer:_=>f(i,_),isFinishing:p,result:d?d[i]:null,showHint:h,itemLabel:()=>null,instructionText:"Match each collocation on the right to its correct definition/cue."})}case"IDIOM_CONTEXT_QUIZ":{const I=r;return l.jsx(Md,{containerRef:y,challenge:{contexts:I.contexts,items:I.idioms},answer:o[i],onAnswer:_=>f(i,_),isFinishing:p,result:d?d[i]:null,showHint:h,itemLabel:()=>null,instructionText:"Match each idiom on the right to its correct definition/cue."})}case"COLLOCATION_MULTICHOICE_QUIZ":{const I=r;return l.jsx(Ud,{containerRef:y,word:n,title:"Select Collocation",cue:I.cue,options:I.options,answer:I.answer,selected:o[i],onAnswer:_=>f(i,_),isFinishing:p,showHint:h})}case"COLLOCATION_QUIZ":{const I=r,_=d?d[i]:null,j=typeof _=="boolean"?_:_&&typeof _=="object"?_.correct:null;return l.jsx(Dd,{containerRef:y,word:n,title:"Fill Collocation",cue:I.cue,answer:I.answer,userAnswer:o[i],onAnswer:L=>f(i,L),isFinishing:p,result:j,showHint:h,toggleListening:O,listeningId:v})}case"IDIOM_QUIZ":{const I=r,_=d?d[i]:null,j=typeof _=="boolean"?_:_&&typeof _=="object"?_.correct:null;return l.jsx(Dd,{containerRef:y,word:n,title:"Fill Idiom",cue:I.cue,answer:I.answer,userAnswer:o[i],onAnswer:L=>f(i,L),isFinishing:p,result:j,showHint:h,toggleListening:O,listeningId:v})}case"PRONUNCIATION":return l.jsx(E2,{containerRef:y,challenge:r,onAnswer:I=>f(i,I),isFinishing:p,result:d?d[i]:null});case"HETERONYM_QUIZ":{const I=r,_=d?d[i]:null,j=typeof _=="boolean"?_:null;return l.jsx(_2,{containerRef:y,word:n,forms:I.forms,ipaOptions:I.ipaOptions,userAnswer:o[i],onAnswer:L=>f(i,L),isFinishing:p,result:j,showHint:h})}case"SENTENCE_SCRAMBLE":{const I=r,_=d?d[i]:null,j=typeof _=="boolean"?_:null;return l.jsx(N2,{containerRef:y,word:n,original:I.original,shuffled:I.shuffled||[],userAnswer:o[i],onAnswer:L=>f(i,L),isFinishing:p,isCorrect:j,showHint:h})}case"SPELLING":{const I=d?d[i]:null,_=typeof I=="boolean"?I:null;return l.jsx(A2,{containerRef:y,word:n,userAnswer:o[i],onAnswer:j=>f(i,j),isFinishing:p,result:_,showHint:h})}case"IPA_QUIZ":{const I=r;return l.jsx(Ud,{containerRef:y,word:n,title:"Select Pronunciation",options:I.options,answer:I.answer,selected:o[i],onAnswer:_=>f(i,_),isFinishing:p,showHint:h})}case"MEANING_QUIZ":{const I=r;return l.jsx(Ud,{containerRef:y,word:n,title:"Select Definition",options:I.options,answer:I.answer,selected:o[i],onAnswer:_=>f(i,_),isFinishing:p,showHint:h})}case"PARAPHRASE_QUIZ":{const I=r,_=d?d[i]:null,j=typeof _=="boolean"?_:null;return l.jsx(Dd,{containerRef:y,word:n,title:"Fill Paraphrase",contextTag:I.tone,cue:I.context,answer:I.answer,userAnswer:o[i],onAnswer:L=>f(i,L),isFinishing:p,result:j,showHint:h,toggleListening:O,listeningId:v})}case"WORD_FAMILY":{const I=d?d[i]:null,_=I&&typeof I=="object"&&"details"in I?I.details:{};return l.jsx(w2,{containerRef:y,word:n,userAnswer:o[i],onAnswer:j=>f(i,j),isFinishing:p,resultDetails:_,showHint:h,toggleListening:O,listeningId:v})}default:return null}},j2=({onBack:n,onNext:r,onIgnore:i,onHint:o,showHint:f,isBackDisabled:d,isNextDisabled:p,isLastChallenge:g,nextLabel:h,disableHints:m})=>{const y=g&&!h;return l.jsxs("div",{className:"p-4 bg-white border-t border-neutral-100 flex items-center justify-between gap-3 shrink-0",children:[l.jsx("button",{onClick:n,disabled:d,className:"p-4 rounded-2xl bg-neutral-50 text-neutral-400 hover:bg-neutral-100 hover:text-neutral-900 disabled:opacity-30 disabled:hover:bg-neutral-50 disabled:hover:text-neutral-400 transition-all",title:"Previous Question",children:l.jsx(dy,{size:20})}),!g&&!p&&l.jsx("button",{onClick:i,className:"px-4 py-4 rounded-2xl text-neutral-400 hover:text-neutral-600 font-bold text-xs uppercase tracking-wider hover:bg-neutral-50 transition-colors",children:"Ignore"}),!p&&!m&&l.jsx("button",{onClick:o,className:`p-4 rounded-2xl transition-colors ${f?"text-yellow-500 bg-yellow-50 hover:bg-yellow-100":"text-neutral-400 hover:text-yellow-500 hover:bg-neutral-50"}`,title:"Show Hint",children:l.jsx(Cf,{size:20,className:f?"fill-yellow-500":""})}),l.jsxs("button",{onClick:r,disabled:p,className:"flex-1 py-4 rounded-2xl font-black text-xs uppercase tracking-widest flex items-center justify-center gap-2 shadow-lg transition-all active:scale-95 bg-neutral-900 text-white hover:bg-neutral-800",children:[l.jsx("span",{children:h||(g?"Finish":"Next")}),y?l.jsx(on,{size:16}):l.jsx(fi,{size:16})]})]})},vg=[{id:"core",title:"Core Skills",description:"Essential accuracy",color:"text-blue-700",bg:"bg-blue-50/60",border:"border-blue-100",areas:[{id:"spelling",label:"Spelling",icon:EE,types:["SPELLING"]},{id:"sound",label:"Sound",icon:cn,types:["PRONUNCIATION","IPA_QUIZ","HETERONYM_QUIZ"]},{id:"meaning",label:"Meaning",icon:nc,types:["MEANING_QUIZ"]},{id:"preposition",label:"Prep.",icon:If,types:["PREPOSITION_QUIZ"]}]},{id:"advanced",title:"Advanced Usage",description:"Fluency & range",color:"text-purple-700",bg:"bg-purple-50/60",border:"border-purple-100",areas:[{id:"family",label:"Word Family",icon:Ay,types:["WORD_FAMILY"]},{id:"collocation",label:"Collocation",icon:sc,types:["COLLOCATION_CONTEXT_QUIZ","COLLOCATION_MULTICHOICE_QUIZ","COLLOCATION_QUIZ"]},{id:"paraphrase",label:"Paraphrase",icon:oc,types:["PARAPHRASE_CONTEXT_QUIZ","PARAPHRASE_QUIZ"]}]},{id:"bonus",title:"Good to Have",description:"Context & Flair",color:"text-amber-700",bg:"bg-amber-50/60",border:"border-amber-100",areas:[{id:"idiom",label:"Idiom",icon:lc,types:["IDIOM_CONTEXT_QUIZ","IDIOM_QUIZ"]},{id:"example",label:"Example",icon:yE,types:["SENTENCE_SCRAMBLE"]}]}],zd={MEANING_QUIZ:"Select",COLLOCATION_CONTEXT_QUIZ:"Match",COLLOCATION_MULTICHOICE_QUIZ:"Multi",COLLOCATION_QUIZ:"Fill",PARAPHRASE_CONTEXT_QUIZ:"Match",PARAPHRASE_QUIZ:"Fill",PREPOSITION_QUIZ:"Fill",IDIOM_QUIZ:"Fill",IDIOM_CONTEXT_QUIZ:"Match",PRONUNCIATION:"Speak",IPA_QUIZ:"IPA",HETERONYM_QUIZ:"Match",SPELLING:"Dictation",SENTENCE_SCRAMBLE:"Build",WORD_FAMILY:"Fill"},I2=[{label:"Dictation",desc:"Listen to the word and type the exact spelling."},{label:"Speak",desc:"Pronounce the word clearly into your microphone."},{label:"IPA",desc:"Identify the correct phonetic transcription."},{label:"Select",desc:"Choose the correct meaning from options."},{label:"Fill",desc:"Type missing parts (Prepositions, Idioms, Families)."},{label:"Match",desc:"Connect related items (Collocations, Idioms, Contexts)."},{label:"Build",desc:"Reorder scrambled words to form a valid sentence."},{label:"Multi",desc:"Multiple choice for collocations."}],O2=(n,r)=>{if(r===0)return{label:"N/A",color:"bg-neutral-50 text-neutral-400 border-neutral-100"};const i=n/r*100;let o="bg-neutral-50 text-neutral-400 border-neutral-100";return i===100?o="bg-green-50 text-green-700 border-green-100":n>0?o="bg-yellow-50 text-yellow-700 border-yellow-100":o="bg-red-50 text-red-600 border-red-100",{label:`${n}/${r}`,color:o}},Sg=n=>{switch(n){case"NEW":return"bg-blue-100 text-blue-700 border-blue-200";case"LEARNED":return"bg-cyan-100 text-cyan-700 border-cyan-200";case"EASY":return"bg-green-100 text-green-700 border-green-200";case"HARD":return"bg-orange-100 text-orange-700 border-orange-200";case"FORGOT":return"bg-red-100 text-red-700 border-red-200";default:return"bg-neutral-100 text-neutral-600 border-neutral-200"}},C2=({isModal:n=!0,word:r,onClose:i,isSetupMode:o,isPreparing:f,availableChallenges:d,selectedChallengeTypes:p,onSetSelection:g,onStartTest:h,challengeStats:m,challenges:y,currentChallenge:v,currentChallengeIndex:w,userAnswers:N,handleAnswerChange:O,results:I,isFinishing:_,currentPrepositionGroup:j,isLastChallenge:L,handleNextClick:D,handleBackClick:M,handleIgnore:P,handleFinishEarly:Y,showHint:U,onToggleHint:G,disableHints:A,sessionPosition:V,elapsedTime:F,onSelectQuick:$,onSelectPreferred:ae,onSelectZeroScore:me,onSelectPartialScore:fe,recapData:C,onRecalculateFinish:ne,isMastered:te})=>{const q=E.useRef(null),[z,b]=E.useState(!1),[T,k]=E.useState(!1);E.useEffect(()=>{q.current&&(q.current.scrollTop=0)},[w,r]);const Q=E.useMemo(()=>new Set(d.map(le=>le.type)),[d]),ue=(le,J)=>{const ee=new Set(p);le.forEach(ye=>ee.delete(ye)),J!=="none"&&ee.add(J),g(ee)},ie=()=>vg.flatMap(le=>le.areas),he=()=>{const le=new Set;ie().forEach(J=>{const ee=J.types.find(ye=>Q.has(ye));ee&&le.add(ee)}),g(le)};let B;if(C){const le=Math.max(0,C.newMastery-C.oldMastery),J=Object.values(C.results.reduce((ee,ye)=>{if(!ee[ye.type]){let ve=zd[ye.type]||ye.type;const Ce=ie().find(it=>it.types.includes(ye.type));Ce&&(ve=`${Ce.label} ${zd[ye.type]||""}`),ee[ye.type]={type:ye.type,label:ve.trim(),passed:0,total:0}}return ee[ye.type].total++,ye.passed&&ee[ye.type].passed++,ee},{}));B=l.jsxs("div",{className:"bg-white w-full max-w-md rounded-[2.5rem] shadow-2xl overflow-hidden flex flex-col max-h-[90vh] animate-in zoom-in-95 duration-500",children:[l.jsxs("div",{className:"flex-1 overflow-y-auto p-8 text-center space-y-6 custom-scrollbar",children:[l.jsx("div",{className:"inline-flex p-4 bg-green-50 rounded-full text-green-600 mb-2 shadow-inner",children:l.jsx(on,{size:48})}),l.jsxs("div",{className:"space-y-2",children:[l.jsx("h2",{className:"text-3xl font-black text-neutral-900 tracking-tight",children:"Session Complete!"}),l.jsx("p",{className:"text-sm text-neutral-500 font-medium",children:"Here's how you improved."})]}),l.jsxs("div",{className:"bg-neutral-50 rounded-3xl p-6 border border-neutral-100 space-y-6",children:[l.jsxs("div",{className:"space-y-2",children:[l.jsxs("div",{className:"flex justify-between items-end px-1",children:[l.jsx("span",{className:"text-[10px] font-black uppercase text-neutral-400 tracking-widest",children:"Mastery Score"}),l.jsxs("span",{className:"text-sm font-black text-neutral-900 flex items-center gap-1",children:[C.oldMastery,"%",l.jsx(fi,{size:14,className:"text-neutral-300"}),l.jsxs("span",{className:"text-green-600",children:[C.newMastery,"%"]}),le>0&&l.jsxs("span",{className:"text-[10px] bg-green-100 text-green-700 px-1.5 rounded-full ml-1",children:["+",le]})]})]}),l.jsxs("div",{className:"h-3 w-full bg-neutral-200 rounded-full overflow-hidden relative",children:[l.jsx("div",{className:"absolute top-0 left-0 h-full bg-neutral-400",style:{width:`${C.oldMastery}%`}}),l.jsx("div",{className:"absolute top-0 h-full bg-green-500 animate-pulse",style:{left:`${C.oldMastery}%`,width:`${le}%`}})]})]}),l.jsxs("div",{className:"flex items-center justify-center gap-3",children:[l.jsx("span",{className:`px-3 py-1 rounded-xl text-xs font-black uppercase border ${Sg(C.oldStatus)}`,children:C.oldStatus}),l.jsx(fi,{size:16,className:"text-neutral-300"}),l.jsx("span",{className:`px-3 py-1 rounded-xl text-xs font-black uppercase border ${Sg(C.newStatus)}`,children:C.newStatus})]})]}),l.jsxs("div",{className:"space-y-2 text-left",children:[l.jsx("h4",{className:"text-[10px] font-black uppercase text-neutral-400 tracking-widest px-2",children:"Challenge Summary"}),l.jsx("div",{className:"flex flex-col gap-2",children:J.map((ee,ye)=>{const ve=ee.passed===ee.total,Ce=ee.passed===0;let it="bg-white border-neutral-100",be="text-neutral-700",pe=null;return ve?(it="bg-green-50 border-green-100",be="text-green-800",pe=l.jsx(rr,{size:14,className:"text-green-600"})):Ce?(it="bg-red-50 border-red-100",be="text-red-800",pe=l.jsx(Ut,{size:14,className:"text-red-600"})):(it="bg-orange-50 border-orange-100",be="text-orange-800",pe=l.jsxs("div",{className:"text-[10px] font-black text-orange-600",children:[Math.round(ee.passed/ee.total*100),"%"]})),l.jsxs("div",{className:`flex items-center justify-between p-3 border rounded-xl shadow-sm ${it}`,children:[l.jsx("span",{className:`text-xs font-bold ${be}`,children:ee.label}),l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsxs("span",{className:`text-[10px] font-black uppercase tracking-wider ${be}`,children:[ee.passed," / ",ee.total]}),l.jsx("div",{className:"p-1 rounded-full bg-white/50",children:pe})]})]},ye)})})]})]}),l.jsx("div",{className:"p-6 bg-white border-t border-neutral-100 shrink-0",children:l.jsxs("button",{onClick:ne,className:"w-full py-4 bg-neutral-900 text-white rounded-2xl font-black text-sm uppercase tracking-widest shadow-xl hover:bg-neutral-800 transition-all active:scale-95 flex items-center justify-center gap-2",children:[l.jsx("span",{children:"Continue"}),l.jsx(fi,{size:18})]})})]})}else if(o){const le=p.size===0;let J=0,ee=0;m.forEach(be=>{J+=be.score,ee+=be.total});const ye=ee>0?J/ee*100:0,ve=60,Ce=2*Math.PI*ve,it=Ce-ye/100*Ce;B=l.jsxs("div",{className:"bg-white w-full max-w-2xl rounded-[2rem] shadow-2xl overflow-hidden flex flex-col max-h-[95vh] animate-in fade-in zoom-in-95 duration-300",children:[l.jsxs("div",{className:"px-6 py-4 border-b border-neutral-100 bg-white/80 backdrop-blur-sm flex justify-between items-center shrink-0 z-20 relative",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("div",{className:"w-10 h-10 bg-neutral-900 text-white rounded-xl flex items-center justify-center shadow-lg shadow-neutral-900/20",children:l.jsx(sE,{size:20})}),l.jsxs("div",{children:[l.jsx("h3",{className:"text-lg font-black text-neutral-900 leading-none tracking-tight",children:"Test Setup"}),l.jsxs("p",{className:"text-xs font-bold text-neutral-500 mt-1",children:["Target: ",l.jsx("span",{className:"text-neutral-900",children:r.word})]})]})]}),l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsxs("div",{className:"flex flex-col items-end mr-2",children:[l.jsx("span",{className:"text-[9px] font-black uppercase text-neutral-400 tracking-widest",children:"Mastery"}),l.jsxs("div",{className:"flex items-baseline gap-1",children:[l.jsx("span",{className:`text-xl font-black leading-none ${J===ee&&ee>0?"text-green-600":"text-neutral-900"}`,children:J}),l.jsxs("span",{className:"text-sm font-bold text-neutral-400",children:["/",ee]})]})]}),l.jsx("button",{onClick:()=>k(!T),className:`p-2.5 rounded-xl transition-all ${T?"bg-neutral-900 text-white shadow-md":"bg-neutral-100 text-neutral-500 hover:bg-neutral-200"}`,title:"Configure Test",children:l.jsx(gE,{size:20})}),l.jsx("button",{onClick:i,className:"p-2.5 text-neutral-400 hover:text-neutral-900 hover:bg-neutral-100 rounded-xl transition-colors",children:l.jsx(Ut,{size:20})})]})]}),l.jsx("div",{className:"flex-1 overflow-y-auto custom-scrollbar relative",children:T?l.jsxs("div",{className:"flex flex-col h-full animate-in slide-in-from-top-4 duration-300",children:[l.jsxs("div",{className:"px-5 py-3 bg-neutral-50 border-b border-neutral-100 flex flex-wrap gap-2 shrink-0 z-10 justify-center",children:[l.jsxs("button",{onClick:he,className:"px-3 py-2 rounded-lg bg-white border border-neutral-200 text-neutral-600 font-bold text-[10px] uppercase tracking-wider hover:bg-neutral-50 transition-colors flex items-center gap-1.5 shadow-sm",children:[l.jsx(Ny,{size:12})," All"]}),l.jsxs("button",{onClick:()=>g(new Set),className:"px-3 py-2 rounded-lg bg-white border border-neutral-200 text-neutral-400 font-bold text-[10px] uppercase tracking-wider hover:bg-neutral-50 hover:text-neutral-600 transition-colors flex items-center gap-1.5 shadow-sm",children:[l.jsx(JS,{size:12})," Clear"]}),l.jsxs("button",{onClick:()=>b(!z),className:"px-3 py-2 rounded-lg bg-white border border-neutral-200 text-neutral-500 font-bold text-[10px] uppercase tracking-wider hover:bg-neutral-50 hover:text-indigo-500 transition-colors flex items-center gap-1.5 shadow-sm ml-auto",children:[l.jsx($S,{size:12})," Guide"]})]}),z&&l.jsx("div",{className:"bg-neutral-50 border-b border-neutral-100 p-4 grid grid-cols-2 gap-2 animate-in fade-in slide-in-from-top-2",children:I2.map(be=>l.jsxs("div",{className:"text-[10px] text-neutral-500 leading-tight",children:[l.jsxs("span",{className:"font-black text-indigo-600 uppercase mr-1",children:[be.label,":"]}),be.desc]},be.label))}),l.jsx("div",{className:"p-4 space-y-3",children:vg.map(be=>{const pe=be.areas.filter(re=>re.types.some(Ae=>Q.has(Ae)));if(pe.length===0)return null;let Pe=0,Qe=0;return pe.forEach(re=>{re.types.forEach(Ae=>{const Re=m.get(Ae);Re&&(Pe+=Re.score,Qe+=Re.total)})}),l.jsxs("div",{className:`rounded-2xl border ${be.border} ${be.bg} p-4`,children:[l.jsxs("div",{className:"flex items-baseline justify-between mb-3 border-b border-black/5 pb-2",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("h4",{className:`text-xs font-black uppercase tracking-widest ${be.color}`,children:be.title}),l.jsxs("span",{className:"text-[10px] font-bold text-neutral-500 opacity-60 bg-white/50 px-1.5 py-0.5 rounded-md",children:["(",Pe,"/",Qe,")"]})]}),l.jsx("span",{className:"text-[10px] font-bold text-neutral-500 opacity-60",children:be.description})]}),l.jsx("div",{className:"space-y-2",children:pe.map(re=>{const Ae=re.types.filter(Ge=>Q.has(Ge));if(Ae.length===0)return null;const Re=re.types.find(Ge=>p.has(Ge));let Xe=0,ke=0;re.types.forEach(Ge=>{const Ze=m.get(Ge);Ze&&(Xe+=Ze.score,ke+=Ze.total)});const ze=O2(Xe,ke);return l.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-3 p-2 rounded-xl bg-white/40 hover:bg-white/70 transition-colors border border-transparent hover:border-black/5",children:[l.jsxs("div",{className:"flex items-center gap-2 shrink-0",children:[l.jsx("div",{className:"p-1.5 bg-white rounded-lg shadow-sm text-neutral-600",children:l.jsx(re.icon,{size:14})}),l.jsx("span",{className:`text-xs font-bold ${Re?"text-neutral-900":"text-neutral-600"}`,children:re.label}),l.jsx("span",{className:`text-[9px] font-black uppercase tracking-wider px-1.5 py-0.5 rounded-md border ${ze.color}`,children:ze.label})]}),l.jsx("div",{className:"flex flex-wrap gap-1.5 justify-end",children:Ae.map(Ge=>{const Ze=Re===Ge;return l.jsx("button",{onClick:()=>ue(re.types,Ze?"none":Ge),className:`px-3 py-1.5 rounded-lg text-[10px] font-bold border transition-all ${Ze?"bg-neutral-900 border-neutral-900 text-white shadow-md transform scale-105":"bg-white border-neutral-200 text-neutral-500 hover:border-neutral-300 hover:text-neutral-700"}`,children:zd[Ge]||"Quiz"},Ge)})})]},re.id)})})]},be.id)})})]}):l.jsxs("div",{className:"flex flex-col items-center justify-center h-full p-8 space-y-8 animate-in zoom-in-95 duration-500",children:[l.jsxs("div",{className:"relative w-48 h-48 flex items-center justify-center",children:[l.jsxs("svg",{className:"absolute w-full h-full transform -rotate-90",children:[l.jsx("circle",{cx:"50%",cy:"50%",r:ve,stroke:"currentColor",strokeWidth:"12",fill:"transparent",className:"text-neutral-100"}),l.jsx("circle",{cx:"50%",cy:"50%",r:ve,stroke:"currentColor",strokeWidth:"12",fill:"transparent",strokeDasharray:Ce,strokeDashoffset:it,strokeLinecap:"round",className:`transition-all duration-1000 ease-out ${ye===100?"text-green-500":"text-indigo-600"}`})]}),l.jsxs("div",{className:"flex flex-col items-center",children:[l.jsxs("span",{className:"text-4xl font-black text-neutral-900 tracking-tighter",children:[ye.toFixed(0),"%"]}),l.jsx("span",{className:"text-xs font-bold text-neutral-400 uppercase tracking-widest mt-1",children:"Mastery"})]})]}),l.jsx("p",{className:"text-center text-sm font-medium text-neutral-500 max-w-xs leading-relaxed",children:J===ee?"Incredible! You have mastered all challenges for this word. Keep practicing to maintain it.":"Ready to improve? Choose a quick mix or focus on what you haven't mastered yet."})]})}),l.jsx("div",{className:"px-6 py-5 bg-white border-t border-neutral-100 flex items-center justify-center shrink-0 z-20 gap-4",children:T?l.jsxs("button",{onClick:h,disabled:le||f,className:"w-full py-4 bg-neutral-900 text-white rounded-2xl font-black text-sm uppercase tracking-widest flex items-center justify-center gap-3 shadow-xl hover:bg-neutral-800 transition-all active:scale-95 disabled:opacity-50 disabled:active:scale-100 hover:shadow-2xl shadow-neutral-900/20",children:[f?l.jsx(At,{size:18,className:"animate-spin"}):l.jsx(vi,{size:18,fill:"currentColor"}),l.jsx("span",{children:f?"Preparing...":"Start Custom Test"})]}):l.jsxs(l.Fragment,{children:[l.jsxs("button",{onClick:$,className:"flex-1 py-4 bg-white border-2 border-neutral-100 text-neutral-600 rounded-2xl font-black text-xs uppercase tracking-widest flex items-center justify-center gap-2 hover:border-amber-400 hover:text-amber-600 hover:bg-amber-50 transition-all active:scale-95 shadow-sm group",children:[l.jsx(GS,{size:18,className:"text-neutral-400 group-hover:text-amber-500 transition-colors fill-neutral-200 group-hover:fill-amber-500"}),l.jsx("span",{children:"Quick Test"})]}),te?l.jsxs("button",{onClick:fe,className:"flex-1 py-4 bg-red-600 text-white rounded-2xl font-black text-xs uppercase tracking-widest flex items-center justify-center gap-2 hover:bg-red-700 transition-all active:scale-95 shadow-lg shadow-red-200",children:[l.jsx(vE,{size:18}),l.jsx("span",{children:"Challenge"})]}):l.jsxs("button",{onClick:me,className:"flex-1 py-4 bg-indigo-600 text-white rounded-2xl font-black text-xs uppercase tracking-widest flex items-center justify-center gap-2 hover:bg-indigo-700 transition-all active:scale-95 shadow-lg shadow-indigo-200",children:[l.jsx(Sy,{size:18}),l.jsx("span",{children:"Master It"})]})]})})]})}else{let le;V&&(V.current<V.total?le="Next Item":le="Finalize"),B=l.jsxs("div",{className:"bg-white w-full max-w-md rounded-[2.5rem] shadow-2xl overflow-hidden flex flex-col max-h-[90vh] h-full",children:[l.jsx(v2,{title:v.title,type:v.type,currentStep:V?V.current:w+1,totalSteps:V?V.total:y.length,onClose:i,onFinish:Y,label:V?"Item":"Challenge",isQuickFire:!!V,elapsedTime:F}),l.jsx("div",{ref:q,className:"flex-1 p-8 overflow-y-auto no-scrollbar",children:l.jsx(T2,{word:r,currentChallenge:v,currentChallengeIndex:w,userAnswers:N,handleAnswerChange:O,results:I,isFinishing:_,currentPrepositionGroup:j,showHint:U,onEnterPress:D})}),l.jsx(j2,{onBack:M,onNext:D,onIgnore:P,onHint:G,showHint:U,isBackDisabled:V?V.current===1&&w===0:w===0,isNextDisabled:_,isLastChallenge:L,nextLabel:le,disableHints:A})]})}return n?l.jsx("div",{className:"fixed inset-0 z-[150] flex items-center justify-center p-4 bg-black/60 backdrop-blur-sm animate-in fade-in duration-200",children:B}):B},al=n=>[...n].sort(()=>Math.random()-.5),R2=n=>n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),ia=n=>n.replace(/[^a-zA-Z0-9]/g,"").toLowerCase();function k2(n){const r=[];if(r.push({type:"SPELLING",title:"Spelling Fill",word:n}),r.push({type:"PRONUNCIATION",title:"Speak Out",word:n}),n.meaningVi&&n.meaningVi.length>0&&r.push({type:"MEANING_QUIZ",title:"Meaning Multi Choice",options:[],answer:n.meaningVi,word:n}),n.ipaMistakes&&n.ipaMistakes.length>0&&n.ipaUs&&r.push({type:"IPA_QUIZ",title:"IPA Multi Choice",options:al([n.ipaUs,...n.ipaMistakes]),answer:n.ipaUs,word:n}),n.collocationsArray&&n.collocationsArray.length>0){const i=n.collocationsArray.filter(o=>!o.isIgnored&&o.d);i.forEach(o=>{r.push({type:"COLLOCATION_QUIZ",title:"Collocation Fill",word:n,fullText:o.text,cue:o.d,answer:o.text}),i.length>=4&&r.push({type:"COLLOCATION_MULTICHOICE_QUIZ",title:"Collocation Multi Choice",word:n,fullText:o.text,cue:o.d,answer:o.text,options:[]})}),i.length>=2&&r.push({type:"COLLOCATION_CONTEXT_QUIZ",title:"Collocation Match",word:n,contexts:[],collocations:[]})}if(n.idiomsList&&n.idiomsList.length>0){const i=n.idiomsList.filter(o=>!o.isIgnored&&o.d);i.forEach(o=>{r.push({type:"IDIOM_QUIZ",title:"Idiom Fill",word:n,fullText:o.text,cue:o.d,answer:o.text})}),i.length>=2&&r.push({type:"IDIOM_CONTEXT_QUIZ",title:"Idiom Match",word:n,contexts:[],idioms:[]})}if(n.prepositions&&n.prepositions.length>0&&n.prepositions.filter(o=>!o.isIgnored).forEach(o=>{let f="";const d=n.word,p=o.prep,g=o.usage;if(g&&g.toLowerCase().includes(d.toLowerCase())){const h=new RegExp(`\\b${R2(p)}\\b`,"i");h.test(g)?f=g.replace(h,"___"):f=`${g} [___]`}else g?f=`${d} ___ ${g}`:f=`${d} ___`;r.push({type:"PREPOSITION_QUIZ",title:"Preposition Fill",example:f,answer:p,word:n})}),n.example&&n.example.trim().length>5){const i=n.example.trim().split(`
`).flatMap(o=>o.split(new RegExp("(?<=[.?!])\\s+"))).map(o=>o.trim()).filter(o=>o.length>5);for(const o of i){const f=o.split(/\s+/).filter(Boolean);if(f.length>=3){let p;if(f.length>10){p=[];let g=0;for(;g<f.length;){const h=Math.min(3,f.length-g);let m=1;h>1&&Math.random()<.5&&(h===2?m=2:m=Math.random()<.5?2:3);const y=f.slice(g,g+m).join(" ");p.push(y),g+=m}}else p=f;r.push({type:"SENTENCE_SCRAMBLE",title:"Sentence Builder",original:o.trim(),shuffled:al(p),word:n})}}}return n.wordFamily&&[...n.wordFamily.nouns||[],...n.wordFamily.verbs||[],...n.wordFamily.adjs||[],...n.wordFamily.advs||[]].filter(d=>!d.isIgnored&&d.word.trim()).some(d=>d.word.toLowerCase().trim()!==n.word.toLowerCase().trim())&&r.push({type:"WORD_FAMILY",title:"Word Family Fill",word:n}),n.paraphrases&&n.paraphrases.length>0&&n.paraphrases.filter(i=>!i.isIgnored).forEach(i=>{r.push({type:"PARAPHRASE_QUIZ",title:"Paraphrase Fill",tone:i.tone,context:i.context,answer:i.word,word:n})}),n.paraphrases&&n.paraphrases.filter(i=>!i.isIgnored&&i.context&&i.context.trim()).length>=2&&r.push({type:"PARAPHRASE_CONTEXT_QUIZ",title:"Paraphrase Match",word:n,contexts:[],paraphrases:[]}),r}async function Eg(n,r){const i=[];for(const o of n)if(o.type==="MEANING_QUIZ"){const d=(await My(3,r.id)).filter(g=>g.trim().toLowerCase()!==r.meaningVi.trim().toLowerCase()),p=al([r.meaningVi,...d]).slice(0,4);i.push({...o,options:p})}else if(o.type==="COLLOCATION_MULTICHOICE_QUIZ"){const d=(r.collocationsArray||[]).filter(g=>!g.isIgnored&&g.text!==o.answer).map(g=>g.text),p=al([o.answer,...d]).slice(0,4);i.push({...o,options:p})}else if(o.type==="PARAPHRASE_CONTEXT_QUIZ"){const f=o.word,d=(f.paraphrases||[]).filter(p=>!p.isIgnored&&p.context&&p.context.trim()).sort(()=>Math.random()-.5).slice(0,5);if(d.length>=2){const p=[],g=[];d.forEach((h,m)=>{const y=`${f.id}-${m}`;p.push({id:`context-${y}`,text:h.context,pairId:y,tone:h.tone}),g.push({id:`word-${y}`,text:h.word,pairId:y})}),i.push({...o,contexts:p,paraphrases:al(g)})}}else if(o.type==="COLLOCATION_CONTEXT_QUIZ"){const f=o.word,d=(f.collocationsArray||[]).filter(p=>!p.isIgnored&&p.d&&p.d.trim()).sort(()=>Math.random()-.5).slice(0,5);if(d.length>=2){const p=[],g=[];d.forEach((h,m)=>{const y=`${f.id}-col-${m}`;p.push({id:`context-${y}`,text:h.d,pairId:y}),g.push({id:`col-${y}`,text:h.text,pairId:y})}),i.push({...o,contexts:p,collocations:al(g)})}}else if(o.type==="IDIOM_CONTEXT_QUIZ"){const f=o.word,d=(f.idiomsList||[]).filter(p=>!p.isIgnored&&p.d&&p.d.trim()).sort(()=>Math.random()-.5).slice(0,5);if(d.length>=2){const p=[],g=[];d.forEach((h,m)=>{const y=`${f.id}-idm-${m}`;p.push({id:`context-${y}`,text:h.d,pairId:y}),g.push({id:`idm-${y}`,text:h.text,pairId:y})}),i.push({...o,contexts:p,idioms:al(g)})}}else i.push(o);return i}function L2(n,r){switch(n.type){case"SPELLING":return ia(r||"")===ia(n.word.word);case"IPA_QUIZ":return r===n.answer;case"PREPOSITION_QUIZ":return ia(r||"")===ia(n.answer);case"MEANING_QUIZ":return r===n.answer;case"PARAPHRASE_QUIZ":return ia(r||"")===ia(n.answer);case"COLLOCATION_QUIZ":return ia(r||"")===ia(n.answer);case"COLLOCATION_MULTICHOICE_QUIZ":return r===n.answer;case"IDIOM_QUIZ":return ia(r||"")===ia(n.answer);case"SENTENCE_SCRAMBLE":const i=(r||[]).join(" ");return ia(i)===ia(n.original);case"PRONUNCIATION":return ia(r||"")===ia(n.word.word);case"HETERONYM_QUIZ":{if(!r)return!1;let o=!0;for(const f of n.forms)if(r[f.pos]!==f.ipa){o=!1;break}return o}case"WORD_FAMILY":{const o={};let f=!0,d=!1;const p={nouns:"n",verbs:"v",adjs:"j",advs:"d"};return["nouns","verbs","adjs","advs"].forEach(g=>{var m;const h=(((m=n.word.wordFamily)==null?void 0:m[g])||[]).filter(y=>!y.isIgnored).map(y=>y.word);if(h.length>0){d=!0;const v=((r==null?void 0:r[g])||"").split(",").filter(Boolean).map(N=>ia(N)),w=p[g];h.forEach(N=>{const O=ia(N),I=v.findIndex(j=>j===O),_=I!==-1;o[`${w}:${N}`]=_,_?v.splice(I,1):f=!1}),v.length>0&&(f=!1)}}),d?{correct:f,details:o}:!0}case"PARAPHRASE_CONTEXT_QUIZ":{const o=n;if(!(r instanceof Map)||r.size===0)return{correct:!1,details:{}};const f={};let d=0;return o.contexts.forEach(p=>{const g=r.get(p.id);if(g){const h=o.paraphrases.find(m=>m.id===g);h&&h.pairId===p.pairId?(f[p.id]=!0,d++):f[p.id]=!1}else f[p.id]=!1}),{correct:d===o.contexts.length,details:f}}case"COLLOCATION_CONTEXT_QUIZ":{const o=n;if(!(r instanceof Map)||r.size===0)return{correct:!1,details:{}};const f={};let d=0;return o.contexts.forEach(p=>{const g=r.get(p.id);if(g){const h=o.collocations.find(m=>m.id===g);h&&h.pairId===p.pairId?(f[p.id]=!0,d++):f[p.id]=!1}else f[p.id]=!1}),{correct:d===o.contexts.length,details:f}}case"IDIOM_CONTEXT_QUIZ":{const o=n;if(!(r instanceof Map)||r.size===0)return{correct:!1,details:{}};const f={};let d=0;return o.contexts.forEach(p=>{const g=r.get(p.id);if(g){const h=o.idioms.find(m=>m.id===g);h&&h.pairId===p.pairId?(f[p.id]=!0,d++):f[p.id]=!1}else f[p.id]=!1}),{correct:d===o.contexts.length,details:f}}default:return!1}}const M2=()=>{const[n,r]=E.useState([]),[i,o]=E.useState(0),[f,d]=E.useState([]),[p,g]=E.useState(null),[h,m]=E.useState(!1),[y,v]=E.useState(new Set),[w,N]=E.useState(0),[O,I]=E.useState(!1);E.useEffect(()=>{let V;return O&&!h&&(V=window.setInterval(()=>{N(F=>F+1)},1e3)),()=>clearInterval(V)},[O,h]);const _=V=>{r(V),d(new Array(V.length).fill(void 0)),o(0),g(null),m(!1),v(new Set),N(0),I(!0)},j=(V,F)=>{d($=>{const ae=[...$];return ae[V]=F,ae})},L=n[i],D=E.useMemo(()=>{if((L==null?void 0:L.type)!=="PREPOSITION_QUIZ")return null;const V=[];let F=i;for(;F>0&&n[F-1].type==="PREPOSITION_QUIZ";)F--;for(let $=F;$<n.length&&n[$].type==="PREPOSITION_QUIZ";$++)V.push({challenge:n[$],index:$});return V.length===0?null:{startIndex:F,group:V}},[L,i,n]),M=E.useMemo(()=>D?D.startIndex+D.group.length>=n.length:i>=n.length-1,[i,n,D]),P=()=>{M||o(D?D.startIndex+D.group.length:V=>V+1)},Y=()=>{const V=D?D.startIndex-1:i-1;V>=0&&o(V)},U=()=>{v(V=>{const F=new Set(V);return D?D.group.forEach($=>F.add($.index)):F.add(i),F}),P()},G=()=>{const V=[];let F=0,$=0;const ae={},me=[];n.forEach((C,ne)=>{if(y.has(ne)){V[ne]=null;return}$++;const te=L2(C,f[ne]);V[ne]=te;const q=typeof te=="boolean"?te:te.correct;if(q&&F++,me.push({type:C.type,passed:q}),C.type==="WORD_FAMILY"&&typeof te=="object"&&"details"in te)Object.entries(te.details).forEach(([z,b])=>{ae[`WORD_FAMILY:${z}`]=b});else if(C.type==="COLLOCATION_QUIZ")ae[`COLLOCATION_QUIZ:${C.fullText}`]=q;else if(C.type==="COLLOCATION_MULTICHOICE_QUIZ")ae[`COLLOCATION_MULTICHOICE_QUIZ:${C.fullText}`]=q;else if(C.type==="IDIOM_QUIZ")ae[`IDIOM_QUIZ:${C.fullText}`]=q;else if(C.type==="PARAPHRASE_QUIZ")ae[`PARAPHRASE_QUIZ:${C.answer}`]=q;else if(C.type==="PREPOSITION_QUIZ")ae[`PREPOSITION_QUIZ:${C.answer}`]=q;else if(C.type==="PARAPHRASE_CONTEXT_QUIZ"){const z=C;typeof te=="object"&&te.details&&z.paraphrases.forEach(b=>{const T=z.contexts.find(k=>k.pairId===b.pairId);T&&te.details[T.id]&&(ae[`PARAPHRASE_CONTEXT_QUIZ:${b.text}`]=!0)}),ae[C.type]=q}else if(C.type==="COLLOCATION_CONTEXT_QUIZ"){const z=C;typeof te=="object"&&te.details&&z.collocations.forEach(b=>{const T=z.contexts.find(k=>k.pairId===b.pairId);T&&te.details[T.id]&&(ae[`COLLOCATION_CONTEXT_QUIZ:${b.text}`]=!0)}),ae[C.type]=q}else if(C.type==="IDIOM_CONTEXT_QUIZ"){const z=C;typeof te=="object"&&te.details&&z.idioms.forEach(b=>{const T=z.contexts.find(k=>k.pairId===b.pairId);T&&te.details[T.id]&&(ae[`IDIOM_CONTEXT_QUIZ:${b.text}`]=!0)}),ae[C.type]=q}else ae[C.type]=q});let fe=nt.HARD;return $>0&&(F===$?fe=$>1?nt.EASY:nt.HARD:F<$/2&&(fe=nt.FORGOT)),{finalGrade:fe,resultHistory:ae,detailedResults:me,counts:{correct:F,tested:$},newResults:V}};return{challenges:n,currentChallengeIndex:i,currentChallenge:L,userAnswers:f,results:p,isFinishing:h,elapsedSeconds:w,currentPrepositionGroup:D,isLastChallenge:M,startTest:_,setAnswer:j,handleNext:P,handleBack:Y,handleIgnore:U,checkAnswers:G,finishTest:()=>{I(!1),m(!0);const{newResults:V}=G();g(V)}}},U2={SPELLING:"sp",IPA_QUIZ:"iq",PREPOSITION_QUIZ:"pq",WORD_FAMILY:"wf",MEANING_QUIZ:"mq",PARAPHRASE_QUIZ:"prq",SENTENCE_SCRAMBLE:"sc",HETERONYM_QUIZ:"hq",PRONUNCIATION:"p",COLLOCATION_QUIZ:"cq",IDIOM_QUIZ:"idq",PARAPHRASE_CONTEXT_QUIZ:"pcq",COLLOCATION_CONTEXT_QUIZ:"ccq",COLLOCATION_MULTICHOICE_QUIZ:"cmq",IDIOM_CONTEXT_QUIZ:"icq"},D2=["PARAPHRASE_CONTEXT_QUIZ","COLLOCATION_CONTEXT_QUIZ","IDIOM_CONTEXT_QUIZ","COLLOCATION_MULTICHOICE_QUIZ","HETERONYM_QUIZ"],Rs={collocation:{easy:["COLLOCATION_CONTEXT_QUIZ","COLLOCATION_MULTICHOICE_QUIZ","COLLOCATION_QUIZ"],hard:["COLLOCATION_QUIZ","COLLOCATION_CONTEXT_QUIZ","COLLOCATION_MULTICHOICE_QUIZ"]},paraphrase:{easy:["PARAPHRASE_CONTEXT_QUIZ","PARAPHRASE_QUIZ"],hard:["PARAPHRASE_QUIZ","PARAPHRASE_CONTEXT_QUIZ"]},idiom:{easy:["IDIOM_CONTEXT_QUIZ","IDIOM_QUIZ"],hard:["IDIOM_QUIZ","IDIOM_CONTEXT_QUIZ"]}},z2=new Set([...Rs.collocation.easy,...Rs.paraphrase.easy,...Rs.idiom.easy]),Go=(n,r)=>{const i=new Set;return Object.keys(Rs).forEach(o=>{const f=Rs[o][r];for(const d of f){const p=d;if(n.has(p)){i.add(p);break}}}),n.forEach(o=>{z2.has(o)||i.add(o)}),i},B2=({word:n,onClose:r,onComplete:i,isQuickFire:o=!1,isModal:f=!0,sessionPosition:d,onPrevWord:p,disableHints:g=!1,forceShowHint:h=!1,skipSetup:m=!1,challengeFilter:y,skipRecap:v=!1})=>{const[w,N]=E.useState(!o&&!m),[O,I]=E.useState(new Set),[_,j]=E.useState(!1),[L,D]=E.useState(!1),[M,P]=E.useState(h),[Y,U]=E.useState(null),G=M2();E.useEffect(()=>{P(h)},[G.currentChallengeIndex,h]);const A=E.useMemo(()=>{try{return k2(n)}catch(b){return console.error("[TestModal] Error generating challenges:",b),[]}},[n]),V=E.useMemo(()=>{const b=n.lastTestResults||{},T=new Map,k=Array.from(new Set(A.map(ue=>ue.type))),Q=(ue,ie)=>{if(b[ue]!==void 0)return b[ue];const he=U2[ie];if(he){const B=ue.startsWith(ie)?ue.substring(ie.length):"",le=he+B;return b[le]}};return k.forEach(ue=>{const ie=A.filter(B=>B.type===ue);if(ue==="WORD_FAMILY"){const B=["nouns","verbs","adjs","advs"],le={nouns:"n",verbs:"v",adjs:"j",advs:"d"};let J=0;const ee=B.flatMap(ye=>{var ve;return(((ve=n.wordFamily)==null?void 0:ve[ye])||[]).map(Ce=>({...Ce,typeKey:ye}))}).filter(ye=>!ye.isIgnored&&ye.word);ee.length>0&&ee.forEach(ye=>{const ve=le[ye.typeKey];(b[`WORD_FAMILY:${ve}:${ye.word}`]??b[`wf:${ve}:${ye.word}`]??b[`WORD_FAMILY_${ye.typeKey.toUpperCase()}`])===!0&&J++}),T.set(ue,{score:J,total:ee.length});return}if(ue==="SENTENCE_SCRAMBLE"){const B=Object.keys(b).some(le=>(le.startsWith("SENTENCE_SCRAMBLE")||le.startsWith("sc"))&&b[le]===!0);T.set(ue,{score:B?1:0,total:1});return}let he=0;ie.forEach(B=>{let le=!1,J="";if(B.type==="COLLOCATION_QUIZ"?J=`COLLOCATION_QUIZ:${B.fullText}`:B.type==="COLLOCATION_MULTICHOICE_QUIZ"?J=`COLLOCATION_MULTICHOICE_QUIZ:${B.fullText}`:B.type==="IDIOM_QUIZ"?J=`IDIOM_QUIZ:${B.fullText}`:B.type==="PREPOSITION_QUIZ"?J=`PREPOSITION_QUIZ:${B.answer}`:B.type==="PARAPHRASE_QUIZ"?J=`PARAPHRASE_QUIZ:${B.answer}`:B.type==="PARAPHRASE_CONTEXT_QUIZ"?J="PARAPHRASE_CONTEXT_QUIZ":B.type==="COLLOCATION_CONTEXT_QUIZ"?J="COLLOCATION_CONTEXT_QUIZ":B.type==="IDIOM_CONTEXT_QUIZ"?J="IDIOM_CONTEXT_QUIZ":J=B.type,Q(J,ue)===!0&&(le=!0),!le){if(B.type==="PARAPHRASE_QUIZ"){const ee=B.answer;b[`PARAPHRASE_CONTEXT_QUIZ:${ee}`]===!0&&(le=!0)}else if(B.type==="COLLOCATION_QUIZ"){const ee=B.fullText;b[`COLLOCATION_CONTEXT_QUIZ:${ee}`]===!0&&(le=!0),Q(`COLLOCATION_MULTICHOICE_QUIZ:${ee}`,"COLLOCATION_MULTICHOICE_QUIZ")===!0&&(le=!0)}else if(B.type==="IDIOM_QUIZ"){const ee=B.fullText;b[`IDIOM_CONTEXT_QUIZ:${ee}`]===!0&&(le=!0)}}le&&he++}),T.set(ue,{score:he,total:ie.length})}),T},[n,A]);E.useEffect(()=>{if(o&&!_&&G.challenges.length===0){if(A.length===0){setTimeout(r,100);return}(async()=>{j(!0);let T=A;y&&(T=A.filter(y)),T.length===0&&(T=A.filter(Q=>Q.type!=="SPELLING")),T.length===0&&(T=A);const k=T[Math.floor(Math.random()*T.length)];if(!k){j(!1),setTimeout(r,500);return}try{const Q=await Eg([k],n);Q.length>0?(G.startTest(Q),N(!1)):setTimeout(r,500)}catch{setTimeout(r,500)}finally{j(!1)}})()}},[o,A,n,y]),E.useEffect(()=>{m&&!o&&A.length>0&&G.challenges.length===0&&!_&&ae()},[m,o,A.length,G.challenges.length,_]),E.useEffect(()=>{if(o||A.length===0)return;const b=Object.keys(n.lastTestResults||{}).length>0,T=new Set;!b&&!m?(D(!1),A.forEach(k=>T.add(k.type))):(D(!0),["MEANING_QUIZ","PREPOSITION_QUIZ","COLLOCATION_CONTEXT_QUIZ"].forEach(k=>{A.some(Q=>Q.type===k)&&T.add(k)})),I(T)},[A,n,o,m]);const F=b=>{D(!1),I(T=>{const k=new Set(T);return k.has(b)?k.delete(b):k.add(b),k})},$=async b=>{const T=b||O;let k=A.filter(ie=>T.has(ie.type));if(T.has("SENTENCE_SCRAMBLE")){const ie=k.filter(he=>he.type==="SENTENCE_SCRAMBLE");if(ie.length>1){const he=ie[Math.floor(Math.random()*ie.length)];k=k.filter(B=>B.type!=="SENTENCE_SCRAMBLE"),k.push(he)}}if(k.length===0)return;j(!0);const ue=(await Eg(k,n)).sort(()=>Math.random()-.5);G.startTest(ue),j(!1),N(!1)},ae=async()=>{const b=new Set(A.map(Q=>Q.type)),T=new Set;b.has("MEANING_QUIZ")&&T.add("MEANING_QUIZ");for(const Q of Rs.collocation.easy)if(b.has(Q)){T.add(Q);break}for(const Q of Rs.paraphrase.easy)if(b.has(Q)){T.add(Q);break}const k=[];b.has("IPA_QUIZ")&&k.push("IPA_QUIZ"),b.has("PREPOSITION_QUIZ")&&k.push("PREPOSITION_QUIZ"),b.has("WORD_FAMILY")&&k.push("WORD_FAMILY");for(const Q of Rs.idiom.easy)if(b.has(Q)){k.push(Q);break}if(k.length>0){const Q=k[Math.floor(Math.random()*k.length)];T.add(Q)}if(T.size===0){const Q=Go(b,"easy");if(Q.size>0){D(!0),$(Q);return}return}D(!0),$(T)},me=()=>{const b=new Set,T=Kf(n),k=n.lastTestResults||{},Q=T.filter(ie=>!ie.testKeys.some(he=>k[he]===!0));if(Q.length===0){if(V.forEach((he,B)=>{he.score<he.total&&b.add(B)}),b.size===0)return;const ie=Go(b,"easy");$(ie);return}A.forEach(ie=>{let he=[];ie.type==="COLLOCATION_QUIZ"?he.push(`COLLOCATION_QUIZ:${ie.fullText}`):ie.type==="COLLOCATION_MULTICHOICE_QUIZ"?he.push(`COLLOCATION_MULTICHOICE_QUIZ:${ie.fullText}`):ie.type==="COLLOCATION_CONTEXT_QUIZ"||(ie.type==="PARAPHRASE_QUIZ"?he.push(`PARAPHRASE_QUIZ:${ie.answer}`):ie.type==="PREPOSITION_QUIZ"?he.push(`PREPOSITION_QUIZ:${ie.answer}`):ie.type==="SPELLING"?he.push("SPELLING"):ie.type==="PRONUNCIATION"?he.push("PRONUNCIATION"):ie.type==="MEANING_QUIZ"?he.push("MEANING_QUIZ"):ie.type==="IPA_QUIZ"?he.push("IPA_QUIZ"):ie.type==="WORD_FAMILY"?he.push("WORD_FAMILY"):ie.type==="SENTENCE_SCRAMBLE"&&he.push("SENTENCE_SCRAMBLE")),he.some(le=>Q.some(J=>J.testKeys.includes(le)||J.testKeys.some(ee=>ee.startsWith("WORD_FAMILY")&&le==="WORD_FAMILY")))&&b.add(ie.type),ie.type==="COLLOCATION_CONTEXT_QUIZ"&&Q.filter(J=>J.key.startsWith("colloc:")).length>0&&b.add(ie.type),ie.type==="PARAPHRASE_CONTEXT_QUIZ"&&Q.filter(J=>J.key.startsWith("para:")).length>0&&b.add(ie.type),ie.type==="IDIOM_CONTEXT_QUIZ"&&Q.filter(J=>J.key.startsWith("idiom:")).length>0&&b.add(ie.type)}),b.size===0&&V.forEach((ie,he)=>{ie.score<ie.total&&b.add(he)});const ue=Go(b,"easy");D(!1),$(ue)},fe=async()=>{const b=new Set(A.map(k=>k.type)),T=Go(b,"hard");T.size!==0&&(D(!1),$(T))},C=(b=!1)=>{const{finalGrade:T,resultHistory:k,detailedResults:Q,counts:ue}=G.checkAnswers();if(G.finishTest(),v||o)setTimeout(()=>i(T,k,b,ue),1e3);else{const ie=n.masteryScore||0,he=n.lastReview&&n.lastGrade||"NEW",B={...n,lastTestResults:{...n.lastTestResults||{},...k}},le=wa(B);U({oldMastery:ie,newMastery:le,oldStatus:he,newStatus:T,results:Q,finalGrade:T,resultHistory:k,counts:ue})}},ne=()=>{G.isLastChallenge?C(!1):G.handleNext()},te=b=>{const T=Math.floor(b/60),k=b%60;return`${T}:${k.toString().padStart(2,"0")}`},q=E.useMemo(()=>{const b=new Map;return V.forEach((T,k)=>{D2.includes(k)||b.set(k,T)}),b},[V]),z=E.useMemo(()=>wa(n)===100,[n]);if(!w&&!_&&!G.currentChallenge)return f?l.jsx("div",{className:"fixed inset-0 z-[150] flex items-center justify-center p-4 bg-black/60 backdrop-blur-sm",children:l.jsxs("div",{className:"bg-white p-6 rounded-2xl shadow-xl text-center space-y-4",children:[l.jsx("p",{className:"text-red-500 font-bold",children:"Failed to load challenge."}),l.jsx("button",{onClick:r,className:"px-4 py-2 bg-neutral-100 rounded-lg text-sm font-bold",children:"Close"})]})}):l.jsxs("div",{className:"flex flex-col items-center justify-center h-full p-6 text-center space-y-4",children:[l.jsx(At,{className:"animate-spin text-neutral-400",size:32}),l.jsx("p",{className:"text-red-500 font-bold",children:"Error loading."}),l.jsx("button",{onClick:r,className:"text-xs underline text-neutral-500",children:"Return"})]});if((o||m)&&(_||!G.currentChallenge)){const b=l.jsxs("div",{className:"w-full h-full flex flex-col items-center justify-center p-8 text-center space-y-4",children:[l.jsx(At,{className:"animate-spin text-neutral-400",size:32}),l.jsx("p",{className:"text-xs font-black text-neutral-500 uppercase tracking-widest",children:"Preparing..."})]});return f?l.jsx("div",{className:"fixed inset-0 z-[150] flex items-center justify-center p-4 bg-black/60 backdrop-blur-sm",children:l.jsx("div",{className:"bg-white w-full max-w-md rounded-[2.5rem] shadow-2xl overflow-hidden flex flex-col h-[500px]",children:b})}):b}return l.jsx(C2,{isModal:f,word:n,onClose:r,isSetupMode:w,isPreparing:_,availableChallenges:A,selectedChallengeTypes:O,onToggleChallenge:F,onSetSelection:b=>{I(b),D(!1)},onStartTest:()=>$(),challenges:G.challenges,currentChallenge:G.currentChallenge,currentChallengeIndex:G.currentChallengeIndex,userAnswers:G.userAnswers,handleAnswerChange:G.setAnswer,results:G.results,isFinishing:G.isFinishing,currentPrepositionGroup:G.currentPrepositionGroup,isLastChallenge:G.isLastChallenge,handleNextClick:ne,handleBackClick:G.handleBack,handleIgnore:G.handleIgnore,handleFinishEarly:C,showHint:M,onToggleHint:()=>P(!M),sessionPosition:d,challengeStats:q,disableHints:g,onSelectQuick:ae,onSelectPreferred:me,onSelectZeroScore:me,onSelectPartialScore:fe,isQuickMode:L,elapsedTime:te(G.elapsedSeconds),recapData:Y,onRecalculateFinish:()=>Y&&i(Y.finalGrade,Y.resultHistory,!1,Y.counts),isMastered:z})},wg=n=>n.toLowerCase().replace(/[.,!?;:]/g,"").trim();function H2(n,r){const i=n.toLowerCase(),o=r.toLowerCase(),f=[];let d=0,p=0,g=0;const h=(i.length+o.length)*2+100;for(;(d<i.length||p<o.length)&&g<h;)if(g++,d<i.length&&p<o.length&&i[d]===o[p])f.push({char:i[d],status:"correct"}),d++,p++;else if(d<i.length&&(p>=o.length||i[d]!==o[p])){const m=o.indexOf(i[d],p);m!==-1&&m-p<3?(p=m,f.push({char:i[d],status:"correct"}),d++,p++):(f.push({char:i[d],status:"wrong"}),d++)}else p++;return f}function Ng(n,r){const i=n.split(/\s+/).filter(Boolean),o=wg(r).split(/\s+/).filter(Boolean);let f=0,d=0;const p=i.map(h=>{const m=wg(h);f+=m.length;let y=-1;if(o.forEach((v,w)=>{y===-1&&v===m&&(y=w)}),y===-1&&o.forEach((v,w)=>{y===-1&&v.length>=2&&(v.startsWith(m.substring(0,2))||m.startsWith(v.substring(0,2)))&&(y=w)}),y!==-1){const v=o[y];o.splice(y,1);const w=H2(h,v),N=w.filter(I=>I.status==="correct").length;d+=N;const O=N===m.length?"correct":"near";return{word:h,status:O,chars:w}}return{word:h,status:"missing",chars:h.split("").map(v=>({char:v,status:"missing"}))}});return{score:f>0?Math.round(d/f*100):0,words:p}}const Po=3e3,Wb=({target:n,onClose:r,onSaveScore:i})=>{const[o,f]=E.useState(!1),d=E.useRef(!1),[p,g]=E.useState(n||""),[h,m]=E.useState(!n),[y,v]=E.useState(""),[w,N]=E.useState(null),[O,I]=E.useState(null),[_,j]=E.useState(Po),[L,D]=E.useState(null),[M,P]=E.useState(!1),[Y,U]=E.useState(!1),G=E.useRef(new s0),A=E.useRef(null),V=E.useRef(Date.now()),{showToast:F}=On();E.useEffect(()=>{if(o&&p&&y){const z=Ng(p,y);I(z)}},[y,o,p]);const $=E.useCallback(async()=>{if(p){if(L){U(!Y);return}P(!0);try{const z=p.trim().toLowerCase(),b=Cs().find(ue=>ue.word.toLowerCase()===z);if(b&&b.ipaUs){D(b.ipaUs),U(!0),P(!1);return}const T=rt(),k=Mt(T),Q=await fetch(`${k}/api/convert/ipa?text=${encodeURIComponent(p)}`);if(Q.ok){const ue=await Q.json();D(ue.ipa),U(!0)}else F("IPA server unavailable","error")}catch{F("Failed to fetch IPA","error")}finally{P(!1)}}},[p,L,Y,F]),ae=E.useCallback(async z=>{if(!p)return;A.current&&(clearInterval(A.current),A.current=null),G.current.stop();const b=await n0();b&&N(b),f(!1),d.current=!1;const T=Ng(p,z);I(T),i&&i(T.score)},[p,i]),me=E.useCallback(()=>{V.current=Date.now(),j(Po)},[]),fe=E.useCallback(z=>{A.current&&clearInterval(A.current),V.current=Date.now(),j(Po),A.current=setInterval(()=>{const T=Date.now()-V.current,k=Math.max(0,Po-T);j(k),k<=0&&d.current&&ae(z)},50)},[ae]);E.useEffect(()=>()=>{A.current&&clearInterval(A.current),G.current.stop()},[]);const C=async()=>{if(p)if(h&&m(!1),o)await ae(y);else{v(""),I(null),N(null);try{await a0(),f(!0),d.current=!0,me(),fe(""),G.current.start((z,b)=>{const T=z+b;v(T),me()},z=>{d.current&&(v(z),ae(z))})}catch(z){console.error(z),f(!1),d.current=!1}}},ne=()=>{w&&new Audio(`data:${w.mimeType};base64,${w.base64}`).play()},te=()=>{if(!p)return;const z=Ni("vocab_pro_mimic_practice_queue",[]);if(z.some(T=>T.text===p)){F("Already in Pronunciation Queue","info");return}const b={id:`quick-save-${Date.now()}`,text:p,sourceWord:p.length>30?p.substring(0,30)+"...":p,type:"Quick Practice"};Xf("vocab_pro_mimic_practice_queue",[...z,b]),F("Saved to Pronunciation Page","success")},q=z=>{const b=z.length;return b<40?"text-2xl md:text-3xl":b<80?"text-xl md:text-2xl":b<150?"text-lg md:text-xl":"text-base md:text-lg"};return l.jsx("div",{className:"fixed inset-0 z-[10000] flex items-center justify-center p-4 bg-black/60 backdrop-blur-sm animate-in fade-in duration-200",children:l.jsxs("div",{className:"bg-white w-full max-w-md rounded-[2.5rem] shadow-2xl border border-neutral-200 p-8 flex flex-col items-center gap-6 relative",children:[l.jsx("button",{onClick:r,className:"absolute top-6 right-6 p-2 text-neutral-300 hover:text-neutral-900 hover:bg-neutral-100 rounded-full transition-all",children:l.jsx(Ut,{size:20})}),l.jsxs("div",{className:"text-center space-y-1 mt-2",children:[l.jsx("span",{className:"text-[10px] font-black uppercase text-neutral-400 tracking-widest",children:"Mimic Practice"}),l.jsx("h3",{className:"text-xl font-bold text-neutral-900 leading-tight",children:"Practice Selected Phrase"})]}),l.jsxs("div",{className:"w-full p-6 bg-neutral-50 rounded-[2rem] border border-neutral-200 flex flex-col items-center gap-3 min-h-[120px] overflow-hidden relative group",children:[h?l.jsxs("div",{className:"w-full relative",children:[l.jsx("textarea",{value:p,onChange:z=>g(z.target.value),placeholder:"Enter text to practice...",className:"w-full h-32 p-4 bg-white border border-neutral-200 rounded-xl font-medium resize-none focus:ring-2 focus:ring-neutral-900 outline-none text-base leading-relaxed"}),l.jsx("button",{onClick:()=>m(!1),className:"absolute bottom-4 right-4 px-3 py-1.5 bg-neutral-900 text-white rounded-lg text-xs font-bold shadow-sm",children:"Done"})]}):l.jsxs(l.Fragment,{children:[l.jsx("button",{onClick:()=>m(!0),className:"absolute top-4 right-4 p-2 text-neutral-400 hover:text-indigo-600 opacity-0 group-hover:opacity-100 transition-opacity bg-white rounded-full shadow-sm",children:l.jsx(uE,{size:16})}),l.jsx("div",{className:"flex flex-wrap justify-center gap-x-1.5 gap-y-1 w-full",children:p.split(/\s+/).map((z,b)=>{const T=O==null?void 0:O.words[b];let k="text-neutral-800";if(T)switch(T.status){case"correct":k="text-emerald-600";break;case"near":k="text-amber-500";break;case"wrong":k="text-rose-500";break;case"missing":k="text-neutral-300";break;default:k="text-neutral-800"}return l.jsx("span",{onClick:()=>Sa(z),className:`${q(p)} font-bold cursor-pointer hover:underline decoration-neutral-200 transition-all leading-normal ${k}`,children:z},b)})})]}),Y&&L&&!h&&l.jsx("div",{className:"px-4 py-1.5 bg-white border border-neutral-200 rounded-xl text-sm font-mono font-medium text-neutral-500 animate-in slide-in-from-top-2 duration-300",children:L})]}),l.jsxs("div",{className:"flex flex-col items-center gap-4 w-full",children:[o?l.jsxs("div",{className:"flex items-center gap-2 text-rose-500 animate-pulse",children:[l.jsx(lg,{size:20}),l.jsx("span",{className:"text-xs font-black uppercase tracking-widest",children:"Listening..."})]}):y&&l.jsxs("p",{className:"text-sm font-medium italic text-neutral-500 line-clamp-2",children:['"',y,'"']}),O&&l.jsxs("div",{className:"text-center animate-in zoom-in-95",children:[l.jsxs("div",{className:`text-4xl font-black ${O.score>80?"text-emerald-500":O.score>50?"text-amber-500":"text-rose-500"}`,children:[O.score,"%"]}),l.jsx("p",{className:"text-[9px] font-bold text-neutral-400 uppercase tracking-widest",children:"Accuracy"})]})]}),l.jsxs("div",{className:"flex items-center gap-4 pt-2",children:[l.jsx("button",{onClick:()=>Sa(p),disabled:!p.trim(),className:"p-4 rounded-2xl bg-neutral-100 text-neutral-600 hover:text-neutral-900 transition-all",title:"Listen",children:l.jsx(cn,{size:24})}),l.jsx("button",{onClick:$,disabled:M,className:`p-4 rounded-2xl transition-all ${Y?"bg-indigo-600 text-white shadow-md":"bg-neutral-100 text-neutral-600 hover:text-indigo-600"}`,title:"Show Phonetic (IPA)",children:M?l.jsx(At,{size:24,className:"animate-spin"}):l.jsx(HS,{size:24})}),l.jsx("button",{onClick:C,className:`w-20 h-20 rounded-full flex items-center justify-center shadow-lg transition-all transform active:scale-105 ${o?"bg-rose-600 text-white scale-110 shadow-rose-500/50 ring-8 ring-rose-500/10":"bg-white border-4 border-neutral-100 text-neutral-900 hover:scale-105"}`,title:"Record",children:o?_<=1e3?l.jsx("span",{className:"text-2xl font-black tabular-nums animate-in fade-in duration-300",children:(_/1e3).toFixed(1)}):l.jsx(lg,{size:28,className:"animate-pulse"}):l.jsx(pl,{size:28})}),l.jsx("button",{onClick:ne,disabled:!w||o,className:`p-4 rounded-2xl transition-all ${w&&!o?"bg-indigo-100 text-indigo-600 hover:text-indigo-900":"bg-neutral-50 text-neutral-300 cursor-not-allowed"}`,title:"Play recording",children:l.jsx(vi,{size:24,fill:w&&!o?"currentColor":"none"})}),l.jsx("button",{onClick:te,disabled:!p.trim(),className:"p-4 rounded-2xl bg-neutral-100 text-neutral-600 hover:text-indigo-600 transition-all",title:"Save to Pronunciation Page",children:l.jsx(iE,{size:24})})]})]})})},G2=({word:n,onClose:r,onNavigateToWord:i,onEditRequest:o,onUpdate:f,onGainXp:d,isViewOnly:p=!1,initialTab:g="OVERVIEW"})=>{const[h,m]=E.useState(n),[y,v]=E.useState([]),[w,N]=E.useState({}),[O,I]=E.useState({}),[_,j]=E.useState(null),[L,D]=E.useState(new Set),[M,P]=E.useState(!1),[Y,U]=E.useState(!1);E.useEffect(()=>{m(n)},[n]),E.useEffect(()=>{(async()=>{if(!h)return;const q=[],z=h.wordFamily;z&&q.push(...(z.nouns||[]).map(ee=>ee.word.toLowerCase().trim()),...(z.verbs||[]).map(ee=>ee.word.toLowerCase().trim()),...(z.adjs||[]).map(ee=>ee.word.toLowerCase().trim()),...(z.advs||[]).map(ee=>ee.word.toLowerCase().trim()));const b=h.paraphrases;b&&q.push(...b.map(ee=>ee.word.toLowerCase().trim()));const T=h.idiomsList;T&&q.push(...T.map(ee=>ee.text.toLowerCase().trim()));const k=h.collocationsArray;k&&q.push(...k.map(ee=>ee.text.toLowerCase().trim()));const Q=[...new Set(q.filter(Boolean))],ue=new Set;for(const ee of Q){if(!ee)continue;await vf(h.userId,ee)&&ue.add(ee)}D(ue);const ie=await gw(h.userId,h.id);v(ie);const he=Cs(),B={};(h.groups||[]).filter(ee=>ee.toLowerCase()!=="ielts").forEach(ee=>{const ye=he.filter(ve=>{var Ce;return ve.userId===h.userId&&ve.id!==h.id&&((Ce=ve.groups)==null?void 0:Ce.includes(ee))});ye.length>0&&(B[ee]=ye)}),N(B);const J={};(h.groups||[]).forEach(ee=>{const ye=he.filter(ve=>{var Ce;return ve.userId===h.userId&&ve.id!==h.id&&((Ce=ve.groups)==null?void 0:Ce.includes(ee))});ye.length>0&&(J[ee]=ye)}),I(J)})()},[h]);const G=async(te,q="family")=>{if(!(!te.word||_||L.has(te.word.toLowerCase()))){j(te.word);try{const z=`From ${q} of "${h.word}"`,b=[...h.groups||[],`word-${q}`],T={...Rb(te.word,te.ipa||"",`Added from ${q}`,"",z,b),userId:h.userId};await dc(T),D(k=>new Set(k).add(te.word.toLowerCase()))}finally{j(null)}}},A=async(te,q,z,b)=>{const T={...h};q&&(T.lastTestResults={...T.lastTestResults||{},...q}),T.masteryScore=wa(T),await f(T),P(!1),m(T)},V=te=>{f(te),m(te)},[F,$]=E.useState(null),ae=te=>{$(te)},me=te=>{const q=rt(),z=q.audioCoach.activeCoach,b=q.audioCoach.coaches[z].name;return F==="ESSAY"?Uw(h,te,b):Dw(h,te,b)},fe=te=>{const{result:q}=te,z=q||te,b={...h,lesson:{...h.lesson||{}}};F==="ESSAY"?b.lesson.essay=z.content:b.lesson.test=z.content,V(b),$(null)},ne=rt().audio.appliedAccent;return l.jsxs(l.Fragment,{children:[M&&l.jsx(B2,{word:h,onComplete:A,onClose:()=>P(!1)}),Y&&l.jsx(Wb,{target:h.word,onClose:()=>U(!1)}),l.jsx(b2,{word:h,onClose:r,onChallengeRequest:()=>P(!0),onMimicRequest:()=>U(!0),onEditRequest:()=>o(h),onUpdate:V,linkedUnits:y,relatedWords:w,relatedByGroup:O,onNavigateToWord:i,onAddVariantToLibrary:G,addingVariant:_,existingVariants:L,appliedAccent:ne,isViewOnly:p,initialTab:g,onGenerateLesson:ae}),F&&l.jsx("div",{className:"z-[2000]",children:l.jsx("div",{className:"relative z-[500]",children:l.jsx(Sf,{isOpen:!!F,onClose:()=>$(null),type:"GENERATE_WORD_LESSON",title:F==="ESSAY"?`Generate Usage Guide: ${h.word}`:`Generate Practice Test: ${h.word}`,description:F==="ESSAY"?"AI will create a structured usage guide with tables and examples.":"AI will design an interactive test for this word.",initialData:{},onGeneratePrompt:me,onJsonReceived:fe,closeOnSuccess:!0})})})]})},_g=({isOpen:n,title:r,message:i,confirmText:o,isProcessing:f,onConfirm:d,onClose:p,confirmButtonClass:g="bg-red-600 text-white hover:bg-red-700 shadow-red-200",icon:h=l.jsx(ic,{size:40})})=>n?l.jsx("div",{className:"fixed inset-0 z-[200] flex items-center justify-center p-4 bg-black/60 backdrop-blur-sm animate-in fade-in duration-200",children:l.jsx("div",{className:"bg-white w-full max-w-sm rounded-[2.5rem] shadow-2xl border border-neutral-200 overflow-hidden animate-in zoom-in-95 duration-200",children:l.jsxs("div",{className:"p-8 text-center space-y-6",children:[l.jsx("div",{className:"mx-auto w-20 h-20 bg-neutral-50 text-neutral-500 rounded-full flex items-center justify-center border-4 border-white shadow-sm",children:h}),l.jsxs("div",{className:"space-y-2",children:[l.jsx("h3",{className:"text-2xl font-black text-neutral-900 leading-tight",children:r}),l.jsx("p",{className:"text-neutral-500 text-sm leading-relaxed",children:i})]}),l.jsxs("div",{className:"flex flex-col gap-3",children:[l.jsxs("button",{disabled:f,onClick:d,className:`w-full py-4 rounded-2xl font-black text-sm transition-all shadow-lg active:scale-95 flex items-center justify-center space-x-2 disabled:opacity-50 ${g}`,children:[f?l.jsx(At,{size:18,className:"animate-spin"}):null,l.jsx("span",{children:f?"PROCESSING...":o})]}),l.jsx("button",{disabled:f,onClick:p,className:"w-full py-4 bg-neutral-100 text-neutral-500 rounded-2xl font-bold text-sm hover:bg-neutral-200 transition-all active:scale-95 disabled:opacity-50",children:"Cancel"})]})]})})}):null;var P2={};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var Ag;(function(n){n.OUTCOME_UNSPECIFIED="OUTCOME_UNSPECIFIED",n.OUTCOME_OK="OUTCOME_OK",n.OUTCOME_FAILED="OUTCOME_FAILED",n.OUTCOME_DEADLINE_EXCEEDED="OUTCOME_DEADLINE_EXCEEDED"})(Ag||(Ag={}));var Tg;(function(n){n.LANGUAGE_UNSPECIFIED="LANGUAGE_UNSPECIFIED",n.PYTHON="PYTHON"})(Tg||(Tg={}));var jg;(function(n){n.SCHEDULING_UNSPECIFIED="SCHEDULING_UNSPECIFIED",n.SILENT="SILENT",n.WHEN_IDLE="WHEN_IDLE",n.INTERRUPT="INTERRUPT"})(jg||(jg={}));var nl;(function(n){n.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",n.STRING="STRING",n.NUMBER="NUMBER",n.INTEGER="INTEGER",n.BOOLEAN="BOOLEAN",n.ARRAY="ARRAY",n.OBJECT="OBJECT",n.NULL="NULL"})(nl||(nl={}));var Ig;(function(n){n.API_SPEC_UNSPECIFIED="API_SPEC_UNSPECIFIED",n.SIMPLE_SEARCH="SIMPLE_SEARCH",n.ELASTIC_SEARCH="ELASTIC_SEARCH"})(Ig||(Ig={}));var Og;(function(n){n.AUTH_TYPE_UNSPECIFIED="AUTH_TYPE_UNSPECIFIED",n.NO_AUTH="NO_AUTH",n.API_KEY_AUTH="API_KEY_AUTH",n.HTTP_BASIC_AUTH="HTTP_BASIC_AUTH",n.GOOGLE_SERVICE_ACCOUNT_AUTH="GOOGLE_SERVICE_ACCOUNT_AUTH",n.OAUTH="OAUTH",n.OIDC_AUTH="OIDC_AUTH"})(Og||(Og={}));var Cg;(function(n){n.HTTP_IN_UNSPECIFIED="HTTP_IN_UNSPECIFIED",n.HTTP_IN_QUERY="HTTP_IN_QUERY",n.HTTP_IN_HEADER="HTTP_IN_HEADER",n.HTTP_IN_PATH="HTTP_IN_PATH",n.HTTP_IN_BODY="HTTP_IN_BODY",n.HTTP_IN_COOKIE="HTTP_IN_COOKIE"})(Cg||(Cg={}));var Rg;(function(n){n.PHISH_BLOCK_THRESHOLD_UNSPECIFIED="PHISH_BLOCK_THRESHOLD_UNSPECIFIED",n.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",n.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",n.BLOCK_HIGH_AND_ABOVE="BLOCK_HIGH_AND_ABOVE",n.BLOCK_HIGHER_AND_ABOVE="BLOCK_HIGHER_AND_ABOVE",n.BLOCK_VERY_HIGH_AND_ABOVE="BLOCK_VERY_HIGH_AND_ABOVE",n.BLOCK_ONLY_EXTREMELY_HIGH="BLOCK_ONLY_EXTREMELY_HIGH"})(Rg||(Rg={}));var kg;(function(n){n.UNSPECIFIED="UNSPECIFIED",n.BLOCKING="BLOCKING",n.NON_BLOCKING="NON_BLOCKING"})(kg||(kg={}));var Lg;(function(n){n.MODE_UNSPECIFIED="MODE_UNSPECIFIED",n.MODE_DYNAMIC="MODE_DYNAMIC"})(Lg||(Lg={}));var Mg;(function(n){n.MODE_UNSPECIFIED="MODE_UNSPECIFIED",n.AUTO="AUTO",n.ANY="ANY",n.NONE="NONE",n.VALIDATED="VALIDATED"})(Mg||(Mg={}));var Ug;(function(n){n.THINKING_LEVEL_UNSPECIFIED="THINKING_LEVEL_UNSPECIFIED",n.LOW="LOW",n.MEDIUM="MEDIUM",n.HIGH="HIGH",n.MINIMAL="MINIMAL"})(Ug||(Ug={}));var Dg;(function(n){n.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",n.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",n.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",n.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",n.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",n.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY",n.HARM_CATEGORY_IMAGE_HATE="HARM_CATEGORY_IMAGE_HATE",n.HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT="HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT",n.HARM_CATEGORY_IMAGE_HARASSMENT="HARM_CATEGORY_IMAGE_HARASSMENT",n.HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT="HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT",n.HARM_CATEGORY_JAILBREAK="HARM_CATEGORY_JAILBREAK"})(Dg||(Dg={}));var zg;(function(n){n.HARM_BLOCK_METHOD_UNSPECIFIED="HARM_BLOCK_METHOD_UNSPECIFIED",n.SEVERITY="SEVERITY",n.PROBABILITY="PROBABILITY"})(zg||(zg={}));var Bg;(function(n){n.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",n.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",n.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",n.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",n.BLOCK_NONE="BLOCK_NONE",n.OFF="OFF"})(Bg||(Bg={}));var Hg;(function(n){n.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",n.STOP="STOP",n.MAX_TOKENS="MAX_TOKENS",n.SAFETY="SAFETY",n.RECITATION="RECITATION",n.LANGUAGE="LANGUAGE",n.OTHER="OTHER",n.BLOCKLIST="BLOCKLIST",n.PROHIBITED_CONTENT="PROHIBITED_CONTENT",n.SPII="SPII",n.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",n.IMAGE_SAFETY="IMAGE_SAFETY",n.UNEXPECTED_TOOL_CALL="UNEXPECTED_TOOL_CALL",n.IMAGE_PROHIBITED_CONTENT="IMAGE_PROHIBITED_CONTENT",n.NO_IMAGE="NO_IMAGE",n.IMAGE_RECITATION="IMAGE_RECITATION",n.IMAGE_OTHER="IMAGE_OTHER"})(Hg||(Hg={}));var Gg;(function(n){n.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",n.NEGLIGIBLE="NEGLIGIBLE",n.LOW="LOW",n.MEDIUM="MEDIUM",n.HIGH="HIGH"})(Gg||(Gg={}));var Pg;(function(n){n.HARM_SEVERITY_UNSPECIFIED="HARM_SEVERITY_UNSPECIFIED",n.HARM_SEVERITY_NEGLIGIBLE="HARM_SEVERITY_NEGLIGIBLE",n.HARM_SEVERITY_LOW="HARM_SEVERITY_LOW",n.HARM_SEVERITY_MEDIUM="HARM_SEVERITY_MEDIUM",n.HARM_SEVERITY_HIGH="HARM_SEVERITY_HIGH"})(Pg||(Pg={}));var Vg;(function(n){n.URL_RETRIEVAL_STATUS_UNSPECIFIED="URL_RETRIEVAL_STATUS_UNSPECIFIED",n.URL_RETRIEVAL_STATUS_SUCCESS="URL_RETRIEVAL_STATUS_SUCCESS",n.URL_RETRIEVAL_STATUS_ERROR="URL_RETRIEVAL_STATUS_ERROR",n.URL_RETRIEVAL_STATUS_PAYWALL="URL_RETRIEVAL_STATUS_PAYWALL",n.URL_RETRIEVAL_STATUS_UNSAFE="URL_RETRIEVAL_STATUS_UNSAFE"})(Vg||(Vg={}));var qg;(function(n){n.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",n.SAFETY="SAFETY",n.OTHER="OTHER",n.BLOCKLIST="BLOCKLIST",n.PROHIBITED_CONTENT="PROHIBITED_CONTENT",n.IMAGE_SAFETY="IMAGE_SAFETY",n.MODEL_ARMOR="MODEL_ARMOR",n.JAILBREAK="JAILBREAK"})(qg||(qg={}));var Yg;(function(n){n.TRAFFIC_TYPE_UNSPECIFIED="TRAFFIC_TYPE_UNSPECIFIED",n.ON_DEMAND="ON_DEMAND",n.PROVISIONED_THROUGHPUT="PROVISIONED_THROUGHPUT"})(Yg||(Yg={}));var Fg;(function(n){n.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",n.TEXT="TEXT",n.IMAGE="IMAGE",n.AUDIO="AUDIO"})(Fg||(Fg={}));var $g;(function(n){n.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",n.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",n.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",n.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})($g||($g={}));var Wg;(function(n){n.TUNING_MODE_UNSPECIFIED="TUNING_MODE_UNSPECIFIED",n.TUNING_MODE_FULL="TUNING_MODE_FULL",n.TUNING_MODE_PEFT_ADAPTER="TUNING_MODE_PEFT_ADAPTER"})(Wg||(Wg={}));var Qg;(function(n){n.ADAPTER_SIZE_UNSPECIFIED="ADAPTER_SIZE_UNSPECIFIED",n.ADAPTER_SIZE_ONE="ADAPTER_SIZE_ONE",n.ADAPTER_SIZE_TWO="ADAPTER_SIZE_TWO",n.ADAPTER_SIZE_FOUR="ADAPTER_SIZE_FOUR",n.ADAPTER_SIZE_EIGHT="ADAPTER_SIZE_EIGHT",n.ADAPTER_SIZE_SIXTEEN="ADAPTER_SIZE_SIXTEEN",n.ADAPTER_SIZE_THIRTY_TWO="ADAPTER_SIZE_THIRTY_TWO"})(Qg||(Qg={}));var Zg;(function(n){n.JOB_STATE_UNSPECIFIED="JOB_STATE_UNSPECIFIED",n.JOB_STATE_QUEUED="JOB_STATE_QUEUED",n.JOB_STATE_PENDING="JOB_STATE_PENDING",n.JOB_STATE_RUNNING="JOB_STATE_RUNNING",n.JOB_STATE_SUCCEEDED="JOB_STATE_SUCCEEDED",n.JOB_STATE_FAILED="JOB_STATE_FAILED",n.JOB_STATE_CANCELLING="JOB_STATE_CANCELLING",n.JOB_STATE_CANCELLED="JOB_STATE_CANCELLED",n.JOB_STATE_PAUSED="JOB_STATE_PAUSED",n.JOB_STATE_EXPIRED="JOB_STATE_EXPIRED",n.JOB_STATE_UPDATING="JOB_STATE_UPDATING",n.JOB_STATE_PARTIALLY_SUCCEEDED="JOB_STATE_PARTIALLY_SUCCEEDED"})(Zg||(Zg={}));var Kg;(function(n){n.TUNING_TASK_UNSPECIFIED="TUNING_TASK_UNSPECIFIED",n.TUNING_TASK_I2V="TUNING_TASK_I2V",n.TUNING_TASK_T2V="TUNING_TASK_T2V",n.TUNING_TASK_R2V="TUNING_TASK_R2V"})(Kg||(Kg={}));var Xg;(function(n){n.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",n.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",n.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",n.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH",n.MEDIA_RESOLUTION_ULTRA_HIGH="MEDIA_RESOLUTION_ULTRA_HIGH"})(Xg||(Xg={}));var Jg;(function(n){n.COLLECTION="COLLECTION"})(Jg||(Jg={}));var ex;(function(n){n.FEATURE_SELECTION_PREFERENCE_UNSPECIFIED="FEATURE_SELECTION_PREFERENCE_UNSPECIFIED",n.PRIORITIZE_QUALITY="PRIORITIZE_QUALITY",n.BALANCED="BALANCED",n.PRIORITIZE_COST="PRIORITIZE_COST"})(ex||(ex={}));var tx;(function(n){n.ENVIRONMENT_UNSPECIFIED="ENVIRONMENT_UNSPECIFIED",n.ENVIRONMENT_BROWSER="ENVIRONMENT_BROWSER"})(tx||(tx={}));var ax;(function(n){n.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",n.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",n.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",n.BLOCK_NONE="BLOCK_NONE"})(ax||(ax={}));var nx;(function(n){n.DONT_ALLOW="DONT_ALLOW",n.ALLOW_ADULT="ALLOW_ADULT",n.ALLOW_ALL="ALLOW_ALL"})(nx||(nx={}));var sx;(function(n){n.auto="auto",n.en="en",n.ja="ja",n.ko="ko",n.hi="hi",n.zh="zh",n.pt="pt",n.es="es"})(sx||(sx={}));var lx;(function(n){n.MASK_MODE_DEFAULT="MASK_MODE_DEFAULT",n.MASK_MODE_USER_PROVIDED="MASK_MODE_USER_PROVIDED",n.MASK_MODE_BACKGROUND="MASK_MODE_BACKGROUND",n.MASK_MODE_FOREGROUND="MASK_MODE_FOREGROUND",n.MASK_MODE_SEMANTIC="MASK_MODE_SEMANTIC"})(lx||(lx={}));var rx;(function(n){n.CONTROL_TYPE_DEFAULT="CONTROL_TYPE_DEFAULT",n.CONTROL_TYPE_CANNY="CONTROL_TYPE_CANNY",n.CONTROL_TYPE_SCRIBBLE="CONTROL_TYPE_SCRIBBLE",n.CONTROL_TYPE_FACE_MESH="CONTROL_TYPE_FACE_MESH"})(rx||(rx={}));var ix;(function(n){n.SUBJECT_TYPE_DEFAULT="SUBJECT_TYPE_DEFAULT",n.SUBJECT_TYPE_PERSON="SUBJECT_TYPE_PERSON",n.SUBJECT_TYPE_ANIMAL="SUBJECT_TYPE_ANIMAL",n.SUBJECT_TYPE_PRODUCT="SUBJECT_TYPE_PRODUCT"})(ix||(ix={}));var ox;(function(n){n.EDIT_MODE_DEFAULT="EDIT_MODE_DEFAULT",n.EDIT_MODE_INPAINT_REMOVAL="EDIT_MODE_INPAINT_REMOVAL",n.EDIT_MODE_INPAINT_INSERTION="EDIT_MODE_INPAINT_INSERTION",n.EDIT_MODE_OUTPAINT="EDIT_MODE_OUTPAINT",n.EDIT_MODE_CONTROLLED_EDITING="EDIT_MODE_CONTROLLED_EDITING",n.EDIT_MODE_STYLE="EDIT_MODE_STYLE",n.EDIT_MODE_BGSWAP="EDIT_MODE_BGSWAP",n.EDIT_MODE_PRODUCT_IMAGE="EDIT_MODE_PRODUCT_IMAGE"})(ox||(ox={}));var cx;(function(n){n.FOREGROUND="FOREGROUND",n.BACKGROUND="BACKGROUND",n.PROMPT="PROMPT",n.SEMANTIC="SEMANTIC",n.INTERACTIVE="INTERACTIVE"})(cx||(cx={}));var ux;(function(n){n.ASSET="ASSET",n.STYLE="STYLE"})(ux||(ux={}));var dx;(function(n){n.INSERT="INSERT",n.REMOVE="REMOVE",n.REMOVE_STATIC="REMOVE_STATIC",n.OUTPAINT="OUTPAINT"})(dx||(dx={}));var fx;(function(n){n.OPTIMIZED="OPTIMIZED",n.LOSSLESS="LOSSLESS"})(fx||(fx={}));var px;(function(n){n.SUPERVISED_FINE_TUNING="SUPERVISED_FINE_TUNING",n.PREFERENCE_TUNING="PREFERENCE_TUNING",n.DISTILLATION="DISTILLATION"})(px||(px={}));var hx;(function(n){n.STATE_UNSPECIFIED="STATE_UNSPECIFIED",n.STATE_PENDING="STATE_PENDING",n.STATE_ACTIVE="STATE_ACTIVE",n.STATE_FAILED="STATE_FAILED"})(hx||(hx={}));var mx;(function(n){n.STATE_UNSPECIFIED="STATE_UNSPECIFIED",n.PROCESSING="PROCESSING",n.ACTIVE="ACTIVE",n.FAILED="FAILED"})(mx||(mx={}));var gx;(function(n){n.SOURCE_UNSPECIFIED="SOURCE_UNSPECIFIED",n.UPLOADED="UPLOADED",n.GENERATED="GENERATED",n.REGISTERED="REGISTERED"})(gx||(gx={}));var xx;(function(n){n.TURN_COMPLETE_REASON_UNSPECIFIED="TURN_COMPLETE_REASON_UNSPECIFIED",n.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",n.RESPONSE_REJECTED="RESPONSE_REJECTED",n.NEED_MORE_INPUT="NEED_MORE_INPUT"})(xx||(xx={}));var yx;(function(n){n.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",n.TEXT="TEXT",n.IMAGE="IMAGE",n.VIDEO="VIDEO",n.AUDIO="AUDIO",n.DOCUMENT="DOCUMENT"})(yx||(yx={}));var bx;(function(n){n.VAD_SIGNAL_TYPE_UNSPECIFIED="VAD_SIGNAL_TYPE_UNSPECIFIED",n.VAD_SIGNAL_TYPE_SOS="VAD_SIGNAL_TYPE_SOS",n.VAD_SIGNAL_TYPE_EOS="VAD_SIGNAL_TYPE_EOS"})(bx||(bx={}));var vx;(function(n){n.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",n.ACTIVITY_START="ACTIVITY_START",n.ACTIVITY_END="ACTIVITY_END"})(vx||(vx={}));var Sx;(function(n){n.START_SENSITIVITY_UNSPECIFIED="START_SENSITIVITY_UNSPECIFIED",n.START_SENSITIVITY_HIGH="START_SENSITIVITY_HIGH",n.START_SENSITIVITY_LOW="START_SENSITIVITY_LOW"})(Sx||(Sx={}));var Ex;(function(n){n.END_SENSITIVITY_UNSPECIFIED="END_SENSITIVITY_UNSPECIFIED",n.END_SENSITIVITY_HIGH="END_SENSITIVITY_HIGH",n.END_SENSITIVITY_LOW="END_SENSITIVITY_LOW"})(Ex||(Ex={}));var wx;(function(n){n.ACTIVITY_HANDLING_UNSPECIFIED="ACTIVITY_HANDLING_UNSPECIFIED",n.START_OF_ACTIVITY_INTERRUPTS="START_OF_ACTIVITY_INTERRUPTS",n.NO_INTERRUPTION="NO_INTERRUPTION"})(wx||(wx={}));var Nx;(function(n){n.TURN_COVERAGE_UNSPECIFIED="TURN_COVERAGE_UNSPECIFIED",n.TURN_INCLUDES_ONLY_ACTIVITY="TURN_INCLUDES_ONLY_ACTIVITY",n.TURN_INCLUDES_ALL_INPUT="TURN_INCLUDES_ALL_INPUT"})(Nx||(Nx={}));var _x;(function(n){n.SCALE_UNSPECIFIED="SCALE_UNSPECIFIED",n.C_MAJOR_A_MINOR="C_MAJOR_A_MINOR",n.D_FLAT_MAJOR_B_FLAT_MINOR="D_FLAT_MAJOR_B_FLAT_MINOR",n.D_MAJOR_B_MINOR="D_MAJOR_B_MINOR",n.E_FLAT_MAJOR_C_MINOR="E_FLAT_MAJOR_C_MINOR",n.E_MAJOR_D_FLAT_MINOR="E_MAJOR_D_FLAT_MINOR",n.F_MAJOR_D_MINOR="F_MAJOR_D_MINOR",n.G_FLAT_MAJOR_E_FLAT_MINOR="G_FLAT_MAJOR_E_FLAT_MINOR",n.G_MAJOR_E_MINOR="G_MAJOR_E_MINOR",n.A_FLAT_MAJOR_F_MINOR="A_FLAT_MAJOR_F_MINOR",n.A_MAJOR_G_FLAT_MINOR="A_MAJOR_G_FLAT_MINOR",n.B_FLAT_MAJOR_G_MINOR="B_FLAT_MAJOR_G_MINOR",n.B_MAJOR_A_FLAT_MINOR="B_MAJOR_A_FLAT_MINOR"})(_x||(_x={}));var Ax;(function(n){n.MUSIC_GENERATION_MODE_UNSPECIFIED="MUSIC_GENERATION_MODE_UNSPECIFIED",n.QUALITY="QUALITY",n.DIVERSITY="DIVERSITY",n.VOCALIZATION="VOCALIZATION"})(Ax||(Ax={}));var Tx;(function(n){n.PLAYBACK_CONTROL_UNSPECIFIED="PLAYBACK_CONTROL_UNSPECIFIED",n.PLAY="PLAY",n.PAUSE="PAUSE",n.STOP="STOP",n.RESET_CONTEXT="RESET_CONTEXT"})(Tx||(Tx={}));/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var jx;(function(n){n.PAGED_ITEM_BATCH_JOBS="batchJobs",n.PAGED_ITEM_MODELS="models",n.PAGED_ITEM_TUNING_JOBS="tuningJobs",n.PAGED_ITEM_FILES="files",n.PAGED_ITEM_CACHED_CONTENTS="cachedContents",n.PAGED_ITEM_FILE_SEARCH_STORES="fileSearchStores",n.PAGED_ITEM_DOCUMENTS="documents"})(jx||(jx={}));function tc(n,r){var i={};for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&r.indexOf(o)<0&&(i[o]=n[o]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var f=0,o=Object.getOwnPropertySymbols(n);f<o.length;f++)r.indexOf(o[f])<0&&Object.prototype.propertyIsEnumerable.call(n,o[f])&&(i[o[f]]=n[o[f]]);return i}function Ix(n){var r=typeof Symbol=="function"&&Symbol.iterator,i=r&&n[r],o=0;if(i)return i.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&o>=n.length&&(n=void 0),{value:n&&n[o++],done:!n}}};throw new TypeError(r?"Object is not iterable.":"Symbol.iterator is not defined.")}function _t(n){return this instanceof _t?(this.v=n,this):new _t(n)}function yi(n,r,i){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var o=i.apply(n,r||[]),f,d=[];return f=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),g("next"),g("throw"),g("return",p),f[Symbol.asyncIterator]=function(){return this},f;function p(N){return function(O){return Promise.resolve(O).then(N,v)}}function g(N,O){o[N]&&(f[N]=function(I){return new Promise(function(_,j){d.push([N,I,_,j])>1||h(N,I)})},O&&(f[N]=O(f[N])))}function h(N,O){try{m(o[N](O))}catch(I){w(d[0][3],I)}}function m(N){N.value instanceof _t?Promise.resolve(N.value.v).then(y,v):w(d[0][2],N)}function y(N){h("next",N)}function v(N){h("throw",N)}function w(N,O){N(O),d.shift(),d.length&&h(d[0][0],d[0][1])}}function lr(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n[Symbol.asyncIterator],i;return r?r.call(n):(n=typeof Ix=="function"?Ix(n):n[Symbol.iterator](),i={},o("next"),o("throw"),o("return"),i[Symbol.asyncIterator]=function(){return this},i);function o(d){i[d]=n[d]&&function(p){return new Promise(function(g,h){p=n[d](p),f(g,h,p.done,p.value)})}}function f(d,p,g,h){Promise.resolve(h).then(function(m){d({value:m,done:g})},p)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let Qb=function(){const{crypto:n}=globalThis;if(n!=null&&n.randomUUID)return Qb=n.randomUUID.bind(n),n.randomUUID();const r=new Uint8Array(1),i=n?()=>n.getRandomValues(r)[0]:()=>Math.random()*255&255;return"10000000-1000-4000-8000-100000000000".replace(/[018]/g,o=>(+o^i()&15>>+o/4).toString(16))};const V2=()=>Qb();/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function wf(n){return typeof n=="object"&&n!==null&&("name"in n&&n.name==="AbortError"||"message"in n&&String(n.message).includes("FetchRequestCanceledException"))}const Nf=n=>{if(n instanceof Error)return n;if(typeof n=="object"&&n!==null){try{if(Object.prototype.toString.call(n)==="[object Error]"){const r=new Error(n.message,n.cause?{cause:n.cause}:{});return n.stack&&(r.stack=n.stack),n.cause&&!r.cause&&(r.cause=n.cause),n.name&&(r.name=n.name),r}}catch{}try{return new Error(JSON.stringify(n))}catch{}}return new Error(n)};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Ka extends Error{}class fa extends Ka{constructor(r,i,o,f){super(`${fa.makeMessage(r,i,o)}`),this.status=r,this.headers=f,this.error=i}static makeMessage(r,i,o){const f=i!=null&&i.message?typeof i.message=="string"?i.message:JSON.stringify(i.message):i?JSON.stringify(i):o;return r&&f?`${r} ${f}`:r?`${r} status code (no body)`:f||"(no status code or body)"}static generate(r,i,o,f){if(!r||!f)return new mc({message:o,cause:Nf(i)});const d=i;return r===400?new Kb(r,d,o,f):r===401?new Xb(r,d,o,f):r===403?new Jb(r,d,o,f):r===404?new ev(r,d,o,f):r===409?new tv(r,d,o,f):r===422?new av(r,d,o,f):r===429?new nv(r,d,o,f):r>=500?new sv(r,d,o,f):new fa(r,d,o,f)}}class _f extends fa{constructor({message:r}={}){super(void 0,void 0,r||"Request was aborted.",void 0)}}class mc extends fa{constructor({message:r,cause:i}){super(void 0,void 0,r||"Connection error.",void 0),i&&(this.cause=i)}}class Zb extends mc{constructor({message:r}={}){super({message:r??"Request timed out."})}}class Kb extends fa{}class Xb extends fa{}class Jb extends fa{}class ev extends fa{}class tv extends fa{}class av extends fa{}class nv extends fa{}class sv extends fa{}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const q2=/^[a-z][a-z0-9+.-]*:/i,Y2=n=>q2.test(n);let Af=n=>(Af=Array.isArray,Af(n));const F2=Af;let $2=F2;const Ox=$2;function W2(n){if(!n)return!0;for(const r in n)return!1;return!0}function Q2(n,r){return Object.prototype.hasOwnProperty.call(n,r)}const Z2=(n,r)=>{if(typeof r!="number"||!Number.isInteger(r))throw new Ka(`${n} must be an integer`);if(r<0)throw new Ka(`${n} must be a positive integer`);return r},K2=n=>{try{return JSON.parse(n)}catch{return}};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const X2=n=>new Promise(r=>setTimeout(r,n));/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const er="0.0.1";/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function J2(){return typeof Deno<"u"&&Deno.build!=null?"deno":typeof EdgeRuntime<"u"?"edge":Object.prototype.toString.call(typeof globalThis.process<"u"?globalThis.process:0)==="[object process]"?"node":"unknown"}const eN=()=>{var n,r,i,o,f;const d=J2();if(d==="deno")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":er,"X-Stainless-OS":Rx(Deno.build.os),"X-Stainless-Arch":Cx(Deno.build.arch),"X-Stainless-Runtime":"deno","X-Stainless-Runtime-Version":typeof Deno.version=="string"?Deno.version:(r=(n=Deno.version)===null||n===void 0?void 0:n.deno)!==null&&r!==void 0?r:"unknown"};if(typeof EdgeRuntime<"u")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":er,"X-Stainless-OS":"Unknown","X-Stainless-Arch":`other:${EdgeRuntime}`,"X-Stainless-Runtime":"edge","X-Stainless-Runtime-Version":globalThis.process.version};if(d==="node")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":er,"X-Stainless-OS":Rx((i=globalThis.process.platform)!==null&&i!==void 0?i:"unknown"),"X-Stainless-Arch":Cx((o=globalThis.process.arch)!==null&&o!==void 0?o:"unknown"),"X-Stainless-Runtime":"node","X-Stainless-Runtime-Version":(f=globalThis.process.version)!==null&&f!==void 0?f:"unknown"};const p=tN();return p?{"X-Stainless-Lang":"js","X-Stainless-Package-Version":er,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":`browser:${p.browser}`,"X-Stainless-Runtime-Version":p.version}:{"X-Stainless-Lang":"js","X-Stainless-Package-Version":er,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":"unknown","X-Stainless-Runtime-Version":"unknown"}};function tN(){if(typeof navigator>"u"||!navigator)return null;const n=[{key:"edge",pattern:/Edge(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/MSIE(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/Trident(?:.*rv\:(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"chrome",pattern:/Chrome(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"firefox",pattern:/Firefox(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"safari",pattern:/(?:Version\W+(\d+)\.(\d+)(?:\.(\d+))?)?(?:\W+Mobile\S*)?\W+Safari/}];for(const{key:r,pattern:i}of n){const o=i.exec(navigator.userAgent);if(o){const f=o[1]||0,d=o[2]||0,p=o[3]||0;return{browser:r,version:`${f}.${d}.${p}`}}}return null}const Cx=n=>n==="x32"?"x32":n==="x86_64"||n==="x64"?"x64":n==="arm"?"arm":n==="aarch64"||n==="arm64"?"arm64":n?`other:${n}`:"unknown",Rx=n=>(n=n.toLowerCase(),n.includes("ios")?"iOS":n==="android"?"Android":n==="darwin"?"MacOS":n==="win32"?"Windows":n==="freebsd"?"FreeBSD":n==="openbsd"?"OpenBSD":n==="linux"?"Linux":n?`Other:${n}`:"Unknown");let Vo;const aN=()=>Vo??(Vo=eN());/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function nN(){if(typeof fetch<"u")return fetch;throw new Error("`fetch` is not defined as a global; Either pass `fetch` to the client, `new GeminiNextGenAPIClient({ fetch })` or polyfill the global, `globalThis.fetch = fetch`")}function lv(...n){const r=globalThis.ReadableStream;if(typeof r>"u")throw new Error("`ReadableStream` is not defined as a global; You will need to polyfill it, `globalThis.ReadableStream = ReadableStream`");return new r(...n)}function sN(n){let r=Symbol.asyncIterator in n?n[Symbol.asyncIterator]():n[Symbol.iterator]();return lv({start(){},async pull(i){const{done:o,value:f}=await r.next();o?i.close():i.enqueue(f)},async cancel(){var i;await((i=r.return)===null||i===void 0?void 0:i.call(r))}})}function rv(n){if(n[Symbol.asyncIterator])return n;const r=n.getReader();return{async next(){try{const i=await r.read();return i!=null&&i.done&&r.releaseLock(),i}catch(i){throw r.releaseLock(),i}},async return(){const i=r.cancel();return r.releaseLock(),await i,{done:!0,value:void 0}},[Symbol.asyncIterator](){return this}}}async function lN(n){var r,i;if(n===null||typeof n!="object")return;if(n[Symbol.asyncIterator]){await((i=(r=n[Symbol.asyncIterator]()).return)===null||i===void 0?void 0:i.call(r));return}const o=n.getReader(),f=o.cancel();o.releaseLock(),await f}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const rN=({headers:n,body:r})=>({bodyHeaders:{"content-type":"application/json"},body:JSON.stringify(r)});/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const iv=()=>{var n;if(typeof File>"u"){const{process:r}=globalThis,i=typeof((n=r==null?void 0:r.versions)===null||n===void 0?void 0:n.node)=="string"&&parseInt(r.versions.node.split("."))<20;throw new Error("`File` is not defined as a global, which is required for file uploads."+(i?" Update to Node 20 LTS or newer, or set `globalThis.File` to `import('node:buffer').File`.":""))}};function Bd(n,r,i){return iv(),new File(n,r??"unknown_file",i)}function iN(n){return(typeof n=="object"&&n!==null&&("name"in n&&n.name&&String(n.name)||"url"in n&&n.url&&String(n.url)||"filename"in n&&n.filename&&String(n.filename)||"path"in n&&n.path&&String(n.path))||"").split(/[\\/]/).pop()||void 0}const oN=n=>n!=null&&typeof n=="object"&&typeof n[Symbol.asyncIterator]=="function";/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const ov=n=>n!=null&&typeof n=="object"&&typeof n.size=="number"&&typeof n.type=="string"&&typeof n.text=="function"&&typeof n.slice=="function"&&typeof n.arrayBuffer=="function",cN=n=>n!=null&&typeof n=="object"&&typeof n.name=="string"&&typeof n.lastModified=="number"&&ov(n),uN=n=>n!=null&&typeof n=="object"&&typeof n.url=="string"&&typeof n.blob=="function";async function dN(n,r,i){if(iv(),n=await n,cN(n))return n instanceof File?n:Bd([await n.arrayBuffer()],n.name);if(uN(n)){const f=await n.blob();return r||(r=new URL(n.url).pathname.split(/[\\/]/).pop()),Bd(await Tf(f),r,i)}const o=await Tf(n);if(r||(r=iN(n)),!(i!=null&&i.type)){const f=o.find(d=>typeof d=="object"&&"type"in d&&d.type);typeof f=="string"&&(i=Object.assign(Object.assign({},i),{type:f}))}return Bd(o,r,i)}async function Tf(n){var r,i,o,f,d;let p=[];if(typeof n=="string"||ArrayBuffer.isView(n)||n instanceof ArrayBuffer)p.push(n);else if(ov(n))p.push(n instanceof Blob?n:await n.arrayBuffer());else if(oN(n))try{for(var g=!0,h=lr(n),m;m=await h.next(),r=m.done,!r;g=!0){f=m.value,g=!1;const y=f;p.push(...await Tf(y))}}catch(y){i={error:y}}finally{try{!g&&!r&&(o=h.return)&&await o.call(h)}finally{if(i)throw i.error}}else{const y=(d=n==null?void 0:n.constructor)===null||d===void 0?void 0:d.name;throw new Error(`Unexpected data type: ${typeof n}${y?`; constructor: ${y}`:""}${fN(n)}`)}return p}function fN(n){return typeof n!="object"||n===null?"":`; props: [${Object.getOwnPropertyNames(n).map(i=>`"${i}"`).join(", ")}]`}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class cv{constructor(r){this._client=r}}cv._key=[];/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function uv(n){return n.replace(/[^A-Za-z0-9\-._~!$&'()*+,;=:@]+/g,encodeURIComponent)}const kx=Object.freeze(Object.create(null)),pN=(n=uv)=>(function(i,...o){if(i.length===1)return i[0];let f=!1;const d=[],p=i.reduce((y,v,w)=>{var N,O,I;/[?#]/.test(v)&&(f=!0);const _=o[w];let j=(f?encodeURIComponent:n)(""+_);return w!==o.length&&(_==null||typeof _=="object"&&_.toString===((I=Object.getPrototypeOf((O=Object.getPrototypeOf((N=_.hasOwnProperty)!==null&&N!==void 0?N:kx))!==null&&O!==void 0?O:kx))===null||I===void 0?void 0:I.toString))&&(j=_+"",d.push({start:y.length+v.length,length:j.length,error:`Value of type ${Object.prototype.toString.call(_).slice(8,-1)} is not a valid path parameter`})),y+v+(w===o.length?"":j)},""),g=p.split(/[?#]/,1)[0],h=new RegExp("(?<=^|\\/)(?:\\.|%2e){1,2}(?=\\/|$)","gi");let m;for(;(m=h.exec(g))!==null;)d.push({start:m.index,length:m[0].length,error:`Value "${m[0]}" can't be safely passed as a path parameter`});if(d.sort((y,v)=>y.start-v.start),d.length>0){let y=0;const v=d.reduce((w,N)=>{const O=" ".repeat(N.start-y),I="^".repeat(N.length);return y=N.start+N.length,w+O+I},"");throw new Ka(`Path parameters result in path with invalid segments:
${d.map(w=>w.error).join(`
`)}
${p}
${v}`)}return p}),qo=pN(uv);/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class dv extends cv{create(r,i){var o;const{api_version:f=this._client.apiVersion}=r,d=tc(r,["api_version"]);if("model"in d&&"agent_config"in d)throw new Ka("Invalid request: specified `model` and `agent_config`. If specifying `model`, use `generation_config`.");if("agent"in d&&"generation_config"in d)throw new Ka("Invalid request: specified `agent` and `generation_config`. If specifying `agent`, use `agent_config`.");return this._client.post(qo`/${f}/interactions`,Object.assign(Object.assign({body:d},i),{stream:(o=r.stream)!==null&&o!==void 0?o:!1}))}delete(r,i={},o){const{api_version:f=this._client.apiVersion}=i??{};return this._client.delete(qo`/${f}/interactions/${r}`,o)}cancel(r,i={},o){const{api_version:f=this._client.apiVersion}=i??{};return this._client.post(qo`/${f}/interactions/${r}/cancel`,o)}get(r,i={},o){var f;const d=i??{},{api_version:p=this._client.apiVersion}=d,g=tc(d,["api_version"]);return this._client.get(qo`/${p}/interactions/${r}`,Object.assign(Object.assign({query:g},o),{stream:(f=i==null?void 0:i.stream)!==null&&f!==void 0?f:!1}))}}dv._key=Object.freeze(["interactions"]);class fv extends dv{}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function hN(n){let r=0;for(const f of n)r+=f.length;const i=new Uint8Array(r);let o=0;for(const f of n)i.set(f,o),o+=f.length;return i}let Yo;function r0(n){let r;return(Yo??(r=new globalThis.TextEncoder,Yo=r.encode.bind(r)))(n)}let Fo;function Lx(n){let r;return(Fo??(r=new globalThis.TextDecoder,Fo=r.decode.bind(r)))(n)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class gc{constructor(){this.buffer=new Uint8Array,this.carriageReturnIndex=null}decode(r){if(r==null)return[];const i=r instanceof ArrayBuffer?new Uint8Array(r):typeof r=="string"?r0(r):r;this.buffer=hN([this.buffer,i]);const o=[];let f;for(;(f=mN(this.buffer,this.carriageReturnIndex))!=null;){if(f.carriage&&this.carriageReturnIndex==null){this.carriageReturnIndex=f.index;continue}if(this.carriageReturnIndex!=null&&(f.index!==this.carriageReturnIndex+1||f.carriage)){o.push(Lx(this.buffer.subarray(0,this.carriageReturnIndex-1))),this.buffer=this.buffer.subarray(this.carriageReturnIndex),this.carriageReturnIndex=null;continue}const d=this.carriageReturnIndex!==null?f.preceding-1:f.preceding,p=Lx(this.buffer.subarray(0,d));o.push(p),this.buffer=this.buffer.subarray(f.index),this.carriageReturnIndex=null}return o}flush(){return this.buffer.length?this.decode(`
`):[]}}gc.NEWLINE_CHARS=new Set([`
`,"\r"]);gc.NEWLINE_REGEXP=/\r\n|[\n\r]/g;function mN(n,r){for(let f=r??0;f<n.length;f++){if(n[f]===10)return{preceding:f,index:f+1,carriage:!1};if(n[f]===13)return{preceding:f,index:f+1,carriage:!0}}return null}function gN(n){for(let o=0;o<n.length-1;o++){if(n[o]===10&&n[o+1]===10||n[o]===13&&n[o+1]===13)return o+2;if(n[o]===13&&n[o+1]===10&&o+3<n.length&&n[o+2]===13&&n[o+3]===10)return o+4}return-1}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const ac={off:0,error:200,warn:300,info:400,debug:500},Mx=(n,r,i)=>{if(n){if(Q2(ac,n))return n;da(i).warn(`${r} was set to ${JSON.stringify(n)}, expected one of ${JSON.stringify(Object.keys(ac))}`)}};function di(){}function $o(n,r,i){return!r||ac[n]>ac[i]?di:r[n].bind(r)}const xN={error:di,warn:di,info:di,debug:di};let Ux=new WeakMap;function da(n){var r;const i=n.logger,o=(r=n.logLevel)!==null&&r!==void 0?r:"off";if(!i)return xN;const f=Ux.get(i);if(f&&f[0]===o)return f[1];const d={error:$o("error",i,o),warn:$o("warn",i,o),info:$o("info",i,o),debug:$o("debug",i,o)};return Ux.set(i,[o,d]),d}const tl=n=>(n.options&&(n.options=Object.assign({},n.options),delete n.options.headers),n.headers&&(n.headers=Object.fromEntries((n.headers instanceof Headers?[...n.headers]:Object.entries(n.headers)).map(([r,i])=>[r,r.toLowerCase()==="x-goog-api-key"||r.toLowerCase()==="authorization"||r.toLowerCase()==="cookie"||r.toLowerCase()==="set-cookie"?"***":i]))),"retryOfRequestLogID"in n&&(n.retryOfRequestLogID&&(n.retryOf=n.retryOfRequestLogID),delete n.retryOfRequestLogID),n);/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class tr{constructor(r,i,o){this.iterator=r,this.controller=i,this.client=o}static fromSSEResponse(r,i,o){let f=!1;const d=o?da(o):console;function p(){return yi(this,arguments,function*(){var h,m,y,v;if(f)throw new Ka("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");f=!0;let w=!1;try{try{for(var N=!0,O=lr(yN(r,i)),I;I=yield _t(O.next()),h=I.done,!h;N=!0){v=I.value,N=!1;const _=v;if(!w)if(_.data.startsWith("[DONE]")){w=!0;continue}else try{yield yield _t(JSON.parse(_.data))}catch(j){throw d.error("Could not parse message into JSON:",_.data),d.error("From chunk:",_.raw),j}}}catch(_){m={error:_}}finally{try{!N&&!h&&(y=O.return)&&(yield _t(y.call(O)))}finally{if(m)throw m.error}}w=!0}catch(_){if(wf(_))return yield _t(void 0);throw _}finally{w||i.abort()}})}return new tr(p,i,o)}static fromReadableStream(r,i,o){let f=!1;function d(){return yi(this,arguments,function*(){var h,m,y,v;const w=new gc,N=rv(r);try{for(var O=!0,I=lr(N),_;_=yield _t(I.next()),h=_.done,!h;O=!0){v=_.value,O=!1;const j=v;for(const L of w.decode(j))yield yield _t(L)}}catch(j){m={error:j}}finally{try{!O&&!h&&(y=I.return)&&(yield _t(y.call(I)))}finally{if(m)throw m.error}}for(const j of w.flush())yield yield _t(j)})}function p(){return yi(this,arguments,function*(){var h,m,y,v;if(f)throw new Ka("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");f=!0;let w=!1;try{try{for(var N=!0,O=lr(d()),I;I=yield _t(O.next()),h=I.done,!h;N=!0){v=I.value,N=!1;const _=v;w||_&&(yield yield _t(JSON.parse(_)))}}catch(_){m={error:_}}finally{try{!N&&!h&&(y=O.return)&&(yield _t(y.call(O)))}finally{if(m)throw m.error}}w=!0}catch(_){if(wf(_))return yield _t(void 0);throw _}finally{w||i.abort()}})}return new tr(p,i,o)}[Symbol.asyncIterator](){return this.iterator()}tee(){const r=[],i=[],o=this.iterator(),f=d=>({next:()=>{if(d.length===0){const p=o.next();r.push(p),i.push(p)}return d.shift()}});return[new tr(()=>f(r),this.controller,this.client),new tr(()=>f(i),this.controller,this.client)]}toReadableStream(){const r=this;let i;return lv({async start(){i=r[Symbol.asyncIterator]()},async pull(o){try{const{value:f,done:d}=await i.next();if(d)return o.close();const p=r0(JSON.stringify(f)+`
`);o.enqueue(p)}catch(f){o.error(f)}},async cancel(){var o;await((o=i.return)===null||o===void 0?void 0:o.call(i))}})}}function yN(n,r){return yi(this,arguments,function*(){var o,f,d,p;if(!n.body)throw r.abort(),typeof globalThis.navigator<"u"&&globalThis.navigator.product==="ReactNative"?new Ka("The default react-native fetch implementation does not support streaming. Please use expo/fetch: https://docs.expo.dev/versions/latest/sdk/expo/#expofetch-api"):new Ka("Attempted to iterate over a response with no body");const g=new vN,h=new gc,m=rv(n.body);try{for(var y=!0,v=lr(bN(m)),w;w=yield _t(v.next()),o=w.done,!o;y=!0){p=w.value,y=!1;const N=p;for(const O of h.decode(N)){const I=g.decode(O);I&&(yield yield _t(I))}}}catch(N){f={error:N}}finally{try{!y&&!o&&(d=v.return)&&(yield _t(d.call(v)))}finally{if(f)throw f.error}}for(const N of h.flush()){const O=g.decode(N);O&&(yield yield _t(O))}})}function bN(n){return yi(this,arguments,function*(){var i,o,f,d;let p=new Uint8Array;try{for(var g=!0,h=lr(n),m;m=yield _t(h.next()),i=m.done,!i;g=!0){d=m.value,g=!1;const y=d;if(y==null)continue;const v=y instanceof ArrayBuffer?new Uint8Array(y):typeof y=="string"?r0(y):y;let w=new Uint8Array(p.length+v.length);w.set(p),w.set(v,p.length),p=w;let N;for(;(N=gN(p))!==-1;)yield yield _t(p.slice(0,N)),p=p.slice(N)}}catch(y){o={error:y}}finally{try{!g&&!i&&(f=h.return)&&(yield _t(f.call(h)))}finally{if(o)throw o.error}}p.length>0&&(yield yield _t(p))})}class vN{constructor(){this.event=null,this.data=[],this.chunks=[]}decode(r){if(r.endsWith("\r")&&(r=r.substring(0,r.length-1)),!r){if(!this.event&&!this.data.length)return null;const d={event:this.event,data:this.data.join(`
`),raw:this.chunks};return this.event=null,this.data=[],this.chunks=[],d}if(this.chunks.push(r),r.startsWith(":"))return null;let[i,o,f]=SN(r,":");return f.startsWith(" ")&&(f=f.substring(1)),i==="event"?this.event=f:i==="data"&&this.data.push(f),null}}function SN(n,r){const i=n.indexOf(r);return i!==-1?[n.substring(0,i),r,n.substring(i+r.length)]:[n,"",""]}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function EN(n,r){const{response:i,requestLogID:o,retryOfRequestLogID:f,startTime:d}=r,p=await(async()=>{var g;if(r.options.stream)return da(n).debug("response",i.status,i.url,i.headers,i.body),r.options.__streamClass?r.options.__streamClass.fromSSEResponse(i,r.controller,n):tr.fromSSEResponse(i,r.controller,n);if(i.status===204)return null;if(r.options.__binaryResponse)return i;const h=i.headers.get("content-type"),m=(g=h==null?void 0:h.split(";")[0])===null||g===void 0?void 0:g.trim();return(m==null?void 0:m.includes("application/json"))||(m==null?void 0:m.endsWith("+json"))?await i.json():await i.text()})();return da(n).debug(`[${o}] response parsed`,tl({retryOfRequestLogID:f,url:i.url,status:i.status,body:p,durationMs:Date.now()-d})),p}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class i0 extends Promise{constructor(r,i,o=EN){super(f=>{f(null)}),this.responsePromise=i,this.parseResponse=o,this.client=r}_thenUnwrap(r){return new i0(this.client,this.responsePromise,async(i,o)=>r(await this.parseResponse(i,o),o))}asResponse(){return this.responsePromise.then(r=>r.response)}async withResponse(){const[r,i]=await Promise.all([this.parse(),this.asResponse()]);return{data:r,response:i}}parse(){return this.parsedPromise||(this.parsedPromise=this.responsePromise.then(r=>this.parseResponse(this.client,r))),this.parsedPromise}then(r,i){return this.parse().then(r,i)}catch(r){return this.parse().catch(r)}finally(r){return this.parse().finally(r)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const pv=Symbol("brand.privateNullableHeaders");function*wN(n){if(!n)return;if(pv in n){const{values:o,nulls:f}=n;yield*o.entries();for(const d of f)yield[d,null];return}let r=!1,i;n instanceof Headers?i=n.entries():Ox(n)?i=n:(r=!0,i=Object.entries(n??{}));for(let o of i){const f=o[0];if(typeof f!="string")throw new TypeError("expected header name to be a string");const d=Ox(o[1])?o[1]:[o[1]];let p=!1;for(const g of d)g!==void 0&&(r&&!p&&(p=!0,yield[f,null]),yield[f,g])}}const li=n=>{const r=new Headers,i=new Set;for(const o of n){const f=new Set;for(const[d,p]of wN(o)){const g=d.toLowerCase();f.has(g)||(r.delete(d),f.add(g)),p===null?(r.delete(d),i.add(g)):(r.append(d,p),i.delete(g))}}return{[pv]:!0,values:r,nulls:i}};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Hd=n=>{var r,i,o,f,d,p;if(typeof globalThis.process<"u")return(o=(i=(r=P2)===null||r===void 0?void 0:r[n])===null||i===void 0?void 0:i.trim())!==null&&o!==void 0?o:void 0;if(typeof globalThis.Deno<"u")return(p=(d=(f=globalThis.Deno.env)===null||f===void 0?void 0:f.get)===null||d===void 0?void 0:d.call(f,n))===null||p===void 0?void 0:p.trim()};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var hv;class xc{constructor(r){var i,o,f,d,p,g,h,{baseURL:m=Hd("GEMINI_NEXT_GEN_API_BASE_URL"),apiKey:y=(i=Hd("GEMINI_API_KEY"))!==null&&i!==void 0?i:null,apiVersion:v="v1beta"}=r,w=tc(r,["baseURL","apiKey","apiVersion"]);const N=Object.assign(Object.assign({apiKey:y,apiVersion:v},w),{baseURL:m||"https://generativelanguage.googleapis.com"});this.baseURL=N.baseURL,this.timeout=(o=N.timeout)!==null&&o!==void 0?o:xc.DEFAULT_TIMEOUT,this.logger=(f=N.logger)!==null&&f!==void 0?f:console;const O="warn";this.logLevel=O,this.logLevel=(p=(d=Mx(N.logLevel,"ClientOptions.logLevel",this))!==null&&d!==void 0?d:Mx(Hd("GEMINI_NEXT_GEN_API_LOG"),"process.env['GEMINI_NEXT_GEN_API_LOG']",this))!==null&&p!==void 0?p:O,this.fetchOptions=N.fetchOptions,this.maxRetries=(g=N.maxRetries)!==null&&g!==void 0?g:2,this.fetch=(h=N.fetch)!==null&&h!==void 0?h:nN(),this.encoder=rN,this._options=N,this.apiKey=y,this.apiVersion=v,this.clientAdapter=N.clientAdapter}withOptions(r){return new this.constructor(Object.assign(Object.assign(Object.assign({},this._options),{baseURL:this.baseURL,maxRetries:this.maxRetries,timeout:this.timeout,logger:this.logger,logLevel:this.logLevel,fetch:this.fetch,fetchOptions:this.fetchOptions,apiKey:this.apiKey,apiVersion:this.apiVersion}),r))}baseURLOverridden(){return this.baseURL!=="https://generativelanguage.googleapis.com"}defaultQuery(){return this._options.defaultQuery}validateHeaders({values:r,nulls:i}){if(!(r.has("authorization")||r.has("x-goog-api-key"))&&!(this.apiKey&&r.get("x-goog-api-key"))&&!i.has("x-goog-api-key"))throw new Error('Could not resolve authentication method. Expected the apiKey to be set. Or for the "x-goog-api-key" headers to be explicitly omitted')}async authHeaders(r){const i=li([r.headers]);if(!(i.values.has("authorization")||i.values.has("x-goog-api-key"))){if(this.apiKey)return li([{"x-goog-api-key":this.apiKey}]);if(this.clientAdapter.isVertexAI())return li([await this.clientAdapter.getAuthHeaders()])}}stringifyQuery(r){return Object.entries(r).filter(([i,o])=>typeof o<"u").map(([i,o])=>{if(typeof o=="string"||typeof o=="number"||typeof o=="boolean")return`${encodeURIComponent(i)}=${encodeURIComponent(o)}`;if(o===null)return`${encodeURIComponent(i)}=`;throw new Ka(`Cannot stringify type ${typeof o}; Expected string, number, boolean, or null. If you need to pass nested query parameters, you can manually encode them, e.g. { query: { 'foo[key1]': value1, 'foo[key2]': value2 } }, and please open a GitHub issue requesting better support for your use case.`)}).join("&")}getUserAgent(){return`${this.constructor.name}/JS ${er}`}defaultIdempotencyKey(){return`stainless-node-retry-${V2()}`}makeStatusError(r,i,o,f){return fa.generate(r,i,o,f)}buildURL(r,i,o){const f=!this.baseURLOverridden()&&o||this.baseURL,d=Y2(r)?new URL(r):new URL(f+(f.endsWith("/")&&r.startsWith("/")?r.slice(1):r)),p=this.defaultQuery();return W2(p)||(i=Object.assign(Object.assign({},p),i)),typeof i=="object"&&i&&!Array.isArray(i)&&(d.search=this.stringifyQuery(i)),d.toString()}async prepareOptions(r){if(this.clientAdapter&&this.clientAdapter.isVertexAI()&&!r.path.startsWith(`/${this.apiVersion}/projects/`)){const i=r.path.slice(this.apiVersion.length+1);r.path=`/${this.apiVersion}/projects/${this.clientAdapter.getProject()}/locations/${this.clientAdapter.getLocation()}${i}`}}async prepareRequest(r,{url:i,options:o}){}get(r,i){return this.methodRequest("get",r,i)}post(r,i){return this.methodRequest("post",r,i)}patch(r,i){return this.methodRequest("patch",r,i)}put(r,i){return this.methodRequest("put",r,i)}delete(r,i){return this.methodRequest("delete",r,i)}methodRequest(r,i,o){return this.request(Promise.resolve(o).then(f=>Object.assign({method:r,path:i},f)))}request(r,i=null){return new i0(this,this.makeRequest(r,i,void 0))}async makeRequest(r,i,o){var f,d,p;const g=await r,h=(f=g.maxRetries)!==null&&f!==void 0?f:this.maxRetries;i==null&&(i=h),await this.prepareOptions(g);const{req:m,url:y,timeout:v}=await this.buildRequest(g,{retryCount:h-i});await this.prepareRequest(m,{url:y,options:g});const w="log_"+(Math.random()*(1<<24)|0).toString(16).padStart(6,"0"),N=o===void 0?"":`, retryOf: ${o}`,O=Date.now();if(da(this).debug(`[${w}] sending request`,tl({retryOfRequestLogID:o,method:g.method,url:y,options:g,headers:m.headers})),!((d=g.signal)===null||d===void 0)&&d.aborted)throw new _f;const I=new AbortController,_=await this.fetchWithTimeout(y,m,v,I).catch(Nf),j=Date.now();if(_ instanceof globalThis.Error){const D=`retrying, ${i} attempts remaining`;if(!((p=g.signal)===null||p===void 0)&&p.aborted)throw new _f;const M=wf(_)||/timed? ?out/i.test(String(_)+("cause"in _?String(_.cause):""));if(i)return da(this).info(`[${w}] connection ${M?"timed out":"failed"} - ${D}`),da(this).debug(`[${w}] connection ${M?"timed out":"failed"} (${D})`,tl({retryOfRequestLogID:o,url:y,durationMs:j-O,message:_.message})),this.retryRequest(g,i,o??w);throw da(this).info(`[${w}] connection ${M?"timed out":"failed"} - error; no more retries left`),da(this).debug(`[${w}] connection ${M?"timed out":"failed"} (error; no more retries left)`,tl({retryOfRequestLogID:o,url:y,durationMs:j-O,message:_.message})),M?new Zb:new mc({cause:_})}const L=`[${w}${N}] ${m.method} ${y} ${_.ok?"succeeded":"failed"} with status ${_.status} in ${j-O}ms`;if(!_.ok){const D=await this.shouldRetry(_);if(i&&D){const A=`retrying, ${i} attempts remaining`;return await lN(_.body),da(this).info(`${L} - ${A}`),da(this).debug(`[${w}] response error (${A})`,tl({retryOfRequestLogID:o,url:_.url,status:_.status,headers:_.headers,durationMs:j-O})),this.retryRequest(g,i,o??w,_.headers)}const M=D?"error; no more retries left":"error; not retryable";da(this).info(`${L} - ${M}`);const P=await _.text().catch(A=>Nf(A).message),Y=K2(P),U=Y?void 0:P;throw da(this).debug(`[${w}] response error (${M})`,tl({retryOfRequestLogID:o,url:_.url,status:_.status,headers:_.headers,message:U,durationMs:Date.now()-O})),this.makeStatusError(_.status,Y,U,_.headers)}return da(this).info(L),da(this).debug(`[${w}] response start`,tl({retryOfRequestLogID:o,url:_.url,status:_.status,headers:_.headers,durationMs:j-O})),{response:_,options:g,controller:I,requestLogID:w,retryOfRequestLogID:o,startTime:O}}async fetchWithTimeout(r,i,o,f){const d=i||{},{signal:p,method:g}=d,h=tc(d,["signal","method"]);p&&p.addEventListener("abort",()=>f.abort());const m=setTimeout(()=>f.abort(),o),y=globalThis.ReadableStream&&h.body instanceof globalThis.ReadableStream||typeof h.body=="object"&&h.body!==null&&Symbol.asyncIterator in h.body,v=Object.assign(Object.assign(Object.assign({signal:f.signal},y?{duplex:"half"}:{}),{method:"GET"}),h);g&&(v.method=g.toUpperCase());try{return await this.fetch.call(void 0,r,v)}finally{clearTimeout(m)}}async shouldRetry(r){const i=r.headers.get("x-should-retry");return i==="true"?!0:i==="false"?!1:r.status===408||r.status===409||r.status===429||r.status>=500}async retryRequest(r,i,o,f){var d;let p;const g=f==null?void 0:f.get("retry-after-ms");if(g){const m=parseFloat(g);Number.isNaN(m)||(p=m)}const h=f==null?void 0:f.get("retry-after");if(h&&!p){const m=parseFloat(h);Number.isNaN(m)?p=Date.parse(h)-Date.now():p=m*1e3}if(!(p&&0<=p&&p<60*1e3)){const m=(d=r.maxRetries)!==null&&d!==void 0?d:this.maxRetries;p=this.calculateDefaultRetryTimeoutMillis(i,m)}return await X2(p),this.makeRequest(r,i-1,o)}calculateDefaultRetryTimeoutMillis(r,i){const d=i-r,p=Math.min(.5*Math.pow(2,d),8),g=1-Math.random()*.25;return p*g*1e3}async buildRequest(r,{retryCount:i=0}={}){var o,f,d;const p=Object.assign({},r),{method:g,path:h,query:m,defaultBaseURL:y}=p,v=this.buildURL(h,m,y);"timeout"in p&&Z2("timeout",p.timeout),p.timeout=(o=p.timeout)!==null&&o!==void 0?o:this.timeout;const{bodyHeaders:w,body:N}=this.buildBody({options:p}),O=await this.buildHeaders({options:r,method:g,bodyHeaders:w,retryCount:i});return{req:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({method:g,headers:O},p.signal&&{signal:p.signal}),globalThis.ReadableStream&&N instanceof globalThis.ReadableStream&&{duplex:"half"}),N&&{body:N}),(f=this.fetchOptions)!==null&&f!==void 0?f:{}),(d=p.fetchOptions)!==null&&d!==void 0?d:{}),url:v,timeout:p.timeout}}async buildHeaders({options:r,method:i,bodyHeaders:o,retryCount:f}){let d={};this.idempotencyHeader&&i!=="get"&&(r.idempotencyKey||(r.idempotencyKey=this.defaultIdempotencyKey()),d[this.idempotencyHeader]=r.idempotencyKey);const p=await this.authHeaders(r);let g=li([d,Object.assign(Object.assign({Accept:"application/json","User-Agent":this.getUserAgent(),"X-Stainless-Retry-Count":String(f)},r.timeout?{"X-Stainless-Timeout":String(Math.trunc(r.timeout/1e3))}:{}),aN()),this._options.defaultHeaders,o,r.headers,p]);return this.validateHeaders(g),g.values}buildBody({options:{body:r,headers:i}}){if(!r)return{bodyHeaders:void 0,body:void 0};const o=li([i]);return ArrayBuffer.isView(r)||r instanceof ArrayBuffer||r instanceof DataView||typeof r=="string"&&o.values.has("content-type")||globalThis.Blob&&r instanceof globalThis.Blob||r instanceof FormData||r instanceof URLSearchParams||globalThis.ReadableStream&&r instanceof globalThis.ReadableStream?{bodyHeaders:void 0,body:r}:typeof r=="object"&&(Symbol.asyncIterator in r||Symbol.iterator in r&&"next"in r&&typeof r.next=="function")?{bodyHeaders:void 0,body:sN(r)}:this.encoder({body:r,headers:o})}}xc.DEFAULT_TIMEOUT=6e4;class na extends xc{constructor(){super(...arguments),this.interactions=new fv(this)}}hv=na;na.GeminiNextGenAPIClient=hv;na.GeminiNextGenAPIClientError=Ka;na.APIError=fa;na.APIConnectionError=mc;na.APIConnectionTimeoutError=Zb;na.APIUserAbortError=_f;na.NotFoundError=ev;na.ConflictError=tv;na.RateLimitError=nv;na.BadRequestError=Kb;na.AuthenticationError=Xb;na.InternalServerError=sv;na.PermissionDeniedError=Jb;na.UnprocessableEntityError=av;na.toFile=dN;na.Interactions=fv;class NN extends Error{constructor(r,i){super(r),this.name="ManualApiResponseError",this.prompt=i}}const _N=()=>{throw new Error("API_KEY_MISSING")},AN=n=>new Promise(r=>setTimeout(r,n));function TN(n){let r=n.trim();const i=r.indexOf("```json");if(i!==-1){const y=i+7,v=r.lastIndexOf("```");if(v>y)return r.substring(y,v).trim()}const o=r.indexOf("```");if(o!==-1){const y=o+3,v=r.lastIndexOf("```");if(v>y)return r.substring(y,v).trim()}const f=r.indexOf("{"),d=r.indexOf("[");let p=-1;if(f===-1?p=d:d===-1?p=f:p=Math.min(f,d),p===-1)return r;const g=r.lastIndexOf("}"),h=r.lastIndexOf("]"),m=Math.max(g,h);return m>p?r.substring(p,m+1):r}function jN(n,r){if(!n)return r;const i=TN(n);if(!i)return r;try{return JSON.parse(i)}catch(o){if(/[\u201C\u201D]/.test(i)){const p=i.replace(/"/g,'\\"').replace(/[\u201C\u201D]/g,'"');try{return JSON.parse(p)}catch{}}const f=i.replace(/[\u201C\u201D]/g,'"');try{return JSON.parse(f)}catch{}const d=f.replace(/,\s*([}\]])/g,"$1");try{return JSON.parse(d)}catch{if(/[\u201C\u201D]/.test(i)){const g=i.replace(/"/g,'\\"').replace(/[\u201C\u201D]/g,'"').replace(/,\s*([}\]])/g,"$1");try{return JSON.parse(g)}catch{}}return console.error("JSON Parse Failed:",o),r}}}const IN=()=>{const n=new Date().toISOString().split("T")[0];let r=Ni("vocab_pro_api_usage",{count:0,date:"1970-01-01"});r.date!==n&&(r={count:0,date:n}),r.count+=1,Xf("vocab_pro_api_usage",r),window.dispatchEvent(new CustomEvent("apiUsageUpdated"))};async function mv(n,r=3){var o;IN();let i;for(let f=0;f<=r;f++)try{return await _N().models.generateContent(n)}catch(d){i=d;const p=((o=d.message)==null?void 0:o.toLowerCase())||"";if(p.includes("api_key_missing"))throw d;if(p.includes("429")||p.includes("quota")||p.includes("exhausted")||p.includes("503")){if(f<r){await AN(Math.pow(2,f)*1e3);continue}throw new NN("API quota exceeded.",n.contents)}throw d}throw i}async function nA(n){const r=rt(),i=Lw(n),o=await mv({model:r.ai.modelForBasicTasks,contents:i,config:{responseMimeType:"application/json",responseSchema:{type:nl.ARRAY,items:{type:nl.OBJECT,properties:{v1:{type:nl.STRING},v2:{type:nl.STRING},v3:{type:nl.STRING}},required:["v1","v2","v3"]}}}});return jN(o.text,[])}async function ON(n,r){rt();const i=zw();return(await mv({model:"gemini-2.5-flash-image",contents:{parts:[{inlineData:{mimeType:r,data:n}},{text:i}]}})).text||"No text detected."}var Gd={exports:{}},Dx;function CN(){return Dx||(Dx=1,(function(n){var r=(function(i){var o=Object.prototype,f=o.hasOwnProperty,d=Object.defineProperty||function(q,z,b){q[z]=b.value},p,g=typeof Symbol=="function"?Symbol:{},h=g.iterator||"@@iterator",m=g.asyncIterator||"@@asyncIterator",y=g.toStringTag||"@@toStringTag";function v(q,z,b){return Object.defineProperty(q,z,{value:b,enumerable:!0,configurable:!0,writable:!0}),q[z]}try{v({},"")}catch{v=function(z,b,T){return z[b]=T}}function w(q,z,b,T){var k=z&&z.prototype instanceof D?z:D,Q=Object.create(k.prototype),ue=new C(T||[]);return d(Q,"_invoke",{value:$(q,b,ue)}),Q}i.wrap=w;function N(q,z,b){try{return{type:"normal",arg:q.call(z,b)}}catch(T){return{type:"throw",arg:T}}}var O="suspendedStart",I="suspendedYield",_="executing",j="completed",L={};function D(){}function M(){}function P(){}var Y={};v(Y,h,function(){return this});var U=Object.getPrototypeOf,G=U&&U(U(ne([])));G&&G!==o&&f.call(G,h)&&(Y=G);var A=P.prototype=D.prototype=Object.create(Y);M.prototype=P,d(A,"constructor",{value:P,configurable:!0}),d(P,"constructor",{value:M,configurable:!0}),M.displayName=v(P,y,"GeneratorFunction");function V(q){["next","throw","return"].forEach(function(z){v(q,z,function(b){return this._invoke(z,b)})})}i.isGeneratorFunction=function(q){var z=typeof q=="function"&&q.constructor;return z?z===M||(z.displayName||z.name)==="GeneratorFunction":!1},i.mark=function(q){return Object.setPrototypeOf?Object.setPrototypeOf(q,P):(q.__proto__=P,v(q,y,"GeneratorFunction")),q.prototype=Object.create(A),q},i.awrap=function(q){return{__await:q}};function F(q,z){function b(Q,ue,ie,he){var B=N(q[Q],q,ue);if(B.type==="throw")he(B.arg);else{var le=B.arg,J=le.value;return J&&typeof J=="object"&&f.call(J,"__await")?z.resolve(J.__await).then(function(ee){b("next",ee,ie,he)},function(ee){b("throw",ee,ie,he)}):z.resolve(J).then(function(ee){le.value=ee,ie(le)},function(ee){return b("throw",ee,ie,he)})}}var T;function k(Q,ue){function ie(){return new z(function(he,B){b(Q,ue,he,B)})}return T=T?T.then(ie,ie):ie()}d(this,"_invoke",{value:k})}V(F.prototype),v(F.prototype,m,function(){return this}),i.AsyncIterator=F,i.async=function(q,z,b,T,k){k===void 0&&(k=Promise);var Q=new F(w(q,z,b,T),k);return i.isGeneratorFunction(z)?Q:Q.next().then(function(ue){return ue.done?ue.value:Q.next()})};function $(q,z,b){var T=O;return function(Q,ue){if(T===_)throw new Error("Generator is already running");if(T===j){if(Q==="throw")throw ue;return te()}for(b.method=Q,b.arg=ue;;){var ie=b.delegate;if(ie){var he=ae(ie,b);if(he){if(he===L)continue;return he}}if(b.method==="next")b.sent=b._sent=b.arg;else if(b.method==="throw"){if(T===O)throw T=j,b.arg;b.dispatchException(b.arg)}else b.method==="return"&&b.abrupt("return",b.arg);T=_;var B=N(q,z,b);if(B.type==="normal"){if(T=b.done?j:I,B.arg===L)continue;return{value:B.arg,done:b.done}}else B.type==="throw"&&(T=j,b.method="throw",b.arg=B.arg)}}}function ae(q,z){var b=z.method,T=q.iterator[b];if(T===p)return z.delegate=null,b==="throw"&&q.iterator.return&&(z.method="return",z.arg=p,ae(q,z),z.method==="throw")||b!=="return"&&(z.method="throw",z.arg=new TypeError("The iterator does not provide a '"+b+"' method")),L;var k=N(T,q.iterator,z.arg);if(k.type==="throw")return z.method="throw",z.arg=k.arg,z.delegate=null,L;var Q=k.arg;if(!Q)return z.method="throw",z.arg=new TypeError("iterator result is not an object"),z.delegate=null,L;if(Q.done)z[q.resultName]=Q.value,z.next=q.nextLoc,z.method!=="return"&&(z.method="next",z.arg=p);else return Q;return z.delegate=null,L}V(A),v(A,y,"Generator"),v(A,h,function(){return this}),v(A,"toString",function(){return"[object Generator]"});function me(q){var z={tryLoc:q[0]};1 in q&&(z.catchLoc=q[1]),2 in q&&(z.finallyLoc=q[2],z.afterLoc=q[3]),this.tryEntries.push(z)}function fe(q){var z=q.completion||{};z.type="normal",delete z.arg,q.completion=z}function C(q){this.tryEntries=[{tryLoc:"root"}],q.forEach(me,this),this.reset(!0)}i.keys=function(q){var z=Object(q),b=[];for(var T in z)b.push(T);return b.reverse(),function k(){for(;b.length;){var Q=b.pop();if(Q in z)return k.value=Q,k.done=!1,k}return k.done=!0,k}};function ne(q){if(q){var z=q[h];if(z)return z.call(q);if(typeof q.next=="function")return q;if(!isNaN(q.length)){var b=-1,T=function k(){for(;++b<q.length;)if(f.call(q,b))return k.value=q[b],k.done=!1,k;return k.value=p,k.done=!0,k};return T.next=T}}return{next:te}}i.values=ne;function te(){return{value:p,done:!0}}return C.prototype={constructor:C,reset:function(q){if(this.prev=0,this.next=0,this.sent=this._sent=p,this.done=!1,this.delegate=null,this.method="next",this.arg=p,this.tryEntries.forEach(fe),!q)for(var z in this)z.charAt(0)==="t"&&f.call(this,z)&&!isNaN(+z.slice(1))&&(this[z]=p)},stop:function(){this.done=!0;var q=this.tryEntries[0],z=q.completion;if(z.type==="throw")throw z.arg;return this.rval},dispatchException:function(q){if(this.done)throw q;var z=this;function b(he,B){return Q.type="throw",Q.arg=q,z.next=he,B&&(z.method="next",z.arg=p),!!B}for(var T=this.tryEntries.length-1;T>=0;--T){var k=this.tryEntries[T],Q=k.completion;if(k.tryLoc==="root")return b("end");if(k.tryLoc<=this.prev){var ue=f.call(k,"catchLoc"),ie=f.call(k,"finallyLoc");if(ue&&ie){if(this.prev<k.catchLoc)return b(k.catchLoc,!0);if(this.prev<k.finallyLoc)return b(k.finallyLoc)}else if(ue){if(this.prev<k.catchLoc)return b(k.catchLoc,!0)}else if(ie){if(this.prev<k.finallyLoc)return b(k.finallyLoc)}else throw new Error("try statement without catch or finally")}}},abrupt:function(q,z){for(var b=this.tryEntries.length-1;b>=0;--b){var T=this.tryEntries[b];if(T.tryLoc<=this.prev&&f.call(T,"finallyLoc")&&this.prev<T.finallyLoc){var k=T;break}}k&&(q==="break"||q==="continue")&&k.tryLoc<=z&&z<=k.finallyLoc&&(k=null);var Q=k?k.completion:{};return Q.type=q,Q.arg=z,k?(this.method="next",this.next=k.finallyLoc,L):this.complete(Q)},complete:function(q,z){if(q.type==="throw")throw q.arg;return q.type==="break"||q.type==="continue"?this.next=q.arg:q.type==="return"?(this.rval=this.arg=q.arg,this.method="return",this.next="end"):q.type==="normal"&&z&&(this.next=z),L},finish:function(q){for(var z=this.tryEntries.length-1;z>=0;--z){var b=this.tryEntries[z];if(b.finallyLoc===q)return this.complete(b.completion,b.afterLoc),fe(b),L}},catch:function(q){for(var z=this.tryEntries.length-1;z>=0;--z){var b=this.tryEntries[z];if(b.tryLoc===q){var T=b.completion;if(T.type==="throw"){var k=T.arg;fe(b)}return k}}throw new Error("illegal catch attempt")},delegateYield:function(q,z,b){return this.delegate={iterator:ne(q),resultName:z,nextLoc:b},this.method==="next"&&(this.arg=p),L}},i})(n.exports);try{regeneratorRuntime=r}catch{typeof globalThis=="object"?globalThis.regeneratorRuntime=r:Function("r","regeneratorRuntime = r")(r)}})(Gd)),Gd.exports}var Pd,zx;function o0(){return zx||(zx=1,Pd=(n,r)=>`${n}-${r}-${Math.random().toString(16).slice(3,8)}`),Pd}var Vd,Bx;function gv(){if(Bx)return Vd;Bx=1;const n=o0();let r=0;return Vd=({id:i,action:o,payload:f={}})=>{let d=i;return typeof d>"u"&&(d=n("Job",r),r+=1),{id:d,action:o,payload:f}},Vd}var ri={},Hx;function c0(){if(Hx)return ri;Hx=1;let n=!1;return ri.logging=n,ri.setLogging=r=>{n=r},ri.log=(...r)=>n?console.log.apply(this,r):null,ri}var qd,Gx;function RN(){if(Gx)return qd;Gx=1;const n=gv(),{log:r}=c0(),i=o0();let o=0;return qd=()=>{const f=i("Scheduler",o),d={},p={};let g=[];o+=1;const h=()=>g.length,m=()=>Object.keys(d).length,y=()=>{if(g.length!==0){const I=Object.keys(d);for(let _=0;_<I.length;_+=1)if(typeof p[I[_]]>"u"){g[0](d[I[_]]);break}}},v=(I,_)=>new Promise((j,L)=>{const D=n({action:I,payload:_});g.push(async M=>{g.shift(),p[M.id]=D;try{j(await M[I].apply(this,[..._,D.id]))}catch(P){L(P)}finally{delete p[M.id],y()}}),r(`[${f}]: Add ${D.id} to JobQueue`),r(`[${f}]: JobQueue length=${g.length}`),y()});return{addWorker:I=>(d[I.id]=I,r(`[${f}]: Add ${I.id}`),r(`[${f}]: Number of workers=${m()}`),y(),I.id),addJob:async(I,..._)=>{if(m()===0)throw Error(`[${f}]: You need to have at least one worker before adding jobs`);return v(I,_)},terminate:async()=>{Object.keys(d).forEach(async I=>{await d[I].terminate()}),g=[]},getQueueLen:h,getNumWorkers:m}},qd}function kN(n){throw new Error('Could not dynamically require "'+n+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var Yd,Px;function LN(){if(Px)return Yd;Px=1;function n(){return!!(typeof window<"u"&&typeof window.process=="object"&&window.process.type==="renderer"||typeof process<"u"&&typeof process.versions=="object"&&process.versions.electron||typeof navigator=="object"&&typeof navigator.userAgent=="string"&&navigator.userAgent.indexOf("Electron")>=0)}return Yd=n,Yd}var Fd,Vx;function MN(){if(Vx)return Fd;Vx=1;const n=LN();return Fd=r=>{const i={};return typeof WorkerGlobalScope<"u"?i.type="webworker":n()?i.type="electron":typeof document=="object"?i.type="browser":typeof process=="object"&&typeof kN=="function"&&(i.type="node"),typeof r>"u"?i:i[r]},Fd}var $d,qx;function UN(){if(qx)return $d;qx=1;const r=MN()("type")==="browser"?i=>new URL(i,window.location.href).href:i=>i;return $d=i=>{const o={...i};return["corePath","workerPath","langPath"].forEach(f=>{i[f]&&(o[f]=r(o[f]))}),o},$d}var Wd,Yx;function DN(){return Yx||(Yx=1,Wd=n=>{const r=[],i=[],o=[],f=[],d=[];return n.blocks&&n.blocks.forEach(p=>{p.paragraphs.forEach(g=>{g.lines.forEach(h=>{h.words.forEach(m=>{m.symbols.forEach(y=>{d.push({...y,page:n,block:p,paragraph:g,line:h,word:m})}),f.push({...m,page:n,block:p,paragraph:g,line:h})}),o.push({...h,page:n,block:p,paragraph:g})}),i.push({...g,page:n,block:p})}),r.push({...p,page:n})}),{...n,blocks:r,paragraphs:i,lines:o,words:f,symbols:d}}),Wd}var Qd,Fx;function xv(){return Fx||(Fx=1,Qd={TESSERACT_ONLY:0,LSTM_ONLY:1,TESSERACT_LSTM_COMBINED:2,DEFAULT:3}),Qd}const zN="5.1.1",BN={version:zN};var Zd,$x;function HN(){return $x||($x=1,Zd={workerBlobURL:!0,logger:()=>{}}),Zd}var Kd,Wx;function GN(){if(Wx)return Kd;Wx=1;const n=BN.version;return Kd={...HN(),workerPath:`https://cdn.jsdelivr.net/npm/tesseract.js@v${n}/dist/worker.min.js`},Kd}var Xd,Qx;function PN(){return Qx||(Qx=1,Xd=({workerPath:n,workerBlobURL:r})=>{let i;if(Blob&&URL&&r){const o=new Blob([`importScripts("${n}");`],{type:"application/javascript"});i=new Worker(URL.createObjectURL(o))}else i=new Worker(n);return i}),Xd}var Jd,Zx;function VN(){return Zx||(Zx=1,Jd=n=>{n.terminate()}),Jd}var ef,Kx;function qN(){return Kx||(Kx=1,ef=(n,r)=>{n.onmessage=({data:i})=>{r(i)}}),ef}var tf,Xx;function YN(){return Xx||(Xx=1,tf=async(n,r)=>{n.postMessage(r)}),tf}var af,Jx;function FN(){if(Jx)return af;Jx=1;const n=i=>new Promise((o,f)=>{const d=new FileReader;d.onload=()=>{o(d.result)},d.onerror=({target:{error:{code:p}}})=>{f(Error(`File could not be read! Code=${p}`))},d.readAsArrayBuffer(i)}),r=async i=>{let o=i;if(typeof i>"u")return"undefined";if(typeof i=="string")/data:image\/([a-zA-Z]*);base64,([^"]*)/.test(i)?o=atob(i.split(",")[1]).split("").map(f=>f.charCodeAt(0)):o=await(await fetch(i)).arrayBuffer();else if(typeof HTMLElement<"u"&&i instanceof HTMLElement)i.tagName==="IMG"&&(o=await r(i.src)),i.tagName==="VIDEO"&&(o=await r(i.poster)),i.tagName==="CANVAS"&&await new Promise(f=>{i.toBlob(async d=>{o=await n(d),f()})});else if(typeof OffscreenCanvas<"u"&&i instanceof OffscreenCanvas){const f=await i.convertToBlob();o=await n(f)}else(i instanceof File||i instanceof Blob)&&(o=await n(i));return new Uint8Array(o)};return af=r,af}var nf,ey;function $N(){if(ey)return nf;ey=1;const n=GN(),r=PN(),i=VN(),o=qN(),f=YN(),d=FN();return nf={defaultOptions:n,spawnWorker:r,terminateWorker:i,onMessage:o,send:f,loadImage:d},nf}var sf,ty;function yv(){if(ty)return sf;ty=1;const n=UN(),r=DN(),i=gv(),{log:o}=c0(),f=o0(),d=xv(),{defaultOptions:p,spawnWorker:g,terminateWorker:h,onMessage:m,loadImage:y,send:v}=$N();let w=0;return sf=async(N="eng",O=d.LSTM_ONLY,I={},_={})=>{const j=f("Worker",w),{logger:L,errorHandler:D,...M}=n({...p,...I}),P={},Y={},U=typeof N=="string"?N.split("+"):N;let G=O,A=_;const V=[d.DEFAULT,d.LSTM_ONLY].includes(O)&&!M.legacyCore;let F,$;const ae=new Promise((be,pe)=>{$=be,F=pe}),me=be=>{F(be.message)};let fe=g(M);fe.onerror=me,w+=1;const C=(be,pe)=>{P[be]=pe},ne=(be,pe)=>{Y[be]=pe},te=({id:be,action:pe,payload:Pe})=>new Promise((Qe,re)=>{o(`[${j}]: Start ${be}, action=${pe}`);const Ae=`${pe}-${be}`;C(Ae,Qe),ne(Ae,re),v(fe,{workerId:j,jobId:be,action:pe,payload:Pe})}),q=()=>console.warn("`load` is depreciated and should be removed from code (workers now come pre-loaded)"),z=be=>te(i({id:be,action:"load",payload:{options:{lstmOnly:V,corePath:M.corePath,logging:M.logging}}})),b=(be,pe,Pe)=>te(i({id:Pe,action:"FS",payload:{method:"writeFile",args:[be,pe]}})),T=(be,pe)=>te(i({id:pe,action:"FS",payload:{method:"readFile",args:[be,{encoding:"utf8"}]}})),k=(be,pe)=>te(i({id:pe,action:"FS",payload:{method:"unlink",args:[be]}})),Q=(be,pe,Pe)=>te(i({id:Pe,action:"FS",payload:{method:be,args:pe}})),ue=()=>console.warn("`loadLanguage` is depreciated and should be removed from code (workers now come with language pre-loaded)"),ie=(be,pe)=>te(i({id:pe,action:"loadLanguage",payload:{langs:be,options:{langPath:M.langPath,dataPath:M.dataPath,cachePath:M.cachePath,cacheMethod:M.cacheMethod,gzip:M.gzip,lstmOnly:[d.DEFAULT,d.LSTM_ONLY].includes(G)&&!M.legacyLang}}})),he=()=>console.warn("`initialize` is depreciated and should be removed from code (workers now come pre-initialized)"),B=(be,pe,Pe,Qe)=>te(i({id:Qe,action:"initialize",payload:{langs:be,oem:pe,config:Pe}})),le=(be="eng",pe,Pe,Qe)=>{if(V&&[d.TESSERACT_ONLY,d.TESSERACT_LSTM_COMBINED].includes(pe))throw Error("Legacy model requested but code missing.");const re=pe||G;G=re;const Ae=Pe||A;A=Ae;const Xe=(typeof be=="string"?be.split("+"):be).filter(ke=>!U.includes(ke));return U.push(...Xe),Xe.length>0?ie(Xe,Qe).then(()=>B(be,re,Ae,Qe)):B(be,re,Ae,Qe)},J=(be={},pe)=>te(i({id:pe,action:"setParameters",payload:{params:be}})),ee=async(be,pe={},Pe={blocks:!0,text:!0,hocr:!0,tsv:!0},Qe)=>te(i({id:Qe,action:"recognize",payload:{image:await y(be),options:pe,output:Pe}})),ye=(be="Tesseract OCR Result",pe=!1,Pe)=>(console.log("`getPDF` function is depreciated. `recognize` option `savePDF` should be used instead."),te(i({id:Pe,action:"getPDF",payload:{title:be,textonly:pe}}))),ve=async(be,pe)=>{if(V)throw Error("`worker.detect` requires Legacy model, which was not loaded.");return te(i({id:pe,action:"detect",payload:{image:await y(be)}}))},Ce=async()=>(fe!==null&&(h(fe),fe=null),Promise.resolve());m(fe,({workerId:be,jobId:pe,status:Pe,action:Qe,data:re})=>{const Ae=`${Qe}-${pe}`;if(Pe==="resolve"){o(`[${be}]: Complete ${pe}`);let Re=re;Qe==="recognize"?Re=r(re):Qe==="getPDF"&&(Re=Array.from({...re,length:Object.keys(re).length})),P[Ae]({jobId:pe,data:Re})}else if(Pe==="reject")if(Y[Ae](re),Qe==="load"&&F(re),D)D(re);else throw Error(re);else Pe==="progress"&&L({...re,userJobId:pe})});const it={id:j,worker:fe,setResolve:C,setReject:ne,load:q,writeText:b,readText:T,removeFile:k,FS:Q,loadLanguage:ue,initialize:he,reinitialize:le,setParameters:J,recognize:ee,getPDF:ye,detect:ve,terminate:Ce};return z().then(()=>ie(N)).then(()=>B(N,O,_)).then(()=>$(it)).catch(()=>{}),ae},sf}var lf,ay;function WN(){if(ay)return lf;ay=1;const n=yv();return lf={recognize:async(o,f,d)=>{const p=await n(f,1,d);return p.recognize(o).finally(async()=>{await p.terminate()})},detect:async(o,f)=>{const d=await n("osd",0,f);return d.detect(o).finally(async()=>{await d.terminate()})}},lf}var rf,ny;function QN(){return ny||(ny=1,rf={AFR:"afr",AMH:"amh",ARA:"ara",ASM:"asm",AZE:"aze",AZE_CYRL:"aze_cyrl",BEL:"bel",BEN:"ben",BOD:"bod",BOS:"bos",BUL:"bul",CAT:"cat",CEB:"ceb",CES:"ces",CHI_SIM:"chi_sim",CHI_TRA:"chi_tra",CHR:"chr",CYM:"cym",DAN:"dan",DEU:"deu",DZO:"dzo",ELL:"ell",ENG:"eng",ENM:"enm",EPO:"epo",EST:"est",EUS:"eus",FAS:"fas",FIN:"fin",FRA:"fra",FRK:"frk",FRM:"frm",GLE:"gle",GLG:"glg",GRC:"grc",GUJ:"guj",HAT:"hat",HEB:"heb",HIN:"hin",HRV:"hrv",HUN:"hun",IKU:"iku",IND:"ind",ISL:"isl",ITA:"ita",ITA_OLD:"ita_old",JAV:"jav",JPN:"jpn",KAN:"kan",KAT:"kat",KAT_OLD:"kat_old",KAZ:"kaz",KHM:"khm",KIR:"kir",KOR:"kor",KUR:"kur",LAO:"lao",LAT:"lat",LAV:"lav",LIT:"lit",MAL:"mal",MAR:"mar",MKD:"mkd",MLT:"mlt",MSA:"msa",MYA:"mya",NEP:"nep",NLD:"nld",NOR:"nor",ORI:"ori",PAN:"pan",POL:"pol",POR:"por",PUS:"pus",RON:"ron",RUS:"rus",SAN:"san",SIN:"sin",SLK:"slk",SLV:"slv",SPA:"spa",SPA_OLD:"spa_old",SQI:"sqi",SRP:"srp",SRP_LATN:"srp_latn",SWA:"swa",SWE:"swe",SYR:"syr",TAM:"tam",TEL:"tel",TGK:"tgk",TGL:"tgl",THA:"tha",TIR:"tir",TUR:"tur",UIG:"uig",UKR:"ukr",URD:"urd",UZB:"uzb",UZB_CYRL:"uzb_cyrl",VIE:"vie",YID:"yid"}),rf}var of,sy;function ZN(){return sy||(sy=1,of={OSD_ONLY:"0",AUTO_OSD:"1",AUTO_ONLY:"2",AUTO:"3",SINGLE_COLUMN:"4",SINGLE_BLOCK_VERT_TEXT:"5",SINGLE_BLOCK:"6",SINGLE_LINE:"7",SINGLE_WORD:"8",CIRCLE_WORD:"9",SINGLE_CHAR:"10",SPARSE_TEXT:"11",SPARSE_TEXT_OSD:"12",RAW_LINE:"13"}),of}var cf,ly;function KN(){if(ly)return cf;ly=1,CN();const n=RN(),r=yv(),i=WN(),o=QN(),f=xv(),d=ZN(),{setLogging:p}=c0();return cf={languages:o,OEM:f,PSM:d,createScheduler:n,createWorker:r,setLogging:p,...i},cf}var XN=KN();async function ry(n){const r=await XN.createWorker("eng");try{const i=await r.recognize(n);return await r.terminate(),i.data.text}catch(i){throw await r.terminate(),i}}const JN=()=>{const[n,r]=E.useState(null),[i,o]=E.useState(""),[f,d]=E.useState(!1),[p,g]=E.useState(!1),[h,m]=E.useState(!1),[y,v]=E.useState("cloud"),w=E.useRef(null),{showToast:N}=On();Kt.useEffect(()=>{const L=D=>{var P;const M=(P=D.clipboardData)==null?void 0:P.items;if(M){for(let Y=0;Y<M.length;Y++)if(M[Y].type.indexOf("image")!==-1){const U=M[Y].getAsFile();U&&O(U);break}}};return document.addEventListener("paste",L),()=>document.removeEventListener("paste",L)},[]);const O=L=>{const D=new FileReader;D.onload=M=>{var P;typeof((P=M.target)==null?void 0:P.result)=="string"&&(r(M.target.result),o(""),g(!1))},D.readAsDataURL(L)},I=L=>{var M;const D=(M=L.target.files)==null?void 0:M[0];D&&O(D)},_=async()=>{if(n){d(!0),g(!1);try{if(y==="offline"){g(!0);const L=await ry(n);o(L)}else try{const L=n.split(",")[1],D=n.split(";")[0].split(":")[1],M=await ON(L,D);o(M)}catch(L){console.warn("Online extraction failed, attempting offline fallback...",L),g(!0);const D=await ry(n);o(D),N("Used offline mode (Cloud unavailable).","info")}}catch(L){console.error(L),N("Extraction failed.","error")}finally{d(!1)}}},j=async()=>{i&&(await fc(i),m(!0),N("Text copied!","success"),setTimeout(()=>m(!1),2e3))};return l.jsxs("div",{className:"flex flex-col h-full space-y-6",children:[l.jsx("div",{className:"space-y-2 shrink-0",children:n?l.jsxs("div",{className:"relative rounded-3xl overflow-hidden border border-neutral-200 bg-neutral-100 flex justify-center max-h-[300px]",children:[l.jsx("img",{src:n,alt:"Preview",className:"max-w-full object-contain"}),l.jsx("button",{onClick:()=>{r(null),o(""),g(!1)},className:"absolute top-4 right-4 p-2 bg-black/50 text-white rounded-full hover:bg-black/70 backdrop-blur-sm transition-all",children:l.jsx(Ut,{size:16})})]}):l.jsxs("div",{onClick:()=>{var L;return(L=w.current)==null?void 0:L.click()},className:"border-2 border-dashed border-neutral-200 rounded-3xl p-10 flex flex-col items-center justify-center text-neutral-400 hover:border-indigo-400 hover:text-indigo-500 hover:bg-indigo-50/30 transition-all cursor-pointer min-h-[200px]",children:[l.jsx(Mf,{size:40,className:"mb-4"}),l.jsx("p",{className:"font-bold text-sm",children:"Click to upload or paste image (Ctrl+V)"}),l.jsx("input",{type:"file",ref:w,className:"hidden",accept:"image/*",onChange:I})]})}),l.jsxs("div",{className:"flex justify-center gap-3 shrink-0",children:[l.jsxs("button",{onClick:()=>v("cloud"),className:`flex items-center gap-2 px-4 py-2 rounded-xl text-xs font-bold transition-all border ${y==="cloud"?"bg-indigo-50 border-indigo-200 text-indigo-700 shadow-sm":"bg-white border-neutral-200 text-neutral-500 hover:bg-neutral-50"}`,children:[l.jsx(my,{size:14}),l.jsx("span",{children:"Cloud (Best)"})]}),l.jsxs("button",{onClick:()=>v("offline"),className:`flex items-center gap-2 px-4 py-2 rounded-xl text-xs font-bold transition-all border ${y==="offline"?"bg-emerald-50 border-emerald-200 text-emerald-700 shadow-sm":"bg-white border-neutral-200 text-neutral-500 hover:bg-neutral-50"}`,children:[l.jsx(rg,{size:14}),l.jsx("span",{children:"Offline"})]})]}),l.jsx("div",{className:"flex justify-center shrink-0",children:l.jsx("button",{onClick:_,disabled:!n||f,className:`px-8 py-3 rounded-xl font-black text-xs uppercase tracking-widest transition-all shadow-lg flex items-center gap-2 ${f?"bg-neutral-800 text-neutral-300":"bg-neutral-900 text-white hover:bg-neutral-800"} disabled:opacity-50`,children:f?l.jsxs(l.Fragment,{children:[l.jsx(At,{size:16,className:"animate-spin"}),l.jsx("span",{children:"Processing..."})]}):l.jsxs(l.Fragment,{children:[l.jsx(aE,{size:16}),l.jsx("span",{children:"Extract Text"})]})})}),i&&l.jsxs("div",{className:"space-y-2 animate-in slide-in-from-bottom-4 fade-in duration-500 flex-1 flex flex-col min-h-0",children:[l.jsxs("div",{className:"flex justify-between items-center px-1 shrink-0",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("label",{className:"text-[10px] font-black uppercase text-neutral-400 tracking-widest",children:"Result"}),p&&l.jsxs("span",{className:"flex items-center gap-1 px-1.5 py-0.5 bg-neutral-100 text-neutral-500 rounded text-[9px] font-bold border border-neutral-200",children:[l.jsx(rg,{size:10})," Offline Result"]})]}),l.jsxs("button",{onClick:j,className:`flex items-center gap-1.5 px-3 py-1.5 rounded-lg text-[10px] font-bold uppercase tracking-wider transition-all ${h?"bg-green-100 text-green-700":"bg-neutral-100 text-neutral-600 hover:bg-neutral-200"}`,children:[h?l.jsx(on,{size:12}):l.jsx(Of,{size:12}),l.jsx("span",{children:h?"Copied":"Copy"})]})]}),l.jsx("textarea",{value:i,readOnly:!0,className:"w-full flex-1 p-4 bg-neutral-50 border border-neutral-200 rounded-2xl text-sm font-medium text-neutral-800 resize-none focus:outline-none focus:ring-2 focus:ring-neutral-900"})]})]})},e_=({audioBlob:n,onTrim:r,onCancel:i})=>{const o=E.useRef(null),[f,d]=E.useState(null),[p,g]=E.useState(null),[h,m]=E.useState(0),[y,v]=E.useState(1),[w,N]=E.useState(!1),O=E.useRef(null);E.useEffect(()=>((async()=>{const M=new(window.AudioContext||window.webkitAudioContext),P=await n.arrayBuffer(),Y=await M.decodeAudioData(P);d(M),g(Y),I(Y,0,1)})(),()=>{f&&f.close()}),[n]);const I=(D,M,P)=>{const Y=o.current;if(!Y)return;const U=Y.getContext("2d");if(!U)return;const G=Y.width,A=Y.height;U.clearRect(0,0,G,A);const V=D.getChannelData(0),F=Math.ceil(V.length/G),$=A/2;U.fillStyle="#e5e7eb",U.fillRect(0,0,G,A),U.fillStyle="#6366f1",U.beginPath();for(let fe=0;fe<G;fe++){let C=1,ne=-1;for(let te=0;te<F;te++){const q=V[fe*F+te];q<C&&(C=q),q>ne&&(ne=q)}U.fillRect(fe,(1+C)*$,1,Math.max(1,(ne-C)*$))}U.fillStyle="rgba(0, 0, 0, 0.4)";const ae=M*G,me=P*G;U.fillRect(0,0,ae,A),U.fillRect(me,0,G-me,A),U.fillStyle="#ef4444",U.fillRect(ae-2,0,4,A),U.fillRect(me-2,0,4,A)};E.useEffect(()=>{p&&I(p,h,y)},[h,y,p]);const _=()=>{var G;if(!f||!p)return;if(w){(G=O.current)==null||G.stop(),N(!1);return}const D=p.duration,M=D*h,Y=D*y-M,U=f.createBufferSource();U.buffer=p,U.connect(f.destination),U.start(0,M,Y),U.onended=()=>N(!1),O.current=U,N(!0)},j=async()=>{if(!f||!p)return;const{bufferToWav:D}=await pa(async()=>{const{bufferToWav:A}=await Promise.resolve().then(()=>n2);return{bufferToWav:A}},void 0),M=Math.floor(h*p.length),P=Math.floor(y*p.length),Y=P-M,U=f.createBuffer(p.numberOfChannels,Y,p.sampleRate);for(let A=0;A<p.numberOfChannels;A++){const V=p.getChannelData(A);U.getChannelData(A).set(V.subarray(M,P))}const G=D(U);r(G)},L=D=>{const M=o.current;if(!M)return;const P=M.getBoundingClientRect(),Y=D.clientX-P.left,U=Math.max(0,Math.min(1,Y/P.width)),G=Math.abs(U-h),A=Math.abs(U-y),V=G<A,F=ae=>{const me=ae.clientX-P.left,fe=Math.max(0,Math.min(1,me/P.width));V?m(Math.min(fe,y-.05)):v(Math.max(fe,h+.05))},$=()=>{window.removeEventListener("mousemove",F),window.removeEventListener("mouseup",$)};window.addEventListener("mousemove",F),window.addEventListener("mouseup",$)};return l.jsxs("div",{className:"flex flex-col gap-4 p-4 bg-white rounded-2xl border border-neutral-200",children:[l.jsx("div",{className:"relative h-24 bg-neutral-100 rounded-xl overflow-hidden cursor-pointer",onMouseDown:L,children:l.jsx("canvas",{ref:o,width:600,height:100,className:"w-full h-full"})}),l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsxs("button",{onClick:_,className:"flex items-center gap-2 px-4 py-2 bg-neutral-900 text-white rounded-xl text-xs font-bold uppercase tracking-wider hover:bg-neutral-800 transition-all",children:[w?l.jsx(kf,{size:14}):l.jsx(vi,{size:14}),w?"Stop":"Preview"]}),l.jsxs("div",{className:"flex gap-2",children:[l.jsx("button",{onClick:i,className:"px-4 py-2 text-neutral-500 hover:text-neutral-900 font-bold text-xs",children:"Cancel"}),l.jsxs("button",{onClick:j,className:"flex items-center gap-2 px-4 py-2 bg-indigo-600 text-white rounded-xl text-xs font-bold uppercase tracking-wider hover:bg-indigo-500 transition-all",children:[l.jsx(mE,{size:14})," Trim & Use"]})]})]}),l.jsx("p",{className:"text-[10px] text-neutral-400 text-center",children:"Drag the red bars to trim audio."})]})},t_=()=>{const n=rt(),r=Mt(n),{showToast:i}=On(),[o,f]=E.useState({}),[d,p]=E.useState(!1),[g,h]=E.useState(null),[m,y]=E.useState(null),[v,w]=E.useState(""),[N,O]=E.useState(""),[I,_]=E.useState(!1),[j,L]=E.useState(null),[D,M]=E.useState(""),[P,Y]=E.useState([]),[U,G]=E.useState(!1),[A,V]=E.useState(null),F=E.useRef(null),[$,ae]=E.useState(!1),me=E.useRef(null),fe=async()=>{try{const B=await fetch(`${r}/api/audio/mappings`);if(B.ok){const le=await B.json();f(le);const J=Object.keys(le);J.length>0&&!v&&w(J[0]),J.length>0&&!j&&(L(J[0]),C(J[0],""))}}catch(B){console.error("Failed to fetch mappings",B)}};E.useEffect(()=>{fe()},[r]),E.useEffect(()=>()=>{F.current&&(F.current.pause(),F.current=null)},[]);const C=async(B,le="")=>{G(!0),Y([]);try{const J=encodeURIComponent(le),ee=await fetch(`${r}/api/audio/files/${B}?path=${J}`);if(ee.ok){const ye=await ee.json();Y(ye.items),M(ye.currentPath)}else i("Failed to load files","error")}catch{i("Connection error","error")}finally{G(!1)}},ne=B=>{L(B),w(B),M(""),C(B,"")},te=B=>{if(!j)return;const le=D?`${D}/${B}`:B;C(j,le)},q=()=>{if(!j||!D)return;const B=D.split("/");B.pop();const le=B.join("/");C(j,le)},z=async(B,le)=>{if(B.stopPropagation(),!j)return;const J=D?`${D}/${le}`:le;try{const ye=await(await fetch(`${r}/api/audio/file?mapName=${encodeURIComponent(j)}&filename=${encodeURIComponent(J)}`,{method:"DELETE"})).json();ye.success?(i("File deleted","success"),C(j,D)):i(ye.error||"Delete failed","error")}catch{i("Server error","error")}},b=async()=>{await a0(),p(!0),h(null),y(null)},T=async()=>{const B=await n0();if(p(!1),B){const le=atob(B.base64),J=new Array(le.length);for(let ve=0;ve<le.length;ve++)J[ve]=le.charCodeAt(ve);const ee=new Uint8Array(J),ye=new Blob([ee],{type:B.mimeType});h(ye),y(ye)}},k=B=>{var J;const le=(J=B.target.files)==null?void 0:J[0];le&&(h(le),y(le),O(le.name))},Q=async()=>{if(!m||!v||!N){i("Please select audio, target folder, and filename.","error");return}_(!0);const B=new FormData;B.append("mapName",v),B.append("filename",N),B.append("audio",m,N);try{const J=await(await fetch(`${r}/api/audio/upload`,{method:"POST",body:B})).json();J.success?(i("Audio uploaded successfully!","success"),h(null),y(null),O(""),j===v&&C(v,D)):i(J.error||"Upload failed","error")}catch{i("Upload error","error")}finally{_(!1)}},ue=B=>{if(!j)return"";const le=D?`${D}/${B}`:B;return`${r}/api/audio/stream/${j}/${le}`},ie=(B,le)=>{B.stopPropagation();const J=ue(le);J&&(fc(J),i("Audio URL copied!","success"))},he=B=>{var ee;const le=ue(B);if(!le)return;if(A===le&&$){(ee=F.current)==null||ee.pause(),ae(!1);return}F.current&&F.current.pause();const J=new Audio(le);F.current=J,V(le),J.play().then(()=>ae(!0)).catch(()=>{i("Failed to play audio","error"),ae(!1)}),J.onended=()=>ae(!1),J.onerror=()=>{ae(!1),V(null)}};return l.jsxs("div",{className:"flex flex-col h-full gap-4",children:[l.jsx("div",{className:"shrink-0 bg-white p-4 rounded-2xl border border-neutral-200 shadow-sm",children:g?l.jsxs("div",{className:"space-y-4 animate-in fade-in slide-in-from-top-2",children:[l.jsx(e_,{audioBlob:g,onTrim:B=>{y(B),i("Trimmed!","success")},onCancel:()=>{h(null),y(null)}}),l.jsxs("div",{className:"p-4 bg-neutral-50 rounded-xl border border-neutral-200 space-y-3",children:[l.jsxs("div",{className:"flex flex-col gap-3",children:[l.jsxs("select",{value:v,onChange:B=>w(B.target.value),className:"w-full px-3 py-2 rounded-xl border border-neutral-200 text-xs font-bold bg-white focus:ring-2 focus:ring-neutral-900 outline-none",children:[l.jsx("option",{value:"",children:"Target Folder..."}),Object.keys(o).map(B=>l.jsx("option",{value:B,children:B},B))]}),l.jsx("input",{value:N,onChange:B=>O(B.target.value),placeholder:"filename.wav",className:"w-full px-3 py-2 rounded-xl border border-neutral-200 text-xs font-bold bg-white focus:ring-2 focus:ring-neutral-900 outline-none"})]}),l.jsxs("div",{className:"flex gap-2",children:[l.jsx("button",{onClick:()=>{h(null),y(null)},className:"flex-1 py-2.5 bg-white border border-neutral-200 text-neutral-500 rounded-xl font-bold text-xs hover:bg-neutral-50 transition-all",children:"Cancel"}),l.jsxs("button",{onClick:Q,disabled:I||!v||!N,className:"flex-[2] py-2.5 bg-neutral-900 text-white rounded-xl font-black text-xs uppercase tracking-widest hover:bg-neutral-800 disabled:opacity-50 transition-all flex items-center justify-center gap-2",children:[I?l.jsx(At,{size:14,className:"animate-spin"}):l.jsx(Ty,{size:14}),l.jsx("span",{children:"Save"})]})]})]})]}):l.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[l.jsxs("button",{onClick:d?T:b,className:`flex items-center justify-center gap-2 p-3 rounded-xl border transition-all ${d?"bg-red-50 border-red-200 text-red-600 animate-pulse":"bg-neutral-50 border-neutral-200 text-neutral-600 hover:bg-white hover:border-indigo-300 hover:text-indigo-600"}`,children:[l.jsx(pl,{size:20}),l.jsx("span",{className:"font-bold text-xs",children:d?"Stop Recording":"Record Voice"})]}),l.jsxs("button",{onClick:()=>{var B;return(B=me.current)==null?void 0:B.click()},className:"flex items-center justify-center gap-2 p-3 rounded-xl border bg-neutral-50 border-neutral-200 text-neutral-600 transition-all hover:bg-white hover:border-indigo-300 hover:text-indigo-600",children:[l.jsx(Mf,{size:20}),l.jsx("span",{className:"font-bold text-xs",children:"Upload File"}),l.jsx("input",{type:"file",ref:me,className:"hidden",accept:"audio/*",onChange:k})]})]})}),l.jsxs("div",{className:"flex-1 flex flex-col min-h-0 bg-neutral-50 rounded-2xl border border-neutral-200 overflow-hidden",children:[l.jsxs("div",{className:"p-3 border-b border-neutral-200 bg-white space-y-2 shrink-0",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsxs("select",{value:j||"",onChange:B=>ne(B.target.value),className:"px-3 py-2 bg-neutral-50 border border-neutral-200 rounded-xl text-xs font-bold text-neutral-700 outline-none focus:ring-2 focus:ring-neutral-900",children:[l.jsx("option",{value:"",disabled:!0,children:"Select Folder..."}),Object.keys(o).map(B=>l.jsx("option",{value:B,children:B},B))]}),l.jsx("div",{className:"flex-1 flex items-center gap-1 overflow-hidden",children:D&&l.jsxs(l.Fragment,{children:[l.jsx(Xo,{size:14,className:"text-neutral-300 shrink-0"}),l.jsx("span",{className:"text-xs font-mono text-neutral-500 truncate",title:D,children:D})]})}),j&&l.jsx("button",{onClick:()=>C(j,D),className:"p-2 hover:bg-neutral-100 rounded-full transition-colors",children:l.jsx(ir,{size:14,className:U?"animate-spin":""})})]}),D&&l.jsxs("button",{onClick:q,className:"flex items-center gap-1.5 px-3 py-1.5 bg-neutral-100 text-neutral-600 rounded-lg text-[10px] font-bold hover:bg-neutral-200 transition-colors w-fit",children:[l.jsx(gy,{size:12})," Up One Level"]})]}),l.jsx("div",{className:"flex-1 overflow-y-auto p-2 custom-scrollbar",children:U?l.jsxs("div",{className:"h-full flex flex-col items-center justify-center text-neutral-400 space-y-2",children:[l.jsx(At,{size:24,className:"animate-spin"}),l.jsx("p",{className:"text-[10px] font-bold uppercase tracking-wider",children:"Loading..."})]}):P.length===0?l.jsxs("div",{className:"h-full flex flex-col items-center justify-center text-neutral-400 space-y-2",children:[l.jsx(eE,{size:32,className:"opacity-20"}),l.jsx("p",{className:"text-xs font-medium",children:"Empty folder."})]}):l.jsx("div",{className:"grid grid-cols-1 gap-1",children:P.map((B,le)=>{if(B.type==="directory")return l.jsxs("div",{onClick:()=>te(B.name),className:"flex items-center justify-between p-2 rounded-lg hover:bg-white hover:shadow-sm border border-transparent hover:border-neutral-100 transition-all cursor-pointer group",children:[l.jsxs("div",{className:"flex items-center gap-3 min-w-0",children:[l.jsx("div",{className:"p-2 rounded-full bg-blue-50 text-blue-500",children:l.jsx(yy,{size:14,fill:"currentColor"})}),l.jsx("span",{className:"text-xs font-bold text-neutral-700 truncate",children:B.name})]}),l.jsx(Xo,{size:14,className:"text-neutral-300 group-hover:text-neutral-500"})]},`${B.name}-${le}`);{const J=A==null?void 0:A.endsWith(`/${encodeURIComponent(B.name)}`);return l.jsxs("div",{className:"flex items-center justify-between p-2 rounded-lg hover:bg-white hover:shadow-sm border border-transparent hover:border-neutral-100 transition-all group",children:[l.jsxs("div",{className:"flex items-center gap-3 min-w-0 cursor-pointer flex-1",onClick:()=>he(B.name),children:[l.jsx("button",{className:`p-2 rounded-full transition-colors ${J&&$?"bg-indigo-100 text-indigo-600":"bg-neutral-100 text-neutral-500 hover:bg-neutral-200 hover:text-neutral-900"}`,children:J&&$?l.jsx(kf,{size:12,fill:"currentColor"}):l.jsx(vi,{size:12,fill:"currentColor"})}),l.jsx("span",{className:`text-xs font-medium truncate ${J?"text-indigo-700 font-bold":"text-neutral-700"}`,children:B.name})]}),l.jsxs("div",{className:"flex items-center gap-1 opacity-0 group-hover:opacity-100 transition-opacity",children:[l.jsx("button",{onClick:ee=>ie(ee,B.name),className:"p-1.5 text-neutral-400 hover:text-indigo-600 hover:bg-indigo-50 rounded-md transition-colors",title:"Copy URL",children:l.jsx(Of,{size:12})}),l.jsx("button",{onClick:ee=>z(ee,B.name),className:"p-1.5 text-neutral-400 hover:text-red-600 hover:bg-red-50 rounded-md transition-colors",title:"Delete",children:l.jsx(Lf,{size:12})})]})]},`${B.name}-${le}`)}})})})]})]})},a_=()=>{const n=rt(),r=Mt(n),{showToast:i}=On(),[o,f]=E.useState({}),[d,p]=E.useState(null),[g,h]=E.useState(""),[m,y]=E.useState([]),[v,w]=E.useState(!1),[N,O]=E.useState(!1),I=E.useRef(null),_=async()=>{try{const A=await fetch(`${r}/api/audio/mappings`);if(A.ok){const V=await A.json();f(V);const F=Object.keys(V),$=F.find(ae=>ae.toLowerCase()==="image"||ae.toLowerCase()==="images"||ae.toLowerCase()==="icon")||F[0];$&&!d&&(p($),j($,""))}}catch(A){console.error("Failed to fetch mappings",A)}};E.useEffect(()=>{_()},[r]);const j=async(A,V="")=>{w(!0),y([]);try{const F=encodeURIComponent(V),$=await fetch(`${r}/api/images/files/${A}?path=${F}`);if($.ok){const ae=await $.json();y(ae.items),h(ae.currentPath)}else i("Failed to load images","error")}catch{i("Connection error","error")}finally{w(!1)}},L=A=>{p(A),h(""),j(A,"")},D=A=>{if(!d)return;const V=g?`${g}/${A}`:A;j(d,V)},M=()=>{if(!d||!g)return;const A=g.split("/");A.pop();const V=A.join("/");j(d,V)},P=async(A,V)=>{if(A.stopPropagation(),!d)return;const F=g?`${g}/${V}`:V;try{const ae=await(await fetch(`${r}/api/images/file?mapName=${encodeURIComponent(d)}&filename=${encodeURIComponent(F)}`,{method:"DELETE"})).json();ae.success?(i("File deleted","success"),j(d,g)):i(ae.error||"Delete failed","error")}catch{i("Server error","error")}},Y=A=>{if(!d)return"";const V=g?`${g}/${A}`:A;return`${r}/api/images/stream/${d}/${V}`},U=(A,V)=>{A.stopPropagation();const F=Y(V);F&&(fc(F),i("Image URL copied!","success"))},G=async A=>{var $;const V=($=A.target.files)==null?void 0:$[0];if(!V||!d)return;O(!0);const F=new FormData;F.append("mapName",d),g?`${g}${V.name}`:V.name,F.append("filename",V.name),F.append("image",V);try{const me=await(await fetch(`${r}/api/images/upload`,{method:"POST",body:F})).json();me.success?(i("Image uploaded!","success"),j(d,"")):i(me.error||"Upload failed","error")}catch{i("Upload error","error")}finally{O(!1),I.current&&(I.current.value="")}};return l.jsx("div",{className:"flex flex-col h-full gap-4",children:l.jsxs("div",{className:"flex-1 flex flex-col min-h-0 bg-neutral-50 rounded-2xl border border-neutral-200 overflow-hidden",children:[l.jsxs("div",{className:"p-3 border-b border-neutral-200 bg-white space-y-2 shrink-0",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsxs("select",{value:d||"",onChange:A=>L(A.target.value),className:"px-3 py-2 bg-neutral-50 border border-neutral-200 rounded-xl text-xs font-bold text-neutral-700 outline-none focus:ring-2 focus:ring-neutral-900",children:[l.jsx("option",{value:"",disabled:!0,children:"Select Folder..."}),Object.keys(o).map(A=>l.jsx("option",{value:A,children:A},A))]}),l.jsx("div",{className:"flex-1 flex items-center gap-1 overflow-hidden",children:g&&l.jsxs(l.Fragment,{children:[l.jsx(Xo,{size:14,className:"text-neutral-300 shrink-0"}),l.jsx("span",{className:"text-xs font-mono text-neutral-500 truncate",title:g,children:g})]})}),d&&l.jsx("button",{onClick:()=>j(d,g),className:"p-2 hover:bg-neutral-100 rounded-full transition-colors",children:l.jsx(ir,{size:14,className:v?"animate-spin":""})})]}),l.jsxs("div",{className:"flex justify-between items-center",children:[g?l.jsxs("button",{onClick:M,className:"flex items-center gap-1.5 px-3 py-1.5 bg-neutral-100 text-neutral-600 rounded-lg text-[10px] font-bold hover:bg-neutral-200 transition-colors w-fit",children:[l.jsx(gy,{size:12})," Up One Level"]}):l.jsx("div",{}),d&&l.jsxs("button",{onClick:()=>{var A;return(A=I.current)==null?void 0:A.click()},disabled:N,className:"flex items-center gap-1.5 px-3 py-1.5 bg-indigo-600 text-white rounded-lg text-[10px] font-bold hover:bg-indigo-700 transition-colors shadow-sm disabled:opacity-50",children:[N?l.jsx(At,{size:12,className:"animate-spin"}):l.jsx(Mf,{size:12}),l.jsx("span",{children:"Upload Image"}),l.jsx("input",{type:"file",ref:I,className:"hidden",accept:"image/*",onChange:G})]})]})]}),l.jsx("div",{className:"flex-1 overflow-y-auto p-4 custom-scrollbar",children:v?l.jsxs("div",{className:"h-full flex flex-col items-center justify-center text-neutral-400 space-y-2",children:[l.jsx(At,{size:24,className:"animate-spin"}),l.jsx("p",{className:"text-[10px] font-bold uppercase tracking-wider",children:"Loading..."})]}):m.length===0?l.jsxs("div",{className:"h-full flex flex-col items-center justify-center text-neutral-400 space-y-2",children:[l.jsx(Ey,{size:32,className:"opacity-20"}),l.jsx("p",{className:"text-xs font-medium",children:"Empty folder."})]}):l.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-4",children:[m.filter(A=>A.type==="directory").map((A,V)=>l.jsxs("div",{onClick:()=>D(A.name),className:"aspect-square rounded-xl bg-blue-50 border border-blue-100 flex flex-col items-center justify-center cursor-pointer hover:bg-blue-100 transition-colors gap-2",children:[l.jsx(yy,{size:32,className:"text-blue-400"}),l.jsx("span",{className:"text-xs font-bold text-blue-800 truncate px-2 max-w-full",children:A.name})]},`dir-${V}`)),m.filter(A=>A.type==="file").map((A,V)=>{const F=Y(A.name);return l.jsxs("div",{className:"group relative aspect-square rounded-xl bg-white border border-neutral-200 overflow-hidden shadow-sm hover:shadow-md transition-all",children:[l.jsx("div",{className:"absolute inset-0 bg-neutral-100 flex items-center justify-center",children:l.jsx("img",{src:F,alt:A.name,className:"w-full h-full object-cover",loading:"lazy"})}),l.jsxs("div",{className:"absolute inset-0 bg-black/60 opacity-0 group-hover:opacity-100 transition-opacity flex flex-col items-center justify-center gap-2 p-2",children:[l.jsx("p",{className:"text-[10px] text-white font-medium truncate w-full text-center mb-1",children:A.name}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("button",{onClick:$=>U($,A.name),className:"p-2 bg-white text-indigo-600 rounded-full hover:bg-indigo-50 transition-colors",title:"Copy URL",children:l.jsx(Of,{size:14})}),l.jsx("button",{onClick:$=>P($,A.name),className:"p-2 bg-white text-red-600 rounded-full hover:bg-red-50 transition-colors",title:"Delete",children:l.jsx(Lf,{size:14})})]})]})]},`file-${V}`)})]})})]})})},n_=({isOpen:n,onClose:r})=>{const[i,o]=E.useState("OCR");if(!n)return null;const f=[{id:"OCR",label:"Image to Text",icon:pE},{id:"IMAGES",label:"Image Manager",icon:Ey},{id:"AUDIO",label:"Audio Tool",icon:pl}];return l.jsx("div",{className:"fixed inset-0 z-[10000] flex items-center justify-center p-4 bg-black/60 backdrop-blur-sm animate-in fade-in duration-200",children:l.jsxs("div",{className:"bg-white w-full max-w-4xl rounded-[2.5rem] shadow-2xl border border-neutral-200 flex flex-col h-[85vh]",children:[l.jsxs("header",{className:"px-8 py-6 border-b border-neutral-100 flex justify-between items-center shrink-0",children:[l.jsx("div",{className:"flex gap-2 p-1 bg-neutral-100 rounded-xl",children:f.map(d=>{const p=d.icon;return l.jsxs("button",{onClick:()=>o(d.id),className:`flex items-center gap-2 px-4 py-2.5 rounded-lg text-xs font-black uppercase tracking-wider transition-all ${i===d.id?"bg-white text-neutral-900 shadow-sm":"text-neutral-500 hover:text-neutral-700"}`,children:[l.jsx(p,{size:16}),l.jsx("span",{children:d.label})]},d.id)})}),l.jsx("button",{onClick:r,className:"p-2 -mr-2 text-neutral-400 hover:bg-neutral-100 rounded-full transition-colors",children:l.jsx(Ut,{size:24})})]}),l.jsxs("main",{className:"flex-1 overflow-y-auto p-6 md:p-8",children:[i==="OCR"&&l.jsx(JN,{}),i==="IMAGES"&&l.jsx(a_,{}),i==="AUDIO"&&l.jsx(t_,{})]})]})})},s_=1e3,l_=300,iy=n=>{if(!Array.isArray(n)||n.length===0)return[];const r=new Map,i=[],o=f=>{const d=String(f||"").toLowerCase();return/\bnoun\b/.test(d)?"NOUN":/\bverb\b/.test(d)?"VERB":/\badjective\b/.test(d)?"ADJECTIVE":/\badverb\b/.test(d)?"ADVERB":/\bpronoun\b/.test(d)?"PRONOUN":/\bpreposition\b/.test(d)?"PREPOSITION":/\bconjunction\b/.test(d)?"CONJUNCTION":/\binterjection\b/.test(d)?"INTERJECTION":String(f||"").replace(/\s+/g," ").trim().toUpperCase()||"N/A"};for(const f of n){const d=o(f.partOfSpeech);r.has(d)||(r.set(d,{partOfSpeech:d,ipaUs:null,ipaUk:null,audioUs:null,audioUk:null}),i.push(d));const p=r.get(d);!p.ipaUs&&f.ipaUs&&(p.ipaUs=f.ipaUs),!p.ipaUk&&f.ipaUk&&(p.ipaUk=f.ipaUk),!p.audioUs&&f.audioUs&&(p.audioUs=f.audioUs),!p.audioUk&&f.audioUk&&(p.audioUk=f.audioUk)}return i.map(f=>r.get(f)).filter(f=>f.ipaUs||f.ipaUk||f.audioUs||f.audioUk)},oy={woman_teacher:{url:"https://raw.githubusercontent.com/Tarikul-Islam-Anik/Animated-Fluent-Emojis/master/Emojis/People/Woman%20Teacher.png",bg:"bg-indigo-50"},man_teacher:{url:"https://raw.githubusercontent.com/Tarikul-Islam-Anik/Animated-Fluent-Emojis/master/Emojis/People/Man%20Teacher.png",bg:"bg-blue-50"},fox:{url:"https://raw.githubusercontent.com/Tarikul-Islam-Anik/Animated-Fluent-Emojis/master/Emojis/Animals/Fox.png",bg:"bg-orange-100"},koala:{url:"https://raw.githubusercontent.com/Tarikul-Islam-Anik/Animated-Fluent-Emojis/master/Emojis/Animals/Koala.png",bg:"bg-teal-100"},pet:{url:"https://raw.githubusercontent.com/Tarikul-Islam-Anik/Animated-Fluent-Emojis/master/Emojis/Animals/Cat%20Face.png",bg:"bg-pink-100"},owl:{url:"https://raw.githubusercontent.com/Tarikul-Islam-Anik/Animated-Fluent-Emojis/master/Emojis/Animals/Owl.png",bg:"bg-yellow-100"},panda:{url:"https://raw.githubusercontent.com/Tarikul-Islam-Anik/Animated-Fluent-Emojis/master/Emojis/Animals/Panda.png",bg:"bg-emerald-100"},unicorn:{url:"https://raw.githubusercontent.com/Tarikul-Islam-Anik/Animated-Fluent-Emojis/master/Emojis/Animals/Unicorn.png",bg:"bg-purple-100"}},r_=({user:n,onViewWord:r,isAnyModalOpen:i})=>{const{showToast:o}=On(),[f,d]=E.useState(rt()),[p,g]=E.useState(oi()),[h,m]=E.useState(ci()),[y,v]=E.useState(ui()),[w,N]=E.useState(!1),[O,I]=E.useState(Zo()),[_,j]=E.useState({currentTime:0,duration:0}),[L,D]=E.useState([]),[M,P]=E.useState(0),[Y,U]=E.useState(!1),[G,A]=E.useState(null),[V,F]=E.useState(!1),[$,ae]=E.useState(null),[me,fe]=E.useState(null),[C,ne]=E.useState(!1),[te,q]=E.useState(!1),[z,b]=E.useState({query:"",data:null}),[T,k]=E.useState(!1),[Q,ue]=E.useState(!1),[ie,he]=E.useState(!1),B=E.useRef(null),le=E.useRef(null),J=E.useRef(null),ee=E.useRef(null),ye=E.useRef(null),ve=E.useRef(null),Ce=E.useRef(!1),it=E.useRef(""),be=E.useRef(null),pe=E.useRef(!1),Pe=E.useRef(null),Qe=E.useRef({word:"",at:0}),re=f.audioCoach.activeCoach,Ae=f.audioCoach.coaches[re],Re=Xe(Ae.avatar);function Xe(xe){return xe.startsWith("http")||xe.startsWith("data:")?{url:xe,bg:"bg-white border-2 border-neutral-100"}:oy[xe]||oy.woman_teacher}const ke=async xe=>{if(xe){q(!1),ne(!0),b({query:xe,data:null}),J.current&&J.current.abort(),J.current=new AbortController;try{const je=Mt(f),_e=await fetch(`${je}/api/lookup/cambridge/simple?word=${encodeURIComponent(xe)}`,{signal:J.current.signal});if(_e.ok){const Ke=await _e.json();q(!!(Ke!=null&&Ke.exists)),b({query:xe,data:Ke})}}catch{}finally{ne(!1)}}},ze=async xe=>{if(!xe||!n.id)return;const je=await vf(n.id,xe);k(!!je)};E.useEffect(()=>{pe.current=Y},[Y]),E.useEffect(()=>{if(p&&!y){ve.current&&(window.clearTimeout(ve.current),ve.current=null),N(!0);return}ve.current&&window.clearTimeout(ve.current),ve.current=window.setTimeout(()=>{N(!1),ve.current=null},260)},[p,y]),E.useEffect(()=>{Pe.current=G},[G]),E.useEffect(()=>{const xe=()=>d(rt()),je=Je=>{const Le=Je.detail,Nt=typeof(Le==null?void 0:Le.isSpeaking)=="boolean"?Le.isSpeaking:oi(),ht=typeof(Le==null?void 0:Le.isAudioPaused)=="boolean"?Le.isAudioPaused:ci(),mt=typeof(Le==null?void 0:Le.isSingleWordPlayback)=="boolean"?Le.isSingleWordPlayback:ui(),sa=typeof(Le==null?void 0:Le.playbackRate)=="number"?Le.playbackRate:Zo();if(I(sa),Nt){ye.current&&(window.clearTimeout(ye.current),ye.current=null),g(!0),m(ht),v(mt);return}ye.current&&window.clearTimeout(ye.current),ye.current=window.setTimeout(()=>{g(oi()),m(ci()),v(ui()),ye.current=null},180)},_e=Je=>{var Ja,en,tn,an,Ls,Ms;const Le=Je,Nt=(en=(Ja=Le.detail)==null?void 0:Ja.word)==null?void 0:en.trim(),ht=(tn=Le.detail)==null?void 0:tn.data;if(!Nt||!(ht!=null&&ht.exists))return;const mt=Nt.toLowerCase(),sa=(Ms=(Ls=(an=Pe.current)==null?void 0:an.cambridge)==null?void 0:Ls.word)==null?void 0:Ms.trim().toLowerCase();if(pe.current&&sa===mt){ee.current&&(window.clearTimeout(ee.current),ee.current=null);const za=Date.now();Qe.current={word:mt,at:za};return}const Xt=Date.now(),Xa=Qe.current;Xa.word===mt&&Xt-Xa.at<500||(it.current=mt,b({query:mt,data:ht}),q(!0),F(!1),fe(null),A({actionLabel:"Go to Cambridge",actionUrl:ht.url,cambridge:{word:ht.word||mt,pronunciations:iy(ht.pronunciations)},icon:l.jsx(sg,{size:18,className:"text-blue-500"})}),Qe.current={word:mt,at:Xt},U(!0))},Ke=Je=>{var Xt,Xa,Ja,en,tn,an;const Le=Je,Nt=(Xa=(Xt=Le.detail)==null?void 0:Xt.word)==null?void 0:Xa.trim(),ht=(Ja=Le.detail)==null?void 0:Ja.ipa;if(!Nt||!ht)return;const mt=Nt.toLowerCase(),sa=(an=(tn=(en=Pe.current)==null?void 0:en.cambridge)==null?void 0:tn.word)==null?void 0:an.trim().toLowerCase();pe.current&&sa===mt||(it.current=mt,q(!1),F(!1),fe(null),A({text:`**IPA:** ${ht}`,icon:l.jsx(Cd,{size:18,className:"text-purple-500"})}),Qe.current={word:mt,at:Date.now()},U(!0))};return window.addEventListener("config-updated",xe),window.addEventListener("audio-status-changed",je),window.addEventListener("coach-cambridge-lookup-request",_e),window.addEventListener("coach-ipa-fallback-request",Ke),g(oi()),m(ci()),v(ui()),I(Zo()),()=>{ye.current&&(window.clearTimeout(ye.current),ye.current=null),ve.current&&(window.clearTimeout(ve.current),ve.current=null),window.removeEventListener("config-updated",xe),window.removeEventListener("audio-status-changed",je),window.removeEventListener("coach-cambridge-lookup-request",_e),window.removeEventListener("coach-ipa-fallback-request",Ke),be.current&&(be.current.pause(),be.current=null)}},[]),E.useEffect(()=>{const xe=_e=>{if(!f.interface.rightClickCommandEnabled)return;const Ke=window.getSelection(),Je=Ke==null?void 0:Ke.toString().trim();if(Je){_e.preventDefault();const Nt=Ke.getRangeAt(0).getBoundingClientRect(),ht=Nt.top>250?"top":"bottom";fe({x:Nt.left+Nt.width/2,y:ht==="top"?Nt.top:Nt.bottom,placement:ht}),it.current=Je,A(null),U(!0),ze(Je),Je.split(/\s+/).filter(Boolean).length<=5?ke(Je):q(!1)}else fe(null)},je=_e=>{var Nt;const Ke=_e.target,Je=!B.current||!B.current.contains(Ke),Le=!le.current||!le.current.contains(Ke);(Nt=Pe.current)!=null&&Nt.cambridge||Je&&Le&&Y&&(U(!1),fe(null))};return document.addEventListener("contextmenu",xe),document.addEventListener("mousedown",je),()=>{ee.current&&(window.clearTimeout(ee.current),ee.current=null),document.removeEventListener("contextmenu",xe),document.removeEventListener("mousedown",je)}},[f.interface.rightClickCommandEnabled,Y,f.server,n.id]);const Ge=async()=>{var je,_e;const xe=(je=window.getSelection())==null?void 0:je.toString().trim();if(xe){F(!0),U(!1),fe(null);try{const Je=await(await fetch(`https://api.mymemory.translated.net/get?q=${encodeURIComponent(xe)}&langpair=en|vi`)).json();if((_e=Je==null?void 0:Je.responseData)!=null&&_e.translatedText){const Le=Je.responseData.translatedText;A({text:Le,icon:l.jsx(rE,{size:18,className:"text-blue-500"})}),U(!0),Sa(Le,!1,"vi",Ae.viVoice,Ae.viAccent)}}catch{o("Translation error!","error")}finally{F(!1)}}},Ze=async()=>{var je;const xe=(je=window.getSelection())==null?void 0:je.toString().trim();if(xe){xe.length>s_?o("Text is too long to read!","error"):Sa(xe,!1,"en",Ae.enVoice,Ae.enAccent),F(!0),U(!1),fe(null);try{const _e=xe.toLowerCase();if(_e.split(/\s+/).filter(Boolean).length===1){const ht=Mt(f),mt=await fetch(`${ht}/api/lookup/cambridge/simple?word=${encodeURIComponent(_e)}`,{cache:"no-store"});if(mt.ok){const sa=await mt.text(),Xt=sa?JSON.parse(sa):null;if(Xt!=null&&Xt.exists){A({actionLabel:"Go to Cambridge",actionUrl:Xt.url,cambridge:{word:Xt.word||_e,pronunciations:iy(Xt.pronunciations)},icon:l.jsx(sg,{size:18,className:"text-blue-500"})}),U(!0),F(!1);return}}}const Je=Cs().find(ht=>ht.word.toLowerCase()===_e);if(Je&&Je.ipaUs){A({text:`**IPA:** ${Je.ipaUs}`,icon:l.jsx(Cd,{size:18,className:"text-emerald-500"})}),U(!0),F(!1);return}const Le=Mt(f),Nt=await fetch(`${Le}/api/convert/ipa?text=${encodeURIComponent(xe)}&mode=2`);if(Nt.ok){const ht=await Nt.json();A({text:`**IPA:** ${ht.ipa}`,icon:l.jsx(Cd,{size:18,className:"text-purple-500"})}),U(!0)}}catch{}finally{F(!1)}}},dt=async()=>{var je;const xe=(je=window.getSelection())==null?void 0:je.toString().trim();if(!(!xe||T)){ue(!0);try{let _e,Ke=null;try{const Je=await bw([xe]);Je.length>0&&(Ke=Je[0])}catch{}Ke?(_e={...Ke,id:crypto.randomUUID?crypto.randomUUID():"id-"+Date.now()+"-"+Math.random().toString(36).substr(2,9),userId:n.id,createdAt:Date.now(),updatedAt:Date.now(),quality:pt.REFINED,source:"refine",nextReview:Date.now(),interval:0,easeFactor:2.5,consecutiveCorrect:0,forgotCount:0,lastReview:void 0,lastGrade:void 0,lastTestResults:{},groups:[...Ke.groups||[],"coach-added"]},_e.isPassive=!1,_e.complexity=bn(_e),_e.masteryScore=wa(_e),_e.gameEligibility=yn(_e)):(_e={...Rb(xe,"","","","",["coach-added"],!1,!1,!1,!1,xe.includes(" ")),userId:n.id,quality:pt.RAW},_e.isPassive=!1),await dc(_e),o(`"${xe}" added!`,"success"),k(!0),U(!1),fe(null)}catch{o("Add error!","error")}finally{ue(!1)}}},ts=async()=>{var _e;const xe=it.current||((_e=window.getSelection())==null?void 0:_e.toString().trim());if(!xe||!n.id||!r||i)return;const je=await vf(n.id,xe);je&&(U(!1),fe(null),r(je))},Cn=()=>{var je;const xe=(je=window.getSelection())==null?void 0:je.toString().trim();U(!1),fe(null),xe&&xe.length>l_?(o("Selection too long for mimic!","error"),ae(null)):ae(xe||"")},vn=()=>{U(!1),fe(null),he(!0)},Sn=xe=>{if(!xe){o("Audio not available.","info");return}try{const je=xe.startsWith("http")?xe:`${Mt(f)}${xe.startsWith("/")?"":"/"}${xe}`;be.current&&(be.current.pause(),be.current=null);const _e=new Audio(je);be.current=_e,_e.onerror=()=>o("Failed to play Cambridge audio.","error"),_e.onended=()=>{be.current===_e&&(be.current=null)},_e.play().catch(()=>o("Failed to play Cambridge audio.","error"))}catch{o("Failed to play Cambridge audio.","error")}},Dt=()=>{Ce.current=!0,ee.current&&(window.clearTimeout(ee.current),ee.current=null),U(!0)},vt=()=>{var xe;Ce.current=!1,ee.current&&window.clearTimeout(ee.current),ee.current=window.setTimeout(()=>{U(!1),ee.current=null},(xe=Pe.current)!=null&&xe.cambridge?3e3:300)};E.useEffect(()=>{if(!(!Y||!(G!=null&&G.cambridge))&&!Ce.current)return ee.current&&window.clearTimeout(ee.current),ee.current=window.setTimeout(()=>{Ce.current||(U(!1),ee.current=null)},3e3),()=>{ee.current&&(window.clearTimeout(ee.current),ee.current=null)}},[Y,G]);const qt=()=>l.jsx("div",{ref:B,className:"bg-white/95 backdrop-blur-xl p-1.5 rounded-[1.8rem] shadow-2xl border border-neutral-200 flex flex-col gap-1 w-[160px] animate-in fade-in zoom-in-95 duration-200",children:l.jsxs("div",{className:"grid grid-cols-6 gap-1",children:[l.jsx("button",{type:"button",onClick:Ge,className:"col-span-2 aspect-square bg-indigo-50 text-indigo-600 rounded-2xl flex items-center justify-center hover:bg-indigo-100 transition-all active:scale-90 shadow-sm font-black text-xs",title:"Ting Vit",children:"VI"}),T?l.jsx("button",{type:"button",onClick:ts,disabled:i,className:"col-span-2 aspect-square bg-sky-50 text-sky-600 rounded-2xl flex items-center justify-center hover:bg-sky-100 transition-all active:scale-90 shadow-sm",title:"View Word Details",children:l.jsx(bi,{size:15})}):l.jsx("button",{type:"button",onClick:dt,disabled:Q,className:"col-span-2 aspect-square bg-green-50 text-green-600 rounded-2xl flex items-center justify-center hover:bg-green-100 transition-all active:scale-90 shadow-sm",title:"Add to Library",children:Q?l.jsx(At,{size:14,className:"animate-spin"}):l.jsx(In,{size:15})}),l.jsx("button",{type:"button",onClick:Ze,className:"col-span-2 aspect-square bg-purple-50 text-purple-600 rounded-2xl flex items-center justify-center hover:bg-purple-100 transition-all active:scale-90 shadow-sm",title:"Read & Phonetics (EN)",children:l.jsx(cn,{size:15})}),l.jsx("button",{type:"button",onClick:Cn,className:"col-span-2 aspect-square bg-amber-50 text-amber-500 rounded-2xl flex items-center justify-center hover:bg-amber-100 transition-all active:scale-95 shadow-sm",title:"Mimic Practice",children:l.jsx(pl,{size:15})}),l.jsx("button",{type:"button",onClick:vn,className:"col-span-2 aspect-square bg-rose-50 text-rose-500 rounded-2xl flex items-center justify-center hover:bg-rose-100 transition-all active:scale-95 shadow-sm",title:"Coach Tools",children:l.jsx(TE,{size:15})}),l.jsx("div",{"aria-hidden":"true",className:"col-span-2 aspect-square rounded-2xl border border-neutral-100 bg-neutral-50/50"})]})}),It=xe=>{const je=new RegExp("\\*\\*(.*?)\\*\\*","g");return xe.replace(je,"<strong>$1</strong>")};E.useEffect(()=>{let xe;return p?(D(Gb()),xe=setInterval(()=>{const je=$b();je&&j(je)},100)):(j({currentTime:0,duration:0}),D([]),m(!1),v(!1)),()=>clearInterval(xe)},[p]);const ca=xe=>{const je=parseFloat(xe.target.value);Jl(je),j(_e=>({..._e,currentTime:je}))},Da=xe=>{const je=Math.floor(xe/60),_e=Math.floor(xe%60);return`${je}:${_e.toString().padStart(2,"0")}`},ml=()=>{const xe=[.6,.7,.8,.9,1,1.25,1.5],je=xe.findIndex(Ke=>Math.abs(Ke-O)<.001),_e=xe[(je+1)%xe.length];Pb(_e),I(_e)};return l.jsxs(l.Fragment,{children:[Y&&me&&l.jsx("div",{className:"fixed z-[2147483647]",style:{left:`${me.x}px`,top:`${me.y}px`,transform:me.placement==="top"?"translate(-50%, -100%) translateY(-10px)":"translate(-50%, 0) translateY(10px)"},children:l.jsx(qt,{})}),l.jsx("div",{className:"fixed bottom-0 left-6 z-[2147483646] flex flex-col items-start pointer-events-none",children:l.jsx("div",{className:"flex flex-col items-center pointer-events-auto group pb-0 pt-10",onMouseEnter:Dt,onMouseLeave:vt,children:l.jsxs("div",{className:"relative",children:[Y&&!me&&l.jsx("div",{className:"absolute bottom-16 left-0 z-50 animate-in fade-in slide-in-from-bottom-2 duration-200",children:G?l.jsxs("div",{ref:le,className:"bg-white p-5 rounded-[2.5rem] shadow-2xl border border-neutral-200 w-[26rem] relative",children:[l.jsx("button",{onClick:()=>{A(null),U(!1),fe(null)},className:"absolute top-4 right-4 text-neutral-300 hover:text-neutral-900",children:l.jsx(Ut,{size:14})}),l.jsxs("div",{className:"flex items-start gap-3",children:[l.jsx("div",{className:"shrink-0 mt-1",children:G.icon||l.jsx(Rf,{size:18})}),l.jsxs("div",{className:"text-xs font-medium text-neutral-700 leading-relaxed space-y-2",children:[G.cambridge?l.jsxs("div",{className:"space-y-1.5",children:[l.jsx("h4",{className:"text-base font-black text-neutral-900",children:G.cambridge.word}),l.jsx("div",{className:"grid grid-cols-2 gap-2",children:(G.cambridge.pronunciations||[]).map((xe,je)=>l.jsxs("div",{className:"rounded-lg border border-neutral-200 bg-neutral-50 p-2 space-y-1.5",children:[l.jsx("p",{className:"text-[10px] font-black uppercase tracking-wide text-neutral-500",children:xe.partOfSpeech||"N/A"}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("button",{type:"button",onClick:()=>Sn(xe.audioUs||void 0),disabled:!xe.audioUs,className:`px-2 py-0.5 text-[9px] font-black uppercase rounded-md border transition-colors ${xe.audioUs?"bg-indigo-50 text-indigo-700 border-indigo-100 hover:bg-indigo-100":"bg-neutral-50 text-neutral-300 border-neutral-100 cursor-not-allowed"}`,children:"US"}),l.jsx("p",{className:"text-[11px] text-neutral-700 leading-relaxed flex-1 break-words",children:xe.ipaUs?`/${xe.ipaUs}/`:"N/A"})]}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("button",{type:"button",onClick:()=>Sn(xe.audioUk||void 0),disabled:!xe.audioUk,className:`px-2 py-0.5 text-[9px] font-black uppercase rounded-md border transition-colors ${xe.audioUk?"bg-emerald-50 text-emerald-700 border-emerald-100 hover:bg-emerald-100":"bg-neutral-50 text-neutral-300 border-neutral-100 cursor-not-allowed"}`,children:"UK"}),l.jsx("p",{className:"text-[11px] text-neutral-700 leading-relaxed flex-1 break-words",children:xe.ipaUk?`/${xe.ipaUk}/`:"N/A"})]})]},je))})]}):l.jsx("div",{dangerouslySetInnerHTML:{__html:It(G.text||"")}}),G.actionUrl&&l.jsx("button",{type:"button",onClick:()=>window.open(G.actionUrl,"_blank"),className:"px-3 py-1.5 text-[10px] font-black uppercase tracking-wide rounded-lg bg-blue-50 text-blue-700 border border-blue-100 hover:bg-blue-100 transition-colors",children:G.actionLabel||"Open"})]})]})]}):l.jsx(qt,{})}),l.jsx("button",{onClick:xe=>{w&&(xe.stopPropagation(),Hb())},className:`w-14 h-14 rounded-2xl flex items-center justify-center transition-all duration-300 transform shadow-2xl relative z-10 ${Re.bg} ${Y?"ring-4 ring-white":"hover:scale-110 mb-1"}`,children:V?l.jsx(At,{size:20,className:"animate-spin text-neutral-400"}):l.jsxs(l.Fragment,{children:[l.jsx("img",{src:Re.url,className:`w-10 h-10 object-contain ${w?"opacity-30 scale-90 blur-[1px]":""}`,alt:"Coach"}),w&&l.jsx("div",{className:"absolute inset-0 flex items-center justify-center text-indigo-600 animate-in fade-in zoom-in duration-200",children:l.jsx(rc,{size:24,fill:"currentColor"})})]})}),w&&l.jsxs("div",{className:"absolute left-16 bottom-2 flex items-center gap-3 bg-white/90 backdrop-blur-md px-4 py-2 rounded-2xl shadow-xl border border-neutral-200 animate-in fade-in slide-in-from-left-4 duration-300 pointer-events-auto min-w-[24rem]",onMouseEnter:Dt,onMouseLeave:vt,children:[l.jsx("span",{className:"text-[10px] font-mono text-neutral-500 tabular-nums w-8",children:_.duration>0?Da(_.currentTime):"--:--"}),l.jsx("input",{type:"range",min:"0",max:_.duration>0?_.duration:1,step:"0.1",value:_.duration>0?_.currentTime:0,onChange:ca,disabled:_.duration<=0,className:"flex-1 h-1.5 bg-neutral-100 rounded-full appearance-none cursor-pointer accent-indigo-600 hover:accent-indigo-700 transition-all"}),l.jsx("span",{className:"text-[10px] font-mono text-neutral-400 tabular-nums w-8",children:_.duration>0?Da(_.duration):"--:--"}),l.jsxs("div",{className:"flex items-center gap-2 w-full",children:[l.jsx("button",{onClick:()=>{const xe=Math.max(0,_.currentTime-5);Jl(xe),j(je=>({...je,currentTime:xe}))},className:"w-6 h-6 rounded-lg bg-neutral-50 text-neutral-700 hover:bg-neutral-100 transition-colors flex items-center justify-center border border-neutral-200",title:"Rewind 5 seconds",children:l.jsx("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:l.jsx("path",{d:"M7 8L13 12V4L7 8ZM3 8L9 12V4L3 8Z",fill:"currentColor"})})}),l.jsx("button",{onClick:()=>{const xe=Math.min(_.duration,_.currentTime+5);Jl(xe),j(je=>({...je,currentTime:xe}))},className:"w-6 h-6 rounded-lg bg-neutral-50 text-neutral-700 hover:bg-neutral-100 transition-colors flex items-center justify-center border border-neutral-200",title:"Forward 5 seconds",children:l.jsx("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:l.jsx("path",{d:"M9 8L3 4V12L9 8ZM13 8L7 4V12L13 8Z",fill:"currentColor"})})}),l.jsx("button",{onClick:()=>{h?qb().catch(()=>o("Cannot resume audio.","error")):Vb()},className:"w-6 h-6 rounded-lg bg-indigo-50 text-indigo-600 hover:bg-indigo-100 transition-colors flex items-center justify-center border border-indigo-100",title:h?"Resume audio":"Pause audio",children:h?l.jsx(vi,{size:12,fill:"currentColor"}):l.jsx(kf,{size:12,fill:"currentColor"})}),l.jsxs("button",{onClick:ml,className:"h-6 px-2 rounded-lg bg-neutral-50 text-neutral-700 hover:bg-neutral-100 transition-colors flex items-center justify-center border border-neutral-200 text-[10px] font-black tabular-nums",title:"Playback speed",children:[O.toFixed(O%1===0?1:2),"x"]}),L.length>0&&_.duration>0&&l.jsx("div",{className:"flex items-center gap-1 ml-1 border-l border-neutral-200 pl-2",children:L.map((xe,je)=>l.jsx("button",{onClick:()=>{Jl(xe),j(_e=>({..._e,currentTime:xe}))},className:"w-5 h-5 flex items-center justify-center rounded-full bg-indigo-50 text-indigo-600 text-[10px] font-bold hover:bg-indigo-600 hover:text-white transition-colors border border-indigo-100",title:`Jump to ${Da(xe)}`,children:je+1},je))}),l.jsxs("div",{className:"flex items-center gap-1 border-l border-neutral-200 pl-1 pr-0 ml-0",children:[l.jsx("button",{onClick:()=>P(_.currentTime),className:"w-6 h-6 rounded-lg bg-yellow-50 text-yellow-700 hover:bg-yellow-100 transition-colors flex items-center justify-center border border-yellow-200",title:"Mark current time",children:l.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[l.jsx("circle",{cx:"8",cy:"8",r:"6",stroke:"currentColor",strokeWidth:"2"}),l.jsx("circle",{cx:"8",cy:"8",r:"2",fill:"currentColor"})]})}),l.jsx("button",{onClick:()=>{Jl(M),j(xe=>({...xe,currentTime:M}))},className:"w-10 h-6 rounded-lg bg-indigo-50 text-indigo-700 hover:bg-indigo-100 transition-colors flex items-center justify-center border border-indigo-200 text-[11px] font-bold",title:`Play at marked time (${M.toFixed(1)}s)`,children:M.toFixed(1)})]})]})]})]})})}),$!==null&&l.jsx(Wb,{target:$,onClose:()=>ae(null)}),l.jsx(n_,{isOpen:ie,onClose:()=>he(!1)})]})},i_=({isOpen:n,onClose:r,backups:i,onRestore:o,onNewUser:f,onLocalRestore:d,isRestoring:p,title:g="Server Backups",description:h="Select a user profile to restore."})=>{if(!n)return null;const m=y=>y<1024*1024?`${(y/1024).toFixed(1)} KB`:`${(y/(1024*1024)).toFixed(1)} MB`;return l.jsx("div",{className:"fixed inset-0 z-[9999] flex items-center justify-center p-4 bg-black/60 backdrop-blur-sm animate-in fade-in duration-200",children:l.jsxs("div",{className:"bg-white w-full max-w-lg rounded-[2.5rem] shadow-2xl border border-neutral-200 flex flex-col max-h-[85vh]",children:[l.jsxs("header",{className:"px-8 py-6 border-b border-neutral-100 flex justify-between items-center shrink-0",children:[l.jsxs("div",{children:[l.jsxs("h3",{className:"text-xl font-black text-neutral-900 flex items-center gap-2",children:[l.jsx(my,{size:20})," ",g]}),l.jsx("p",{className:"text-sm text-neutral-500 mt-1",children:h})]}),l.jsx("button",{onClick:r,disabled:p,className:"p-2 -mr-2 text-neutral-400 hover:bg-neutral-100 rounded-full",children:l.jsx(Ut,{size:20})})]}),l.jsx("main",{className:"flex-1 overflow-y-auto p-6 space-y-3 custom-scrollbar",children:i.length===0?l.jsx("div",{className:"text-center py-10 text-neutral-400 font-medium italic",children:"No backups found on server."}):i.map(y=>l.jsxs("div",{className:"flex items-center justify-between p-4 rounded-2xl bg-neutral-50 border border-neutral-100 hover:border-neutral-300 transition-all group",children:[l.jsxs("div",{className:"flex items-center gap-3 overflow-hidden",children:[l.jsx("div",{className:"p-2.5 bg-white rounded-xl text-neutral-500 shadow-sm",children:l.jsx(NE,{size:18})}),l.jsxs("div",{className:"min-w-0",children:[l.jsx("h4",{className:"font-bold text-sm text-neutral-900 truncate",children:y.name}),l.jsxs("div",{className:"flex items-center gap-2 text-[10px] text-neutral-500 font-medium",children:[l.jsx("span",{className:"font-black text-indigo-600",children:new Date(y.date).toLocaleString()}),l.jsx("span",{className:"w-1 h-1 rounded-full bg-neutral-300"}),l.jsx("span",{children:m(y.size)})]})]})]}),l.jsx("button",{onClick:()=>o(y.id),disabled:p,className:"px-4 py-2 bg-white border border-neutral-200 text-indigo-600 rounded-xl font-black text-[10px] uppercase tracking-wider hover:bg-indigo-50 hover:border-indigo-200 transition-all shadow-sm active:scale-95 disabled:opacity-50",children:p?l.jsx(At,{size:14,className:"animate-spin"}):"Restore"})]},y.id))}),l.jsxs("footer",{className:"px-6 py-4 border-t border-neutral-100 bg-neutral-50/30 shrink-0 flex flex-col gap-3 rounded-b-[2.5rem]",children:[l.jsxs("button",{onClick:f,disabled:p,className:"w-full py-3 bg-neutral-900 text-white rounded-xl font-bold text-xs flex items-center justify-center gap-2 shadow-lg hover:bg-neutral-800 transition-all active:scale-95",children:[l.jsx(In,{size:16}),l.jsx("span",{children:"I am a New User (Create Profile)"})]}),l.jsx("div",{className:"flex justify-center",children:l.jsxs("button",{onClick:d,disabled:p,className:"flex items-center gap-1.5 text-[10px] font-bold text-neutral-400 hover:text-neutral-600 transition-colors py-1 px-2 rounded-lg hover:bg-neutral-100",children:[l.jsx(tE,{size:12}),l.jsx("span",{children:"Or restore from local file"})]})})]})]})})},o_=({isOpen:n,onClose:r,onRetry:i,onStop:o,status:f,serverUrl:d,scanningUrl:p})=>{const g=rt(),[h,m]=E.useState(f),[y,v]=E.useState(d||Mt(g));if(E.useEffect(()=>{n&&v(d||Mt(g))},[n,d]),E.useEffect(()=>{m(f)},[f]),!n)return null;const w=()=>{window.open(y,"_blank")},N=async()=>{m("scanning"),await i(y)},O=async()=>{m("scanning"),await i(void 0)},I=()=>{o(),m("failed")};return l.jsxs("div",{className:"fixed inset-0 z-[9999] flex items-center justify-center p-4 bg-neutral-900/80 backdrop-blur-sm animate-in fade-in duration-300",children:[l.jsxs("div",{className:"bg-white w-full max-w-md rounded-[2.5rem] shadow-2xl border border-neutral-200 overflow-hidden flex flex-col animate-in zoom-in-95 duration-300",children:[l.jsxs("div",{className:`p-8 text-center space-y-4 ${h==="failed"?"bg-red-50":"bg-indigo-50"}`,children:[l.jsxs("div",{className:"mx-auto w-20 h-20 bg-white rounded-full flex items-center justify-center shadow-sm relative",children:[h==="scanning"&&l.jsxs(l.Fragment,{children:[l.jsx(At,{size:40,className:"text-indigo-500 animate-spin"}),l.jsx("div",{className:"absolute inset-0 rounded-full border-4 border-indigo-100 border-t-indigo-500 animate-spin"})]}),h==="failed"&&l.jsx(ic,{size:40,className:"text-red-500"}),h==="success"&&l.jsx(AE,{size:40,className:"text-green-500"})]}),l.jsxs("div",{className:"space-y-1",children:[l.jsx("h3",{className:"text-2xl font-black text-neutral-900 tracking-tight",children:h==="scanning"?"Connecting...":h==="failed"?"Connection Failed":"Connected!"}),l.jsx("p",{className:"text-sm font-medium text-neutral-500",children:h==="scanning"?p?"Scanning network...":"Contacting Vocab Pro Server...":h==="failed"?"Could not talk to the server.":"Server found. Syncing..."})]})]}),l.jsxs("div",{className:"p-6 space-y-6",children:[h==="scanning"&&l.jsxs("div",{className:"flex flex-col gap-4",children:[l.jsx("div",{className:"h-2 w-full bg-neutral-100 rounded-full overflow-hidden",children:l.jsx("div",{className:"h-full bg-indigo-500 animate-progress-indeterminate"})}),l.jsxs("div",{className:"bg-neutral-50 p-4 rounded-2xl border border-neutral-100 text-center animate-pulse",children:[l.jsx("p",{className:"text-[10px] font-black uppercase text-neutral-400 tracking-widest mb-1",children:"Checking Endpoint"}),l.jsx("p",{className:"text-sm font-bold text-neutral-600 truncate",children:p||"..."})]}),l.jsxs("button",{onClick:I,className:"mx-auto px-6 py-2 bg-white border border-red-200 text-red-600 rounded-xl font-bold text-xs flex items-center gap-2 hover:bg-red-50 transition-colors shadow-sm",children:[l.jsx(rc,{size:12,fill:"currentColor"})," Stop"]})]}),h==="failed"&&l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{className:"space-y-2",children:[l.jsx("label",{className:"text-[10px] font-black text-neutral-400 uppercase tracking-widest px-1",children:"Server Address"}),l.jsxs("div",{className:"flex gap-2",children:[l.jsx("input",{type:"text",value:y,onChange:_=>v(_.target.value),className:"flex-1 px-4 py-3 bg-neutral-50 border border-neutral-200 rounded-xl text-sm font-bold text-neutral-800 focus:outline-none focus:ring-2 focus:ring-neutral-900",placeholder:"http://localhost:3000"}),l.jsx("button",{onClick:N,className:"px-4 py-3 bg-neutral-900 text-white rounded-xl font-bold text-sm flex items-center gap-2 hover:bg-neutral-800 shadow-lg active:scale-95",children:l.jsx(_y,{size:16})})]})]}),l.jsx("div",{className:"grid grid-cols-2 gap-3 pt-2",children:l.jsxs("button",{onClick:O,className:"col-span-2 py-3 bg-white border border-neutral-200 text-neutral-600 rounded-xl font-bold text-xs flex items-center justify-center gap-2 hover:bg-neutral-50 hover:text-neutral-900 transition-colors",children:[l.jsx(hE,{size:14}),l.jsx("span",{children:"Auto-Scan Network"})]})}),l.jsxs("div",{className:"p-4 bg-amber-50 border border-amber-100 rounded-2xl flex flex-col gap-3",children:[l.jsxs("div",{className:"flex gap-3",children:[l.jsx(xE,{size:20,className:"text-amber-600 shrink-0 mt-0.5"}),l.jsxs("div",{className:"space-y-1",children:[l.jsx("h4",{className:"text-xs font-black text-amber-800 uppercase tracking-wide",children:"HTTPS Security"}),l.jsx("p",{className:"text-[10px] text-amber-700 leading-relaxed font-medium",children:"If the URL is correct but connection fails, your browser blocked it."})]})]}),l.jsxs("button",{onClick:w,className:"w-full py-2 bg-amber-100 text-amber-800 rounded-lg font-bold text-xs flex items-center justify-center gap-2 hover:bg-amber-200 transition-colors",children:[l.jsx(xy,{size:12}),l.jsx("span",{children:"Open & Trust Certificate"})]})]})]}),h==="success"&&l.jsx("div",{className:"text-center py-4",children:l.jsx("p",{className:"text-green-600 font-bold text-lg animate-bounce",children:"Ready to go!"})})]}),h==="failed"&&l.jsx("div",{className:"p-4 border-t border-neutral-100 bg-neutral-50 flex justify-center",children:l.jsxs("button",{onClick:r,className:"text-xs font-bold text-neutral-400 hover:text-neutral-600 flex items-center gap-1 transition-colors",children:[l.jsx(Ut,{size:14})," Continue Offline"]})})]}),l.jsx("style",{children:`
                @keyframes progress-indeterminate {
                    0% { width: 30%; transform: translateX(-100%); }
                    50% { width: 30%; transform: translateX(150%); }
                    100% { width: 30%; transform: translateX(350%); }
                }
                .animate-progress-indeterminate {
                    animation: progress-indeterminate 1.5s infinite linear;
                }
            `})]})},c_=({isOpen:n,onClose:r,onPush:i,onRestore:o,type:f,localDate:d,serverDate:p,isProcessing:g})=>{if(!n)return null;const h=f==="restore";return l.jsx("div",{className:"fixed inset-0 z-[10000] flex items-center justify-center p-4 bg-neutral-900/80 backdrop-blur-sm animate-in fade-in duration-300",children:l.jsxs("div",{className:"bg-white w-full max-w-md rounded-[2.5rem] shadow-2xl border border-neutral-200 overflow-hidden flex flex-col animate-in zoom-in-95 duration-300",children:[l.jsxs("div",{className:`p-8 text-center space-y-4 ${h?"bg-indigo-50":"bg-emerald-50"}`,children:[l.jsxs("div",{className:"mx-auto w-20 h-20 bg-white rounded-full flex items-center justify-center shadow-sm relative",children:[h?l.jsx(ag,{size:40,className:"text-indigo-500"}):l.jsx(ng,{size:40,className:"text-emerald-500"}),l.jsx("div",{className:"absolute -top-1 -right-1 bg-amber-500 rounded-full p-1 border-2 border-white",children:l.jsx(ic,{size:12,className:"text-white"})})]}),l.jsxs("div",{className:"space-y-1",children:[l.jsx("h3",{className:"text-2xl font-black text-neutral-900 tracking-tight",children:h?"Update Available":"Unsaved Progress"}),l.jsx("p",{className:"text-sm font-medium text-neutral-500",children:h?"The server has a newer version of your data.":"Your local data is newer than the cloud backup."})]})]}),l.jsxs("div",{className:"p-8 space-y-6",children:[l.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[l.jsxs("div",{className:"space-y-1 p-3 bg-neutral-50 rounded-2xl border border-neutral-100",children:[l.jsx("p",{className:"text-[9px] font-black uppercase text-neutral-400 tracking-widest",children:"Local Device"}),l.jsx("p",{className:"text-xs font-bold text-neutral-700",children:d})]}),l.jsxs("div",{className:"space-y-1 p-3 bg-neutral-50 rounded-2xl border border-neutral-100",children:[l.jsx("p",{className:"text-[9px] font-black uppercase text-neutral-400 tracking-widest",children:"Cloud Server"}),l.jsx("p",{className:"text-xs font-bold text-neutral-700",children:p})]})]}),l.jsxs("div",{className:"space-y-3",children:[l.jsxs("button",{onClick:h?o:i,disabled:g,className:`w-full py-4 rounded-2xl font-black text-sm transition-all shadow-lg active:scale-95 flex items-center justify-center space-x-2 ${h?"bg-indigo-600 text-white hover:bg-indigo-700 shadow-indigo-200":"bg-emerald-600 text-white hover:bg-emerald-700 shadow-emerald-200"}`,children:[g?l.jsx(At,{size:18,className:"animate-spin"}):h?l.jsx(ag,{size:18}):l.jsx(ng,{size:18}),l.jsx("span",{children:h?"RESTORE FROM CLOUD":"PUSH TO CLOUD"})]}),l.jsx("button",{onClick:r,disabled:g,className:"w-full py-4 bg-neutral-100 text-neutral-500 rounded-2xl font-bold text-sm hover:bg-neutral-200 transition-all",children:"Ignore for now"})]})]}),l.jsx("div",{className:"bg-neutral-50 px-8 py-4 border-t border-neutral-100",children:l.jsx("p",{className:"text-[9px] font-medium text-neutral-400 text-center leading-relaxed",children:"Automatic synchronization helps keep your library consistent across all your devices."})})]})})},u_=Kt.lazy(()=>pa(()=>import("./Dashboard-CuvtDFYM.js"),__vite__mapDeps([0,1,2,3,4]))),d_=Kt.lazy(()=>pa(()=>import("./ReviewSession-Bbe0owNa.js"),__vite__mapDeps([5,6]))),f_=Kt.lazy(()=>pa(()=>import("./WordList-BoNacI-5.js"),__vite__mapDeps([7,8,9,10,11,12,13,14,15]))),p_=Kt.lazy(()=>pa(()=>import("./ReadingUnitPage-BHVT5uQ-.js"),__vite__mapDeps([16,8,9,10,11,12,13,14,15,17,18,19,20,21,22,23,1,24])).then(n=>({default:n.ReadingUnitPage}))),h_=Kt.lazy(()=>pa(()=>import("./SettingsView-C7EoqSY2.js"),__vite__mapDeps([25,26,27,23,9,10,11,12,13,14,15])).then(n=>({default:n.SettingsView}))),m_=Kt.lazy(()=>pa(()=>import("./Discover-DPznAvib.js"),__vite__mapDeps([28,26,27,6,15,4,3,29,12,14,23]))),g_=Kt.lazy(()=>pa(()=>import("./WritingStudioPage-OOL8f9ow.js"),__vite__mapDeps([30,18,15,11,14,31,10,19,20,21])).then(n=>({default:n.WritingStudioPage}))),x_=Kt.lazy(()=>pa(()=>import("./IrregularVerbs-C0QMf4f9.js"),__vite__mapDeps([32,2,15,14,33,31]))),y_=Kt.lazy(()=>pa(()=>import("./MimicPractice-Bljw9ybC.js"),__vite__mapDeps([34,35,15])).then(n=>({default:n.MimicPractice}))),b_=Kt.lazy(()=>pa(()=>import("./LessonLibraryV2-DBOo5flZ.js"),__vite__mapDeps([36,18,15,11,10,21,3,37,19,20,29])).then(n=>({default:n.LessonLibraryV2}))),v_=Kt.lazy(()=>pa(()=>import("./PlanningPage-PKa9bPoq.js"),__vite__mapDeps([38,18,15,11,21,22,23,1,24,39])).then(n=>({default:n.PlanningPage}))),S_=Kt.lazy(()=>pa(()=>import("./SpeakingCardPage-D2-TFfpb.js"),__vite__mapDeps([40,18,15,11,10,19,20,21,22,23,1,24,39,37,29,35,13])).then(n=>({default:n.SpeakingCardPage}))),E_=Kt.lazy(()=>pa(()=>import("./WordBookPage-D01OU5u-.js"),__vite__mapDeps([41,21,15,20,27,33])).then(n=>({default:n.WordBookPage}))),w_=Kt.lazy(()=>pa(()=>import("./CourseList-D7NtCFV2.js"),__vite__mapDeps([42,15,17,24])).then(n=>({default:n.CourseList}))),N_=[{id:"DASHBOARD",view:"DASHBOARD",icon:"https://raw.githubusercontent.com/Tarikul-Islam-Anik/Animated-Fluent-Emojis/master/Emojis/Objects/Mobile%20Phone.png",label:"Dashboard"},{id:"BROWSE",view:"BROWSE",icon:"https://raw.githubusercontent.com/Tarikul-Islam-Anik/Animated-Fluent-Emojis/master/Emojis/Objects/Books.png",label:"Word Library"},{id:"LESSON",view:"LESSON",icon:"https://raw.githubusercontent.com/Tarikul-Islam-Anik/Animated-Fluent-Emojis/master/Emojis/Objects/Notebook.png",label:"Knowledge Library"},{id:"COURSE",view:"COURSE",icon:"https://raw.githubusercontent.com/Tarikul-Islam-Anik/Animated-Fluent-Emojis/master/Emojis/Objects/Graduation%20Cap.png",label:"Course"},{id:"UNIT_LIBRARY",view:"UNIT_LIBRARY",icon:"https://raw.githubusercontent.com/Tarikul-Islam-Anik/Animated-Fluent-Emojis/master/Emojis/Objects/Open%20Book.png",label:"Reading"},{id:"SPEAKING",view:"SPEAKING",icon:"https://raw.githubusercontent.com/Tarikul-Islam-Anik/Animated-Fluent-Emojis/master/Emojis/Objects/Microphone.png",label:"Speaking - Listening"},{id:"WRITING",view:"WRITING",icon:"https://raw.githubusercontent.com/Tarikul-Islam-Anik/Animated-Fluent-Emojis/master/Emojis/Objects/Memo.png",label:"Writing"}],__=({controller:n,onNavigate:r,onSwitchUser:i})=>{const{currentUser:o,view:f,setView:d,sessionType:p,isSidebarOpen:g,setIsSidebarOpen:h,forceExpandAdd:m,serverStatus:y,handleBackup:v,hasUnsavedChanges:w,nextAutoBackupTime:N,triggerServerBackup:O}=n,[I,_]=E.useState(0);E.useEffect(()=>{if(!N){_(0);return}const L=setInterval(()=>{const M=Date.now(),P=N-M,Y=Math.ceil(P/1e3);_(Math.max(0,Y)),Y<=0&&clearInterval(L)},1e3),D=N-Date.now();return _(Math.max(0,Math.ceil(D/1e3))),()=>clearInterval(L)},[N,y,O,w]);const j=N?`Auto-sync in ${I}s...`:w?"Unsaved Changes - Sync Now":"Sync to Server";return o?l.jsx(l.Fragment,{children:l.jsxs("aside",{className:`fixed md:relative inset-y-0 left-0 z-50 w-64 bg-white border-r border-neutral-200 transform ${g?"translate-x-0":"-translate-x-full"} md:translate-x-0 transition-transform duration-300 ease-in-out flex flex-col p-6`,children:[l.jsxs("div",{className:"mb-6",children:[l.jsxs("div",{className:"flex items-center justify-between gap-2",children:[l.jsxs("div",{className:"flex items-center space-x-3 overflow-hidden flex-1",children:[l.jsx("img",{src:o.avatar,className:"w-10 h-10 rounded-2xl bg-neutral-100 shrink-0"}),l.jsxs("div",{className:"flex-1 overflow-hidden",children:[l.jsx("div",{className:"text-sm font-bold text-neutral-900 truncate",children:o.name}),l.jsx("div",{className:"text-[10px] text-neutral-400 font-bold truncate",children:o.role})]})]}),l.jsxs("div",{className:"flex items-center gap-1",children:[l.jsx("button",{onClick:i,className:"p-2 rounded-full border-2 border-indigo-100 bg-white text-indigo-500 hover:border-indigo-500 hover:text-indigo-600 hover:bg-indigo-50 transition-all shadow-sm",title:"Switch User",children:l.jsx(Oy,{size:16})}),l.jsx("button",{onClick:()=>h(!1),className:"md:hidden p-2 text-neutral-400",children:l.jsx(Ut,{size:24})})]})]}),l.jsxs("div",{className:"mt-4 flex items-center space-x-2",children:[l.jsx("button",{onClick:()=>r("SETTINGS"),className:"p-2 bg-neutral-50 hover:bg-neutral-100 rounded-xl transition-all active:scale-90 border border-neutral-100",title:"Settings",children:l.jsx("img",{src:"https://raw.githubusercontent.com/Tarikul-Islam-Anik/Animated-Fluent-Emojis/master/Emojis/Objects/Gear.png",alt:"Settings",className:"w-6 h-6 object-contain"})}),l.jsx("button",{onClick:()=>r("PLANNING"),className:"p-2 bg-neutral-50 hover:bg-neutral-100 rounded-xl transition-all active:scale-90 border border-neutral-100",title:"Study Plan",children:l.jsx("img",{src:"https://raw.githubusercontent.com/Tarikul-Islam-Anik/Animated-Fluent-Emojis/master/Emojis/Objects/Spiral%20Calendar.png",alt:"Planning",className:"w-6 h-6 object-contain"})}),l.jsx("button",{onClick:()=>r("DISCOVER"),className:"p-2 bg-neutral-50 hover:bg-neutral-100 rounded-xl transition-all active:scale-90 border border-neutral-100",title:"Games & Discover",children:l.jsx("img",{src:"https://raw.githubusercontent.com/Tarikul-Islam-Anik/Animated-Fluent-Emojis/master/Emojis/Activities/Video%20Game.png",alt:"Games",className:"w-6 h-6 object-contain"})}),y==="connected"&&l.jsxs("button",{onClick:()=>v(),className:`p-2 rounded-xl transition-all active:scale-90 border animate-in fade-in relative ${w?"bg-orange-50 border-orange-200 shadow-[0_0_10px_rgba(249,115,22,0.4)]":"bg-neutral-50 border-neutral-100 hover:bg-neutral-100"}`,title:j,children:[l.jsx("img",{src:"https://raw.githubusercontent.com/Tarikul-Islam-Anik/Animated-Fluent-Emojis/master/Emojis/Symbols/Up%20Arrow.png",alt:"Sync",className:"w-6 h-6 object-contain"}),w&&l.jsx("span",{className:`absolute top-0 right-0 w-2.5 h-2.5 rounded-full border-2 border-white -mt-1 -mr-1 ${N?"bg-green-400":"bg-orange-500 animate-pulse"}`})]})]})]}),l.jsxs("nav",{className:"flex-1 overflow-y-auto space-y-1",children:[p&&f!=="REVIEW"&&l.jsx("div",{className:"relative group animate-in fade-in duration-300 mb-1",children:l.jsxs("button",{onClick:()=>r("REVIEW"),className:"w-full flex items-center justify-between px-4 py-3 rounded-xl font-bold text-sm bg-green-500 text-white shadow-lg shadow-green-500/20",children:[l.jsxs("div",{className:"flex items-center space-x-3",children:[l.jsx(PS,{size:20}),l.jsx("span",{children:"Study Now"})]}),l.jsxs("div",{className:"relative flex h-3 w-3",children:[l.jsx("span",{className:"animate-ping absolute inline-flex h-full w-full rounded-full bg-white opacity-75"}),l.jsx("span",{className:"relative inline-flex rounded-full h-3 w-3 bg-white"})]})]})}),N_.map(L=>{const D=f===L.view&&(L.id!=="BROWSE"||!m),M=L.id==="SPEAKING"&&f==="SPEAKING";return l.jsx("div",{className:"relative group",children:l.jsx("button",{onClick:()=>r(L.view),className:`w-full flex items-center justify-between px-4 py-3 rounded-xl font-bold text-sm transition-colors ${D||M?"bg-neutral-900 text-white shadow-sm":"text-neutral-500 hover:bg-neutral-100"}`,children:l.jsxs("div",{className:"flex items-center space-x-3",children:[typeof L.icon=="string"?l.jsx("img",{src:L.icon,className:`w-5 h-5 object-contain transition-all ${D||M?"opacity-100":"opacity-70 group-hover:opacity-100"}`,alt:L.label}):l.jsx(L.icon,{size:20}),l.jsx("span",{children:L.label})]})})},L.id)})]})]})}):null},A_=({controller:n})=>{const{view:r,currentUser:i,stats:o,xpToNextLevel:f,wotd:d,setGlobalViewWord:p,setView:g,lastBackupTime:h,handleBackup:m,restoreFromServerAction:y,triggerLocalRestore:v,triggerLocalBackup:w,triggerServerBackup:N,handleNavigateToList:O,sessionWords:I,sessionType:_,sessionFocus:j,updateWord:L,bulkUpdateWords:D,handleSessionComplete:M,gainExperienceAndLevelUp:P,recalculateXpAndLevelUp:Y,handleRetrySession:U,deleteWord:G,bulkDeleteWords:A,startSession:V,initialListFilter:F,setInitialListFilter:$,forceExpandAdd:ae,setForceExpandAdd:me,handleUpdateUser:fe,refreshGlobalStats:C,handleLibraryReset:ne,apiUsage:te,xpGained:q,lastMasteryScoreUpdateTimestamp:z,isWotdComposed:b,randomizeWotd:T,handleComposeWithWord:k,writingContextWord:Q,consumeWritingContext:ue,serverStatus:ie,planningAction:he,consumePlanningAction:B,targetGameMode:le,consumeTargetGameMode:J,targetCourseId:ee,consumeTargetCourseId:ye}=n;if(!i)return null;switch(r){case"DASHBOARD":return l.jsx(u_,{userId:i.id,user:i,totalCount:o.total,dueCount:o.due,newCount:o.new,xpToNextLevel:f,wotd:d,onViewWotd:p,setView:g,lastBackupTime:h,onBackup:m,onRestore:()=>{},restoreFromServerAction:async()=>await y(),triggerLocalRestore:v,onLocalBackup:w,onServerBackup:N,onNavigateToWordList:O,isWotdComposed:b,onComposeWotd:k,onRandomizeWotd:T,serverStatus:ie,onAction:ve=>{n.handleSpecialAction(ve)},onStartDueReview:n.startDueReviewSession,onStartNewLearn:n.startNewLearnSession});case"WORDBOOK":return l.jsx(E_,{user:i});case"PLANNING":return l.jsx(v_,{user:i,initialAction:he,onActionConsumed:B});case"REVIEW":return I&&_?l.jsx(d_,{user:i,sessionWords:I,sessionType:_,sessionFocus:j,onUpdate:L,onBulkUpdate:D,onComplete:M,onRetry:U}):null;case"BROWSE":return l.jsx(f_,{user:i,onDelete:async ve=>await G(ve),onBulkDelete:async ve=>await A(ve),onUpdate:L,onStartSession:ve=>V(ve,"custom"),initialFilter:F,onInitialFilterApplied:()=>$(null),forceExpandAdd:ae,onExpandAddConsumed:()=>me(!1),onNavigate:g});case"LESSON":return l.jsx(b_,{user:i,onStartSession:ve=>V(ve,"custom"),onExit:()=>g("DASHBOARD"),onNavigate:g,onUpdateUser:fe,initialLessonId:n.targetLessonId,onConsumeLessonId:n.consumeTargetLessonId,initialTag:n.targetLessonTag,onConsumeTag:n.consumeTargetLessonTag,initialType:n.targetLessonType,onConsumeType:n.consumeTargetLessonType});case"COURSE":return l.jsx(w_,{initialCourseId:ee,onConsumeInitialCourseId:ye});case"UNIT_LIBRARY":return l.jsx(p_,{user:i,onStartSession:ve=>V(ve,"new_study"),onUpdateUser:fe});case"SETTINGS":return l.jsx(h_,{user:i,onUpdateUser:fe,onRefresh:C,onNuke:ne,apiUsage:te});case"DISCOVER":return l.jsx(m_,{user:i,xpToNextLevel:f,totalWords:o.total,onExit:()=>g("DASHBOARD"),onGainXp:P,onRecalculateXp:Y,xpGained:q,onStartSession:V,onUpdateUser:fe,lastMasteryScoreUpdateTimestamp:z,onBulkUpdate:D,initialGameMode:le,onConsumeGameMode:J});case"SPEAKING":return l.jsx(S_,{user:i,onNavigate:g});case"WRITING":return l.jsx(g_,{controller:n,user:i,initialContextWord:Q,onConsumeContext:ue});case"IRREGULAR_VERBS":return l.jsx(x_,{user:i,onGlobalViewWord:p});case"MIMIC":return l.jsx(y_,{});default:return l.jsxs("div",{children:["Unknown view: ",r]})}},T_=({controller:n})=>{const{view:r,isSidebarOpen:i,setIsSidebarOpen:o,globalViewWord:f,setGlobalViewWord:d,updateWord:p,gainExperienceAndLevelUp:g,sessionType:h,clearSessionState:m,setView:y,setForceExpandAdd:v,currentUser:w,stats:N,lastBackupTime:O,isAutoRestoreOpen:I,setIsAutoRestoreOpen:_,autoRestoreCandidates:j,restoreFromServerAction:L,handleNewUserSetup:D,handleLocalRestoreSetup:M,handleSwitchUser:P,isConnectionModalOpen:Y,setIsConnectionModalOpen:U,connectionScanStatus:G,handleScanAndConnect:A,handleStopScan:V,syncPrompt:F,setSyncPrompt:$,isSyncing:ae,handleSyncPush:me,handleSyncRestore:fe}=n,[C,ne]=E.useState(null),[te,q]=E.useState({isOpen:!1,targetView:null,andThen:void 0}),[z,b]=E.useState({isOpen:!1,targetView:null,action:void 0}),T=(le,J)=>{if(n.hasWritingUnsavedChanges){b({isOpen:!0,targetView:le,action:J});return}h&&le!=="REVIEW"?q({isOpen:!0,targetView:le,andThen:J}):(v(!!J),y(le),o(!1))},k=()=>{te.targetView?(m(),y(te.targetView),te.andThen?te.andThen():v(!1),o(!1)):te.andThen&&(m(),te.andThen()),q({isOpen:!1,targetView:null,andThen:void 0})},Q=()=>q({isOpen:!1,targetView:null,andThen:void 0}),ue=le=>{d(null),ne(le)},ie=le=>{p(le),ne(null)},[he,B]=E.useState(!1);return l.jsxs("div",{className:"min-h-screen bg-neutral-50 md:flex",children:[l.jsx(__,{controller:n,onNavigate:T,onSwitchUser:P}),l.jsx("div",{className:`fixed inset-0 bg-black/30 z-40 md:hidden ${i?"block":"hidden"}`,onClick:()=>o(!1)}),l.jsxs("main",{className:`flex-1 overflow-y-auto relative ${r==="MIMIC"?"p-0":"p-6 md:p-10"}`,children:[l.jsx("button",{onClick:()=>o(!0),className:"md:hidden fixed top-4 left-4 p-2 bg-white/80 backdrop-blur-sm rounded-full shadow-md z-30",children:l.jsx(oE,{size:24})}),l.jsx(E.Suspense,{fallback:l.jsx("div",{className:"flex justify-center p-20",children:l.jsx(At,{className:"animate-spin text-neutral-300",size:32})}),children:l.jsx(A_,{controller:n})})]}),w&&l.jsx(r_,{user:w,stats:N,currentView:r,lastBackupTime:O,onNavigate:n.handleSpecialAction,onViewWord:d,isAnyModalOpen:!!f||!!C}),f&&l.jsx(G2,{word:f,onClose:()=>d(null),onNavigateToWord:d,onEditRequest:ue,onUpdate:p,onGainXp:g}),C&&l.jsx(qw,{user:n.currentUser,word:C,onSave:ie,onClose:()=>ne(null),onSwitchToView:le=>{ne(null),d(le)}}),l.jsx(_g,{isOpen:te.isOpen,title:"End Current Session?",message:"Navigating away will end your current study session. Are you sure you want to continue?",confirmText:"End Session",isProcessing:!1,onConfirm:k,onClose:Q,icon:l.jsx(ic,{size:40,className:"text-orange-50"}),confirmButtonClass:"bg-orange-600 text-white hover:bg-orange-700 shadow-orange-200"}),l.jsx(_g,{isOpen:z.isOpen,title:"Unsaved Writing Changes",message:"You have unsaved writing changes. Leave without saving?",confirmText:"Leave",isProcessing:!1,confirmButtonClass:"bg-red-600 text-white hover:bg-red-700 shadow-red-200",onConfirm:()=>{z.targetView&&(n.setHasWritingUnsavedChanges(!1),z.action?z.action():v(!1),y(z.targetView),o(!1)),b({isOpen:!1,targetView:null,action:void 0})},onClose:()=>b({isOpen:!1,targetView:null,action:void 0})}),l.jsx(i_,{isOpen:I,onClose:()=>_(!1),backups:j,onRestore:le=>{B(!0),L(le).finally(()=>B(!1))},isRestoring:he,title:"User Selection",description:"We found existing profiles on the server. Select yours to restore.",onNewUser:D,onLocalRestore:M}),l.jsx(o_,{isOpen:Y,onClose:()=>U(!1),onRetry:A,onStop:V,status:G,scanningUrl:n.scanningUrl}),F&&l.jsx(c_,{isOpen:F.isOpen,onClose:()=>$(null),onPush:me,onRestore:fe,type:F.type,localDate:F.localDate,serverDate:F.serverDate,isProcessing:ae})]})},j_=()=>l.jsx("div",{className:"fixed inset-0 z-[9999] flex items-center justify-center p-4 bg-neutral-950/90 backdrop-blur-md animate-in fade-in duration-500",children:l.jsxs("div",{className:"bg-white w-full max-w-md rounded-[3rem] shadow-2xl border-2 border-neutral-100 overflow-hidden animate-in zoom-in-95 duration-500",children:[l.jsxs("div",{className:"bg-neutral-900 p-8 text-white text-center space-y-4",children:[l.jsxs("div",{className:"mx-auto w-20 h-20 bg-white/10 rounded-full flex items-center justify-center border-4 border-white/20 mb-2 relative",children:[l.jsx(XS,{size:40,className:"animate-pulse"}),l.jsx("div",{className:"absolute -top-1 -right-1 bg-red-500 rounded-full p-1 border-2 border-neutral-900",children:l.jsx(Kn,{size:14})})]}),l.jsx("h3",{className:"text-2xl font-black tracking-tighter uppercase",children:"Connection Lost"})]}),l.jsxs("div",{className:"p-10 text-center space-y-6",children:[l.jsxs("div",{className:"space-y-3",children:[l.jsx("p",{className:"text-lg font-black text-neutral-900 leading-tight",children:"Database link interrupted"}),l.jsxs("p",{className:"text-neutral-500 text-sm leading-relaxed font-medium",children:["The connection to your local storage was closed unexpectedly by the browser.",l.jsx("br",{}),l.jsx("br",{}),"Don't worry, ",l.jsx("strong",{children:"your data is safe"}),". Refreshing the application will restore the connection immediately."]})]}),l.jsxs("button",{onClick:()=>{localStorage.setItem("vocab_pro_auto_restore","true"),window.location.reload()},className:"w-full py-5 bg-neutral-900 text-white rounded-2xl font-black text-sm hover:bg-neutral-800 transition-all shadow-xl shadow-neutral-900/20 active:scale-95 flex items-center justify-center space-x-3",children:[l.jsx(ir,{size:20}),l.jsx("span",{children:"REFRESH APPLICATION"})]})]}),l.jsx("div",{className:"bg-neutral-50 px-8 py-4 flex items-center justify-center space-x-2 border-t border-neutral-100",children:l.jsx("span",{className:"text-[10px] font-black text-neutral-400 uppercase tracking-widest",children:"Safe Persistent Storage"})})]})}),I_=()=>{const n=Ow(),{isLoaded:r,isResetting:i,resetStep:o,view:f,currentUser:d,handleLogin:p}=n,[g,h]=E.useState(!1);return E.useEffect(()=>{Ry();const m=()=>h(!0);return window.addEventListener("db-connection-lost",m),()=>window.removeEventListener("db-connection-lost",m)},[]),g?l.jsx(j_,{}):r?i?l.jsxs("div",{className:"h-screen w-screen flex flex-col items-center justify-center bg-white space-y-4",children:[l.jsx(At,{size:40,className:"text-neutral-900 animate-spin"}),l.jsx("p",{className:"text-sm font-bold text-neutral-500",children:o})]}):f==="AUTH"||!d?l.jsx(qE,{onLogin:p}):l.jsx(T_,{controller:n}):l.jsxs("div",{className:"h-screen w-screen flex flex-col items-center justify-center bg-white space-y-4",children:[l.jsx(or,{size:40,className:"text-neutral-900"}),l.jsx("p",{className:"text-sm font-bold text-neutral-500",children:"Vocab Pro"})]})},O_=()=>{const[n,r]=E.useState(0),i=E.useCallback(()=>{r(o=>o+1)},[]);return E.useEffect(()=>(window.addEventListener("vocab-pro-force-ui-reload",i),()=>window.removeEventListener("vocab-pro-force-ui-reload",i)),[i]),l.jsx(YE,{children:l.jsx(I_,{},n)})},bv=document.getElementById("root");if(!bv)throw new Error("Could not find root element to mount to");const C_=MS.createRoot(bv);C_.render(l.jsx(Kt.StrictMode,{children:l.jsx(O_,{})}));export{Ob as $,HS as A,PS as B,$S as C,At as D,Sa as E,tE as F,Sy as G,bi as H,fy as I,fi as J,on as K,_y as L,pl as M,G2 as N,qw as O,cE as P,WS as Q,fE as R,or as S,B2 as T,nE as U,cn as V,Cy as W,Ut as X,On as Y,oc as Z,Ni as _,ng as a,Ny as a$,wa as a0,Kf as a1,U_ as a2,Pw as a3,bw as a4,vf as a5,pt as a6,bn as a7,yn as a8,Rb as a9,_g as aA,wi as aB,G_ as aC,uw as aD,Bw as aE,Hw as aF,kw as aG,NE as aH,vy as aI,Oy as aJ,Mt as aK,qS as aL,wy as aM,$w as aN,Zw as aO,mi as aP,ic as aQ,ir as aR,Ay as aS,yy as aT,xE as aU,Qw as aV,ew as aW,Cb as aX,sg as aY,Cd as aZ,lc as a_,pw as aa,tA as ab,EE as ac,In as ad,aA as ae,Kt as af,Xf as ag,vi as ah,Xo as ai,Uy as aj,L_ as ak,M_ as al,k_ as am,z_ as an,D_ as ao,dc as ap,mw as aq,hw as ar,Ty as as,aE as at,Kn as au,Sf as av,cr as aw,RE as ax,Lf as ay,SE as az,py as b,Ey as b$,sc as b0,Rf as b1,BS as b2,rc as b3,cw as b4,by as b5,Iy as b6,lE as b7,vE as b8,hy as b9,uE as bA,lg as bB,Ng as bC,n0 as bD,a0 as bE,uf as bF,kf as bG,oE as bH,Jw as bI,Q_ as bJ,eA as bK,X_ as bL,J_ as bM,eE as bN,bE as bO,Wb as bP,q_ as bQ,JS as bR,$b as bS,e_ as bT,Fb as bU,Jl as bV,F_ as bW,V_ as bX,Y_ as bY,$_ as bZ,gy as b_,YS as ba,R_ as bb,hi as bc,rE as bd,Hb as be,VS as bf,s0 as bg,P_ as bh,W_ as bi,yg as bj,B_ as bk,LE as bl,Ei as bm,Z_ as bn,H_ as bo,K_ as bp,FS as bq,QS as br,ia as bs,Lw as bt,zE as bu,UE as bv,nA as bw,rb as bx,DE as by,df as bz,ge as c,hb as c0,mb as c1,BE as c2,my as d,jy as e,nc as f,Ko as g,yE as h,If as i,l as j,rt as k,Ff as l,uc as m,Yf as n,Hf as o,Gf as p,Pf as q,E as r,ME as s,Cs as t,Qf as u,Db as v,rr as w,nt as x,Cf as y,dy as z};
