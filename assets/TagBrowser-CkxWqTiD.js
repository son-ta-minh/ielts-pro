import{c as S,r as u,j as e,aZ as T,ak as L}from"./index-BG7yJco6.js";import{T as M}from"./tag-B3nmjah9.js";/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const W=S("FolderTree",[["path",{d:"M20 10a1 1 0 0 0 1-1V6a1 1 0 0 0-1-1h-2.5a1 1 0 0 1-.8-.4l-.9-1.2A1 1 0 0 0 15 3h-2a1 1 0 0 0-1 1v5a1 1 0 0 0 1 1Z",key:"hod4my"}],["path",{d:"M20 21a1 1 0 0 0 1-1v-3a1 1 0 0 0-1-1h-2.9a1 1 0 0 1-.88-.55l-.42-.85a1 1 0 0 0-.92-.6H13a1 1 0 0 0-1 1v5a1 1 0 0 0 1 1Z",key:"w4yl2u"}],["path",{d:"M3 5a2 2 0 0 0 2 2h3",key:"f2jnh7"}],["path",{d:"M3 3v13a2 2 0 0 0 2 2h3",key:"k8epm1"}]]),E=({node:n,selectedTag:m,onSelectTag:h,level:f,isSearchActive:b})=>{const[w,x]=u.useState(!0),l=m===n.path,v=n.children.length>0;return u.useEffect(()=>{b&&x(!0)},[b]),e.jsxs("div",{style:{paddingLeft:`${f*16}px`},children:[e.jsxs("div",{className:`flex items-center justify-between p-2 rounded-lg cursor-pointer transition-colors ${l?"bg-indigo-100":"hover:bg-neutral-100"}`,onClick:()=>h(n.path),children:[e.jsxs("div",{className:"flex items-center gap-2 min-w-0",children:[v?e.jsx("button",{onClick:d=>{d.stopPropagation(),x(!w)},className:"p-1 -ml-1 text-neutral-400 hover:text-neutral-800",children:e.jsx(L,{size:14,className:`transition-transform ${w?"rotate-90":""}`})}):e.jsx("div",{className:"w-6 h-6 shrink-0"}),e.jsx("span",{className:`font-bold text-sm truncate ${l?"text-indigo-800":"text-neutral-800"}`,children:n.name})]}),e.jsx("span",{className:`text-xs font-black px-2 py-0.5 rounded-md shrink-0 ${l?"bg-indigo-200 text-indigo-800":"bg-neutral-100 text-neutral-500"}`,children:n.unitCount})]}),w&&v&&e.jsx("div",{className:"mt-1",children:n.children.map(d=>e.jsx(E,{node:d,selectedTag:m,onSelectTag:h,level:f+1,isSearchActive:b},d.path))})]})},Z=({items:n,tagTree:m,selectedTag:h,onSelectTag:f,title:b="Browse",icon:w=e.jsx(M,{size:16}),forcedView:x})=>{const[l,v]=u.useState(""),[d,N]=u.useState("groups");u.useEffect(()=>{x&&N(x)},[x]);const y=u.useMemo(()=>{if(m)return m;if(!n)return[];const t={name:"root",path:"",children:new Map};n.forEach(a=>{const i=a.path??(a.tags||[]).find(g=>g.startsWith("/"));if(i&&i!=="/"){const g=i.startsWith("/")?i.substring(1).split("/"):i.split("/");let o=t,j="";g.forEach(p=>{j=`${j}/${p}`,o.children.has(p)||o.children.set(p,{name:p,path:j,children:new Map}),o=o.children.get(p)})}});const s=a=>{const i=Array.from(a.children.values()).map(s).sort((o,j)=>o.name.localeCompare(j.name)),g=n.filter(o=>(o.path??(o.tags||[]).find(p=>p.startsWith("/"))??"/").startsWith(a.path)).length;return{name:a.name,path:a.path,children:i,unitCount:g}},c=s(t).children,r=n.filter(a=>{const i=a.path??(a.tags||[]).find(o=>o.startsWith("/"));return!(i&&i!=="/")}).length;return r>0&&c.unshift({name:"Uncategorized",path:"Uncategorized",children:[],unitCount:r}),c},[n,m]),C=u.useMemo(()=>{if(!n)return[];const t=new Map;return n.forEach(s=>{(s.path!==void 0?s.tags||[]:(s.tags||[]).filter(r=>!r.startsWith("/"))).forEach(r=>{t.set(r,(t.get(r)||0)+1)})}),Array.from(t.entries()).map(([s,c])=>({name:s,count:c})).sort((s,c)=>s.name.localeCompare(c.name))},[n]),k=u.useMemo(()=>{if(!l)return y;const t=l.toLowerCase(),s=c=>c.map(r=>{const a=s(r.children);return r.name.toLowerCase().includes(t)||a.length>0?{...r,children:a}:null}).filter(r=>r!==null);return s(y)},[y,l]),$=u.useMemo(()=>{if(!l)return C;const t=l.toLowerCase();return C.filter(s=>s.name.toLowerCase().includes(t))},[C,l]),z=l.length>0,P=!!n;return e.jsxs("div",{className:"bg-white p-4 rounded-2xl border border-neutral-200 shadow-sm animate-in fade-in slide-in-from-top-2 space-y-4",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[e.jsxs("h4",{className:"text-sm font-bold flex items-center gap-2 shrink-0",children:[w," ",b]}),!x&&P&&e.jsxs("div",{className:"flex bg-neutral-100 p-1 rounded-xl w-full sm:w-auto",children:[e.jsxs("button",{onClick:()=>N("groups"),className:`flex-1 flex items-center justify-center gap-1.5 px-3 py-1.5 rounded-lg text-[10px] font-bold uppercase tracking-wider transition-all ${d==="groups"?"bg-white shadow-sm text-neutral-900":"text-neutral-500 hover:text-neutral-700"}`,children:[e.jsx(W,{size:12}),"Groups"]}),e.jsxs("button",{onClick:()=>N("tags"),className:`flex-1 flex items-center justify-center gap-1.5 px-3 py-1.5 rounded-lg text-[10px] font-bold uppercase tracking-wider transition-all ${d==="tags"?"bg-white shadow-sm text-neutral-900":"text-neutral-500 hover:text-neutral-700"}`,children:[e.jsx(M,{size:12}),"Tags"]})]}),h&&e.jsx("button",{onClick:()=>f(null),className:"text-xs font-bold text-indigo-600 hover:underline shrink-0",children:"Clear Filter"})]}),e.jsxs("div",{className:"relative w-full",children:[e.jsx(T,{size:14,className:"absolute left-3 top-1/2 -translate-y-1/2 text-neutral-400"}),e.jsx("input",{type:"text",value:l,onChange:t=>v(t.target.value),placeholder:"Search...",className:"w-full pl-8 pr-3 py-2 bg-neutral-50 border border-neutral-200 rounded-lg text-xs font-bold focus:outline-none focus:ring-2 focus:ring-neutral-900"})]}),e.jsx("div",{className:"space-y-1 max-h-64 overflow-y-auto pr-2 custom-scrollbar",children:d==="groups"?k.length>0?k.map(t=>e.jsx(E,{node:t,selectedTag:h,onSelectTag:s=>f(s),level:0,isSearchActive:z},t.path)):e.jsx("p",{className:"text-center text-xs text-neutral-400 p-4",children:"No groups found."}):$.length>0?$.map(t=>e.jsxs("div",{onClick:()=>f(t.name),className:`flex items-center justify-between p-2 rounded-lg cursor-pointer ${h===t.name?"bg-indigo-100":"hover:bg-neutral-100"}`,children:[e.jsx("span",{className:`font-bold text-sm ${h===t.name?"text-indigo-800":"text-neutral-800"}`,children:t.name}),e.jsx("span",{className:`text-xs font-black px-2 py-0.5 rounded-md ${h===t.name?"bg-indigo-200 text-indigo-800":"bg-neutral-100 text-neutral-500"}`,children:t.count})]},t.name)):e.jsx("p",{className:"text-center text-xs text-neutral-400 p-4",children:"No tags found."})})]})};export{W as F,Z as T};
