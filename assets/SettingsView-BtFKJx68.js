import{c as K,r as n,j as e,aH as le,P as se,aI as ee,aJ as Se,at as ie,a0 as oe,aK as be,aL as fe,V as Ae,G as ve,M as ne,aM as je,aN as Ee,aO as Ie,aP as re,aj as ye,b as ce,I as Le,K as Me,T as Te,aQ as we,aR as Re,H as xe,O as Ne,au as Pe,aS as _e,L as Ve,aT as ze,ay as Oe,ag as De,aU as Ue,aV as He,aW as Fe,J as ue,l as he,az as pe,aX as Be,e as $e,aY as Ge,aZ as We,v as Ke,a_ as Je,ad as Xe}from"./index-DlcwiDRU.js";import{A as Ce,S as Ye,T as qe}from"./AvatarSelectionModal-DxUYuDAI.js";import{P as Qe}from"./pause-DPlqZoqq.js";import{S as ke}from"./server-fCctYs-m.js";import{F as Ze}from"./folder-BcWbh4HZ.js";import{D as te}from"./WordTable_UI-DrTHdnTQ.js";import"./palette-Bi_kROLE.js";import"./TagBrowser-BwapqxhZ.js";import"./tag-DtA6u-TV.js";import"./square-check-big-DJ5FFBL3.js";import"./chevron-left-DFu9WfAr.js";/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const et=K("LayoutTemplate",[["rect",{width:"18",height:"7",x:"3",y:"3",rx:"1",key:"f1a2em"}],["rect",{width:"9",height:"7",x:"3",y:"14",rx:"1",key:"jqznyg"}],["rect",{width:"5",height:"7",x:"16",y:"14",rx:"1",key:"q5h2i8"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tt=K("School",[["path",{d:"M14 22v-4a2 2 0 1 0-4 0v4",key:"hhkicm"}],["path",{d:"m18 10 3.447 1.724a1 1 0 0 1 .553.894V20a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2v-7.382a1 1 0 0 1 .553-.894L6 10",key:"1xqip1"}],["path",{d:"M18 5v17",key:"1sw6gf"}],["path",{d:"m4 6 7.106-3.553a2 2 0 0 1 1.788 0L20 6",key:"9d2mlk"}],["path",{d:"M6 5v17",key:"1xfsm0"}],["circle",{cx:"12",cy:"9",r:"2",key:"1092wv"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const at=K("Scissors",[["circle",{cx:"6",cy:"6",r:"3",key:"1lh9wr"}],["path",{d:"M8.12 8.12 12 12",key:"1alkpv"}],["path",{d:"M20 4 8.12 15.88",key:"xgtan2"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["path",{d:"M14.8 14.8 20 20",key:"ptml3r"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const st=K("Table",[["path",{d:"M12 3v18",key:"108xh3"}],["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const me=K("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]),nt=["Vietnamese","Spanish","Chinese (Simplified)","Chinese (Traditional)","Japanese","Korean","French","German","Italian","Portuguese","Russian","Arabic","Hindi","Thai","Indonesian","Turkish"],rt=[{level:1,title:"Vocab Novice"},{level:5,title:"Word Apprentice"},{level:10,title:"Lexical Explorer"},{level:20,title:"Master Grammarian"},{level:30,title:"IELTS Wordsmith"},{level:50,title:"IELTS Luminary"}],lt=({profileData:t,onProfileChange:r,onAvatarChange:p,onSaveProfile:o})=>{const[d,g]=n.useState(!1),a=rt.some(x=>x.title===t.role),b={id:"settings-user",name:t.name,avatar:t.avatar,lastLogin:0,experience:0,level:100,peakLevel:100,adventure:{}};return e.jsxs("section",{className:"bg-white p-8 rounded-[2.5rem] border border-neutral-200 shadow-sm flex flex-col space-y-8",children:[e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:"p-3 bg-neutral-100 text-neutral-600 rounded-2xl",children:e.jsx(le,{size:24})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-black text-neutral-900",children:"Your Profile"}),e.jsx("p",{className:"text-xs text-neutral-400",children:"Identity and learning context."})]})]}),e.jsxs("div",{className:"flex flex-col md:flex-row items-center gap-6 p-4 bg-neutral-50 rounded-3xl border border-neutral-100",children:[e.jsxs("div",{className:"relative group shrink-0",children:[e.jsx("img",{src:t.avatar,alt:"Current Avatar",className:"w-24 h-24 rounded-2xl bg-white shadow-sm border-2 border-white object-contain"}),e.jsx("button",{onClick:()=>g(!0),className:"absolute inset-0 bg-black/40 rounded-2xl flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity text-white font-bold text-xs",children:"Change"}),e.jsx("button",{onClick:()=>g(!0),className:"absolute -bottom-2 -right-2 p-2 bg-neutral-900 text-white rounded-full shadow-md hover:scale-110 transition-transform",title:"Edit Avatar",children:e.jsx(se,{size:14})})]}),e.jsxs("div",{className:"flex-1 w-full md:w-auto",children:[e.jsx("label",{className:"block text-[10px] font-black text-neutral-400 uppercase tracking-widest px-1 mb-2",children:"Display Name"}),e.jsx("input",{name:"name",value:t.name,onChange:r,className:"w-full px-4 py-3 bg-white border border-neutral-200 rounded-xl font-bold text-lg focus:ring-2 focus:ring-neutral-900 outline-none",placeholder:"Enter your name"}),e.jsx("button",{onClick:()=>g(!0),className:"mt-2 text-xs font-bold text-indigo-600 hover:underline md:hidden",children:"Select Identity"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 pt-2",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-[10px] font-black text-neutral-400 uppercase tracking-widest px-1 mb-2",children:"Role / Title"}),e.jsx("input",{name:"role",value:t.role,onChange:r,placeholder:"e.g., Student",className:"w-full px-4 py-3 bg-neutral-50 border border-neutral-200 rounded-xl font-medium focus:ring-1 focus:ring-neutral-300 outline-none",readOnly:a})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-[10px] font-black text-neutral-400 uppercase tracking-widest px-1 mb-2",children:"Current Level"}),e.jsx("input",{name:"currentLevel",value:t.currentLevel,onChange:r,placeholder:"e.g., Intermediate, Advanced",className:"w-full px-4 py-3 bg-neutral-50 border border-neutral-200 rounded-xl font-medium focus:ring-1 focus:ring-neutral-300 outline-none"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-[10px] font-black text-neutral-400 uppercase tracking-widest px-1 mb-2",children:"Target"}),e.jsx("input",{name:"target",value:t.target,onChange:r,placeholder:"e.g., Fluent communication",className:"w-full px-4 py-3 bg-neutral-50 border border-neutral-200 rounded-xl font-medium focus:ring-1 focus:ring-neutral-300 outline-none"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-[10px] font-black text-neutral-400 uppercase tracking-widest px-1 mb-2 flex items-center gap-2",children:[e.jsx(ee,{size:12})," Native Language"]}),e.jsx("select",{name:"nativeLanguage",value:t.nativeLanguage,onChange:r,className:"w-full px-4 py-3 bg-neutral-50 border border-neutral-200 rounded-xl font-medium appearance-none focus:ring-1 focus:ring-neutral-300 outline-none",children:nt.map(x=>e.jsx("option",{value:x,children:x},x))})]})]})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:"p-3 bg-amber-50 text-amber-600 rounded-2xl",children:e.jsx(ee,{size:24})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-black text-neutral-900",children:"Lesson Preferences"}),e.jsx("p",{className:"text-xs text-neutral-400",children:"Settings for AI generated units in Lesson page"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 pt-4 border-t border-neutral-100",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-[10px] font-black text-neutral-400 uppercase tracking-widest px-1 mb-2 flex items-center gap-2",children:[e.jsx(ee,{size:12})," Content Language"]}),e.jsxs("select",{name:"lessonLanguage",value:t.lessonLanguage,onChange:r,className:"w-full px-4 py-3 bg-neutral-50 border border-neutral-200 rounded-xl font-medium appearance-none",children:[e.jsx("option",{value:"English",children:"English"}),e.jsx("option",{value:"Vietnamese",children:"Vietnamese"})]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-[10px] font-black text-neutral-400 uppercase tracking-widest px-1 mb-2 flex items-center gap-2",children:[e.jsx(Se,{size:12})," Target Audience"]}),e.jsxs("select",{name:"lessonAudience",value:t.lessonAudience,onChange:r,className:"w-full px-4 py-3 bg-neutral-50 border border-neutral-200 rounded-xl font-medium appearance-none",children:[e.jsx("option",{value:"Kid",children:"Kid"}),e.jsx("option",{value:"Adult",children:"Adult"})]})]})]})]}),e.jsxs("button",{onClick:o,className:"w-full py-4 bg-neutral-900 text-white rounded-2xl font-black text-xs hover:bg-neutral-800 transition-all flex items-center justify-center space-x-2",children:[e.jsx(ie,{size:16})," ",e.jsx("span",{children:"SAVE PROFILE"})]}),e.jsx(Ce,{isOpen:d,onClose:()=>g(!1),onSelectAvatar:p,currentUser:b})]})},ge=({label:t,langCode:r,currentVoice:p,serverData:o,onChange:d,onPreview:g,filterHighQuality:a})=>{if(!o)return e.jsxs("div",{className:"space-y-1 opacity-50",children:[e.jsx("label",{className:"text-[10px] font-black text-neutral-400 uppercase tracking-widest px-1",children:t}),e.jsx("div",{className:"w-full bg-neutral-100 border border-neutral-200 rounded-xl px-4 py-2 text-xs font-bold text-neutral-400",children:"Server Offline"})]});const b=o.voices.filter(l=>l.language===r||l.language.toLowerCase().startsWith(r)?a?l.name.includes("Enhanced")||l.name.includes("Premium"):!0:!1),x=b.reduce((l,y)=>{const u=y.accent||"Standard";return l[u]||(l[u]=[]),l[u].push(y),l},{}),L=l=>{const y=l.target.value;if(!y){const T=r==="en"?"en_US":"vi_VN";d("",T),g("",T);return}const u=o.voices.find(T=>T.name===y);u&&(d(u.name,u.accent),setTimeout(()=>g(u.name,u.accent),100))};return e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"flex justify-between items-center px-1",children:[e.jsx("label",{className:"text-[10px] font-black text-neutral-400 uppercase tracking-widest",children:t}),e.jsxs("button",{type:"button",onClick:()=>g(p,r==="en"?"en_US":"vi_VN"),className:"text-[10px] font-black text-indigo-600 uppercase tracking-widest flex items-center gap-1 hover:underline",children:[e.jsx(ye,{size:10,fill:"currentColor"})," Test"]})]}),e.jsxs("div",{className:"relative",children:[e.jsxs("select",{value:p,onChange:L,className:"w-full appearance-none bg-white border border-neutral-200 rounded-xl px-4 py-3 pr-10 text-xs font-bold focus:ring-2 focus:ring-neutral-900 outline-none transition-all",children:[e.jsx("option",{value:"",children:"Default System Voice"}),Object.entries(x).map(([l,y])=>e.jsx("optgroup",{label:l.replace(/[_]/g," ").toUpperCase(),children:y.map(u=>e.jsx("option",{value:u.name,children:u.name},u.name))},l)),b.length===0&&e.jsxs("option",{disabled:!0,children:["No ",a?"high quality ":"","voices found"]})]}),e.jsx(ce,{size:16,className:"absolute right-4 top-1/2 -translate-y-1/2 text-neutral-400 pointer-events-none"})]})]})},it=({config:t,onConfigChange:r,onSaveSettings:p})=>{const[o,d]=n.useState(null),[g,a]=n.useState(!1),[b,x]=n.useState(!1),{showToast:L}=oe(),l=be(t),y=t.audioCoach.activeCoach,u=t.audioCoach.coaches[y],T=async()=>{Ee();const c=await Ie(l);d(c||null)};n.useEffect(()=>{T()},[l]);const A=(c,f=!1)=>{const m={...t.audioCoach.coaches};if(m[y]={...m[y],...c},r("audioCoach","coaches",m),f){const v={...t,audioCoach:{...t.audioCoach,coaches:m}};re(v),L("Settings saved automatically.","success",1e3)}},z=c=>{r("interface","buddyVoiceEnabled",c);const f={...t,interface:{...t.interface,buddyVoiceEnabled:c}};re(f)},O=(c,f,m)=>{Le(c==="en"?"Hello! I am your study companion. Ready to learn?":"Xin chào! Mình là bạn đồng hành của bạn. Sẵn sàng chưa?",!0,c,f,m)},D={id:"coach-setup",name:u.name,avatar:u.avatar,level:999,peakLevel:999,experience:0,lastLogin:0,adventure:{}};return e.jsxs("section",{className:"bg-white p-8 rounded-[2.5rem] border border-neutral-200 shadow-sm flex flex-col space-y-8 animate-in fade-in duration-300",children:[e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:"p-3 bg-neutral-100 text-neutral-600 rounded-2xl",children:e.jsx(fe,{size:24})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-black text-neutral-900",children:"Audio Coach"}),e.jsx("p",{className:"text-xs text-neutral-400",children:"Customize your AI study companion."})]})]}),e.jsxs("button",{onClick:p,className:"px-5 py-2.5 bg-neutral-900 text-white rounded-xl font-black text-[10px] flex items-center space-x-2 active:scale-95 uppercase tracking-widest hover:bg-neutral-800 transition-all shadow-md",children:[e.jsx(ie,{size:14}),e.jsx("span",{children:"Save"})]})]}),e.jsx("div",{className:"space-y-4 pt-4 border-t border-neutral-100",children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center gap-2 text-[10px] font-black text-neutral-400 uppercase tracking-widest px-1",children:[e.jsx(Ae,{size:12})," Interaction"]}),e.jsxs("label",{onClick:()=>z(!t.interface.buddyVoiceEnabled),className:"flex items-center justify-between px-4 py-4 bg-white border border-neutral-200 rounded-2xl cursor-pointer hover:bg-neutral-50 transition-all shadow-sm group",children:[e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"text-sm font-black text-neutral-900",children:"Enable Dialogue"}),e.jsx("span",{className:"text-xs text-neutral-500 font-medium mt-0.5",children:"Read advice, tips, and greetings aloud"})]}),e.jsx("div",{className:`w-11 h-6 rounded-full transition-all flex items-center p-1 ${t.interface.buddyVoiceEnabled?"bg-indigo-600":"bg-neutral-200"}`,children:e.jsx("div",{className:`w-4 h-4 bg-white rounded-full shadow-md transition-transform duration-300 ${t.interface.buddyVoiceEnabled?"translate-x-5":"translate-x-0"}`})})]})]})}),e.jsxs("div",{className:"space-y-6 pt-4 border-t border-neutral-100",children:[e.jsx("div",{className:"flex items-center justify-between px-1",children:e.jsxs("label",{className:"text-[10px] font-black text-neutral-400 uppercase tracking-widest flex items-center gap-2",children:[e.jsx(le,{size:12})," Coach Identity"]})}),e.jsxs("div",{className:"flex flex-col md:flex-row gap-6",children:[e.jsx("div",{className:"shrink-0 flex justify-center md:justify-start",children:e.jsxs("div",{className:"relative group w-24 h-24",children:[e.jsxs("div",{className:"w-full h-full rounded-[2rem] bg-neutral-100 border-2 border-neutral-200 p-2 overflow-hidden shadow-sm relative",children:[e.jsx("img",{src:u.avatar,className:"w-full h-full object-contain",alt:"Coach Avatar"}),e.jsx("div",{onClick:()=>a(!0),className:"absolute inset-0 bg-black/10 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity cursor-pointer z-10",children:e.jsx("div",{className:"bg-white p-2 rounded-xl shadow-sm",children:e.jsx(se,{size:16,className:"text-neutral-900"})})})]}),e.jsx("button",{onClick:()=>a(!0),className:"absolute bottom-0 right-0 translate-x-1 translate-y-1 p-1.5 bg-neutral-900 text-white rounded-lg shadow-md hover:scale-110 transition-transform group-hover:opacity-0",title:"Change Avatar",children:e.jsx(se,{size:10})})]})}),e.jsxs("div",{className:"flex-1 space-y-4",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx("label",{className:"text-[10px] font-bold text-neutral-400 uppercase tracking-wider px-1",children:"Name"}),e.jsx("input",{type:"text",value:u.name,onChange:c=>A({name:c.target.value}),onBlur:()=>A({},!0),placeholder:"Coach Name",className:"w-full px-4 py-3 bg-neutral-50 border border-neutral-200 rounded-xl text-sm font-bold focus:ring-2 focus:ring-neutral-900 outline-none transition-all"})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("label",{className:"text-[10px] font-bold text-neutral-400 uppercase tracking-wider px-1",children:"Persona Style"}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("button",{type:"button",onClick:()=>A({persona:"friendly_elementary"},!0),className:`flex flex-col items-center justify-center gap-2 px-4 py-3 rounded-xl border-2 transition-all ${u.persona==="friendly_elementary"?"bg-amber-50 border-amber-200 text-amber-700":"bg-white border-neutral-100 text-neutral-400 hover:border-neutral-200"}`,children:[e.jsx(tt,{size:18}),e.jsx("span",{className:"text-[10px] font-black uppercase",children:"Teacher"})]}),e.jsxs("button",{type:"button",onClick:()=>A({persona:"professional_professor"},!0),className:`flex flex-col items-center justify-center gap-2 px-4 py-3 rounded-xl border-2 transition-all ${u.persona==="professional_professor"?"bg-indigo-50 border-indigo-200 text-indigo-700":"bg-white border-neutral-100 text-neutral-400 hover:border-neutral-200"}`,children:[e.jsx(ve,{size:18}),e.jsx("span",{className:"text-[10px] font-black uppercase",children:"Professor"})]})]})]})]})]})]}),e.jsxs("div",{className:"space-y-6 pt-4 border-t border-neutral-100",children:[e.jsxs("div",{className:"flex items-center justify-between px-1",children:[e.jsxs("div",{className:"flex items-center gap-2 text-[10px] font-black text-neutral-400 uppercase tracking-widest",children:[e.jsx(ne,{size:12})," Voice Settings"]}),e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer group select-none",children:[e.jsx("div",{className:`w-4 h-4 rounded border flex items-center justify-center transition-colors ${b?"bg-indigo-600 border-indigo-600":"bg-white border-neutral-300 group-hover:border-indigo-400"}`,children:b&&e.jsx(Ye,{size:10,className:"text-white",fill:"currentColor"})}),e.jsx("input",{type:"checkbox",className:"hidden",checked:b,onChange:c=>x(c.target.checked)}),e.jsx("span",{className:`text-[10px] font-bold transition-colors ${b?"text-indigo-700":"text-neutral-500"}`,children:"Only High Quality"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsx(ge,{label:"English Voice",langCode:"en",currentVoice:u.enVoice,serverData:o,onChange:(c,f)=>A({enVoice:c,enAccent:f},!0),onPreview:(c,f)=>O("en",c,f),filterHighQuality:b}),e.jsx(ge,{label:"Vietnamese Voice",langCode:"vi",currentVoice:u.viVoice,serverData:o,onChange:(c,f)=>A({viVoice:c,viAccent:f},!0),onPreview:(c,f)=>O("vi",c,f),filterHighQuality:b})]})]}),e.jsxs("div",{className:"p-4 bg-neutral-50 rounded-2xl border border-neutral-200 flex items-start gap-3",children:[e.jsx(je,{size:16,className:"text-neutral-400 mt-0.5 shrink-0"}),e.jsx("p",{className:"text-[10px] text-neutral-500 leading-relaxed font-medium",children:"Pronunciation practice uses your browser's built-in recognition engine for maximum compatibility and privacy. The selected voices above are used for reading text aloud."})]}),e.jsx(Ce,{isOpen:g,onClose:()=>a(!1),onSelectAvatar:c=>A({avatar:c},!0),currentUser:D})]})},ot=({srsConfig:t,onSrsConfigChange:r,onResetSrsConfig:p,onSaveSettings:o})=>e.jsxs("section",{className:"bg-white p-8 rounded-[2.5rem] border border-neutral-200 shadow-sm flex flex-col space-y-6",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:"p-3 bg-purple-50 text-purple-600 rounded-2xl",children:e.jsx(Me,{size:24})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-black text-neutral-900",children:"Spaced Repetition Algorithm"}),e.jsx("p",{className:"text-xs text-neutral-400",children:"Customize the learning intervals and multipliers."})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-x-6 gap-y-4 pt-4 border-t border-neutral-100",children:[e.jsx("div",{className:"col-span-2 text-[10px] font-black text-neutral-400 uppercase tracking-widest px-1",children:"Initial Intervals"}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-neutral-600 mb-1",children:"New word (Easy)"}),e.jsx("input",{type:"number",step:"1",min:"1",name:"initialEasy",value:t.initialEasy,onChange:r,className:"w-full px-4 py-2 bg-neutral-50 border border-neutral-200 rounded-xl font-bold"}),e.jsx("p",{className:"text-[9px] text-neutral-400 mt-1",children:"Next review in X days."})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-neutral-600 mb-1",children:"New word (Hard)"}),e.jsx("input",{type:"number",step:"1",min:"1",name:"initialHard",value:t.initialHard,onChange:r,className:"w-full px-4 py-2 bg-neutral-50 border border-neutral-200 rounded-xl font-bold"}),e.jsx("p",{className:"text-[9px] text-neutral-400 mt-1",children:"Next review in X days."})]}),e.jsx("div",{className:"col-span-2 text-[10px] font-black text-neutral-400 uppercase tracking-widest px-1 pt-2",children:"Interval Multipliers"}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-neutral-600 mb-1",children:"'Easy' after 'Easy'"}),e.jsx("input",{type:"number",step:"0.1",min:"1",name:"easyEasy",value:t.easyEasy,onChange:r,className:"w-full px-4 py-2 bg-neutral-50 border border-neutral-200 rounded-xl font-bold"}),e.jsx("p",{className:"text-[9px] text-neutral-400 mt-1",children:"Grows interval fastest (e.g., 2.5x)."})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-neutral-600 mb-1",children:"'Easy' after 'Hard'"}),e.jsx("input",{type:"number",step:"0.1",min:"1",name:"hardEasy",value:t.hardEasy,onChange:r,className:"w-full px-4 py-2 bg-neutral-50 border border-neutral-200 rounded-xl font-bold"}),e.jsx("p",{className:"text-[9px] text-neutral-400 mt-1",children:"Helps recover from a 'Hard' rating (e.g., 2.0x)."})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-neutral-600 mb-1",children:"'Hard' after 'Hard'"}),e.jsx("input",{type:"number",step:"0.1",min:"1",name:"hardHard",value:t.hardHard,onChange:r,className:"w-full px-4 py-2 bg-neutral-50 border border-neutral-200 rounded-xl font-bold"}),e.jsx("p",{className:"text-[9px] text-neutral-400 mt-1",children:"Slowly increases interval (e.g., 1.3x)."})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-neutral-600 mb-1",children:"'Hard' after 'Easy' (Penalty)"}),e.jsx("input",{type:"number",step:"0.1",max:"1",name:"easyHardPenalty",value:t.easyHardPenalty,onChange:r,className:"w-full px-4 py-2 bg-neutral-50 border border-neutral-200 rounded-xl font-bold"}),e.jsx("p",{className:"text-[9px] text-neutral-400 mt-1",children:"Reduces interval if you forget (e.g., 0.5x)."})]})]}),e.jsxs("div",{className:"flex gap-3 pt-4 border-t border-neutral-100",children:[e.jsx("button",{onClick:p,type:"button",className:"flex-1 py-3 bg-neutral-100 text-neutral-500 rounded-xl font-bold text-xs uppercase tracking-widest hover:bg-neutral-200 transition-all",children:"Reset Defaults"}),e.jsx("button",{onClick:o,type:"button",className:"flex-1 py-3 bg-neutral-900 text-white rounded-xl font-bold text-xs uppercase tracking-widest hover:bg-neutral-800 transition-all",children:"Save Settings"})]})]}),ct=({goalConfig:t,onGoalConfigChange:r,onSaveSettings:p})=>e.jsxs("section",{className:"bg-white p-8 rounded-[2.5rem] border border-neutral-200 shadow-sm flex flex-col space-y-6",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:"p-3 bg-green-50 text-green-600 rounded-2xl",children:e.jsx(Te,{size:24})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-black text-neutral-900",children:"Daily Goals"}),e.jsx("p",{className:"text-xs text-neutral-400",children:"Set your daily learning and review targets."})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-x-6 gap-y-4 pt-4 border-t border-neutral-100",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-neutral-600 mb-1",children:"Max New Words per Day"}),e.jsx("input",{type:"number",step:"1",min:"1",name:"max_learn_per_day",value:t.max_learn_per_day,onChange:r,className:"w-full px-4 py-2 bg-neutral-50 border border-neutral-200 rounded-xl font-bold"}),e.jsx("p",{className:"text-[9px] text-neutral-400 mt-1",children:"Target for learning new vocabulary."})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-neutral-600 mb-1",children:"Max Reviews per Day"}),e.jsx("input",{type:"number",step:"1",min:"1",name:"max_review_per_day",value:t.max_review_per_day,onChange:r,className:"w-full px-4 py-2 bg-neutral-50 border border-neutral-200 rounded-xl font-bold"}),e.jsx("p",{className:"text-[9px] text-neutral-400 mt-1",children:"Target for reviewing existing vocabulary."})]})]}),e.jsx("div",{className:"flex justify-end pt-4 border-t border-neutral-100",children:e.jsx("button",{onClick:p,className:"w-full md:w-auto py-3 px-6 bg-neutral-900 text-white rounded-2xl font-black text-xs hover:bg-neutral-800 transition-all flex items-center justify-center space-x-2",children:e.jsx("span",{children:"SAVE GOALS"})})})]}),dt=({onOpenClearProgressModal:t,onOpenNukeModal:r,isAdmin:p,onToggleAdmin:o})=>e.jsxs("section",{className:"bg-red-50 p-8 rounded-[2.5rem] border-2 border-red-100 shadow-sm flex flex-col space-y-6",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:"p-3 bg-red-100 text-red-600 rounded-2xl",children:e.jsx(we,{size:24})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-black text-red-900",children:"Danger Zone"}),e.jsx("p",{className:"text-xs text-red-500",children:"Actions in this zone are irreversible."})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("button",{onClick:o,className:`p-4 border-2 rounded-2xl text-left transition-colors group ${p?"bg-neutral-900 border-neutral-900":"bg-white border-red-100 hover:border-red-500"}`,children:[e.jsxs("div",{className:`font-black flex items-center gap-2 ${p?"text-white":"text-red-600"}`,children:[e.jsx(qe,{size:16}),p?"Disable Developer Mode":"Enable Developer Mode"]}),e.jsx("div",{className:`text-xs mt-1 ${p?"text-neutral-400":"text-neutral-500"}`,children:p?"Admin tools enabled in Discover.":"Unlocks cheat tools for testing."})]}),e.jsx("div",{className:"hidden md:block"})," ",e.jsxs("button",{onClick:t,className:"p-4 bg-white border-2 border-red-100 rounded-2xl text-left hover:border-red-500 transition-colors group",children:[e.jsx("div",{className:"font-black text-red-600",children:"Clear All Progress"}),e.jsx("div",{className:"text-xs text-neutral-500 mt-1",children:"Reset all SRS data, but keep your words."})]}),e.jsxs("button",{onClick:r,className:"p-4 bg-white border-2 border-red-100 rounded-2xl text-left hover:border-red-500 transition-colors group",children:[e.jsx("div",{className:"font-black text-red-600",children:"Reset Full Library"}),e.jsx("div",{className:"text-xs text-neutral-500 mt-1",children:"Delete ALL your data and restore the app to its initial state."})]})]})]}),xt=({audioBlob:t,onTrim:r,onCancel:p})=>{const o=n.useRef(null),[d,g]=n.useState(null),[a,b]=n.useState(null),[x,L]=n.useState(0),[l,y]=n.useState(1),[u,T]=n.useState(!1),A=n.useRef(null);n.useRef(0),n.useEffect(()=>((async()=>{const m=new(window.AudioContext||window.webkitAudioContext),v=await t.arrayBuffer(),S=await m.decodeAudioData(v);g(m),b(S),z(S,0,1)})(),()=>{d&&d.close()}),[t]);const z=(f,m,v)=>{const S=o.current;if(!S)return;const h=S.getContext("2d");if(!h)return;const N=S.width,w=S.height;h.clearRect(0,0,N,w);const M=f.getChannelData(0),P=Math.ceil(M.length/N),E=w/2;h.fillStyle="#e5e7eb",h.fillRect(0,0,N,w),h.fillStyle="#6366f1",h.beginPath();for(let I=0;I<N;I++){let V=1,F=-1;for(let B=0;B<P;B++){const H=M[I*P+B];H<V&&(V=H),H>F&&(F=H)}h.fillRect(I,(1+V)*E,1,Math.max(1,(F-V)*E))}h.fillStyle="rgba(0, 0, 0, 0.4)";const j=m*N,_=v*N;h.fillRect(0,0,j,w),h.fillRect(_,0,N-_,w),h.fillStyle="#ef4444",h.fillRect(j-2,0,4,w),h.fillRect(_-2,0,4,w)};n.useEffect(()=>{a&&z(a,x,l)},[x,l,a]);const O=()=>{var N;if(!d||!a)return;if(u){(N=A.current)==null||N.stop(),T(!1);return}const f=a.duration,m=f*x,S=f*l-m,h=d.createBufferSource();h.buffer=a,h.connect(d.destination),h.start(0,m,S),h.onended=()=>T(!1),A.current=h,T(!0)},D=async()=>{if(!d||!a)return;const{bufferToWav:f}=await Re(async()=>{const{bufferToWav:w}=await import("./index-DlcwiDRU.js").then(M=>M.bW);return{bufferToWav:w}},[]);a.duration;const m=Math.floor(x*a.length),v=Math.floor(l*a.length),S=v-m,h=d.createBuffer(a.numberOfChannels,S,a.sampleRate);for(let w=0;w<a.numberOfChannels;w++){const M=a.getChannelData(w);h.getChannelData(w).set(M.subarray(m,v))}const N=f(h);r(N)},c=f=>{const m=o.current;if(!m)return;const v=m.getBoundingClientRect(),S=f.clientX-v.left,h=Math.max(0,Math.min(1,S/v.width)),N=Math.abs(h-x),w=Math.abs(h-l),M=N<w,P=j=>{const _=j.clientX-v.left,I=Math.max(0,Math.min(1,_/v.width));M?L(Math.min(I,l-.05)):y(Math.max(I,x+.05))},E=()=>{window.removeEventListener("mousemove",P),window.removeEventListener("mouseup",E)};window.addEventListener("mousemove",P),window.addEventListener("mouseup",E)};return e.jsxs("div",{className:"flex flex-col gap-4 p-4 bg-white rounded-2xl border border-neutral-200",children:[e.jsx("div",{className:"relative h-24 bg-neutral-100 rounded-xl overflow-hidden cursor-pointer",onMouseDown:c,children:e.jsx("canvas",{ref:o,width:600,height:100,className:"w-full h-full"})}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("button",{onClick:O,className:"flex items-center gap-2 px-4 py-2 bg-neutral-900 text-white rounded-xl text-xs font-bold uppercase tracking-wider hover:bg-neutral-800 transition-all",children:[u?e.jsx(Qe,{size:14}):e.jsx(ye,{size:14}),u?"Stop":"Preview"]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:p,className:"px-4 py-2 text-neutral-500 hover:text-neutral-900 font-bold text-xs",children:"Cancel"}),e.jsxs("button",{onClick:D,className:"flex items-center gap-2 px-4 py-2 bg-indigo-600 text-white rounded-xl text-xs font-bold uppercase tracking-wider hover:bg-indigo-500 transition-all",children:[e.jsx(at,{size:14})," Trim & Use"]})]})]}),e.jsx("p",{className:"text-[10px] text-neutral-400 text-center",children:"Drag the red bars to trim audio."})]})},ut=["localhost","macm2.local","macm4.local"],ht=({config:t,onConfigChange:r,onSaveSettings:p})=>{const[o,d]=n.useState("checking"),[g,a]=n.useState(!1),[b,x]=n.useState({}),[L,l]=n.useState(""),[y,u]=n.useState(""),[T,A]=n.useState(!1),[z,O]=n.useState(!1),[D,c]=n.useState(null),[f,m]=n.useState(null),[v,S]=n.useState(""),[h,N]=n.useState(""),[w,M]=n.useState(!1),P=n.useRef(null),{showToast:E}=oe(),j=be(t),_=async()=>{A(!0);try{const s=await fetch(`${j}/api/audio/mappings`);s.ok&&x(await s.json())}catch(s){console.error("Failed to fetch mappings",s)}finally{A(!1)}},I=async()=>{d("checking");try{(await fetch(`${j}/api/health`)).ok?(d("connected"),a(!1),_()):(d("error"),a(!0))}catch{d("error"),a(!0)}};n.useEffect(()=>{I()},[j]),n.useEffect(()=>{o==="connected"&&!t.sync.autoBackupEnabled&&r("sync","autoBackupEnabled",!0)},[o]);const V=s=>{r("server",null,{...t.server,...s})},F=s=>{V({useCustomUrl:s.target.checked})},B=async()=>{if(!(!L||!y))try{const C=await(await fetch(`${j}/api/audio/mappings`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:L,path:y})})).json();C.success?(x(C.mappings),l(""),u(""),E("Mapping added!","success")):E(C.error||"Failed to add mapping","error")}catch{E("Connection error","error")}},H=async s=>{try{const R=await(await fetch(`${j}/api/audio/mappings/${encodeURIComponent(s)}`,{method:"DELETE"})).json();R.success&&x(R.mappings)}catch{E("Failed to delete","error")}},J=async()=>{await Fe(),O(!0),c(null),m(null)},X=async()=>{const s=await He();if(O(!1),s){const C=atob(s.base64),R=new Array(C.length);for(let $=0;$<C.length;$++)R[$]=C.charCodeAt($);const Q=new Uint8Array(R),W=new Blob([Q],{type:s.mimeType});c(W),m(W)}},Y=s=>{var R;const C=(R=s.target.files)==null?void 0:R[0];C&&(c(C),m(C),N(C.name))},q=async()=>{if(!f||!v||!h){E("Please select audio, target folder, and filename.","error");return}M(!0);const s=new FormData;s.append("mapName",v),s.append("filename",h),s.append("audio",f,h);try{const R=await(await fetch(`${j}/api/audio/upload`,{method:"POST",body:s})).json();R.success?(E("Audio uploaded successfully!","success"),c(null),m(null),N("")):E(R.error||"Upload failed","error")}catch{E("Upload error","error")}finally{M(!1)}};return e.jsxs("section",{className:"bg-white p-8 rounded-[2.5rem] border border-neutral-200 shadow-sm flex flex-col space-y-6 animate-in fade-in duration-300",children:[e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:"p-3 bg-neutral-100 text-neutral-600 rounded-2xl",children:e.jsx(ke,{size:24})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-black text-neutral-900",children:"Server & Connection"}),e.jsx("p",{className:"text-xs text-neutral-400",children:"Manage connection and audio mappings."})]})]}),e.jsxs("button",{onClick:p,className:"px-5 py-2.5 bg-neutral-900 text-white rounded-xl font-black text-[10px] flex items-center space-x-2 active:scale-95 uppercase tracking-widest hover:bg-neutral-800 transition-all",children:[e.jsx(ie,{size:14}),e.jsx("span",{children:"Save"})]})]}),e.jsxs("div",{className:"p-6 bg-neutral-50 rounded-[2rem] border border-neutral-100 space-y-6",children:[e.jsxs("div",{className:`flex items-center justify-between px-4 py-3 rounded-xl border ${o==="connected"?"bg-emerald-50 border-emerald-200":"bg-white border-neutral-200"}`,children:[e.jsxs("div",{className:"flex items-center gap-3",children:[o==="checking"&&e.jsx(xe,{size:18,className:"animate-spin text-neutral-400"}),o==="connected"&&e.jsx(Ne,{size:18,className:"text-emerald-500"}),o==="error"&&e.jsx(Pe,{size:18,className:"text-red-500"}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"text-[10px] font-black uppercase text-neutral-400 tracking-widest",children:"Status"}),e.jsx("span",{className:`text-sm font-bold ${o==="connected"?"text-emerald-700":o==="error"?"text-red-600":"text-neutral-600"}`,children:o==="checking"?"Checking...":o==="connected"?"Active":"Disconnected"})]})]}),o==="connected"?e.jsx("button",{onClick:()=>a(!g),className:"flex items-center gap-2 px-3 py-1.5 bg-white border border-neutral-200 rounded-lg text-[10px] font-black uppercase text-neutral-500 hover:text-indigo-600 hover:border-indigo-200 transition-colors",children:g?"Hide Config":"Configure"}):e.jsxs("button",{onClick:I,className:"flex items-center gap-2 px-3 py-1.5 bg-neutral-900 text-white rounded-lg text-[10px] font-black uppercase hover:bg-neutral-700 transition-colors",children:[e.jsx(_e,{size:12})," Try Connect"]})]}),(o!=="connected"||g)&&e.jsxs("div",{className:"space-y-4 animate-in fade-in slide-in-from-top-2 pt-2 border-t border-neutral-200/50",children:[e.jsxs("div",{className:"flex items-center justify-between px-1",children:[e.jsxs("label",{className:"text-[10px] font-black text-neutral-400 uppercase tracking-widest flex items-center gap-1",children:[e.jsx(Ve,{size:10})," Host Details"]}),e.jsx("div",{className:"flex items-center gap-2",children:e.jsxs("label",{className:"text-[10px] font-bold text-neutral-500 cursor-pointer flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",checked:t.server.useCustomUrl,onChange:F,className:"accent-indigo-600 w-3 h-3"}),"Custom URL"]})})]}),t.server.useCustomUrl?e.jsx("input",{type:"text",value:t.server.customUrl,onChange:s=>V({customUrl:s.target.value}),placeholder:"https://myserver.local:3000",className:"w-full px-4 py-2.5 bg-white border border-neutral-200 rounded-xl text-sm font-bold focus:ring-2 focus:ring-neutral-900 outline-none"}):e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{className:"col-span-2 relative",children:[e.jsx("select",{value:t.server.host,onChange:s=>V({host:s.target.value}),className:"w-full h-full appearance-none bg-white border border-neutral-200 rounded-xl px-4 py-2.5 text-sm font-bold focus:ring-2 focus:ring-neutral-900 outline-none pr-10",children:ut.map(s=>e.jsx("option",{value:s,children:s},s))}),e.jsx("div",{className:"absolute right-3 top-1/2 -translate-y-1/2 pointer-events-none text-neutral-400",children:e.jsx(ce,{size:16})})]}),e.jsx("input",{type:"number",value:t.server.port,onChange:s=>V({port:parseInt(s.target.value)||3e3}),className:"w-full px-4 py-2.5 bg-white border border-neutral-200 rounded-xl text-sm font-bold focus:ring-2 focus:ring-neutral-900 outline-none"})]}),e.jsxs("div",{className:"p-3 bg-blue-50 rounded-xl border border-blue-100 flex gap-2",children:[e.jsx(je,{size:14,className:"text-blue-500 shrink-0 mt-0.5"}),e.jsxs("p",{className:"text-[10px] text-blue-700 font-medium leading-tight",children:["Server must run on HTTPS. If stuck, try opening ",e.jsx("a",{href:`${j}/api/health`,target:"_blank",rel:"noreferrer",className:"underline font-bold",children:"Health Check"})," to verify certificate."]})]})]}),o==="connected"&&e.jsxs("div",{className:"space-y-5 pt-4 border-t border-neutral-200/50 animate-in fade-in",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("h4",{className:"text-[10px] font-black uppercase text-neutral-400 tracking-widest px-1 flex items-center gap-1",children:[e.jsx(ze,{size:10})," Directory Mappings"]}),e.jsxs("div",{className:"bg-white rounded-2xl border border-neutral-200 overflow-hidden",children:[Object.entries(b).length===0?e.jsx("div",{className:"p-6 text-center text-xs text-neutral-400",children:"No mappings configured."}):e.jsx("div",{className:"divide-y divide-neutral-200",children:Object.entries(b).map(([s,C])=>e.jsxs("div",{className:"p-4 flex items-center justify-between hover:bg-neutral-50 transition-colors group",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ze,{size:14,className:"text-indigo-500"}),e.jsx("span",{className:"font-bold text-sm text-neutral-800",children:s})]}),e.jsx("div",{className:"text-[10px] text-neutral-500 font-mono mt-1 ml-6",children:C})]}),e.jsx("button",{onClick:()=>H(s),className:"p-2 text-neutral-400 hover:text-red-500 hover:bg-red-50 rounded-lg transition-all opacity-0 group-hover:opacity-100",children:e.jsx(Oe,{size:14})})]},s))}),e.jsxs("div",{className:"p-4 bg-neutral-50 border-t border-neutral-200 flex flex-col md:flex-row gap-3",children:[e.jsx("input",{value:L,onChange:s=>l(s.target.value),placeholder:"Logical Name (e.g. 'Cam15')",className:"flex-1 px-3 py-2 bg-white border border-neutral-200 rounded-xl text-xs font-bold outline-none focus:border-indigo-500"}),e.jsx("input",{value:y,onChange:s=>u(s.target.value),placeholder:"Physical Path (e.g. ~/Music/Cam15)",className:"flex-[2] px-3 py-2 bg-white border border-neutral-200 rounded-xl text-xs font-medium outline-none focus:border-indigo-500"}),e.jsxs("button",{onClick:B,disabled:!L||!y,className:"px-4 py-2 bg-neutral-900 text-white rounded-xl font-bold text-xs flex items-center gap-2 hover:bg-neutral-800 disabled:opacity-50",children:[e.jsx(De,{size:14})," Add"]})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"text-[10px] font-black text-neutral-400 uppercase tracking-widest px-1 flex items-center gap-1",children:[e.jsx(Ue,{size:10})," Backup Debounce Time"]}),e.jsxs("div",{className:"flex items-center gap-3 p-3 bg-white border border-neutral-200 rounded-xl",children:[e.jsx("input",{type:"range",min:"5",max:"300",step:"5",value:t.sync.autoBackupInterval,onChange:s=>r("sync","autoBackupInterval",parseInt(s.target.value)),className:"flex-1 h-2 bg-neutral-100 rounded-lg appearance-none cursor-pointer accent-neutral-900"}),e.jsxs("div",{className:"w-16 text-center font-black text-sm text-neutral-900",children:[t.sync.autoBackupInterval,"s"]})]})]}),e.jsxs("div",{className:"space-y-4 pt-4 border-t border-neutral-200/50",children:[e.jsxs("h4",{className:"text-[10px] font-black uppercase text-neutral-400 tracking-widest px-1 flex items-center gap-1",children:[e.jsx(ne,{size:10})," Audio Tool"]}),D?e.jsxs("div",{className:"space-y-4",children:[e.jsx(xt,{audioBlob:D,onTrim:s=>{m(s),E("Trimmed!","success")},onCancel:()=>{c(null),m(null)}}),e.jsxs("div",{className:"p-4 bg-white rounded-2xl border border-neutral-200 space-y-3",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx("label",{className:"text-[10px] font-black uppercase text-neutral-400 px-1",children:"Target Folder"}),e.jsxs("select",{value:v,onChange:s=>S(s.target.value),className:"w-full px-3 py-2 rounded-xl border border-neutral-200 text-xs font-bold bg-white focus:ring-2 focus:ring-neutral-900 outline-none",children:[e.jsx("option",{value:"",children:"Select Mapping..."}),Object.keys(b).map(s=>e.jsx("option",{value:s,children:s},s))]})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("label",{className:"text-[10px] font-black uppercase text-neutral-400 px-1",children:"Filename"}),e.jsx("input",{value:h,onChange:s=>N(s.target.value),placeholder:"track_01.wav",className:"w-full px-3 py-2 rounded-xl border border-neutral-200 text-xs font-bold bg-white focus:ring-2 focus:ring-neutral-900 outline-none"})]})]}),e.jsxs("button",{onClick:q,disabled:w||!v||!h,className:"w-full py-3 bg-neutral-900 text-white rounded-xl font-black text-xs uppercase tracking-widest hover:bg-neutral-800 disabled:opacity-50 transition-all flex items-center justify-center gap-2",children:[w?e.jsx(xe,{size:14,className:"animate-spin"}):e.jsx(me,{size:14}),e.jsx("span",{children:"Upload to Server"})]})]})]}):e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("button",{onClick:z?X:J,className:`p-6 rounded-2xl border-2 border-dashed flex flex-col items-center justify-center gap-2 transition-all ${z?"bg-red-50 border-red-400 text-red-600 animate-pulse":"bg-white border-neutral-200 text-neutral-500 hover:border-indigo-400 hover:text-indigo-600"}`,children:[e.jsx(ne,{size:24}),e.jsx("span",{className:"font-bold text-xs",children:z?"Stop Recording":"Record Voice"})]}),e.jsxs("button",{onClick:()=>{var s;return(s=P.current)==null?void 0:s.click()},className:"p-6 rounded-2xl border-2 border-dashed bg-white border-neutral-200 text-neutral-500 flex flex-col items-center justify-center gap-2 transition-all hover:border-indigo-400 hover:text-indigo-600",children:[e.jsx(me,{size:24}),e.jsx("span",{className:"font-bold text-xs",children:"Upload File"}),e.jsx("input",{type:"file",ref:P,className:"hidden",accept:"audio/*",onChange:Y})]})]})]})]})]})]})},ae=[{id:"PROFILE",label:"Profile",icon:le},{id:"INTERFACE",label:"Interface Defaults",icon:et},{id:"SERVER",label:"Server & Connection",icon:ke},{id:"AUDIO_COACH",label:"Audio Coach",icon:fe},{id:"LEARNING",label:"Learning",icon:ve},{id:"DANGER",label:"Danger Zone",icon:we,color:"text-red-500"}],pt=t=>{const{currentView:r,isDropdownOpen:p,notification:o,setCurrentView:d,setIsDropdownOpen:g,mobileNavRef:a,children:b}=t,x=ae.find(l=>l.id===r),L=()=>{switch(r){case"PROFILE":return e.jsx(lt,{profileData:t.profileData,onProfileChange:t.onProfileChange,onAvatarChange:t.onAvatarChange,onSaveProfile:t.onSaveProfile});case"SERVER":return e.jsx(ht,{config:t.config,onConfigChange:t.onConfigChange,onSaveSettings:t.onSaveSettings});case"AUDIO_COACH":return e.jsx(it,{config:t.config,onConfigChange:t.onConfigChange,onSaveSettings:t.onSaveSettings});case"LEARNING":return e.jsxs("div",{className:"space-y-6 animate-in fade-in duration-300",children:[e.jsx(ct,{goalConfig:t.goalConfig,onGoalConfigChange:t.onGoalConfigChange,onSaveSettings:t.onSaveSettings}),e.jsx(ot,{srsConfig:t.config.srs,onSrsConfigChange:t.onSrsConfigChange,onResetSrsConfig:t.onResetSrsConfig,onSaveSettings:t.onSaveSettings})]});case"DANGER":return e.jsx(dt,{onOpenClearProgressModal:t.onOpenClearProgressModal,onOpenNukeModal:t.onOpenNukeModal,isAdmin:t.isAdmin,onToggleAdmin:t.onToggleAdmin});case"INTERFACE":return null;default:return null}};return e.jsxs("div",{className:"max-w-6xl mx-auto space-y-10 pb-20",children:[e.jsxs("header",{children:[e.jsx("h2",{className:"text-3xl font-black text-neutral-900 tracking-tight",children:"Settings"}),e.jsx("p",{className:"text-neutral-500 mt-1 font-medium",children:"Manage your data and personalize your learning experience."})]}),o&&e.jsxs("div",{className:"fixed top-10 left-1/2 -translate-x-1/2 z-[300] bg-neutral-900 text-white px-6 py-3 rounded-2xl shadow-2xl border border-neutral-800 animate-in slide-in-from-top-4 flex items-center space-x-2",children:[e.jsx(Ne,{size:18,className:"text-green-400"}),e.jsx("span",{className:"text-sm font-bold",children:o})]}),e.jsxs("div",{className:"relative lg:hidden mb-6",ref:a,children:[e.jsxs("button",{onClick:()=>g(!p),className:"w-full flex items-center justify-between text-left px-4 py-3 bg-white border border-neutral-200 rounded-xl text-sm font-bold text-neutral-900 hover:bg-neutral-50 transition-colors shadow-sm",children:[x&&e.jsxs("span",{className:"flex items-center space-x-3",children:[e.jsx(x.icon,{size:18,className:x.color}),e.jsx("span",{children:x.label})]}),e.jsx(ce,{size:18,className:`text-neutral-400 transition-transform ${p?"rotate-180":""}`})]}),p&&e.jsx("div",{className:"absolute top-full mt-2 w-full bg-white rounded-2xl shadow-lg border border-neutral-100 z-20 p-2 animate-in fade-in duration-150",children:ae.map(l=>e.jsxs("button",{onClick:()=>{d(l.id),g(!1)},className:`w-full text-left flex items-center space-x-3 px-3 py-2 text-sm font-medium rounded-lg transition-colors ${r===l.id?"bg-neutral-900 text-white":`${l.color||"text-neutral-700"} hover:bg-neutral-50`}`,children:[e.jsx(l.icon,{size:16}),e.jsx("span",{children:l.label})]},l.id))})]}),e.jsxs("div",{className:"flex flex-col lg:flex-row gap-12",children:[e.jsx("aside",{className:"hidden lg:block lg:w-1/4",children:e.jsx("nav",{className:"space-y-1.5",children:ae.map(l=>e.jsxs("button",{onClick:()=>d(l.id),className:`w-full flex items-center space-x-3 px-4 py-3 rounded-xl font-bold text-sm transition-colors ${r===l.id?"bg-neutral-100 text-neutral-900":`${l.color||"text-neutral-500"} hover:bg-neutral-50 hover:text-neutral-900`}`,children:[e.jsx(l.icon,{size:18}),e.jsx("span",{children:l.label})]},l.id))})}),e.jsx("main",{className:"flex-1 lg:w-3/4",children:e.jsxs("div",{className:"animate-in fade-in duration-300",children:[L(),b]},r)})]})]})},U=({checked:t,onChange:r,label:p,subLabel:o,icon:d})=>e.jsxs("label",{onClick:g=>{g.preventDefault(),r(!t)},className:"flex items-center justify-between px-4 py-3 cursor-pointer group hover:bg-neutral-50 rounded-xl transition-all border border-transparent hover:border-neutral-100",children:[e.jsxs("div",{className:"flex flex-col",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[d&&e.jsx(d,{size:14,className:t?"text-neutral-900":"text-neutral-400"}),e.jsx("span",{className:"text-xs font-bold text-neutral-700 group-hover:text-neutral-900",children:p})]}),o&&e.jsx("span",{className:"text-[10px] text-neutral-400 font-medium",children:o})]}),e.jsx("div",{className:`w-9 h-5 rounded-full transition-all flex items-center p-1 ${t?"bg-neutral-900":"bg-neutral-200"}`,children:e.jsx("div",{className:`w-3.5 h-3.5 bg-white rounded-full shadow-sm transition-transform ${t?"translate-x-4":"translate-x-0"}`})})]}),mt=()=>{const[t,r]=n.useState(()=>{try{const a=localStorage.getItem("ielts_pro_library_view_settings");return a?{...te,...JSON.parse(a)}:te}catch{return te}}),[p,o]=n.useState(()=>{const a={showHidden:!1,highlightFailed:!0,isLearnView:!0};try{const b=localStorage.getItem("ielts_pro_word_view_settings");return b?{...a,...JSON.parse(b)}:a}catch{return a}}),d=(a,b)=>{const x={...t,[a]:b};r(x),localStorage.setItem("ielts_pro_library_view_settings",JSON.stringify(x))},g=(a,b)=>{const x={...p,[a]:b};o(x),localStorage.setItem("ielts_pro_word_view_settings",JSON.stringify(x))};return e.jsxs("section",{className:"bg-white p-8 rounded-[2.5rem] border border-neutral-200 shadow-sm flex flex-col space-y-8 animate-in fade-in duration-300",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:"p-3 bg-teal-50 text-teal-600 rounded-2xl",children:e.jsx(ue,{size:24})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-black text-neutral-900",children:"Interface Defaults"}),e.jsx("p",{className:"text-xs text-neutral-400",children:"Customize what you see across the app library and cards."})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-2 text-[10px] font-black text-neutral-400 uppercase tracking-widest px-1",children:[e.jsx(st,{size:12})," Word Library Columns"]}),e.jsxs("div",{className:"bg-white border border-neutral-200 rounded-2xl p-1 grid grid-cols-1 md:grid-cols-2 gap-x-4",children:[e.jsx(U,{checked:t.showMeaning,onChange:a=>d("showMeaning",a),label:"Definition / Meaning"}),e.jsx(U,{checked:t.blurMeaning,onChange:a=>d("blurMeaning",a),label:"Blur Definition (Spoiler)",subLabel:"Hide meaning until hovered"}),e.jsx(U,{checked:t.showIPA,onChange:a=>d("showIPA",a),label:"IPA Phonetic"}),e.jsx(U,{checked:t.showProgress,onChange:a=>d("showProgress",a),label:"Progress Badge"}),e.jsx(U,{checked:t.showDue,onChange:a=>d("showDue",a),label:"Due Date"}),e.jsx(U,{checked:t.showAiIcon,onChange:a=>d("showAiIcon",a),label:"AI Refined Indicator"}),e.jsx(U,{checked:t.showComplexity,onChange:a=>d("showComplexity",a),label:"Complexity Column"})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-2 text-[10px] font-black text-neutral-400 uppercase tracking-widest px-1",children:[e.jsx(ue,{size:12})," Word Detail View"]}),e.jsxs("div",{className:"bg-white border border-neutral-200 rounded-2xl p-1 grid grid-cols-1 md:grid-cols-2 gap-x-4",children:[e.jsx(U,{checked:p.isLearnView,onChange:a=>g("isLearnView",a),label:"Learn View by Default",subLabel:"Hides extra info like examples, tags"}),e.jsx(U,{checked:p.highlightFailed,onChange:a=>g("highlightFailed",a),label:"Highlight Failed Tests",subLabel:"Red highlight for failed drill items"}),e.jsx(U,{checked:p.showHidden,onChange:a=>g("showHidden",a),label:"Show Ignored Items",subLabel:"Show ignored collocations/family members"})]})]})]})},At=({user:t,onUpdateUser:r,onRefresh:p,onNuke:o,apiUsage:d})=>{var W,$;const g=n.useRef(null),{showToast:a}=oe(),[b,x]=n.useState(()=>{const i=sessionStorage.getItem("vocab_pro_settings_tab");return i?(sessionStorage.removeItem("vocab_pro_settings_tab"),i):"PROFILE"});n.useEffect(()=>{const i=sessionStorage.getItem("vocab_pro_settings_tab");i&&(sessionStorage.removeItem("vocab_pro_settings_tab"),x(i))},[]);const[L,l]=n.useState(!1),[y,u]=n.useState(!1),[T,A]=n.useState(!1),[z,O]=n.useState(!1),[D,c]=n.useState(null),[f,m]=n.useState(""),[v,S]=n.useState(he()),[h,N]=n.useState([]),[w,M]=n.useState(!0),[P,E]=n.useState(!1),[j,_]=n.useState({name:t.name,avatar:t.avatar,role:t.role||"",currentLevel:t.currentLevel||"",target:t.target||"",nativeLanguage:t.nativeLanguage||"English",lessonLanguage:((W=t.lessonPreferences)==null?void 0:W.language)||"English",lessonAudience:(($=t.lessonPreferences)==null?void 0:$.targetAudience)||"Adult"});n.useEffect(()=>{var i,k;_({name:t.name,avatar:t.avatar,role:t.role||"",currentLevel:t.currentLevel||"",target:t.target||"",nativeLanguage:t.nativeLanguage||"English",lessonLanguage:((i=t.lessonPreferences)==null?void 0:i.language)||"English",lessonAudience:((k=t.lessonPreferences)==null?void 0:k.targetAudience)||"Adult"})},[t]),n.useEffect(()=>{const i=localStorage.getItem("gemini_api_keys")||"";if(m(i),D){const k=setTimeout(()=>c(null),4e3);return()=>clearTimeout(k)}},[D]),n.useEffect(()=>{(async()=>{M(!0);const G=await Ge();N(G),M(!1)})();const k=()=>{S(he())};return window.addEventListener("config-updated",k),()=>{window.removeEventListener("config-updated",k)}},[]),n.useEffect(()=>{const i=k=>{g.current&&!g.current.contains(k.target)&&l(!1)};return document.addEventListener("mousedown",i),()=>document.removeEventListener("mousedown",i)},[]);const I=(i,k,G)=>{S(de=>{const Z={...de};return k===null&&typeof G=="object"?Z[i]=G:Z[i]={...de[i],[k]:G},Z})},V=i=>{_(k=>({...k,[i.target.name]:i.target.value}))},F=i=>{_(k=>({...k,avatar:i}))},B=async()=>{const i={...t,name:j.name.trim()||t.name,role:j.role.trim(),currentLevel:j.currentLevel.trim(),target:j.target.trim(),nativeLanguage:j.nativeLanguage,avatar:j.avatar,lessonPreferences:{language:j.lessonLanguage,targetAudience:j.lessonAudience.trim(),tone:v.audioCoach.coaches[v.audioCoach.activeCoach].persona}};await r(i),c("Profile & Preferences updated successfully!")},H=()=>{localStorage.setItem("gemini_api_keys",f.trim()),c("API Keys have been saved locally.")},J=()=>{localStorage.removeItem("vocab_pro_api_usage"),window.dispatchEvent(new CustomEvent("apiUsageUpdated")),c("API usage counter has been reset.")},X=i=>{I("srs",i.target.name,parseFloat(i.target.value))},Y=i=>{const k=i.target.type==="checkbox"?i.target.checked:i.target.value;I("ai",i.target.name,k)},q=i=>{I("dailyGoals",i.target.name,parseInt(i.target.value,10))},s=()=>{re(v),c("Settings saved!")},C=()=>{S(i=>({...i,srs:We})),c("SRS settings reset to defaults.")},R=async()=>{O(!0);try{const k=(await Ke()).map(G=>Je(G));await Xe(k),c("All learning progress has been reset.")}catch(i){a("Failed to clear progress: "+i.message,"error")}finally{O(!1),A(!1)}},Q=async()=>{await r({...t,isAdmin:!t.isAdmin}),c(`Developer Mode ${t.isAdmin?"Disabled":"Enabled"}`)};return e.jsxs(e.Fragment,{children:[e.jsx(pt,{currentView:b,isDropdownOpen:L,notification:D,profileData:j,config:v,isVoiceLoading:w,availableVoices:h,apiKeyInput:f,apiUsage:d,mobileNavRef:g,setCurrentView:x,setIsDropdownOpen:l,onProfileChange:V,onAvatarChange:F,onSaveProfile:B,onConfigChange:I,onAiConfigChange:Y,onApiKeyInputChange:i=>m(i.target.value),onSaveApiKeys:H,onResetUsage:J,onSaveSettings:s,onSrsConfigChange:X,onResetSrsConfig:C,onOpenClearProgressModal:()=>A(!0),onOpenNukeModal:()=>u(!0),isApplyingAccent:P,onApplyAccent:()=>{},isAdmin:!!t.isAdmin,onToggleAdmin:Q,goalConfig:v.dailyGoals,onGoalConfigChange:q,children:b==="INTERFACE"&&e.jsx(mt,{})}),e.jsx(pe,{isOpen:y,title:"Delete all data?",message:e.jsxs(e.Fragment,{children:["This will permanently delete ",e.jsx("strong",{className:"text-red-600",children:"ALL"})," vocabulary, progress, and profiles. This action cannot be undone."]}),confirmText:"YES, DELETE EVERYTHING",isProcessing:!1,onConfirm:()=>{o(),u(!1)},onClose:()=>u(!1),confirmButtonClass:"bg-red-600 text-white hover:bg-red-700 shadow-red-200",icon:e.jsx(Be,{size:40,className:"text-red-500"})}),e.jsx(pe,{isOpen:T,title:"Clear All Progress?",message:"This will reset the review schedule for ALL words in your library. Your words and their content will NOT be deleted. This action cannot be undone.",confirmText:"Yes, Clear Progress",isProcessing:z,onConfirm:R,onClose:()=>A(!1),icon:e.jsx($e,{size:40,className:"text-orange-500"}),confirmButtonClass:"bg-orange-50 text-white hover:bg-orange-600 shadow-orange-200"})]})};export{At as SettingsView};
