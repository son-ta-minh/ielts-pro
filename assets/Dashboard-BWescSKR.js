import{c as C,j as e,r as b,C as we,L as Ne,a as te,b as ae,d as se,F as ke,B as ye,S as Ce,R as ne,W as Se,e as Le,G as Re,f as H,g as oe,A as q,T as ie,M as ce,h as Te,i as Ie,P as Me,k as Ee,l as Pe,m as De,n as ze,o as _e,p as $e,q as Oe,s as We,t as Ae,u as Be,v as Ue}from"./index-Bub_R4oH.js";import{D as le,L as Fe}from"./list-todo-DtBqFu1O.js";import{F as de}from"./file-clock-FY0KO-Kf.js";import{S as xe,a as ue}from"./split-zmxeuAxy.js";import{K as Ge,B as Ve}from"./keyboard-TBIQ1pCF.js";/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const He=C("ChartColumn",[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const me=C("Dumbbell",[["path",{d:"M14.4 14.4 9.6 9.6",key:"ic80wn"}],["path",{d:"M18.657 21.485a2 2 0 1 1-2.829-2.828l-1.767 1.768a2 2 0 1 1-2.829-2.829l6.364-6.364a2 2 0 1 1 2.829 2.829l-1.768 1.767a2 2 0 1 1 2.828 2.829z",key:"nnl7wr"}],["path",{d:"m21.5 21.5-1.4-1.4",key:"1f1ice"}],["path",{d:"M3.9 3.9 2.5 2.5",key:"1evmna"}],["path",{d:"M6.404 12.768a2 2 0 1 1-2.829-2.829l1.768-1.767a2 2 0 1 1-2.828-2.829l2.828-2.828a2 2 0 1 1 2.829 2.828l1.767-1.768a2 2 0 1 1 2.829 2.829z",key:"yhosts"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qe=C("HardDrive",[["line",{x1:"22",x2:"2",y1:"12",y2:"12",key:"1y58io"}],["path",{d:"M5.45 5.11 2 12v6a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-6l-3.45-6.89A2 2 0 0 0 16.76 4H7.24a2 2 0 0 0-1.79 1.11z",key:"oot6mr"}],["line",{x1:"6",x2:"6.01",y1:"16",y2:"16",key:"sgf278"}],["line",{x1:"10",x2:"10.01",y1:"16",y2:"16",key:"1l4acy"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ye=C("History",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ke=C("LayoutDashboard",[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Je=C("MessagesSquare",[["path",{d:"M14 9a2 2 0 0 1-2 2H6l-4 4V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2z",key:"p1xzt8"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v11l-4-4h-6a2 2 0 0 1-2-2v-1",key:"1cx29u"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xe=C("Percent",[["line",{x1:"19",x2:"5",y1:"5",y2:"19",key:"1x9vlm"}],["circle",{cx:"6.5",cy:"6.5",r:"2.5",key:"4mh3h7"}],["circle",{cx:"17.5",cy:"17.5",r:"2.5",key:"1mdrzq"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qe=C("Puzzle",[["path",{d:"M15.39 4.39a1 1 0 0 0 1.68-.474 2.5 2.5 0 1 1 3.014 3.015 1 1 0 0 0-.474 1.68l1.683 1.682a2.414 2.414 0 0 1 0 3.414L19.61 15.39a1 1 0 0 1-1.68-.474 2.5 2.5 0 1 0-3.014 3.015 1 1 0 0 1 .474 1.68l-1.683 1.682a2.414 2.414 0 0 1-3.414 0L8.61 19.61a1 1 0 0 0-1.68.474 2.5 2.5 0 1 1-3.014-3.015 1 1 0 0 0 .474-1.68l-1.683-1.682a2.414 2.414 0 0 1 0-3.414L4.39 8.61a1 1 0 0 1 1.68.474 2.5 2.5 0 1 0 3.014-3.015 1 1 0 0 1-.474-1.68l1.683-1.682a2.414 2.414 0 0 1 3.414 0z",key:"w46dr5"}]]),re=({value:t,max:a,label:l})=>{const o=a>0?t/a*100:0;return e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex justify-between items-center mb-1",children:[e.jsx("span",{className:"text-[10px] font-black text-neutral-400 uppercase tracking-widest",children:l}),e.jsxs("span",{className:"text-xs font-bold text-neutral-500",children:[t," / ",a]})]}),e.jsx("div",{className:"h-1.5 w-full bg-neutral-100 rounded-full overflow-hidden border border-neutral-200/50",children:e.jsx("div",{className:"h-full bg-green-500 rounded-full transition-all duration-1000",style:{width:`${o}%`}})})]})},Ze=t=>{const a=t??0;return a>=80?"bg-green-100 text-green-700":a>=50?"bg-yellow-100 text-yellow-700":a>0?"bg-orange-100 text-orange-700":"bg-neutral-100 text-neutral-500"},et=({learnedToday:t,reviewedToday:a,maxLearn:l,maxReview:o,learnedWords:n,reviewedWords:i,onViewWord:r})=>{const x=[...n,...i].sort((c,u)=>(u.lastReview||0)-(c.lastReview||0));return e.jsxs("section",{className:"bg-white p-5 rounded-3xl border border-neutral-200 shadow-sm flex flex-col h-full",children:[e.jsxs("div",{className:"flex justify-between items-start mb-4",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx("h3",{className:"text-sm font-black text-neutral-900 uppercase tracking-widest flex items-center gap-2",children:"Daily Progress"}),e.jsx("p",{className:"text-[10px] text-neutral-400 font-medium",children:"Activity for today."})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-xl font-black text-blue-600 leading-none",children:t}),e.jsx("p",{className:"text-[8px] font-bold text-blue-500 uppercase tracking-wider",children:"New"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-xl font-black text-orange-600 leading-none",children:a}),e.jsx("p",{className:"text-[8px] font-bold text-orange-500 uppercase tracking-wider",children:"Rev"})]})]})]}),e.jsxs("div",{className:"space-y-3 flex-1",children:[e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx(re,{value:t,max:l,label:"Learn Goal"}),e.jsx(re,{value:a,max:o,label:"Review Goal"})]}),x.length>0?e.jsxs("div",{className:"pt-2 border-t border-neutral-100 flex-1 min-h-0 flex flex-col",children:[e.jsxs("h4",{className:"text-[9px] font-black uppercase tracking-widest text-neutral-400 mb-2",children:["Recent Activity (",x.length,")"]}),e.jsx("div",{className:"flex-1 overflow-y-auto space-y-1 pr-1 custom-scrollbar max-h-32",children:x.map(c=>e.jsxs("button",{type:"button",onClick:u=>{u.preventDefault(),u.stopPropagation(),r(c)},className:"w-full flex items-center gap-2 text-left p-1.5 rounded-lg hover:bg-neutral-50 group",children:[e.jsx("div",{className:`w-1.5 h-1.5 rounded-full shrink-0 ${n.some(u=>u.id===c.id)?"bg-blue-500":"bg-orange-500"}`}),e.jsx("span",{className:"text-xs font-bold text-neutral-700 flex-1 truncate group-hover:text-neutral-900",children:c.word}),e.jsx("span",{className:`text-[9px] font-black px-1 py-0.5 rounded ${Ze(c.masteryScore)}`,children:c.masteryScore??0})]},c.id))})]}):e.jsx("div",{className:"flex-1 flex items-center justify-center text-[10px] text-neutral-300 italic pt-4",children:"No activity recorded today."})]})]})},tt=()=>{const t="2026-03-02T01:49:33.923Z";try{const a=new Date(t),l=a.getFullYear(),o=(a.getMonth()+1).toString().padStart(2,"0"),n=a.getDate().toString().padStart(2,"0"),i=a.getHours().toString().padStart(2,"0"),r=a.getMinutes().toString().padStart(2,"0");return`v${l}${o}${n}_${i}${r}`}catch{return"v_error"}},ge=({percent:t,size:a=20,stroke:l=2.5})=>{const o=(a-l)/2,n=2*Math.PI*o,i=n-t/100*n;let r="text-neutral-300";return t>=80?r="text-green-500":t>=40?r="text-yellow-500":t>0&&(r="text-orange-500"),e.jsx("div",{className:"relative flex items-center justify-center",style:{width:a,height:a},children:e.jsxs("svg",{className:"transform -rotate-90",width:a,height:a,children:[e.jsx("circle",{className:"text-neutral-100 group-hover:text-neutral-800 transition-colors",stroke:"currentColor",strokeWidth:l,fill:"transparent",r:o,cx:a/2,cy:a/2}),e.jsx("circle",{className:`${r} transition-all duration-500 ease-out`,stroke:"currentColor",strokeWidth:l,strokeLinecap:"round",fill:"transparent",r:o,cx:a/2,cy:a/2,style:{strokeDasharray:n,strokeDashoffset:i}})]})})},d=({label:t,subLabel:a,progress:l,icon:o,color:n,bg:i,onClick:r,disabled:x,largeSub:c})=>e.jsxs("button",{onClick:r,disabled:x,className:"flex items-start gap-3 p-3 rounded-2xl border border-neutral-100 bg-white hover:bg-neutral-900 hover:border-neutral-900 hover:shadow-lg transition-all active:scale-95 w-full text-left group disabled:opacity-60 disabled:cursor-not-allowed disabled:hover:bg-white disabled:hover:border-neutral-100 disabled:hover:shadow-none",children:[e.jsx("div",{className:`p-2 rounded-xl ${i} ${n} group-hover:scale-110 transition-transform shrink-0 mt-0.5`,children:e.jsx(o,{size:18})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("div",{className:`text-xs font-black text-neutral-900 ${x?"":"group-hover:text-white"} transition-colors tracking-tight leading-tight`,children:t}),a&&e.jsx("div",{className:`font-medium text-neutral-400 ${x?"":"group-hover:text-neutral-300"} transition-colors mt-0.5 leading-snug ${c?"text-[10px]":"text-[10px] truncate"}`,children:a})]}),typeof l=="number"&&e.jsx("div",{className:"shrink-0 ml-1",children:e.jsx(ge,{percent:l})})]}),at=({stats:t})=>{const a=(i,r)=>r>0?Math.round(i/r*100):0,l=t?t.speaking.freeTalk.completed+t.speaking.native.completed+t.speaking.conversation.completed:0,o=t?t.speaking.freeTalk.total+t.speaking.native.total+t.speaking.conversation.total:0,n=({label:i,completed:r,total:x,icon:c,colorClass:u})=>e.jsxs("div",{className:"flex items-start gap-2 p-2 rounded-xl bg-neutral-50/50 hover:bg-neutral-50 transition-colors border border-transparent hover:border-neutral-100",children:[e.jsx("div",{className:`p-1.5 rounded-lg ${u} bg-white shadow-sm shrink-0`,children:e.jsx(c,{size:12})}),e.jsxs("div",{className:"flex flex-col flex-1 min-w-0 leading-tight",children:[e.jsx("span",{className:"text-[10px] font-bold text-neutral-700 truncate",children:i}),e.jsxs("span",{className:"text-[9px] font-medium text-neutral-400",children:[r,"/",x]})]}),e.jsx("div",{className:"shrink-0",children:e.jsx(ge,{percent:a(r,x),size:18})})]});return e.jsxs("div",{className:"bg-white p-5 rounded-3xl border border-neutral-200 shadow-sm flex flex-col gap-4 h-full justify-center",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("div",{className:"p-1.5 bg-neutral-900 text-white rounded-lg",children:e.jsx(Xe,{size:14})}),e.jsx("h3",{className:"text-sm font-black text-neutral-900 uppercase tracking-widest",children:"Mastery Status"})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-3",children:[e.jsx(n,{label:"Reading",completed:(t==null?void 0:t.reading.completed)||0,total:(t==null?void 0:t.reading.total)||0,icon:H,colorClass:"text-indigo-600"}),e.jsx(n,{label:"Writing",completed:(t==null?void 0:t.writing.completed)||0,total:(t==null?void 0:t.writing.total)||0,icon:Me,colorClass:"text-pink-600"}),e.jsx(n,{label:"Speaking",completed:l,total:o,icon:ce,colorClass:"text-rose-600"}),e.jsx(n,{label:"Grammar",completed:(t==null?void 0:t.lessons.grammar.completed)||0,total:(t==null?void 0:t.lessons.grammar.total)||0,icon:oe,colorClass:"text-purple-600"}),e.jsx(n,{label:"Verbs",completed:(t==null?void 0:t.lessons.irregular.completed)||0,total:(t==null?void 0:t.lessons.irregular.total)||0,icon:de,colorClass:"text-orange-600"}),e.jsx(n,{label:"Pronunciation",completed:(t==null?void 0:t.speaking.pronunciation.completed)||0,total:(t==null?void 0:t.speaking.pronunciation.total)||0,icon:q,colorClass:"text-emerald-600"}),e.jsx(n,{label:"Lessons",completed:(t==null?void 0:t.lessons.general.completed)||0,total:(t==null?void 0:t.lessons.general.total)||0,icon:H,colorClass:"text-blue-600"})]})]})},st=({stats:t,totalCount:a,newCount:l,studyingCount:o,masteredCount:n,rawCount:i,refinedCount:r,onStartNew:x,onStartDue:c,onRefineRaw:u,onVerifyRefined:v})=>{const w=a>0?l/a*100:0,j=a>0?o/a*100:0,p=a>0?n/a*100:0;return e.jsxs("div",{className:"bg-white p-5 rounded-3xl border border-neutral-200 shadow-sm flex flex-col gap-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-indigo-50 rounded-xl text-indigo-600 shadow-md",children:e.jsx(ye,{size:18})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-base font-black text-neutral-900 tracking-tight",children:"Vocabulary Center"}),e.jsx("p",{className:"text-[10px] font-medium text-neutral-400",children:"Manage and expand your lexical resource."})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"lg:col-span-2 flex flex-col justify-center gap-4 p-4 bg-neutral-50 rounded-2xl border border-neutral-100",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-xs font-black text-neutral-500 uppercase tracking-wider",children:"Distribution"}),e.jsxs("span",{className:"text-xs font-bold text-neutral-400",children:[a," Total Words"]})]}),e.jsxs("div",{className:"h-4 bg-white rounded-full flex overflow-hidden border border-neutral-200 shadow-inner",children:[e.jsx("div",{className:"h-full bg-purple-500",style:{width:`${p}%`}}),e.jsx("div",{className:"h-full bg-cyan-500",style:{width:`${j}%`}}),e.jsx("div",{className:"h-full bg-neutral-300",style:{width:`${w}%`}})]}),e.jsxs("div",{className:"flex items-center justify-between gap-2 mt-1",children:[e.jsxs("div",{className:"flex items-center gap-1.5",children:[e.jsx("div",{className:"w-2 h-2 rounded-full bg-purple-500"}),e.jsxs("span",{className:"text-[10px] font-bold text-neutral-600",children:["Mastered (",n,")"]})]}),e.jsxs("div",{className:"flex items-center gap-1.5",children:[e.jsx("div",{className:"w-2 h-2 rounded-full bg-cyan-500"}),e.jsxs("span",{className:"text-[10px] font-bold text-neutral-600",children:["Learning (",o,")"]})]}),e.jsxs("div",{className:"flex items-center gap-1.5",children:[e.jsx("div",{className:"w-2 h-2 rounded-full bg-neutral-300"}),e.jsxs("span",{className:"text-[10px] font-bold text-neutral-600",children:["New (",l,")"]})]})]})]}),e.jsxs("div",{className:"lg:col-span-2 grid grid-cols-2 gap-3",children:[e.jsx(d,{label:"Learn New",subLabel:`${t?t.vocab.new:"-"} words ready`,icon:Ce,color:"text-indigo-600",bg:"bg-indigo-50",onClick:x,disabled:!t||t.vocab.new===0}),e.jsx(d,{label:"Review",subLabel:`${t?t.vocab.due:"-"} words due`,icon:ne,color:"text-amber-600",bg:"bg-amber-50",onClick:c,disabled:!t||t.vocab.due===0}),e.jsx(d,{label:"Refine",subLabel:`${i} raw words`,icon:Se,color:"text-purple-600",bg:"bg-purple-50",onClick:u,disabled:i===0}),e.jsx(d,{label:"Verify",subLabel:`${r} pending`,icon:Le,color:"text-emerald-600",bg:"bg-emerald-50",onClick:v,disabled:r===0})]})]})]})},lt=({isLoading:t,onAction:a})=>e.jsxs("div",{className:"bg-white p-5 rounded-3xl border border-neutral-200 shadow-sm flex flex-col gap-4 relative overflow-hidden",children:[t&&e.jsx("div",{className:"absolute top-4 right-4 animate-spin text-neutral-300",children:e.jsx(ne,{size:16})}),e.jsx("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-neutral-900 rounded-xl text-white shadow-md",children:e.jsx(Re,{size:18})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-base font-black text-neutral-900 tracking-tight",children:"Study Center"}),e.jsx("p",{className:"text-[10px] font-medium text-neutral-400",children:"Track your mastery across all skills."})]})]})}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-2",children:[e.jsx(d,{largeSub:!0,label:"Lesson",subLabel:"Explore all learning materials.",icon:H,color:"text-blue-600",bg:"bg-blue-50",onClick:()=>a("LESSON_ONLY")}),e.jsx(d,{largeSub:!0,label:"Grammar",subLabel:"Deep dive into essential grammar rules.",icon:oe,color:"text-purple-600",bg:"bg-purple-50",onClick:()=>a("LESSON_GRAMMAR")}),e.jsx(d,{largeSub:!0,label:"Irregular Verb",subLabel:"Master tricky verb forms and usage.",icon:de,color:"text-orange-600",bg:"bg-orange-50",onClick:()=>a("IRREGULAR_VERBS")}),e.jsx(d,{largeSub:!0,label:"Pronunciation",subLabel:"Perfect your accent and intonation.",icon:q,color:"text-emerald-600",bg:"bg-emerald-50",onClick:()=>a("PRONUNCIATION_ROADMAP")}),e.jsx(d,{largeSub:!0,label:"Word Intensity",subLabel:"Master nuanced words by their scale.",icon:xe,color:"text-orange-600",bg:"bg-orange-50",onClick:()=>a("LESSON_SCALE")}),e.jsx(d,{largeSub:!0,label:"Confusing Words",subLabel:"Contrast and identify confusing pairs.",icon:ue,color:"text-indigo-600",bg:"bg-indigo-50",onClick:()=>a("LESSON_DIFF")}),e.jsx(d,{largeSub:!0,label:"Mistake Cards",subLabel:"Review common mistakes and corrections.",icon:ie,color:"text-rose-600",bg:"bg-rose-50",onClick:()=>a("LESSON_MISTAKE")})]})]}),rt=({onAction:t})=>e.jsxs("div",{className:"bg-white p-5 rounded-3xl border border-neutral-200 shadow-sm flex flex-col gap-3",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-fuchsia-50 rounded-xl text-fuchsia-600 shadow-md",children:e.jsx(me,{size:18})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-base font-black text-neutral-900 tracking-tight",children:"Practice Arcade"}),e.jsx("p",{className:"text-[10px] font-medium text-neutral-400",children:"Targeted drills to refine specific lexical skills."})]})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-2",children:[e.jsx(d,{label:"Pronunciation Focus",subLabel:"Targeted speech practice.",largeSub:!0,icon:ce,color:"text-rose-600",bg:"bg-rose-50",onClick:()=>t("MIMIC")}),e.jsx(d,{label:"Listening & Spelling",subLabel:"Dictation drills to sharpen auditory accuracy.",largeSub:!0,icon:Ge,color:"text-cyan-600",bg:"bg-cyan-50",onClick:()=>t("DICTATION")}),e.jsx(d,{label:"Grammar & Syntax",subLabel:"Unscramble sentences to master word order.",largeSub:!0,icon:Te,color:"text-emerald-600",bg:"bg-emerald-50",onClick:()=>t("SENTENCE_SCRAMBLE")}),e.jsx(d,{label:"Phonetic Accuracy",subLabel:"Refine pronunciation with minimal pairs and IPA.",largeSub:!0,icon:q,color:"text-rose-600",bg:"bg-rose-50",onClick:()=>t("IPA_SORTER")}),e.jsx(d,{label:"Dependent Prepositions",subLabel:"Master verb, noun, and adjective preposition pairings.",largeSub:!0,icon:Ie,color:"text-violet-600",bg:"bg-violet-50",onClick:()=>t("PREPOSITION_POWER")}),e.jsx(d,{label:"Contextual Usage",subLabel:"Match synonyms and idioms to correct contexts.",largeSub:!0,icon:Qe,color:"text-sky-600",bg:"bg-sky-50",onClick:()=>t("PARAPHRASE_CONTEXT")}),e.jsx(d,{label:"Rapid Recall",subLabel:"Speed test: Connect terms with definitions.",largeSub:!0,icon:Ve,color:"text-fuchsia-600",bg:"bg-fuchsia-50",onClick:()=>t("WORD_SCATTER")}),e.jsx(d,{label:"Natural Expression",subLabel:"Master native phrases and idioms in context.",largeSub:!0,icon:Je,color:"text-amber-600",bg:"bg-amber-50",onClick:()=>t("NATURAL_EXPRESSION")}),e.jsx(d,{label:"Intensity Scale",subLabel:"Link nuanced words by their scale of intensity.",largeSub:!0,icon:xe,color:"text-orange-600",bg:"bg-orange-50",onClick:()=>t("INTENSITY_SCALE")}),e.jsx(d,{label:"Word Contrast",subLabel:"Contrast and identify confusing word pairs.",largeSub:!0,icon:ue,color:"text-indigo-600",bg:"bg-indigo-50",onClick:()=>t("COMPARISON_LAB")}),e.jsx(d,{label:"Mistake Recognition",subLabel:"Spot mistakes, reveal fixes, then self-evaluate.",largeSub:!0,icon:ie,color:"text-rose-600",bg:"bg-rose-50",onClick:()=>t("MISTAKE_RECOGNITION")})]})]}),nt=({goalStats:t,onAction:a})=>{const l=t.totalTasks>0?Math.round(t.completedTasks/t.totalTasks*100):0;return e.jsxs("div",{className:"bg-white p-5 rounded-3xl border border-neutral-200 shadow-sm flex flex-col justify-center h-full",children:[e.jsxs("div",{className:"flex justify-between items-start mb-2",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx("h3",{className:"text-[10px] font-black text-neutral-400 uppercase tracking-widest",children:"Active Plan"}),e.jsxs("p",{className:"text-xl font-black text-neutral-900 leading-none",children:[t.completedTasks," / ",t.totalTasks," ",e.jsx("span",{className:"text-xs text-neutral-400 font-bold",children:"Tasks"})]})]}),e.jsx("button",{onClick:()=>a("PLANNING"),className:"p-2 text-neutral-300 hover:text-neutral-900 hover:bg-neutral-50 rounded-lg transition-colors -mr-2 -mt-2",children:e.jsx(Fe,{size:18})})]}),e.jsx("div",{className:"w-full h-3 bg-neutral-100 rounded-full overflow-hidden mb-2",children:e.jsx("div",{className:`h-full transition-all duration-1000 ${l===100?"bg-green-500":"bg-indigo-500"}`,style:{width:`${l}%`}})}),e.jsxs("p",{className:"text-[10px] font-bold text-neutral-400 text-right",children:[l,"% Completed"]})]})},ot=({lastBackupTime:t,onBackup:a,onRestore:l,serverStatus:o})=>{const[n,i]=b.useState(""),[r,x]=b.useState(!1),c=b.useRef(null),[u,v]=b.useState(!1),w=b.useRef(null);return b.useEffect(()=>{const j=()=>{if(!t){i("Last backup: Never");return}const m=Date.now()-t,S=Math.floor(m/(1e3*60*60*24)),L=Math.floor(m/(1e3*60*60)%24),f=Math.floor(m/(1e3*60)%60);S>0?i(`Last backup: ${S}d ago`):L>0?i(`Last backup: ${L}h ago`):f>0?i(`Last backup: ${f}m ago`):i("Last backup: < 1m ago")};j();const p=setInterval(j,60*1e3);return()=>clearTimeout(p)},[t]),b.useEffect(()=>{const j=p=>{c.current&&!c.current.contains(p.target)&&x(!1),w.current&&!w.current.contains(p.target)&&v(!1)};return document.addEventListener("mousedown",j),()=>document.removeEventListener("mousedown",j)},[]),e.jsxs("div",{className:"flex shrink-0 items-center justify-between space-x-3 px-3 py-2 rounded-2xl border-2 shadow-sm bg-white border-neutral-200 text-neutral-800",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ye,{size:14}),e.jsx("span",{className:"font-medium text-xs whitespace-nowrap",children:n})]}),e.jsxs("div",{className:"flex items-center space-x-2 pl-2",children:[o==="connected"?e.jsxs("div",{className:"relative",ref:c,children:[e.jsxs("button",{onClick:()=>x(!r),className:`px-4 py-2 bg-indigo-50 text-indigo-700 rounded-xl font-black text-[10px] flex items-center gap-2 transition-all active:scale-95 border border-indigo-100 shadow-sm uppercase tracking-widest ${r?"bg-indigo-100":"hover:bg-indigo-100"}`,children:[e.jsx(te,{size:14}),e.jsx("span",{children:"Backup"}),e.jsx(ae,{size:12,className:`transition-transform ${r?"rotate-180":""}`})]}),r&&e.jsxs("div",{className:"absolute right-0 top-full mt-2 w-36 bg-white rounded-xl shadow-xl border border-neutral-100 z-50 overflow-hidden animate-in fade-in zoom-in-95",children:[e.jsxs("button",{onClick:()=>{a("server"),x(!1)},className:"w-full flex items-center gap-2 px-4 py-3 text-xs font-bold text-neutral-700 hover:bg-neutral-50 transition-colors text-left",children:[e.jsx(se,{size:14,className:"text-sky-500"})," To Server"]}),e.jsx("div",{className:"h-px bg-neutral-100 mx-2"}),e.jsxs("button",{onClick:()=>{a("file"),x(!1)},className:"w-full flex items-center gap-2 px-4 py-3 text-xs font-bold text-neutral-700 hover:bg-neutral-50 transition-colors text-left",children:[e.jsx(qe,{size:14,className:"text-indigo-500"})," To File"]})]})]}):e.jsxs("button",{onClick:()=>a("file"),className:"px-4 py-2 bg-indigo-50 text-indigo-700 rounded-xl font-black text-[10px] flex items-center gap-2 hover:bg-indigo-100 transition-all active:scale-95 border border-indigo-100 shadow-sm uppercase tracking-widest",children:[e.jsx(te,{size:14}),e.jsx("span",{children:"Backup"})]}),o==="connected"?e.jsxs("div",{className:"relative",ref:w,children:[e.jsxs("button",{onClick:()=>v(!u),className:`px-4 py-2 bg-emerald-50 text-emerald-700 rounded-xl font-black text-[10px] flex items-center gap-2 transition-all active:scale-95 border border-emerald-100 shadow-sm uppercase tracking-widest ${u?"bg-emerald-100":"hover:bg-emerald-100"}`,children:[e.jsx(le,{size:14}),e.jsx("span",{children:"Restore"}),e.jsx(ae,{size:12,className:`transition-transform ${u?"rotate-180":""}`})]}),u&&e.jsxs("div",{className:"absolute right-0 top-full mt-2 w-36 bg-white rounded-xl shadow-xl border border-neutral-100 z-50 overflow-hidden animate-in fade-in zoom-in-95",children:[e.jsxs("button",{onClick:()=>{l("server"),v(!1)},className:"w-full flex items-center gap-2 px-4 py-3 text-xs font-bold text-neutral-700 hover:bg-neutral-50 transition-colors text-left",children:[e.jsx(se,{size:14,className:"text-sky-500"})," From Server"]}),e.jsx("div",{className:"h-px bg-neutral-100 mx-2"}),e.jsxs("button",{onClick:()=>{l("file"),v(!1)},className:"w-full flex items-center gap-2 px-4 py-3 text-xs font-bold text-neutral-700 hover:bg-neutral-50 transition-colors text-left",children:[e.jsx(ke,{size:14,className:"text-amber-500"})," From File"]})]})]}):e.jsxs("button",{onClick:()=>l("file"),className:"px-4 py-2 bg-emerald-50 text-emerald-700 rounded-xl font-black text-[10px] flex items-center gap-2 hover:bg-emerald-100 transition-all active:scale-95 border border-emerald-100 shadow-sm uppercase tracking-widest",children:[e.jsx(le,{size:14}),e.jsx("span",{children:"Restore"})]})]})]})},it=({onNavigate:t,totalCount:a,newCount:l,rawCount:o,refinedCount:n,reviewStats:i,lastBackupTime:r,onBackup:x,onRestore:c,serverStatus:u,onAction:v,onStartNewLearn:w,onStartDueReview:j,dayProgress:p,dailyGoals:m,onNavigateToWordList:S,goalStats:L,studyStats:f,isStatsLoading:A,onViewWord:B,serverUrl:Y,activeServerMode:R,isSwitchingServerMode:_,onToggleServerMode:T})=>{const U=b.useMemo(()=>tt(),[]),[N,I]=b.useState(()=>{const k=sessionStorage.getItem("dashboard_active_tab");return k==="STUDY"||k==="PRACTICE"||k==="INSIGHT"?k:"STUDY"});return b.useEffect(()=>{sessionStorage.setItem("dashboard_active_tab",N)},[N]),e.jsxs("div",{className:"space-y-4 animate-in fade-in duration-500",children:[e.jsxs("header",{className:"flex flex-col sm:flex-row justify-between sm:items-start gap-4 mb-4",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-baseline gap-2",children:[e.jsx("h2",{className:"text-3xl font-black text-neutral-900 tracking-tight",children:"IELTS Vocab Pro"}),e.jsx("span",{className:"text-[10px] font-bold text-neutral-400 font-mono tracking-tighter bg-neutral-100 px-1.5 py-0.5 rounded-md border border-neutral-200",children:U})]}),e.jsx("div",{className:"flex flex-wrap items-center gap-2 mt-2",children:u==="connected"?e.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[e.jsxs("div",{className:"px-3 py-1.5 rounded-full border flex items-center gap-2 bg-emerald-50 border-emerald-200 text-emerald-700",children:[e.jsx("div",{className:"w-2 h-2 rounded-full bg-emerald-500"}),e.jsx("span",{className:"text-[11px] font-semibold text-neutral-500",children:R==="home"?"Private Server":"Public Server"})]}),e.jsx("div",{className:"inline-flex items-center gap-1",children:e.jsx("button",{onClick:()=>T==null?void 0:T(R==="home"?"public":"home"),disabled:!!_,className:"px-3 py-1.5 rounded-full text-[11px] font-semibold tracking-wide transition-all duration-150 bg-blue-500 text-white hover:bg-blue-600 active:scale-95 disabled:opacity-60 disabled:cursor-not-allowed shadow-sm",children:_?"Switching...":R==="home"?"Switch to Public Server":"Switch to Private Server"})})]}):e.jsxs("div",{className:"flex items-center gap-2 px-1.5 py-1.5 rounded-full border bg-red-50 border-red-200 text-red-700 shadow-sm pr-1.5",children:[e.jsxs("div",{className:"flex items-center gap-2 px-2",children:[e.jsx("div",{className:"w-2 h-2 rounded-full bg-red-500 animate-pulse"}),e.jsx("span",{className:"text-[10px] font-black uppercase tracking-widest",children:"Offline Mode"}),e.jsxs("div",{className:"relative group/tooltip",children:[e.jsx(we,{size:12,className:"cursor-help opacity-70 hover:opacity-100"}),e.jsxs("div",{className:"absolute left-0 top-full mt-2 w-56 p-3 bg-neutral-900 text-white text-[10px] leading-relaxed font-medium rounded-xl opacity-0 group-hover/tooltip:opacity-100 transition-opacity pointer-events-none z-50 shadow-xl border border-neutral-700",children:["Disconnected from Vocab Server. Server backup and high-quality voices are unavailable.",e.jsx("div",{className:"absolute -top-1 left-3 w-2 h-2 bg-neutral-900 rotate-45 border-l border-t border-neutral-700"})]})]})]}),e.jsx("div",{className:"w-px h-3 bg-red-200"}),e.jsxs("button",{onClick:()=>{sessionStorage.setItem("vocab_pro_settings_tab","SERVER"),t("SETTINGS")},className:"flex items-center gap-1 px-3 py-1 bg-blue-600 border border-blue-700 rounded-full shadow-sm hover:bg-blue-700 transition-all group/btn",children:[e.jsx(Ne,{size:10,className:"text-white"}),e.jsx("span",{className:"text-[10px] font-black uppercase tracking-widest text-white",children:"Connect"})]})]})})]}),e.jsx("div",{className:"flex flex-col items-end gap-2",children:e.jsx(ot,{lastBackupTime:r,onBackup:x,onRestore:c,serverStatus:u})})]}),e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{className:"inline-flex p-1 bg-white border-2 border-neutral-100 rounded-2xl w-fit shadow-sm self-start",children:[e.jsxs("button",{onClick:()=>I("STUDY"),className:`w-28 py-2.5 rounded-xl text-xs font-black uppercase tracking-wider flex items-center justify-center gap-2 transition-all duration-300 ${N==="STUDY"?"bg-neutral-900 text-white shadow-lg transform scale-[1.02]":"text-neutral-500 hover:text-neutral-900 hover:bg-neutral-50"}`,children:[e.jsx(Ke,{size:16})," Study"]}),e.jsxs("button",{onClick:()=>I("PRACTICE"),className:`w-28 py-2.5 rounded-xl text-xs font-black uppercase tracking-wider flex items-center justify-center gap-2 transition-all duration-300 ${N==="PRACTICE"?"bg-neutral-900 text-white shadow-lg transform scale-[1.02]":"text-neutral-500 hover:text-neutral-900 hover:bg-neutral-50"}`,children:[e.jsx(me,{size:16})," Practice"]}),e.jsxs("button",{onClick:()=>I("INSIGHT"),className:`w-28 py-2.5 rounded-xl text-xs font-black uppercase tracking-wider flex items-center justify-center gap-2 transition-all duration-300 ${N==="INSIGHT"?"bg-neutral-900 text-white shadow-lg transform scale-[1.02]":"text-neutral-500 hover:text-neutral-900 hover:bg-neutral-50"}`,children:[e.jsx(He,{size:16})," Insight"]})]})}),N==="STUDY"&&e.jsxs("div",{className:"space-y-4 animate-in fade-in slide-in-from-bottom-2 duration-300",children:[e.jsx(st,{stats:f,totalCount:a,newCount:l,studyingCount:i.learned,masteredCount:i.mastered,rawCount:o,refinedCount:n,onStartNew:w,onStartDue:j,onRefineRaw:()=>S("raw"),onVerifyRefined:()=>S("refined")}),e.jsx(lt,{stats:f,isLoading:A,onAction:k=>v(k)})]}),N==="PRACTICE"&&e.jsx("div",{className:"space-y-4 animate-in fade-in slide-in-from-bottom-2 duration-300",children:e.jsx(rt,{onAction:v})}),N==="INSIGHT"&&e.jsxs("div",{className:"space-y-4 animate-in fade-in slide-in-from-bottom-2 duration-300",children:[e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-4",children:[e.jsx("div",{className:"lg:col-span-2",children:e.jsx(at,{stats:f})}),e.jsx("div",{className:"lg:col-span-1",children:e.jsx(nt,{goalStats:L,onAction:v})})]}),(()=>{const k=(f==null?void 0:f.vocab.new)??0,$=(f==null?void 0:f.vocab.due)??0,F=Math.min(m.max_learn_per_day,k),O=Math.min(m.max_review_per_day,$),M=Math.max(F,p.learned),G=Math.max(O,p.reviewed);return e.jsx("div",{className:"grid grid-cols-1 gap-4",children:e.jsx(et,{learnedToday:p.learned,reviewedToday:p.reviewed,maxLearn:M,maxReview:G,learnedWords:p.learnedWords,reviewedWords:p.reviewedWords,onViewWord:B})})})()]})]})},bt=({userId:t,totalCount:a,user:l,wotd:o,serverStatus:n,serverUrl:i,activeServerMode:r,isSwitchingServerMode:x,onToggleServerMode:c,restoreFromServerAction:u,triggerLocalRestore:v,onLocalBackup:w,onServerBackup:j,onAction:p,...m})=>{const[S,L]=b.useState(0),[f,A]=b.useState(0),[B,Y]=b.useState({learned:0,reviewed:0,learnedWords:[],reviewedWords:[]}),[R,_]=b.useState({learned:0,mastered:0,statusForgot:0,statusHard:0,statusEasy:0,statusLearned:0}),[T,U]=b.useState({totalTasks:0,completedTasks:0}),[N,I]=b.useState(null),[k,$]=b.useState(!1),F=Ee().dailyGoals,O=async()=>{try{const g=await Be(t);let y=0,h=0;g.forEach(E=>{var P,D;y+=((P=E.todos)==null?void 0:P.length)||0,h+=((D=E.todos)==null?void 0:D.filter(W=>W.status==="CLOSED").length)||0}),U({totalTasks:y,completedTasks:h})}catch(g){console.warn("Failed to fetch goal stats",g)}},M=b.useCallback(async()=>{$(!0);try{const[g,y,h,E,P,D,W]=await Promise.all([Pe(t),De(t),ze(t),_e(t),$e(t),Oe(t),We(t)]),K=Ae().filter(s=>s.userId===t).filter(s=>!s.isPassive),pe=K.filter(s=>!s.lastReview&&s.quality==="VERIFIED").length,fe=K.filter(s=>s.lastReview&&s.nextReview<=Date.now()&&s.quality!=="FAILED").length,J=g.filter(s=>{var z;return(z=s.tags)==null?void 0:z.some(V=>V.toLowerCase().includes("grammar"))}),X=g.filter(s=>s.type==="comparison"),Q=g.filter(s=>s.type==="intensity"),Z=g.filter(s=>{var z;return!((z=s.tags)!=null&&z.some(V=>V.toLowerCase().includes("grammar")))}),ee=JSON.parse(localStorage.getItem("vocab_pro_mimic_practice_queue")||"[]"),ve=ee.length,je=ee.filter(s=>(s.lastScore||0)>=80).length;I({vocab:{new:pe,due:fe},lessons:{general:{completed:Z.filter(s=>s.focusColor==="green").length,total:Z.length},irregular:{completed:h.filter(s=>s.lastTestResult==="pass").length,total:h.length},grammar:{completed:J.filter(s=>s.focusColor==="green").length,total:J.length},comparison:{completed:X.filter(s=>s.focusColor==="green").length,total:X.length},scale:{completed:Q.filter(s=>s.focusColor==="green").length,total:Q.length}},reading:{completed:y.filter(s=>s.focusColor==="green").length,total:y.length},speaking:{freeTalk:{completed:D.filter(s=>s.focusColor==="green").length,total:D.length},native:{completed:E.filter(s=>s.focusColor==="green").length,total:E.length},conversation:{completed:P.filter(s=>s.focusColor==="green").length,total:P.length},pronunciation:{completed:je,total:ve}},writing:{completed:W.filter(s=>s.focusColor==="green").length,total:W.length}})}catch(g){console.error("Failed to fetch study stats",g)}finally{$(!1)}},[t]);b.useEffect(()=>{const g=async()=>{const h=Ue();h&&(h.dayProgress&&Y(h.dayProgress),L(h.dashboardStats.rawCount||0),A(h.dashboardStats.refinedCount||0),h.reviewCounts&&_({learned:h.reviewCounts.learned||0,mastered:h.reviewCounts.mastered||0,statusForgot:h.reviewCounts.statusForgot||0,statusHard:h.reviewCounts.statusHard||0,statusEasy:h.reviewCounts.statusEasy||0,statusLearned:h.reviewCounts.statusLearned||0}))};t&&(g(),O(),M());const y=()=>{g(),O()};return window.addEventListener("datastore-updated",y),()=>{window.removeEventListener("datastore-updated",y)}},[t,a,M]);const G=g=>{g==="server"&&u?u():g==="file"&&v?v():g==="file"&&m.onRestore()},be=g=>{g==="server"&&j?j():w()},he={user:l,totalCount:a,dueCount:m.dueCount,newCount:m.newCount,learnedCount:R.learned,rawCount:S,refinedCount:f,reviewStats:R,wotd:o,isWotdComposed:m.isWotdComposed||!1,onRandomizeWotd:m.onRandomizeWotd||(()=>{}),onComposeWotd:()=>{m.onComposeWotd&&o&&m.onComposeWotd(o)},goalStats:T,studyStats:N,isStatsLoading:k,onRefreshStats:M,onNavigate:m.setView,onNavigateToWordList:m.onNavigateToWordList,onStartDueReview:m.onStartDueReview,onStartNewLearn:m.onStartNewLearn,lastBackupTime:m.lastBackupTime,onBackup:be,onRestore:G,dayProgress:B,dailyGoals:F,serverStatus:n,serverUrl:i,activeServerMode:r,isSwitchingServerMode:x,onToggleServerMode:c,onAction:p||(()=>{}),onViewWord:m.onViewWord};return e.jsx(e.Fragment,{children:e.jsx(it,{...he})})};export{bt as default};
