const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/Dashboard-CnL8QB6f.js","assets/list-todo-lx_C_zXH.js","assets/download-D9Bl194F.js","assets/ReviewSession-DyQUkxEq.js","assets/trophy-BA9bwkns.js","assets/WordList-BmzF5D95.js","assets/WordTable-BQQ9O8PG.js","assets/WordTable_UI-Bg5GfXF3.js","assets/TagBrowser-yV2AW7bC.js","assets/tag-CltrWNWf.js","assets/square-check-big-Cq_cWMW9.js","assets/chevron-left-CpRtvSZX.js","assets/ReadingUnitPage-CKmI10j_.js","assets/UniversalCard-B81WlXfN.js","assets/file-text-PTswX6R4.js","assets/ShelfModals-SsVZm6UP.js","assets/move-mHVSVAQG.js","assets/folder-B97S4y_F.js","assets/ResourcePage-BfOjKlOc.js","assets/ResourceActions-xY8yVej5.js","assets/ViewMenu-DTEyyXUm.js","assets/filter-BBqQrJjW.js","assets/ShelfSearchBar-DbFxhcw7.js","assets/pen-91lbKJrp.js","assets/palette-D96tiXJO.js","assets/FileSelector-BBtoS7bF.js","assets/server-BqQJsB1J.js","assets/library-DpzSBNa0.js","assets/SettingsView-HtUf5_P7.js","assets/AvatarSelectionModal-4xn5gzHV.js","assets/pause-CVUaeKtI.js","assets/Discover-G1TADS5G.js","assets/WritingStudioPage-BkX9qAhZ.js","assets/chart-no-axes-column-increasing-Bplw3m_6.js","assets/IrregularVerbs-CHxsS_An.js","assets/file-clock-mWzz2EKt.js","assets/MimicPractice-BtlJOY1O.js","assets/MimicPractice_UI-BwlDeUZN.js","assets/ear-Dl10kPED.js","assets/ListeningCardPage-Be59TMUU.js","assets/LessonLibraryV2-BD5Q55tl.js","assets/headphones-Bfv0K41V.js","assets/PlanningPage-wzeMgJHR.js","assets/SpeakingCardPage-PNc0TWZw.js","assets/WordBookPage-BKV8JNDG.js"])))=>i.map(i=>d[i]);
(function(){const o=document.createElement("link").relList;if(o&&o.supports&&o.supports("modulepreload"))return;for(const f of document.querySelectorAll('link[rel="modulepreload"]'))c(f);new MutationObserver(f=>{for(const d of f)if(d.type==="childList")for(const h of d.addedNodes)h.tagName==="LINK"&&h.rel==="modulepreload"&&c(h)}).observe(document,{childList:!0,subtree:!0});function u(f){const d={};return f.integrity&&(d.integrity=f.integrity),f.referrerPolicy&&(d.referrerPolicy=f.referrerPolicy),f.crossOrigin==="use-credentials"?d.credentials="include":f.crossOrigin==="anonymous"?d.credentials="omit":d.credentials="same-origin",d}function c(f){if(f.ep)return;f.ep=!0;const d=u(f);fetch(f.href,d)}})();var U2=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Xm(l){return l&&l.__esModule&&Object.prototype.hasOwnProperty.call(l,"default")?l.default:l}var Du={exports:{}},Ci={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var mm;function Xy(){if(mm)return Ci;mm=1;var l=Symbol.for("react.transitional.element"),o=Symbol.for("react.fragment");function u(c,f,d){var h=null;if(d!==void 0&&(h=""+d),f.key!==void 0&&(h=""+f.key),"key"in f){d={};for(var x in f)x!=="key"&&(d[x]=f[x])}else d=f;return f=d.ref,{$$typeof:l,type:c,key:h,ref:f!==void 0?f:null,props:d}}return Ci.Fragment=o,Ci.jsx=u,Ci.jsxs=u,Ci}var hm;function Ky(){return hm||(hm=1,Du.exports=Xy()),Du.exports}var s=Ky(),Bu={exports:{}},ke={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var gm;function Wy(){if(gm)return ke;gm=1;var l=Symbol.for("react.transitional.element"),o=Symbol.for("react.portal"),u=Symbol.for("react.fragment"),c=Symbol.for("react.strict_mode"),f=Symbol.for("react.profiler"),d=Symbol.for("react.consumer"),h=Symbol.for("react.context"),x=Symbol.for("react.forward_ref"),p=Symbol.for("react.suspense"),g=Symbol.for("react.memo"),y=Symbol.for("react.lazy"),S=Symbol.for("react.activity"),A=Symbol.iterator;function T(v){return v===null||typeof v!="object"?null:(v=A&&v[A]||v["@@iterator"],typeof v=="function"?v:null)}var I={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},N=Object.assign,R={};function O(v,j,z){this.props=v,this.context=j,this.refs=R,this.updater=z||I}O.prototype.isReactComponent={},O.prototype.setState=function(v,j){if(typeof v!="object"&&typeof v!="function"&&v!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,v,j,"setState")},O.prototype.forceUpdate=function(v){this.updater.enqueueForceUpdate(this,v,"forceUpdate")};function H(){}H.prototype=O.prototype;function U(v,j,z){this.props=v,this.context=j,this.refs=R,this.updater=z||I}var B=U.prototype=new H;B.constructor=U,N(B,O.prototype),B.isPureReactComponent=!0;var L=Array.isArray;function Y(){}var Q={H:null,A:null,T:null,S:null},V=Object.prototype.hasOwnProperty;function C(v,j,z){var ee=z.ref;return{$$typeof:l,type:v,key:j,ref:ee!==void 0?ee:null,props:z}}function X(v,j){return C(v.type,j,v.props)}function F(v){return typeof v=="object"&&v!==null&&v.$$typeof===l}function K(v){var j={"=":"=0",":":"=2"};return"$"+v.replace(/[=:]/g,function(z){return j[z]})}var ie=/\/+/g;function ge(v,j){return typeof v=="object"&&v!==null&&v.key!=null?K(""+v.key):j.toString(36)}function oe(v){switch(v.status){case"fulfilled":return v.value;case"rejected":throw v.reason;default:switch(typeof v.status=="string"?v.then(Y,Y):(v.status="pending",v.then(function(j){v.status==="pending"&&(v.status="fulfilled",v.value=j)},function(j){v.status==="pending"&&(v.status="rejected",v.reason=j)})),v.status){case"fulfilled":return v.value;case"rejected":throw v.reason}}throw v}function _(v,j,z,ee,ue){var ce=typeof v;(ce==="undefined"||ce==="boolean")&&(v=null);var fe=!1;if(v===null)fe=!0;else switch(ce){case"bigint":case"string":case"number":fe=!0;break;case"object":switch(v.$$typeof){case l:case o:fe=!0;break;case y:return fe=v._init,_(fe(v._payload),j,z,ee,ue)}}if(fe)return ue=ue(v),fe=ee===""?"."+ge(v,0):ee,L(ue)?(z="",fe!=null&&(z=fe.replace(ie,"$&/")+"/"),_(ue,j,z,"",function(P){return P})):ue!=null&&(F(ue)&&(ue=X(ue,z+(ue.key==null||v&&v.key===ue.key?"":(""+ue.key).replace(ie,"$&/")+"/")+fe)),j.push(ue)),1;fe=0;var D=ee===""?".":ee+":";if(L(v))for(var re=0;re<v.length;re++)ee=v[re],ce=D+ge(ee,re),fe+=_(ee,j,z,ce,ue);else if(re=T(v),typeof re=="function")for(v=re.call(v),re=0;!(ee=v.next()).done;)ee=ee.value,ce=D+ge(ee,re++),fe+=_(ee,j,z,ce,ue);else if(ce==="object"){if(typeof v.then=="function")return _(oe(v),j,z,ee,ue);throw j=String(v),Error("Objects are not valid as a React child (found: "+(j==="[object Object]"?"object with keys {"+Object.keys(v).join(", ")+"}":j)+"). If you meant to render a collection of children, use an array instead.")}return fe}function W(v,j,z){if(v==null)return v;var ee=[],ue=0;return _(v,ee,"","",function(ce){return j.call(z,ce,ue++)}),ee}function J(v){if(v._status===-1){var j=v._result;j=j(),j.then(function(z){(v._status===0||v._status===-1)&&(v._status=1,v._result=z)},function(z){(v._status===0||v._status===-1)&&(v._status=2,v._result=z)}),v._status===-1&&(v._status=0,v._result=j)}if(v._status===1)return v._result.default;throw v._result}var de=typeof reportError=="function"?reportError:function(v){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var j=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof v=="object"&&v!==null&&typeof v.message=="string"?String(v.message):String(v),error:v});if(!window.dispatchEvent(j))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",v);return}console.error(v)},me={map:W,forEach:function(v,j,z){W(v,function(){j.apply(this,arguments)},z)},count:function(v){var j=0;return W(v,function(){j++}),j},toArray:function(v){return W(v,function(j){return j})||[]},only:function(v){if(!F(v))throw Error("React.Children.only expected to receive a single React element child.");return v}};return ke.Activity=S,ke.Children=me,ke.Component=O,ke.Fragment=u,ke.Profiler=f,ke.PureComponent=U,ke.StrictMode=c,ke.Suspense=p,ke.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=Q,ke.__COMPILER_RUNTIME={__proto__:null,c:function(v){return Q.H.useMemoCache(v)}},ke.cache=function(v){return function(){return v.apply(null,arguments)}},ke.cacheSignal=function(){return null},ke.cloneElement=function(v,j,z){if(v==null)throw Error("The argument must be a React element, but you passed "+v+".");var ee=N({},v.props),ue=v.key;if(j!=null)for(ce in j.key!==void 0&&(ue=""+j.key),j)!V.call(j,ce)||ce==="key"||ce==="__self"||ce==="__source"||ce==="ref"&&j.ref===void 0||(ee[ce]=j[ce]);var ce=arguments.length-2;if(ce===1)ee.children=z;else if(1<ce){for(var fe=Array(ce),D=0;D<ce;D++)fe[D]=arguments[D+2];ee.children=fe}return C(v.type,ue,ee)},ke.createContext=function(v){return v={$$typeof:h,_currentValue:v,_currentValue2:v,_threadCount:0,Provider:null,Consumer:null},v.Provider=v,v.Consumer={$$typeof:d,_context:v},v},ke.createElement=function(v,j,z){var ee,ue={},ce=null;if(j!=null)for(ee in j.key!==void 0&&(ce=""+j.key),j)V.call(j,ee)&&ee!=="key"&&ee!=="__self"&&ee!=="__source"&&(ue[ee]=j[ee]);var fe=arguments.length-2;if(fe===1)ue.children=z;else if(1<fe){for(var D=Array(fe),re=0;re<fe;re++)D[re]=arguments[re+2];ue.children=D}if(v&&v.defaultProps)for(ee in fe=v.defaultProps,fe)ue[ee]===void 0&&(ue[ee]=fe[ee]);return C(v,ce,ue)},ke.createRef=function(){return{current:null}},ke.forwardRef=function(v){return{$$typeof:x,render:v}},ke.isValidElement=F,ke.lazy=function(v){return{$$typeof:y,_payload:{_status:-1,_result:v},_init:J}},ke.memo=function(v,j){return{$$typeof:g,type:v,compare:j===void 0?null:j}},ke.startTransition=function(v){var j=Q.T,z={};Q.T=z;try{var ee=v(),ue=Q.S;ue!==null&&ue(z,ee),typeof ee=="object"&&ee!==null&&typeof ee.then=="function"&&ee.then(Y,de)}catch(ce){de(ce)}finally{j!==null&&z.types!==null&&(j.types=z.types),Q.T=j}},ke.unstable_useCacheRefresh=function(){return Q.H.useCacheRefresh()},ke.use=function(v){return Q.H.use(v)},ke.useActionState=function(v,j,z){return Q.H.useActionState(v,j,z)},ke.useCallback=function(v,j){return Q.H.useCallback(v,j)},ke.useContext=function(v){return Q.H.useContext(v)},ke.useDebugValue=function(){},ke.useDeferredValue=function(v,j){return Q.H.useDeferredValue(v,j)},ke.useEffect=function(v,j){return Q.H.useEffect(v,j)},ke.useEffectEvent=function(v){return Q.H.useEffectEvent(v)},ke.useId=function(){return Q.H.useId()},ke.useImperativeHandle=function(v,j,z){return Q.H.useImperativeHandle(v,j,z)},ke.useInsertionEffect=function(v,j){return Q.H.useInsertionEffect(v,j)},ke.useLayoutEffect=function(v,j){return Q.H.useLayoutEffect(v,j)},ke.useMemo=function(v,j){return Q.H.useMemo(v,j)},ke.useOptimistic=function(v,j){return Q.H.useOptimistic(v,j)},ke.useReducer=function(v,j,z){return Q.H.useReducer(v,j,z)},ke.useRef=function(v){return Q.H.useRef(v)},ke.useState=function(v){return Q.H.useState(v)},ke.useSyncExternalStore=function(v,j,z){return Q.H.useSyncExternalStore(v,j,z)},ke.useTransition=function(){return Q.H.useTransition()},ke.version="19.2.4",ke}var xm;function id(){return xm||(xm=1,Bu.exports=Wy()),Bu.exports}var w=id();const Vt=Xm(w);var Hu={exports:{}},ki={},qu={exports:{}},Gu={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ym;function $y(){return ym||(ym=1,(function(l){function o(_,W){var J=_.length;_.push(W);e:for(;0<J;){var de=J-1>>>1,me=_[de];if(0<f(me,W))_[de]=W,_[J]=me,J=de;else break e}}function u(_){return _.length===0?null:_[0]}function c(_){if(_.length===0)return null;var W=_[0],J=_.pop();if(J!==W){_[0]=J;e:for(var de=0,me=_.length,v=me>>>1;de<v;){var j=2*(de+1)-1,z=_[j],ee=j+1,ue=_[ee];if(0>f(z,J))ee<me&&0>f(ue,z)?(_[de]=ue,_[ee]=J,de=ee):(_[de]=z,_[j]=J,de=j);else if(ee<me&&0>f(ue,J))_[de]=ue,_[ee]=J,de=ee;else break e}}return W}function f(_,W){var J=_.sortIndex-W.sortIndex;return J!==0?J:_.id-W.id}if(l.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var d=performance;l.unstable_now=function(){return d.now()}}else{var h=Date,x=h.now();l.unstable_now=function(){return h.now()-x}}var p=[],g=[],y=1,S=null,A=3,T=!1,I=!1,N=!1,R=!1,O=typeof setTimeout=="function"?setTimeout:null,H=typeof clearTimeout=="function"?clearTimeout:null,U=typeof setImmediate<"u"?setImmediate:null;function B(_){for(var W=u(g);W!==null;){if(W.callback===null)c(g);else if(W.startTime<=_)c(g),W.sortIndex=W.expirationTime,o(p,W);else break;W=u(g)}}function L(_){if(N=!1,B(_),!I)if(u(p)!==null)I=!0,Y||(Y=!0,K());else{var W=u(g);W!==null&&oe(L,W.startTime-_)}}var Y=!1,Q=-1,V=5,C=-1;function X(){return R?!0:!(l.unstable_now()-C<V)}function F(){if(R=!1,Y){var _=l.unstable_now();C=_;var W=!0;try{e:{I=!1,N&&(N=!1,H(Q),Q=-1),T=!0;var J=A;try{t:{for(B(_),S=u(p);S!==null&&!(S.expirationTime>_&&X());){var de=S.callback;if(typeof de=="function"){S.callback=null,A=S.priorityLevel;var me=de(S.expirationTime<=_);if(_=l.unstable_now(),typeof me=="function"){S.callback=me,B(_),W=!0;break t}S===u(p)&&c(p),B(_)}else c(p);S=u(p)}if(S!==null)W=!0;else{var v=u(g);v!==null&&oe(L,v.startTime-_),W=!1}}break e}finally{S=null,A=J,T=!1}W=void 0}}finally{W?K():Y=!1}}}var K;if(typeof U=="function")K=function(){U(F)};else if(typeof MessageChannel<"u"){var ie=new MessageChannel,ge=ie.port2;ie.port1.onmessage=F,K=function(){ge.postMessage(null)}}else K=function(){O(F,0)};function oe(_,W){Q=O(function(){_(l.unstable_now())},W)}l.unstable_IdlePriority=5,l.unstable_ImmediatePriority=1,l.unstable_LowPriority=4,l.unstable_NormalPriority=3,l.unstable_Profiling=null,l.unstable_UserBlockingPriority=2,l.unstable_cancelCallback=function(_){_.callback=null},l.unstable_forceFrameRate=function(_){0>_||125<_?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):V=0<_?Math.floor(1e3/_):5},l.unstable_getCurrentPriorityLevel=function(){return A},l.unstable_next=function(_){switch(A){case 1:case 2:case 3:var W=3;break;default:W=A}var J=A;A=W;try{return _()}finally{A=J}},l.unstable_requestPaint=function(){R=!0},l.unstable_runWithPriority=function(_,W){switch(_){case 1:case 2:case 3:case 4:case 5:break;default:_=3}var J=A;A=_;try{return W()}finally{A=J}},l.unstable_scheduleCallback=function(_,W,J){var de=l.unstable_now();switch(typeof J=="object"&&J!==null?(J=J.delay,J=typeof J=="number"&&0<J?de+J:de):J=de,_){case 1:var me=-1;break;case 2:me=250;break;case 5:me=1073741823;break;case 4:me=1e4;break;default:me=5e3}return me=J+me,_={id:y++,callback:W,priorityLevel:_,startTime:J,expirationTime:me,sortIndex:-1},J>de?(_.sortIndex=J,o(g,_),u(p)===null&&_===u(g)&&(N?(H(Q),Q=-1):N=!0,oe(L,J-de))):(_.sortIndex=me,o(p,_),I||T||(I=!0,Y||(Y=!0,K()))),_},l.unstable_shouldYield=X,l.unstable_wrapCallback=function(_){var W=A;return function(){var J=A;A=W;try{return _.apply(this,arguments)}finally{A=J}}}})(Gu)),Gu}var bm;function Fy(){return bm||(bm=1,qu.exports=$y()),qu.exports}var Vu={exports:{}},zt={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var vm;function Py(){if(vm)return zt;vm=1;var l=id();function o(p){var g="https://react.dev/errors/"+p;if(1<arguments.length){g+="?args[]="+encodeURIComponent(arguments[1]);for(var y=2;y<arguments.length;y++)g+="&args[]="+encodeURIComponent(arguments[y])}return"Minified React error #"+p+"; visit "+g+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function u(){}var c={d:{f:u,r:function(){throw Error(o(522))},D:u,C:u,L:u,m:u,X:u,S:u,M:u},p:0,findDOMNode:null},f=Symbol.for("react.portal");function d(p,g,y){var S=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:f,key:S==null?null:""+S,children:p,containerInfo:g,implementation:y}}var h=l.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function x(p,g){if(p==="font")return"";if(typeof g=="string")return g==="use-credentials"?g:""}return zt.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=c,zt.createPortal=function(p,g){var y=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!g||g.nodeType!==1&&g.nodeType!==9&&g.nodeType!==11)throw Error(o(299));return d(p,g,null,y)},zt.flushSync=function(p){var g=h.T,y=c.p;try{if(h.T=null,c.p=2,p)return p()}finally{h.T=g,c.p=y,c.d.f()}},zt.preconnect=function(p,g){typeof p=="string"&&(g?(g=g.crossOrigin,g=typeof g=="string"?g==="use-credentials"?g:"":void 0):g=null,c.d.C(p,g))},zt.prefetchDNS=function(p){typeof p=="string"&&c.d.D(p)},zt.preinit=function(p,g){if(typeof p=="string"&&g&&typeof g.as=="string"){var y=g.as,S=x(y,g.crossOrigin),A=typeof g.integrity=="string"?g.integrity:void 0,T=typeof g.fetchPriority=="string"?g.fetchPriority:void 0;y==="style"?c.d.S(p,typeof g.precedence=="string"?g.precedence:void 0,{crossOrigin:S,integrity:A,fetchPriority:T}):y==="script"&&c.d.X(p,{crossOrigin:S,integrity:A,fetchPriority:T,nonce:typeof g.nonce=="string"?g.nonce:void 0})}},zt.preinitModule=function(p,g){if(typeof p=="string")if(typeof g=="object"&&g!==null){if(g.as==null||g.as==="script"){var y=x(g.as,g.crossOrigin);c.d.M(p,{crossOrigin:y,integrity:typeof g.integrity=="string"?g.integrity:void 0,nonce:typeof g.nonce=="string"?g.nonce:void 0})}}else g==null&&c.d.M(p)},zt.preload=function(p,g){if(typeof p=="string"&&typeof g=="object"&&g!==null&&typeof g.as=="string"){var y=g.as,S=x(y,g.crossOrigin);c.d.L(p,y,{crossOrigin:S,integrity:typeof g.integrity=="string"?g.integrity:void 0,nonce:typeof g.nonce=="string"?g.nonce:void 0,type:typeof g.type=="string"?g.type:void 0,fetchPriority:typeof g.fetchPriority=="string"?g.fetchPriority:void 0,referrerPolicy:typeof g.referrerPolicy=="string"?g.referrerPolicy:void 0,imageSrcSet:typeof g.imageSrcSet=="string"?g.imageSrcSet:void 0,imageSizes:typeof g.imageSizes=="string"?g.imageSizes:void 0,media:typeof g.media=="string"?g.media:void 0})}},zt.preloadModule=function(p,g){if(typeof p=="string")if(g){var y=x(g.as,g.crossOrigin);c.d.m(p,{as:typeof g.as=="string"&&g.as!=="script"?g.as:void 0,crossOrigin:y,integrity:typeof g.integrity=="string"?g.integrity:void 0})}else c.d.m(p)},zt.requestFormReset=function(p){c.d.r(p)},zt.unstable_batchedUpdates=function(p,g){return p(g)},zt.useFormState=function(p,g,y){return h.H.useFormState(p,g,y)},zt.useFormStatus=function(){return h.H.useHostTransitionStatus()},zt.version="19.2.4",zt}var Sm;function Jy(){if(Sm)return Vu.exports;Sm=1;function l(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(l)}catch(o){console.error(o)}}return l(),Vu.exports=Py(),Vu.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var wm;function eb(){if(wm)return ki;wm=1;var l=Fy(),o=id(),u=Jy();function c(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var a=2;a<arguments.length;a++)t+="&args[]="+encodeURIComponent(arguments[a])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function f(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function d(e){var t=e,a=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,(t.flags&4098)!==0&&(a=t.return),e=t.return;while(e)}return t.tag===3?a:null}function h(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function x(e){if(e.tag===31){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function p(e){if(d(e)!==e)throw Error(c(188))}function g(e){var t=e.alternate;if(!t){if(t=d(e),t===null)throw Error(c(188));return t!==e?null:e}for(var a=e,n=t;;){var i=a.return;if(i===null)break;var r=i.alternate;if(r===null){if(n=i.return,n!==null){a=n;continue}break}if(i.child===r.child){for(r=i.child;r;){if(r===a)return p(i),e;if(r===n)return p(i),t;r=r.sibling}throw Error(c(188))}if(a.return!==n.return)a=i,n=r;else{for(var m=!1,b=i.child;b;){if(b===a){m=!0,a=i,n=r;break}if(b===n){m=!0,n=i,a=r;break}b=b.sibling}if(!m){for(b=r.child;b;){if(b===a){m=!0,a=r,n=i;break}if(b===n){m=!0,n=r,a=i;break}b=b.sibling}if(!m)throw Error(c(189))}}if(a.alternate!==n)throw Error(c(190))}if(a.tag!==3)throw Error(c(188));return a.stateNode.current===a?e:t}function y(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e;for(e=e.child;e!==null;){if(t=y(e),t!==null)return t;e=e.sibling}return null}var S=Object.assign,A=Symbol.for("react.element"),T=Symbol.for("react.transitional.element"),I=Symbol.for("react.portal"),N=Symbol.for("react.fragment"),R=Symbol.for("react.strict_mode"),O=Symbol.for("react.profiler"),H=Symbol.for("react.consumer"),U=Symbol.for("react.context"),B=Symbol.for("react.forward_ref"),L=Symbol.for("react.suspense"),Y=Symbol.for("react.suspense_list"),Q=Symbol.for("react.memo"),V=Symbol.for("react.lazy"),C=Symbol.for("react.activity"),X=Symbol.for("react.memo_cache_sentinel"),F=Symbol.iterator;function K(e){return e===null||typeof e!="object"?null:(e=F&&e[F]||e["@@iterator"],typeof e=="function"?e:null)}var ie=Symbol.for("react.client.reference");function ge(e){if(e==null)return null;if(typeof e=="function")return e.$$typeof===ie?null:e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case N:return"Fragment";case O:return"Profiler";case R:return"StrictMode";case L:return"Suspense";case Y:return"SuspenseList";case C:return"Activity"}if(typeof e=="object")switch(e.$$typeof){case I:return"Portal";case U:return e.displayName||"Context";case H:return(e._context.displayName||"Context")+".Consumer";case B:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case Q:return t=e.displayName||null,t!==null?t:ge(e.type)||"Memo";case V:t=e._payload,e=e._init;try{return ge(e(t))}catch{}}return null}var oe=Array.isArray,_=o.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,W=u.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,J={pending:!1,data:null,method:null,action:null},de=[],me=-1;function v(e){return{current:e}}function j(e){0>me||(e.current=de[me],de[me]=null,me--)}function z(e,t){me++,de[me]=e.current,e.current=t}var ee=v(null),ue=v(null),ce=v(null),fe=v(null);function D(e,t){switch(z(ce,t),z(ue,e),z(ee,null),t.nodeType){case 9:case 11:e=(e=t.documentElement)&&(e=e.namespaceURI)?zp(e):0;break;default:if(e=t.tagName,t=t.namespaceURI)t=zp(t),e=Dp(t,e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}j(ee),z(ee,e)}function re(){j(ee),j(ue),j(ce)}function P(e){e.memoizedState!==null&&z(fe,e);var t=ee.current,a=Dp(t,e.type);t!==a&&(z(ue,e),z(ee,a))}function te(e){ue.current===e&&(j(ee),j(ue)),fe.current===e&&(j(fe),Ei._currentValue=J)}var he,ye;function we(e){if(he===void 0)try{throw Error()}catch(a){var t=a.stack.trim().match(/\n( *(at )?)/);he=t&&t[1]||"",ye=-1<a.stack.indexOf(`
    at`)?" (<anonymous>)":-1<a.stack.indexOf("@")?"@unknown:0:0":""}return`
`+he+e+ye}var ot=!1;function He(e,t){if(!e||ot)return"";ot=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var n={DetermineComponentFrameRoot:function(){try{if(t){var se=function(){throw Error()};if(Object.defineProperty(se.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(se,[])}catch($){var Z=$}Reflect.construct(e,[],se)}else{try{se.call()}catch($){Z=$}e.call(se.prototype)}}else{try{throw Error()}catch($){Z=$}(se=e())&&typeof se.catch=="function"&&se.catch(function(){})}}catch($){if($&&Z&&typeof $.stack=="string")return[$.stack,Z.stack]}return[null,null]}};n.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var i=Object.getOwnPropertyDescriptor(n.DetermineComponentFrameRoot,"name");i&&i.configurable&&Object.defineProperty(n.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var r=n.DetermineComponentFrameRoot(),m=r[0],b=r[1];if(m&&b){var E=m.split(`
`),G=b.split(`
`);for(i=n=0;n<E.length&&!E[n].includes("DetermineComponentFrameRoot");)n++;for(;i<G.length&&!G[i].includes("DetermineComponentFrameRoot");)i++;if(n===E.length||i===G.length)for(n=E.length-1,i=G.length-1;1<=n&&0<=i&&E[n]!==G[i];)i--;for(;1<=n&&0<=i;n--,i--)if(E[n]!==G[i]){if(n!==1||i!==1)do if(n--,i--,0>i||E[n]!==G[i]){var ae=`
`+E[n].replace(" at new "," at ");return e.displayName&&ae.includes("<anonymous>")&&(ae=ae.replace("<anonymous>",e.displayName)),ae}while(1<=n&&0<=i);break}}}finally{ot=!1,Error.prepareStackTrace=a}return(a=e?e.displayName||e.name:"")?we(a):""}function Xe(e,t){switch(e.tag){case 26:case 27:case 5:return we(e.type);case 16:return we("Lazy");case 13:return e.child!==t&&t!==null?we("Suspense Fallback"):we("Suspense");case 19:return we("SuspenseList");case 0:case 15:return He(e.type,!1);case 11:return He(e.type.render,!1);case 1:return He(e.type,!0);case 31:return we("Activity");default:return""}}function je(e){try{var t="",a=null;do t+=Xe(e,a),a=e,e=e.return;while(e);return t}catch(n){return`
Error generating stack: `+n.message+`
`+n.stack}}var le=Object.prototype.hasOwnProperty,Ce=l.unstable_scheduleCallback,Re=l.unstable_cancelCallback,Pe=l.unstable_shouldYield,De=l.unstable_requestPaint,_e=l.unstable_now,pt=l.unstable_getCurrentPriorityLevel,lt=l.unstable_ImmediatePriority,mt=l.unstable_UserBlockingPriority,pa=l.unstable_NormalPriority,Us=l.unstable_LowPriority,tn=l.unstable_IdlePriority,ea=l.log,Dl=l.unstable_setDisableYieldValue,_a=null,yt=null;function ta(e){if(typeof ea=="function"&&Dl(e),yt&&typeof yt.setStrictMode=="function")try{yt.setStrictMode(_a,e)}catch{}}var wt=Math.clz32?Math.clz32:Gi,il=Math.log,qi=Math.LN2;function Gi(e){return e>>>=0,e===0?32:31-(il(e)/qi|0)|0}var Bl=256,Hl=262144,ql=4194304;function an(e){var t=e&42;if(t!==0)return t;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return e&261888;case 262144:case 524288:case 1048576:case 2097152:return e&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return e&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function Gl(e,t,a){var n=e.pendingLanes;if(n===0)return 0;var i=0,r=e.suspendedLanes,m=e.pingedLanes;e=e.warmLanes;var b=n&134217727;return b!==0?(n=b&~r,n!==0?i=an(n):(m&=b,m!==0?i=an(m):a||(a=b&~e,a!==0&&(i=an(a))))):(b=n&~r,b!==0?i=an(b):m!==0?i=an(m):a||(a=n&~e,a!==0&&(i=an(a)))),i===0?0:t!==0&&t!==i&&(t&r)===0&&(r=i&-i,a=t&-t,r>=a||r===32&&(a&4194048)!==0)?t:i}function rl(e,t){return(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&t)===0}function Co(e,t){switch(e){case 1:case 2:case 4:case 8:case 64:return t+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Vi(){var e=ql;return ql<<=1,(ql&62914560)===0&&(ql=4194304),e}function zs(e){for(var t=[],a=0;31>a;a++)t.push(e);return t}function ol(e,t){e.pendingLanes|=t,t!==268435456&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function Vl(e,t,a,n,i,r){var m=e.pendingLanes;e.pendingLanes=a,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=a,e.entangledLanes&=a,e.errorRecoveryDisabledLanes&=a,e.shellSuspendCounter=0;var b=e.entanglements,E=e.expirationTimes,G=e.hiddenUpdates;for(a=m&~a;0<a;){var ae=31-wt(a),se=1<<ae;b[ae]=0,E[ae]=-1;var Z=G[ae];if(Z!==null)for(G[ae]=null,ae=0;ae<Z.length;ae++){var $=Z[ae];$!==null&&($.lane&=-536870913)}a&=~se}n!==0&&Qi(e,n,0),r!==0&&i===0&&e.tag!==0&&(e.suspendedLanes|=r&~(m&~t))}function Qi(e,t,a){e.pendingLanes|=t,e.suspendedLanes&=~t;var n=31-wt(t);e.entangledLanes|=t,e.entanglements[n]=e.entanglements[n]|1073741824|a&261930}function Ds(e,t){var a=e.entangledLanes|=t;for(e=e.entanglements;a;){var n=31-wt(a),i=1<<n;i&t|e[n]&t&&(e[n]|=t),a&=~i}}function Zi(e,t){var a=t&-t;return a=(a&42)!==0?1:Bs(a),(a&(e.suspendedLanes|t))!==0?0:a}function Bs(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function Hs(e){return e&=-e,2<e?8<e?(e&134217727)!==0?32:268435456:8:2}function Yi(){var e=W.p;return e!==0?e:(e=window.event,e===void 0?32:rm(e.type))}function Xi(e,t){var a=W.p;try{return W.p=e,t()}finally{W.p=a}}var Ya=Math.random().toString(36).slice(2),_t="__reactFiber$"+Ya,Ut="__reactProps$"+Ya,kn="__reactContainer$"+Ya,On="__reactEvents$"+Ya,ko="__reactListeners$"+Ya,Ki="__reactHandles$"+Ya,qs="__reactResources$"+Ya,Ql="__reactMarker$"+Ya;function Wi(e){delete e[_t],delete e[Ut],delete e[On],delete e[ko],delete e[Ki]}function cl(e){var t=e[_t];if(t)return t;for(var a=e.parentNode;a;){if(t=a[kn]||a[_t]){if(a=t.alternate,t.child!==null||a!==null&&a.child!==null)for(e=Zp(e);e!==null;){if(a=e[_t])return a;e=Zp(e)}return t}e=a,a=e.parentNode}return null}function ul(e){if(e=e[_t]||e[kn]){var t=e.tag;if(t===5||t===6||t===13||t===31||t===26||t===27||t===3)return e}return null}function Zl(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e.stateNode;throw Error(c(33))}function be(e){var t=e[qs];return t||(t=e[qs]={hoistableStyles:new Map,hoistableScripts:new Map}),t}function ve(e){e[Ql]=!0}var Ve=new Set,Te={};function Ke(e,t){$e(e,t),$e(e+"Capture",t)}function $e(e,t){for(Te[e]=t,e=0;e<t.length;e++)Ve.add(t[e])}var Ht=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),bt={},Qt={};function In(e){return le.call(Qt,e)?!0:le.call(bt,e)?!1:Ht.test(e)?Qt[e]=!0:(bt[e]=!0,!1)}function Ta(e,t,a){if(In(t))if(a===null)e.removeAttribute(t);else{switch(typeof a){case"undefined":case"function":case"symbol":e.removeAttribute(t);return;case"boolean":var n=t.toLowerCase().slice(0,5);if(n!=="data-"&&n!=="aria-"){e.removeAttribute(t);return}}e.setAttribute(t,""+a)}}function Rn(e,t,a){if(a===null)e.removeAttribute(t);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(t);return}e.setAttribute(t,""+a)}}function Ca(e,t,a,n){if(n===null)e.removeAttribute(a);else{switch(typeof n){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(a);return}e.setAttributeNS(t,a,""+n)}}function ma(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Td(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function Hg(e,t,a){var n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t);if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,r=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(m){a=""+m,r.call(this,m)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return a},setValue:function(m){a=""+m},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Oo(e){if(!e._valueTracker){var t=Td(e)?"checked":"value";e._valueTracker=Hg(e,t,""+e[t])}}function Cd(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var a=t.getValue(),n="";return e&&(n=Td(e)?e.checked?"true":"false":e.value),e=n,e!==a?(t.setValue(e),!0):!1}function $i(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}var qg=/[\n"\\]/g;function ha(e){return e.replace(qg,function(t){return"\\"+t.charCodeAt(0).toString(16)+" "})}function Io(e,t,a,n,i,r,m,b){e.name="",m!=null&&typeof m!="function"&&typeof m!="symbol"&&typeof m!="boolean"?e.type=m:e.removeAttribute("type"),t!=null?m==="number"?(t===0&&e.value===""||e.value!=t)&&(e.value=""+ma(t)):e.value!==""+ma(t)&&(e.value=""+ma(t)):m!=="submit"&&m!=="reset"||e.removeAttribute("value"),t!=null?Ro(e,m,ma(t)):a!=null?Ro(e,m,ma(a)):n!=null&&e.removeAttribute("value"),i==null&&r!=null&&(e.defaultChecked=!!r),i!=null&&(e.checked=i&&typeof i!="function"&&typeof i!="symbol"),b!=null&&typeof b!="function"&&typeof b!="symbol"&&typeof b!="boolean"?e.name=""+ma(b):e.removeAttribute("name")}function kd(e,t,a,n,i,r,m,b){if(r!=null&&typeof r!="function"&&typeof r!="symbol"&&typeof r!="boolean"&&(e.type=r),t!=null||a!=null){if(!(r!=="submit"&&r!=="reset"||t!=null)){Oo(e);return}a=a!=null?""+ma(a):"",t=t!=null?""+ma(t):a,b||t===e.value||(e.value=t),e.defaultValue=t}n=n??i,n=typeof n!="function"&&typeof n!="symbol"&&!!n,e.checked=b?e.checked:!!n,e.defaultChecked=!!n,m!=null&&typeof m!="function"&&typeof m!="symbol"&&typeof m!="boolean"&&(e.name=m),Oo(e)}function Ro(e,t,a){t==="number"&&$i(e.ownerDocument)===e||e.defaultValue===""+a||(e.defaultValue=""+a)}function Yl(e,t,a,n){if(e=e.options,t){t={};for(var i=0;i<a.length;i++)t["$"+a[i]]=!0;for(a=0;a<e.length;a++)i=t.hasOwnProperty("$"+e[a].value),e[a].selected!==i&&(e[a].selected=i),i&&n&&(e[a].defaultSelected=!0)}else{for(a=""+ma(a),t=null,i=0;i<e.length;i++){if(e[i].value===a){e[i].selected=!0,n&&(e[i].defaultSelected=!0);return}t!==null||e[i].disabled||(t=e[i])}t!==null&&(t.selected=!0)}}function Od(e,t,a){if(t!=null&&(t=""+ma(t),t!==e.value&&(e.value=t),a==null)){e.defaultValue!==t&&(e.defaultValue=t);return}e.defaultValue=a!=null?""+ma(a):""}function Id(e,t,a,n){if(t==null){if(n!=null){if(a!=null)throw Error(c(92));if(oe(n)){if(1<n.length)throw Error(c(93));n=n[0]}a=n}a==null&&(a=""),t=a}a=ma(t),e.defaultValue=a,n=e.textContent,n===a&&n!==""&&n!==null&&(e.value=n),Oo(e)}function Xl(e,t){if(t){var a=e.firstChild;if(a&&a===e.lastChild&&a.nodeType===3){a.nodeValue=t;return}}e.textContent=t}var Gg=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Rd(e,t,a){var n=t.indexOf("--")===0;a==null||typeof a=="boolean"||a===""?n?e.setProperty(t,""):t==="float"?e.cssFloat="":e[t]="":n?e.setProperty(t,a):typeof a!="number"||a===0||Gg.has(t)?t==="float"?e.cssFloat=a:e[t]=(""+a).trim():e[t]=a+"px"}function Md(e,t,a){if(t!=null&&typeof t!="object")throw Error(c(62));if(e=e.style,a!=null){for(var n in a)!a.hasOwnProperty(n)||t!=null&&t.hasOwnProperty(n)||(n.indexOf("--")===0?e.setProperty(n,""):n==="float"?e.cssFloat="":e[n]="");for(var i in t)n=t[i],t.hasOwnProperty(i)&&a[i]!==n&&Rd(e,i,n)}else for(var r in t)t.hasOwnProperty(r)&&Rd(e,r,t[r])}function Mo(e){if(e.indexOf("-")===-1)return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Vg=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Qg=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Fi(e){return Qg.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}function nn(){}var Lo=null;function Uo(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Kl=null,Wl=null;function Ld(e){var t=ul(e);if(t&&(e=t.stateNode)){var a=e[Ut]||null;e:switch(e=t.stateNode,t.type){case"input":if(Io(e,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name),t=a.name,a.type==="radio"&&t!=null){for(a=e;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll('input[name="'+ha(""+t)+'"][type="radio"]'),t=0;t<a.length;t++){var n=a[t];if(n!==e&&n.form===e.form){var i=n[Ut]||null;if(!i)throw Error(c(90));Io(n,i.value,i.defaultValue,i.defaultValue,i.checked,i.defaultChecked,i.type,i.name)}}for(t=0;t<a.length;t++)n=a[t],n.form===e.form&&Cd(n)}break e;case"textarea":Od(e,a.value,a.defaultValue);break e;case"select":t=a.value,t!=null&&Yl(e,!!a.multiple,t,!1)}}}var zo=!1;function Ud(e,t,a){if(zo)return e(t,a);zo=!0;try{var n=e(t);return n}finally{if(zo=!1,(Kl!==null||Wl!==null)&&(Dr(),Kl&&(t=Kl,e=Wl,Wl=Kl=null,Ld(t),e)))for(t=0;t<e.length;t++)Ld(e[t])}}function Gs(e,t){var a=e.stateNode;if(a===null)return null;var n=a[Ut]||null;if(n===null)return null;a=n[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(e=e.type,n=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!n;break e;default:e=!1}if(e)return null;if(a&&typeof a!="function")throw Error(c(231,t,typeof a));return a}var ln=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Do=!1;if(ln)try{var Vs={};Object.defineProperty(Vs,"passive",{get:function(){Do=!0}}),window.addEventListener("test",Vs,Vs),window.removeEventListener("test",Vs,Vs)}catch{Do=!1}var Mn=null,Bo=null,Pi=null;function zd(){if(Pi)return Pi;var e,t=Bo,a=t.length,n,i="value"in Mn?Mn.value:Mn.textContent,r=i.length;for(e=0;e<a&&t[e]===i[e];e++);var m=a-e;for(n=1;n<=m&&t[a-n]===i[r-n];n++);return Pi=i.slice(e,1<n?1-n:void 0)}function Ji(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function er(){return!0}function Dd(){return!1}function Zt(e){function t(a,n,i,r,m){this._reactName=a,this._targetInst=i,this.type=n,this.nativeEvent=r,this.target=m,this.currentTarget=null;for(var b in e)e.hasOwnProperty(b)&&(a=e[b],this[b]=a?a(r):r[b]);return this.isDefaultPrevented=(r.defaultPrevented!=null?r.defaultPrevented:r.returnValue===!1)?er:Dd,this.isPropagationStopped=Dd,this}return S(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=er)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=er)},persist:function(){},isPersistent:er}),t}var dl={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},tr=Zt(dl),Qs=S({},dl,{view:0,detail:0}),Zg=Zt(Qs),Ho,qo,Zs,ar=S({},Qs,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Vo,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Zs&&(Zs&&e.type==="mousemove"?(Ho=e.screenX-Zs.screenX,qo=e.screenY-Zs.screenY):qo=Ho=0,Zs=e),Ho)},movementY:function(e){return"movementY"in e?e.movementY:qo}}),Bd=Zt(ar),Yg=S({},ar,{dataTransfer:0}),Xg=Zt(Yg),Kg=S({},Qs,{relatedTarget:0}),Go=Zt(Kg),Wg=S({},dl,{animationName:0,elapsedTime:0,pseudoElement:0}),$g=Zt(Wg),Fg=S({},dl,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Pg=Zt(Fg),Jg=S({},dl,{data:0}),Hd=Zt(Jg),ex={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},tx={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},ax={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function nx(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=ax[e])?!!t[e]:!1}function Vo(){return nx}var lx=S({},Qs,{key:function(e){if(e.key){var t=ex[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Ji(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?tx[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Vo,charCode:function(e){return e.type==="keypress"?Ji(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Ji(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),sx=Zt(lx),ix=S({},ar,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),qd=Zt(ix),rx=S({},Qs,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Vo}),ox=Zt(rx),cx=S({},dl,{propertyName:0,elapsedTime:0,pseudoElement:0}),ux=Zt(cx),dx=S({},ar,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),fx=Zt(dx),px=S({},dl,{newState:0,oldState:0}),mx=Zt(px),hx=[9,13,27,32],Qo=ln&&"CompositionEvent"in window,Ys=null;ln&&"documentMode"in document&&(Ys=document.documentMode);var gx=ln&&"TextEvent"in window&&!Ys,Gd=ln&&(!Qo||Ys&&8<Ys&&11>=Ys),Vd=" ",Qd=!1;function Zd(e,t){switch(e){case"keyup":return hx.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Yd(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var $l=!1;function xx(e,t){switch(e){case"compositionend":return Yd(t);case"keypress":return t.which!==32?null:(Qd=!0,Vd);case"textInput":return e=t.data,e===Vd&&Qd?null:e;default:return null}}function yx(e,t){if($l)return e==="compositionend"||!Qo&&Zd(e,t)?(e=zd(),Pi=Bo=Mn=null,$l=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Gd&&t.locale!=="ko"?null:t.data;default:return null}}var bx={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Xd(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!bx[e.type]:t==="textarea"}function Kd(e,t,a,n){Kl?Wl?Wl.push(n):Wl=[n]:Kl=n,t=Zr(t,"onChange"),0<t.length&&(a=new tr("onChange","change",null,a,n),e.push({event:a,listeners:t}))}var Xs=null,Ks=null;function vx(e){Op(e,0)}function nr(e){var t=Zl(e);if(Cd(t))return e}function Wd(e,t){if(e==="change")return t}var $d=!1;if(ln){var Zo;if(ln){var Yo="oninput"in document;if(!Yo){var Fd=document.createElement("div");Fd.setAttribute("oninput","return;"),Yo=typeof Fd.oninput=="function"}Zo=Yo}else Zo=!1;$d=Zo&&(!document.documentMode||9<document.documentMode)}function Pd(){Xs&&(Xs.detachEvent("onpropertychange",Jd),Ks=Xs=null)}function Jd(e){if(e.propertyName==="value"&&nr(Ks)){var t=[];Kd(t,Ks,e,Uo(e)),Ud(vx,t)}}function Sx(e,t,a){e==="focusin"?(Pd(),Xs=t,Ks=a,Xs.attachEvent("onpropertychange",Jd)):e==="focusout"&&Pd()}function wx(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return nr(Ks)}function Nx(e,t){if(e==="click")return nr(t)}function jx(e,t){if(e==="input"||e==="change")return nr(t)}function Ex(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var aa=typeof Object.is=="function"?Object.is:Ex;function Ws(e,t){if(aa(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var a=Object.keys(e),n=Object.keys(t);if(a.length!==n.length)return!1;for(n=0;n<a.length;n++){var i=a[n];if(!le.call(t,i)||!aa(e[i],t[i]))return!1}return!0}function ef(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function tf(e,t){var a=ef(e);e=0;for(var n;a;){if(a.nodeType===3){if(n=e+a.textContent.length,e<=t&&n>=t)return{node:a,offset:t-e};e=n}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=ef(a)}}function af(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?af(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function nf(e){e=e!=null&&e.ownerDocument!=null&&e.ownerDocument.defaultView!=null?e.ownerDocument.defaultView:window;for(var t=$i(e.document);t instanceof e.HTMLIFrameElement;){try{var a=typeof t.contentWindow.location.href=="string"}catch{a=!1}if(a)e=t.contentWindow;else break;t=$i(e.document)}return t}function Xo(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}var Ax=ln&&"documentMode"in document&&11>=document.documentMode,Fl=null,Ko=null,$s=null,Wo=!1;function lf(e,t,a){var n=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;Wo||Fl==null||Fl!==$i(n)||(n=Fl,"selectionStart"in n&&Xo(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),$s&&Ws($s,n)||($s=n,n=Zr(Ko,"onSelect"),0<n.length&&(t=new tr("onSelect","select",null,t,a),e.push({event:t,listeners:n}),t.target=Fl)))}function fl(e,t){var a={};return a[e.toLowerCase()]=t.toLowerCase(),a["Webkit"+e]="webkit"+t,a["Moz"+e]="moz"+t,a}var Pl={animationend:fl("Animation","AnimationEnd"),animationiteration:fl("Animation","AnimationIteration"),animationstart:fl("Animation","AnimationStart"),transitionrun:fl("Transition","TransitionRun"),transitionstart:fl("Transition","TransitionStart"),transitioncancel:fl("Transition","TransitionCancel"),transitionend:fl("Transition","TransitionEnd")},$o={},sf={};ln&&(sf=document.createElement("div").style,"AnimationEvent"in window||(delete Pl.animationend.animation,delete Pl.animationiteration.animation,delete Pl.animationstart.animation),"TransitionEvent"in window||delete Pl.transitionend.transition);function pl(e){if($o[e])return $o[e];if(!Pl[e])return e;var t=Pl[e],a;for(a in t)if(t.hasOwnProperty(a)&&a in sf)return $o[e]=t[a];return e}var rf=pl("animationend"),of=pl("animationiteration"),cf=pl("animationstart"),_x=pl("transitionrun"),Tx=pl("transitionstart"),Cx=pl("transitioncancel"),uf=pl("transitionend"),df=new Map,Fo="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Fo.push("scrollEnd");function ka(e,t){df.set(e,t),Ke(t,[e])}var lr=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)},ga=[],Jl=0,Po=0;function sr(){for(var e=Jl,t=Po=Jl=0;t<e;){var a=ga[t];ga[t++]=null;var n=ga[t];ga[t++]=null;var i=ga[t];ga[t++]=null;var r=ga[t];if(ga[t++]=null,n!==null&&i!==null){var m=n.pending;m===null?i.next=i:(i.next=m.next,m.next=i),n.pending=i}r!==0&&ff(a,i,r)}}function ir(e,t,a,n){ga[Jl++]=e,ga[Jl++]=t,ga[Jl++]=a,ga[Jl++]=n,Po|=n,e.lanes|=n,e=e.alternate,e!==null&&(e.lanes|=n)}function Jo(e,t,a,n){return ir(e,t,a,n),rr(e)}function ml(e,t){return ir(e,null,null,t),rr(e)}function ff(e,t,a){e.lanes|=a;var n=e.alternate;n!==null&&(n.lanes|=a);for(var i=!1,r=e.return;r!==null;)r.childLanes|=a,n=r.alternate,n!==null&&(n.childLanes|=a),r.tag===22&&(e=r.stateNode,e===null||e._visibility&1||(i=!0)),e=r,r=r.return;return e.tag===3?(r=e.stateNode,i&&t!==null&&(i=31-wt(a),e=r.hiddenUpdates,n=e[i],n===null?e[i]=[t]:n.push(t),t.lane=a|536870912),r):null}function rr(e){if(50<yi)throw yi=0,ou=null,Error(c(185));for(var t=e.return;t!==null;)e=t,t=e.return;return e.tag===3?e.stateNode:null}var es={};function kx(e,t,a,n){this.tag=e,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function na(e,t,a,n){return new kx(e,t,a,n)}function ec(e){return e=e.prototype,!(!e||!e.isReactComponent)}function sn(e,t){var a=e.alternate;return a===null?(a=na(e.tag,t,e.key,e.mode),a.elementType=e.elementType,a.type=e.type,a.stateNode=e.stateNode,a.alternate=e,e.alternate=a):(a.pendingProps=t,a.type=e.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=e.flags&65011712,a.childLanes=e.childLanes,a.lanes=e.lanes,a.child=e.child,a.memoizedProps=e.memoizedProps,a.memoizedState=e.memoizedState,a.updateQueue=e.updateQueue,t=e.dependencies,a.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},a.sibling=e.sibling,a.index=e.index,a.ref=e.ref,a.refCleanup=e.refCleanup,a}function pf(e,t){e.flags&=65011714;var a=e.alternate;return a===null?(e.childLanes=0,e.lanes=t,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=a.childLanes,e.lanes=a.lanes,e.child=a.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=a.memoizedProps,e.memoizedState=a.memoizedState,e.updateQueue=a.updateQueue,e.type=a.type,t=a.dependencies,e.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),e}function or(e,t,a,n,i,r){var m=0;if(n=e,typeof e=="function")ec(e)&&(m=1);else if(typeof e=="string")m=Ly(e,a,ee.current)?26:e==="html"||e==="head"||e==="body"?27:5;else e:switch(e){case C:return e=na(31,a,t,i),e.elementType=C,e.lanes=r,e;case N:return hl(a.children,i,r,t);case R:m=8,i|=24;break;case O:return e=na(12,a,t,i|2),e.elementType=O,e.lanes=r,e;case L:return e=na(13,a,t,i),e.elementType=L,e.lanes=r,e;case Y:return e=na(19,a,t,i),e.elementType=Y,e.lanes=r,e;default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case U:m=10;break e;case H:m=9;break e;case B:m=11;break e;case Q:m=14;break e;case V:m=16,n=null;break e}m=29,a=Error(c(130,e===null?"null":typeof e,"")),n=null}return t=na(m,a,t,i),t.elementType=e,t.type=n,t.lanes=r,t}function hl(e,t,a,n){return e=na(7,e,n,t),e.lanes=a,e}function tc(e,t,a){return e=na(6,e,null,t),e.lanes=a,e}function mf(e){var t=na(18,null,null,0);return t.stateNode=e,t}function ac(e,t,a){return t=na(4,e.children!==null?e.children:[],e.key,t),t.lanes=a,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}var hf=new WeakMap;function xa(e,t){if(typeof e=="object"&&e!==null){var a=hf.get(e);return a!==void 0?a:(t={value:e,source:t,stack:je(t)},hf.set(e,t),t)}return{value:e,source:t,stack:je(t)}}var ts=[],as=0,cr=null,Fs=0,ya=[],ba=0,Ln=null,Xa=1,Ka="";function rn(e,t){ts[as++]=Fs,ts[as++]=cr,cr=e,Fs=t}function gf(e,t,a){ya[ba++]=Xa,ya[ba++]=Ka,ya[ba++]=Ln,Ln=e;var n=Xa;e=Ka;var i=32-wt(n)-1;n&=~(1<<i),a+=1;var r=32-wt(t)+i;if(30<r){var m=i-i%5;r=(n&(1<<m)-1).toString(32),n>>=m,i-=m,Xa=1<<32-wt(t)+i|a<<i|n,Ka=r+e}else Xa=1<<r|a<<i|n,Ka=e}function nc(e){e.return!==null&&(rn(e,1),gf(e,1,0))}function lc(e){for(;e===cr;)cr=ts[--as],ts[as]=null,Fs=ts[--as],ts[as]=null;for(;e===Ln;)Ln=ya[--ba],ya[ba]=null,Ka=ya[--ba],ya[ba]=null,Xa=ya[--ba],ya[ba]=null}function xf(e,t){ya[ba++]=Xa,ya[ba++]=Ka,ya[ba++]=Ln,Xa=t.id,Ka=t.overflow,Ln=e}var It=null,ut=null,Be=!1,Un=null,va=!1,sc=Error(c(519));function zn(e){var t=Error(c(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Ps(xa(t,e)),sc}function yf(e){var t=e.stateNode,a=e.type,n=e.memoizedProps;switch(t[_t]=e,t[Ut]=n,a){case"dialog":Le("cancel",t),Le("close",t);break;case"iframe":case"object":case"embed":Le("load",t);break;case"video":case"audio":for(a=0;a<vi.length;a++)Le(vi[a],t);break;case"source":Le("error",t);break;case"img":case"image":case"link":Le("error",t),Le("load",t);break;case"details":Le("toggle",t);break;case"input":Le("invalid",t),kd(t,n.value,n.defaultValue,n.checked,n.defaultChecked,n.type,n.name,!0);break;case"select":Le("invalid",t);break;case"textarea":Le("invalid",t),Id(t,n.value,n.defaultValue,n.children)}a=n.children,typeof a!="string"&&typeof a!="number"&&typeof a!="bigint"||t.textContent===""+a||n.suppressHydrationWarning===!0||Lp(t.textContent,a)?(n.popover!=null&&(Le("beforetoggle",t),Le("toggle",t)),n.onScroll!=null&&Le("scroll",t),n.onScrollEnd!=null&&Le("scrollend",t),n.onClick!=null&&(t.onclick=nn),t=!0):t=!1,t||zn(e,!0)}function bf(e){for(It=e.return;It;)switch(It.tag){case 5:case 31:case 13:va=!1;return;case 27:case 3:va=!0;return;default:It=It.return}}function ns(e){if(e!==It)return!1;if(!Be)return bf(e),Be=!0,!1;var t=e.tag,a;if((a=t!==3&&t!==27)&&((a=t===5)&&(a=e.type,a=!(a!=="form"&&a!=="button")||Nu(e.type,e.memoizedProps)),a=!a),a&&ut&&zn(e),bf(e),t===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(c(317));ut=Qp(e)}else if(t===31){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(c(317));ut=Qp(e)}else t===27?(t=ut,Fn(e.type)?(e=Tu,Tu=null,ut=e):ut=t):ut=It?wa(e.stateNode.nextSibling):null;return!0}function gl(){ut=It=null,Be=!1}function ic(){var e=Un;return e!==null&&(Wt===null?Wt=e:Wt.push.apply(Wt,e),Un=null),e}function Ps(e){Un===null?Un=[e]:Un.push(e)}var rc=v(null),xl=null,on=null;function Dn(e,t,a){z(rc,t._currentValue),t._currentValue=a}function cn(e){e._currentValue=rc.current,j(rc)}function oc(e,t,a){for(;e!==null;){var n=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,n!==null&&(n.childLanes|=t)):n!==null&&(n.childLanes&t)!==t&&(n.childLanes|=t),e===a)break;e=e.return}}function cc(e,t,a,n){var i=e.child;for(i!==null&&(i.return=e);i!==null;){var r=i.dependencies;if(r!==null){var m=i.child;r=r.firstContext;e:for(;r!==null;){var b=r;r=i;for(var E=0;E<t.length;E++)if(b.context===t[E]){r.lanes|=a,b=r.alternate,b!==null&&(b.lanes|=a),oc(r.return,a,e),n||(m=null);break e}r=b.next}}else if(i.tag===18){if(m=i.return,m===null)throw Error(c(341));m.lanes|=a,r=m.alternate,r!==null&&(r.lanes|=a),oc(m,a,e),m=null}else m=i.child;if(m!==null)m.return=i;else for(m=i;m!==null;){if(m===e){m=null;break}if(i=m.sibling,i!==null){i.return=m.return,m=i;break}m=m.return}i=m}}function ls(e,t,a,n){e=null;for(var i=t,r=!1;i!==null;){if(!r){if((i.flags&524288)!==0)r=!0;else if((i.flags&262144)!==0)break}if(i.tag===10){var m=i.alternate;if(m===null)throw Error(c(387));if(m=m.memoizedProps,m!==null){var b=i.type;aa(i.pendingProps.value,m.value)||(e!==null?e.push(b):e=[b])}}else if(i===fe.current){if(m=i.alternate,m===null)throw Error(c(387));m.memoizedState.memoizedState!==i.memoizedState.memoizedState&&(e!==null?e.push(Ei):e=[Ei])}i=i.return}e!==null&&cc(t,e,a,n),t.flags|=262144}function ur(e){for(e=e.firstContext;e!==null;){if(!aa(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function yl(e){xl=e,on=null,e=e.dependencies,e!==null&&(e.firstContext=null)}function Rt(e){return vf(xl,e)}function dr(e,t){return xl===null&&yl(e),vf(e,t)}function vf(e,t){var a=t._currentValue;if(t={context:t,memoizedValue:a,next:null},on===null){if(e===null)throw Error(c(308));on=t,e.dependencies={lanes:0,firstContext:t},e.flags|=524288}else on=on.next=t;return a}var Ox=typeof AbortController<"u"?AbortController:function(){var e=[],t=this.signal={aborted:!1,addEventListener:function(a,n){e.push(n)}};this.abort=function(){t.aborted=!0,e.forEach(function(a){return a()})}},Ix=l.unstable_scheduleCallback,Rx=l.unstable_NormalPriority,Nt={$$typeof:U,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function uc(){return{controller:new Ox,data:new Map,refCount:0}}function Js(e){e.refCount--,e.refCount===0&&Ix(Rx,function(){e.controller.abort()})}var ei=null,dc=0,ss=0,is=null;function Mx(e,t){if(ei===null){var a=ei=[];dc=0,ss=mu(),is={status:"pending",value:void 0,then:function(n){a.push(n)}}}return dc++,t.then(Sf,Sf),t}function Sf(){if(--dc===0&&ei!==null){is!==null&&(is.status="fulfilled");var e=ei;ei=null,ss=0,is=null;for(var t=0;t<e.length;t++)(0,e[t])()}}function Lx(e,t){var a=[],n={status:"pending",value:null,reason:null,then:function(i){a.push(i)}};return e.then(function(){n.status="fulfilled",n.value=t;for(var i=0;i<a.length;i++)(0,a[i])(t)},function(i){for(n.status="rejected",n.reason=i,i=0;i<a.length;i++)(0,a[i])(void 0)}),n}var wf=_.S;_.S=function(e,t){sp=_e(),typeof t=="object"&&t!==null&&typeof t.then=="function"&&Mx(e,t),wf!==null&&wf(e,t)};var bl=v(null);function fc(){var e=bl.current;return e!==null?e:ct.pooledCache}function fr(e,t){t===null?z(bl,bl.current):z(bl,t.pool)}function Nf(){var e=fc();return e===null?null:{parent:Nt._currentValue,pool:e}}var rs=Error(c(460)),pc=Error(c(474)),pr=Error(c(542)),mr={then:function(){}};function jf(e){return e=e.status,e==="fulfilled"||e==="rejected"}function Ef(e,t,a){switch(a=e[a],a===void 0?e.push(t):a!==t&&(t.then(nn,nn),t=a),t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,_f(e),e;default:if(typeof t.status=="string")t.then(nn,nn);else{if(e=ct,e!==null&&100<e.shellSuspendCounter)throw Error(c(482));e=t,e.status="pending",e.then(function(n){if(t.status==="pending"){var i=t;i.status="fulfilled",i.value=n}},function(n){if(t.status==="pending"){var i=t;i.status="rejected",i.reason=n}})}switch(t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,_f(e),e}throw Sl=t,rs}}function vl(e){try{var t=e._init;return t(e._payload)}catch(a){throw a!==null&&typeof a=="object"&&typeof a.then=="function"?(Sl=a,rs):a}}var Sl=null;function Af(){if(Sl===null)throw Error(c(459));var e=Sl;return Sl=null,e}function _f(e){if(e===rs||e===pr)throw Error(c(483))}var os=null,ti=0;function hr(e){var t=ti;return ti+=1,os===null&&(os=[]),Ef(os,e,t)}function ai(e,t){t=t.props.ref,e.ref=t!==void 0?t:null}function gr(e,t){throw t.$$typeof===A?Error(c(525)):(e=Object.prototype.toString.call(t),Error(c(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)))}function Tf(e){function t(M,k){if(e){var q=M.deletions;q===null?(M.deletions=[k],M.flags|=16):q.push(k)}}function a(M,k){if(!e)return null;for(;k!==null;)t(M,k),k=k.sibling;return null}function n(M){for(var k=new Map;M!==null;)M.key!==null?k.set(M.key,M):k.set(M.index,M),M=M.sibling;return k}function i(M,k){return M=sn(M,k),M.index=0,M.sibling=null,M}function r(M,k,q){return M.index=q,e?(q=M.alternate,q!==null?(q=q.index,q<k?(M.flags|=67108866,k):q):(M.flags|=67108866,k)):(M.flags|=1048576,k)}function m(M){return e&&M.alternate===null&&(M.flags|=67108866),M}function b(M,k,q,ne){return k===null||k.tag!==6?(k=tc(q,M.mode,ne),k.return=M,k):(k=i(k,q),k.return=M,k)}function E(M,k,q,ne){var Ee=q.type;return Ee===N?ae(M,k,q.props.children,ne,q.key):k!==null&&(k.elementType===Ee||typeof Ee=="object"&&Ee!==null&&Ee.$$typeof===V&&vl(Ee)===k.type)?(k=i(k,q.props),ai(k,q),k.return=M,k):(k=or(q.type,q.key,q.props,null,M.mode,ne),ai(k,q),k.return=M,k)}function G(M,k,q,ne){return k===null||k.tag!==4||k.stateNode.containerInfo!==q.containerInfo||k.stateNode.implementation!==q.implementation?(k=ac(q,M.mode,ne),k.return=M,k):(k=i(k,q.children||[]),k.return=M,k)}function ae(M,k,q,ne,Ee){return k===null||k.tag!==7?(k=hl(q,M.mode,ne,Ee),k.return=M,k):(k=i(k,q),k.return=M,k)}function se(M,k,q){if(typeof k=="string"&&k!==""||typeof k=="number"||typeof k=="bigint")return k=tc(""+k,M.mode,q),k.return=M,k;if(typeof k=="object"&&k!==null){switch(k.$$typeof){case T:return q=or(k.type,k.key,k.props,null,M.mode,q),ai(q,k),q.return=M,q;case I:return k=ac(k,M.mode,q),k.return=M,k;case V:return k=vl(k),se(M,k,q)}if(oe(k)||K(k))return k=hl(k,M.mode,q,null),k.return=M,k;if(typeof k.then=="function")return se(M,hr(k),q);if(k.$$typeof===U)return se(M,dr(M,k),q);gr(M,k)}return null}function Z(M,k,q,ne){var Ee=k!==null?k.key:null;if(typeof q=="string"&&q!==""||typeof q=="number"||typeof q=="bigint")return Ee!==null?null:b(M,k,""+q,ne);if(typeof q=="object"&&q!==null){switch(q.$$typeof){case T:return q.key===Ee?E(M,k,q,ne):null;case I:return q.key===Ee?G(M,k,q,ne):null;case V:return q=vl(q),Z(M,k,q,ne)}if(oe(q)||K(q))return Ee!==null?null:ae(M,k,q,ne,null);if(typeof q.then=="function")return Z(M,k,hr(q),ne);if(q.$$typeof===U)return Z(M,k,dr(M,q),ne);gr(M,q)}return null}function $(M,k,q,ne,Ee){if(typeof ne=="string"&&ne!==""||typeof ne=="number"||typeof ne=="bigint")return M=M.get(q)||null,b(k,M,""+ne,Ee);if(typeof ne=="object"&&ne!==null){switch(ne.$$typeof){case T:return M=M.get(ne.key===null?q:ne.key)||null,E(k,M,ne,Ee);case I:return M=M.get(ne.key===null?q:ne.key)||null,G(k,M,ne,Ee);case V:return ne=vl(ne),$(M,k,q,ne,Ee)}if(oe(ne)||K(ne))return M=M.get(q)||null,ae(k,M,ne,Ee,null);if(typeof ne.then=="function")return $(M,k,q,hr(ne),Ee);if(ne.$$typeof===U)return $(M,k,q,dr(k,ne),Ee);gr(k,ne)}return null}function Se(M,k,q,ne){for(var Ee=null,Qe=null,Ne=k,Ie=k=0,ze=null;Ne!==null&&Ie<q.length;Ie++){Ne.index>Ie?(ze=Ne,Ne=null):ze=Ne.sibling;var Ze=Z(M,Ne,q[Ie],ne);if(Ze===null){Ne===null&&(Ne=ze);break}e&&Ne&&Ze.alternate===null&&t(M,Ne),k=r(Ze,k,Ie),Qe===null?Ee=Ze:Qe.sibling=Ze,Qe=Ze,Ne=ze}if(Ie===q.length)return a(M,Ne),Be&&rn(M,Ie),Ee;if(Ne===null){for(;Ie<q.length;Ie++)Ne=se(M,q[Ie],ne),Ne!==null&&(k=r(Ne,k,Ie),Qe===null?Ee=Ne:Qe.sibling=Ne,Qe=Ne);return Be&&rn(M,Ie),Ee}for(Ne=n(Ne);Ie<q.length;Ie++)ze=$(Ne,M,Ie,q[Ie],ne),ze!==null&&(e&&ze.alternate!==null&&Ne.delete(ze.key===null?Ie:ze.key),k=r(ze,k,Ie),Qe===null?Ee=ze:Qe.sibling=ze,Qe=ze);return e&&Ne.forEach(function(al){return t(M,al)}),Be&&rn(M,Ie),Ee}function Ae(M,k,q,ne){if(q==null)throw Error(c(151));for(var Ee=null,Qe=null,Ne=k,Ie=k=0,ze=null,Ze=q.next();Ne!==null&&!Ze.done;Ie++,Ze=q.next()){Ne.index>Ie?(ze=Ne,Ne=null):ze=Ne.sibling;var al=Z(M,Ne,Ze.value,ne);if(al===null){Ne===null&&(Ne=ze);break}e&&Ne&&al.alternate===null&&t(M,Ne),k=r(al,k,Ie),Qe===null?Ee=al:Qe.sibling=al,Qe=al,Ne=ze}if(Ze.done)return a(M,Ne),Be&&rn(M,Ie),Ee;if(Ne===null){for(;!Ze.done;Ie++,Ze=q.next())Ze=se(M,Ze.value,ne),Ze!==null&&(k=r(Ze,k,Ie),Qe===null?Ee=Ze:Qe.sibling=Ze,Qe=Ze);return Be&&rn(M,Ie),Ee}for(Ne=n(Ne);!Ze.done;Ie++,Ze=q.next())Ze=$(Ne,M,Ie,Ze.value,ne),Ze!==null&&(e&&Ze.alternate!==null&&Ne.delete(Ze.key===null?Ie:Ze.key),k=r(Ze,k,Ie),Qe===null?Ee=Ze:Qe.sibling=Ze,Qe=Ze);return e&&Ne.forEach(function(Yy){return t(M,Yy)}),Be&&rn(M,Ie),Ee}function rt(M,k,q,ne){if(typeof q=="object"&&q!==null&&q.type===N&&q.key===null&&(q=q.props.children),typeof q=="object"&&q!==null){switch(q.$$typeof){case T:e:{for(var Ee=q.key;k!==null;){if(k.key===Ee){if(Ee=q.type,Ee===N){if(k.tag===7){a(M,k.sibling),ne=i(k,q.props.children),ne.return=M,M=ne;break e}}else if(k.elementType===Ee||typeof Ee=="object"&&Ee!==null&&Ee.$$typeof===V&&vl(Ee)===k.type){a(M,k.sibling),ne=i(k,q.props),ai(ne,q),ne.return=M,M=ne;break e}a(M,k);break}else t(M,k);k=k.sibling}q.type===N?(ne=hl(q.props.children,M.mode,ne,q.key),ne.return=M,M=ne):(ne=or(q.type,q.key,q.props,null,M.mode,ne),ai(ne,q),ne.return=M,M=ne)}return m(M);case I:e:{for(Ee=q.key;k!==null;){if(k.key===Ee)if(k.tag===4&&k.stateNode.containerInfo===q.containerInfo&&k.stateNode.implementation===q.implementation){a(M,k.sibling),ne=i(k,q.children||[]),ne.return=M,M=ne;break e}else{a(M,k);break}else t(M,k);k=k.sibling}ne=ac(q,M.mode,ne),ne.return=M,M=ne}return m(M);case V:return q=vl(q),rt(M,k,q,ne)}if(oe(q))return Se(M,k,q,ne);if(K(q)){if(Ee=K(q),typeof Ee!="function")throw Error(c(150));return q=Ee.call(q),Ae(M,k,q,ne)}if(typeof q.then=="function")return rt(M,k,hr(q),ne);if(q.$$typeof===U)return rt(M,k,dr(M,q),ne);gr(M,q)}return typeof q=="string"&&q!==""||typeof q=="number"||typeof q=="bigint"?(q=""+q,k!==null&&k.tag===6?(a(M,k.sibling),ne=i(k,q),ne.return=M,M=ne):(a(M,k),ne=tc(q,M.mode,ne),ne.return=M,M=ne),m(M)):a(M,k)}return function(M,k,q,ne){try{ti=0;var Ee=rt(M,k,q,ne);return os=null,Ee}catch(Ne){if(Ne===rs||Ne===pr)throw Ne;var Qe=na(29,Ne,null,M.mode);return Qe.lanes=ne,Qe.return=M,Qe}finally{}}}var wl=Tf(!0),Cf=Tf(!1),Bn=!1;function mc(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function hc(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function Hn(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function qn(e,t,a){var n=e.updateQueue;if(n===null)return null;if(n=n.shared,(We&2)!==0){var i=n.pending;return i===null?t.next=t:(t.next=i.next,i.next=t),n.pending=t,t=rr(e),ff(e,null,a),t}return ir(e,n,t,a),rr(e)}function ni(e,t,a){if(t=t.updateQueue,t!==null&&(t=t.shared,(a&4194048)!==0)){var n=t.lanes;n&=e.pendingLanes,a|=n,t.lanes=a,Ds(e,a)}}function gc(e,t){var a=e.updateQueue,n=e.alternate;if(n!==null&&(n=n.updateQueue,a===n)){var i=null,r=null;if(a=a.firstBaseUpdate,a!==null){do{var m={lane:a.lane,tag:a.tag,payload:a.payload,callback:null,next:null};r===null?i=r=m:r=r.next=m,a=a.next}while(a!==null);r===null?i=r=t:r=r.next=t}else i=r=t;a={baseState:n.baseState,firstBaseUpdate:i,lastBaseUpdate:r,shared:n.shared,callbacks:n.callbacks},e.updateQueue=a;return}e=a.lastBaseUpdate,e===null?a.firstBaseUpdate=t:e.next=t,a.lastBaseUpdate=t}var xc=!1;function li(){if(xc){var e=is;if(e!==null)throw e}}function si(e,t,a,n){xc=!1;var i=e.updateQueue;Bn=!1;var r=i.firstBaseUpdate,m=i.lastBaseUpdate,b=i.shared.pending;if(b!==null){i.shared.pending=null;var E=b,G=E.next;E.next=null,m===null?r=G:m.next=G,m=E;var ae=e.alternate;ae!==null&&(ae=ae.updateQueue,b=ae.lastBaseUpdate,b!==m&&(b===null?ae.firstBaseUpdate=G:b.next=G,ae.lastBaseUpdate=E))}if(r!==null){var se=i.baseState;m=0,ae=G=E=null,b=r;do{var Z=b.lane&-536870913,$=Z!==b.lane;if($?(Ue&Z)===Z:(n&Z)===Z){Z!==0&&Z===ss&&(xc=!0),ae!==null&&(ae=ae.next={lane:0,tag:b.tag,payload:b.payload,callback:null,next:null});e:{var Se=e,Ae=b;Z=t;var rt=a;switch(Ae.tag){case 1:if(Se=Ae.payload,typeof Se=="function"){se=Se.call(rt,se,Z);break e}se=Se;break e;case 3:Se.flags=Se.flags&-65537|128;case 0:if(Se=Ae.payload,Z=typeof Se=="function"?Se.call(rt,se,Z):Se,Z==null)break e;se=S({},se,Z);break e;case 2:Bn=!0}}Z=b.callback,Z!==null&&(e.flags|=64,$&&(e.flags|=8192),$=i.callbacks,$===null?i.callbacks=[Z]:$.push(Z))}else $={lane:Z,tag:b.tag,payload:b.payload,callback:b.callback,next:null},ae===null?(G=ae=$,E=se):ae=ae.next=$,m|=Z;if(b=b.next,b===null){if(b=i.shared.pending,b===null)break;$=b,b=$.next,$.next=null,i.lastBaseUpdate=$,i.shared.pending=null}}while(!0);ae===null&&(E=se),i.baseState=E,i.firstBaseUpdate=G,i.lastBaseUpdate=ae,r===null&&(i.shared.lanes=0),Yn|=m,e.lanes=m,e.memoizedState=se}}function kf(e,t){if(typeof e!="function")throw Error(c(191,e));e.call(t)}function Of(e,t){var a=e.callbacks;if(a!==null)for(e.callbacks=null,e=0;e<a.length;e++)kf(a[e],t)}var cs=v(null),xr=v(0);function If(e,t){e=yn,z(xr,e),z(cs,t),yn=e|t.baseLanes}function yc(){z(xr,yn),z(cs,cs.current)}function bc(){yn=xr.current,j(cs),j(xr)}var la=v(null),Sa=null;function Gn(e){var t=e.alternate;z(vt,vt.current&1),z(la,e),Sa===null&&(t===null||cs.current!==null||t.memoizedState!==null)&&(Sa=e)}function vc(e){z(vt,vt.current),z(la,e),Sa===null&&(Sa=e)}function Rf(e){e.tag===22?(z(vt,vt.current),z(la,e),Sa===null&&(Sa=e)):Vn()}function Vn(){z(vt,vt.current),z(la,la.current)}function sa(e){j(la),Sa===e&&(Sa=null),j(vt)}var vt=v(0);function yr(e){for(var t=e;t!==null;){if(t.tag===13){var a=t.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||Au(a)||_u(a)))return t}else if(t.tag===19&&(t.memoizedProps.revealOrder==="forwards"||t.memoizedProps.revealOrder==="backwards"||t.memoizedProps.revealOrder==="unstable_legacy-backwards"||t.memoizedProps.revealOrder==="together")){if((t.flags&128)!==0)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var un=0,Oe=null,st=null,jt=null,br=!1,us=!1,Nl=!1,vr=0,ii=0,ds=null,Ux=0;function ht(){throw Error(c(321))}function Sc(e,t){if(t===null)return!1;for(var a=0;a<t.length&&a<e.length;a++)if(!aa(e[a],t[a]))return!1;return!0}function wc(e,t,a,n,i,r){return un=r,Oe=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,_.H=e===null||e.memoizedState===null?g0:zc,Nl=!1,r=a(n,i),Nl=!1,us&&(r=Lf(t,a,n,i)),Mf(e),r}function Mf(e){_.H=ci;var t=st!==null&&st.next!==null;if(un=0,jt=st=Oe=null,br=!1,ii=0,ds=null,t)throw Error(c(300));e===null||Et||(e=e.dependencies,e!==null&&ur(e)&&(Et=!0))}function Lf(e,t,a,n){Oe=e;var i=0;do{if(us&&(ds=null),ii=0,us=!1,25<=i)throw Error(c(301));if(i+=1,jt=st=null,e.updateQueue!=null){var r=e.updateQueue;r.lastEffect=null,r.events=null,r.stores=null,r.memoCache!=null&&(r.memoCache.index=0)}_.H=x0,r=t(a,n)}while(us);return r}function zx(){var e=_.H,t=e.useState()[0];return t=typeof t.then=="function"?ri(t):t,e=e.useState()[0],(st!==null?st.memoizedState:null)!==e&&(Oe.flags|=1024),t}function Nc(){var e=vr!==0;return vr=0,e}function jc(e,t,a){t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a}function Ec(e){if(br){for(e=e.memoizedState;e!==null;){var t=e.queue;t!==null&&(t.pending=null),e=e.next}br=!1}un=0,jt=st=Oe=null,us=!1,ii=vr=0,ds=null}function qt(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return jt===null?Oe.memoizedState=jt=e:jt=jt.next=e,jt}function St(){if(st===null){var e=Oe.alternate;e=e!==null?e.memoizedState:null}else e=st.next;var t=jt===null?Oe.memoizedState:jt.next;if(t!==null)jt=t,st=e;else{if(e===null)throw Oe.alternate===null?Error(c(467)):Error(c(310));st=e,e={memoizedState:st.memoizedState,baseState:st.baseState,baseQueue:st.baseQueue,queue:st.queue,next:null},jt===null?Oe.memoizedState=jt=e:jt=jt.next=e}return jt}function Sr(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function ri(e){var t=ii;return ii+=1,ds===null&&(ds=[]),e=Ef(ds,e,t),t=Oe,(jt===null?t.memoizedState:jt.next)===null&&(t=t.alternate,_.H=t===null||t.memoizedState===null?g0:zc),e}function wr(e){if(e!==null&&typeof e=="object"){if(typeof e.then=="function")return ri(e);if(e.$$typeof===U)return Rt(e)}throw Error(c(438,String(e)))}function Ac(e){var t=null,a=Oe.updateQueue;if(a!==null&&(t=a.memoCache),t==null){var n=Oe.alternate;n!==null&&(n=n.updateQueue,n!==null&&(n=n.memoCache,n!=null&&(t={data:n.data.map(function(i){return i.slice()}),index:0})))}if(t==null&&(t={data:[],index:0}),a===null&&(a=Sr(),Oe.updateQueue=a),a.memoCache=t,a=t.data[t.index],a===void 0)for(a=t.data[t.index]=Array(e),n=0;n<e;n++)a[n]=X;return t.index++,a}function dn(e,t){return typeof t=="function"?t(e):t}function Nr(e){var t=St();return _c(t,st,e)}function _c(e,t,a){var n=e.queue;if(n===null)throw Error(c(311));n.lastRenderedReducer=a;var i=e.baseQueue,r=n.pending;if(r!==null){if(i!==null){var m=i.next;i.next=r.next,r.next=m}t.baseQueue=i=r,n.pending=null}if(r=e.baseState,i===null)e.memoizedState=r;else{t=i.next;var b=m=null,E=null,G=t,ae=!1;do{var se=G.lane&-536870913;if(se!==G.lane?(Ue&se)===se:(un&se)===se){var Z=G.revertLane;if(Z===0)E!==null&&(E=E.next={lane:0,revertLane:0,gesture:null,action:G.action,hasEagerState:G.hasEagerState,eagerState:G.eagerState,next:null}),se===ss&&(ae=!0);else if((un&Z)===Z){G=G.next,Z===ss&&(ae=!0);continue}else se={lane:0,revertLane:G.revertLane,gesture:null,action:G.action,hasEagerState:G.hasEagerState,eagerState:G.eagerState,next:null},E===null?(b=E=se,m=r):E=E.next=se,Oe.lanes|=Z,Yn|=Z;se=G.action,Nl&&a(r,se),r=G.hasEagerState?G.eagerState:a(r,se)}else Z={lane:se,revertLane:G.revertLane,gesture:G.gesture,action:G.action,hasEagerState:G.hasEagerState,eagerState:G.eagerState,next:null},E===null?(b=E=Z,m=r):E=E.next=Z,Oe.lanes|=se,Yn|=se;G=G.next}while(G!==null&&G!==t);if(E===null?m=r:E.next=b,!aa(r,e.memoizedState)&&(Et=!0,ae&&(a=is,a!==null)))throw a;e.memoizedState=r,e.baseState=m,e.baseQueue=E,n.lastRenderedState=r}return i===null&&(n.lanes=0),[e.memoizedState,n.dispatch]}function Tc(e){var t=St(),a=t.queue;if(a===null)throw Error(c(311));a.lastRenderedReducer=e;var n=a.dispatch,i=a.pending,r=t.memoizedState;if(i!==null){a.pending=null;var m=i=i.next;do r=e(r,m.action),m=m.next;while(m!==i);aa(r,t.memoizedState)||(Et=!0),t.memoizedState=r,t.baseQueue===null&&(t.baseState=r),a.lastRenderedState=r}return[r,n]}function Uf(e,t,a){var n=Oe,i=St(),r=Be;if(r){if(a===void 0)throw Error(c(407));a=a()}else a=t();var m=!aa((st||i).memoizedState,a);if(m&&(i.memoizedState=a,Et=!0),i=i.queue,Oc(Bf.bind(null,n,i,e),[e]),i.getSnapshot!==t||m||jt!==null&&jt.memoizedState.tag&1){if(n.flags|=2048,fs(9,{destroy:void 0},Df.bind(null,n,i,a,t),null),ct===null)throw Error(c(349));r||(un&127)!==0||zf(n,t,a)}return a}function zf(e,t,a){e.flags|=16384,e={getSnapshot:t,value:a},t=Oe.updateQueue,t===null?(t=Sr(),Oe.updateQueue=t,t.stores=[e]):(a=t.stores,a===null?t.stores=[e]:a.push(e))}function Df(e,t,a,n){t.value=a,t.getSnapshot=n,Hf(t)&&qf(e)}function Bf(e,t,a){return a(function(){Hf(t)&&qf(e)})}function Hf(e){var t=e.getSnapshot;e=e.value;try{var a=t();return!aa(e,a)}catch{return!0}}function qf(e){var t=ml(e,2);t!==null&&$t(t,e,2)}function Cc(e){var t=qt();if(typeof e=="function"){var a=e;if(e=a(),Nl){ta(!0);try{a()}finally{ta(!1)}}}return t.memoizedState=t.baseState=e,t.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:dn,lastRenderedState:e},t}function Gf(e,t,a,n){return e.baseState=a,_c(e,st,typeof n=="function"?n:dn)}function Dx(e,t,a,n,i){if(Ar(e))throw Error(c(485));if(e=t.action,e!==null){var r={payload:i,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(m){r.listeners.push(m)}};_.T!==null?a(!0):r.isTransition=!1,n(r),a=t.pending,a===null?(r.next=t.pending=r,Vf(t,r)):(r.next=a.next,t.pending=a.next=r)}}function Vf(e,t){var a=t.action,n=t.payload,i=e.state;if(t.isTransition){var r=_.T,m={};_.T=m;try{var b=a(i,n),E=_.S;E!==null&&E(m,b),Qf(e,t,b)}catch(G){kc(e,t,G)}finally{r!==null&&m.types!==null&&(r.types=m.types),_.T=r}}else try{r=a(i,n),Qf(e,t,r)}catch(G){kc(e,t,G)}}function Qf(e,t,a){a!==null&&typeof a=="object"&&typeof a.then=="function"?a.then(function(n){Zf(e,t,n)},function(n){return kc(e,t,n)}):Zf(e,t,a)}function Zf(e,t,a){t.status="fulfilled",t.value=a,Yf(t),e.state=a,t=e.pending,t!==null&&(a=t.next,a===t?e.pending=null:(a=a.next,t.next=a,Vf(e,a)))}function kc(e,t,a){var n=e.pending;if(e.pending=null,n!==null){n=n.next;do t.status="rejected",t.reason=a,Yf(t),t=t.next;while(t!==n)}e.action=null}function Yf(e){e=e.listeners;for(var t=0;t<e.length;t++)(0,e[t])()}function Xf(e,t){return t}function Kf(e,t){if(Be){var a=ct.formState;if(a!==null){e:{var n=Oe;if(Be){if(ut){t:{for(var i=ut,r=va;i.nodeType!==8;){if(!r){i=null;break t}if(i=wa(i.nextSibling),i===null){i=null;break t}}r=i.data,i=r==="F!"||r==="F"?i:null}if(i){ut=wa(i.nextSibling),n=i.data==="F!";break e}}zn(n)}n=!1}n&&(t=a[0])}}return a=qt(),a.memoizedState=a.baseState=t,n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Xf,lastRenderedState:t},a.queue=n,a=p0.bind(null,Oe,n),n.dispatch=a,n=Cc(!1),r=Uc.bind(null,Oe,!1,n.queue),n=qt(),i={state:t,dispatch:null,action:e,pending:null},n.queue=i,a=Dx.bind(null,Oe,i,r,a),i.dispatch=a,n.memoizedState=e,[t,a,!1]}function Wf(e){var t=St();return $f(t,st,e)}function $f(e,t,a){if(t=_c(e,t,Xf)[0],e=Nr(dn)[0],typeof t=="object"&&t!==null&&typeof t.then=="function")try{var n=ri(t)}catch(m){throw m===rs?pr:m}else n=t;t=St();var i=t.queue,r=i.dispatch;return a!==t.memoizedState&&(Oe.flags|=2048,fs(9,{destroy:void 0},Bx.bind(null,i,a),null)),[n,r,e]}function Bx(e,t){e.action=t}function Ff(e){var t=St(),a=st;if(a!==null)return $f(t,a,e);St(),t=t.memoizedState,a=St();var n=a.queue.dispatch;return a.memoizedState=e,[t,n,!1]}function fs(e,t,a,n){return e={tag:e,create:a,deps:n,inst:t,next:null},t=Oe.updateQueue,t===null&&(t=Sr(),Oe.updateQueue=t),a=t.lastEffect,a===null?t.lastEffect=e.next=e:(n=a.next,a.next=e,e.next=n,t.lastEffect=e),e}function Pf(){return St().memoizedState}function jr(e,t,a,n){var i=qt();Oe.flags|=e,i.memoizedState=fs(1|t,{destroy:void 0},a,n===void 0?null:n)}function Er(e,t,a,n){var i=St();n=n===void 0?null:n;var r=i.memoizedState.inst;st!==null&&n!==null&&Sc(n,st.memoizedState.deps)?i.memoizedState=fs(t,r,a,n):(Oe.flags|=e,i.memoizedState=fs(1|t,r,a,n))}function Jf(e,t){jr(8390656,8,e,t)}function Oc(e,t){Er(2048,8,e,t)}function Hx(e){Oe.flags|=4;var t=Oe.updateQueue;if(t===null)t=Sr(),Oe.updateQueue=t,t.events=[e];else{var a=t.events;a===null?t.events=[e]:a.push(e)}}function e0(e){var t=St().memoizedState;return Hx({ref:t,nextImpl:e}),function(){if((We&2)!==0)throw Error(c(440));return t.impl.apply(void 0,arguments)}}function t0(e,t){return Er(4,2,e,t)}function a0(e,t){return Er(4,4,e,t)}function n0(e,t){if(typeof t=="function"){e=e();var a=t(e);return function(){typeof a=="function"?a():t(null)}}if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function l0(e,t,a){a=a!=null?a.concat([e]):null,Er(4,4,n0.bind(null,t,e),a)}function Ic(){}function s0(e,t){var a=St();t=t===void 0?null:t;var n=a.memoizedState;return t!==null&&Sc(t,n[1])?n[0]:(a.memoizedState=[e,t],e)}function i0(e,t){var a=St();t=t===void 0?null:t;var n=a.memoizedState;if(t!==null&&Sc(t,n[1]))return n[0];if(n=e(),Nl){ta(!0);try{e()}finally{ta(!1)}}return a.memoizedState=[n,t],n}function Rc(e,t,a){return a===void 0||(un&1073741824)!==0&&(Ue&261930)===0?e.memoizedState=t:(e.memoizedState=a,e=rp(),Oe.lanes|=e,Yn|=e,a)}function r0(e,t,a,n){return aa(a,t)?a:cs.current!==null?(e=Rc(e,a,n),aa(e,t)||(Et=!0),e):(un&42)===0||(un&1073741824)!==0&&(Ue&261930)===0?(Et=!0,e.memoizedState=a):(e=rp(),Oe.lanes|=e,Yn|=e,t)}function o0(e,t,a,n,i){var r=W.p;W.p=r!==0&&8>r?r:8;var m=_.T,b={};_.T=b,Uc(e,!1,t,a);try{var E=i(),G=_.S;if(G!==null&&G(b,E),E!==null&&typeof E=="object"&&typeof E.then=="function"){var ae=Lx(E,n);oi(e,t,ae,oa(e))}else oi(e,t,n,oa(e))}catch(se){oi(e,t,{then:function(){},status:"rejected",reason:se},oa())}finally{W.p=r,m!==null&&b.types!==null&&(m.types=b.types),_.T=m}}function qx(){}function Mc(e,t,a,n){if(e.tag!==5)throw Error(c(476));var i=c0(e).queue;o0(e,i,t,J,a===null?qx:function(){return u0(e),a(n)})}function c0(e){var t=e.memoizedState;if(t!==null)return t;t={memoizedState:J,baseState:J,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:dn,lastRenderedState:J},next:null};var a={};return t.next={memoizedState:a,baseState:a,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:dn,lastRenderedState:a},next:null},e.memoizedState=t,e=e.alternate,e!==null&&(e.memoizedState=t),t}function u0(e){var t=c0(e);t.next===null&&(t=e.alternate.memoizedState),oi(e,t.next.queue,{},oa())}function Lc(){return Rt(Ei)}function d0(){return St().memoizedState}function f0(){return St().memoizedState}function Gx(e){for(var t=e.return;t!==null;){switch(t.tag){case 24:case 3:var a=oa();e=Hn(a);var n=qn(t,e,a);n!==null&&($t(n,t,a),ni(n,t,a)),t={cache:uc()},e.payload=t;return}t=t.return}}function Vx(e,t,a){var n=oa();a={lane:n,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null},Ar(e)?m0(t,a):(a=Jo(e,t,a,n),a!==null&&($t(a,e,n),h0(a,t,n)))}function p0(e,t,a){var n=oa();oi(e,t,a,n)}function oi(e,t,a,n){var i={lane:n,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null};if(Ar(e))m0(t,i);else{var r=e.alternate;if(e.lanes===0&&(r===null||r.lanes===0)&&(r=t.lastRenderedReducer,r!==null))try{var m=t.lastRenderedState,b=r(m,a);if(i.hasEagerState=!0,i.eagerState=b,aa(b,m))return ir(e,t,i,0),ct===null&&sr(),!1}catch{}finally{}if(a=Jo(e,t,i,n),a!==null)return $t(a,e,n),h0(a,t,n),!0}return!1}function Uc(e,t,a,n){if(n={lane:2,revertLane:mu(),gesture:null,action:n,hasEagerState:!1,eagerState:null,next:null},Ar(e)){if(t)throw Error(c(479))}else t=Jo(e,a,n,2),t!==null&&$t(t,e,2)}function Ar(e){var t=e.alternate;return e===Oe||t!==null&&t===Oe}function m0(e,t){us=br=!0;var a=e.pending;a===null?t.next=t:(t.next=a.next,a.next=t),e.pending=t}function h0(e,t,a){if((a&4194048)!==0){var n=t.lanes;n&=e.pendingLanes,a|=n,t.lanes=a,Ds(e,a)}}var ci={readContext:Rt,use:wr,useCallback:ht,useContext:ht,useEffect:ht,useImperativeHandle:ht,useLayoutEffect:ht,useInsertionEffect:ht,useMemo:ht,useReducer:ht,useRef:ht,useState:ht,useDebugValue:ht,useDeferredValue:ht,useTransition:ht,useSyncExternalStore:ht,useId:ht,useHostTransitionStatus:ht,useFormState:ht,useActionState:ht,useOptimistic:ht,useMemoCache:ht,useCacheRefresh:ht};ci.useEffectEvent=ht;var g0={readContext:Rt,use:wr,useCallback:function(e,t){return qt().memoizedState=[e,t===void 0?null:t],e},useContext:Rt,useEffect:Jf,useImperativeHandle:function(e,t,a){a=a!=null?a.concat([e]):null,jr(4194308,4,n0.bind(null,t,e),a)},useLayoutEffect:function(e,t){return jr(4194308,4,e,t)},useInsertionEffect:function(e,t){jr(4,2,e,t)},useMemo:function(e,t){var a=qt();t=t===void 0?null:t;var n=e();if(Nl){ta(!0);try{e()}finally{ta(!1)}}return a.memoizedState=[n,t],n},useReducer:function(e,t,a){var n=qt();if(a!==void 0){var i=a(t);if(Nl){ta(!0);try{a(t)}finally{ta(!1)}}}else i=t;return n.memoizedState=n.baseState=i,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:i},n.queue=e,e=e.dispatch=Vx.bind(null,Oe,e),[n.memoizedState,e]},useRef:function(e){var t=qt();return e={current:e},t.memoizedState=e},useState:function(e){e=Cc(e);var t=e.queue,a=p0.bind(null,Oe,t);return t.dispatch=a,[e.memoizedState,a]},useDebugValue:Ic,useDeferredValue:function(e,t){var a=qt();return Rc(a,e,t)},useTransition:function(){var e=Cc(!1);return e=o0.bind(null,Oe,e.queue,!0,!1),qt().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,t,a){var n=Oe,i=qt();if(Be){if(a===void 0)throw Error(c(407));a=a()}else{if(a=t(),ct===null)throw Error(c(349));(Ue&127)!==0||zf(n,t,a)}i.memoizedState=a;var r={value:a,getSnapshot:t};return i.queue=r,Jf(Bf.bind(null,n,r,e),[e]),n.flags|=2048,fs(9,{destroy:void 0},Df.bind(null,n,r,a,t),null),a},useId:function(){var e=qt(),t=ct.identifierPrefix;if(Be){var a=Ka,n=Xa;a=(n&~(1<<32-wt(n)-1)).toString(32)+a,t="_"+t+"R_"+a,a=vr++,0<a&&(t+="H"+a.toString(32)),t+="_"}else a=Ux++,t="_"+t+"r_"+a.toString(32)+"_";return e.memoizedState=t},useHostTransitionStatus:Lc,useFormState:Kf,useActionState:Kf,useOptimistic:function(e){var t=qt();t.memoizedState=t.baseState=e;var a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return t.queue=a,t=Uc.bind(null,Oe,!0,a),a.dispatch=t,[e,t]},useMemoCache:Ac,useCacheRefresh:function(){return qt().memoizedState=Gx.bind(null,Oe)},useEffectEvent:function(e){var t=qt(),a={impl:e};return t.memoizedState=a,function(){if((We&2)!==0)throw Error(c(440));return a.impl.apply(void 0,arguments)}}},zc={readContext:Rt,use:wr,useCallback:s0,useContext:Rt,useEffect:Oc,useImperativeHandle:l0,useInsertionEffect:t0,useLayoutEffect:a0,useMemo:i0,useReducer:Nr,useRef:Pf,useState:function(){return Nr(dn)},useDebugValue:Ic,useDeferredValue:function(e,t){var a=St();return r0(a,st.memoizedState,e,t)},useTransition:function(){var e=Nr(dn)[0],t=St().memoizedState;return[typeof e=="boolean"?e:ri(e),t]},useSyncExternalStore:Uf,useId:d0,useHostTransitionStatus:Lc,useFormState:Wf,useActionState:Wf,useOptimistic:function(e,t){var a=St();return Gf(a,st,e,t)},useMemoCache:Ac,useCacheRefresh:f0};zc.useEffectEvent=e0;var x0={readContext:Rt,use:wr,useCallback:s0,useContext:Rt,useEffect:Oc,useImperativeHandle:l0,useInsertionEffect:t0,useLayoutEffect:a0,useMemo:i0,useReducer:Tc,useRef:Pf,useState:function(){return Tc(dn)},useDebugValue:Ic,useDeferredValue:function(e,t){var a=St();return st===null?Rc(a,e,t):r0(a,st.memoizedState,e,t)},useTransition:function(){var e=Tc(dn)[0],t=St().memoizedState;return[typeof e=="boolean"?e:ri(e),t]},useSyncExternalStore:Uf,useId:d0,useHostTransitionStatus:Lc,useFormState:Ff,useActionState:Ff,useOptimistic:function(e,t){var a=St();return st!==null?Gf(a,st,e,t):(a.baseState=e,[e,a.queue.dispatch])},useMemoCache:Ac,useCacheRefresh:f0};x0.useEffectEvent=e0;function Dc(e,t,a,n){t=e.memoizedState,a=a(n,t),a=a==null?t:S({},t,a),e.memoizedState=a,e.lanes===0&&(e.updateQueue.baseState=a)}var Bc={enqueueSetState:function(e,t,a){e=e._reactInternals;var n=oa(),i=Hn(n);i.payload=t,a!=null&&(i.callback=a),t=qn(e,i,n),t!==null&&($t(t,e,n),ni(t,e,n))},enqueueReplaceState:function(e,t,a){e=e._reactInternals;var n=oa(),i=Hn(n);i.tag=1,i.payload=t,a!=null&&(i.callback=a),t=qn(e,i,n),t!==null&&($t(t,e,n),ni(t,e,n))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var a=oa(),n=Hn(a);n.tag=2,t!=null&&(n.callback=t),t=qn(e,n,a),t!==null&&($t(t,e,a),ni(t,e,a))}};function y0(e,t,a,n,i,r,m){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(n,r,m):t.prototype&&t.prototype.isPureReactComponent?!Ws(a,n)||!Ws(i,r):!0}function b0(e,t,a,n){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(a,n),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(a,n),t.state!==e&&Bc.enqueueReplaceState(t,t.state,null)}function jl(e,t){var a=t;if("ref"in t){a={};for(var n in t)n!=="ref"&&(a[n]=t[n])}if(e=e.defaultProps){a===t&&(a=S({},a));for(var i in e)a[i]===void 0&&(a[i]=e[i])}return a}function v0(e){lr(e)}function S0(e){console.error(e)}function w0(e){lr(e)}function _r(e,t){try{var a=e.onUncaughtError;a(t.value,{componentStack:t.stack})}catch(n){setTimeout(function(){throw n})}}function N0(e,t,a){try{var n=e.onCaughtError;n(a.value,{componentStack:a.stack,errorBoundary:t.tag===1?t.stateNode:null})}catch(i){setTimeout(function(){throw i})}}function Hc(e,t,a){return a=Hn(a),a.tag=3,a.payload={element:null},a.callback=function(){_r(e,t)},a}function j0(e){return e=Hn(e),e.tag=3,e}function E0(e,t,a,n){var i=a.type.getDerivedStateFromError;if(typeof i=="function"){var r=n.value;e.payload=function(){return i(r)},e.callback=function(){N0(t,a,n)}}var m=a.stateNode;m!==null&&typeof m.componentDidCatch=="function"&&(e.callback=function(){N0(t,a,n),typeof i!="function"&&(Xn===null?Xn=new Set([this]):Xn.add(this));var b=n.stack;this.componentDidCatch(n.value,{componentStack:b!==null?b:""})})}function Qx(e,t,a,n,i){if(a.flags|=32768,n!==null&&typeof n=="object"&&typeof n.then=="function"){if(t=a.alternate,t!==null&&ls(t,a,i,!0),a=la.current,a!==null){switch(a.tag){case 31:case 13:return Sa===null?Br():a.alternate===null&&gt===0&&(gt=3),a.flags&=-257,a.flags|=65536,a.lanes=i,n===mr?a.flags|=16384:(t=a.updateQueue,t===null?a.updateQueue=new Set([n]):t.add(n),du(e,n,i)),!1;case 22:return a.flags|=65536,n===mr?a.flags|=16384:(t=a.updateQueue,t===null?(t={transitions:null,markerInstances:null,retryQueue:new Set([n])},a.updateQueue=t):(a=t.retryQueue,a===null?t.retryQueue=new Set([n]):a.add(n)),du(e,n,i)),!1}throw Error(c(435,a.tag))}return du(e,n,i),Br(),!1}if(Be)return t=la.current,t!==null?((t.flags&65536)===0&&(t.flags|=256),t.flags|=65536,t.lanes=i,n!==sc&&(e=Error(c(422),{cause:n}),Ps(xa(e,a)))):(n!==sc&&(t=Error(c(423),{cause:n}),Ps(xa(t,a))),e=e.current.alternate,e.flags|=65536,i&=-i,e.lanes|=i,n=xa(n,a),i=Hc(e.stateNode,n,i),gc(e,i),gt!==4&&(gt=2)),!1;var r=Error(c(520),{cause:n});if(r=xa(r,a),xi===null?xi=[r]:xi.push(r),gt!==4&&(gt=2),t===null)return!0;n=xa(n,a),a=t;do{switch(a.tag){case 3:return a.flags|=65536,e=i&-i,a.lanes|=e,e=Hc(a.stateNode,n,e),gc(a,e),!1;case 1:if(t=a.type,r=a.stateNode,(a.flags&128)===0&&(typeof t.getDerivedStateFromError=="function"||r!==null&&typeof r.componentDidCatch=="function"&&(Xn===null||!Xn.has(r))))return a.flags|=65536,i&=-i,a.lanes|=i,i=j0(i),E0(i,e,a,n),gc(a,i),!1}a=a.return}while(a!==null);return!1}var qc=Error(c(461)),Et=!1;function Mt(e,t,a,n){t.child=e===null?Cf(t,null,a,n):wl(t,e.child,a,n)}function A0(e,t,a,n,i){a=a.render;var r=t.ref;if("ref"in n){var m={};for(var b in n)b!=="ref"&&(m[b]=n[b])}else m=n;return yl(t),n=wc(e,t,a,m,r,i),b=Nc(),e!==null&&!Et?(jc(e,t,i),fn(e,t,i)):(Be&&b&&nc(t),t.flags|=1,Mt(e,t,n,i),t.child)}function _0(e,t,a,n,i){if(e===null){var r=a.type;return typeof r=="function"&&!ec(r)&&r.defaultProps===void 0&&a.compare===null?(t.tag=15,t.type=r,T0(e,t,r,n,i)):(e=or(a.type,null,n,t,t.mode,i),e.ref=t.ref,e.return=t,t.child=e)}if(r=e.child,!Wc(e,i)){var m=r.memoizedProps;if(a=a.compare,a=a!==null?a:Ws,a(m,n)&&e.ref===t.ref)return fn(e,t,i)}return t.flags|=1,e=sn(r,n),e.ref=t.ref,e.return=t,t.child=e}function T0(e,t,a,n,i){if(e!==null){var r=e.memoizedProps;if(Ws(r,n)&&e.ref===t.ref)if(Et=!1,t.pendingProps=n=r,Wc(e,i))(e.flags&131072)!==0&&(Et=!0);else return t.lanes=e.lanes,fn(e,t,i)}return Gc(e,t,a,n,i)}function C0(e,t,a,n){var i=n.children,r=e!==null?e.memoizedState:null;if(e===null&&t.stateNode===null&&(t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),n.mode==="hidden"){if((t.flags&128)!==0){if(r=r!==null?r.baseLanes|a:a,e!==null){for(n=t.child=e.child,i=0;n!==null;)i=i|n.lanes|n.childLanes,n=n.sibling;n=i&~r}else n=0,t.child=null;return k0(e,t,r,a,n)}if((a&536870912)!==0)t.memoizedState={baseLanes:0,cachePool:null},e!==null&&fr(t,r!==null?r.cachePool:null),r!==null?If(t,r):yc(),Rf(t);else return n=t.lanes=536870912,k0(e,t,r!==null?r.baseLanes|a:a,a,n)}else r!==null?(fr(t,r.cachePool),If(t,r),Vn(),t.memoizedState=null):(e!==null&&fr(t,null),yc(),Vn());return Mt(e,t,i,a),t.child}function ui(e,t){return e!==null&&e.tag===22||t.stateNode!==null||(t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),t.sibling}function k0(e,t,a,n,i){var r=fc();return r=r===null?null:{parent:Nt._currentValue,pool:r},t.memoizedState={baseLanes:a,cachePool:r},e!==null&&fr(t,null),yc(),Rf(t),e!==null&&ls(e,t,n,!0),t.childLanes=i,null}function Tr(e,t){return t=kr({mode:t.mode,children:t.children},e.mode),t.ref=e.ref,e.child=t,t.return=e,t}function O0(e,t,a){return wl(t,e.child,null,a),e=Tr(t,t.pendingProps),e.flags|=2,sa(t),t.memoizedState=null,e}function Zx(e,t,a){var n=t.pendingProps,i=(t.flags&128)!==0;if(t.flags&=-129,e===null){if(Be){if(n.mode==="hidden")return e=Tr(t,n),t.lanes=536870912,ui(null,e);if(vc(t),(e=ut)?(e=Vp(e,va),e=e!==null&&e.data==="&"?e:null,e!==null&&(t.memoizedState={dehydrated:e,treeContext:Ln!==null?{id:Xa,overflow:Ka}:null,retryLane:536870912,hydrationErrors:null},a=mf(e),a.return=t,t.child=a,It=t,ut=null)):e=null,e===null)throw zn(t);return t.lanes=536870912,null}return Tr(t,n)}var r=e.memoizedState;if(r!==null){var m=r.dehydrated;if(vc(t),i)if(t.flags&256)t.flags&=-257,t=O0(e,t,a);else if(t.memoizedState!==null)t.child=e.child,t.flags|=128,t=null;else throw Error(c(558));else if(Et||ls(e,t,a,!1),i=(a&e.childLanes)!==0,Et||i){if(n=ct,n!==null&&(m=Zi(n,a),m!==0&&m!==r.retryLane))throw r.retryLane=m,ml(e,m),$t(n,e,m),qc;Br(),t=O0(e,t,a)}else e=r.treeContext,ut=wa(m.nextSibling),It=t,Be=!0,Un=null,va=!1,e!==null&&xf(t,e),t=Tr(t,n),t.flags|=4096;return t}return e=sn(e.child,{mode:n.mode,children:n.children}),e.ref=t.ref,t.child=e,e.return=t,e}function Cr(e,t){var a=t.ref;if(a===null)e!==null&&e.ref!==null&&(t.flags|=4194816);else{if(typeof a!="function"&&typeof a!="object")throw Error(c(284));(e===null||e.ref!==a)&&(t.flags|=4194816)}}function Gc(e,t,a,n,i){return yl(t),a=wc(e,t,a,n,void 0,i),n=Nc(),e!==null&&!Et?(jc(e,t,i),fn(e,t,i)):(Be&&n&&nc(t),t.flags|=1,Mt(e,t,a,i),t.child)}function I0(e,t,a,n,i,r){return yl(t),t.updateQueue=null,a=Lf(t,n,a,i),Mf(e),n=Nc(),e!==null&&!Et?(jc(e,t,r),fn(e,t,r)):(Be&&n&&nc(t),t.flags|=1,Mt(e,t,a,r),t.child)}function R0(e,t,a,n,i){if(yl(t),t.stateNode===null){var r=es,m=a.contextType;typeof m=="object"&&m!==null&&(r=Rt(m)),r=new a(n,r),t.memoizedState=r.state!==null&&r.state!==void 0?r.state:null,r.updater=Bc,t.stateNode=r,r._reactInternals=t,r=t.stateNode,r.props=n,r.state=t.memoizedState,r.refs={},mc(t),m=a.contextType,r.context=typeof m=="object"&&m!==null?Rt(m):es,r.state=t.memoizedState,m=a.getDerivedStateFromProps,typeof m=="function"&&(Dc(t,a,m,n),r.state=t.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof r.getSnapshotBeforeUpdate=="function"||typeof r.UNSAFE_componentWillMount!="function"&&typeof r.componentWillMount!="function"||(m=r.state,typeof r.componentWillMount=="function"&&r.componentWillMount(),typeof r.UNSAFE_componentWillMount=="function"&&r.UNSAFE_componentWillMount(),m!==r.state&&Bc.enqueueReplaceState(r,r.state,null),si(t,n,r,i),li(),r.state=t.memoizedState),typeof r.componentDidMount=="function"&&(t.flags|=4194308),n=!0}else if(e===null){r=t.stateNode;var b=t.memoizedProps,E=jl(a,b);r.props=E;var G=r.context,ae=a.contextType;m=es,typeof ae=="object"&&ae!==null&&(m=Rt(ae));var se=a.getDerivedStateFromProps;ae=typeof se=="function"||typeof r.getSnapshotBeforeUpdate=="function",b=t.pendingProps!==b,ae||typeof r.UNSAFE_componentWillReceiveProps!="function"&&typeof r.componentWillReceiveProps!="function"||(b||G!==m)&&b0(t,r,n,m),Bn=!1;var Z=t.memoizedState;r.state=Z,si(t,n,r,i),li(),G=t.memoizedState,b||Z!==G||Bn?(typeof se=="function"&&(Dc(t,a,se,n),G=t.memoizedState),(E=Bn||y0(t,a,E,n,Z,G,m))?(ae||typeof r.UNSAFE_componentWillMount!="function"&&typeof r.componentWillMount!="function"||(typeof r.componentWillMount=="function"&&r.componentWillMount(),typeof r.UNSAFE_componentWillMount=="function"&&r.UNSAFE_componentWillMount()),typeof r.componentDidMount=="function"&&(t.flags|=4194308)):(typeof r.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=n,t.memoizedState=G),r.props=n,r.state=G,r.context=m,n=E):(typeof r.componentDidMount=="function"&&(t.flags|=4194308),n=!1)}else{r=t.stateNode,hc(e,t),m=t.memoizedProps,ae=jl(a,m),r.props=ae,se=t.pendingProps,Z=r.context,G=a.contextType,E=es,typeof G=="object"&&G!==null&&(E=Rt(G)),b=a.getDerivedStateFromProps,(G=typeof b=="function"||typeof r.getSnapshotBeforeUpdate=="function")||typeof r.UNSAFE_componentWillReceiveProps!="function"&&typeof r.componentWillReceiveProps!="function"||(m!==se||Z!==E)&&b0(t,r,n,E),Bn=!1,Z=t.memoizedState,r.state=Z,si(t,n,r,i),li();var $=t.memoizedState;m!==se||Z!==$||Bn||e!==null&&e.dependencies!==null&&ur(e.dependencies)?(typeof b=="function"&&(Dc(t,a,b,n),$=t.memoizedState),(ae=Bn||y0(t,a,ae,n,Z,$,E)||e!==null&&e.dependencies!==null&&ur(e.dependencies))?(G||typeof r.UNSAFE_componentWillUpdate!="function"&&typeof r.componentWillUpdate!="function"||(typeof r.componentWillUpdate=="function"&&r.componentWillUpdate(n,$,E),typeof r.UNSAFE_componentWillUpdate=="function"&&r.UNSAFE_componentWillUpdate(n,$,E)),typeof r.componentDidUpdate=="function"&&(t.flags|=4),typeof r.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof r.componentDidUpdate!="function"||m===e.memoizedProps&&Z===e.memoizedState||(t.flags|=4),typeof r.getSnapshotBeforeUpdate!="function"||m===e.memoizedProps&&Z===e.memoizedState||(t.flags|=1024),t.memoizedProps=n,t.memoizedState=$),r.props=n,r.state=$,r.context=E,n=ae):(typeof r.componentDidUpdate!="function"||m===e.memoizedProps&&Z===e.memoizedState||(t.flags|=4),typeof r.getSnapshotBeforeUpdate!="function"||m===e.memoizedProps&&Z===e.memoizedState||(t.flags|=1024),n=!1)}return r=n,Cr(e,t),n=(t.flags&128)!==0,r||n?(r=t.stateNode,a=n&&typeof a.getDerivedStateFromError!="function"?null:r.render(),t.flags|=1,e!==null&&n?(t.child=wl(t,e.child,null,i),t.child=wl(t,null,a,i)):Mt(e,t,a,i),t.memoizedState=r.state,e=t.child):e=fn(e,t,i),e}function M0(e,t,a,n){return gl(),t.flags|=256,Mt(e,t,a,n),t.child}var Vc={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Qc(e){return{baseLanes:e,cachePool:Nf()}}function Zc(e,t,a){return e=e!==null?e.childLanes&~a:0,t&&(e|=ra),e}function L0(e,t,a){var n=t.pendingProps,i=!1,r=(t.flags&128)!==0,m;if((m=r)||(m=e!==null&&e.memoizedState===null?!1:(vt.current&2)!==0),m&&(i=!0,t.flags&=-129),m=(t.flags&32)!==0,t.flags&=-33,e===null){if(Be){if(i?Gn(t):Vn(),(e=ut)?(e=Vp(e,va),e=e!==null&&e.data!=="&"?e:null,e!==null&&(t.memoizedState={dehydrated:e,treeContext:Ln!==null?{id:Xa,overflow:Ka}:null,retryLane:536870912,hydrationErrors:null},a=mf(e),a.return=t,t.child=a,It=t,ut=null)):e=null,e===null)throw zn(t);return _u(e)?t.lanes=32:t.lanes=536870912,null}var b=n.children;return n=n.fallback,i?(Vn(),i=t.mode,b=kr({mode:"hidden",children:b},i),n=hl(n,i,a,null),b.return=t,n.return=t,b.sibling=n,t.child=b,n=t.child,n.memoizedState=Qc(a),n.childLanes=Zc(e,m,a),t.memoizedState=Vc,ui(null,n)):(Gn(t),Yc(t,b))}var E=e.memoizedState;if(E!==null&&(b=E.dehydrated,b!==null)){if(r)t.flags&256?(Gn(t),t.flags&=-257,t=Xc(e,t,a)):t.memoizedState!==null?(Vn(),t.child=e.child,t.flags|=128,t=null):(Vn(),b=n.fallback,i=t.mode,n=kr({mode:"visible",children:n.children},i),b=hl(b,i,a,null),b.flags|=2,n.return=t,b.return=t,n.sibling=b,t.child=n,wl(t,e.child,null,a),n=t.child,n.memoizedState=Qc(a),n.childLanes=Zc(e,m,a),t.memoizedState=Vc,t=ui(null,n));else if(Gn(t),_u(b)){if(m=b.nextSibling&&b.nextSibling.dataset,m)var G=m.dgst;m=G,n=Error(c(419)),n.stack="",n.digest=m,Ps({value:n,source:null,stack:null}),t=Xc(e,t,a)}else if(Et||ls(e,t,a,!1),m=(a&e.childLanes)!==0,Et||m){if(m=ct,m!==null&&(n=Zi(m,a),n!==0&&n!==E.retryLane))throw E.retryLane=n,ml(e,n),$t(m,e,n),qc;Au(b)||Br(),t=Xc(e,t,a)}else Au(b)?(t.flags|=192,t.child=e.child,t=null):(e=E.treeContext,ut=wa(b.nextSibling),It=t,Be=!0,Un=null,va=!1,e!==null&&xf(t,e),t=Yc(t,n.children),t.flags|=4096);return t}return i?(Vn(),b=n.fallback,i=t.mode,E=e.child,G=E.sibling,n=sn(E,{mode:"hidden",children:n.children}),n.subtreeFlags=E.subtreeFlags&65011712,G!==null?b=sn(G,b):(b=hl(b,i,a,null),b.flags|=2),b.return=t,n.return=t,n.sibling=b,t.child=n,ui(null,n),n=t.child,b=e.child.memoizedState,b===null?b=Qc(a):(i=b.cachePool,i!==null?(E=Nt._currentValue,i=i.parent!==E?{parent:E,pool:E}:i):i=Nf(),b={baseLanes:b.baseLanes|a,cachePool:i}),n.memoizedState=b,n.childLanes=Zc(e,m,a),t.memoizedState=Vc,ui(e.child,n)):(Gn(t),a=e.child,e=a.sibling,a=sn(a,{mode:"visible",children:n.children}),a.return=t,a.sibling=null,e!==null&&(m=t.deletions,m===null?(t.deletions=[e],t.flags|=16):m.push(e)),t.child=a,t.memoizedState=null,a)}function Yc(e,t){return t=kr({mode:"visible",children:t},e.mode),t.return=e,e.child=t}function kr(e,t){return e=na(22,e,null,t),e.lanes=0,e}function Xc(e,t,a){return wl(t,e.child,null,a),e=Yc(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function U0(e,t,a){e.lanes|=t;var n=e.alternate;n!==null&&(n.lanes|=t),oc(e.return,t,a)}function Kc(e,t,a,n,i,r){var m=e.memoizedState;m===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:n,tail:a,tailMode:i,treeForkCount:r}:(m.isBackwards=t,m.rendering=null,m.renderingStartTime=0,m.last=n,m.tail=a,m.tailMode=i,m.treeForkCount=r)}function z0(e,t,a){var n=t.pendingProps,i=n.revealOrder,r=n.tail;n=n.children;var m=vt.current,b=(m&2)!==0;if(b?(m=m&1|2,t.flags|=128):m&=1,z(vt,m),Mt(e,t,n,a),n=Be?Fs:0,!b&&e!==null&&(e.flags&128)!==0)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&U0(e,a,t);else if(e.tag===19)U0(e,a,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}switch(i){case"forwards":for(a=t.child,i=null;a!==null;)e=a.alternate,e!==null&&yr(e)===null&&(i=a),a=a.sibling;a=i,a===null?(i=t.child,t.child=null):(i=a.sibling,a.sibling=null),Kc(t,!1,i,a,r,n);break;case"backwards":case"unstable_legacy-backwards":for(a=null,i=t.child,t.child=null;i!==null;){if(e=i.alternate,e!==null&&yr(e)===null){t.child=i;break}e=i.sibling,i.sibling=a,a=i,i=e}Kc(t,!0,a,null,r,n);break;case"together":Kc(t,!1,null,null,void 0,n);break;default:t.memoizedState=null}return t.child}function fn(e,t,a){if(e!==null&&(t.dependencies=e.dependencies),Yn|=t.lanes,(a&t.childLanes)===0)if(e!==null){if(ls(e,t,a,!1),(a&t.childLanes)===0)return null}else return null;if(e!==null&&t.child!==e.child)throw Error(c(153));if(t.child!==null){for(e=t.child,a=sn(e,e.pendingProps),t.child=a,a.return=t;e.sibling!==null;)e=e.sibling,a=a.sibling=sn(e,e.pendingProps),a.return=t;a.sibling=null}return t.child}function Wc(e,t){return(e.lanes&t)!==0?!0:(e=e.dependencies,!!(e!==null&&ur(e)))}function Yx(e,t,a){switch(t.tag){case 3:D(t,t.stateNode.containerInfo),Dn(t,Nt,e.memoizedState.cache),gl();break;case 27:case 5:P(t);break;case 4:D(t,t.stateNode.containerInfo);break;case 10:Dn(t,t.type,t.memoizedProps.value);break;case 31:if(t.memoizedState!==null)return t.flags|=128,vc(t),null;break;case 13:var n=t.memoizedState;if(n!==null)return n.dehydrated!==null?(Gn(t),t.flags|=128,null):(a&t.child.childLanes)!==0?L0(e,t,a):(Gn(t),e=fn(e,t,a),e!==null?e.sibling:null);Gn(t);break;case 19:var i=(e.flags&128)!==0;if(n=(a&t.childLanes)!==0,n||(ls(e,t,a,!1),n=(a&t.childLanes)!==0),i){if(n)return z0(e,t,a);t.flags|=128}if(i=t.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),z(vt,vt.current),n)break;return null;case 22:return t.lanes=0,C0(e,t,a,t.pendingProps);case 24:Dn(t,Nt,e.memoizedState.cache)}return fn(e,t,a)}function D0(e,t,a){if(e!==null)if(e.memoizedProps!==t.pendingProps)Et=!0;else{if(!Wc(e,a)&&(t.flags&128)===0)return Et=!1,Yx(e,t,a);Et=(e.flags&131072)!==0}else Et=!1,Be&&(t.flags&1048576)!==0&&gf(t,Fs,t.index);switch(t.lanes=0,t.tag){case 16:e:{var n=t.pendingProps;if(e=vl(t.elementType),t.type=e,typeof e=="function")ec(e)?(n=jl(e,n),t.tag=1,t=R0(null,t,e,n,a)):(t.tag=0,t=Gc(null,t,e,n,a));else{if(e!=null){var i=e.$$typeof;if(i===B){t.tag=11,t=A0(null,t,e,n,a);break e}else if(i===Q){t.tag=14,t=_0(null,t,e,n,a);break e}}throw t=ge(e)||e,Error(c(306,t,""))}}return t;case 0:return Gc(e,t,t.type,t.pendingProps,a);case 1:return n=t.type,i=jl(n,t.pendingProps),R0(e,t,n,i,a);case 3:e:{if(D(t,t.stateNode.containerInfo),e===null)throw Error(c(387));n=t.pendingProps;var r=t.memoizedState;i=r.element,hc(e,t),si(t,n,null,a);var m=t.memoizedState;if(n=m.cache,Dn(t,Nt,n),n!==r.cache&&cc(t,[Nt],a,!0),li(),n=m.element,r.isDehydrated)if(r={element:n,isDehydrated:!1,cache:m.cache},t.updateQueue.baseState=r,t.memoizedState=r,t.flags&256){t=M0(e,t,n,a);break e}else if(n!==i){i=xa(Error(c(424)),t),Ps(i),t=M0(e,t,n,a);break e}else{switch(e=t.stateNode.containerInfo,e.nodeType){case 9:e=e.body;break;default:e=e.nodeName==="HTML"?e.ownerDocument.body:e}for(ut=wa(e.firstChild),It=t,Be=!0,Un=null,va=!0,a=Cf(t,null,n,a),t.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling}else{if(gl(),n===i){t=fn(e,t,a);break e}Mt(e,t,n,a)}t=t.child}return t;case 26:return Cr(e,t),e===null?(a=Wp(t.type,null,t.pendingProps,null))?t.memoizedState=a:Be||(a=t.type,e=t.pendingProps,n=Yr(ce.current).createElement(a),n[_t]=t,n[Ut]=e,Lt(n,a,e),ve(n),t.stateNode=n):t.memoizedState=Wp(t.type,e.memoizedProps,t.pendingProps,e.memoizedState),null;case 27:return P(t),e===null&&Be&&(n=t.stateNode=Yp(t.type,t.pendingProps,ce.current),It=t,va=!0,i=ut,Fn(t.type)?(Tu=i,ut=wa(n.firstChild)):ut=i),Mt(e,t,t.pendingProps.children,a),Cr(e,t),e===null&&(t.flags|=4194304),t.child;case 5:return e===null&&Be&&((i=n=ut)&&(n=wy(n,t.type,t.pendingProps,va),n!==null?(t.stateNode=n,It=t,ut=wa(n.firstChild),va=!1,i=!0):i=!1),i||zn(t)),P(t),i=t.type,r=t.pendingProps,m=e!==null?e.memoizedProps:null,n=r.children,Nu(i,r)?n=null:m!==null&&Nu(i,m)&&(t.flags|=32),t.memoizedState!==null&&(i=wc(e,t,zx,null,null,a),Ei._currentValue=i),Cr(e,t),Mt(e,t,n,a),t.child;case 6:return e===null&&Be&&((e=a=ut)&&(a=Ny(a,t.pendingProps,va),a!==null?(t.stateNode=a,It=t,ut=null,e=!0):e=!1),e||zn(t)),null;case 13:return L0(e,t,a);case 4:return D(t,t.stateNode.containerInfo),n=t.pendingProps,e===null?t.child=wl(t,null,n,a):Mt(e,t,n,a),t.child;case 11:return A0(e,t,t.type,t.pendingProps,a);case 7:return Mt(e,t,t.pendingProps,a),t.child;case 8:return Mt(e,t,t.pendingProps.children,a),t.child;case 12:return Mt(e,t,t.pendingProps.children,a),t.child;case 10:return n=t.pendingProps,Dn(t,t.type,n.value),Mt(e,t,n.children,a),t.child;case 9:return i=t.type._context,n=t.pendingProps.children,yl(t),i=Rt(i),n=n(i),t.flags|=1,Mt(e,t,n,a),t.child;case 14:return _0(e,t,t.type,t.pendingProps,a);case 15:return T0(e,t,t.type,t.pendingProps,a);case 19:return z0(e,t,a);case 31:return Zx(e,t,a);case 22:return C0(e,t,a,t.pendingProps);case 24:return yl(t),n=Rt(Nt),e===null?(i=fc(),i===null&&(i=ct,r=uc(),i.pooledCache=r,r.refCount++,r!==null&&(i.pooledCacheLanes|=a),i=r),t.memoizedState={parent:n,cache:i},mc(t),Dn(t,Nt,i)):((e.lanes&a)!==0&&(hc(e,t),si(t,null,null,a),li()),i=e.memoizedState,r=t.memoizedState,i.parent!==n?(i={parent:n,cache:n},t.memoizedState=i,t.lanes===0&&(t.memoizedState=t.updateQueue.baseState=i),Dn(t,Nt,n)):(n=r.cache,Dn(t,Nt,n),n!==i.cache&&cc(t,[Nt],a,!0))),Mt(e,t,t.pendingProps.children,a),t.child;case 29:throw t.pendingProps}throw Error(c(156,t.tag))}function pn(e){e.flags|=4}function $c(e,t,a,n,i){if((t=(e.mode&32)!==0)&&(t=!1),t){if(e.flags|=16777216,(i&335544128)===i)if(e.stateNode.complete)e.flags|=8192;else if(dp())e.flags|=8192;else throw Sl=mr,pc}else e.flags&=-16777217}function B0(e,t){if(t.type!=="stylesheet"||(t.state.loading&4)!==0)e.flags&=-16777217;else if(e.flags|=16777216,!em(t))if(dp())e.flags|=8192;else throw Sl=mr,pc}function Or(e,t){t!==null&&(e.flags|=4),e.flags&16384&&(t=e.tag!==22?Vi():536870912,e.lanes|=t,gs|=t)}function di(e,t){if(!Be)switch(e.tailMode){case"hidden":t=e.tail;for(var a=null;t!==null;)t.alternate!==null&&(a=t),t=t.sibling;a===null?e.tail=null:a.sibling=null;break;case"collapsed":a=e.tail;for(var n=null;a!==null;)a.alternate!==null&&(n=a),a=a.sibling;n===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:n.sibling=null}}function dt(e){var t=e.alternate!==null&&e.alternate.child===e.child,a=0,n=0;if(t)for(var i=e.child;i!==null;)a|=i.lanes|i.childLanes,n|=i.subtreeFlags&65011712,n|=i.flags&65011712,i.return=e,i=i.sibling;else for(i=e.child;i!==null;)a|=i.lanes|i.childLanes,n|=i.subtreeFlags,n|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=n,e.childLanes=a,t}function Xx(e,t,a){var n=t.pendingProps;switch(lc(t),t.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return dt(t),null;case 1:return dt(t),null;case 3:return a=t.stateNode,n=null,e!==null&&(n=e.memoizedState.cache),t.memoizedState.cache!==n&&(t.flags|=2048),cn(Nt),re(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(e===null||e.child===null)&&(ns(t)?pn(t):e===null||e.memoizedState.isDehydrated&&(t.flags&256)===0||(t.flags|=1024,ic())),dt(t),null;case 26:var i=t.type,r=t.memoizedState;return e===null?(pn(t),r!==null?(dt(t),B0(t,r)):(dt(t),$c(t,i,null,n,a))):r?r!==e.memoizedState?(pn(t),dt(t),B0(t,r)):(dt(t),t.flags&=-16777217):(e=e.memoizedProps,e!==n&&pn(t),dt(t),$c(t,i,e,n,a)),null;case 27:if(te(t),a=ce.current,i=t.type,e!==null&&t.stateNode!=null)e.memoizedProps!==n&&pn(t);else{if(!n){if(t.stateNode===null)throw Error(c(166));return dt(t),null}e=ee.current,ns(t)?yf(t):(e=Yp(i,n,a),t.stateNode=e,pn(t))}return dt(t),null;case 5:if(te(t),i=t.type,e!==null&&t.stateNode!=null)e.memoizedProps!==n&&pn(t);else{if(!n){if(t.stateNode===null)throw Error(c(166));return dt(t),null}if(r=ee.current,ns(t))yf(t);else{var m=Yr(ce.current);switch(r){case 1:r=m.createElementNS("http://www.w3.org/2000/svg",i);break;case 2:r=m.createElementNS("http://www.w3.org/1998/Math/MathML",i);break;default:switch(i){case"svg":r=m.createElementNS("http://www.w3.org/2000/svg",i);break;case"math":r=m.createElementNS("http://www.w3.org/1998/Math/MathML",i);break;case"script":r=m.createElement("div"),r.innerHTML="<script><\/script>",r=r.removeChild(r.firstChild);break;case"select":r=typeof n.is=="string"?m.createElement("select",{is:n.is}):m.createElement("select"),n.multiple?r.multiple=!0:n.size&&(r.size=n.size);break;default:r=typeof n.is=="string"?m.createElement(i,{is:n.is}):m.createElement(i)}}r[_t]=t,r[Ut]=n;e:for(m=t.child;m!==null;){if(m.tag===5||m.tag===6)r.appendChild(m.stateNode);else if(m.tag!==4&&m.tag!==27&&m.child!==null){m.child.return=m,m=m.child;continue}if(m===t)break e;for(;m.sibling===null;){if(m.return===null||m.return===t)break e;m=m.return}m.sibling.return=m.return,m=m.sibling}t.stateNode=r;e:switch(Lt(r,i,n),i){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}n&&pn(t)}}return dt(t),$c(t,t.type,e===null?null:e.memoizedProps,t.pendingProps,a),null;case 6:if(e&&t.stateNode!=null)e.memoizedProps!==n&&pn(t);else{if(typeof n!="string"&&t.stateNode===null)throw Error(c(166));if(e=ce.current,ns(t)){if(e=t.stateNode,a=t.memoizedProps,n=null,i=It,i!==null)switch(i.tag){case 27:case 5:n=i.memoizedProps}e[_t]=t,e=!!(e.nodeValue===a||n!==null&&n.suppressHydrationWarning===!0||Lp(e.nodeValue,a)),e||zn(t,!0)}else e=Yr(e).createTextNode(n),e[_t]=t,t.stateNode=e}return dt(t),null;case 31:if(a=t.memoizedState,e===null||e.memoizedState!==null){if(n=ns(t),a!==null){if(e===null){if(!n)throw Error(c(318));if(e=t.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(c(557));e[_t]=t}else gl(),(t.flags&128)===0&&(t.memoizedState=null),t.flags|=4;dt(t),e=!1}else a=ic(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=a),e=!0;if(!e)return t.flags&256?(sa(t),t):(sa(t),null);if((t.flags&128)!==0)throw Error(c(558))}return dt(t),null;case 13:if(n=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(i=ns(t),n!==null&&n.dehydrated!==null){if(e===null){if(!i)throw Error(c(318));if(i=t.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(c(317));i[_t]=t}else gl(),(t.flags&128)===0&&(t.memoizedState=null),t.flags|=4;dt(t),i=!1}else i=ic(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=i),i=!0;if(!i)return t.flags&256?(sa(t),t):(sa(t),null)}return sa(t),(t.flags&128)!==0?(t.lanes=a,t):(a=n!==null,e=e!==null&&e.memoizedState!==null,a&&(n=t.child,i=null,n.alternate!==null&&n.alternate.memoizedState!==null&&n.alternate.memoizedState.cachePool!==null&&(i=n.alternate.memoizedState.cachePool.pool),r=null,n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(r=n.memoizedState.cachePool.pool),r!==i&&(n.flags|=2048)),a!==e&&a&&(t.child.flags|=8192),Or(t,t.updateQueue),dt(t),null);case 4:return re(),e===null&&yu(t.stateNode.containerInfo),dt(t),null;case 10:return cn(t.type),dt(t),null;case 19:if(j(vt),n=t.memoizedState,n===null)return dt(t),null;if(i=(t.flags&128)!==0,r=n.rendering,r===null)if(i)di(n,!1);else{if(gt!==0||e!==null&&(e.flags&128)!==0)for(e=t.child;e!==null;){if(r=yr(e),r!==null){for(t.flags|=128,di(n,!1),e=r.updateQueue,t.updateQueue=e,Or(t,e),t.subtreeFlags=0,e=a,a=t.child;a!==null;)pf(a,e),a=a.sibling;return z(vt,vt.current&1|2),Be&&rn(t,n.treeForkCount),t.child}e=e.sibling}n.tail!==null&&_e()>Ur&&(t.flags|=128,i=!0,di(n,!1),t.lanes=4194304)}else{if(!i)if(e=yr(r),e!==null){if(t.flags|=128,i=!0,e=e.updateQueue,t.updateQueue=e,Or(t,e),di(n,!0),n.tail===null&&n.tailMode==="hidden"&&!r.alternate&&!Be)return dt(t),null}else 2*_e()-n.renderingStartTime>Ur&&a!==536870912&&(t.flags|=128,i=!0,di(n,!1),t.lanes=4194304);n.isBackwards?(r.sibling=t.child,t.child=r):(e=n.last,e!==null?e.sibling=r:t.child=r,n.last=r)}return n.tail!==null?(e=n.tail,n.rendering=e,n.tail=e.sibling,n.renderingStartTime=_e(),e.sibling=null,a=vt.current,z(vt,i?a&1|2:a&1),Be&&rn(t,n.treeForkCount),e):(dt(t),null);case 22:case 23:return sa(t),bc(),n=t.memoizedState!==null,e!==null?e.memoizedState!==null!==n&&(t.flags|=8192):n&&(t.flags|=8192),n?(a&536870912)!==0&&(t.flags&128)===0&&(dt(t),t.subtreeFlags&6&&(t.flags|=8192)):dt(t),a=t.updateQueue,a!==null&&Or(t,a.retryQueue),a=null,e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(a=e.memoizedState.cachePool.pool),n=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(n=t.memoizedState.cachePool.pool),n!==a&&(t.flags|=2048),e!==null&&j(bl),null;case 24:return a=null,e!==null&&(a=e.memoizedState.cache),t.memoizedState.cache!==a&&(t.flags|=2048),cn(Nt),dt(t),null;case 25:return null;case 30:return null}throw Error(c(156,t.tag))}function Kx(e,t){switch(lc(t),t.tag){case 1:return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return cn(Nt),re(),e=t.flags,(e&65536)!==0&&(e&128)===0?(t.flags=e&-65537|128,t):null;case 26:case 27:case 5:return te(t),null;case 31:if(t.memoizedState!==null){if(sa(t),t.alternate===null)throw Error(c(340));gl()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 13:if(sa(t),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(c(340));gl()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return j(vt),null;case 4:return re(),null;case 10:return cn(t.type),null;case 22:case 23:return sa(t),bc(),e!==null&&j(bl),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 24:return cn(Nt),null;case 25:return null;default:return null}}function H0(e,t){switch(lc(t),t.tag){case 3:cn(Nt),re();break;case 26:case 27:case 5:te(t);break;case 4:re();break;case 31:t.memoizedState!==null&&sa(t);break;case 13:sa(t);break;case 19:j(vt);break;case 10:cn(t.type);break;case 22:case 23:sa(t),bc(),e!==null&&j(bl);break;case 24:cn(Nt)}}function fi(e,t){try{var a=t.updateQueue,n=a!==null?a.lastEffect:null;if(n!==null){var i=n.next;a=i;do{if((a.tag&e)===e){n=void 0;var r=a.create,m=a.inst;n=r(),m.destroy=n}a=a.next}while(a!==i)}}catch(b){et(t,t.return,b)}}function Qn(e,t,a){try{var n=t.updateQueue,i=n!==null?n.lastEffect:null;if(i!==null){var r=i.next;n=r;do{if((n.tag&e)===e){var m=n.inst,b=m.destroy;if(b!==void 0){m.destroy=void 0,i=t;var E=a,G=b;try{G()}catch(ae){et(i,E,ae)}}}n=n.next}while(n!==r)}}catch(ae){et(t,t.return,ae)}}function q0(e){var t=e.updateQueue;if(t!==null){var a=e.stateNode;try{Of(t,a)}catch(n){et(e,e.return,n)}}}function G0(e,t,a){a.props=jl(e.type,e.memoizedProps),a.state=e.memoizedState;try{a.componentWillUnmount()}catch(n){et(e,t,n)}}function pi(e,t){try{var a=e.ref;if(a!==null){switch(e.tag){case 26:case 27:case 5:var n=e.stateNode;break;case 30:n=e.stateNode;break;default:n=e.stateNode}typeof a=="function"?e.refCleanup=a(n):a.current=n}}catch(i){et(e,t,i)}}function Wa(e,t){var a=e.ref,n=e.refCleanup;if(a!==null)if(typeof n=="function")try{n()}catch(i){et(e,t,i)}finally{e.refCleanup=null,e=e.alternate,e!=null&&(e.refCleanup=null)}else if(typeof a=="function")try{a(null)}catch(i){et(e,t,i)}else a.current=null}function V0(e){var t=e.type,a=e.memoizedProps,n=e.stateNode;try{e:switch(t){case"button":case"input":case"select":case"textarea":a.autoFocus&&n.focus();break e;case"img":a.src?n.src=a.src:a.srcSet&&(n.srcset=a.srcSet)}}catch(i){et(e,e.return,i)}}function Fc(e,t,a){try{var n=e.stateNode;gy(n,e.type,a,t),n[Ut]=t}catch(i){et(e,e.return,i)}}function Q0(e){return e.tag===5||e.tag===3||e.tag===26||e.tag===27&&Fn(e.type)||e.tag===4}function Pc(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||Q0(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.tag===27&&Fn(e.type)||e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Jc(e,t,a){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a).insertBefore(e,t):(t=a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,t.appendChild(e),a=a._reactRootContainer,a!=null||t.onclick!==null||(t.onclick=nn));else if(n!==4&&(n===27&&Fn(e.type)&&(a=e.stateNode,t=null),e=e.child,e!==null))for(Jc(e,t,a),e=e.sibling;e!==null;)Jc(e,t,a),e=e.sibling}function Ir(e,t,a){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?a.insertBefore(e,t):a.appendChild(e);else if(n!==4&&(n===27&&Fn(e.type)&&(a=e.stateNode),e=e.child,e!==null))for(Ir(e,t,a),e=e.sibling;e!==null;)Ir(e,t,a),e=e.sibling}function Z0(e){var t=e.stateNode,a=e.memoizedProps;try{for(var n=e.type,i=t.attributes;i.length;)t.removeAttributeNode(i[0]);Lt(t,n,a),t[_t]=e,t[Ut]=a}catch(r){et(e,e.return,r)}}var mn=!1,At=!1,eu=!1,Y0=typeof WeakSet=="function"?WeakSet:Set,Ot=null;function Wx(e,t){if(e=e.containerInfo,Su=Jr,e=nf(e),Xo(e)){if("selectionStart"in e)var a={start:e.selectionStart,end:e.selectionEnd};else e:{a=(a=e.ownerDocument)&&a.defaultView||window;var n=a.getSelection&&a.getSelection();if(n&&n.rangeCount!==0){a=n.anchorNode;var i=n.anchorOffset,r=n.focusNode;n=n.focusOffset;try{a.nodeType,r.nodeType}catch{a=null;break e}var m=0,b=-1,E=-1,G=0,ae=0,se=e,Z=null;t:for(;;){for(var $;se!==a||i!==0&&se.nodeType!==3||(b=m+i),se!==r||n!==0&&se.nodeType!==3||(E=m+n),se.nodeType===3&&(m+=se.nodeValue.length),($=se.firstChild)!==null;)Z=se,se=$;for(;;){if(se===e)break t;if(Z===a&&++G===i&&(b=m),Z===r&&++ae===n&&(E=m),($=se.nextSibling)!==null)break;se=Z,Z=se.parentNode}se=$}a=b===-1||E===-1?null:{start:b,end:E}}else a=null}a=a||{start:0,end:0}}else a=null;for(wu={focusedElem:e,selectionRange:a},Jr=!1,Ot=t;Ot!==null;)if(t=Ot,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,Ot=e;else for(;Ot!==null;){switch(t=Ot,r=t.alternate,e=t.flags,t.tag){case 0:if((e&4)!==0&&(e=t.updateQueue,e=e!==null?e.events:null,e!==null))for(a=0;a<e.length;a++)i=e[a],i.ref.impl=i.nextImpl;break;case 11:case 15:break;case 1:if((e&1024)!==0&&r!==null){e=void 0,a=t,i=r.memoizedProps,r=r.memoizedState,n=a.stateNode;try{var Se=jl(a.type,i);e=n.getSnapshotBeforeUpdate(Se,r),n.__reactInternalSnapshotBeforeUpdate=e}catch(Ae){et(a,a.return,Ae)}}break;case 3:if((e&1024)!==0){if(e=t.stateNode.containerInfo,a=e.nodeType,a===9)Eu(e);else if(a===1)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":Eu(e);break;default:e.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((e&1024)!==0)throw Error(c(163))}if(e=t.sibling,e!==null){e.return=t.return,Ot=e;break}Ot=t.return}}function X0(e,t,a){var n=a.flags;switch(a.tag){case 0:case 11:case 15:gn(e,a),n&4&&fi(5,a);break;case 1:if(gn(e,a),n&4)if(e=a.stateNode,t===null)try{e.componentDidMount()}catch(m){et(a,a.return,m)}else{var i=jl(a.type,t.memoizedProps);t=t.memoizedState;try{e.componentDidUpdate(i,t,e.__reactInternalSnapshotBeforeUpdate)}catch(m){et(a,a.return,m)}}n&64&&q0(a),n&512&&pi(a,a.return);break;case 3:if(gn(e,a),n&64&&(e=a.updateQueue,e!==null)){if(t=null,a.child!==null)switch(a.child.tag){case 27:case 5:t=a.child.stateNode;break;case 1:t=a.child.stateNode}try{Of(e,t)}catch(m){et(a,a.return,m)}}break;case 27:t===null&&n&4&&Z0(a);case 26:case 5:gn(e,a),t===null&&n&4&&V0(a),n&512&&pi(a,a.return);break;case 12:gn(e,a);break;case 31:gn(e,a),n&4&&$0(e,a);break;case 13:gn(e,a),n&4&&F0(e,a),n&64&&(e=a.memoizedState,e!==null&&(e=e.dehydrated,e!==null&&(a=ly.bind(null,a),jy(e,a))));break;case 22:if(n=a.memoizedState!==null||mn,!n){t=t!==null&&t.memoizedState!==null||At,i=mn;var r=At;mn=n,(At=t)&&!r?xn(e,a,(a.subtreeFlags&8772)!==0):gn(e,a),mn=i,At=r}break;case 30:break;default:gn(e,a)}}function K0(e){var t=e.alternate;t!==null&&(e.alternate=null,K0(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&Wi(t)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var ft=null,Yt=!1;function hn(e,t,a){for(a=a.child;a!==null;)W0(e,t,a),a=a.sibling}function W0(e,t,a){if(yt&&typeof yt.onCommitFiberUnmount=="function")try{yt.onCommitFiberUnmount(_a,a)}catch{}switch(a.tag){case 26:At||Wa(a,t),hn(e,t,a),a.memoizedState?a.memoizedState.count--:a.stateNode&&(a=a.stateNode,a.parentNode.removeChild(a));break;case 27:At||Wa(a,t);var n=ft,i=Yt;Fn(a.type)&&(ft=a.stateNode,Yt=!1),hn(e,t,a),wi(a.stateNode),ft=n,Yt=i;break;case 5:At||Wa(a,t);case 6:if(n=ft,i=Yt,ft=null,hn(e,t,a),ft=n,Yt=i,ft!==null)if(Yt)try{(ft.nodeType===9?ft.body:ft.nodeName==="HTML"?ft.ownerDocument.body:ft).removeChild(a.stateNode)}catch(r){et(a,t,r)}else try{ft.removeChild(a.stateNode)}catch(r){et(a,t,r)}break;case 18:ft!==null&&(Yt?(e=ft,qp(e.nodeType===9?e.body:e.nodeName==="HTML"?e.ownerDocument.body:e,a.stateNode),js(e)):qp(ft,a.stateNode));break;case 4:n=ft,i=Yt,ft=a.stateNode.containerInfo,Yt=!0,hn(e,t,a),ft=n,Yt=i;break;case 0:case 11:case 14:case 15:Qn(2,a,t),At||Qn(4,a,t),hn(e,t,a);break;case 1:At||(Wa(a,t),n=a.stateNode,typeof n.componentWillUnmount=="function"&&G0(a,t,n)),hn(e,t,a);break;case 21:hn(e,t,a);break;case 22:At=(n=At)||a.memoizedState!==null,hn(e,t,a),At=n;break;default:hn(e,t,a)}}function $0(e,t){if(t.memoizedState===null&&(e=t.alternate,e!==null&&(e=e.memoizedState,e!==null))){e=e.dehydrated;try{js(e)}catch(a){et(t,t.return,a)}}}function F0(e,t){if(t.memoizedState===null&&(e=t.alternate,e!==null&&(e=e.memoizedState,e!==null&&(e=e.dehydrated,e!==null))))try{js(e)}catch(a){et(t,t.return,a)}}function $x(e){switch(e.tag){case 31:case 13:case 19:var t=e.stateNode;return t===null&&(t=e.stateNode=new Y0),t;case 22:return e=e.stateNode,t=e._retryCache,t===null&&(t=e._retryCache=new Y0),t;default:throw Error(c(435,e.tag))}}function Rr(e,t){var a=$x(e);t.forEach(function(n){if(!a.has(n)){a.add(n);var i=sy.bind(null,e,n);n.then(i,i)}})}function Xt(e,t){var a=t.deletions;if(a!==null)for(var n=0;n<a.length;n++){var i=a[n],r=e,m=t,b=m;e:for(;b!==null;){switch(b.tag){case 27:if(Fn(b.type)){ft=b.stateNode,Yt=!1;break e}break;case 5:ft=b.stateNode,Yt=!1;break e;case 3:case 4:ft=b.stateNode.containerInfo,Yt=!0;break e}b=b.return}if(ft===null)throw Error(c(160));W0(r,m,i),ft=null,Yt=!1,r=i.alternate,r!==null&&(r.return=null),i.return=null}if(t.subtreeFlags&13886)for(t=t.child;t!==null;)P0(t,e),t=t.sibling}var Oa=null;function P0(e,t){var a=e.alternate,n=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:Xt(t,e),Kt(e),n&4&&(Qn(3,e,e.return),fi(3,e),Qn(5,e,e.return));break;case 1:Xt(t,e),Kt(e),n&512&&(At||a===null||Wa(a,a.return)),n&64&&mn&&(e=e.updateQueue,e!==null&&(n=e.callbacks,n!==null&&(a=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=a===null?n:a.concat(n))));break;case 26:var i=Oa;if(Xt(t,e),Kt(e),n&512&&(At||a===null||Wa(a,a.return)),n&4){var r=a!==null?a.memoizedState:null;if(n=e.memoizedState,a===null)if(n===null)if(e.stateNode===null){e:{n=e.type,a=e.memoizedProps,i=i.ownerDocument||i;t:switch(n){case"title":r=i.getElementsByTagName("title")[0],(!r||r[Ql]||r[_t]||r.namespaceURI==="http://www.w3.org/2000/svg"||r.hasAttribute("itemprop"))&&(r=i.createElement(n),i.head.insertBefore(r,i.querySelector("head > title"))),Lt(r,n,a),r[_t]=e,ve(r),n=r;break e;case"link":var m=Pp("link","href",i).get(n+(a.href||""));if(m){for(var b=0;b<m.length;b++)if(r=m[b],r.getAttribute("href")===(a.href==null||a.href===""?null:a.href)&&r.getAttribute("rel")===(a.rel==null?null:a.rel)&&r.getAttribute("title")===(a.title==null?null:a.title)&&r.getAttribute("crossorigin")===(a.crossOrigin==null?null:a.crossOrigin)){m.splice(b,1);break t}}r=i.createElement(n),Lt(r,n,a),i.head.appendChild(r);break;case"meta":if(m=Pp("meta","content",i).get(n+(a.content||""))){for(b=0;b<m.length;b++)if(r=m[b],r.getAttribute("content")===(a.content==null?null:""+a.content)&&r.getAttribute("name")===(a.name==null?null:a.name)&&r.getAttribute("property")===(a.property==null?null:a.property)&&r.getAttribute("http-equiv")===(a.httpEquiv==null?null:a.httpEquiv)&&r.getAttribute("charset")===(a.charSet==null?null:a.charSet)){m.splice(b,1);break t}}r=i.createElement(n),Lt(r,n,a),i.head.appendChild(r);break;default:throw Error(c(468,n))}r[_t]=e,ve(r),n=r}e.stateNode=n}else Jp(i,e.type,e.stateNode);else e.stateNode=Fp(i,n,e.memoizedProps);else r!==n?(r===null?a.stateNode!==null&&(a=a.stateNode,a.parentNode.removeChild(a)):r.count--,n===null?Jp(i,e.type,e.stateNode):Fp(i,n,e.memoizedProps)):n===null&&e.stateNode!==null&&Fc(e,e.memoizedProps,a.memoizedProps)}break;case 27:Xt(t,e),Kt(e),n&512&&(At||a===null||Wa(a,a.return)),a!==null&&n&4&&Fc(e,e.memoizedProps,a.memoizedProps);break;case 5:if(Xt(t,e),Kt(e),n&512&&(At||a===null||Wa(a,a.return)),e.flags&32){i=e.stateNode;try{Xl(i,"")}catch(Se){et(e,e.return,Se)}}n&4&&e.stateNode!=null&&(i=e.memoizedProps,Fc(e,i,a!==null?a.memoizedProps:i)),n&1024&&(eu=!0);break;case 6:if(Xt(t,e),Kt(e),n&4){if(e.stateNode===null)throw Error(c(162));n=e.memoizedProps,a=e.stateNode;try{a.nodeValue=n}catch(Se){et(e,e.return,Se)}}break;case 3:if(Wr=null,i=Oa,Oa=Xr(t.containerInfo),Xt(t,e),Oa=i,Kt(e),n&4&&a!==null&&a.memoizedState.isDehydrated)try{js(t.containerInfo)}catch(Se){et(e,e.return,Se)}eu&&(eu=!1,J0(e));break;case 4:n=Oa,Oa=Xr(e.stateNode.containerInfo),Xt(t,e),Kt(e),Oa=n;break;case 12:Xt(t,e),Kt(e);break;case 31:Xt(t,e),Kt(e),n&4&&(n=e.updateQueue,n!==null&&(e.updateQueue=null,Rr(e,n)));break;case 13:Xt(t,e),Kt(e),e.child.flags&8192&&e.memoizedState!==null!=(a!==null&&a.memoizedState!==null)&&(Lr=_e()),n&4&&(n=e.updateQueue,n!==null&&(e.updateQueue=null,Rr(e,n)));break;case 22:i=e.memoizedState!==null;var E=a!==null&&a.memoizedState!==null,G=mn,ae=At;if(mn=G||i,At=ae||E,Xt(t,e),At=ae,mn=G,Kt(e),n&8192)e:for(t=e.stateNode,t._visibility=i?t._visibility&-2:t._visibility|1,i&&(a===null||E||mn||At||El(e)),a=null,t=e;;){if(t.tag===5||t.tag===26){if(a===null){E=a=t;try{if(r=E.stateNode,i)m=r.style,typeof m.setProperty=="function"?m.setProperty("display","none","important"):m.display="none";else{b=E.stateNode;var se=E.memoizedProps.style,Z=se!=null&&se.hasOwnProperty("display")?se.display:null;b.style.display=Z==null||typeof Z=="boolean"?"":(""+Z).trim()}}catch(Se){et(E,E.return,Se)}}}else if(t.tag===6){if(a===null){E=t;try{E.stateNode.nodeValue=i?"":E.memoizedProps}catch(Se){et(E,E.return,Se)}}}else if(t.tag===18){if(a===null){E=t;try{var $=E.stateNode;i?Gp($,!0):Gp(E.stateNode,!1)}catch(Se){et(E,E.return,Se)}}}else if((t.tag!==22&&t.tag!==23||t.memoizedState===null||t===e)&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;a===t&&(a=null),t=t.return}a===t&&(a=null),t.sibling.return=t.return,t=t.sibling}n&4&&(n=e.updateQueue,n!==null&&(a=n.retryQueue,a!==null&&(n.retryQueue=null,Rr(e,a))));break;case 19:Xt(t,e),Kt(e),n&4&&(n=e.updateQueue,n!==null&&(e.updateQueue=null,Rr(e,n)));break;case 30:break;case 21:break;default:Xt(t,e),Kt(e)}}function Kt(e){var t=e.flags;if(t&2){try{for(var a,n=e.return;n!==null;){if(Q0(n)){a=n;break}n=n.return}if(a==null)throw Error(c(160));switch(a.tag){case 27:var i=a.stateNode,r=Pc(e);Ir(e,r,i);break;case 5:var m=a.stateNode;a.flags&32&&(Xl(m,""),a.flags&=-33);var b=Pc(e);Ir(e,b,m);break;case 3:case 4:var E=a.stateNode.containerInfo,G=Pc(e);Jc(e,G,E);break;default:throw Error(c(161))}}catch(ae){et(e,e.return,ae)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function J0(e){if(e.subtreeFlags&1024)for(e=e.child;e!==null;){var t=e;J0(t),t.tag===5&&t.flags&1024&&t.stateNode.reset(),e=e.sibling}}function gn(e,t){if(t.subtreeFlags&8772)for(t=t.child;t!==null;)X0(e,t.alternate,t),t=t.sibling}function El(e){for(e=e.child;e!==null;){var t=e;switch(t.tag){case 0:case 11:case 14:case 15:Qn(4,t,t.return),El(t);break;case 1:Wa(t,t.return);var a=t.stateNode;typeof a.componentWillUnmount=="function"&&G0(t,t.return,a),El(t);break;case 27:wi(t.stateNode);case 26:case 5:Wa(t,t.return),El(t);break;case 22:t.memoizedState===null&&El(t);break;case 30:El(t);break;default:El(t)}e=e.sibling}}function xn(e,t,a){for(a=a&&(t.subtreeFlags&8772)!==0,t=t.child;t!==null;){var n=t.alternate,i=e,r=t,m=r.flags;switch(r.tag){case 0:case 11:case 15:xn(i,r,a),fi(4,r);break;case 1:if(xn(i,r,a),n=r,i=n.stateNode,typeof i.componentDidMount=="function")try{i.componentDidMount()}catch(G){et(n,n.return,G)}if(n=r,i=n.updateQueue,i!==null){var b=n.stateNode;try{var E=i.shared.hiddenCallbacks;if(E!==null)for(i.shared.hiddenCallbacks=null,i=0;i<E.length;i++)kf(E[i],b)}catch(G){et(n,n.return,G)}}a&&m&64&&q0(r),pi(r,r.return);break;case 27:Z0(r);case 26:case 5:xn(i,r,a),a&&n===null&&m&4&&V0(r),pi(r,r.return);break;case 12:xn(i,r,a);break;case 31:xn(i,r,a),a&&m&4&&$0(i,r);break;case 13:xn(i,r,a),a&&m&4&&F0(i,r);break;case 22:r.memoizedState===null&&xn(i,r,a),pi(r,r.return);break;case 30:break;default:xn(i,r,a)}t=t.sibling}}function tu(e,t){var a=null;e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(a=e.memoizedState.cachePool.pool),e=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(e=t.memoizedState.cachePool.pool),e!==a&&(e!=null&&e.refCount++,a!=null&&Js(a))}function au(e,t){e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&Js(e))}function Ia(e,t,a,n){if(t.subtreeFlags&10256)for(t=t.child;t!==null;)ep(e,t,a,n),t=t.sibling}function ep(e,t,a,n){var i=t.flags;switch(t.tag){case 0:case 11:case 15:Ia(e,t,a,n),i&2048&&fi(9,t);break;case 1:Ia(e,t,a,n);break;case 3:Ia(e,t,a,n),i&2048&&(e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&Js(e)));break;case 12:if(i&2048){Ia(e,t,a,n),e=t.stateNode;try{var r=t.memoizedProps,m=r.id,b=r.onPostCommit;typeof b=="function"&&b(m,t.alternate===null?"mount":"update",e.passiveEffectDuration,-0)}catch(E){et(t,t.return,E)}}else Ia(e,t,a,n);break;case 31:Ia(e,t,a,n);break;case 13:Ia(e,t,a,n);break;case 23:break;case 22:r=t.stateNode,m=t.alternate,t.memoizedState!==null?r._visibility&2?Ia(e,t,a,n):mi(e,t):r._visibility&2?Ia(e,t,a,n):(r._visibility|=2,ps(e,t,a,n,(t.subtreeFlags&10256)!==0||!1)),i&2048&&tu(m,t);break;case 24:Ia(e,t,a,n),i&2048&&au(t.alternate,t);break;default:Ia(e,t,a,n)}}function ps(e,t,a,n,i){for(i=i&&((t.subtreeFlags&10256)!==0||!1),t=t.child;t!==null;){var r=e,m=t,b=a,E=n,G=m.flags;switch(m.tag){case 0:case 11:case 15:ps(r,m,b,E,i),fi(8,m);break;case 23:break;case 22:var ae=m.stateNode;m.memoizedState!==null?ae._visibility&2?ps(r,m,b,E,i):mi(r,m):(ae._visibility|=2,ps(r,m,b,E,i)),i&&G&2048&&tu(m.alternate,m);break;case 24:ps(r,m,b,E,i),i&&G&2048&&au(m.alternate,m);break;default:ps(r,m,b,E,i)}t=t.sibling}}function mi(e,t){if(t.subtreeFlags&10256)for(t=t.child;t!==null;){var a=e,n=t,i=n.flags;switch(n.tag){case 22:mi(a,n),i&2048&&tu(n.alternate,n);break;case 24:mi(a,n),i&2048&&au(n.alternate,n);break;default:mi(a,n)}t=t.sibling}}var hi=8192;function ms(e,t,a){if(e.subtreeFlags&hi)for(e=e.child;e!==null;)tp(e,t,a),e=e.sibling}function tp(e,t,a){switch(e.tag){case 26:ms(e,t,a),e.flags&hi&&e.memoizedState!==null&&Uy(a,Oa,e.memoizedState,e.memoizedProps);break;case 5:ms(e,t,a);break;case 3:case 4:var n=Oa;Oa=Xr(e.stateNode.containerInfo),ms(e,t,a),Oa=n;break;case 22:e.memoizedState===null&&(n=e.alternate,n!==null&&n.memoizedState!==null?(n=hi,hi=16777216,ms(e,t,a),hi=n):ms(e,t,a));break;default:ms(e,t,a)}}function ap(e){var t=e.alternate;if(t!==null&&(e=t.child,e!==null)){t.child=null;do t=e.sibling,e.sibling=null,e=t;while(e!==null)}}function gi(e){var t=e.deletions;if((e.flags&16)!==0){if(t!==null)for(var a=0;a<t.length;a++){var n=t[a];Ot=n,lp(n,e)}ap(e)}if(e.subtreeFlags&10256)for(e=e.child;e!==null;)np(e),e=e.sibling}function np(e){switch(e.tag){case 0:case 11:case 15:gi(e),e.flags&2048&&Qn(9,e,e.return);break;case 3:gi(e);break;case 12:gi(e);break;case 22:var t=e.stateNode;e.memoizedState!==null&&t._visibility&2&&(e.return===null||e.return.tag!==13)?(t._visibility&=-3,Mr(e)):gi(e);break;default:gi(e)}}function Mr(e){var t=e.deletions;if((e.flags&16)!==0){if(t!==null)for(var a=0;a<t.length;a++){var n=t[a];Ot=n,lp(n,e)}ap(e)}for(e=e.child;e!==null;){switch(t=e,t.tag){case 0:case 11:case 15:Qn(8,t,t.return),Mr(t);break;case 22:a=t.stateNode,a._visibility&2&&(a._visibility&=-3,Mr(t));break;default:Mr(t)}e=e.sibling}}function lp(e,t){for(;Ot!==null;){var a=Ot;switch(a.tag){case 0:case 11:case 15:Qn(8,a,t);break;case 23:case 22:if(a.memoizedState!==null&&a.memoizedState.cachePool!==null){var n=a.memoizedState.cachePool.pool;n!=null&&n.refCount++}break;case 24:Js(a.memoizedState.cache)}if(n=a.child,n!==null)n.return=a,Ot=n;else e:for(a=e;Ot!==null;){n=Ot;var i=n.sibling,r=n.return;if(K0(n),n===a){Ot=null;break e}if(i!==null){i.return=r,Ot=i;break e}Ot=r}}}var Fx={getCacheForType:function(e){var t=Rt(Nt),a=t.data.get(e);return a===void 0&&(a=e(),t.data.set(e,a)),a},cacheSignal:function(){return Rt(Nt).controller.signal}},Px=typeof WeakMap=="function"?WeakMap:Map,We=0,ct=null,Me=null,Ue=0,Je=0,ia=null,Zn=!1,hs=!1,nu=!1,yn=0,gt=0,Yn=0,Al=0,lu=0,ra=0,gs=0,xi=null,Wt=null,su=!1,Lr=0,sp=0,Ur=1/0,zr=null,Xn=null,Tt=0,Kn=null,xs=null,bn=0,iu=0,ru=null,ip=null,yi=0,ou=null;function oa(){return(We&2)!==0&&Ue!==0?Ue&-Ue:_.T!==null?mu():Yi()}function rp(){if(ra===0)if((Ue&536870912)===0||Be){var e=Hl;Hl<<=1,(Hl&3932160)===0&&(Hl=262144),ra=e}else ra=536870912;return e=la.current,e!==null&&(e.flags|=32),ra}function $t(e,t,a){(e===ct&&(Je===2||Je===9)||e.cancelPendingCommit!==null)&&(ys(e,0),Wn(e,Ue,ra,!1)),ol(e,a),((We&2)===0||e!==ct)&&(e===ct&&((We&2)===0&&(Al|=a),gt===4&&Wn(e,Ue,ra,!1)),$a(e))}function op(e,t,a){if((We&6)!==0)throw Error(c(327));var n=!a&&(t&127)===0&&(t&e.expiredLanes)===0||rl(e,t),i=n?ty(e,t):uu(e,t,!0),r=n;do{if(i===0){hs&&!n&&Wn(e,t,0,!1);break}else{if(a=e.current.alternate,r&&!Jx(a)){i=uu(e,t,!1),r=!1;continue}if(i===2){if(r=t,e.errorRecoveryDisabledLanes&r)var m=0;else m=e.pendingLanes&-536870913,m=m!==0?m:m&536870912?536870912:0;if(m!==0){t=m;e:{var b=e;i=xi;var E=b.current.memoizedState.isDehydrated;if(E&&(ys(b,m).flags|=256),m=uu(b,m,!1),m!==2){if(nu&&!E){b.errorRecoveryDisabledLanes|=r,Al|=r,i=4;break e}r=Wt,Wt=i,r!==null&&(Wt===null?Wt=r:Wt.push.apply(Wt,r))}i=m}if(r=!1,i!==2)continue}}if(i===1){ys(e,0),Wn(e,t,0,!0);break}e:{switch(n=e,r=i,r){case 0:case 1:throw Error(c(345));case 4:if((t&4194048)!==t)break;case 6:Wn(n,t,ra,!Zn);break e;case 2:Wt=null;break;case 3:case 5:break;default:throw Error(c(329))}if((t&62914560)===t&&(i=Lr+300-_e(),10<i)){if(Wn(n,t,ra,!Zn),Gl(n,0,!0)!==0)break e;bn=t,n.timeoutHandle=Bp(cp.bind(null,n,a,Wt,zr,su,t,ra,Al,gs,Zn,r,"Throttled",-0,0),i);break e}cp(n,a,Wt,zr,su,t,ra,Al,gs,Zn,r,null,-0,0)}}break}while(!0);$a(e)}function cp(e,t,a,n,i,r,m,b,E,G,ae,se,Z,$){if(e.timeoutHandle=-1,se=t.subtreeFlags,se&8192||(se&16785408)===16785408){se={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:nn},tp(t,r,se);var Se=(r&62914560)===r?Lr-_e():(r&4194048)===r?sp-_e():0;if(Se=zy(se,Se),Se!==null){bn=r,e.cancelPendingCommit=Se(xp.bind(null,e,t,r,a,n,i,m,b,E,ae,se,null,Z,$)),Wn(e,r,m,!G);return}}xp(e,t,r,a,n,i,m,b,E)}function Jx(e){for(var t=e;;){var a=t.tag;if((a===0||a===11||a===15)&&t.flags&16384&&(a=t.updateQueue,a!==null&&(a=a.stores,a!==null)))for(var n=0;n<a.length;n++){var i=a[n],r=i.getSnapshot;i=i.value;try{if(!aa(r(),i))return!1}catch{return!1}}if(a=t.child,t.subtreeFlags&16384&&a!==null)a.return=t,t=a;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Wn(e,t,a,n){t&=~lu,t&=~Al,e.suspendedLanes|=t,e.pingedLanes&=~t,n&&(e.warmLanes|=t),n=e.expirationTimes;for(var i=t;0<i;){var r=31-wt(i),m=1<<r;n[r]=-1,i&=~m}a!==0&&Qi(e,a,t)}function Dr(){return(We&6)===0?(bi(0),!1):!0}function cu(){if(Me!==null){if(Je===0)var e=Me.return;else e=Me,on=xl=null,Ec(e),os=null,ti=0,e=Me;for(;e!==null;)H0(e.alternate,e),e=e.return;Me=null}}function ys(e,t){var a=e.timeoutHandle;a!==-1&&(e.timeoutHandle=-1,by(a)),a=e.cancelPendingCommit,a!==null&&(e.cancelPendingCommit=null,a()),bn=0,cu(),ct=e,Me=a=sn(e.current,null),Ue=t,Je=0,ia=null,Zn=!1,hs=rl(e,t),nu=!1,gs=ra=lu=Al=Yn=gt=0,Wt=xi=null,su=!1,(t&8)!==0&&(t|=t&32);var n=e.entangledLanes;if(n!==0)for(e=e.entanglements,n&=t;0<n;){var i=31-wt(n),r=1<<i;t|=e[i],n&=~r}return yn=t,sr(),a}function up(e,t){Oe=null,_.H=ci,t===rs||t===pr?(t=Af(),Je=3):t===pc?(t=Af(),Je=4):Je=t===qc?8:t!==null&&typeof t=="object"&&typeof t.then=="function"?6:1,ia=t,Me===null&&(gt=1,_r(e,xa(t,e.current)))}function dp(){var e=la.current;return e===null?!0:(Ue&4194048)===Ue?Sa===null:(Ue&62914560)===Ue||(Ue&536870912)!==0?e===Sa:!1}function fp(){var e=_.H;return _.H=ci,e===null?ci:e}function pp(){var e=_.A;return _.A=Fx,e}function Br(){gt=4,Zn||(Ue&4194048)!==Ue&&la.current!==null||(hs=!0),(Yn&134217727)===0&&(Al&134217727)===0||ct===null||Wn(ct,Ue,ra,!1)}function uu(e,t,a){var n=We;We|=2;var i=fp(),r=pp();(ct!==e||Ue!==t)&&(zr=null,ys(e,t)),t=!1;var m=gt;e:do try{if(Je!==0&&Me!==null){var b=Me,E=ia;switch(Je){case 8:cu(),m=6;break e;case 3:case 2:case 9:case 6:la.current===null&&(t=!0);var G=Je;if(Je=0,ia=null,bs(e,b,E,G),a&&hs){m=0;break e}break;default:G=Je,Je=0,ia=null,bs(e,b,E,G)}}ey(),m=gt;break}catch(ae){up(e,ae)}while(!0);return t&&e.shellSuspendCounter++,on=xl=null,We=n,_.H=i,_.A=r,Me===null&&(ct=null,Ue=0,sr()),m}function ey(){for(;Me!==null;)mp(Me)}function ty(e,t){var a=We;We|=2;var n=fp(),i=pp();ct!==e||Ue!==t?(zr=null,Ur=_e()+500,ys(e,t)):hs=rl(e,t);e:do try{if(Je!==0&&Me!==null){t=Me;var r=ia;t:switch(Je){case 1:Je=0,ia=null,bs(e,t,r,1);break;case 2:case 9:if(jf(r)){Je=0,ia=null,hp(t);break}t=function(){Je!==2&&Je!==9||ct!==e||(Je=7),$a(e)},r.then(t,t);break e;case 3:Je=7;break e;case 4:Je=5;break e;case 7:jf(r)?(Je=0,ia=null,hp(t)):(Je=0,ia=null,bs(e,t,r,7));break;case 5:var m=null;switch(Me.tag){case 26:m=Me.memoizedState;case 5:case 27:var b=Me;if(m?em(m):b.stateNode.complete){Je=0,ia=null;var E=b.sibling;if(E!==null)Me=E;else{var G=b.return;G!==null?(Me=G,Hr(G)):Me=null}break t}}Je=0,ia=null,bs(e,t,r,5);break;case 6:Je=0,ia=null,bs(e,t,r,6);break;case 8:cu(),gt=6;break e;default:throw Error(c(462))}}ay();break}catch(ae){up(e,ae)}while(!0);return on=xl=null,_.H=n,_.A=i,We=a,Me!==null?0:(ct=null,Ue=0,sr(),gt)}function ay(){for(;Me!==null&&!Pe();)mp(Me)}function mp(e){var t=D0(e.alternate,e,yn);e.memoizedProps=e.pendingProps,t===null?Hr(e):Me=t}function hp(e){var t=e,a=t.alternate;switch(t.tag){case 15:case 0:t=I0(a,t,t.pendingProps,t.type,void 0,Ue);break;case 11:t=I0(a,t,t.pendingProps,t.type.render,t.ref,Ue);break;case 5:Ec(t);default:H0(a,t),t=Me=pf(t,yn),t=D0(a,t,yn)}e.memoizedProps=e.pendingProps,t===null?Hr(e):Me=t}function bs(e,t,a,n){on=xl=null,Ec(t),os=null,ti=0;var i=t.return;try{if(Qx(e,i,t,a,Ue)){gt=1,_r(e,xa(a,e.current)),Me=null;return}}catch(r){if(i!==null)throw Me=i,r;gt=1,_r(e,xa(a,e.current)),Me=null;return}t.flags&32768?(Be||n===1?e=!0:hs||(Ue&536870912)!==0?e=!1:(Zn=e=!0,(n===2||n===9||n===3||n===6)&&(n=la.current,n!==null&&n.tag===13&&(n.flags|=16384))),gp(t,e)):Hr(t)}function Hr(e){var t=e;do{if((t.flags&32768)!==0){gp(t,Zn);return}e=t.return;var a=Xx(t.alternate,t,yn);if(a!==null){Me=a;return}if(t=t.sibling,t!==null){Me=t;return}Me=t=e}while(t!==null);gt===0&&(gt=5)}function gp(e,t){do{var a=Kx(e.alternate,e);if(a!==null){a.flags&=32767,Me=a;return}if(a=e.return,a!==null&&(a.flags|=32768,a.subtreeFlags=0,a.deletions=null),!t&&(e=e.sibling,e!==null)){Me=e;return}Me=e=a}while(e!==null);gt=6,Me=null}function xp(e,t,a,n,i,r,m,b,E){e.cancelPendingCommit=null;do qr();while(Tt!==0);if((We&6)!==0)throw Error(c(327));if(t!==null){if(t===e.current)throw Error(c(177));if(r=t.lanes|t.childLanes,r|=Po,Vl(e,a,r,m,b,E),e===ct&&(Me=ct=null,Ue=0),xs=t,Kn=e,bn=a,iu=r,ru=i,ip=n,(t.subtreeFlags&10256)!==0||(t.flags&10256)!==0?(e.callbackNode=null,e.callbackPriority=0,iy(pa,function(){return wp(),null})):(e.callbackNode=null,e.callbackPriority=0),n=(t.flags&13878)!==0,(t.subtreeFlags&13878)!==0||n){n=_.T,_.T=null,i=W.p,W.p=2,m=We,We|=4;try{Wx(e,t,a)}finally{We=m,W.p=i,_.T=n}}Tt=1,yp(),bp(),vp()}}function yp(){if(Tt===1){Tt=0;var e=Kn,t=xs,a=(t.flags&13878)!==0;if((t.subtreeFlags&13878)!==0||a){a=_.T,_.T=null;var n=W.p;W.p=2;var i=We;We|=4;try{P0(t,e);var r=wu,m=nf(e.containerInfo),b=r.focusedElem,E=r.selectionRange;if(m!==b&&b&&b.ownerDocument&&af(b.ownerDocument.documentElement,b)){if(E!==null&&Xo(b)){var G=E.start,ae=E.end;if(ae===void 0&&(ae=G),"selectionStart"in b)b.selectionStart=G,b.selectionEnd=Math.min(ae,b.value.length);else{var se=b.ownerDocument||document,Z=se&&se.defaultView||window;if(Z.getSelection){var $=Z.getSelection(),Se=b.textContent.length,Ae=Math.min(E.start,Se),rt=E.end===void 0?Ae:Math.min(E.end,Se);!$.extend&&Ae>rt&&(m=rt,rt=Ae,Ae=m);var M=tf(b,Ae),k=tf(b,rt);if(M&&k&&($.rangeCount!==1||$.anchorNode!==M.node||$.anchorOffset!==M.offset||$.focusNode!==k.node||$.focusOffset!==k.offset)){var q=se.createRange();q.setStart(M.node,M.offset),$.removeAllRanges(),Ae>rt?($.addRange(q),$.extend(k.node,k.offset)):(q.setEnd(k.node,k.offset),$.addRange(q))}}}}for(se=[],$=b;$=$.parentNode;)$.nodeType===1&&se.push({element:$,left:$.scrollLeft,top:$.scrollTop});for(typeof b.focus=="function"&&b.focus(),b=0;b<se.length;b++){var ne=se[b];ne.element.scrollLeft=ne.left,ne.element.scrollTop=ne.top}}Jr=!!Su,wu=Su=null}finally{We=i,W.p=n,_.T=a}}e.current=t,Tt=2}}function bp(){if(Tt===2){Tt=0;var e=Kn,t=xs,a=(t.flags&8772)!==0;if((t.subtreeFlags&8772)!==0||a){a=_.T,_.T=null;var n=W.p;W.p=2;var i=We;We|=4;try{X0(e,t.alternate,t)}finally{We=i,W.p=n,_.T=a}}Tt=3}}function vp(){if(Tt===4||Tt===3){Tt=0,De();var e=Kn,t=xs,a=bn,n=ip;(t.subtreeFlags&10256)!==0||(t.flags&10256)!==0?Tt=5:(Tt=0,xs=Kn=null,Sp(e,e.pendingLanes));var i=e.pendingLanes;if(i===0&&(Xn=null),Hs(a),t=t.stateNode,yt&&typeof yt.onCommitFiberRoot=="function")try{yt.onCommitFiberRoot(_a,t,void 0,(t.current.flags&128)===128)}catch{}if(n!==null){t=_.T,i=W.p,W.p=2,_.T=null;try{for(var r=e.onRecoverableError,m=0;m<n.length;m++){var b=n[m];r(b.value,{componentStack:b.stack})}}finally{_.T=t,W.p=i}}(bn&3)!==0&&qr(),$a(e),i=e.pendingLanes,(a&261930)!==0&&(i&42)!==0?e===ou?yi++:(yi=0,ou=e):yi=0,bi(0)}}function Sp(e,t){(e.pooledCacheLanes&=t)===0&&(t=e.pooledCache,t!=null&&(e.pooledCache=null,Js(t)))}function qr(){return yp(),bp(),vp(),wp()}function wp(){if(Tt!==5)return!1;var e=Kn,t=iu;iu=0;var a=Hs(bn),n=_.T,i=W.p;try{W.p=32>a?32:a,_.T=null,a=ru,ru=null;var r=Kn,m=bn;if(Tt=0,xs=Kn=null,bn=0,(We&6)!==0)throw Error(c(331));var b=We;if(We|=4,np(r.current),ep(r,r.current,m,a),We=b,bi(0,!1),yt&&typeof yt.onPostCommitFiberRoot=="function")try{yt.onPostCommitFiberRoot(_a,r)}catch{}return!0}finally{W.p=i,_.T=n,Sp(e,t)}}function Np(e,t,a){t=xa(a,t),t=Hc(e.stateNode,t,2),e=qn(e,t,2),e!==null&&(ol(e,2),$a(e))}function et(e,t,a){if(e.tag===3)Np(e,e,a);else for(;t!==null;){if(t.tag===3){Np(t,e,a);break}else if(t.tag===1){var n=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(Xn===null||!Xn.has(n))){e=xa(a,e),a=j0(2),n=qn(t,a,2),n!==null&&(E0(a,n,t,e),ol(n,2),$a(n));break}}t=t.return}}function du(e,t,a){var n=e.pingCache;if(n===null){n=e.pingCache=new Px;var i=new Set;n.set(t,i)}else i=n.get(t),i===void 0&&(i=new Set,n.set(t,i));i.has(a)||(nu=!0,i.add(a),e=ny.bind(null,e,t,a),t.then(e,e))}function ny(e,t,a){var n=e.pingCache;n!==null&&n.delete(t),e.pingedLanes|=e.suspendedLanes&a,e.warmLanes&=~a,ct===e&&(Ue&a)===a&&(gt===4||gt===3&&(Ue&62914560)===Ue&&300>_e()-Lr?(We&2)===0&&ys(e,0):lu|=a,gs===Ue&&(gs=0)),$a(e)}function jp(e,t){t===0&&(t=Vi()),e=ml(e,t),e!==null&&(ol(e,t),$a(e))}function ly(e){var t=e.memoizedState,a=0;t!==null&&(a=t.retryLane),jp(e,a)}function sy(e,t){var a=0;switch(e.tag){case 31:case 13:var n=e.stateNode,i=e.memoizedState;i!==null&&(a=i.retryLane);break;case 19:n=e.stateNode;break;case 22:n=e.stateNode._retryCache;break;default:throw Error(c(314))}n!==null&&n.delete(t),jp(e,a)}function iy(e,t){return Ce(e,t)}var Gr=null,vs=null,fu=!1,Vr=!1,pu=!1,$n=0;function $a(e){e!==vs&&e.next===null&&(vs===null?Gr=vs=e:vs=vs.next=e),Vr=!0,fu||(fu=!0,oy())}function bi(e,t){if(!pu&&Vr){pu=!0;do for(var a=!1,n=Gr;n!==null;){if(e!==0){var i=n.pendingLanes;if(i===0)var r=0;else{var m=n.suspendedLanes,b=n.pingedLanes;r=(1<<31-wt(42|e)+1)-1,r&=i&~(m&~b),r=r&201326741?r&201326741|1:r?r|2:0}r!==0&&(a=!0,Tp(n,r))}else r=Ue,r=Gl(n,n===ct?r:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),(r&3)===0||rl(n,r)||(a=!0,Tp(n,r));n=n.next}while(a);pu=!1}}function ry(){Ep()}function Ep(){Vr=fu=!1;var e=0;$n!==0&&yy()&&(e=$n);for(var t=_e(),a=null,n=Gr;n!==null;){var i=n.next,r=Ap(n,t);r===0?(n.next=null,a===null?Gr=i:a.next=i,i===null&&(vs=a)):(a=n,(e!==0||(r&3)!==0)&&(Vr=!0)),n=i}Tt!==0&&Tt!==5||bi(e),$n!==0&&($n=0)}function Ap(e,t){for(var a=e.suspendedLanes,n=e.pingedLanes,i=e.expirationTimes,r=e.pendingLanes&-62914561;0<r;){var m=31-wt(r),b=1<<m,E=i[m];E===-1?((b&a)===0||(b&n)!==0)&&(i[m]=Co(b,t)):E<=t&&(e.expiredLanes|=b),r&=~b}if(t=ct,a=Ue,a=Gl(e,e===t?a:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),n=e.callbackNode,a===0||e===t&&(Je===2||Je===9)||e.cancelPendingCommit!==null)return n!==null&&n!==null&&Re(n),e.callbackNode=null,e.callbackPriority=0;if((a&3)===0||rl(e,a)){if(t=a&-a,t===e.callbackPriority)return t;switch(n!==null&&Re(n),Hs(a)){case 2:case 8:a=mt;break;case 32:a=pa;break;case 268435456:a=tn;break;default:a=pa}return n=_p.bind(null,e),a=Ce(a,n),e.callbackPriority=t,e.callbackNode=a,t}return n!==null&&n!==null&&Re(n),e.callbackPriority=2,e.callbackNode=null,2}function _p(e,t){if(Tt!==0&&Tt!==5)return e.callbackNode=null,e.callbackPriority=0,null;var a=e.callbackNode;if(qr()&&e.callbackNode!==a)return null;var n=Ue;return n=Gl(e,e===ct?n:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),n===0?null:(op(e,n,t),Ap(e,_e()),e.callbackNode!=null&&e.callbackNode===a?_p.bind(null,e):null)}function Tp(e,t){if(qr())return null;op(e,t,!0)}function oy(){vy(function(){(We&6)!==0?Ce(lt,ry):Ep()})}function mu(){if($n===0){var e=ss;e===0&&(e=Bl,Bl<<=1,(Bl&261888)===0&&(Bl=256)),$n=e}return $n}function Cp(e){return e==null||typeof e=="symbol"||typeof e=="boolean"?null:typeof e=="function"?e:Fi(""+e)}function kp(e,t){var a=t.ownerDocument.createElement("input");return a.name=t.name,a.value=t.value,e.id&&a.setAttribute("form",e.id),t.parentNode.insertBefore(a,t),e=new FormData(e),a.parentNode.removeChild(a),e}function cy(e,t,a,n,i){if(t==="submit"&&a&&a.stateNode===i){var r=Cp((i[Ut]||null).action),m=n.submitter;m&&(t=(t=m[Ut]||null)?Cp(t.formAction):m.getAttribute("formAction"),t!==null&&(r=t,m=null));var b=new tr("action","action",null,n,i);e.push({event:b,listeners:[{instance:null,listener:function(){if(n.defaultPrevented){if($n!==0){var E=m?kp(i,m):new FormData(i);Mc(a,{pending:!0,data:E,method:i.method,action:r},null,E)}}else typeof r=="function"&&(b.preventDefault(),E=m?kp(i,m):new FormData(i),Mc(a,{pending:!0,data:E,method:i.method,action:r},r,E))},currentTarget:i}]})}}for(var hu=0;hu<Fo.length;hu++){var gu=Fo[hu],uy=gu.toLowerCase(),dy=gu[0].toUpperCase()+gu.slice(1);ka(uy,"on"+dy)}ka(rf,"onAnimationEnd"),ka(of,"onAnimationIteration"),ka(cf,"onAnimationStart"),ka("dblclick","onDoubleClick"),ka("focusin","onFocus"),ka("focusout","onBlur"),ka(_x,"onTransitionRun"),ka(Tx,"onTransitionStart"),ka(Cx,"onTransitionCancel"),ka(uf,"onTransitionEnd"),$e("onMouseEnter",["mouseout","mouseover"]),$e("onMouseLeave",["mouseout","mouseover"]),$e("onPointerEnter",["pointerout","pointerover"]),$e("onPointerLeave",["pointerout","pointerover"]),Ke("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Ke("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Ke("onBeforeInput",["compositionend","keypress","textInput","paste"]),Ke("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Ke("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Ke("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var vi="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),fy=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(vi));function Op(e,t){t=(t&4)!==0;for(var a=0;a<e.length;a++){var n=e[a],i=n.event;n=n.listeners;e:{var r=void 0;if(t)for(var m=n.length-1;0<=m;m--){var b=n[m],E=b.instance,G=b.currentTarget;if(b=b.listener,E!==r&&i.isPropagationStopped())break e;r=b,i.currentTarget=G;try{r(i)}catch(ae){lr(ae)}i.currentTarget=null,r=E}else for(m=0;m<n.length;m++){if(b=n[m],E=b.instance,G=b.currentTarget,b=b.listener,E!==r&&i.isPropagationStopped())break e;r=b,i.currentTarget=G;try{r(i)}catch(ae){lr(ae)}i.currentTarget=null,r=E}}}}function Le(e,t){var a=t[On];a===void 0&&(a=t[On]=new Set);var n=e+"__bubble";a.has(n)||(Ip(t,e,2,!1),a.add(n))}function xu(e,t,a){var n=0;t&&(n|=4),Ip(a,e,n,t)}var Qr="_reactListening"+Math.random().toString(36).slice(2);function yu(e){if(!e[Qr]){e[Qr]=!0,Ve.forEach(function(a){a!=="selectionchange"&&(fy.has(a)||xu(a,!1,e),xu(a,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Qr]||(t[Qr]=!0,xu("selectionchange",!1,t))}}function Ip(e,t,a,n){switch(rm(t)){case 2:var i=Hy;break;case 8:i=qy;break;default:i=Ru}a=i.bind(null,t,a,e),i=void 0,!Do||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(i=!0),n?i!==void 0?e.addEventListener(t,a,{capture:!0,passive:i}):e.addEventListener(t,a,!0):i!==void 0?e.addEventListener(t,a,{passive:i}):e.addEventListener(t,a,!1)}function bu(e,t,a,n,i){var r=n;if((t&1)===0&&(t&2)===0&&n!==null)e:for(;;){if(n===null)return;var m=n.tag;if(m===3||m===4){var b=n.stateNode.containerInfo;if(b===i)break;if(m===4)for(m=n.return;m!==null;){var E=m.tag;if((E===3||E===4)&&m.stateNode.containerInfo===i)return;m=m.return}for(;b!==null;){if(m=cl(b),m===null)return;if(E=m.tag,E===5||E===6||E===26||E===27){n=r=m;continue e}b=b.parentNode}}n=n.return}Ud(function(){var G=r,ae=Uo(a),se=[];e:{var Z=df.get(e);if(Z!==void 0){var $=tr,Se=e;switch(e){case"keypress":if(Ji(a)===0)break e;case"keydown":case"keyup":$=sx;break;case"focusin":Se="focus",$=Go;break;case"focusout":Se="blur",$=Go;break;case"beforeblur":case"afterblur":$=Go;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":$=Bd;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":$=Xg;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":$=ox;break;case rf:case of:case cf:$=$g;break;case uf:$=ux;break;case"scroll":case"scrollend":$=Zg;break;case"wheel":$=fx;break;case"copy":case"cut":case"paste":$=Pg;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":$=qd;break;case"toggle":case"beforetoggle":$=mx}var Ae=(t&4)!==0,rt=!Ae&&(e==="scroll"||e==="scrollend"),M=Ae?Z!==null?Z+"Capture":null:Z;Ae=[];for(var k=G,q;k!==null;){var ne=k;if(q=ne.stateNode,ne=ne.tag,ne!==5&&ne!==26&&ne!==27||q===null||M===null||(ne=Gs(k,M),ne!=null&&Ae.push(Si(k,ne,q))),rt)break;k=k.return}0<Ae.length&&(Z=new $(Z,Se,null,a,ae),se.push({event:Z,listeners:Ae}))}}if((t&7)===0){e:{if(Z=e==="mouseover"||e==="pointerover",$=e==="mouseout"||e==="pointerout",Z&&a!==Lo&&(Se=a.relatedTarget||a.fromElement)&&(cl(Se)||Se[kn]))break e;if(($||Z)&&(Z=ae.window===ae?ae:(Z=ae.ownerDocument)?Z.defaultView||Z.parentWindow:window,$?(Se=a.relatedTarget||a.toElement,$=G,Se=Se?cl(Se):null,Se!==null&&(rt=d(Se),Ae=Se.tag,Se!==rt||Ae!==5&&Ae!==27&&Ae!==6)&&(Se=null)):($=null,Se=G),$!==Se)){if(Ae=Bd,ne="onMouseLeave",M="onMouseEnter",k="mouse",(e==="pointerout"||e==="pointerover")&&(Ae=qd,ne="onPointerLeave",M="onPointerEnter",k="pointer"),rt=$==null?Z:Zl($),q=Se==null?Z:Zl(Se),Z=new Ae(ne,k+"leave",$,a,ae),Z.target=rt,Z.relatedTarget=q,ne=null,cl(ae)===G&&(Ae=new Ae(M,k+"enter",Se,a,ae),Ae.target=q,Ae.relatedTarget=rt,ne=Ae),rt=ne,$&&Se)t:{for(Ae=py,M=$,k=Se,q=0,ne=M;ne;ne=Ae(ne))q++;ne=0;for(var Ee=k;Ee;Ee=Ae(Ee))ne++;for(;0<q-ne;)M=Ae(M),q--;for(;0<ne-q;)k=Ae(k),ne--;for(;q--;){if(M===k||k!==null&&M===k.alternate){Ae=M;break t}M=Ae(M),k=Ae(k)}Ae=null}else Ae=null;$!==null&&Rp(se,Z,$,Ae,!1),Se!==null&&rt!==null&&Rp(se,rt,Se,Ae,!0)}}e:{if(Z=G?Zl(G):window,$=Z.nodeName&&Z.nodeName.toLowerCase(),$==="select"||$==="input"&&Z.type==="file")var Qe=Wd;else if(Xd(Z))if($d)Qe=jx;else{Qe=wx;var Ne=Sx}else $=Z.nodeName,!$||$.toLowerCase()!=="input"||Z.type!=="checkbox"&&Z.type!=="radio"?G&&Mo(G.elementType)&&(Qe=Wd):Qe=Nx;if(Qe&&(Qe=Qe(e,G))){Kd(se,Qe,a,ae);break e}Ne&&Ne(e,Z,G),e==="focusout"&&G&&Z.type==="number"&&G.memoizedProps.value!=null&&Ro(Z,"number",Z.value)}switch(Ne=G?Zl(G):window,e){case"focusin":(Xd(Ne)||Ne.contentEditable==="true")&&(Fl=Ne,Ko=G,$s=null);break;case"focusout":$s=Ko=Fl=null;break;case"mousedown":Wo=!0;break;case"contextmenu":case"mouseup":case"dragend":Wo=!1,lf(se,a,ae);break;case"selectionchange":if(Ax)break;case"keydown":case"keyup":lf(se,a,ae)}var Ie;if(Qo)e:{switch(e){case"compositionstart":var ze="onCompositionStart";break e;case"compositionend":ze="onCompositionEnd";break e;case"compositionupdate":ze="onCompositionUpdate";break e}ze=void 0}else $l?Zd(e,a)&&(ze="onCompositionEnd"):e==="keydown"&&a.keyCode===229&&(ze="onCompositionStart");ze&&(Gd&&a.locale!=="ko"&&($l||ze!=="onCompositionStart"?ze==="onCompositionEnd"&&$l&&(Ie=zd()):(Mn=ae,Bo="value"in Mn?Mn.value:Mn.textContent,$l=!0)),Ne=Zr(G,ze),0<Ne.length&&(ze=new Hd(ze,e,null,a,ae),se.push({event:ze,listeners:Ne}),Ie?ze.data=Ie:(Ie=Yd(a),Ie!==null&&(ze.data=Ie)))),(Ie=gx?xx(e,a):yx(e,a))&&(ze=Zr(G,"onBeforeInput"),0<ze.length&&(Ne=new Hd("onBeforeInput","beforeinput",null,a,ae),se.push({event:Ne,listeners:ze}),Ne.data=Ie)),cy(se,e,G,a,ae)}Op(se,t)})}function Si(e,t,a){return{instance:e,listener:t,currentTarget:a}}function Zr(e,t){for(var a=t+"Capture",n=[];e!==null;){var i=e,r=i.stateNode;if(i=i.tag,i!==5&&i!==26&&i!==27||r===null||(i=Gs(e,a),i!=null&&n.unshift(Si(e,i,r)),i=Gs(e,t),i!=null&&n.push(Si(e,i,r))),e.tag===3)return n;e=e.return}return[]}function py(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5&&e.tag!==27);return e||null}function Rp(e,t,a,n,i){for(var r=t._reactName,m=[];a!==null&&a!==n;){var b=a,E=b.alternate,G=b.stateNode;if(b=b.tag,E!==null&&E===n)break;b!==5&&b!==26&&b!==27||G===null||(E=G,i?(G=Gs(a,r),G!=null&&m.unshift(Si(a,G,E))):i||(G=Gs(a,r),G!=null&&m.push(Si(a,G,E)))),a=a.return}m.length!==0&&e.push({event:t,listeners:m})}var my=/\r\n?/g,hy=/\u0000|\uFFFD/g;function Mp(e){return(typeof e=="string"?e:""+e).replace(my,`
`).replace(hy,"")}function Lp(e,t){return t=Mp(t),Mp(e)===t}function it(e,t,a,n,i,r){switch(a){case"children":typeof n=="string"?t==="body"||t==="textarea"&&n===""||Xl(e,n):(typeof n=="number"||typeof n=="bigint")&&t!=="body"&&Xl(e,""+n);break;case"className":Rn(e,"class",n);break;case"tabIndex":Rn(e,"tabindex",n);break;case"dir":case"role":case"viewBox":case"width":case"height":Rn(e,a,n);break;case"style":Md(e,n,r);break;case"data":if(t!=="object"){Rn(e,"data",n);break}case"src":case"href":if(n===""&&(t!=="a"||a!=="href")){e.removeAttribute(a);break}if(n==null||typeof n=="function"||typeof n=="symbol"||typeof n=="boolean"){e.removeAttribute(a);break}n=Fi(""+n),e.setAttribute(a,n);break;case"action":case"formAction":if(typeof n=="function"){e.setAttribute(a,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof r=="function"&&(a==="formAction"?(t!=="input"&&it(e,t,"name",i.name,i,null),it(e,t,"formEncType",i.formEncType,i,null),it(e,t,"formMethod",i.formMethod,i,null),it(e,t,"formTarget",i.formTarget,i,null)):(it(e,t,"encType",i.encType,i,null),it(e,t,"method",i.method,i,null),it(e,t,"target",i.target,i,null)));if(n==null||typeof n=="symbol"||typeof n=="boolean"){e.removeAttribute(a);break}n=Fi(""+n),e.setAttribute(a,n);break;case"onClick":n!=null&&(e.onclick=nn);break;case"onScroll":n!=null&&Le("scroll",e);break;case"onScrollEnd":n!=null&&Le("scrollend",e);break;case"dangerouslySetInnerHTML":if(n!=null){if(typeof n!="object"||!("__html"in n))throw Error(c(61));if(a=n.__html,a!=null){if(i.children!=null)throw Error(c(60));e.innerHTML=a}}break;case"multiple":e.multiple=n&&typeof n!="function"&&typeof n!="symbol";break;case"muted":e.muted=n&&typeof n!="function"&&typeof n!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(n==null||typeof n=="function"||typeof n=="boolean"||typeof n=="symbol"){e.removeAttribute("xlink:href");break}a=Fi(""+n),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",a);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":n!=null&&typeof n!="function"&&typeof n!="symbol"?e.setAttribute(a,""+n):e.removeAttribute(a);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":n&&typeof n!="function"&&typeof n!="symbol"?e.setAttribute(a,""):e.removeAttribute(a);break;case"capture":case"download":n===!0?e.setAttribute(a,""):n!==!1&&n!=null&&typeof n!="function"&&typeof n!="symbol"?e.setAttribute(a,n):e.removeAttribute(a);break;case"cols":case"rows":case"size":case"span":n!=null&&typeof n!="function"&&typeof n!="symbol"&&!isNaN(n)&&1<=n?e.setAttribute(a,n):e.removeAttribute(a);break;case"rowSpan":case"start":n==null||typeof n=="function"||typeof n=="symbol"||isNaN(n)?e.removeAttribute(a):e.setAttribute(a,n);break;case"popover":Le("beforetoggle",e),Le("toggle",e),Ta(e,"popover",n);break;case"xlinkActuate":Ca(e,"http://www.w3.org/1999/xlink","xlink:actuate",n);break;case"xlinkArcrole":Ca(e,"http://www.w3.org/1999/xlink","xlink:arcrole",n);break;case"xlinkRole":Ca(e,"http://www.w3.org/1999/xlink","xlink:role",n);break;case"xlinkShow":Ca(e,"http://www.w3.org/1999/xlink","xlink:show",n);break;case"xlinkTitle":Ca(e,"http://www.w3.org/1999/xlink","xlink:title",n);break;case"xlinkType":Ca(e,"http://www.w3.org/1999/xlink","xlink:type",n);break;case"xmlBase":Ca(e,"http://www.w3.org/XML/1998/namespace","xml:base",n);break;case"xmlLang":Ca(e,"http://www.w3.org/XML/1998/namespace","xml:lang",n);break;case"xmlSpace":Ca(e,"http://www.w3.org/XML/1998/namespace","xml:space",n);break;case"is":Ta(e,"is",n);break;case"innerText":case"textContent":break;default:(!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(a=Vg.get(a)||a,Ta(e,a,n))}}function vu(e,t,a,n,i,r){switch(a){case"style":Md(e,n,r);break;case"dangerouslySetInnerHTML":if(n!=null){if(typeof n!="object"||!("__html"in n))throw Error(c(61));if(a=n.__html,a!=null){if(i.children!=null)throw Error(c(60));e.innerHTML=a}}break;case"children":typeof n=="string"?Xl(e,n):(typeof n=="number"||typeof n=="bigint")&&Xl(e,""+n);break;case"onScroll":n!=null&&Le("scroll",e);break;case"onScrollEnd":n!=null&&Le("scrollend",e);break;case"onClick":n!=null&&(e.onclick=nn);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Te.hasOwnProperty(a))e:{if(a[0]==="o"&&a[1]==="n"&&(i=a.endsWith("Capture"),t=a.slice(2,i?a.length-7:void 0),r=e[Ut]||null,r=r!=null?r[a]:null,typeof r=="function"&&e.removeEventListener(t,r,i),typeof n=="function")){typeof r!="function"&&r!==null&&(a in e?e[a]=null:e.hasAttribute(a)&&e.removeAttribute(a)),e.addEventListener(t,n,i);break e}a in e?e[a]=n:n===!0?e.setAttribute(a,""):Ta(e,a,n)}}}function Lt(e,t,a){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Le("error",e),Le("load",e);var n=!1,i=!1,r;for(r in a)if(a.hasOwnProperty(r)){var m=a[r];if(m!=null)switch(r){case"src":n=!0;break;case"srcSet":i=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(c(137,t));default:it(e,t,r,m,a,null)}}i&&it(e,t,"srcSet",a.srcSet,a,null),n&&it(e,t,"src",a.src,a,null);return;case"input":Le("invalid",e);var b=r=m=i=null,E=null,G=null;for(n in a)if(a.hasOwnProperty(n)){var ae=a[n];if(ae!=null)switch(n){case"name":i=ae;break;case"type":m=ae;break;case"checked":E=ae;break;case"defaultChecked":G=ae;break;case"value":r=ae;break;case"defaultValue":b=ae;break;case"children":case"dangerouslySetInnerHTML":if(ae!=null)throw Error(c(137,t));break;default:it(e,t,n,ae,a,null)}}kd(e,r,b,E,G,m,i,!1);return;case"select":Le("invalid",e),n=m=r=null;for(i in a)if(a.hasOwnProperty(i)&&(b=a[i],b!=null))switch(i){case"value":r=b;break;case"defaultValue":m=b;break;case"multiple":n=b;default:it(e,t,i,b,a,null)}t=r,a=m,e.multiple=!!n,t!=null?Yl(e,!!n,t,!1):a!=null&&Yl(e,!!n,a,!0);return;case"textarea":Le("invalid",e),r=i=n=null;for(m in a)if(a.hasOwnProperty(m)&&(b=a[m],b!=null))switch(m){case"value":n=b;break;case"defaultValue":i=b;break;case"children":r=b;break;case"dangerouslySetInnerHTML":if(b!=null)throw Error(c(91));break;default:it(e,t,m,b,a,null)}Id(e,n,i,r);return;case"option":for(E in a)if(a.hasOwnProperty(E)&&(n=a[E],n!=null))switch(E){case"selected":e.selected=n&&typeof n!="function"&&typeof n!="symbol";break;default:it(e,t,E,n,a,null)}return;case"dialog":Le("beforetoggle",e),Le("toggle",e),Le("cancel",e),Le("close",e);break;case"iframe":case"object":Le("load",e);break;case"video":case"audio":for(n=0;n<vi.length;n++)Le(vi[n],e);break;case"image":Le("error",e),Le("load",e);break;case"details":Le("toggle",e);break;case"embed":case"source":case"link":Le("error",e),Le("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(G in a)if(a.hasOwnProperty(G)&&(n=a[G],n!=null))switch(G){case"children":case"dangerouslySetInnerHTML":throw Error(c(137,t));default:it(e,t,G,n,a,null)}return;default:if(Mo(t)){for(ae in a)a.hasOwnProperty(ae)&&(n=a[ae],n!==void 0&&vu(e,t,ae,n,a,void 0));return}}for(b in a)a.hasOwnProperty(b)&&(n=a[b],n!=null&&it(e,t,b,n,a,null))}function gy(e,t,a,n){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var i=null,r=null,m=null,b=null,E=null,G=null,ae=null;for($ in a){var se=a[$];if(a.hasOwnProperty($)&&se!=null)switch($){case"checked":break;case"value":break;case"defaultValue":E=se;default:n.hasOwnProperty($)||it(e,t,$,null,n,se)}}for(var Z in n){var $=n[Z];if(se=a[Z],n.hasOwnProperty(Z)&&($!=null||se!=null))switch(Z){case"type":r=$;break;case"name":i=$;break;case"checked":G=$;break;case"defaultChecked":ae=$;break;case"value":m=$;break;case"defaultValue":b=$;break;case"children":case"dangerouslySetInnerHTML":if($!=null)throw Error(c(137,t));break;default:$!==se&&it(e,t,Z,$,n,se)}}Io(e,m,b,E,G,ae,r,i);return;case"select":$=m=b=Z=null;for(r in a)if(E=a[r],a.hasOwnProperty(r)&&E!=null)switch(r){case"value":break;case"multiple":$=E;default:n.hasOwnProperty(r)||it(e,t,r,null,n,E)}for(i in n)if(r=n[i],E=a[i],n.hasOwnProperty(i)&&(r!=null||E!=null))switch(i){case"value":Z=r;break;case"defaultValue":b=r;break;case"multiple":m=r;default:r!==E&&it(e,t,i,r,n,E)}t=b,a=m,n=$,Z!=null?Yl(e,!!a,Z,!1):!!n!=!!a&&(t!=null?Yl(e,!!a,t,!0):Yl(e,!!a,a?[]:"",!1));return;case"textarea":$=Z=null;for(b in a)if(i=a[b],a.hasOwnProperty(b)&&i!=null&&!n.hasOwnProperty(b))switch(b){case"value":break;case"children":break;default:it(e,t,b,null,n,i)}for(m in n)if(i=n[m],r=a[m],n.hasOwnProperty(m)&&(i!=null||r!=null))switch(m){case"value":Z=i;break;case"defaultValue":$=i;break;case"children":break;case"dangerouslySetInnerHTML":if(i!=null)throw Error(c(91));break;default:i!==r&&it(e,t,m,i,n,r)}Od(e,Z,$);return;case"option":for(var Se in a)if(Z=a[Se],a.hasOwnProperty(Se)&&Z!=null&&!n.hasOwnProperty(Se))switch(Se){case"selected":e.selected=!1;break;default:it(e,t,Se,null,n,Z)}for(E in n)if(Z=n[E],$=a[E],n.hasOwnProperty(E)&&Z!==$&&(Z!=null||$!=null))switch(E){case"selected":e.selected=Z&&typeof Z!="function"&&typeof Z!="symbol";break;default:it(e,t,E,Z,n,$)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Ae in a)Z=a[Ae],a.hasOwnProperty(Ae)&&Z!=null&&!n.hasOwnProperty(Ae)&&it(e,t,Ae,null,n,Z);for(G in n)if(Z=n[G],$=a[G],n.hasOwnProperty(G)&&Z!==$&&(Z!=null||$!=null))switch(G){case"children":case"dangerouslySetInnerHTML":if(Z!=null)throw Error(c(137,t));break;default:it(e,t,G,Z,n,$)}return;default:if(Mo(t)){for(var rt in a)Z=a[rt],a.hasOwnProperty(rt)&&Z!==void 0&&!n.hasOwnProperty(rt)&&vu(e,t,rt,void 0,n,Z);for(ae in n)Z=n[ae],$=a[ae],!n.hasOwnProperty(ae)||Z===$||Z===void 0&&$===void 0||vu(e,t,ae,Z,n,$);return}}for(var M in a)Z=a[M],a.hasOwnProperty(M)&&Z!=null&&!n.hasOwnProperty(M)&&it(e,t,M,null,n,Z);for(se in n)Z=n[se],$=a[se],!n.hasOwnProperty(se)||Z===$||Z==null&&$==null||it(e,t,se,Z,n,$)}function Up(e){switch(e){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function xy(){if(typeof performance.getEntriesByType=="function"){for(var e=0,t=0,a=performance.getEntriesByType("resource"),n=0;n<a.length;n++){var i=a[n],r=i.transferSize,m=i.initiatorType,b=i.duration;if(r&&b&&Up(m)){for(m=0,b=i.responseEnd,n+=1;n<a.length;n++){var E=a[n],G=E.startTime;if(G>b)break;var ae=E.transferSize,se=E.initiatorType;ae&&Up(se)&&(E=E.responseEnd,m+=ae*(E<b?1:(b-G)/(E-G)))}if(--n,t+=8*(r+m)/(i.duration/1e3),e++,10<e)break}}if(0<e)return t/e/1e6}return navigator.connection&&(e=navigator.connection.downlink,typeof e=="number")?e:5}var Su=null,wu=null;function Yr(e){return e.nodeType===9?e:e.ownerDocument}function zp(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Dp(e,t){if(e===0)switch(t){case"svg":return 1;case"math":return 2;default:return 0}return e===1&&t==="foreignObject"?0:e}function Nu(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.children=="bigint"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var ju=null;function yy(){var e=window.event;return e&&e.type==="popstate"?e===ju?!1:(ju=e,!0):(ju=null,!1)}var Bp=typeof setTimeout=="function"?setTimeout:void 0,by=typeof clearTimeout=="function"?clearTimeout:void 0,Hp=typeof Promise=="function"?Promise:void 0,vy=typeof queueMicrotask=="function"?queueMicrotask:typeof Hp<"u"?function(e){return Hp.resolve(null).then(e).catch(Sy)}:Bp;function Sy(e){setTimeout(function(){throw e})}function Fn(e){return e==="head"}function qp(e,t){var a=t,n=0;do{var i=a.nextSibling;if(e.removeChild(a),i&&i.nodeType===8)if(a=i.data,a==="/$"||a==="/&"){if(n===0){e.removeChild(i),js(t);return}n--}else if(a==="$"||a==="$?"||a==="$~"||a==="$!"||a==="&")n++;else if(a==="html")wi(e.ownerDocument.documentElement);else if(a==="head"){a=e.ownerDocument.head,wi(a);for(var r=a.firstChild;r;){var m=r.nextSibling,b=r.nodeName;r[Ql]||b==="SCRIPT"||b==="STYLE"||b==="LINK"&&r.rel.toLowerCase()==="stylesheet"||a.removeChild(r),r=m}}else a==="body"&&wi(e.ownerDocument.body);a=i}while(a);js(t)}function Gp(e,t){var a=e;e=0;do{var n=a.nextSibling;if(a.nodeType===1?t?(a._stashedDisplay=a.style.display,a.style.display="none"):(a.style.display=a._stashedDisplay||"",a.getAttribute("style")===""&&a.removeAttribute("style")):a.nodeType===3&&(t?(a._stashedText=a.nodeValue,a.nodeValue=""):a.nodeValue=a._stashedText||""),n&&n.nodeType===8)if(a=n.data,a==="/$"){if(e===0)break;e--}else a!=="$"&&a!=="$?"&&a!=="$~"&&a!=="$!"||e++;a=n}while(a)}function Eu(e){var t=e.firstChild;for(t&&t.nodeType===10&&(t=t.nextSibling);t;){var a=t;switch(t=t.nextSibling,a.nodeName){case"HTML":case"HEAD":case"BODY":Eu(a),Wi(a);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(a.rel.toLowerCase()==="stylesheet")continue}e.removeChild(a)}}function wy(e,t,a,n){for(;e.nodeType===1;){var i=a;if(e.nodeName.toLowerCase()!==t.toLowerCase()){if(!n&&(e.nodeName!=="INPUT"||e.type!=="hidden"))break}else if(n){if(!e[Ql])switch(t){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if(r=e.getAttribute("rel"),r==="stylesheet"&&e.hasAttribute("data-precedence"))break;if(r!==i.rel||e.getAttribute("href")!==(i.href==null||i.href===""?null:i.href)||e.getAttribute("crossorigin")!==(i.crossOrigin==null?null:i.crossOrigin)||e.getAttribute("title")!==(i.title==null?null:i.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(r=e.getAttribute("src"),(r!==(i.src==null?null:i.src)||e.getAttribute("type")!==(i.type==null?null:i.type)||e.getAttribute("crossorigin")!==(i.crossOrigin==null?null:i.crossOrigin))&&r&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else if(t==="input"&&e.type==="hidden"){var r=i.name==null?null:""+i.name;if(i.type==="hidden"&&e.getAttribute("name")===r)return e}else return e;if(e=wa(e.nextSibling),e===null)break}return null}function Ny(e,t,a){if(t==="")return null;for(;e.nodeType!==3;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!a||(e=wa(e.nextSibling),e===null))return null;return e}function Vp(e,t){for(;e.nodeType!==8;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!t||(e=wa(e.nextSibling),e===null))return null;return e}function Au(e){return e.data==="$?"||e.data==="$~"}function _u(e){return e.data==="$!"||e.data==="$?"&&e.ownerDocument.readyState!=="loading"}function jy(e,t){var a=e.ownerDocument;if(e.data==="$~")e._reactRetry=t;else if(e.data!=="$?"||a.readyState!=="loading")t();else{var n=function(){t(),a.removeEventListener("DOMContentLoaded",n)};a.addEventListener("DOMContentLoaded",n),e._reactRetry=n}}function wa(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?"||t==="$~"||t==="&"||t==="F!"||t==="F")break;if(t==="/$"||t==="/&")return null}}return e}var Tu=null;function Qp(e){e=e.nextSibling;for(var t=0;e;){if(e.nodeType===8){var a=e.data;if(a==="/$"||a==="/&"){if(t===0)return wa(e.nextSibling);t--}else a!=="$"&&a!=="$!"&&a!=="$?"&&a!=="$~"&&a!=="&"||t++}e=e.nextSibling}return null}function Zp(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var a=e.data;if(a==="$"||a==="$!"||a==="$?"||a==="$~"||a==="&"){if(t===0)return e;t--}else a!=="/$"&&a!=="/&"||t++}e=e.previousSibling}return null}function Yp(e,t,a){switch(t=Yr(a),e){case"html":if(e=t.documentElement,!e)throw Error(c(452));return e;case"head":if(e=t.head,!e)throw Error(c(453));return e;case"body":if(e=t.body,!e)throw Error(c(454));return e;default:throw Error(c(451))}}function wi(e){for(var t=e.attributes;t.length;)e.removeAttributeNode(t[0]);Wi(e)}var Na=new Map,Xp=new Set;function Xr(e){return typeof e.getRootNode=="function"?e.getRootNode():e.nodeType===9?e:e.ownerDocument}var vn=W.d;W.d={f:Ey,r:Ay,D:_y,C:Ty,L:Cy,m:ky,X:Iy,S:Oy,M:Ry};function Ey(){var e=vn.f(),t=Dr();return e||t}function Ay(e){var t=ul(e);t!==null&&t.tag===5&&t.type==="form"?u0(t):vn.r(e)}var Ss=typeof document>"u"?null:document;function Kp(e,t,a){var n=Ss;if(n&&typeof t=="string"&&t){var i=ha(t);i='link[rel="'+e+'"][href="'+i+'"]',typeof a=="string"&&(i+='[crossorigin="'+a+'"]'),Xp.has(i)||(Xp.add(i),e={rel:e,crossOrigin:a,href:t},n.querySelector(i)===null&&(t=n.createElement("link"),Lt(t,"link",e),ve(t),n.head.appendChild(t)))}}function _y(e){vn.D(e),Kp("dns-prefetch",e,null)}function Ty(e,t){vn.C(e,t),Kp("preconnect",e,t)}function Cy(e,t,a){vn.L(e,t,a);var n=Ss;if(n&&e&&t){var i='link[rel="preload"][as="'+ha(t)+'"]';t==="image"&&a&&a.imageSrcSet?(i+='[imagesrcset="'+ha(a.imageSrcSet)+'"]',typeof a.imageSizes=="string"&&(i+='[imagesizes="'+ha(a.imageSizes)+'"]')):i+='[href="'+ha(e)+'"]';var r=i;switch(t){case"style":r=ws(e);break;case"script":r=Ns(e)}Na.has(r)||(e=S({rel:"preload",href:t==="image"&&a&&a.imageSrcSet?void 0:e,as:t},a),Na.set(r,e),n.querySelector(i)!==null||t==="style"&&n.querySelector(Ni(r))||t==="script"&&n.querySelector(ji(r))||(t=n.createElement("link"),Lt(t,"link",e),ve(t),n.head.appendChild(t)))}}function ky(e,t){vn.m(e,t);var a=Ss;if(a&&e){var n=t&&typeof t.as=="string"?t.as:"script",i='link[rel="modulepreload"][as="'+ha(n)+'"][href="'+ha(e)+'"]',r=i;switch(n){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":r=Ns(e)}if(!Na.has(r)&&(e=S({rel:"modulepreload",href:e},t),Na.set(r,e),a.querySelector(i)===null)){switch(n){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(a.querySelector(ji(r)))return}n=a.createElement("link"),Lt(n,"link",e),ve(n),a.head.appendChild(n)}}}function Oy(e,t,a){vn.S(e,t,a);var n=Ss;if(n&&e){var i=be(n).hoistableStyles,r=ws(e);t=t||"default";var m=i.get(r);if(!m){var b={loading:0,preload:null};if(m=n.querySelector(Ni(r)))b.loading=5;else{e=S({rel:"stylesheet",href:e,"data-precedence":t},a),(a=Na.get(r))&&Cu(e,a);var E=m=n.createElement("link");ve(E),Lt(E,"link",e),E._p=new Promise(function(G,ae){E.onload=G,E.onerror=ae}),E.addEventListener("load",function(){b.loading|=1}),E.addEventListener("error",function(){b.loading|=2}),b.loading|=4,Kr(m,t,n)}m={type:"stylesheet",instance:m,count:1,state:b},i.set(r,m)}}}function Iy(e,t){vn.X(e,t);var a=Ss;if(a&&e){var n=be(a).hoistableScripts,i=Ns(e),r=n.get(i);r||(r=a.querySelector(ji(i)),r||(e=S({src:e,async:!0},t),(t=Na.get(i))&&ku(e,t),r=a.createElement("script"),ve(r),Lt(r,"link",e),a.head.appendChild(r)),r={type:"script",instance:r,count:1,state:null},n.set(i,r))}}function Ry(e,t){vn.M(e,t);var a=Ss;if(a&&e){var n=be(a).hoistableScripts,i=Ns(e),r=n.get(i);r||(r=a.querySelector(ji(i)),r||(e=S({src:e,async:!0,type:"module"},t),(t=Na.get(i))&&ku(e,t),r=a.createElement("script"),ve(r),Lt(r,"link",e),a.head.appendChild(r)),r={type:"script",instance:r,count:1,state:null},n.set(i,r))}}function Wp(e,t,a,n){var i=(i=ce.current)?Xr(i):null;if(!i)throw Error(c(446));switch(e){case"meta":case"title":return null;case"style":return typeof a.precedence=="string"&&typeof a.href=="string"?(t=ws(a.href),a=be(i).hoistableStyles,n=a.get(t),n||(n={type:"style",instance:null,count:0,state:null},a.set(t,n)),n):{type:"void",instance:null,count:0,state:null};case"link":if(a.rel==="stylesheet"&&typeof a.href=="string"&&typeof a.precedence=="string"){e=ws(a.href);var r=be(i).hoistableStyles,m=r.get(e);if(m||(i=i.ownerDocument||i,m={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},r.set(e,m),(r=i.querySelector(Ni(e)))&&!r._p&&(m.instance=r,m.state.loading=5),Na.has(e)||(a={rel:"preload",as:"style",href:a.href,crossOrigin:a.crossOrigin,integrity:a.integrity,media:a.media,hrefLang:a.hrefLang,referrerPolicy:a.referrerPolicy},Na.set(e,a),r||My(i,e,a,m.state))),t&&n===null)throw Error(c(528,""));return m}if(t&&n!==null)throw Error(c(529,""));return null;case"script":return t=a.async,a=a.src,typeof a=="string"&&t&&typeof t!="function"&&typeof t!="symbol"?(t=Ns(a),a=be(i).hoistableScripts,n=a.get(t),n||(n={type:"script",instance:null,count:0,state:null},a.set(t,n)),n):{type:"void",instance:null,count:0,state:null};default:throw Error(c(444,e))}}function ws(e){return'href="'+ha(e)+'"'}function Ni(e){return'link[rel="stylesheet"]['+e+"]"}function $p(e){return S({},e,{"data-precedence":e.precedence,precedence:null})}function My(e,t,a,n){e.querySelector('link[rel="preload"][as="style"]['+t+"]")?n.loading=1:(t=e.createElement("link"),n.preload=t,t.addEventListener("load",function(){return n.loading|=1}),t.addEventListener("error",function(){return n.loading|=2}),Lt(t,"link",a),ve(t),e.head.appendChild(t))}function Ns(e){return'[src="'+ha(e)+'"]'}function ji(e){return"script[async]"+e}function Fp(e,t,a){if(t.count++,t.instance===null)switch(t.type){case"style":var n=e.querySelector('style[data-href~="'+ha(a.href)+'"]');if(n)return t.instance=n,ve(n),n;var i=S({},a,{"data-href":a.href,"data-precedence":a.precedence,href:null,precedence:null});return n=(e.ownerDocument||e).createElement("style"),ve(n),Lt(n,"style",i),Kr(n,a.precedence,e),t.instance=n;case"stylesheet":i=ws(a.href);var r=e.querySelector(Ni(i));if(r)return t.state.loading|=4,t.instance=r,ve(r),r;n=$p(a),(i=Na.get(i))&&Cu(n,i),r=(e.ownerDocument||e).createElement("link"),ve(r);var m=r;return m._p=new Promise(function(b,E){m.onload=b,m.onerror=E}),Lt(r,"link",n),t.state.loading|=4,Kr(r,a.precedence,e),t.instance=r;case"script":return r=Ns(a.src),(i=e.querySelector(ji(r)))?(t.instance=i,ve(i),i):(n=a,(i=Na.get(r))&&(n=S({},a),ku(n,i)),e=e.ownerDocument||e,i=e.createElement("script"),ve(i),Lt(i,"link",n),e.head.appendChild(i),t.instance=i);case"void":return null;default:throw Error(c(443,t.type))}else t.type==="stylesheet"&&(t.state.loading&4)===0&&(n=t.instance,t.state.loading|=4,Kr(n,a.precedence,e));return t.instance}function Kr(e,t,a){for(var n=a.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),i=n.length?n[n.length-1]:null,r=i,m=0;m<n.length;m++){var b=n[m];if(b.dataset.precedence===t)r=b;else if(r!==i)break}r?r.parentNode.insertBefore(e,r.nextSibling):(t=a.nodeType===9?a.head:a,t.insertBefore(e,t.firstChild))}function Cu(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.title==null&&(e.title=t.title)}function ku(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.integrity==null&&(e.integrity=t.integrity)}var Wr=null;function Pp(e,t,a){if(Wr===null){var n=new Map,i=Wr=new Map;i.set(a,n)}else i=Wr,n=i.get(a),n||(n=new Map,i.set(a,n));if(n.has(e))return n;for(n.set(e,null),a=a.getElementsByTagName(e),i=0;i<a.length;i++){var r=a[i];if(!(r[Ql]||r[_t]||e==="link"&&r.getAttribute("rel")==="stylesheet")&&r.namespaceURI!=="http://www.w3.org/2000/svg"){var m=r.getAttribute(t)||"";m=e+m;var b=n.get(m);b?b.push(r):n.set(m,[r])}}return n}function Jp(e,t,a){e=e.ownerDocument||e,e.head.insertBefore(a,t==="title"?e.querySelector("head > title"):null)}function Ly(e,t,a){if(a===1||t.itemProp!=null)return!1;switch(e){case"meta":case"title":return!0;case"style":if(typeof t.precedence!="string"||typeof t.href!="string"||t.href==="")break;return!0;case"link":if(typeof t.rel!="string"||typeof t.href!="string"||t.href===""||t.onLoad||t.onError)break;switch(t.rel){case"stylesheet":return e=t.disabled,typeof t.precedence=="string"&&e==null;default:return!0}case"script":if(t.async&&typeof t.async!="function"&&typeof t.async!="symbol"&&!t.onLoad&&!t.onError&&t.src&&typeof t.src=="string")return!0}return!1}function em(e){return!(e.type==="stylesheet"&&(e.state.loading&3)===0)}function Uy(e,t,a,n){if(a.type==="stylesheet"&&(typeof n.media!="string"||matchMedia(n.media).matches!==!1)&&(a.state.loading&4)===0){if(a.instance===null){var i=ws(n.href),r=t.querySelector(Ni(i));if(r){t=r._p,t!==null&&typeof t=="object"&&typeof t.then=="function"&&(e.count++,e=$r.bind(e),t.then(e,e)),a.state.loading|=4,a.instance=r,ve(r);return}r=t.ownerDocument||t,n=$p(n),(i=Na.get(i))&&Cu(n,i),r=r.createElement("link"),ve(r);var m=r;m._p=new Promise(function(b,E){m.onload=b,m.onerror=E}),Lt(r,"link",n),a.instance=r}e.stylesheets===null&&(e.stylesheets=new Map),e.stylesheets.set(a,t),(t=a.state.preload)&&(a.state.loading&3)===0&&(e.count++,a=$r.bind(e),t.addEventListener("load",a),t.addEventListener("error",a))}}var Ou=0;function zy(e,t){return e.stylesheets&&e.count===0&&Pr(e,e.stylesheets),0<e.count||0<e.imgCount?function(a){var n=setTimeout(function(){if(e.stylesheets&&Pr(e,e.stylesheets),e.unsuspend){var r=e.unsuspend;e.unsuspend=null,r()}},6e4+t);0<e.imgBytes&&Ou===0&&(Ou=62500*xy());var i=setTimeout(function(){if(e.waitingForImages=!1,e.count===0&&(e.stylesheets&&Pr(e,e.stylesheets),e.unsuspend)){var r=e.unsuspend;e.unsuspend=null,r()}},(e.imgBytes>Ou?50:800)+t);return e.unsuspend=a,function(){e.unsuspend=null,clearTimeout(n),clearTimeout(i)}}:null}function $r(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Pr(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}}var Fr=null;function Pr(e,t){e.stylesheets=null,e.unsuspend!==null&&(e.count++,Fr=new Map,t.forEach(Dy,e),Fr=null,$r.call(e))}function Dy(e,t){if(!(t.state.loading&4)){var a=Fr.get(e);if(a)var n=a.get(null);else{a=new Map,Fr.set(e,a);for(var i=e.querySelectorAll("link[data-precedence],style[data-precedence]"),r=0;r<i.length;r++){var m=i[r];(m.nodeName==="LINK"||m.getAttribute("media")!=="not all")&&(a.set(m.dataset.precedence,m),n=m)}n&&a.set(null,n)}i=t.instance,m=i.getAttribute("data-precedence"),r=a.get(m)||n,r===n&&a.set(null,i),a.set(m,i),this.count++,n=$r.bind(this),i.addEventListener("load",n),i.addEventListener("error",n),r?r.parentNode.insertBefore(i,r.nextSibling):(e=e.nodeType===9?e.head:e,e.insertBefore(i,e.firstChild)),t.state.loading|=4}}var Ei={$$typeof:U,Provider:null,Consumer:null,_currentValue:J,_currentValue2:J,_threadCount:0};function By(e,t,a,n,i,r,m,b,E){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=zs(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=zs(0),this.hiddenUpdates=zs(null),this.identifierPrefix=n,this.onUncaughtError=i,this.onCaughtError=r,this.onRecoverableError=m,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=E,this.incompleteTransitions=new Map}function tm(e,t,a,n,i,r,m,b,E,G,ae,se){return e=new By(e,t,a,m,E,G,ae,se,b),t=1,r===!0&&(t|=24),r=na(3,null,null,t),e.current=r,r.stateNode=e,t=uc(),t.refCount++,e.pooledCache=t,t.refCount++,r.memoizedState={element:n,isDehydrated:a,cache:t},mc(r),e}function am(e){return e?(e=es,e):es}function nm(e,t,a,n,i,r){i=am(i),n.context===null?n.context=i:n.pendingContext=i,n=Hn(t),n.payload={element:a},r=r===void 0?null:r,r!==null&&(n.callback=r),a=qn(e,n,t),a!==null&&($t(a,e,t),ni(a,e,t))}function lm(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var a=e.retryLane;e.retryLane=a!==0&&a<t?a:t}}function Iu(e,t){lm(e,t),(e=e.alternate)&&lm(e,t)}function sm(e){if(e.tag===13||e.tag===31){var t=ml(e,67108864);t!==null&&$t(t,e,67108864),Iu(e,67108864)}}function im(e){if(e.tag===13||e.tag===31){var t=oa();t=Bs(t);var a=ml(e,t);a!==null&&$t(a,e,t),Iu(e,t)}}var Jr=!0;function Hy(e,t,a,n){var i=_.T;_.T=null;var r=W.p;try{W.p=2,Ru(e,t,a,n)}finally{W.p=r,_.T=i}}function qy(e,t,a,n){var i=_.T;_.T=null;var r=W.p;try{W.p=8,Ru(e,t,a,n)}finally{W.p=r,_.T=i}}function Ru(e,t,a,n){if(Jr){var i=Mu(n);if(i===null)bu(e,t,n,eo,a),om(e,n);else if(Vy(i,e,t,a,n))n.stopPropagation();else if(om(e,n),t&4&&-1<Gy.indexOf(e)){for(;i!==null;){var r=ul(i);if(r!==null)switch(r.tag){case 3:if(r=r.stateNode,r.current.memoizedState.isDehydrated){var m=an(r.pendingLanes);if(m!==0){var b=r;for(b.pendingLanes|=2,b.entangledLanes|=2;m;){var E=1<<31-wt(m);b.entanglements[1]|=E,m&=~E}$a(r),(We&6)===0&&(Ur=_e()+500,bi(0))}}break;case 31:case 13:b=ml(r,2),b!==null&&$t(b,r,2),Dr(),Iu(r,2)}if(r=Mu(n),r===null&&bu(e,t,n,eo,a),r===i)break;i=r}i!==null&&n.stopPropagation()}else bu(e,t,n,null,a)}}function Mu(e){return e=Uo(e),Lu(e)}var eo=null;function Lu(e){if(eo=null,e=cl(e),e!==null){var t=d(e);if(t===null)e=null;else{var a=t.tag;if(a===13){if(e=h(t),e!==null)return e;e=null}else if(a===31){if(e=x(t),e!==null)return e;e=null}else if(a===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null)}}return eo=e,null}function rm(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(pt()){case lt:return 2;case mt:return 8;case pa:case Us:return 32;case tn:return 268435456;default:return 32}default:return 32}}var Uu=!1,Pn=null,Jn=null,el=null,Ai=new Map,_i=new Map,tl=[],Gy="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function om(e,t){switch(e){case"focusin":case"focusout":Pn=null;break;case"dragenter":case"dragleave":Jn=null;break;case"mouseover":case"mouseout":el=null;break;case"pointerover":case"pointerout":Ai.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":_i.delete(t.pointerId)}}function Ti(e,t,a,n,i,r){return e===null||e.nativeEvent!==r?(e={blockedOn:t,domEventName:a,eventSystemFlags:n,nativeEvent:r,targetContainers:[i]},t!==null&&(t=ul(t),t!==null&&sm(t)),e):(e.eventSystemFlags|=n,t=e.targetContainers,i!==null&&t.indexOf(i)===-1&&t.push(i),e)}function Vy(e,t,a,n,i){switch(t){case"focusin":return Pn=Ti(Pn,e,t,a,n,i),!0;case"dragenter":return Jn=Ti(Jn,e,t,a,n,i),!0;case"mouseover":return el=Ti(el,e,t,a,n,i),!0;case"pointerover":var r=i.pointerId;return Ai.set(r,Ti(Ai.get(r)||null,e,t,a,n,i)),!0;case"gotpointercapture":return r=i.pointerId,_i.set(r,Ti(_i.get(r)||null,e,t,a,n,i)),!0}return!1}function cm(e){var t=cl(e.target);if(t!==null){var a=d(t);if(a!==null){if(t=a.tag,t===13){if(t=h(a),t!==null){e.blockedOn=t,Xi(e.priority,function(){im(a)});return}}else if(t===31){if(t=x(a),t!==null){e.blockedOn=t,Xi(e.priority,function(){im(a)});return}}else if(t===3&&a.stateNode.current.memoizedState.isDehydrated){e.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}e.blockedOn=null}function to(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var a=Mu(e.nativeEvent);if(a===null){a=e.nativeEvent;var n=new a.constructor(a.type,a);Lo=n,a.target.dispatchEvent(n),Lo=null}else return t=ul(a),t!==null&&sm(t),e.blockedOn=a,!1;t.shift()}return!0}function um(e,t,a){to(e)&&a.delete(t)}function Qy(){Uu=!1,Pn!==null&&to(Pn)&&(Pn=null),Jn!==null&&to(Jn)&&(Jn=null),el!==null&&to(el)&&(el=null),Ai.forEach(um),_i.forEach(um)}function ao(e,t){e.blockedOn===t&&(e.blockedOn=null,Uu||(Uu=!0,l.unstable_scheduleCallback(l.unstable_NormalPriority,Qy)))}var no=null;function dm(e){no!==e&&(no=e,l.unstable_scheduleCallback(l.unstable_NormalPriority,function(){no===e&&(no=null);for(var t=0;t<e.length;t+=3){var a=e[t],n=e[t+1],i=e[t+2];if(typeof n!="function"){if(Lu(n||a)===null)continue;break}var r=ul(a);r!==null&&(e.splice(t,3),t-=3,Mc(r,{pending:!0,data:i,method:a.method,action:n},n,i))}}))}function js(e){function t(E){return ao(E,e)}Pn!==null&&ao(Pn,e),Jn!==null&&ao(Jn,e),el!==null&&ao(el,e),Ai.forEach(t),_i.forEach(t);for(var a=0;a<tl.length;a++){var n=tl[a];n.blockedOn===e&&(n.blockedOn=null)}for(;0<tl.length&&(a=tl[0],a.blockedOn===null);)cm(a),a.blockedOn===null&&tl.shift();if(a=(e.ownerDocument||e).$$reactFormReplay,a!=null)for(n=0;n<a.length;n+=3){var i=a[n],r=a[n+1],m=i[Ut]||null;if(typeof r=="function")m||dm(a);else if(m){var b=null;if(r&&r.hasAttribute("formAction")){if(i=r,m=r[Ut]||null)b=m.formAction;else if(Lu(i)!==null)continue}else b=m.action;typeof b=="function"?a[n+1]=b:(a.splice(n,3),n-=3),dm(a)}}}function fm(){function e(r){r.canIntercept&&r.info==="react-transition"&&r.intercept({handler:function(){return new Promise(function(m){return i=m})},focusReset:"manual",scroll:"manual"})}function t(){i!==null&&(i(),i=null),n||setTimeout(a,20)}function a(){if(!n&&!navigation.transition){var r=navigation.currentEntry;r&&r.url!=null&&navigation.navigate(r.url,{state:r.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var n=!1,i=null;return navigation.addEventListener("navigate",e),navigation.addEventListener("navigatesuccess",t),navigation.addEventListener("navigateerror",t),setTimeout(a,100),function(){n=!0,navigation.removeEventListener("navigate",e),navigation.removeEventListener("navigatesuccess",t),navigation.removeEventListener("navigateerror",t),i!==null&&(i(),i=null)}}}function zu(e){this._internalRoot=e}lo.prototype.render=zu.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(c(409));var a=t.current,n=oa();nm(a,n,e,t,null,null)},lo.prototype.unmount=zu.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;nm(e.current,2,null,e,null,null),Dr(),t[kn]=null}};function lo(e){this._internalRoot=e}lo.prototype.unstable_scheduleHydration=function(e){if(e){var t=Yi();e={blockedOn:null,target:e,priority:t};for(var a=0;a<tl.length&&t!==0&&t<tl[a].priority;a++);tl.splice(a,0,e),a===0&&cm(e)}};var pm=o.version;if(pm!=="19.2.4")throw Error(c(527,pm,"19.2.4"));W.findDOMNode=function(e){var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(c(188)):(e=Object.keys(e).join(","),Error(c(268,e)));return e=g(t),e=e!==null?y(e):null,e=e===null?null:e.stateNode,e};var Zy={bundleType:0,version:"19.2.4",rendererPackageName:"react-dom",currentDispatcherRef:_,reconcilerVersion:"19.2.4"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var so=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!so.isDisabled&&so.supportsFiber)try{_a=so.inject(Zy),yt=so}catch{}}return ki.createRoot=function(e,t){if(!f(e))throw Error(c(299));var a=!1,n="",i=v0,r=S0,m=w0;return t!=null&&(t.unstable_strictMode===!0&&(a=!0),t.identifierPrefix!==void 0&&(n=t.identifierPrefix),t.onUncaughtError!==void 0&&(i=t.onUncaughtError),t.onCaughtError!==void 0&&(r=t.onCaughtError),t.onRecoverableError!==void 0&&(m=t.onRecoverableError)),t=tm(e,1,!1,null,null,a,n,null,i,r,m,fm),e[kn]=t.current,yu(e),new zu(t)},ki.hydrateRoot=function(e,t,a){if(!f(e))throw Error(c(299));var n=!1,i="",r=v0,m=S0,b=w0,E=null;return a!=null&&(a.unstable_strictMode===!0&&(n=!0),a.identifierPrefix!==void 0&&(i=a.identifierPrefix),a.onUncaughtError!==void 0&&(r=a.onUncaughtError),a.onCaughtError!==void 0&&(m=a.onCaughtError),a.onRecoverableError!==void 0&&(b=a.onRecoverableError),a.formState!==void 0&&(E=a.formState)),t=tm(e,1,!0,t,a??null,n,i,E,r,m,b,fm),t.context=am(null),a=t.current,n=oa(),n=Bs(n),i=Hn(n),i.callback=null,qn(a,i,n),a=n,t.current.lanes=a,ol(t,a),$a(t),e[kn]=t.current,yu(e),new lo(t)},ki.version="19.2.4",ki}var Nm;function tb(){if(Nm)return Hu.exports;Nm=1;function l(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(l)}catch(o){console.error(o)}}return l(),Hu.exports=eb(),Hu.exports}var ab=tb();const nb=Xm(ab);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lb=l=>l.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),Km=(...l)=>l.filter((o,u,c)=>!!o&&o.trim()!==""&&c.indexOf(o)===u).join(" ").trim();/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var sb={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ib=w.forwardRef(({color:l="currentColor",size:o=24,strokeWidth:u=2,absoluteStrokeWidth:c,className:f="",children:d,iconNode:h,...x},p)=>w.createElement("svg",{ref:p,...sb,width:o,height:o,stroke:l,strokeWidth:c?Number(u)*24/Number(o):u,className:Km("lucide",f),...x},[...h.map(([g,y])=>w.createElement(g,y)),...Array.isArray(d)?d:[d]]));/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pe=(l,o)=>{const u=w.forwardRef(({className:c,...f},d)=>w.createElement(ib,{ref:d,iconNode:o,className:Km(`lucide-${lb(l)}`,c),...f}));return u.displayName=`${l}`,u};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rb=pe("Archive",[["rect",{width:"20",height:"5",x:"2",y:"3",rx:"1",key:"1wp1u1"}],["path",{d:"M4 8v11a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8",key:"1s80jp"}],["path",{d:"M10 12h4",key:"a56b0p"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wm=pe("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ii=pe("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rd=pe("AtSign",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M16 8v5a3 3 0 0 0 6 0v-1a10 10 0 1 0-4 8",key:"7n84p3"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ob=pe("AudioLines",[["path",{d:"M2 10v3",key:"1fnikh"}],["path",{d:"M6 6v11",key:"11sgs0"}],["path",{d:"M10 3v18",key:"yhl04a"}],["path",{d:"M14 8v7",key:"3a1oy3"}],["path",{d:"M18 5v13",key:"123xd1"}],["path",{d:"M22 10v3",key:"154ddg"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jm=pe("Binary",[["rect",{x:"14",y:"14",width:"4",height:"6",rx:"2",key:"p02svl"}],["rect",{x:"6",y:"4",width:"4",height:"6",rx:"2",key:"xm4xkj"}],["path",{d:"M6 20h4",key:"1i6q5t"}],["path",{d:"M14 10h4",key:"ru81e7"}],["path",{d:"M6 14h2v6",key:"16z9wg"}],["path",{d:"M14 4h2v6",key:"1idq9u"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cb=pe("Bolt",[["path",{d:"M21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16z",key:"yt0hxn"}],["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ub=pe("BookCopy",[["path",{d:"M2 16V4a2 2 0 0 1 2-2h11",key:"spzkk5"}],["path",{d:"M22 18H11a2 2 0 1 0 0 4h10.5a.5.5 0 0 0 .5-.5v-15a.5.5 0 0 0-.5-.5H11a2 2 0 0 0-2 2v12",key:"1wz07i"}],["path",{d:"M5 14H4a2 2 0 1 0 0 4h1",key:"16gqf9"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yo=pe("BookOpen",[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mo=pe("BookText",[["path",{d:"M4 19.5v-15A2.5 2.5 0 0 1 6.5 2H19a1 1 0 0 1 1 1v18a1 1 0 0 1-1 1H6.5a1 1 0 0 1 0-5H20",key:"k3hazp"}],["path",{d:"M8 11h8",key:"vwpz6n"}],["path",{d:"M8 7h6",key:"1f0q6e"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const db=pe("Book",[["path",{d:"M4 19.5v-15A2.5 2.5 0 0 1 6.5 2H19a1 1 0 0 1 1 1v18a1 1 0 0 1-1 1H6.5a1 1 0 0 1 0-5H20",key:"k3hazp"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fb=pe("Bot",[["path",{d:"M12 8V4H8",key:"hb8ula"}],["rect",{width:"16",height:"12",x:"4",y:"8",rx:"2",key:"enze0r"}],["path",{d:"M2 14h2",key:"vft8re"}],["path",{d:"M20 14h2",key:"4cs60a"}],["path",{d:"M15 13v2",key:"1xurst"}],["path",{d:"M9 13v2",key:"rq6x2g"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $m=pe("BrainCircuit",[["path",{d:"M12 5a3 3 0 1 0-5.997.125 4 4 0 0 0-2.526 5.77 4 4 0 0 0 .556 6.588A4 4 0 1 0 12 18Z",key:"l5xja"}],["path",{d:"M9 13a4.5 4.5 0 0 0 3-4",key:"10igwf"}],["path",{d:"M6.003 5.125A3 3 0 0 0 6.401 6.5",key:"105sqy"}],["path",{d:"M3.477 10.896a4 4 0 0 1 .585-.396",key:"ql3yin"}],["path",{d:"M6 18a4 4 0 0 1-1.967-.516",key:"2e4loj"}],["path",{d:"M12 13h4",key:"1ku699"}],["path",{d:"M12 18h6a2 2 0 0 1 2 2v1",key:"105ag5"}],["path",{d:"M12 8h8",key:"1lhi5i"}],["path",{d:"M16 8V5a2 2 0 0 1 2-2",key:"u6izg6"}],["circle",{cx:"16",cy:"13",r:".5",key:"ry7gng"}],["circle",{cx:"18",cy:"3",r:".5",key:"1aiba7"}],["circle",{cx:"20",cy:"21",r:".5",key:"yhc1fs"}],["circle",{cx:"20",cy:"8",r:".5",key:"1e43v0"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pb=pe("Briefcase",[["path",{d:"M16 20V4a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"jecpp"}],["rect",{width:"20",height:"14",x:"2",y:"6",rx:"2",key:"i6l2r4"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Os=pe("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fm=pe("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mb=pe("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wn=pe("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hb=pe("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fa=pe("CircleCheck",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gb=pe("CircleHelp",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xb=pe("CircleMinus",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yb=pe("CircleX",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fu=pe("ClipboardList",[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"M12 11h4",key:"1jrz19"}],["path",{d:"M12 16h4",key:"n85exb"}],["path",{d:"M8 11h.01",key:"1dfujw"}],["path",{d:"M8 16h.01",key:"18s6g9"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pm=pe("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Em=pe("CloudDownload",[["path",{d:"M12 13v8l-4-4",key:"1f5nwf"}],["path",{d:"m12 21 4-4",key:"1lfcce"}],["path",{d:"M4.393 15.269A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 2.436 8.284",key:"ui1hmy"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Am=pe("CloudUpload",[["path",{d:"M12 13v8",key:"1l5pq0"}],["path",{d:"M4 14.899A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 2.5 8.242",key:"1pljnt"}],["path",{d:"m8 17 4-4 4 4",key:"1quai1"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bb=pe("Cloud",[["path",{d:"M17.5 19H9a7 7 0 1 1 6.71-9h1.79a4.5 4.5 0 1 1 0 9Z",key:"p7xjir"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bo=pe("Combine",[["path",{d:"M10 18H5a3 3 0 0 1-3-3v-1",key:"ru65g8"}],["path",{d:"M14 2a2 2 0 0 1 2 2v4a2 2 0 0 1-2 2",key:"e30een"}],["path",{d:"M20 2a2 2 0 0 1 2 2v4a2 2 0 0 1-2 2",key:"2ahx8o"}],["path",{d:"m7 21 3-3-3-3",key:"127cv2"}],["rect",{x:"14",y:"14",width:"8",height:"8",rx:"2",key:"1b0bso"}],["rect",{x:"2",y:"2",width:"8",height:"8",rx:"2",key:"1x09vl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vb=pe("Command",[["path",{d:"M15 6v12a3 3 0 1 0 3-3H6a3 3 0 1 0 3 3V6a3 3 0 1 0-3 3h12a3 3 0 1 0-3-3",key:"11bfej"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sb=pe("CornerDownLeft",[["polyline",{points:"9 10 4 15 9 20",key:"r3jprv"}],["path",{d:"M20 4v7a4 4 0 0 1-4 4H4",key:"6o5b7l"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wb=pe("Database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nb=pe("Eraser",[["path",{d:"m7 21-4.3-4.3c-1-1-1-2.5 0-3.4l9.6-9.6c1-1 2.5-1 3.4 0l5.6 5.6c1 1 1 2.5 0 3.4L13 21",key:"182aya"}],["path",{d:"M22 21H7",key:"t4ddhn"}],["path",{d:"m5 11 9 9",key:"1mo9qw"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jm=pe("ExternalLink",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pu=pe("EyeOff",[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ui=pe("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jb=pe("FileJson",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 12a1 1 0 0 0-1 1v1a1 1 0 0 1-1 1 1 1 0 0 1 1 1v1a1 1 0 0 0 1 1",key:"1oajmo"}],["path",{d:"M14 18a1 1 0 0 0 1-1v-1a1 1 0 0 1 1-1 1 1 0 0 1-1-1v-1a1 1 0 0 0-1-1",key:"mpwhp6"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Eb=pe("Flag",[["path",{d:"M4 15s1-1 4-1 5 2 8 2 4-1 4-1V3s-1 1-4 1-5-2-8-2-4 1-4 1z",key:"i9b6wo"}],["line",{x1:"4",x2:"4",y1:"22",y2:"15",key:"1cm3nv"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eh=pe("Ghost",[["path",{d:"M9 10h.01",key:"qbtxuw"}],["path",{d:"M15 10h.01",key:"1qmjsl"}],["path",{d:"M12 2a8 8 0 0 0-8 8v12l3-3 2.5 2.5L12 19l2.5 2.5L17 19l3 3V10a8 8 0 0 0-8-8z",key:"uwwb07"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const th=pe("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ah=pe("GraduationCap",[["path",{d:"M21.42 10.922a1 1 0 0 0-.019-1.838L12.83 5.18a2 2 0 0 0-1.66 0L2.6 9.08a1 1 0 0 0 0 1.832l8.57 3.908a2 2 0 0 0 1.66 0z",key:"j76jl0"}],["path",{d:"M22 10v6",key:"1lu8f3"}],["path",{d:"M6 12.5V16a6 3 0 0 0 12 0v-3.5",key:"1r8lef"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ab=pe("Grid2x2",[["path",{d:"M12 3v18",key:"108xh3"}],["path",{d:"M3 12h18",key:"1i2n21"}],["rect",{x:"3",y:"3",width:"18",height:"18",rx:"2",key:"h1oib"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nh=pe("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _b=pe("Key",[["path",{d:"m15.5 7.5 2.3 2.3a1 1 0 0 0 1.4 0l2.1-2.1a1 1 0 0 0 0-1.4L19 4",key:"g0fldk"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tb=pe("Languages",[["path",{d:"m5 8 6 6",key:"1wu5hv"}],["path",{d:"m4 14 6-6 2-3",key:"1k1g8d"}],["path",{d:"M2 5h12",key:"or177f"}],["path",{d:"M7 2h1",key:"1t2jsx"}],["path",{d:"m22 22-5-10-5 10",key:"don7ne"}],["path",{d:"M14 18h6",key:"1m8k6r"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lh=pe("Layers",[["path",{d:"m12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83Z",key:"8b97xw"}],["path",{d:"m22 17.65-9.17 4.16a2 2 0 0 1-1.66 0L2 17.65",key:"dd6zsq"}],["path",{d:"m22 12.65-9.17 4.16a2 2 0 0 1-1.66 0L2 12.65",key:"ep9fru"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const od=pe("Lightbulb",[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sh=pe("Link",[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cb=pe("ListPlus",[["path",{d:"M11 12H3",key:"51ecnj"}],["path",{d:"M16 6H3",key:"1wxfjs"}],["path",{d:"M16 18H3",key:"12xzn7"}],["path",{d:"M18 9v6",key:"1twb98"}],["path",{d:"M21 12h-6",key:"bt1uis"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ct=pe("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kb=pe("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cd=pe("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zi=pe("Mic",[["path",{d:"M12 2a3 3 0 0 0-3 3v7a3 3 0 0 0 6 0V5a3 3 0 0 0-3-3Z",key:"131961"}],["path",{d:"M19 10v2a7 7 0 0 1-14 0v-2",key:"1vc78b"}],["line",{x1:"12",x2:"12",y1:"19",y2:"22",key:"x3vr5v"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ih=pe("Network",[["rect",{x:"16",y:"16",width:"6",height:"6",rx:"1",key:"4q2zg0"}],["rect",{x:"2",y:"16",width:"6",height:"6",rx:"1",key:"8cvhb9"}],["rect",{x:"9",y:"2",width:"6",height:"6",rx:"1",key:"1egb70"}],["path",{d:"M5 16v-3a1 1 0 0 1 1-1h12a1 1 0 0 1 1 1v3",key:"1jsf9p"}],["path",{d:"M12 12V8",key:"2874zd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ob=pe("PenLine",[["path",{d:"M12 20h9",key:"t2du7b"}],["path",{d:"M16.376 3.622a1 1 0 0 1 3.002 3.002L7.368 18.635a2 2 0 0 1-.855.506l-2.872.838a.5.5 0 0 1-.62-.62l.838-2.872a2 2 0 0 1 .506-.854z",key:"1ykcvy"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rh=pe("Play",[["polygon",{points:"6 3 20 12 6 21 6 3",key:"1oa8hb"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ja=pe("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vo=pe("Quote",[["path",{d:"M16 3a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2 1 1 0 0 1 1 1v1a2 2 0 0 1-2 2 1 1 0 0 0-1 1v2a1 1 0 0 0 1 1 6 6 0 0 0 6-6V5a2 2 0 0 0-2-2z",key:"rib7q0"}],["path",{d:"M5 3a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2 1 1 0 0 1 1 1v1a2 2 0 0 1-2 2 1 1 0 0 0-1 1v2a1 1 0 0 0 1 1 6 6 0 0 0 6-6V5a2 2 0 0 0-2-2z",key:"1ymkrd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ib=pe("Radio",[["path",{d:"M4.9 19.1C1 15.2 1 8.8 4.9 4.9",key:"1vaf9d"}],["path",{d:"M7.8 16.2c-2.3-2.3-2.3-6.1 0-8.5",key:"u1ii0m"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}],["path",{d:"M16.2 7.8c2.3 2.3 2.3 6.1 0 8.5",key:"1j5fej"}],["path",{d:"M19.1 4.9C23 8.8 23 15.1 19.1 19",key:"10b0cb"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ho=pe("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rb=pe("RotateCw",[["path",{d:"M21 12a9 9 0 1 1-9-9c2.52 0 4.93 1 6.74 2.74L21 8",key:"1p45f6"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mb=pe("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lb=pe("ScanSearch",[["path",{d:"M3 7V5a2 2 0 0 1 2-2h2",key:"aa7l1z"}],["path",{d:"M17 3h2a2 2 0 0 1 2 2v2",key:"4qcy5o"}],["path",{d:"M21 17v2a2 2 0 0 1-2 2h-2",key:"6vwrx8"}],["path",{d:"M7 21H5a2 2 0 0 1-2-2v-2",key:"ioqczr"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}],["path",{d:"m16 16-1.9-1.9",key:"1dq9hf"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ub=pe("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zb=pe("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Db=pe("ShieldAlert",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"M12 8v4",key:"1got3b"}],["path",{d:"M12 16h.01",key:"1drbdi"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oh=pe("ShieldCheck",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ch=pe("ShieldX",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m14.5 9.5-5 5",key:"17q4r4"}],["path",{d:"m9.5 9.5 5 5",key:"18nt4w"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bb=pe("Shuffle",[["path",{d:"m18 14 4 4-4 4",key:"10pe0f"}],["path",{d:"m18 2 4 4-4 4",key:"pucp1d"}],["path",{d:"M2 18h1.973a4 4 0 0 0 3.3-1.7l5.454-8.6a4 4 0 0 1 3.3-1.7H22",key:"1ailkh"}],["path",{d:"M2 6h1.972a4 4 0 0 1 3.6 2.2",key:"km57vx"}],["path",{d:"M22 18h-6.041a4 4 0 0 1-3.3-1.8l-.359-.45",key:"os18l9"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Is=pe("Sparkles",[["path",{d:"M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z",key:"4pj2yx"}],["path",{d:"M20 3v4",key:"1olli1"}],["path",{d:"M22 5h-4",key:"1gvqau"}],["path",{d:"M4 17v2",key:"vumght"}],["path",{d:"M5 18H3",key:"zchphs"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const So=pe("Square",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hb=pe("StickyNote",[["path",{d:"M16 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V8Z",key:"qazsjp"}],["path",{d:"M15 3v4a2 2 0 0 0 2 2h4",key:"40519r"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qb=pe("Swords",[["polyline",{points:"14.5 17.5 3 6 3 3 6 3 17.5 14.5",key:"1hfsw2"}],["line",{x1:"13",x2:"19",y1:"19",y2:"13",key:"1vrmhu"}],["line",{x1:"16",x2:"20",y1:"16",y2:"20",key:"1bron3"}],["line",{x1:"19",x2:"21",y1:"21",y2:"19",key:"13pww6"}],["polyline",{points:"14.5 6.5 18 3 21 3 21 6 17.5 9.5",key:"hbey2j"}],["line",{x1:"5",x2:"9",y1:"14",y2:"18",key:"1hf58s"}],["line",{x1:"7",x2:"4",y1:"17",y2:"20",key:"pidxm4"}],["line",{x1:"3",x2:"5",y1:"19",y2:"21",key:"1pehsh"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gb=pe("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vb=pe("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wo=pe("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qb=pe("Type",[["polyline",{points:"4 7 4 4 20 4 20 7",key:"1nosan"}],["line",{x1:"9",x2:"15",y1:"20",y2:"20",key:"swin9y"}],["line",{x1:"12",x2:"12",y1:"4",y2:"20",key:"1tx1rr"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zb=pe("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yb=pe("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xb=pe("UsersRound",[["path",{d:"M18 21a8 8 0 0 0-16 0",key:"3ypg7q"}],["circle",{cx:"10",cy:"8",r:"5",key:"o932ke"}],["path",{d:"M22 20c0-3.37-2-6.5-4-8a5 5 0 0 0-.45-8.3",key:"10s06x"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uh=pe("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ra=pe("Volume2",[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["path",{d:"M16 9a5 5 0 0 1 0 6",key:"1q6k2b"}],["path",{d:"M19.364 18.364a9 9 0 0 0 0-12.728",key:"ijwkga"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dh=pe("WandSparkles",[["path",{d:"m21.64 3.64-1.28-1.28a1.21 1.21 0 0 0-1.72 0L2.36 18.64a1.21 1.21 0 0 0 0 1.72l1.28 1.28a1.2 1.2 0 0 0 1.72 0L21.64 5.36a1.2 1.2 0 0 0 0-1.72",key:"ul74o6"}],["path",{d:"m14 7 3 3",key:"1r5n42"}],["path",{d:"M5 6v4",key:"ilb8ba"}],["path",{d:"M19 14v4",key:"blhpug"}],["path",{d:"M10 2v2",key:"7u0qdc"}],["path",{d:"M7 8H3",key:"zfb6yr"}],["path",{d:"M21 16h-4",key:"1cnmox"}],["path",{d:"M11 3H9",key:"1obp7u"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _m=pe("Waves",[["path",{d:"M2 6c.6.5 1.2 1 2.5 1C7 7 7 5 9.5 5c2.6 0 2.4 2 5 2 2.5 0 2.5-2 5-2 1.3 0 1.9.5 2.5 1",key:"knzxuh"}],["path",{d:"M2 12c.6.5 1.2 1 2.5 1 2.5 0 2.5-2 5-2 2.6 0 2.4 2 5 2 2.5 0 2.5-2 5-2 1.3 0 1.9.5 2.5 1",key:"2jd2cc"}],["path",{d:"M2 18c.6.5 1.2 1 2.5 1 2.5 0 2.5-2 5-2 2.6 0 2.4 2 5 2 2.5 0 2.5-2 5-2 1.3 0 1.9.5 2.5 1",key:"rd2r6e"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kb=pe("Wifi",[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M2 8.82a15 15 0 0 1 20 0",key:"dnpr2z"}],["path",{d:"M5 12.859a10 10 0 0 1 14 0",key:"1x1e6c"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kt=pe("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const No=pe("Zap",[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]]);var Fe=(l=>(l.FORGOT="FORGOT",l.HARD="HARD",l.EASY="EASY",l.LEARNED="LEARNED",l))(Fe||{}),tt=(l=>(l.RAW="RAW",l.REFINED="REFINED",l.VERIFIED="VERIFIED",l.FAILED="FAILED",l))(tt||{}),Ju=(l=>(l.VARIETY="VARIETY",l.MORE_ACADEMIC="MORE_ACADEMIC",l.LESS_ACADEMIC="LESS_ACADEMIC",l))(Ju||{});const Ri="u-vocab-master",Wb="/data/data.json",$b=[],Ts=[{id:"topic_family",title:"Family & Roots",description:"Relationships, upbringing, and the foundations of society.",backgroundTheme:"from-orange-100 to-rose-50",icon:"",segments:[{id:"seg_fam_1",title:"Family Ties",description:"The core units of human connection.",tagCriteria:"family",basicWords:["mother","father","brother","sister","child"],intermediateWords:["upbringing","nuclear family","sibling","guardian","relative"],advancedWords:["genealogy","consanguinity","authoritarian","matriarch","progeny"],visualIcon:"",boss:{name:"Family Elder",hp:20,dialogueIntro:"Do you truly know those you share your blood with?",dialogueWin:"The bonds of kinship are well understood.",dialogueLose:"You ignore your foundations.",image:"",dropBadgeId:"family_crest"}},{id:"seg_fam_2",title:"Modern Society",description:"How we live together in the 21st century.",tagCriteria:"society",basicWords:["people","city","house","friend","neighbor"],intermediateWords:["community","urbanization","demographics","infrastructure","diversity"],advancedWords:["egalitarian","stratification","cosmopolitan","secular","socioeconomic"],visualIcon:"",boss:{name:"The Architect",hp:20,dialogueIntro:"A city is more than stone and mortar. It is a collective mind.",dialogueWin:"You see the patterns in the crowd.",dialogueLose:"Lost in the concrete jungle.",image:"",dropBadgeId:"family_crest"}}]},{id:"topic_education",title:"The Academy",description:"Learning systems, pedagogy, and academic pursuits.",backgroundTheme:"from-yellow-100 to-amber-50",icon:"",segments:[{id:"seg_edu_1",title:"Primary School",description:"The beginning of the educational journey.",tagCriteria:"school",basicWords:["study","learn","teacher","book","class"],intermediateWords:["curriculum","assignment","literacy","discipline","tuition"],advancedWords:["pedagogy","didactic","erudition","rote learning","epistemology"],visualIcon:"",boss:{name:"The Headmaster",hp:20,dialogueIntro:"Class is in session. Don't be late.",dialogueWin:"A star student indeed.",dialogueLose:"Detention for you.",image:"",dropBadgeId:"education_scroll"}},{id:"seg_edu_2",title:"Higher Education",description:"University life and specialized research.",tagCriteria:"university",basicWords:["college","exam","paper","degree","lesson"],intermediateWords:["undergraduate","scholarship","dissertation","vocational","faculty"],advancedWords:["theoretical","specialization","prestigious","alumnus","doctoral"],visualIcon:"",boss:{name:"The Dean",hp:20,dialogueIntro:"Submit your thesis or fail the semester.",dialogueWin:"Your research is groundbreaking.",dialogueLose:"Insufficient evidence for your claims.",image:"",dropBadgeId:"education_scroll"}}]}],Fb="IELTSVocabProDB_V2",at="vocabulary",Ma="users",ca="units",kl="paraphrase_logs",Ol="speaking_logs",Il="speaking_topics",jn="writing_logs",ua="writing_topics",da="irregular_verbs",La="lessons",Ua="listening_items",za="native_speak_items",Da="conversation_items",Ba="free_talk_items",Ha="compositions",qa="word_books",Ga="reading_books",En="lesson_books",An="listening_books",_n="speaking_books",Tn="writing_books",Va="planning_goals",Pb=26;let ja=null,Sn=null;const fh=async()=>{if(navigator.storage&&navigator.storage.persist)try{await navigator.storage.persisted()||await navigator.storage.persist()}catch{}},Ll=()=>ja?Promise.resolve(ja):Sn||(Sn=new Promise((l,o)=>{try{const u=indexedDB.open(Fb,Pb);u.onblocked=()=>{console.warn("[DB] Database upgrade blocked. Please close other tabs/windows of this app.")},u.onupgradeneeded=c=>{const f=c.target.result;if(!f){console.error("Database not available during onupgradeneeded");return}if(!f.objectStoreNames.contains(at)){const d=f.createObjectStore(at,{keyPath:"id"});d.createIndex("userId","userId",{unique:!1}),d.createIndex("nextReview","nextReview",{unique:!1}),d.createIndex("userId_word",["userId","word"],{unique:!1})}if(f.objectStoreNames.contains(Ma)||f.createObjectStore(Ma,{keyPath:"id"}),f.objectStoreNames.contains(ca)||f.createObjectStore(ca,{keyPath:"id"}).createIndex("userId","userId",{unique:!1}),!f.objectStoreNames.contains(kl)){const d=f.createObjectStore(kl,{keyPath:"id"});d.createIndex("userId","userId",{unique:!1}),d.createIndex("timestamp","timestamp",{unique:!1})}if(!f.objectStoreNames.contains(Ol)){const d=f.createObjectStore(Ol,{keyPath:"id"});d.createIndex("userId","userId",{unique:!1}),d.createIndex("timestamp","timestamp",{unique:!1})}if(c.oldVersion<9&&(f.objectStoreNames.contains(Il)||f.createObjectStore(Il,{keyPath:"id"}).createIndex("userId","userId",{unique:!1})),c.oldVersion<10&&(f.objectStoreNames.contains(ua)||f.createObjectStore(ua,{keyPath:"id"}).createIndex("userId","userId",{unique:!1}),!f.objectStoreNames.contains(jn))){const d=f.createObjectStore(jn,{keyPath:"id"});d.createIndex("userId","userId",{unique:!1}),d.createIndex("timestamp","timestamp",{unique:!1})}c.oldVersion<12&&f.objectStoreNames.contains("word_comparison_groups")&&f.deleteObjectStore("word_comparison_groups"),c.oldVersion<13&&(f.objectStoreNames.contains(da)||f.createObjectStore(da,{keyPath:"id"}).createIndex("userId","userId",{unique:!1})),c.oldVersion<14&&(f.objectStoreNames.contains(La)||f.createObjectStore(La,{keyPath:"id"}).createIndex("userId","userId",{unique:!1})),c.oldVersion<15&&(f.objectStoreNames.contains(Ua)||f.createObjectStore(Ua,{keyPath:"id"}).createIndex("userId","userId",{unique:!1})),c.oldVersion<16&&(f.objectStoreNames.contains(za)||f.createObjectStore(za,{keyPath:"id"}).createIndex("userId","userId",{unique:!1})),c.oldVersion<17&&(f.objectStoreNames.contains(Ha)||f.createObjectStore(Ha,{keyPath:"id"}).createIndex("userId","userId",{unique:!1})),f.objectStoreNames.contains("calendar_events")&&f.deleteObjectStore("calendar_events"),c.oldVersion<19&&(f.objectStoreNames.contains(qa)||f.createObjectStore(qa,{keyPath:"id"}).createIndex("userId","userId",{unique:!1})),c.oldVersion<20&&(f.objectStoreNames.contains(Ga)||f.createObjectStore(Ga,{keyPath:"id"}).createIndex("userId","userId",{unique:!1})),c.oldVersion<21&&(f.objectStoreNames.contains(En)||f.createObjectStore(En,{keyPath:"id"}).createIndex("userId","userId",{unique:!1})),c.oldVersion<22&&(f.objectStoreNames.contains(An)||f.createObjectStore(An,{keyPath:"id"}).createIndex("userId","userId",{unique:!1}),f.objectStoreNames.contains(_n)||f.createObjectStore(_n,{keyPath:"id"}).createIndex("userId","userId",{unique:!1}),f.objectStoreNames.contains(Tn)||f.createObjectStore(Tn,{keyPath:"id"}).createIndex("userId","userId",{unique:!1})),c.oldVersion<23&&(f.objectStoreNames.contains(Va)||f.createObjectStore(Va,{keyPath:"id"}).createIndex("userId","userId",{unique:!1})),c.oldVersion<24&&(f.objectStoreNames.contains(Da)||f.createObjectStore(Da,{keyPath:"id"}).createIndex("userId","userId",{unique:!1})),c.oldVersion<26&&(f.objectStoreNames.contains(Ba)||f.createObjectStore(Ba,{keyPath:"id"}).createIndex("userId","userId",{unique:!1})),f.objectStoreNames.contains("comparison_groups")&&f.deleteObjectStore("comparison_groups")},u.onsuccess=()=>{ja=u.result,ja.onclose=()=>{console.warn("[DB] Database connection closed unexpectedly."),ja=null,Sn=null,window.dispatchEvent(new CustomEvent("db-connection-lost"))},ja.onversionchange=()=>{console.warn("[DB] Database version change detected. Closing connection."),ja==null||ja.close(),ja=null,Sn=null,window.location.reload()},l(ja)},u.onerror=c=>{console.error("[DB] Open DB Error:",c.target.error),Sn=null,o(c.target.error)}}catch(u){console.error("[DB] Open DB Exception:",u),Sn=null,o(u)}}),Sn),ph=async()=>Ls(async()=>{const l=await Ll();return new Promise((o,u)=>{const c=[Ma,at,ca,kl,Ol,Il,jn,ua,da,La,Ua,za,Da,Ba,Ha,qa,Ga,En,An,_n,Tn,Va],f=l.transaction(c,"readwrite");c.forEach(d=>{l.objectStoreNames.contains(d)&&f.objectStore(d).clear()}),f.oncomplete=()=>{localStorage.removeItem("vocab_pro_mimic_practice_queue"),localStorage.removeItem("vocab_pro_db_marker"),localStorage.removeItem("vocab_pro_emergency_backup"),o()},f.onerror=()=>u(f.error)})}),Ls=async(l,o=3,u=200)=>{var c,f,d;for(let h=0;h<o;h++)try{return await l()}catch(x){if(console.warn(`[DB] Operation failed, retrying (${h+1}/${o}). Error:`,x),((x==null?void 0:x.name)==="InvalidStateError"||(c=x==null?void 0:x.message)!=null&&c.toLowerCase().includes("closed")||((d=(f=x==null?void 0:x.target)==null?void 0:f.error)==null?void 0:d.name)==="InvalidStateError")&&(ja=null,Sn=null),h===o-1)throw x;await new Promise(p=>setTimeout(p,u*Math.pow(2,h)))}throw new Error("Operation failed after retries")},xe=async(l,o,u="readwrite")=>Ls(async()=>{const c=await Ll();return new Promise((f,d)=>{try{const h=c.transaction(l,u),x=o(h);h.oncomplete=()=>f(x?x.result:void 0),h.onerror=()=>d(h.error),h.onabort=()=>d(new Error("Transaction aborted"))}catch(h){d(h)}})}),ud=async(l=!1)=>{try{const o=await Ll(),u=o.transaction(Ma,"readonly"),c=await new Promise((y,S)=>{const A=u.objectStore(Ma).getAll();A.onsuccess=()=>y(A.result||[]),A.onerror=()=>S(A.error)}),f=localStorage.getItem("vocab_pro_emergency_backup"),d=localStorage.getItem("vocab_pro_db_marker");if(c.length===0&&f)try{const y=JSON.parse(f);if(Array.isArray(y)&&y.length>0&&(await Rl(y),c.length===0)){const S={id:y[0].userId||Ri,name:"Recovered User",avatar:"https://api.dicebear.com/7.x/avataaars/svg?seed=Recovered",lastLogin:Date.now(),role:"Language Learner",experience:0,level:1,adventure:{currentNodeIndex:0,energy:5,energyShards:0,unlockedChapterIds:Ts.map(A=>A.id),completedSegmentIds:[],segmentStars:{},badges:[],keys:1,keyFragments:0,map:[]}};return await Aa(S),S}}catch(y){console.error("[DB]  Failed to restore from Emergency Backup:",y)}if(c.length===0&&d==="exists"&&!l)return console.error("[DB]  CRITICAL: LocalStorage marker found but IDB returned 0 users. Aborting auto-seed to prevent data loss."),null;const x=o.transaction(at,"readonly").objectStore(at).count(),p=await new Promise(y=>{x.onsuccess=()=>y(x.result>0),x.onerror=()=>{console.error("[DB] Failed to check for existing data. Assuming data exists to prevent overwrite."),y(!0)}});if(!l&&c.length>0&&(d!=="exists"&&localStorage.setItem("vocab_pro_db_marker","exists"),p||sessionStorage.getItem("ielts_pro_skip_seed")==="true"))return null;let g;if(c.length===0?(g={id:Ri,name:"Vocab Master",avatar:"https://api.dicebear.com/7.x/avataaars/svg?seed=Master",lastLogin:Date.now(),role:"Language Learner",currentLevel:"Intermediate",target:"Advanced Fluency",experience:0,level:1,peakLevel:1,adventure:{currentNodeIndex:0,energy:5,energyShards:0,unlockedChapterIds:Ts.map(y=>y.id),completedSegmentIds:[],segmentStars:{},badges:[],keys:1,keyFragments:0,map:[]}},await Aa(g),localStorage.setItem("vocab_pro_db_marker","exists")):(g=c[0],g.experience===void 0&&(g.experience=0),g.level===void 0&&(g.level=1),g.peakLevel===void 0&&(g.peakLevel=g.level),g.adventure||(g.adventure={currentNodeIndex:0,energy:5,energyShards:0,unlockedChapterIds:Ts.map(y=>y.id),completedSegmentIds:[],segmentStars:{},badges:[],keys:1,keyFragments:0,map:[]}),await Aa(g)),!p){let y=[];try{const A=await fetch(Wb);if(A.ok){const T=await A.json();y=Array.isArray(T)?T:T.vocabulary||[]}}catch(A){console.error("Failed to fetch local seed data:",A)}y.length===0&&(y=$b);const S=y.map(A=>({...A,userId:g.id,nextReview:A.nextReview||Date.now(),lastXpEarnedTime:A.lastXpEarnedTime||void 0,quality:A.quality||tt.VERIFIED,source:"app"}));await Rl(S)}return g}catch(o){return console.error("[DB] Seed check failed completely:",o),null}},Cs=async()=>xe(Ma,l=>l.objectStore(Ma).getAll(),"readonly"),Aa=async l=>(l&&l.id&&localStorage.setItem("vocab_pro_db_marker","exists"),xe(Ma,o=>o.objectStore(Ma).put(l))),mh=async(l,o)=>Ls(async()=>{const u=await Ll();return new Promise((c,f)=>{const h=u.transaction(at,"readonly").objectStore(at),x=o.trim(),p=y=>c(y),g=(y,S,A)=>{const N=y.transaction(at,"readonly").objectStore(at).index("userId").openCursor(IDBKeyRange.only(S)),R=A.toLowerCase();N.onsuccess=O=>{const H=O.target.result;H?H.value.word.toLowerCase().trim()===R?p(H.value):H.continue():p(null)},N.onerror=()=>p(null)};if(h.indexNames.contains("userId_word")){const S=h.index("userId_word").get([l,x]);S.onsuccess=()=>{S.result?p(S.result):g(u,l,x)},S.onerror=()=>g(u,l,x)}else g(u,l,x)})}),hh=async(l,o,u)=>Ls(async()=>{const c=await Ll();return new Promise(f=>{const x=c.transaction(at,"readonly").objectStore(at).index("userId").getAll(IDBKeyRange.only(l));x.onsuccess=()=>{const p=x.result,g=["To express an idea or feeling","A state of great comfort and luxury","Happening or developing gradually","To influence or change someone or something","A formal meeting for discussion","Necessary for a particular purpose","The ability to do something well","A careful and detailed study of something","To make something new or original"];let A=[...p.filter(T=>T.id!==u&&T.quality===tt.VERIFIED&&T.meaningVi&&T.meaningVi.trim().length>0&&T.meaningVi.length<150).map(T=>T.meaningVi)].sort(()=>Math.random()-.5).slice(0,o);if(A.length<o){const T=o-A.length,I=[...g].sort(()=>Math.random()-.5);for(let N=0;N<T;N++){const R=I[N%I.length];A.includes(R)||A.push(R)}}f([...A].sort(()=>Math.random()-.5))},x.onerror=()=>{f([])}})}),gh=(l,o,u,c,f,d,h="all",x=null,p="all",g=null,y="all",S=null)=>{var I;const A=o.toLowerCase().trim();if(A&&!(l.word.toLowerCase().includes(A)||l.meaningVi.toLowerCase().includes(A))||l.isPassive&&!u.includes("archive")||c!=="all"&&(c==="refined"&&l.quality!==tt.REFINED||c==="verified"&&l.quality!==tt.VERIFIED||c==="failed"&&l.quality!==tt.FAILED||c==="raw"&&l.quality!==tt.RAW||c==="not_refined"&&l.quality!==tt.RAW))return!1;if(f!=="all"){const N=!l.lastReview,R=!!l.lastReview&&l.consecutiveCorrect===1&&l.lastGrade!==Fe.FORGOT,O=!!l.lastReview&&l.consecutiveCorrect>1&&l.lastGrade===Fe.EASY,H=!!l.lastReview&&l.consecutiveCorrect>1&&l.lastGrade===Fe.HARD,U=!!l.lastReview&&l.lastGrade===Fe.FORGOT;if(f==="new"&&!N||f==="learned"&&!R||f==="easy"&&!O||f==="hard"&&!H||f==="forgot"&&!U)return!1}if(d!=="all"&&(l.register||"raw")!==d||h!=="all"&&(l.source||"raw")!==h)return!1;if(x){if(x==="Uncategorized"){if(l.groups&&l.groups.length>0)return!1}else if(!((I=l.groups)!=null&&I.some(N=>N.startsWith(x))))return!1}if(p!=="all"&&g){const N=g.has(l.id);if(p==="composed"&&!N||p==="not_composed"&&N)return!1}if(y!=="all"&&S){const N=S.has(l.word.toLowerCase());if(y==="in_book"&&!N||y==="not_in_book"&&N)return!1}if(u.includes("all")||u.length===0)return!l.isPassive;for(const N of u)if(N==="archive"&&l.isPassive||N==="idiom"&&l.isIdiom||N==="phrasal"&&l.isPhrasalVerb||N==="colloc"&&l.isCollocation||N==="phrase"&&l.isStandardPhrase||N==="vocab"&&!l.isIdiom&&!l.isPhrasalVerb&&!l.isCollocation&&!l.isStandardPhrase)return!0;return!1},xh=async(l,o=30)=>Ls(async()=>{const u=await Ll(),c=Date.now();return new Promise((f,d)=>{const p=u.transaction(at,"readonly").objectStore(at).index("userId").getAll(IDBKeyRange.only(l));p.onsuccess=()=>{const y=(p.result||[]).filter(S=>!S.isPassive&&S.lastReview&&S.nextReview<=c&&S.quality!==tt.FAILED).sort((S,A)=>S.nextReview-A.nextReview).slice(0,o);f(y)},p.onerror=()=>d(p.error)})}),ed=async(l,o=20)=>Ls(async()=>{const u=await Ll();return new Promise((c,f)=>{const x=u.transaction(at,"readonly").objectStore(at).index("userId").getAll(IDBKeyRange.only(l));x.onsuccess=()=>{const g=(x.result||[]).filter(y=>!y.isPassive&&!y.lastReview&&y.quality===tt.VERIFIED).sort((y,S)=>y.createdAt-S.createdAt).slice(0,o);c(g)},x.onerror=()=>f(x.error)})}),yh=async(l,o)=>{o&&o.id&&localStorage.setItem("vocab_pro_db_marker","exists"),await xe([at,Ma],u=>{u.objectStore(at).put(l),u.objectStore(Ma).put(o)})},bh=async(l,o)=>{await xe([at,ca],u=>{l&&u.objectStore(at).put(l),u.objectStore(ca).put(o)})},vh=async l=>{if(l.updatedAt=Date.now(),!l.userId)throw console.error(`[DB_CRITICAL] Attempting to save word ${l.word} with NO USER ID!`),new Error("Cannot save word without UserID");await xe(at,o=>o.objectStore(at).put(l))},Sh=async l=>{await xe(at,o=>o.objectStore(at).delete(l))},wh=async l=>{await xe(at,o=>{const u=o.objectStore(at);l.forEach(c=>u.delete(c))})},Rl=async l=>{if(l.length!==0){if(!l[0].userId)throw console.error("[DB_CRITICAL] Attempting to bulk save words with NO USER ID on first item!"),new Error("Cannot bulk save words without UserID");await xe(at,o=>{const u=o.objectStore(at);l.forEach(c=>u.put(c))})}},Rs=async l=>await xe(at,o=>o.objectStore(at).index("userId").getAll(IDBKeyRange.only(l)),"readonly"),Nh=async l=>{l.updatedAt=Date.now(),await xe(ca,o=>o.objectStore(ca).put(l))},Jb=async l=>{await xe(ca,o=>o.objectStore(ca).delete(l))},jo=async l=>await xe(ca,o=>o.objectStore(ca).index("userId").getAll(IDBKeyRange.only(l)),"readonly"),e1=async(l,o)=>(await jo(l)).filter(c=>c.wordIds.includes(o)),jh=async l=>{await xe(ca,o=>{const u=o.objectStore(ca);l.forEach(c=>u.put(c))})},dd=async l=>(await xe(kl,u=>u.objectStore(kl).index("userId").getAll(IDBKeyRange.only(l)),"readonly")).sort((u,c)=>c.timestamp-u.timestamp),Eh=async l=>{await xe(kl,o=>{const u=o.objectStore(kl);l.forEach(c=>u.put(c))})},fd=async l=>await xe(Ol,o=>o.objectStore(Ol).index("userId").getAll(IDBKeyRange.only(l)),"readonly"),Ah=async l=>{await xe(Ol,o=>{const u=o.objectStore(Ol);l.forEach(c=>u.put(c))})},pd=async l=>await xe(Il,o=>o.objectStore(Il).index("userId").getAll(IDBKeyRange.only(l)),"readonly"),_h=async l=>{await xe(Il,o=>{const u=o.objectStore(Il);l.forEach(c=>u.put(c))})},Th=async l=>{l.updatedAt=Date.now(),await xe(za,o=>o.objectStore(za).put(l))},md=async l=>await xe(za,o=>o.objectStore(za).index("userId").getAll(IDBKeyRange.only(l)),"readonly"),Ch=async l=>{await xe(za,o=>o.objectStore(za).delete(l))},kh=async l=>{await xe(za,o=>{const u=o.objectStore(za);l.forEach(c=>u.put(c))})},Oh=async l=>{l.updatedAt=Date.now(),await xe(Da,o=>o.objectStore(Da).put(l))},hd=async l=>await xe(Da,o=>o.objectStore(Da).index("userId").getAll(IDBKeyRange.only(l)),"readonly"),Ih=async l=>{await xe(Da,o=>o.objectStore(Da).delete(l))},Rh=async l=>{await xe(Da,o=>{const u=o.objectStore(Da);l.forEach(c=>u.put(c))})},Mh=async l=>{l.updatedAt=Date.now(),await xe(Ba,o=>o.objectStore(Ba).put(l))},gd=async l=>await xe(Ba,o=>o.objectStore(Ba).index("userId").getAll(IDBKeyRange.only(l)),"readonly"),Lh=async l=>{await xe(Ba,o=>o.objectStore(Ba).delete(l))},Uh=async l=>{await xe(Ba,o=>{const u=o.objectStore(Ba);l.forEach(c=>u.put(c))})},t1=async l=>{await xe(jn,o=>o.objectStore(jn).put(l))},xd=async l=>await xe(jn,o=>o.objectStore(jn).index("userId").getAll(IDBKeyRange.only(l)),"readonly"),zh=async l=>{await xe(jn,o=>{const u=o.objectStore(jn);l.forEach(c=>u.put(c))})},Dh=async l=>{l.updatedAt=Date.now(),await xe(ua,o=>o.objectStore(ua).put(l))},Bh=async l=>{await xe(ua,o=>o.objectStore(ua).delete(l))},a1=async l=>await xe(ua,o=>o.objectStore(ua).index("userId").getAll(IDBKeyRange.only(l)),"readonly"),yd=async l=>await xe(ua,o=>o.objectStore(ua).index("userId").getAll(IDBKeyRange.only(l)),"readonly"),Hh=async l=>{await xe(ua,o=>{const u=o.objectStore(ua);l.forEach(c=>u.put(c))})},n1=async l=>{l.updatedAt=Date.now(),await xe(da,o=>o.objectStore(da).put(l))},bd=async l=>await xe(da,o=>o.objectStore(da).index("userId").getAll(IDBKeyRange.only(l)),"readonly"),l1=async l=>{await xe(da,o=>o.objectStore(da).delete(l))},qh=async l=>{await xe(da,o=>{const u=o.objectStore(da);l.forEach(c=>u.put(c))})},s1=async l=>{await xe(da,o=>{const u=o.objectStore(da);l.forEach(c=>u.delete(c))})},Gh=async l=>{l.updatedAt=Date.now(),await xe(La,o=>o.objectStore(La).put(l))},vd=async l=>await xe(La,o=>o.objectStore(La).index("userId").getAll(IDBKeyRange.only(l)),"readonly"),Vh=async l=>{await xe(La,o=>o.objectStore(La).delete(l))},Qh=async l=>{await xe(La,o=>{const u=o.objectStore(La);l.forEach(c=>u.put(c))})},Zh=async l=>{l.updatedAt=Date.now(),await xe(Ua,o=>o.objectStore(Ua).put(l))},Sd=async l=>await xe(Ua,o=>o.objectStore(Ua).index("userId").getAll(IDBKeyRange.only(l)),"readonly"),Yh=async l=>{await xe(Ua,o=>o.objectStore(Ua).delete(l))},Xh=async l=>{await xe(Ua,o=>{const u=o.objectStore(Ua);l.forEach(c=>u.put(c))})},Kh=async l=>{l.updatedAt=Date.now(),await xe(Ha,o=>o.objectStore(Ha).put(l))},Di=async l=>await xe(Ha,o=>o.objectStore(Ha).index("userId").getAll(IDBKeyRange.only(l)),"readonly"),Wh=async l=>{await xe(Ha,o=>o.objectStore(Ha).delete(l))},$h=async l=>{await xe(Ha,o=>{const u=o.objectStore(Ha);l.forEach(c=>u.put(c))})},Fh=async l=>{await xe(qa,o=>o.objectStore(qa).put(l))},Bi=async l=>await xe(qa,o=>o.objectStore(qa).index("userId").getAll(IDBKeyRange.only(l)),"readonly"),i1=async(l,o)=>{await xe(qa,u=>u.objectStore(qa).delete(l))},Ph=async l=>{await xe(qa,o=>{const u=o.objectStore(qa);l.forEach(c=>u.put(c))})},r1=async l=>{await xe(Ga,o=>o.objectStore(Ga).put(l))},wd=async l=>await xe(Ga,o=>o.objectStore(Ga).index("userId").getAll(IDBKeyRange.only(l)),"readonly"),o1=async l=>{await xe(Ga,o=>o.objectStore(Ga).delete(l))},Jh=async l=>{await xe(Ga,o=>{const u=o.objectStore(Ga);l.forEach(c=>u.put(c))})},eg=async l=>{await xe(En,o=>o.objectStore(En).put(l))},c1=async l=>await xe(En,o=>o.objectStore(En).index("userId").getAll(IDBKeyRange.only(l)),"readonly"),tg=async l=>{await xe(En,o=>o.objectStore(En).delete(l))},ag=async l=>{await xe(An,o=>o.objectStore(An).put(l))},u1=async l=>await xe(An,o=>o.objectStore(An).index("userId").getAll(IDBKeyRange.only(l)),"readonly"),ng=async l=>{await xe(An,o=>o.objectStore(An).delete(l))},lg=async l=>{await xe(_n,o=>o.objectStore(_n).put(l))},d1=async l=>await xe(_n,o=>o.objectStore(_n).index("userId").getAll(IDBKeyRange.only(l)),"readonly"),sg=async l=>{await xe(_n,o=>o.objectStore(_n).delete(l))},ig=async l=>{await xe(Tn,o=>o.objectStore(Tn).put(l))},f1=async l=>await xe(Tn,o=>o.objectStore(Tn).index("userId").getAll(IDBKeyRange.only(l)),"readonly"),rg=async l=>{await xe(Tn,o=>o.objectStore(Tn).delete(l))},og=async l=>{await xe(Va,o=>o.objectStore(Va).put(l))},Nd=async l=>await xe(Va,o=>o.objectStore(Va).index("userId").getAll(IDBKeyRange.only(l)),"readonly"),cg=async l=>{await xe(Va,o=>o.objectStore(Va).delete(l))},ug=async l=>{await xe(Va,o=>{const u=o.objectStore(Va);l.forEach(c=>u.put(c))})},p1=Object.freeze(Object.defineProperty({__proto__:null,bulkDeleteIrregularVerbs:s1,bulkDeleteWords:wh,bulkSaveCompositions:$h,bulkSaveConversationItems:Rh,bulkSaveFreeTalkItems:Uh,bulkSaveIrregularVerbs:qh,bulkSaveLessons:Qh,bulkSaveListeningItems:Xh,bulkSaveNativeSpeakItems:kh,bulkSaveParaphraseLogs:Eh,bulkSavePlanningGoals:ug,bulkSaveReadingBooks:Jh,bulkSaveSpeakingLogs:Ah,bulkSaveSpeakingTopics:_h,bulkSaveUnits:jh,bulkSaveWordBooks:Ph,bulkSaveWords:Rl,bulkSaveWritingLogs:zh,bulkSaveWritingTopics:Hh,clearVocabularyOnly:ph,deleteComposition:Wh,deleteConversationItem:Ih,deleteFreeTalkItem:Lh,deleteIrregularVerb:l1,deleteLesson:Vh,deleteLessonBook:tg,deleteListeningBook:ng,deleteListeningItem:Yh,deleteNativeSpeakItem:Ch,deletePlanningGoal:cg,deleteReadingBook:o1,deleteSpeakingBook:sg,deleteUnit:Jb,deleteWordBook:i1,deleteWordFromDB:Sh,deleteWritingBook:rg,deleteWritingTopic:Bh,filterItem:gh,findWordByText:mh,getAllSpeakingLogsForExport:fd,getAllSpeakingTopicsForExport:pd,getAllUsers:Cs,getAllWordsForExport:Rs,getAllWritingLogsForExport:xd,getAllWritingTopicsForExport:yd,getCompositionsByUserId:Di,getConversationItemsByUserId:hd,getDueWords:xh,getFreeTalkItemsByUserId:gd,getIrregularVerbsByUserId:bd,getLessonBooksByUserId:c1,getLessonsByUserId:vd,getListeningBooksByUserId:u1,getListeningItemsByUserId:Sd,getNativeSpeakItemsByUserId:md,getNewWords:ed,getParaphraseLogs:dd,getPlanningGoalsByUserId:Nd,getRandomMeanings:hh,getReadingBooksByUserId:wd,getSpeakingBooksByUserId:d1,getUnitsByUserId:jo,getUnitsContainingWord:e1,getWordBooksByUserId:Bi,getWritingBooksByUserId:f1,getWritingTopicsByUserId:a1,saveComposition:Kh,saveConversationItem:Oh,saveFreeTalkItem:Mh,saveIrregularVerb:n1,saveLesson:Gh,saveLessonBook:eg,saveListeningBook:ag,saveListeningItem:Zh,saveNativeSpeakItem:Th,savePlanningGoal:og,saveReadingBook:r1,saveSpeakingBook:lg,saveUnit:Nh,saveUser:Aa,saveWord:vh,saveWordAndUnit:bh,saveWordAndUser:yh,saveWordBook:Fh,saveWritingBook:ig,saveWritingLog:t1,saveWritingTopic:Dh,seedDatabaseIfEmpty:ud,tryPersistStorage:fh},Symbol.toStringTag,{value:"Module"})),m1=["Vietnamese","Spanish","Chinese (Simplified)","Chinese (Traditional)","Japanese","Korean","French","German","Italian","Portuguese","Russian","Arabic","Hindi","Thai","Indonesian","Turkish"],h1=[{id:"learner",label:"General Learner",icon:$m},{id:"professional",label:"Professional",icon:pb},{id:"student",label:"Student",icon:ah}],g1=({users:l,isCreating:o,setIsCreating:u,loading:c,hasApiKey:f,newName:d,setNewName:h,newRole:x,setNewRole:p,newLevel:g,setNewLevel:y,newTarget:S,setNewTarget:A,newLanguage:T,setNewLanguage:I,newAudience:N,setNewAudience:R,selectedPersona:O,handleSelectKey:H,handlePersonaSelect:U,handleCreateProfile:B,onLogin:L})=>c?s.jsx("div",{className:"h-screen flex items-center justify-center bg-neutral-50",children:s.jsxs("div",{className:"flex flex-col items-center space-y-4",children:[s.jsx(Ct,{className:"animate-spin text-neutral-300",size:40}),s.jsx("p",{className:"text-xs font-black text-neutral-400 uppercase tracking-widest",children:"Initializing Lab..."})]})}):s.jsx("div",{className:"min-h-screen flex items-center justify-center bg-neutral-50 p-6",children:s.jsxs("div",{className:"max-w-md w-full space-y-10",children:[s.jsxs("div",{className:"text-center space-y-2",children:[s.jsx("div",{className:"inline-flex p-4 bg-white rounded-3xl shadow-sm border border-neutral-100 mb-4",children:s.jsx(Is,{className:"text-neutral-900",size:32})}),s.jsx("h1",{className:"text-4xl font-black text-neutral-900 tracking-tight",children:"Vocab Pro"}),s.jsx("p",{className:"text-neutral-500 font-medium italic",children:"Your words. Your context. Your mastery."})]}),!f&&l.length===0&&s.jsxs("div",{className:"bg-amber-50 border-2 border-amber-100 p-6 rounded-[2rem] space-y-4 animate-in fade-in slide-in-from-top-4",children:[s.jsxs("div",{className:"flex items-start space-x-3 text-amber-800",children:[s.jsx(wn,{size:24,className:"shrink-0 mt-1"}),s.jsxs("div",{children:[s.jsx("h3",{className:"font-black text-lg",children:"AI Configuration Required"}),s.jsx("p",{className:"text-sm font-medium mt-1 opacity-80",children:"To enable AI word analysis and suggestions, you must select a Gemini API key."})]})]}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("button",{onClick:H,className:"w-full py-4 bg-amber-600 text-white font-black rounded-2xl shadow-lg hover:bg-amber-700 transition-all flex items-center justify-center space-x-2 active:scale-95",children:[s.jsx(_b,{size:18}),s.jsx("span",{children:"CONNECT GEMINI API"})]}),s.jsxs("a",{href:"https://ai.google.dev/gemini-api/docs/billing",target:"_blank",rel:"noopener noreferrer",className:"flex items-center justify-center space-x-1.5 text-[10px] font-black text-amber-600 uppercase tracking-widest hover:underline",children:[s.jsx("span",{children:"Billing Documentation"}),s.jsx(Jm,{size:10})]})]})]}),o?s.jsxs("form",{onSubmit:B,className:"bg-white p-8 rounded-[2.5rem] shadow-xl border border-neutral-200 animate-in zoom-in-95 duration-300 space-y-6",children:[s.jsxs("h2",{className:"text-xl font-bold flex items-center",children:[s.jsx(Zb,{className:"mr-2",size:20})," Create Profile"]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs font-bold text-neutral-400 uppercase tracking-widest mb-2",children:"Display Name"}),s.jsx("input",{autoFocus:!0,type:"text",value:d,onChange:Y=>h(Y.target.value),placeholder:"Enter your name",className:"w-full px-5 py-3 bg-neutral-50 border border-neutral-200 rounded-xl text-md font-bold focus:ring-2 focus:ring-neutral-900 focus:outline-none"})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsxs("label",{className:"block text-xs font-bold text-neutral-400 uppercase tracking-widest mb-2 flex items-center gap-2",children:[s.jsx(th,{size:14})," Language"]}),s.jsx("select",{value:T,onChange:Y=>I(Y.target.value),className:"w-full px-5 py-3 bg-neutral-50 border border-neutral-200 rounded-xl text-sm font-medium focus:ring-2 focus:ring-neutral-900 focus:outline-none appearance-none",children:m1.map(Y=>s.jsx("option",{value:Y,children:Y},Y))})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-xs font-bold text-neutral-400 uppercase tracking-widest mb-2 flex items-center gap-2",children:[s.jsx(uh,{size:14})," Audience"]}),s.jsxs("select",{value:N,onChange:Y=>R(Y.target.value),className:"w-full px-5 py-3 bg-neutral-50 border border-neutral-200 rounded-xl text-sm font-medium focus:ring-2 focus:ring-neutral-900 focus:outline-none appearance-none",children:[s.jsx("option",{value:"Kid",children:"Kid"}),s.jsx("option",{value:"Adult",children:"Adult"})]})]})]}),s.jsxs("div",{className:"space-y-3",children:[s.jsx("label",{className:"block text-xs font-bold text-neutral-400 uppercase tracking-widest",children:"About Me (Quick Start)"}),s.jsx("div",{className:"grid grid-cols-3 gap-2",children:h1.map(Y=>{const Q=Y.icon;return s.jsxs("button",{type:"button",onClick:()=>U(Y.id),className:`p-3 border-2 rounded-2xl flex flex-col items-center justify-center space-y-1.5 transition-all text-center ${O===Y.id?"bg-neutral-900 border-neutral-900 text-white shadow-lg":"bg-white border-neutral-100 text-neutral-400 hover:border-neutral-200 hover:text-neutral-900"}`,children:[s.jsx(Q,{size:20}),s.jsx("span",{className:"text-[10px] font-black uppercase tracking-tight",children:Y.label})]},Y.id)})})]}),s.jsxs("div",{className:"space-y-4 pt-4 border-t border-neutral-100",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs font-bold text-neutral-400 uppercase tracking-widest mb-2",children:"Starting Role"}),s.jsx("input",{type:"text",value:x,onChange:Y=>p(Y.target.value),placeholder:"e.g., Working Professional, Student",className:"w-full px-5 py-3 bg-neutral-50 border border-neutral-200 rounded-xl text-md font-medium focus:ring-2 focus:ring-neutral-900 focus:outline-none"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs font-bold text-neutral-400 uppercase tracking-widest mb-2",children:"Current Level"}),s.jsx("input",{type:"text",value:g,onChange:Y=>y(Y.target.value),placeholder:"e.g., Intermediate",className:"w-full px-5 py-3 bg-neutral-50 border border-neutral-200 rounded-xl text-md font-medium focus:ring-2 focus:ring-neutral-900 focus:outline-none"})]})]}),s.jsxs("div",{className:"flex space-x-3 pt-4",children:[s.jsx("button",{type:"button",onClick:()=>u(!1),className:"flex-1 py-4 text-neutral-500 font-bold hover:bg-neutral-50 rounded-2xl transition-colors",children:"Back"}),s.jsx("button",{type:"submit",disabled:!d.trim(),className:"flex-[2] py-4 bg-neutral-900 text-white font-bold rounded-2xl shadow-lg hover:scale-[1.02] active:scale-95 transition-all disabled:opacity-50",children:"Start Learning"})]})]}):s.jsxs("div",{className:"space-y-4",children:[s.jsx("div",{className:"grid grid-cols-1 gap-3",children:l.map(Y=>s.jsxs("button",{onClick:()=>L(Y),className:"bg-white p-5 rounded-3xl border border-neutral-200 shadow-sm flex items-center justify-between hover:border-neutral-900 hover:shadow-md transition-all group",children:[s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsx("img",{src:Y.avatar,className:"w-12 h-12 rounded-2xl bg-neutral-100 p-1",alt:Y.name}),s.jsxs("div",{className:"text-left",children:[s.jsx("div",{className:"font-bold text-neutral-900",children:Y.name}),s.jsxs("div",{className:"text-xs text-neutral-400",children:[Y.role?Y.role:"Learner","  Last seen: ",new Date(Y.lastLogin).toLocaleDateString()]})]})]}),s.jsx(mb,{size:20,className:"text-neutral-300 group-hover:text-neutral-900 transition-colors"})]},Y.id))}),s.jsxs("button",{onClick:()=>u(!0),className:"w-full p-5 bg-neutral-100 border border-dashed border-neutral-300 text-neutral-500 rounded-3xl font-bold flex items-center justify-center space-x-2 hover:bg-neutral-200 transition-all",children:[s.jsx(Ja,{size:20}),s.jsx("span",{children:"Add New User"})]})]})]})}),x1=({onLogin:l})=>{const[o,u]=w.useState([]),[c,f]=w.useState(!1),[d,h]=w.useState(""),[x,p]=w.useState(""),[g,y]=w.useState(""),[S,A]=w.useState(""),[T,I]=w.useState("English"),[N,R]=w.useState("Adult"),[O,H]=w.useState("learner"),[U,B]=w.useState(!0),[L,Y]=w.useState(!0),Q=[{id:"learner",role:"Vocab Learner",level:"Intermediate English",target:"Expand active vocabulary"},{id:"professional",role:"Working Professional",level:"Intermediate English",target:"Fluent business communication"},{id:"student",role:"Primary Student",level:"Beginner English",target:"Build school vocabulary"}];w.useEffect(()=>{V()},[]),w.useEffect(()=>{c&&X("learner")},[c]);const V=async()=>{B(!0);try{if(window.aistudio){const ie=await window.aistudio.hasSelectedApiKey();Y(ie)}const K=(await Cs()).filter(ie=>!ie.name.toLowerCase().includes("book"));u(K)}catch(K){console.error("Auth initialization error:",K)}finally{B(!1)}},C=async()=>{window.aistudio&&(await window.aistudio.openSelectKey(),Y(!0))},X=K=>{const ie=Q.find(ge=>ge.id===K);ie&&(H(K),p(ie.role),y(ie.level),A(ie.target),R(K==="student"?"Kid":"Adult"))},F=async K=>{if(K.preventDefault(),!d.trim())return;const ie={id:"u-"+Date.now(),name:d.trim(),avatar:`https://api.dicebear.com/7.x/avataaars/svg?seed=${d}`,lastLogin:Date.now(),role:x.trim(),currentLevel:g.trim(),target:S.trim(),nativeLanguage:T,experience:0,level:1,peakLevel:1,adventure:{currentNodeIndex:0,energyShards:0,energy:5,keys:1,keyFragments:0,badges:[],unlockedChapterIds:Ts.map(ge=>ge.id),completedSegmentIds:[],segmentStars:{}},lessonPreferences:{language:T,targetAudience:N,tone:N==="Kid"?"friendly_elementary":"professional_professor"}};await Aa(ie),l(ie)};return s.jsx(g1,{users:o,isCreating:c,setIsCreating:f,loading:U,hasApiKey:L,newName:d,setNewName:h,newRole:x,setNewRole:p,newLevel:g,setNewLevel:y,newTarget:S,setNewTarget:A,newLanguage:T,setNewLanguage:I,newAudience:N,setNewAudience:R,selectedPersona:O,handleSelectKey:C,handlePersonaSelect:X,handleCreateProfile:F,onLogin:l})},dg=w.createContext(void 0),y1=({children:l})=>{const[o,u]=w.useState([]),c=w.useCallback(d=>{u(h=>h.filter(x=>x.id!==d))},[]),f=w.useCallback((d,h="info",x=3e3)=>{const p=Date.now().toString()+Math.random(),g={id:p,type:h,message:d};u(y=>[...y,g]),x>0&&setTimeout(()=>{c(p)},x)},[c]);return s.jsxs(dg.Provider,{value:{showToast:f},children:[l,s.jsx("div",{className:"fixed top-6 left-1/2 -translate-x-1/2 z-[9999] flex flex-col gap-2 w-full max-w-sm px-4 pointer-events-none",children:o.map(d=>s.jsxs("div",{className:`
              pointer-events-auto flex items-center justify-between p-4 rounded-2xl shadow-xl border backdrop-blur-md animate-in slide-in-from-top-2 fade-in duration-300
              ${d.type==="success"?"bg-neutral-900/90 text-white border-neutral-800":""}
              ${d.type==="error"?"bg-red-500/90 text-white border-red-600":""}
              ${d.type==="info"?"bg-white/90 text-neutral-900 border-neutral-200":""}
            `,children:[s.jsxs("div",{className:"flex items-center gap-3",children:[d.type==="success"&&s.jsx(Fa,{size:20,className:"text-green-400"}),d.type==="error"&&s.jsx(wn,{size:20,className:"text-white"}),d.type==="info"&&s.jsx(nh,{size:20,className:"text-blue-500"}),s.jsx("span",{className:"text-sm font-bold leading-tight",children:d.message})]}),s.jsx("button",{onClick:()=>c(d.id),className:"p-1 hover:opacity-70 transition-opacity ml-4",children:s.jsx(kt,{size:16})})]},d.id))})]})},Ul=()=>{const l=w.useContext(dg);if(!l)throw new Error("useToast must be used within a ToastProvider");return l},z2={locked_chest:{name:"Locked Chest",icon:""},lucky_dice:{name:"Lucky Dice",icon:""},badge_of_courage:{name:"Badge of Courage",icon:""},badge_of_wisdom:{name:"Badge of Wisdom",icon:""},badge_of_strength:{name:"Badge of Strength",icon:""},badge_of_speed:{name:"Badge of Speed",icon:""},badge_of_endurance:{name:"Badge of Endurance",icon:""},badge_of_precision:{name:"Badge of Precision",icon:""},badge_of_focus:{name:"Badge of Focus",icon:""},badge_of_logic:{name:"Badge of Logic",icon:""},badge_of_creativity:{name:"Badge of Creativity",icon:""},badge_of_eloquence:{name:"Badge of Eloquence",icon:""},badge_of_resilience:{name:"Badge of Resilience",icon:""},badge_of_harmony:{name:"Badge of Harmony",icon:""},badge_of_vitality:{name:"Badge of Vitality",icon:""},badge_of_willpower:{name:"Badge of Willpower",icon:""},badge_of_serenity:{name:"Badge of Serenity",icon:""},badge_of_insight:{name:"Badge of Insight",icon:""},badge_of_mystery:{name:"Badge of Mystery",icon:""},badge_of_adventure:{name:"Badge of Adventure",icon:""},badge_of_fortune:{name:"Badge of Fortune",icon:""},badge_of_innovation:{name:"Badge of Innovation",icon:""}},Tm=[{name:"Cyber Sentinel",image:"",hp:20,dialogueIntro:"Logic is absolute. Prove yours.",dialogueWin:"Error... System... Crash...",dialogueLose:"Your logic is flawed."},{name:"Inferno Dragon",image:"",hp:25,dialogueIntro:"I breathe fire. What do you breathe?",dialogueWin:"Your spirit burns brighter...",dialogueLose:"Burn to ash!"},{name:"Abyssal Kraken",image:"",hp:20,dialogueIntro:"The depths hold many secrets.",dialogueWin:"You have navigated the abyss.",dialogueLose:"Join the sunken ones."},{name:"Spectral Wraith",image:"",hp:15,dialogueIntro:"Can you touch what isn't there?",dialogueWin:"I fade into the light...",dialogueLose:"Your soul is mine."},{name:"Ancient Mummy",image:"",hp:20,dialogueIntro:"My curse is eternal.",dialogueWin:"Rest... finally...",dialogueLose:"Join my tomb."},{name:"Alien Warlord",image:"",hp:20,dialogueIntro:"Your language is primitive.",dialogueWin:"Acknowledged. You are superior.",dialogueLose:"Earth is ours."},{name:"Primal T-Rex",image:"",hp:25,dialogueIntro:"ROOOARRR! The earth shakes beneath me!",dialogueWin:"Extinction... comes for me...",dialogueLose:"You are merely prey."},{name:"Shadow Ninja",image:"",hp:18,dialogueIntro:"Silence is the loudest scream.",dialogueWin:"Honorable defeat...",dialogueLose:"Too slow."},{name:"Vampire Lord",image:"",hp:20,dialogueIntro:"The night is young.",dialogueWin:"The sun... it burns...",dialogueLose:"Delicious."},{name:"Oni Warlord",image:"",hp:22,dialogueIntro:"Face the demon within!",dialogueWin:"Your spirit is unbreakable.",dialogueLose:"Another soul for the mask."},{name:"Syntax Serpent",image:"",hp:20,dialogueIntro:"Untangle my sentences if you can.",dialogueWin:"Your logic is impeccable.",dialogueLose:"Your structure is flawed."},{name:"Dread Scorpion",image:"",hp:25,dialogueIntro:"One sting is all it takes.",dialogueWin:"My venom... ineffective?",dialogueLose:"Paralyzed by fear."}];function Mi(l){const o=[];let u=0;for(let c=0;c<l;c++){const f={id:c,type:"standard"};if((c+1)%10===0)f.type="boss",f.boss_details=Tm[u%Tm.length],u++;else{const d=Math.random();d<.1?f.type="treasure":d<.3&&(f.type="key_fragment")}o.push(f)}return o}Mi(100);const Pt={userId:"uid",word:"w",ipaUs:"i_us",ipaUk:"i_uk",pronSim:"ps",ipaMistakes:"im",meaningVi:"m",example:"ex",collocationsArray:"col",idiomsList:"idm",note:"nt",tags:"tg",groups:"gr",createdAt:"ca",updatedAt:"ua",wordFamily:"fam",prepositions:"prp",paraphrases:"prph",register:"reg",isIdiom:"is_id",isPhrasalVerb:"is_pv",isCollocation:"is_col",isStandardPhrase:"is_phr",isIrregular:"is_irr",needsPronunciationFocus:"is_pron",isExampleLocked:"is_exl",isPassive:"is_pas",quality:"q",source:"s",nextReview:"nr",interval:"iv",easeFactor:"ef",consecutiveCorrect:"cc",lastReview:"lr",lastGrade:"lg",forgotCount:"fc",lastTestResults:"ltr",lastXpEarnedTime:"lxp",gameEligibility:"ge",masteryScore:"ms",complexity:"cx",topic:"tp",icon:"ic",words:"wds",color:"clr",titleColor:"tc",titleSize:"ts",d:"ds",text:"x",isIgnored:"g",prep:"p",usage:"u",tone:"t",context:"c",anchor:"anch",sentence:"sent",nouns:"ns",verbs:"v",adjs:"j",advs:"d",standard:"std",answers:"ans",speakers:"spks",sentences:"snts",speakerName:"sn",voiceName:"vn",accentCode:"ac",sex:"sx",title:"tl",content:"ct",sentenceScores:"ss"},jd=Object.fromEntries(Object.entries(Pt).map(([l,o])=>[o,l])),td={name:"n",avatar:"av",lastLogin:"ll",role:"r",currentLevel:"cl",target:"t",nativeLanguage:"nl",experience:"xp",level:"lv",peakLevel:"pl",adventure:"adv",adventureLastDailyStar:"alds",unlockedChapterIds:"uc",completedSegmentIds:"cs",segmentStars:"ss",badges:"b",keys:"k",keyFragments:"kf",currentNodeIndex:"cni",energy:"e",energyShards:"es",map:"m"},Cm=Object.fromEntries(Object.entries(td).map(([l,o])=>[o,l])),fg={COLLO_CONNECT:"cc",MEANING_MATCH:"mm",IPA_SORTER:"is",SENTENCE_SCRAMBLE:"ss",PREPOSITION_POWER:"pp",WORD_TRANSFORMER:"wt",IDIOM_CONNECT:"ic",PARAPHRASE_CONTEXT:"pc"},b1=Object.fromEntries(Object.entries(fg).map(([l,o])=>[o,l])),pg={SPELLING:"sp",IPA_QUIZ:"iq",PREPOSITION_QUIZ:"pq",WORD_FAMILY:"wf",MEANING_QUIZ:"mq",PARAPHRASE_QUIZ:"prq",SENTENCE_SCRAMBLE:"sc",HETERONYM_QUIZ:"hq",PRONUNCIATION:"p",COLLOCATION_QUIZ:"cq",IDIOM_QUIZ:"idq",PARAPHRASE_CONTEXT_QUIZ:"pcq",WORD_FAMILY_NOUNS:"wf_n",WORD_FAMILY_VERBS:"wf_v",WORD_FAMILY_ADJS:"wf_j",WORD_FAMILY_ADVS:"wf_d"},v1=Object.fromEntries(Object.entries(pg).map(([l,o])=>[o,l])),mg={intensified:"int",softened:"sft",synonym:"syn",academic:"acd",casual:"cas",idiomatic:"idm"},S1=Object.fromEntries(Object.entries(mg).map(([l,o])=>[o,l])),go={user:!0,vocabulary:!0,lesson:!0,reading:!0,writing:!0,speaking:!0,listening:!0,mimic:!0,wordBook:!0,planning:!0};function hg(l,o){return l&&(o==="paraphrases"?l.map(u=>{const c={[Pt.word]:u.word,[Pt.tone]:mg[u.tone]||u.tone,[Pt.context]:u.context};return u.isIgnored!==void 0&&(c[Pt.isIgnored]=u.isIgnored),c}):l.map(u=>{if(typeof u!="object"||u===null)return u;const c={};for(const f in u)Object.prototype.hasOwnProperty.call(u,f)&&(c[Pt[f]||f]=u[f]);return c}))}function w1(l){if(!l)return l;const o={},u=["nouns","verbs","adjs","advs"];for(const c of u)if(l[c]){const f=Pt[c]||c;o[f]=hg(l[c],c)}return o}function Pa(l){const o={};for(const u in l){if(!Object.prototype.hasOwnProperty.call(l,u)||u==="tags"||u==="v2"||u==="v3"||u==="ipa")continue;const c=l[u],f=Pt[u]||u;if(["collocationsArray","idiomsList","prepositions","paraphrases","words","speakers","sentences","answers"].includes(u))o[f]=hg(c,u);else if(u==="wordFamily")o[f]=w1(c);else if(u==="lastTestResults"&&c){const d={},h=new Set(["WORD_FAMILY","WORD_FAMILY_NOUNS","WORD_FAMILY_VERBS","WORD_FAMILY_ADJS","WORD_FAMILY_ADVS","wf","wf_n","wf_v","wf_j","wf_d"]);for(const x in c)if(Object.prototype.hasOwnProperty.call(c,x)){if(h.has(x))continue;const p=x.split(":");if(p[0]==="WORD_FAMILY"&&p.length===2)continue;const g=p[0],S=[pg[g]||g,...p.slice(1)].join(":");d[S]=c[x]}o[f]=d}else u==="gameEligibility"&&Array.isArray(c)?o[f]=c.map(d=>fg[d]||d):o[f]=c}return o}function gg(l){const o={};for(const u in l){if(!Object.prototype.hasOwnProperty.call(l,u))continue;const c=l[u],f=td[u]||u;if(u==="adventure"&&c){const d={};for(const h in c){if(!Object.prototype.hasOwnProperty.call(c,h))continue;const x=td[h]||h;d[x]=c[h]}o[f]=d}else o[f]=c}return o}function xg(l,o){return l&&(o==="paraphrases"?l.map(u=>{const c={word:u[Pt.word],tone:S1[u[Pt.tone]]||u[Pt.tone],context:u[Pt.context]};return u[Pt.isIgnored]!==void 0&&(c.isIgnored=u[Pt.isIgnored]),c}):l.map(u=>{if(typeof u!="object"||u===null)return u;const c={};for(const f in u)if(Object.prototype.hasOwnProperty.call(u,f)){const d=jd[f]||f;if(["nouns","verbs","adjs","advs"].includes(o)&&(d==="ipa"||d==="ipaUs"||d==="ipaUk"))continue;c[d]=u[f]}return c}))}function N1(l){const o={};for(const u in l){const c=jd[u]||u;o[c]=xg(l[u],c)}return o}function As(l){const o={};for(const u in l){if(!Object.prototype.hasOwnProperty.call(l,u))continue;const c=l[u],f=jd[u]||u;if(!(f==="tags"||f==="v2"||f==="v3")){if(u==="i"&&!o.ipaUs){o.ipaUs=c;continue}if(f==="ipa"){o.ipaUs||(o.ipaUs=c);continue}if(["collocationsArray","idiomsList","prepositions","paraphrases","words","speakers","sentences","answers"].includes(f))o[f]=xg(c,f);else if(f==="wordFamily"&&c)o[f]=N1(c);else if(f==="lastTestResults"&&c){const d={};for(const h in c)if(Object.prototype.hasOwnProperty.call(c,h)){const x=h.split(":"),p=x[0],y=[v1[p]||p,...x.slice(1)].join(":");d[y]=c[h]}o[f]=d}else f==="gameEligibility"&&Array.isArray(c)?o[f]=c.map(d=>b1[d]||d):o[f]=c}}return o}function j1(l){const o={};for(const u in l){if(!Object.prototype.hasOwnProperty.call(l,u))continue;const c=l[u],f=Cm[u]||u;if(f==="adventure"&&c){const d={};for(const h in c){if(!Object.prototype.hasOwnProperty.call(c,h))continue;const x=Cm[h]||h;d[x]=c[h]}o[f]=d}else o[f]=c}return o}function E1(l){if(!l)return l;const o={...l};if(o.ipa&&!o.ipaUs&&(o.ipaUs=o.ipa),delete o.v2,delete o.v3,delete o.tags,delete o.ipa,o.wordFamily){const u=c=>Array.isArray(c)?c.map(f=>{const d={...f};return delete d.ipa,delete d.ipaUs,delete d.ipaUk,d}):c;o.wordFamily.nouns&&(o.wordFamily.nouns=u(o.wordFamily.nouns)),o.wordFamily.verbs&&(o.wordFamily.verbs=u(o.wordFamily.verbs)),o.wordFamily.adjs&&(o.wordFamily.adjs=u(o.wordFamily.adjs)),o.wordFamily.advs&&(o.wordFamily.advs=u(o.wordFamily.advs))}return o}const yg=async(l,o,u=go)=>new Promise(c=>{const f=u&&typeof u=="object"&&typeof u.vocabulary=="boolean"?u:go,d=new FileReader;d.onload=async h=>{var x;try{const p=JSON.parse((x=h.target)==null?void 0:x.result),g=p.ca?new Date(p.ca).getTime():void 0,y=Array.isArray(p)?p:p.vocabulary||p.vocab||[];let A=y.length>0&&(y[0].uid||!y[0].userId)?y.map(As):y;A=A.map(E1);const T=Array.isArray(p)?void 0:p.units||p.u,I=Array.isArray(p)?void 0:p.paraphraseLogs||p.pl,N=Array.isArray(p)?void 0:p.speakingTopics||p.st,R=Array.isArray(p)?void 0:p.speakingLogs||p.sl,O=Array.isArray(p)?void 0:p.writingTopics||p.wt,H=Array.isArray(p)?void 0:p.writingLogs||p.wl,U=Array.isArray(p)?void 0:p.irregularVerbs||p.iv,B=Array.isArray(p)?void 0:p.lessons,L=Array.isArray(p)?void 0:p.listeningItems,Y=Array.isArray(p)?void 0:p.nativeSpeakItems||p.nsi,Q=Y?Y.map(As):void 0,V=Array.isArray(p)?void 0:p.conversationItems||p.ci,C=V?V.map(As):void 0,X=Array.isArray(p)?void 0:p.freeTalkItems||p.fti,F=X?X.map(As):void 0,K=Array.isArray(p)?void 0:p.compositions,ie=Array.isArray(p)?void 0:p.mimicQueue,ge=Array.isArray(p)?void 0:p.wordBooks||p.wb,oe=ge?ge.map(As):void 0,_=Array.isArray(p)?void 0:p.readingShelves||p.rs,W=Array.isArray(p)?void 0:p.readingBooks||p.rb,J=Array.isArray(p)?void 0:p.planningGoals||p.pg,de=Array.isArray(p)?void 0:p.user;let me;de&&(me="n"in de||"av"in de?j1(de):de);const v=me?me.id:o,j=Array.isArray(p)?void 0:p.customAdventure||p.adv,z=Array.isArray(p)?void 0:p.settings||p.sys;if(!Array.isArray(A))throw new Error("Invalid JSON: 'vocabulary' array missing.");let ee=0,ue=0,ce=0;if(f.vocabulary){const D=await Rs(o),re=new Map(D.map(te=>[te.word.toLowerCase().trim(),te])),P=[];for(const te of A){if(!te.word)continue;const he=re.get(te.word.toLowerCase().trim());if(he)(te.updatedAt||0)>(he.updatedAt||0)?(P.push({...he,...te,id:he.id,userId:v,updatedAt:Date.now()}),ue++):ce++;else{const ye=Date.now();P.push({...te,id:te.id||`w-${ye}-${Math.random()}`,userId:v,createdAt:te.createdAt||ye,updatedAt:ye}),ee++}}P.length>0&&await Rl(P)}f.reading&&(T&&await jh(T.map(D=>({...D,userId:v}))),W&&await Jh(W.map(D=>({...D,userId:v}))),_&&localStorage.setItem("reading_books_shelves",JSON.stringify(_))),(f.lesson||f.writing)&&I&&await Eh(I.map(D=>({...D,userId:v}))),f.speaking&&(N&&await _h(N.map(D=>({...D,userId:v}))),R&&await Ah(R.map(D=>({...D,userId:v}))),Q&&await kh(Q.map(D=>({...D,userId:v}))),C&&await Rh(C.map(D=>({...D,userId:v}))),F&&await Uh(F.map(D=>({...D,userId:v})))),f.writing&&(O&&await Hh(O.map(D=>({...D,userId:v}))),H&&await zh(H.map(D=>({...D,userId:v}))),K&&await $h(K.map(D=>({...D,userId:v})))),f.lesson&&(U&&await qh(U.map(D=>({...D,userId:v}))),B&&await Qh(B.map(D=>({...D,userId:v})))),f.listening&&L&&await Xh(L.map(D=>({...D,userId:v}))),f.mimic&&ie&&localStorage.setItem("vocab_pro_mimic_practice_queue",JSON.stringify(ie)),f.wordBook&&oe&&await Ph(oe.map(D=>({...D,userId:v}))),f.planning&&J&&await ug(J.map(D=>({...D,userId:v})));let fe;if(f.user&&me){const D={...me,id:v};await Aa(D),fe=D}j&&f.user&&(j.ch&&localStorage.setItem("vocab_pro_adventure_chapters",JSON.stringify(j.ch)),j.b&&localStorage.setItem("vocab_pro_custom_badges",JSON.stringify(j.b))),f.user&&z&&(localStorage.setItem("vocab_pro_system_config",JSON.stringify(z)),window.dispatchEvent(new Event("config-updated"))),c({type:"success",message:"Restore data successfully",detail:`Words: ${ee} new, ${ue} updated.`,updatedUser:fe,backupTimestamp:g})}catch(p){c({type:"error",message:"JSON Import Error",detail:p.message})}},d.readAsText(l)}),A1=async(l,o,u=go)=>{const c=u&&typeof u=="object"&&typeof u.vocabulary=="boolean"?u:go,[f,d,h,x,p,g,y,S,A,T,I,N,R,O,H,U,B]=await Promise.all([c.vocabulary?Rs(l):[],c.reading?jo(l):[],c.reading?wd(l):[],c.lesson||c.writing?dd(l):[],c.speaking?pd(l):[],c.speaking?fd(l):[],c.speaking?md(l):[],c.speaking?hd(l):[],c.speaking?gd(l):[],c.writing?yd(l):[],c.writing?xd(l):[],c.writing?Di(l):[],c.lesson?bd(l):[],c.lesson?vd(l):[],c.listening?Sd(l):[],c.wordBook?Bi(l):[],c.planning?Nd(l):[]]),L=localStorage.getItem("vocab_pro_mimic_practice_queue"),Y=localStorage.getItem("vocab_pro_adventure_chapters"),Q=localStorage.getItem("vocab_pro_custom_badges"),V=localStorage.getItem("reading_books_shelves"),C=localStorage.getItem("vocab_pro_system_config");return{v:8,ca:new Date().toISOString(),user:gg(o),vocab:f.map(X=>Pa(X)),u:d,pl:x,st:p,sl:g,wt:T,wl:I,iv:R,lessons:O,listeningItems:H,nativeSpeakItems:y.map(X=>Pa(X)),conversationItems:S.map(X=>Pa(X)),freeTalkItems:A.map(X=>Pa(X)),compositions:N,mimicQueue:L?JSON.parse(L):[],wordBooks:U.map(X=>Pa(X)),readingBooks:h,pg:B,adv:{ch:Y?JSON.parse(Y):null,b:Q?JSON.parse(Q):null},readingShelves:V?JSON.parse(V):null,settings:C?JSON.parse(C):null}},D2=async(l,o)=>{const u={v:8,ca:new Date().toISOString(),u:l,user:{id:o}},c=new Blob([JSON.stringify(u,null,2)],{type:"application/json"}),f=URL.createObjectURL(c),d=document.createElement("a");d.href=f,d.download=`vocab-pro-units-${new Date().toISOString().split("T")[0]}.json`,d.click(),URL.revokeObjectURL(f)},_1={initialEasy:4,initialHard:1,easyEasy:2.5,hardEasy:2,hardHard:1.3,easyHardPenalty:.5,forgotInterval:1},T1={host:"localhost",port:3e3,useCustomUrl:!1,customUrl:"",backupPath:"backups"},C1={mode:"system",preferredSystemVoice:"",appliedAccent:"US"},k1={max_learn_per_day:10,max_review_per_day:10},O1={preferredTypes:[]},I1={topic1Options:["Grammar","Vocabulary","Pronunciation"],topic2Options:{Grammar:["Tenses","Conditionals","Passive Voice","Reported Speech"],Vocabulary:["Topic: Work","Topic: Environment","Collocations","Idioms"],Pronunciation:["Vowel Sounds","Consonant Sounds","Intonation"]}},R1={autoBackupEnabled:!1,autoBackupInterval:60,lastSyncTime:null},km={server:T1,ai:{enableGeminiApi:!0,modelForComplexTasks:"gemini-3-pro-preview",modelForBasicTasks:"gemini-3-flash-preview",modelForTts:"gemini-2.5-flash-preview-tts"},srs:_1,audio:C1,audioCoach:{activeCoach:"female",coaches:{male:{name:"Victor",avatar:"man_teacher",persona:"professional_professor",enVoice:"",enAccent:"en_US",viVoice:"",viAccent:"vi_VN"},female:{name:"Sofia",avatar:"woman_teacher",persona:"friendly_elementary",enVoice:"",enAccent:"en_US",viVoice:"",viAccent:"vi_VN"}}},dailyGoals:k1,interface:{studyBuddyLanguage:"vi",buddyVoiceEnabled:!1,studyBuddyAvatar:"woman_teacher",junkTags:["ielts","general","common"],rightClickCommandEnabled:!0},test:O1,lesson:I1,sync:R1},bg="vocab_pro_system_config";function Qu(l){return l&&typeof l=="object"&&!Array.isArray(l)}function vg(l,o){const u={...l};return Qu(l)&&Qu(o)&&Object.keys(o).forEach(c=>{Qu(o[c])?c in l?u[c]=vg(l[c],o[c]):Object.assign(u,{[c]:o[c]}):u[c]=o[c]}),u}const fa=l=>l.server.useCustomUrl&&l.server.customUrl?l.server.customUrl.replace(/\/$/,""):`https://${l.server.host}:${l.server.port}`;function xt(){const l=localStorage.getItem(bg),o=l?JSON.parse(l):null;if(!o)return km;const u=vg(km,o);return o.audio&&o.audio.serverPort&&o.audio.serverUrl,u}function xo(l,o=!1){try{localStorage.setItem(bg,JSON.stringify(l)),window.dispatchEvent(new Event("config-updated")),o||window.dispatchEvent(new Event("vocab-pro-trigger-backup"))}catch(u){console.error("Failed to save system config.",u)}}const M1=["i:","","u:","","","e","",":","",":","e","","s","","t","d","","","t","d","n","l","","v","w"],L1=l=>!l||l.length<2?!1:M1.some(o=>{if(o==="t"||o==="d")return l.includes(o);const u=o.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");let c;return o==="d"?c=new RegExp(`${u}(?!)`):o==="t"?c=new RegExp(`${u}(?!)`):o===""?c=new RegExp(`(?<!t)${u}`):o===""?c=new RegExp(`(?<!d)${u}`):o===""?c=new RegExp(`(?<![ae])${u}`):o===""?c=new RegExp(`(?<![a])${u}`):o==="e"?c=new RegExp(`${u}(?!)`):c=new RegExp(u),c.test(l)}),Qa=l=>{if(l.quality!==tt.VERIFIED||!l.lastReview)return[];const o=[];if(l.collocationsArray&&l.collocationsArray.some(u=>!u.isIgnored)&&o.push("COLLO_CONNECT"),l.idiomsList&&l.idiomsList.some(u=>!u.isIgnored)&&o.push("IDIOM_CONNECT"),l.word&&l.meaningVi&&l.meaningVi.trim().length>0&&o.push("MEANING_MATCH"),l.ipaUs&&L1(l.ipaUs)&&o.push("IPA_SORTER"),l.example&&l.example.trim().split(/\s+/).filter(Boolean).length>=5&&o.push("SENTENCE_SCRAMBLE"),l.example&&l.prepositions&&l.prepositions.some(u=>!u.isIgnored)&&o.push("PREPOSITION_POWER"),l.example&&l.wordFamily){const u=[...l.wordFamily.nouns||[],...l.wordFamily.verbs||[],...l.wordFamily.adjs||[],...l.wordFamily.advs||[]].filter(f=>!f.isIgnored).map(f=>f.word.toLowerCase());u.push(l.word.toLowerCase()),new Set(u).size>=2&&o.push("WORD_TRANSFORMER")}return l.paraphrases&&l.paraphrases.filter(u=>!u.isIgnored&&u.context&&u.context.trim()).length>=2&&o.push("PARAPHRASE_CONTEXT"),o};function Om(l,o){const u=.95+Math.random()*.1,c=Math.max(1,o*u),f=new Date(l);return f.setHours(0,0,0,0),f.setDate(f.getDate()+Math.round(c)),f.getTime()}function Sg(l,o){const u=xt().srs,c={...l},f=Date.now();if(o===Fe.LEARNED)c.consecutiveCorrect=1,c.interval=u.initialHard,c.nextReview=Om(f,u.initialHard);else{let d=l.interval||0,h=1;const x=1440*60*1e3,p=l.lastReview||f,g=Math.max(0,(f-p)/x),y=g>d;if(o===Fe.FORGOT)h=u.forgotInterval,c.consecutiveCorrect=0,c.forgotCount+=1;else if(o===Fe.HARD)l.lastGrade===Fe.EASY?h=Math.max(1,Math.floor(d*u.easyHardPenalty)):h=d===0?u.initialHard:Math.max(1,Math.floor(d*u.hardHard)),c.consecutiveCorrect+=1;else if(o===Fe.EASY){let S=d;y&&(S=Math.max(d,g)),l.lastGrade===Fe.HARD?h=d===0?u.initialEasy:Math.max(u.initialEasy,Math.floor(S*u.hardEasy)):h=d===0?u.initialEasy:Math.max(u.initialEasy,Math.floor(S*u.easyEasy)),c.consecutiveCorrect+=1}c.interval=Math.round(h),c.nextReview=Om(f,c.interval)}return c.lastGrade=o,c.lastReview=f,c.updatedAt=f,c.complexity=Za(c),c.masteryScore=Gt(c),c.gameEligibility=Qa(c),c}function wg(l){const o=Date.now(),u={...l,nextReview:o,interval:0,easeFactor:2.5,consecutiveCorrect:0,forgotCount:0,lastGrade:void 0,lastReview:void 0,updatedAt:o,lastXpEarnedTime:void 0,lastTestResults:{}};return u.complexity=Za(u),u.masteryScore=Gt(u),u.gameEligibility=Qa(u),u}function U1(l){const o=Date.now(),u=l-o,c=1440*60*1e3;if(u<=0)return{label:"DUE",urgency:"due"};const f=Math.ceil(u/c);return{label:`${f}d`,urgency:f<=1?"soon":"later"}}function Ng(l,o,u,c,f,d,h=!1,x=!1,p=!1,g=!1,y=!1,S="manual"){const A=Date.now(),T={id:crypto.randomUUID?crypto.randomUUID():"id-"+Date.now()+"-"+Math.random().toString(36).substr(2,9),userId:"",word:l.trim(),ipaUs:o.trim(),meaningVi:u.trim(),example:c.trim(),note:f,groups:d,isIdiom:h,isPhrasalVerb:x,isCollocation:p,isStandardPhrase:g,isPassive:y,register:"raw",quality:tt.RAW,source:S,isExampleLocked:!1,createdAt:A,updatedAt:A,nextReview:A,interval:0,easeFactor:2.5,consecutiveCorrect:0,forgotCount:0,lastTestResults:{}};return T.complexity=Za(T),T.masteryScore=Gt(T),T.gameEligibility=Qa(T),T}function Ed(l){const o=[];if(o.push({key:"spelling",testKeys:["SPELLING"]}),l.ipaUs&&o.push({key:"pronunciation",testKeys:["PRONUNCIATION"]}),l.ipaUs&&l.ipaUs.trim()&&l.ipaMistakes&&l.ipaMistakes.length>0&&o.push({key:"ipa_recognition",testKeys:["IPA_QUIZ"]}),l.meaningVi&&l.meaningVi.trim()&&o.push({key:"meaning",testKeys:["MEANING_QUIZ"]}),l.example&&l.example.trim()&&o.push({key:"context",testKeys:["SENTENCE_SCRAMBLE"]}),l.collocationsArray&&l.collocationsArray.filter(u=>!u.isIgnored&&u.d&&u.d.trim()).forEach(u=>{const c=u.text;o.push({key:`colloc:${c}`,testKeys:[`COLLOCATION_QUIZ:${c}`,`COLLOCATION_MULTICHOICE_QUIZ:${c}`,`COLLOCATION_CONTEXT_QUIZ:${c}`]})}),l.idiomsList&&l.idiomsList.filter(u=>!u.isIgnored&&u.d&&u.d.trim()).forEach(u=>{const c=u.text;o.push({key:`idiom:${c}`,testKeys:[`IDIOM_QUIZ:${c}`,`IDIOM_CONTEXT_QUIZ:${c}`]})}),l.prepositions&&l.prepositions.filter(u=>!u.isIgnored).forEach(u=>{const c=u.prep;o.push({key:`prep:${c}`,testKeys:[`PREPOSITION_QUIZ:${c}`]})}),l.paraphrases&&l.paraphrases.filter(u=>!u.isIgnored&&u.context&&u.context.trim()).forEach(u=>{const c=u.word;o.push({key:`para:${c}`,testKeys:[`PARAPHRASE_QUIZ:${c}`,`PARAPHRASE_CONTEXT_QUIZ:${c}`]})}),l.wordFamily){const u=["nouns","verbs","adjs","advs"],c={nouns:"n",verbs:"v",adjs:"j",advs:"d"},f=l.word.toLowerCase(),d=u.flatMap(h=>{const x=l.wordFamily[h];return Array.isArray(x)?x.filter(p=>!p.isIgnored&&p.word):[]});d.length===1&&d[0].word.toLowerCase()===f||u.forEach(h=>{const x=l.wordFamily[h];Array.isArray(x)&&x.filter(p=>!p.isIgnored&&p.word).forEach(p=>{const g=p.word,y=c[h];o.push({key:`fam:${y}:${g}`,testKeys:[`WORD_FAMILY:${y}:${g}`]})})})}return o}function Za(l){return Ed(l).length}function Gt(l){const o=Ed(l);if(o.length===0)return 0;const u=l.lastTestResults||{};let c=0;const f=[],d=[];o.forEach(x=>{x.testKeys.length>0&&x.testKeys.some(g=>u[g]===!0)?(c++,f.push(x.key)):d.push({key:x.key,reason:`None of [${x.testKeys.join(", ")}] passed.`})});const h=Math.round(c/o.length*100);return Math.max(0,Math.min(100,h))}let ks=!1,fo=!1,Bt=new Map,Cn=new Set,sl=new Set,Ml=new Map,Li=null,jg={reviewCounts:{total:0,due:0,new:0,learned:0,mastered:0,statusForgot:0,statusHard:0,statusEasy:0,statusLearned:0},dashboardStats:{categories:{vocab:{total:0,learned:0},idiom:{total:0,learned:0},phrasal:{total:0,learned:0},colloc:{total:0,learned:0},phrase:{total:0,learned:0},preposition:{total:0,learned:0}},refinedCount:0,rawCount:0},dayProgress:{learned:0,reviewed:0,learnedWords:[],reviewedWords:[]}};function Ye(){localStorage.setItem("vocab_pro_local_last_modified",String(Date.now()))}let Nn=null,nl=null;async function Im(){Nn&&(clearTimeout(Nn),Nn=null),nl&&(clearTimeout(nl),nl=null);try{const l=Array.from(Bt.values()),o=JSON.stringify(l);if(localStorage.setItem("vocab_pro_emergency_backup",o),Li){const u=(await Cs()).find(c=>c.id===Li);u&&await po(Li,u)}}catch(l){console.warn("[DataStore] Backup failed:",l)}}function Rm(){Nn&&(clearTimeout(Nn),Nn=null),nl&&(clearTimeout(nl),nl=null)}function qe(){if(window.isRestoring)return;const o=(xt().sync.autoBackupInterval||60)*1e3,u=Math.max(o*3,3e5);Nn&&clearTimeout(Nn);const c=Date.now()+o;window.dispatchEvent(new CustomEvent("backup-scheduled",{detail:{targetTime:c}})),Nn=window.setTimeout(Im,o),nl||(nl=window.setTimeout(()=>{Im()},u))}function zl(l){const o=Date.now(),c=Array.from(Bt.values()).filter(L=>!L.isPassive&&L.userId===l),f=c.length,d=c.filter(L=>L.lastReview&&L.nextReview<=o&&L.quality!==tt.FAILED).length,h=c.filter(L=>!L.lastReview&&L.quality===tt.VERIFIED).length,x=c.filter(L=>L.interval>21).length,p=c.filter(L=>!!L.lastReview&&L.interval<=21),g=p.length,y=p.filter(L=>L.lastGrade===Fe.FORGOT).length,S=p.filter(L=>L.lastGrade===Fe.HARD).length,A=p.filter(L=>L.lastGrade===Fe.EASY).length,T=p.filter(L=>L.lastGrade===Fe.LEARNED).length,I=c.filter(L=>L.quality===tt.REFINED).length,N=c.filter(L=>L.quality===tt.RAW).length,R={vocab:{total:0,learned:0},idiom:{total:0,learned:0},phrasal:{total:0,learned:0},colloc:{total:0,learned:0},phrase:{total:0,learned:0},preposition:{total:0,learned:0}};c.forEach(L=>{const Y=!!L.lastReview,Q=V=>{R[V].total++,Y&&R[V].learned++};L.isIdiom&&Q("idiom"),L.isPhrasalVerb&&Q("phrasal"),L.isCollocation&&Q("colloc"),L.isStandardPhrase&&Q("phrase"),L.prepositions&&L.prepositions.length>0&&!L.isPhrasalVerb&&Q("preposition"),!L.isIdiom&&!L.isPhrasalVerb&&!L.isCollocation&&!L.isStandardPhrase&&Q("vocab")});const O=new Date;O.setHours(0,0,0,0);const H=O.getTime(),U=[],B=[];c.forEach(L=>{L.lastReview&&L.lastReview>=H&&L.lastReviewSessionType!=="boss_battle"&&(L.lastGrade===Fe.LEARNED?U.push(L):B.push(L))}),jg={reviewCounts:{total:f,due:d,new:h,learned:g,mastered:x,statusForgot:y,statusHard:S,statusEasy:A,statusLearned:T},dashboardStats:{categories:R,refinedCount:I,rawCount:N},dayProgress:{learned:U.length,reviewed:B.length,learnedWords:U,reviewedWords:B}}}let io=null;function Ge(){io&&clearTimeout(io),io=window.setTimeout(()=>{window.dispatchEvent(new CustomEvent("datastore-updated")),io=null},100)}let Mm=0;const nt=()=>{const l=Date.now();return l-Mm<1e3?(window.dispatchEvent(new CustomEvent("datastore-cooldown")),!1):(Mm=l,!0)};typeof window<"u"&&window.addEventListener("vocab-pro-trigger-backup",()=>{ks&&(Ge(),qe())});async function Eg(l){if(!(ks||fo)){fo=!0,Li=l;try{let o=await Rs(l);if(o.length===0){const d=localStorage.getItem("vocab_pro_emergency_backup");if(d)try{const h=JSON.parse(d);Array.isArray(h)&&h.length>0&&(await Rl(h),o=await Rs(l))}catch(h){console.error("[DataStore] Failed to restore from emergency backup:",h)}}const[u,c]=await Promise.all([Di(l),Bi(l)]);Cn.clear(),u.forEach(d=>{(d.linkedWordIds||[]).forEach(h=>Cn.add(h))}),sl.clear(),Ml.clear(),c.forEach(d=>{const h=new Set;(d.words||[]).forEach(x=>{const p=x.word.toLowerCase();sl.add(p),h.add(p)}),Ml.set(d.id,h)});const f=[];for(const d of o){let h=!1;const x=d.ipa;x&&!d.ipaUs&&(d.ipaUs=x,delete d.ipa,h=!0),x&&d.ipaUs&&(delete d.ipa,h=!0),d.needsPronunciationFocus!==void 0&&(delete d.needsPronunciationFocus,h=!0);const p=Za(d),g=Gt(d),y=Qa(d);d.complexity!==p&&(d.complexity=p,h=!0),d.masteryScore!==g&&(d.masteryScore=g,h=!0),JSON.stringify(d.gameEligibility)!==JSON.stringify(y)&&(d.gameEligibility=y,h=!0),typeof d.register>"u"&&(d.register="raw",h=!0),h&&f.push(d)}f.length>0&&await Rl(f),Bt=new Map(o.map(d=>[d.id,d])),zl(l),ks=!0}catch(o){console.error("DataStore initialization failed:",o),ks=!1}finally{fo=!1}}}async function Ag(l){ks=!1,fo=!1,Bt.clear(),Cn.clear(),sl.clear(),Ml.clear(),await Eg(l),Ge()}async function _g(){Bt.clear(),Cn.clear(),sl.clear(),Ml.clear(),ks=!1,Li=null,await ph();const l=["vocab_pro_system_config","gemini_api_keys"],o=[];for(let u=0;u<localStorage.length;u++){const c=localStorage.key(u);c&&!l.includes(c)&&o.push(c)}o.forEach(u=>localStorage.removeItem(u)),sessionStorage.clear()}async function Tg(l){try{const o=await Di(l);Cn.clear(),o.forEach(u=>{(u.linkedWordIds||[]).forEach(c=>Cn.add(c))}),Ge()}catch(o){console.error("Failed to refresh composition index",o)}}async function z1(l){try{const o=await Bi(l);sl.clear(),Ml.clear(),o.forEach(u=>{const c=new Set;(u.words||[]).forEach(f=>{const d=f.word.toLowerCase();sl.add(d),c.add(d)}),Ml.set(u.id,c)}),Ge()}catch(o){console.error("Failed to refresh word book index",o)}}function D1(l){return Cn.has(l)}function B2(){return Cn}function H2(){return sl}function Cg(){return jg}function Ms(){return Array.from(Bt.values())}function Lm(l){return Bt.get(l)}function q2(l,o,u,c="",f=["all"],d="all",h="all",x="all",p="all",g=null,y="all",S="all",A=""){const T=Array.from(Bt.values()).filter(U=>U.userId===l);let I=T;if(f.includes("duplicate")){const U=new Map;T.forEach(L=>{const Y=L.word.toLowerCase().trim();U.set(Y,(U.get(Y)||0)+1)});const B=new Set;for(const[L,Y]of U.entries())Y>1&&B.add(L);I=I.filter(L=>B.has(L.word.toLowerCase().trim()))}const N=f.filter(U=>U!=="duplicate");let R=null;S==="specific"&&A&&(R=Ml.get(A)||null);const O=I.filter(U=>gh(U,c,N,d,h,x,p,g,y,Cn,S==="specific"?"all":S,sl)?S==="specific"&&R?R.has(U.word.toLowerCase()):!0:!1);f.includes("duplicate")?O.sort((U,B)=>U.word.localeCompare(B.word)||U.createdAt-B.createdAt):O.sort((U,B)=>B.createdAt-U.createdAt);const H=o*u;return{words:O.slice(H,H+u),totalCount:O.length}}async function ad(l,o){return mh(l,o)}async function B1(l,o){nt()&&(Ye(),l.complexity=Za(l),l.masteryScore=Gt(l),l.gameEligibility=Qa(l),await yh(l,o),Bt.set(l.id,l),zl(l.userId),qe(),Ge())}async function G2(l,o){nt()&&(Ye(),l&&(l.complexity=Za(l),l.masteryScore=Gt(l),l.gameEligibility=Qa(l)),await bh(l,o),l&&Bt.set(l.id,l),qe(),zl(o.userId),Ge())}async function Eo(l){nt()&&(Ye(),l.complexity=Za(l),l.masteryScore=Gt(l),l.gameEligibility=Qa(l),await vh(l),Bt.set(l.id,l),zl(l.userId),qe(),Ge())}async function H1(l){l.length!==0&&(Ye(),l.forEach(o=>{o.complexity=Za(o),o.masteryScore=Gt(o),o.gameEligibility=Qa(o)}),await Rl(l),l.forEach(o=>Bt.set(o.id,o)),l[0]&&zl(l[0].userId),qe(),Ge())}async function q1(l){const o=Bt.get(l);!o||!nt()||(Ye(),await Sh(l),Bt.delete(l),zl(o.userId),qe(),Ge())}async function G1(l){if(l.length===0)return;const o=Bt.get(l[0]);o&&(Ye(),await wh(l),l.forEach(u=>Bt.delete(u)),zl(o.userId),qe(),Ge())}async function V2(l){nt()&&(Ye(),await Nh(l),qe(),Ge())}async function Q2(l){nt()&&(Ye(),await Kh(l),await Tg(l.userId),qe())}async function Z2(l,o){Ye(),await Wh(l),await Tg(o),qe()}async function Y2(l){nt()&&(Ye(),await Fh(l),await z1(l.userId),qe())}async function X2(l){nt()&&(Ye(),await Th(l),qe(),Ge())}async function K2(l){nt()&&(Ye(),await Ch(l),qe(),Ge())}async function W2(l){nt()&&(Ye(),await Oh(l),qe(),Ge())}async function $2(l){nt()&&(Ye(),await Ih(l),qe(),Ge())}async function F2(l){nt()&&(Ye(),await Mh(l),qe(),Ge())}async function P2(l){nt()&&(Ye(),await Lh(l),qe(),Ge())}async function J2(l){nt()&&(Ye(),await Gh(l),qe(),Ge())}async function eS(l){nt()&&(Ye(),await Vh(l),qe(),Ge())}async function tS(l){nt()&&(Ye(),await Zh(l),qe(),Ge())}async function aS(l){nt()&&(Ye(),await Yh(l),qe(),Ge())}async function nS(l){nt()&&(Ye(),await Dh(l),qe(),Ge())}async function lS(l){nt()&&(Ye(),await Bh(l),qe(),Ge())}async function sS(l){nt()&&(Ye(),await eg(l),qe(),Ge())}async function iS(l){nt()&&(Ye(),await tg(l),qe(),Ge())}async function rS(l){nt()&&(Ye(),await ag(l),qe(),Ge())}async function oS(l){nt()&&(Ye(),await ng(l),qe(),Ge())}async function cS(l){nt()&&(Ye(),await ig(l),qe(),Ge())}async function uS(l){nt()&&(Ye(),await rg(l),qe(),Ge())}async function dS(l){nt()&&(Ye(),await lg(l),qe(),Ge())}async function fS(l){nt()&&(Ye(),await sg(l),qe(),Ge())}async function pS(l){nt()&&(Ye(),await og(l),qe(),Ge())}async function mS(l){nt()&&(Ye(),await cg(l),qe(),Ge())}const{getUnitsContainingWord:V1,seedDatabaseIfEmpty:Q1,clearVocabularyOnly:kg,bulkSavePlanningGoals:hS}=p1,Z1={user:!0,vocabulary:!0,lesson:!0,reading:!0,writing:!0,speaking:!0,listening:!0,mimic:!0,wordBook:!0,planning:!0},po=async(l,o,u=!1)=>{if(window.isRestoring)return;const c=xt();if(!c.sync.autoBackupEnabled&&!u)return;const f=fa(c);try{const d=await X1(l,o),h=JSON.stringify(d),x=(new Blob([h]).size/(1024*1024)).toFixed(2),p=o.name?`&username=${encodeURIComponent(o.name)}`:"",g=await fetch(`${f}/api/backup?userId=${encodeURIComponent(l)}${p}&app=vocab`,{method:"POST",headers:{"Content-Type":"application/json"},body:h});if(!g.ok)throw new Error(`Server error: ${g.statusText}`);const y=Date.now(),S={...c};S.sync.lastSyncTime=y,xo(S,!0),localStorage.setItem("vocab_pro_local_last_modified",String(y)),window.dispatchEvent(new CustomEvent("backup-complete",{detail:{success:!0,size:x}}))}catch(d){console.warn("[Backup] Upload failed:",d),window.dispatchEvent(new CustomEvent("backup-complete",{detail:{success:!1}}))}},ro=async()=>{try{const l=xt(),o=fa(l),u=await fetch(`${o}/api/backups?app=vocab`);return u.ok?(await u.json()).backups||[]:[]}catch(l){return console.warn("[Backup] Failed to fetch list:",l),[]}},Og=async l=>{try{const o=xt(),c=`${fa(o)}/api/backup/${encodeURIComponent(l)}?t=${Date.now()}&app=vocab`,f=await fetch(c,{method:"GET",headers:{"Cache-Control":"no-cache"},mode:"cors"});if(!f.ok)return null;const d=await f.blob(),h=new File([d],"restore.json",{type:"application/json"}),x=await yg(h,l,Z1);return x.type==="success"&&x.updatedUser?(await Ag(x.updatedUser.id),x):null}catch(o){return console.error("[Backup] Restore exception:",o),null}},Y1=async l=>{try{const o=xt(),u=fa(o),c=await fetch(`${u}/api/library/lookup`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({words:l})});if(c.ok){const f=await c.json();if(Array.isArray(f.found))return f.found.map(d=>As(d))}return[]}catch(o){return console.warn("[Backup] Library lookup failed:",o),[]}};async function X1(l,o){const[u,c,f,d,h,x,p,g,y,S,A,T,I,N,R,O,H]=await Promise.all([Rs(l),jo(l),wd(l),dd(l),pd(l),fd(l),md(l),hd(l),gd(l),yd(l),xd(l),Di(l),bd(l),vd(l),Sd(l),Bi(l),Nd(l)]),U=localStorage.getItem("vocab_pro_mimic_practice_queue"),B=localStorage.getItem("vocab_pro_adventure_chapters"),L=localStorage.getItem("vocab_pro_custom_badges"),Y=localStorage.getItem("reading_books_shelves"),Q=localStorage.getItem("vocab_pro_system_config");return{v:8,ca:new Date().toISOString(),user:gg(o),vocab:u.map(V=>Pa(V)),u:c,pl:d,st:h,sl:x,wt:S,wl:A,iv:I,lessons:N,listeningItems:R,nativeSpeakItems:p.map(V=>Pa(V)),conversationItems:g.map(V=>Pa(V)),freeTalkItems:y.map(V=>Pa(V)),compositions:T,mimicQueue:U?JSON.parse(U):[],wordBooks:O.map(V=>Pa(V)),readingBooks:f,pg:H,adv:{ch:B?JSON.parse(B):null,b:L?JSON.parse(L):null},readingShelves:Y?JSON.parse(Y):null,settings:Q?JSON.parse(Q):null}}const K1=()=>{const[l,o]=w.useState(null),[u,c]=w.useState(!1),[f,d]=w.useState(!1),h=w.useCallback(async()=>{c(!1),d(!1);const y=localStorage.getItem("vocab_pro_current_user_id"),S=localStorage.getItem("vocab_pro_current_user_name"),A=localStorage.getItem("vocab_pro_auto_restore");let T=(await Cs()).filter(B=>!B.name.toLowerCase().includes("book"));const I=T.length===0,N=A==="true"||I,R=S||y||"Vocab Master";if(N){window.isRestoring=!0;try{const B=await Og(R);B&&B.type==="success"&&(B.backupTimestamp&&localStorage.setItem("vocab_pro_last_backup_timestamp",String(B.backupTimestamp)),T=(await Cs()).filter(L=>!L.name.toLowerCase().includes("book")),B.updatedUser&&(localStorage.setItem("vocab_pro_current_user_id",B.updatedUser.id),localStorage.setItem("vocab_pro_current_user_name",B.updatedUser.name)))}catch{}finally{setTimeout(()=>{window.isRestoring=!1},2e3)}A&&localStorage.removeItem("vocab_pro_auto_restore")}await ud();const O=(await Cs()).filter(B=>!B.name.toLowerCase().includes("book"));let H=null;const U=localStorage.getItem("vocab_pro_current_user_id");if(O.length===1?(H=O[0],d(!0)):U&&O.length>1&&(H=O.find(B=>B.id===U)||null,H&&d(!0)),H){let B=!1;H.adventure?(H.adventure.completedSegmentIds.length===0&&(H.adventure.keys===0||H.adventure.keys===void 0)&&(H.adventure.keys=1,B=!0),H.adventure.map||(H.adventure.map=Mi(100),B=!0)):(H.adventure={currentNodeIndex:0,energy:5,energyShards:0,unlockedChapterIds:Ts.map(L=>L.id),completedSegmentIds:[],segmentStars:{},badges:[],keys:1,keyFragments:0,map:Mi(100)},B=!0),B&&await Aa(H),o(H),localStorage.setItem("vocab_pro_current_user_id",H.id),localStorage.setItem("vocab_pro_current_user_name",H.name)}c(!0)},[]);return w.useEffect(()=>{h()},[h]),{currentUser:l,isLoaded:u,handleLogin:async y=>{y.adventure.map||(y.adventure.map=Mi(100),await Aa(y)),o(y),localStorage.setItem("vocab_pro_current_user_id",y.id),localStorage.setItem("vocab_pro_current_user_name",y.name);const S={...y,lastLogin:Date.now()};Aa(S)},handleLogout:()=>{o(null),localStorage.removeItem("vocab_pro_current_user_id")},handleUpdateUser:async y=>{await Aa(y),o(y),y.id===localStorage.getItem("vocab_pro_current_user_id")&&localStorage.setItem("vocab_pro_current_user_name",y.name)},setCurrentUser:o,shouldSkipAuth:f}},W1=({setView:l,setIsSidebarOpen:o})=>{const[u,c]=w.useState(null),[f,d]=w.useState(null),[h,x]=w.useState(null);w.useEffect(()=>{try{const y=sessionStorage.getItem("vocab_pro_active_session");if(y){const{words:S,type:A}=JSON.parse(y);Array.isArray(S)&&S.length>0&&(c(S),x(A))}}catch(y){console.error("Failed to restore session",y),sessionStorage.removeItem("vocab_pro_active_session")}},[]);const p=w.useCallback((y,S,A=null)=>{if(y.length>0){const I=[...Array.from(new Map(y.map(N=>[N.id,N])).values())].sort(()=>Math.random()-.5);c(I),x(S),d(A),sessionStorage.setItem("vocab_pro_active_session",JSON.stringify({words:I,type:S})),sessionStorage.removeItem("vocab_pro_session_progress"),sessionStorage.removeItem("vocab_pro_session_outcomes"),l("REVIEW"),o(!1)}},[l,o]),g=w.useCallback(()=>{sessionStorage.removeItem("vocab_pro_active_session"),sessionStorage.removeItem("vocab_pro_session_progress"),sessionStorage.removeItem("vocab_pro_session_outcomes"),c(null),x(null),d(null)},[]);return{sessionWords:u,setSessionWords:c,sessionType:h,sessionFocus:f,startSession:p,clearSessionState:g}},_s=l=>l<1?0:l<=5?100+l*50:l<=10?350+(l-5)*100:850+(l-10)*200,$1=[{level:1,title:"Vocab Novice"},{level:5,title:"Word Apprentice"},{level:10,title:"Lexical Explorer"},{level:20,title:"Master Grammarian"},{level:30,title:"IELTS Wordsmith"},{level:50,title:"IELTS Luminary"}],Zu=l=>{let o="Vocab Novice";for(const u of $1)if(l>=u.level)o=u.title;else break;return o},Um=(l,o)=>{let u=0;for(let c=1;c<l;c++)u+=_s(c);return u+=o,u},F1=({currentUser:l,onUpdateUser:o,onSaveWordAndUser:u})=>{const[c,f]=w.useState(null),{showToast:d}=Ul(),h=w.useRef(l);w.useEffect(()=>{h.current=l},[l]);const x=w.useCallback(async(y,S,A,T)=>{const I=h.current;if(!I)return 0;let N=y;if(S){const F=Date.now(),K=new Date(F).toDateString();if(S.lastXpEarnedTime&&new Date(S.lastXpEarnedTime).toDateString()===K)return 0;if(T&&T.tested>0){const ie=T.correct/T.tested;N*=1+(ie-.7)}A===Fe.EASY&&(N*=1.1),A===Fe.FORGOT&&(N*=.1),N=Math.round(Math.max(5,N)),S.lastXpEarnedTime=F}const O=Um(I.level,I.experience)+Math.round(N);let H=1,U=O,B=_s(H);for(;U>=B;)U-=B,H++,B=_s(H);const L=Math.floor(U),Y=I.level,Q=H>Y,V=Zu(H),C={...I,experience:L,level:H,peakLevel:Math.max(I.peakLevel||Y,H),role:V};let X=!1;if(!S&&y>0&&Math.random()<.2){const F={...C.adventure};F.keyFragments=(F.keyFragments||0)+1,d("You found a Key Fragment! ","success",2e3),F.keyFragments>=3&&(F.keyFragments-=3,F.keys=(F.keys||0)+1,X=!0),C.adventure=F}return S?await u(S,C):await o(C),X&&d(" Key Fragments assembled into a Magic Key!","success",4e3),f({amount:Math.round(N),levelUp:Q,newLevel:Q?H:null}),setTimeout(()=>f(null),Q?5e3:2e3),Q&&d(` Level Up to ${H}! New title: "${V}"`,"success",5e3),Math.round(N)},[o,u,d]),p=w.useCallback(async y=>{const S=h.current;if(!S)return;const A=Um(S.level,S.experience),T=y-A;if(T===0)return;let I=1,N=y,R=_s(I);for(;N>=R;)N-=R,I++,R=_s(I);const O=Math.floor(N),H=S.level,U=S.peakLevel||H,B=Math.max(U,I),L=Zu(I),Y=I>H,Q=I>U,V=L!==Zu(U),C={...S,experience:O,level:I,peakLevel:B,role:L};if(Q){let X=1,F=!1,K=` New Peak Level: ${I}! +1 Key Fragment`;for(V&&(X++,K=`New Title: "${L}"! +2 Key Fragments`),C.adventure.keyFragments=(C.adventure.keyFragments||0)+X;C.adventure.keyFragments>=3;)C.adventure.keyFragments-=3,C.adventure.keys=(C.adventure.keys||0)+1,F=!0;d(K,"success",6e3),F&&d(" Key Fragments assembled into a Magic Key!","success",4e3)}else if(Y)d(` Level Up to ${I}!`,"success",4e3);else if(T!==0){const X=T>0?"+":"";d(`XP Recalculated: ${X}${T} XP`,"info",2e3)}await o(C),f({amount:T,levelUp:Y,newLevel:Y?I:null}),setTimeout(()=>f(null),Y?5e3:2e3)},[d,o]),g=w.useMemo(()=>l?_s(l.level):0,[l]);return{recalculateXpAndLevelUp:p,gainExperienceAndLevelUp:x,xpGained:c,xpToNextLevel:g}};function Ao(l,o){try{const u=localStorage.getItem(l);if(u)return JSON.parse(u)}catch(u){console.error(`Error parsing JSON from localStorage for key "${l}":`,u)}return o}function Ig(l,o){try{localStorage.setItem(l,JSON.stringify(o))}catch(u){console.error(`Error saving JSON to localStorage for key "${l}":`,u)}}const P1="vocab_pro_adventure_chapters";function J1(){return Ao(P1,Ts)}const ev=({currentUser:l,view:o,onUpdateUser:u})=>{const[c,f]=w.useState({total:0,due:0,new:0,learned:0}),[d,h]=w.useState(null),[x,p]=w.useState(null),[g,y]=w.useState(!1),[S,A]=w.useState({count:0,date:""}),{showToast:T}=Ul(),I=w.useCallback(async()=>{if(!l)return;await Eg(l.id);const O=Cg();f(O.reviewCounts);const H=Ms().filter(V=>V.userId===l.id),B=H.filter(V=>!V.isPassive).filter(V=>V.quality===tt.VERIFIED);let L=null;if(x)L=x;else if(B.length>0){const V=new Date().toISOString().slice(0,10).replace(/-/g,""),C=l.id.length>4&&parseInt(l.id.substring(l.id.length-4),16)||1234,F=(parseInt(V)+C)%B.length;L=B[F]}h(L),y(L?D1(L.id):!1);const Y=J1(),Q=l.adventure;if(Q){const V=new Map(H.map(ie=>[ie.word.toLowerCase(),ie]));let C={...Q},X=!1,F=!1;const K=new Date().toISOString().split("T")[0];for(const ie of Y)for(const ge of ie.segments){if(!C.completedSegmentIds.includes(ge.id))continue;let oe=C.segmentStars[ge.id]||0;const _=(W,J)=>{C.segmentStars[ge.id]=W,C.keyFragments=(C.keyFragments||0)+1,X=!0,T(J,"success",5e3),!F&&l.adventureLastDailyStar!==K&&(C.keyFragments++,F=!0,T("Bonus: First star of the day! (+1 Key Fragment)","success",6e3))};oe<3&&(oe<1&&ge.basicWords.length>0&&ge.basicWords.every(W=>{var J;return(((J=V.get(W.toLowerCase()))==null?void 0:J.consecutiveCorrect)??0)>0})&&(_(1,` 1-Star Mastery for "${ge.title}"! (+1 Key Fragment)`),oe=1),oe===1&&ge.intermediateWords.length>0&&ge.intermediateWords.every(W=>{var J;return(((J=V.get(W.toLowerCase()))==null?void 0:J.consecutiveCorrect)??0)>0})&&(_(2,` 2-Star Mastery for "${ge.title}"! (+1 Key Fragment)`),oe=2),oe===2&&ge.advancedWords.length>0&&ge.advancedWords.every(W=>{var J;return(((J=V.get(W.toLowerCase()))==null?void 0:J.consecutiveCorrect)??0)>0})&&_(3,` Boss unlocked for "${ge.title}"! (+1 Key Fragment)`))}if(X){for(;C.keyFragments>=3;)C.keyFragments-=3,C.keys=(C.keys||0)+1,T(" Key Fragments assembled into a Magic Key!","success",4e3);const ie={...l,adventure:C,adventureLastDailyStar:F?K:l.adventureLastDailyStar};u(ie)}}},[l,T,u,x]);w.useEffect(()=>{x&&I()},[x]),w.useEffect(()=>{l&&I();const O=()=>{T("Saving too quickly. Please wait.","info",1500)};return window.addEventListener("datastore-updated",I),window.addEventListener("datastore-cooldown",O),()=>{window.removeEventListener("datastore-updated",I),window.removeEventListener("datastore-cooldown",O)}},[l,I,T]);const N=w.useCallback(()=>{const O=new Date().toISOString().split("T")[0];let H=Ao("vocab_pro_api_usage",{count:0,date:"1970-01-01"});H.date!==O&&(H={count:0,date:O}),A(H)},[]);return w.useEffect(()=>(N(),window.addEventListener("apiUsageUpdated",N),()=>{window.removeEventListener("apiUsageUpdated",N)}),[N]),{stats:c,wotd:d,setWotd:h,apiUsage:S,refreshGlobalStats:I,isWotdComposed:g,randomizeWotd:()=>{if(!l)return;const H=Ms().filter(U=>U.userId===l.id).filter(U=>!U.isPassive&&U.quality===tt.VERIFIED);if(H.length>0){const U=H[Math.floor(Math.random()*H.length)];p(U)}}}},tv=l=>{const{currentUser:o,setView:u,refreshGlobalStats:c,sessionWords:f,setSessionWords:d,globalViewWord:h,setGlobalViewWord:x,onUpdateUser:p}=l,{showToast:g}=Ul(),y=()=>{var F;const Q=Number(localStorage.getItem("vocab_pro_last_backup_timestamp"))||0,C=((F=xt().sync)==null?void 0:F.lastSyncTime)||0,X=Math.max(Q,C);return X>0?X:null},[S,A]=w.useState(y()),T=w.useCallback(()=>{A(y())},[]),I=async Q=>{if(!o)return;const V=Q||{vocabulary:!0,lesson:!0,reading:!0,writing:!0,speaking:!0,listening:!0,wordBook:!0,planning:!0},C=await A1(o.id,o,V),X=new Blob([JSON.stringify(C,null,2)],{type:"application/json"}),F=URL.createObjectURL(X),K=document.createElement("a");K.href=F,K.download=`vocab-pro-backup-${new Date().toISOString().slice(0,10)}.json`,document.body.appendChild(K),K.click(),document.body.removeChild(K),URL.revokeObjectURL(F);const ie=Date.now();localStorage.setItem("vocab_pro_last_backup_timestamp",String(ie)),localStorage.setItem("vocab_pro_local_last_modified",String(ie)),T(),sessionStorage.removeItem("vocab_pro_just_restored"),g("Backup file downloaded.","success")},N=async(Q,V,C)=>{Rm();const X=xt();if(V)try{const ie=JSON.parse(V),ge={...X,server:ie.server};localStorage.setItem("vocab_pro_system_config",JSON.stringify(ge)),window.dispatchEvent(new Event("config-updated"))}catch(ie){console.error("[Restore] Failed to merge config",ie)}sessionStorage.setItem("vocab_pro_just_restored","true");const F=C||Q.backupTimestamp||Date.now();localStorage.setItem("vocab_pro_last_backup_timestamp",String(F)),localStorage.setItem("vocab_pro_local_last_modified",String(F));const K=xt();xo({...K,sync:{...K.sync,lastSyncTime:F}},!0),Q.updatedUser&&(localStorage.setItem("vocab_pro_current_user_id",Q.updatedUser.id),localStorage.setItem("vocab_pro_current_user_name",Q.updatedUser.name),await p(Q.updatedUser)),g("Restore successful!","success",2e3),c(),window.dispatchEvent(new Event("vocab-pro-restore-complete")),window.dispatchEvent(new Event("vocab-pro-force-ui-reload")),setTimeout(()=>{window.isRestoring=!1},1e3)};return{lastBackupTime:S,refreshBackupTime:T,handleBackup:I,restoreFromServerAction:async(Q,V)=>{const C=xt(),X=JSON.stringify(C);window.isRestoring=!0,Rm();try{const F=Q||(o?o.name||o.id:null);if(!F){window.isRestoring=!1;return}await _g(),X&&(localStorage.setItem("vocab_pro_system_config",X),window.dispatchEvent(new Event("config-updated")));const K=await Og(F);K&&K.type==="success"?await N(K,X,V):(g("Server restore failed. Manual restore may be required.","error"),window.isRestoring=!1)}catch(F){console.error("[DataActions] Restore error:",F),g("Restore encountered a fatal error.","error"),window.isRestoring=!1}},triggerLocalRestore:()=>{const Q=xt(),V=JSON.stringify(Q),C=document.createElement("input");C.type="file",C.accept=".json",C.style.display="none",C.onchange=async X=>{var F;C.parentNode&&C.parentNode.removeChild(C);try{const K=(F=X.target.files)==null?void 0:F[0];if(!K)return;const ie={user:!0,vocabulary:!0,lesson:!0,reading:!0,writing:!0,speaking:!0,listening:!0,mimic:!0,wordBook:!0,planning:!0};window.isRestoring=!0;const ge=o?o.id:"temp-restore",oe=await yg(K,ge,ie);oe.type==="success"?(await N(oe,V),setTimeout(()=>window.location.reload(),1e3)):(g(`Restore failed: ${oe.message}`,"error",5e3),window.isRestoring=!1)}catch(K){console.error("Fatal error during local restore:",K),window.isRestoring=!1}},document.body.appendChild(C),C.click()},handleLibraryReset:async()=>{if(o)try{await kg(),sessionStorage.removeItem("vocab_pro_skip_seed"),await Q1(!0),await Ag(o.id),c(),u("DASHBOARD")}catch{window.location.reload()}},updateWord:async Q=>{await Eo(Q),f&&d(V=>(V||[]).map(C=>C.id===Q.id?Q:C)),h&&h.id===Q.id&&(Q.masteryScore=Gt(Q),x(Q))},deleteWord:async Q=>{h&&h.id===Q&&x(null),await q1(Q)},bulkDeleteWords:async Q=>{await G1(Q)},bulkUpdateWords:async Q=>{await H1(Q)}}},av=async(l,o)=>{const u=["localhost","127.0.0.1","macm2.local","macm4.local"],d=[];for(let p=3e3;p<=3020;p++)u.forEach(g=>{d.push({host:g,port:p,url:`http://${g}:${p}`}),d.push({host:g,port:p,url:`https://${g}:${p}`})});const h=async p=>{if(o!=null&&o.aborted)return null;l&&l(p.url);const g=new AbortController,y=setTimeout(()=>g.abort(),1500),S=()=>g.abort();o==null||o.addEventListener("abort",S);try{const A=await fetch(`${p.url}/api/health`,{signal:g.signal,mode:"cors",cache:"no-cache"});return clearTimeout(y),o==null||o.removeEventListener("abort",S),A.ok?p:null}catch{return clearTimeout(y),o==null||o.removeEventListener("abort",S),null}},x=8;for(let p=0;p<d.length;p+=x){if(o!=null&&o.aborted)return null;const g=d.slice(p,p+x),S=(await Promise.all(g.map(h))).find(A=>A!==null);if(S)return{host:S.host,port:S.port}}return null},nv=()=>{const{showToast:l}=Ul(),{currentUser:o,isLoaded:u,handleLogin:c,handleUpdateUser:f,setCurrentUser:d,shouldSkipAuth:h}=K1(),[x,p]=w.useState("AUTH"),[g,y]=w.useState(!1),[S,A]=w.useState(null),[T,I]=w.useState(null),[N,R]=w.useState(!1),[O,H]=w.useState(Date.now()),[U,B]=w.useState("disconnected"),[L,Y]=w.useState(!1),[Q,V]=w.useState("idle"),[C,X]=w.useState(""),F=w.useRef(!1),K=w.useRef(null),[ie,ge]=w.useState(null),[oe,_]=w.useState(!1),W=w.useRef(!1),[J,de]=w.useState(!1),[me,v]=w.useState(null),[j,z]=w.useState(null),[ee,ue]=w.useState(null),ce=w.useCallback(()=>ue(null),[]),[fe,D]=w.useState(null),re=w.useCallback(()=>D(null),[]),[P,te]=w.useState([]),[he,ye]=w.useState(!1),we=w.useRef(!1),[ot,He]=w.useState(!1),[Xe,je]=w.useState(""),{sessionWords:le,setSessionWords:Ce,sessionType:Re,sessionFocus:Pe,startSession:De,clearSessionState:_e}=W1({setView:p,setIsSidebarOpen:y}),{stats:pt,wotd:lt,apiUsage:mt,refreshGlobalStats:pa,isWotdComposed:Us,randomizeWotd:tn}=ev({currentUser:o,view:x,onUpdateUser:f}),ea=w.useCallback(async(be=!1,ve,Ve=!1,Te)=>{const Ke=xt(),$e=ve||fa(Ke),Ht=async bt=>{const Qt=new AbortController,In=setTimeout(()=>Qt.abort(),1200),Ta=()=>Qt.abort();Te==null||Te.addEventListener("abort",Ta);try{const Rn=await fetch(`${bt}/api/health`,{signal:Qt.signal,mode:"cors"});return clearTimeout(In),Te==null||Te.removeEventListener("abort",Ta),Rn.ok}catch{return clearTimeout(In),Te==null||Te.removeEventListener("abort",Ta),!1}};if(!Ve&&(X($e),await Ht($e))){if(B("connected"),ve){const Qt={...Ke,server:{...Ke.server,useCustomUrl:!0,customUrl:ve}};xo(Qt,!0),l(`Connected to ${ve}`,"success")}return!0}if(!ve&&be||Ve){if(Te!=null&&Te.aborted)return!1;const bt=await av(Qt=>{X(Qt)},Te);if(bt){const Qt={...Ke,server:{...Ke.server,host:bt.host,port:bt.port,useCustomUrl:!1}};return xo(Qt,!0),B("connected"),l(`Server found at ${bt.host}:${bt.port}`,"success"),!0}}return Te!=null&&Te.aborted||B("disconnected"),!1},[l]),Dl=async be=>{K.current&&K.current.abort(),K.current=new AbortController;const ve=K.current.signal;V("scanning");try{await new Promise(($e,Ht)=>{const bt=setTimeout($e,800);ve.addEventListener("abort",()=>{clearTimeout(bt),Ht(new Error("aborted"))})});const Ke=await ea(!be,be,!be,ve);return ve.aborted?!1:Ke?(V("success"),setTimeout(()=>Y(!1),1e3),!0):(V("failed"),!1)}catch(Ve){return Ve.message==="aborted"||V("failed"),!1}},_a=()=>{K.current&&(K.current.abort(),K.current=null),V("failed")},yt=w.useCallback(()=>o&&o.id===Ri&&o.name==="Vocab Master",[o]);w.useEffect(()=>{if(u&&!F.current){F.current=!0;const be=yt();be&&(Y(!0),V("scanning")),ea(!0).then(Ve=>{Ve?(B("connected"),be&&(V("success"),setTimeout(()=>Y(!1),800))):be&&V("failed")});const ve=setInterval(()=>ea(!1),3e4);return window.addEventListener("config-updated",()=>ea(!1)),()=>{clearInterval(ve),window.removeEventListener("config-updated",()=>ea(!1))}}},[u,ea,yt]),w.useEffect(()=>{const ve=setTimeout(async()=>{if(!(!u||U!=="connected"||!o||W.current||L||he)){W.current=!0;try{const Ve=await ro(),Te=o.name||o.id,Ke=Ve.find($e=>$e.id===Te||$e.name===Te);if(Ke){const $e=new Date(Ke.date).getTime(),Ht=Number(localStorage.getItem("vocab_pro_local_last_modified")||0),bt=2e3;$e>Ht+bt?ge({isOpen:!0,type:"restore",localDate:Ht===0?"Never":new Date(Ht).toLocaleString(),serverDate:new Date($e).toLocaleString(),serverId:Ke.id,serverMtime:$e}):Ht>$e+bt&&ge({isOpen:!0,type:"push",localDate:new Date(Ht).toLocaleString(),serverDate:new Date($e).toLocaleString(),serverId:Ke.id,serverMtime:$e})}}catch(Ve){console.warn("[Sync] Initial check failed:",Ve)}}},2e3);return()=>clearTimeout(ve)},[u,U,o==null?void 0:o.id,L,he]),w.useEffect(()=>{const ve=setTimeout(async()=>{if(we.current)return;const Ve=sessionStorage.getItem("vocab_pro_suppress_auto_restore")==="true";if(u&&U==="connected"&&yt()&&!L&&!Ve){we.current=!0;try{const Te=await ro();Te&&Te.length>0&&(te(Te),ye(!0))}catch(Te){console.warn("[AutoRestore] Failed to fetch backups on init:",Te)}}},1e3);return()=>clearTimeout(ve)},[u,U,yt,L]);const{lastBackupTime:ta,refreshBackupTime:wt,handleBackup:il,restoreFromServerAction:qi,triggerLocalRestore:Gi,handleLibraryReset:Bl,deleteWord:Hl,bulkDeleteWords:ql,bulkUpdateWords:an}=tv({currentUser:o,setView:p,refreshGlobalStats:pa,sessionWords:le,setSessionWords:Ce,globalViewWord:S,setGlobalViewWord:A,onUpdateUser:f}),Gl=async be=>{ge(null),ye(!1),_(!0);try{const Ve=(await ro()).find(Ke=>Ke.id===be),Te=Ve?new Date(Ve.date).getTime():void 0;await qi(be,Te),_(!1)}catch{_(!1),l("Restore failed.","error")}},rl=()=>{ye(!1),Gi()},Co=async be=>{sessionStorage.setItem("vocab_pro_suppress_auto_restore","true"),ye(!1),He(!0),je("Wiping all data and preparing new profile...");try{await _g();const ve=await ud(!0);ve&&(c(ve),p("SETTINGS"),l("Welcome! Your data has been wiped. Please set up your new profile.","success"))}catch(ve){console.error(ve),l("Failed to prepare new profile.","error")}finally{He(!1)}},Vi=async()=>{if(!await ea(!0)){Y(!0),V("failed");return}if(sessionStorage.removeItem("vocab_pro_suppress_auto_restore"),we.current=!1,o&&o.id!==Ri){l("Syncing current profile...","info");try{await po(o.id,o,!0)}catch(ve){console.error("Backup failed",ve),l("Backup failed, proceeding...","error")}}try{await kg();const ve=await ro();te(ve),ye(!0)}catch{l("Failed to fetch user list from server.","error")}},zs=async()=>{if(o){_(!0);try{await po(o.id,o,!0),l("Cloud backup updated!","success"),ge(null)}catch{l("Push failed.","error")}finally{_(!1)}}},ol=async()=>{if(ie){_(!0);try{await qi(ie.serverId,ie.serverMtime),ge(null),_(!1)}catch{l("Restore failed.","error"),_(!1)}}};w.useEffect(()=>{const be=()=>{U==="connected"&&!window.isRestoring&&de(!0)},ve=()=>{de(!1),v(null)},Ve=Ke=>{const $e=Ke;$e.detail&&$e.detail.targetTime&&v($e.detail.targetTime)},Te=Ke=>{const $e=Ke;$e.detail&&($e.detail.success?(de(!1),v(null),wt()):(de(!0),v(null)))};return window.addEventListener("datastore-updated",be),window.addEventListener("vocab-pro-restore-complete",ve),window.addEventListener("backup-scheduled",Ve),window.addEventListener("backup-complete",Te),()=>{window.removeEventListener("datastore-updated",be),window.removeEventListener("vocab-pro-restore-complete",ve),window.removeEventListener("backup-scheduled",Ve),window.removeEventListener("backup-complete",Te)}},[U,wt]);const Vl=async()=>{if(!o)return;const be=Cg(),{learned:ve,reviewed:Ve}=be.dayProgress,Te=new Date().toISOString().split("T")[0],Ke=Math.floor(ve/3),$e=Math.floor(Ve/10),Ht=Ke+$e,bt=o.adventure,Qt=bt.lastDailyEnergyAwardDate||"";let In=bt.dailyEnergyAwarded||0;if(Qt!==Te&&(In=0),Ht>In){const Ta=Ht-In,Rn=(bt.energy||0)+Ta,Ca={...o,adventure:{...bt,energy:Rn,dailyEnergyAwarded:Ht,lastDailyEnergyAwardDate:Te}};await f(Ca),l(`Daily Progress: +${Ta} Energy `,"success")}};w.useEffect(()=>{u&&o&&Vl()},[pt,u,o==null?void 0:o.id]);const Qi=async be=>{const ve=Lm(be.id);(!ve||ve.masteryScore!==be.masteryScore)&&H(Date.now()),await Eo(be),le&&Ce(Ve=>(Ve||[]).map(Te=>Te.id===be.id?be:Te)),S&&S.id===be.id&&A(be),await Vl()},Ds=async()=>{o&&(de(!1),v(null),await po(o.id,o,!0),l("Sync to Server initiated.","success"))},Zi=async()=>{U==="connected"&&o?await Ds():await il()},Bs=async be=>{await an(be),await Vl()},Hs=async(be,ve)=>{await B1(be,ve),d(ve);const Ve=Lm(be.id);(!Ve||Ve.masteryScore!==be.masteryScore)&&H(Date.now()),le&&Ce(Te=>(Te||[]).map(Ke=>Ke.id===be.id?be:Ke)),S&&S.id===be.id&&A(be),await Vl()},{gainExperienceAndLevelUp:Yi,recalculateXpAndLevelUp:Xi,xpGained:Ya,xpToNextLevel:_t}=F1({currentUser:o,onUpdateUser:f,onSaveWordAndUser:Hs});w.useEffect(()=>{u&&(h&&o?p("DASHBOARD"):o||p("AUTH"))},[u,h,o==null?void 0:o.id]);const Ut=async be=>{be.id!==Ri&&sessionStorage.removeItem("vocab_pro_suppress_auto_restore"),be.adventure.map||(be.adventure.map=Mi(100),await Aa(be)),d(be),localStorage.setItem("vocab_pro_current_user_id",be.id),localStorage.setItem("vocab_pro_current_user_name",be.name);const ve={...be,lastLogin:Date.now()};await Aa(ve)},kn=()=>{d(null),localStorage.removeItem("vocab_pro_current_user_id")},On=w.useCallback(()=>{_e(),p("DASHBOARD"),pa()},[_e,pa]),ko=w.useCallback(()=>{if(!le||le.length===0||!Re){On();return}const be=le.map(Te=>Te.id),Ve=Ms().filter(Te=>be.includes(Te.id));Ve.length>0?De(Ve,Re,Pe):On()},[le,Re,Pe,De,On]),Ki=w.useCallback(async()=>{if(!o)return;const be=await xh(o.id,30);De(be,"due")},[o,De]);w.useCallback(async()=>{if(!o)return;const be=xt().dailyGoals.max_learn_per_day,ve=await ed(o.id,be);De(ve,"new")},[o,De]);const qs=w.useCallback(async()=>{if(!o)return;const be=await ed(o.id,20);De(be,"new")},[o,De]);return{view:x,setView:p,currentUser:o,isLoaded:u,isResetting:ot,resetStep:Xe,isSidebarOpen:g,setIsSidebarOpen:y,handleLogin:Ut,handleLogout:kn,handleUpdateUser:f,sessionWords:le,sessionFocus:Pe,sessionType:Re,startSession:De,handleSessionComplete:On,stats:pt,wotd:lt,refreshGlobalStats:pa,isWotdComposed:Us,randomizeWotd:tn,globalViewWord:S,setGlobalViewWord:A,lastBackupTime:ta,handleBackup:Zi,triggerLocalBackup:il,triggerServerBackup:Ds,restoreFromServerAction:Gl,triggerLocalRestore:Gi,handleLibraryReset:Bl,initialListFilter:T,setInitialListFilter:I,forceExpandAdd:N,setForceExpandAdd:R,apiUsage:mt,updateWord:Qi,deleteWord:Hl,bulkDeleteWords:ql,bulkUpdateWords:Bs,handleNavigateToList:be=>{I(be),p("BROWSE")},openAddWordLibrary:()=>{p("BROWSE"),R(!0)},clearSessionState:_e,handleRetrySession:ko,gainExperienceAndLevelUp:Yi,recalculateXpAndLevelUp:Xi,xpGained:Ya,xpToNextLevel:_t,startDueReviewSession:Ki,startNewLearnSession:qs,lastMasteryScoreUpdateTimestamp:O,writingContextWord:j,handleComposeWithWord:be=>{z(be),p("WRITING")},consumeWritingContext:()=>{z(null)},targetLessonId:ee,setTargetLessonId:ue,consumeTargetLessonId:ce,planningAction:fe,setPlanningAction:D,consumePlanningAction:re,serverStatus:U,hasUnsavedChanges:J,nextAutoBackupTime:me,isAutoRestoreOpen:he,setIsAutoRestoreOpen:ye,autoRestoreCandidates:P,handleNewUserSetup:Co,handleLocalRestoreSetup:rl,handleSwitchUser:Vi,isConnectionModalOpen:L,setIsConnectionModalOpen:Y,connectionScanStatus:Q,scanningUrl:C,handleScanAndConnect:Dl,handleStopScan:_a,syncPrompt:ie,setSyncPrompt:ge,isSyncing:oe,handleSyncPush:zs,handleSyncRestore:ol,handleSpecialAction:(be,ve)=>{switch(be){case"REVIEW":Ki();break;case"BROWSE":qs();break;case"LESSON":ve&&ve.lessonId&&ue(ve.lessonId),p("LESSON");break;case"PLAN_AI":D("AI"),p("PLANNING");break;case"PLAN_IMPORT":D("IMPORT"),p("PLANNING");break;default:p(be)}}}},lv="modulepreload",sv=function(l){return"/ielts-pro/"+l},zm={},Jt=function(o,u,c){let f=Promise.resolve();if(u&&u.length>0){let h=function(g){return Promise.all(g.map(y=>Promise.resolve(y).then(S=>({status:"fulfilled",value:S}),S=>({status:"rejected",reason:S}))))};document.getElementsByTagName("link");const x=document.querySelector("meta[property=csp-nonce]"),p=(x==null?void 0:x.nonce)||(x==null?void 0:x.getAttribute("nonce"));f=h(u.map(g=>{if(g=sv(g),g in zm)return;zm[g]=!0;const y=g.endsWith(".css"),S=y?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${g}"]${S}`))return;const A=document.createElement("link");if(A.rel=y?"stylesheet":lv,y||(A.as="script"),A.crossOrigin="",A.href=g,p&&A.setAttribute("nonce",p),document.head.appendChild(A),y)return new Promise((T,I)=>{A.addEventListener("load",T),A.addEventListener("error",()=>I(new Error(`Unable to preload CSS for ${g}`)))})}))}function d(h){const x=new Event("vite:preloadError",{cancelable:!0});if(x.payload=h,window.dispatchEvent(x),!x.defaultPrevented)throw h}return f.then(h=>{for(const x of h||[])x.status==="rejected"&&d(x.reason);return o().catch(d)})};function iv(l,o="Vietnamese"){return`You are an expert IELTS coach, examiner, and native English speaker.
    
    Analyze this list of vocabulary items: [${l.map(c=>`"${c}"`).join(", ")}].

    IMPORTANT RULES FOR HEADWORD (hw) IDENTIFICATION:
    1. FOR PHRASES/IDIOMS/EXPRESSIONS: If the input is a multi-word unit (e.g., "cut the road", "break the ice", "get over"), the headword (hw) MUST be the EXACT phrase provided. DO NOT reduce it to a single word (e.g., do NOT return "cut" for "cut the road").
    2. FOR SINGLE WORDS: If the input is a single inflected word, identify its base form and ensure it is in SINGULAR form (e.g., "running" -> "run", "cities" -> "city", "problems" -> "problem").
    3. All details (meaning, IPA, examples) MUST correspond to the identified headword (the whole phrase or the base word).
    4. If input has multiple distinct meanings as a phrase vs a single word, prioritize the meaning of the input as provided.

    LANGUAGE RULES:
    - All content in English, except "m" (Meaning) which must be in ${o}.

    FIELD GENERATION RULES:
    - If the headword (hw) is a PHRASE, PHRASAL VERB, or IDIOM (e.g., "break the ice"):
      - DO NOT generate 'fam' (word family). Return an empty object {} or null.
      - DO NOT generate 'col' (collocations). Return an empty array [].
    - Other fields should be generated as normal.

    FIELD DEFINITIONS:
    - og: The EXACT string from the input list.
    - hw: The headword (Full phrase for expressions; base form for single words).
    - ipa: The primary IPA transcription.
    - ipa_m: 2-4 common mispronunciations.
    - m: Definition of the headword in ${o}.
    - reg: The word's register. MUST be one of: "academic", "casual", or "neutral".
    - ex: A high-quality example sentence using the headword.
    - col: Array of 3-5 essential collocations. ONLY for single-word headwords. Each item MUST be an object: {"text": "the collocation phrase", "d": "minimal descriptive cue that helps recall the colocation, limit to 5 - 10 words. This field is REQUIRED."}.
    - idm: Array of 1-3 common idioms containing the headword (only if hw is a single word). Each item MUST be an object: {"text": "the idiom phrase", "d": "minimal descriptive cue for recall, 5-10 words. This field is REQUIRED."}.
    - prep: Array of dependent prepositions. Format: [{"p": "preposition", "c": "short usage example"}].
    - para: List of synonyms/paraphrases. Generate a variety of tones, but max 6-8 items total.
        - 't' = tone. MUST be one of: "intensified", "softened", "synonym", "academic", "casual", "idiomatic".
        - "intensified": A word with a stronger meaning (e.g., for 'happy', return 'ecstatic').
        - "softened": A word with a weaker/milder meaning (e.g., for 'furious', return 'annoyed').
        - "synonym": A neutral synonym with a similar meaning.
        - "academic": A formal or academic equivalent.
        - "casual": An informal or conversational equivalent.
        - "idiomatic": A related idiom or figurative phrase.
        - 'c' = short context where the paraphrase would be used.
    - fam: Word family. ONLY for single-word headwords. 'n'=nouns, 'v'=verbs, 'j'=adjectives, 'adv'=adverbs. Format: [{"w": "word"}]. DO NOT include IPA.
    - is_pas: True if vulgar/slang.
    - is_pron: True if it's a pronunciation trap.
    - is_id: True if it's an Idiom.
    - is_pv: True if it's a Phrasal Verb.
    - is_col: True if it's a Collocation.
    - is_phr: True if it's a fixed Standard Phrase/Expression.
    - is_irr: True if it's an Irregular verb (single words only).

    EXAMPLES:
    - Input "cut the road" -> hw: "cut the road", m: "m ng", is_phr: true, fam: null, col: [].
    - Input "better late than never" -> hw: "better late than never", is_id: true, fam: null, col: [].
    - Input "implications" -> hw: "implication", m: "h qu", fam: { n: [{"w": "implication"}], v: [{"w": "imply"}] }.

    Response Example (Strict JSON Array):
    [{
      "og": "input_string",
      "hw": "headword_or_full_phrase",
      "ipa": "/ipa/",
      "ipa_m": ["wrong1", "wrong2"],
      "m": "meaning in ${o}",
      "reg": "academic",
      "ex": "Example sentence.",
      "col": [{"text": "heavy rain", "d": "when it is raining a lot"}],
      "idm": [],
      "prep": [], 
      "para": [{ "w": "synonym", "t": "academic", "c": "context" }],
      "is_id": false, "is_pv": false, "is_col": false, "is_phr": true, "is_irr": false,
      "is_pas": false, "is_pron": false,
      "fam": null
    }]`}function rv(l,o){var c,f,d;const u={word:l.word,meaning:l.meaningVi,family:l.wordFamily,collocations:(c=l.collocationsArray)==null?void 0:c.map(h=>h.text),idioms:(f=l.idiomsList)==null?void 0:f.map(h=>h.text),paraphrases:(d=l.paraphrases)==null?void 0:d.map(h=>({word:h.word,tone:h.tone,context:h.context}))};return`You are an expert IELTS coach and English teacher. Your task is to provide learning recommendations for a vocabulary item based on a user's profile.

    USER PROFILE:
    - Role: ${o.role||"N/A"}
    - Current Level: ${o.currentLevel||"N/A"}
    - Target: ${o.target||"N/A"}

    VOCABULARY ITEM TO ANALYZE:
    ${JSON.stringify(u,null,2)}

    INSTRUCTIONS:
    1.  Analyze all components of the vocabulary item (word family, collocations, idioms, paraphrases).
    2.  Based on the USER PROFILE, decide whether each component is essential to learn ('learn') or can be ignored for now ('ignore').
    3.  Provide a concise, sharp 'reason' for each decision. Your reasoning is the most important part.
    4.  Be strict. For an IELTS learner, prioritize academic, high-impact, and flexible vocabulary. For a beginner, prioritize core meanings and common usage.

    EXAMPLE REASONING:
    - For an IELTS goal, if a paraphrase is "the process of a liquid turning into a gas," you should suggest 'ignore' and reason: "This is too descriptive and wordy for IELTS. A single academic term like 'evaporation' is more effective and scores higher for lexical resource."
    - For a primary school student goal, you might suggest 'learn' for the same phrase, reasoning: "This simple explanation is great for building foundational understanding before learning the scientific term."
    - For a common idiom, you might suggest 'learn' for an IELTS student: "Essential for demonstrating natural, native-like language in Speaking Part 1."

    Return a single, strict JSON object. Do not include any text outside the JSON block.

    STRICT JSON OUTPUT FORMAT:
    {
      "overall_summary": "string (A one-sentence summary of the learning strategy for this word, based on the user's goal.)",
      "wordFamily": [
        { "item": "string (the word form)", "suggestion": "learn" | "ignore", "reason": "string (your concise explanation)" }
      ],
      "collocations": [
        { "item": "string (the collocation)", "suggestion": "learn" | "ignore", "reason": "string" }
      ],
      "idioms": [
        { "item": "string (the idiom)", "suggestion": "learn" | "ignore", "reason": "string" }
      ],
      "paraphrases": [
        { "item": "string (the paraphrase word)", "suggestion": "learn" | "ignore", "reason": "string" }
      ]
    }
    `}function ov(l,o,u){var d,h,x,p;const c=o.language||"English",f={word:l.word,meaning:l.meaningVi,family:l.wordFamily,collocations:(d=l.collocationsArray)==null?void 0:d.filter(g=>!g.isIgnored).map(g=>({text:g.text,hint:g.d})),idioms:(h=l.idiomsList)==null?void 0:h.filter(g=>!g.isIgnored).map(g=>({text:g.text,hint:g.d})),paraphrases:(x=l.paraphrases)==null?void 0:x.filter(g=>!g.isIgnored).map(g=>({word:g.word,tone:g.tone,context:g.context})),prepositions:(p=l.prepositions)==null?void 0:p.filter(g=>!g.isIgnored)};return`You are an expert IELTS coach${u?` named '${u}'`:""}. 
  
  TASK: Generate a highly structured "Usage Guide" for the word: "${l.word}".
  
  DATA: ${JSON.stringify(f)}

  INSTRUCTIONS:
  1. Create 5 distinct sections, each containing a Markdown Table:
     - **Prepositions**
     - **Word Family**
     - **Collocations**
     - **Variations (Paraphrases)**
     - **Idioms**
  
  2. Each table MUST have exactly these 3 columns:
     - **Word**: The specific form, collocation, or phrase.
     - **Context**: A brief explanation of *when* or *how* to use it (nuance, tone, or grammatical rule).
     - **Examples**: EXACTLY one high-quality, natural example sentence using that specific item.

  3. CONSTRAINTS:
     - Use ONLY Markdown tables for the usage data.
     - You MUST provide at least 1 example for every single item listed in the tables.
     - Keep the "Context" column concise (max 15 words).
     - If no data exists for a category (e.g., no idioms), you may skip that section or note it as "No common idioms".
     - All instructional text and headers should be in ${c}. All material/examples in English.

  Return a JSON object:
  {
    "content": "string (Markdown formatted with headers and tables, use \\n for newlines)"
  }`}function cv(l,o,u){var d,h,x;const c=o.language||"English",f={word:l.word,meaning:l.meaningVi,collocations:(d=l.collocationsArray)==null?void 0:d.filter(p=>!p.isIgnored).map(p=>({text:p.text,hint:p.d})),idioms:(h=l.idiomsList)==null?void 0:h.filter(p=>!p.isIgnored).map(p=>({text:p.text,hint:p.d})),paraphrases:(x=l.paraphrases)==null?void 0:x.filter(p=>!p.isIgnored).map(p=>({word:p.word,tone:p.tone,context:p.context}))};return`You are an expert IELTS examiner${u?` working with coach '${u}'`:""}. Design an interactive PRACTICE TEST for: "${l.word}".
    
    DATA: ${JSON.stringify(f)}

    AVAILABLE TAGS:
    - [Select: Correct | Wrong 1 | Wrong 2] (Dropdown)
    - [Multi: Correct | Option 2 | Option 3] (Multiple Choice Buttons)
    - [Quiz: Answer] (Fill-in)

    TASK:
    Generate 5-8 questions covering:
    1. Nuanced collocation choice.
    2. Meaning selection.
    3. Sentence completion with correct word forms.
    4. Synonym selection for specific contexts.

    LANGUAGE: Instructions in ${c}, questions in English.

    Return a JSON object:
    {
      "content": "string (Markdown with interactive tags)"
    }`}const uv=l=>{if(!l)return null;const o=R=>Array.isArray(R)?R.map(O=>typeof O=="string"?{word:O}:O&&(O.w||O.word)?{word:O.w||O.word,isIgnored:O.g??O.isIgnored}:null).filter(O=>O!==null&&!!O.word):[],u=R=>(R==null?void 0:R.map(O=>({word:O.w||O.word,tone:O.t||O.tone,context:O.c||O.context,isIgnored:O.g??O.isIgnored??!1})))||[],c=R=>Array.isArray(R)?R.map(O=>typeof O=="string"?{prep:O.trim(),usage:""}:{prep:(O.p||O.prep||"").trim(),usage:(O.c||O.usage||"").trim(),isIgnored:O.g??O.isIgnored??!1}).filter(O=>O.prep.length>0):[],f=R=>Array.isArray(R)?R.map(H=>{if(typeof H=="string")return{text:H,isIgnored:!1};const U=H.text||H.x;if(U){const B=H.d||H.ds;return{text:U,d:B,isIgnored:H.g??H.isIgnored??!1}}return null}).filter(H=>H!==null&&!!H.text):void 0;let d;Array.isArray(l.prepositionsArray)?d=l.prepositionsArray:Array.isArray(l.prep)&&(d=c(l.prep));const h=l.col||l.collocations;let x,p;Array.isArray(h)?(x=f(h),x&&(p=x.map(R=>R.text).join(`
`))):typeof h=="string"&&(p=h);const g=l.idm||l.idioms;let y;Array.isArray(g)&&(y=f(g));const S=l.hw||l.headword,A=l.pron_sim||l.pronSim||l.ps,T=l.ipa_us||l.ipaUs||l.ipa||l.i,I=l.type,N={isIdiom:I==="idiom",isPhrasalVerb:I==="phrasal_verb",isCollocation:I==="collocation",isStandardPhrase:I==="phrase",isIrregular:I==="irregular_verb"};return{original:l.og||l.original||S,headword:S,ipaUs:T,ipaUk:l.ipa_uk||l.ipaUk||(A==="same"?T:void 0),pronSim:A,ipaMistakes:l.ipa_m||l.ipaMistakes||l.im,meaningVi:l.m||l.meaningVi,register:l.reg||l.register,example:l.ex||l.example,collocations:p,collocationsArray:x,idioms:y?y.map(R=>R.text).join(`
`):void 0,idiomsList:y,prepositionString:typeof l.prep=="string"?l.prep:void 0,prepositionsArray:d,isIdiom:I?N.isIdiom:l.is_id??l.isIdiom,isPhrasalVerb:I?N.isPhrasalVerb:l.is_pv??l.isPhrasalVerb,isCollocation:I?N.isCollocation:l.is_col??l.isCollocation,isStandardPhrase:I?N.isStandardPhrase:l.is_phr??l.isStandardPhrase,isIrregular:I?N.isIrregular:l.is_irr??l.isIrregular,isPassive:l.is_pas??l.isPassive,paraphrases:u(l.para||l.paraphrases),wordFamily:l.fam?{nouns:o(l.fam.n||l.fam.ns||[]),verbs:o(l.fam.v||[]),adjs:o(l.fam.j||[]),advs:o(l.fam.adv||l.fam.d||[])}:l.wordFamily||void 0}},dv=(l,o)=>{const u=uv(o);if(!u)return l;const c={...l};c.ipaUs=u.ipaUs??l.ipaUs,c.ipaUk=u.ipaUk??l.ipaUk,c.pronSim=u.pronSim??l.pronSim,c.ipaMistakes=u.ipaMistakes??l.ipaMistakes,c.meaningVi=u.meaningVi??l.meaningVi,c.register=u.register??l.register;let d=[...l.collocationsArray||(l.collocations?l.collocations.split(`
`).map(g=>({text:g.trim(),isIgnored:!1})).filter(g=>g.text):[])];u.collocationsArray&&u.collocationsArray.forEach(g=>{const y=d.findIndex(S=>S.text.toLowerCase()===g.text.toLowerCase());y!==-1?(g.d&&!d[y].d&&(d[y].d=g.d),g.isIgnored&&(d[y].isIgnored=!0)):d.push({text:g.text,d:g.d,isIgnored:g.isIgnored||!1})}),c.collocationsArray=d,c.collocations=d.map(g=>g.text).join(`
`);let x=[...l.idiomsList||(l.idioms?l.idioms.split(`
`).map(g=>({text:g.trim(),isIgnored:!1})).filter(g=>g.text):[])];u.idiomsList&&u.idiomsList.forEach(g=>{const y=x.findIndex(S=>S.text.toLowerCase()===g.text.toLowerCase());y!==-1?(g.d&&!x[y].d&&(x[y].d=g.d),g.isIgnored&&(x[y].isIgnored=!0)):x.push({text:g.text,d:g.d,isIgnored:g.isIgnored||!1})}),c.idiomsList=x,c.idioms=x.map(g=>g.text).join(`
`);let p=l.prepositions||[];if(u.prepositionsArray&&Array.isArray(u.prepositionsArray)&&u.prepositionsArray.length>0){const g=u.prepositionsArray,y=[...p];g.forEach(S=>{S.prep&&(y.some(T=>T.prep.toLowerCase()===S.prep.toLowerCase()&&T.usage.toLowerCase()===S.usage.toLowerCase())||y.push({...S,isIgnored:S.isIgnored||!1}))}),p=y}if(c.prepositions=p.length>0?p:void 0,u.wordFamily&&(c.wordFamily=u.wordFamily),u.paraphrases&&Array.isArray(u.paraphrases)){const g=l.paraphrases||[],y=u.paraphrases,S=[...g];y.forEach(A=>{S.some(T=>T.word.toLowerCase()===A.word.toLowerCase())||S.push(A)}),c.paraphrases=S}if(u.example){let g=l.example||"";g.toLowerCase().includes(u.example.toLowerCase())||(g=g.trim()?`${g}
${u.example}`:u.example),c.example=g}return c.isIdiom=u.isIdiom!==void 0?!!u.isIdiom:l.isIdiom,c.isPhrasalVerb=u.isPhrasalVerb!==void 0?!!u.isPhrasalVerb:l.isPhrasalVerb,c.isCollocation=u.isCollocation!==void 0?!!u.isCollocation:l.isCollocation,c.isStandardPhrase=u.isStandardPhrase!==void 0?!!u.isStandardPhrase:l.isStandardPhrase,c.isIrregular=u.isIrregular!==void 0?!!u.isIrregular:l.isIrregular,c.isPassive=u.isPassive!==void 0?!!u.isPassive:l.isPassive,c.quality=tt.REFINED,c.complexity=Za(c),c.masteryScore=Gt(c),c.gameEligibility=Qa(c),c.updatedAt=Date.now(),c},Dm=({label:l,options:o,selectedId:u,onSelect:c,buttonClass:f,disabled:d=!1})=>{const[h,x]=w.useState(!1),p=w.useRef(null),g=o.find(y=>y.id===u)||o[0];return w.useEffect(()=>{const y=S=>{p.current&&!p.current.contains(S.target)&&x(!1)};return document.addEventListener("mousedown",y),()=>document.removeEventListener("mousedown",y)},[]),s.jsxs("div",{className:"relative",ref:p,children:[s.jsxs("button",{type:"button",onClick:()=>x(!h),className:f,disabled:d,children:[l&&s.jsx("span",{className:"text-[9px] font-black uppercase tracking-widest text-neutral-400",children:l}),g.icon,s.jsx("span",{className:"text-xs font-black uppercase tracking-wider",children:g.label}),s.jsx(Fm,{size:14,className:`transition-transform duration-200 ${h?"rotate-180":""}`})]}),h&&!d&&s.jsx("div",{className:"absolute right-0 top-full mt-2 w-48 bg-white rounded-2xl shadow-xl border border-neutral-100 z-50 p-2 overflow-hidden animate-in fade-in zoom-in-95 flex flex-col gap-1",children:o.map(y=>s.jsxs("button",{type:"button",onClick:()=>{c(y.id),x(!1)},className:`w-full flex items-center gap-3 px-3 py-2.5 rounded-lg text-xs font-bold transition-colors ${u===y.id?"bg-neutral-100 text-neutral-900":"text-neutral-600 hover:bg-neutral-50 hover:text-neutral-900"}`,children:[y.icon,s.jsx("span",{children:y.label})]},y.id))})]})},Es=({title:l,items:o,onUpdate:u,onToggleIgnore:c,onRemove:f,onAdd:d,placeholders:h,showDescription:x=!1})=>s.jsxs("div",{className:"space-y-2",children:[s.jsx("label",{className:"text-[10px] font-black text-neutral-400 uppercase tracking-widest",children:l}),s.jsxs("div",{className:"space-y-2 p-3 bg-neutral-50 border border-neutral-200 rounded-2xl",children:[(o||[]).map((p,g)=>s.jsxs("div",{className:`bg-white p-2 rounded-lg border border-neutral-100 flex items-start gap-2 group transition-opacity ${p.isIgnored?"opacity-50":""}`,children:[s.jsxs("div",{className:"flex-1 space-y-1",children:[s.jsx("div",{className:"flex items-center gap-2",children:s.jsx("input",{type:"text",value:p.text,onChange:y=>u(g,"text",y.target.value),placeholder:h.text,className:"flex-1 px-3 py-2 bg-neutral-50/50 border border-neutral-200 rounded-lg text-xs font-bold focus:bg-white focus:ring-1 focus:ring-neutral-900 outline-none"})}),x&&s.jsx("input",{type:"text",value:p.d||"",onChange:y=>u(g,"d",y.target.value),placeholder:h.d,className:"w-full px-3 py-1 bg-neutral-50/50 border border-transparent rounded-lg text-[10px] font-medium text-neutral-500 focus:bg-white focus:ring-1 focus:ring-neutral-900 focus:border-neutral-200 outline-none"})]}),s.jsxs("div",{className:"flex flex-col",children:[s.jsx("button",{type:"button",onClick:()=>c(g),className:"p-2 text-neutral-400 hover:text-neutral-700 rounded-lg hover:bg-neutral-100",children:p.isIgnored?s.jsx(Pu,{size:14}):s.jsx(Ui,{size:14})}),s.jsx("button",{type:"button",onClick:()=>f(g),className:"p-2 text-neutral-400 hover:text-red-500 rounded-lg hover:bg-red-50",children:s.jsx(kt,{size:14})})]})]},g)),s.jsxs("button",{type:"button",onClick:d,className:"w-full text-center py-2 bg-white hover:bg-neutral-100 text-neutral-400 hover:text-neutral-700 rounded-lg text-xs font-bold transition-colors flex items-center justify-center gap-1.5 border border-neutral-200 shadow-sm",children:[s.jsx(Ja,{size:12})," Add"]})]})]}),fv=l=>{var L,Y,Q,V;const{onClose:o,onSwitchToView:u,formData:c,setFormData:f,setFlag:d,familyHandler:h,prepList:x,collocList:p,idiomList:g,paraList:y,handleSubmit:S,onOpenAiRefine:A,onSuggestLearn:T,hasSuggestions:I}=l,[N,R]=w.useState("MAIN"),O=[{id:"MAIN",label:"Main",icon:db},{id:"DETAILS",label:"Details",icon:nh},{id:"CONNECTIONS",label:"Links",icon:sh},{id:"USAGE",label:"Usage & Test",icon:mo}],H=[{id:tt.RAW,label:"Raw",icon:s.jsx(eh,{size:14,className:"text-neutral-400"})},{id:tt.REFINED,label:"Refined",icon:s.jsx(dh,{size:14,className:"text-indigo-500"})},{id:tt.VERIFIED,label:"Verified",icon:s.jsx(oh,{size:14,className:"text-emerald-500"})},{id:tt.FAILED,label:"Incorrect",icon:s.jsx(ch,{size:14,className:"text-rose-500"})}],U=[{id:"NEW",label:"New",icon:s.jsx("div",{className:"w-3 h-3 rounded-full bg-blue-500"})},{id:Fe.LEARNED,label:"Learned",icon:s.jsx("div",{className:"w-3 h-3 rounded-full bg-cyan-500"})},{id:Fe.FORGOT,label:"Forgot",icon:s.jsx("div",{className:"w-3 h-3 rounded-full bg-rose-500"})},{id:Fe.HARD,label:"Hard",icon:s.jsx("div",{className:"w-3 h-3 rounded-full bg-orange-500"})},{id:Fe.EASY,label:"Easy",icon:s.jsx("div",{className:"w-3 h-3 rounded-full bg-green-500"})}],B=["intensified","softened","synonym","academic","casual"];return s.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center p-4 bg-black/40 backdrop-blur-sm animate-in fade-in duration-200",children:s.jsxs("div",{className:"bg-white w-full max-w-4xl rounded-[2.5rem] shadow-2xl overflow-hidden flex flex-col max-h-[95vh]",children:[s.jsxs("header",{className:"px-6 py-4 border-b border-neutral-100 flex flex-col gap-4 shrink-0 bg-white/80 backdrop-blur-sm z-10",children:[s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("button",{onClick:u,className:"p-2 bg-neutral-100 hover:bg-neutral-200 rounded-lg text-neutral-500 transition-colors",children:s.jsx(Wm,{size:16})}),s.jsx("h3",{className:"font-black text-lg text-neutral-900 leading-none",children:"Edit Word"})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsxs("button",{type:"button",onClick:T,title:I?"View Suggestions":"Get Learning Suggestions",className:`px-3 py-2 border rounded-lg font-black text-[10px] flex items-center justify-center space-x-1.5 hover:bg-neutral-50 active:scale-95 transition-all shadow-sm ${I?"bg-amber-50 border-amber-200 text-amber-700":"bg-white border-neutral-200 text-neutral-600"}`,children:[s.jsx(od,{size:12,className:I?"text-amber-500":"text-neutral-400"}),s.jsx("span",{children:I?"View Suggestion":"Suggest"})]}),s.jsxs("button",{type:"button",onClick:A,className:"px-3 py-2 bg-white border border-neutral-200 text-neutral-600 rounded-lg font-black text-[10px] flex items-center justify-center space-x-1.5 hover:bg-neutral-50 active:scale-95 transition-all shadow-sm",children:[s.jsx(Is,{size:12,className:"text-amber-500"}),s.jsx("span",{children:"Manual AI"})]}),s.jsxs("button",{type:"button",onClick:()=>S(),className:"px-5 py-2 bg-neutral-900 text-white rounded-lg font-black text-[10px] flex items-center justify-center space-x-1.5 hover:bg-neutral-800 active:scale-95 transition-all shadow-md shadow-neutral-900/10",children:[s.jsx(Mb,{size:12}),s.jsx("span",{children:"Save"})]}),s.jsx("button",{onClick:o,className:"p-2 text-neutral-400 hover:bg-neutral-100 hover:text-neutral-900 rounded-full transition-colors ml-2",children:s.jsx(kt,{size:18})})]})]}),s.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4",children:[s.jsx("div",{className:"flex bg-neutral-100 p-1 rounded-xl w-fit",children:O.map(({id:C,label:X,icon:F})=>s.jsxs("button",{onClick:()=>R(C),className:`px-4 py-2 text-xs font-black rounded-lg transition-all flex items-center gap-2 ${N===C?"bg-white shadow-sm text-neutral-900":"text-neutral-500 hover:text-neutral-800"}`,children:[s.jsx(F,{size:14})," ",X]},C))}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Dm,{label:"Quality",options:H,selectedId:c.quality,onSelect:C=>f("quality",C),buttonClass:"flex items-center gap-2 px-3 py-2 bg-white rounded-lg hover:bg-neutral-100 transition-colors shadow-sm border border-neutral-200"}),s.jsx(Dm,{label:"Learn Status",options:U,selectedId:c.studiedStatus,onSelect:C=>f("studiedStatus",C),buttonClass:"flex items-center gap-2 px-3 py-2 bg-white rounded-lg hover:bg-neutral-100 transition-colors shadow-sm border border-neutral-200"})]})]})]}),s.jsx("div",{className:"flex-1 overflow-y-auto no-scrollbar bg-neutral-50/50",children:s.jsxs("div",{className:"p-6 space-y-6",children:[N==="MAIN"&&s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-x-6 gap-y-4 animate-in fade-in duration-300",children:[s.jsxs("div",{className:"space-y-1",children:[s.jsx("label",{className:"text-[10px] font-black text-neutral-400 uppercase tracking-widest px-1",children:"Headword"}),s.jsx("input",{type:"text",value:c.word,onChange:C=>f("word",C.target.value),className:"w-full px-4 py-3 bg-white border border-neutral-200 rounded-xl text-lg font-bold focus:ring-2 focus:ring-neutral-900 outline-none"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"space-y-1",children:[s.jsx("label",{className:"text-[10px] font-black text-neutral-400 uppercase tracking-widest px-1",children:"Primary IPA / US"}),s.jsx("input",{type:"text",value:c.ipaUs||"",onChange:C=>f("ipaUs",C.target.value),placeholder:"/.../",className:"w-full px-4 py-2 bg-white border border-neutral-200 rounded-xl font-mono text-base text-neutral-600 focus:ring-2 focus:ring-neutral-900 outline-none"})]}),s.jsxs("div",{className:"space-y-1",children:[s.jsx("label",{className:"text-[10px] font-black text-neutral-400 uppercase tracking-widest px-1",children:"IPA UK (Optional)"}),s.jsx("input",{type:"text",value:c.ipaUk||"",onChange:C=>f("ipaUk",C.target.value),placeholder:"/.../",className:"w-full px-4 py-2 bg-white border border-neutral-200 rounded-xl font-mono text-base text-neutral-600 focus:ring-2 focus:ring-neutral-900 outline-none"})]}),s.jsxs("div",{className:"space-y-1",children:[s.jsx("label",{className:"text-[10px] font-black text-neutral-400 uppercase tracking-widest px-1",children:"Pronunciation Similarity"}),s.jsx("div",{className:"flex bg-neutral-100 p-1 rounded-xl w-full",children:["same","near","different"].map(C=>s.jsx("button",{type:"button",onClick:()=>f("pronSim",C),className:`flex-1 px-4 py-2 text-xs font-black rounded-lg transition-all flex items-center justify-center gap-2 ${c.pronSim===C?"bg-white shadow-sm text-neutral-900":"text-neutral-500 hover:text-neutral-800"}`,children:C.charAt(0).toUpperCase()+C.slice(1)},C))})]})]}),s.jsxs("div",{className:"md:col-span-2 space-y-1",children:[s.jsx("label",{className:"text-[10px] font-black text-neutral-400 uppercase tracking-widest px-1",children:"Definition / Meaning"}),s.jsx("input",{type:"text",value:c.meaningVi,onChange:C=>f("meaningVi",C.target.value),className:"w-full px-4 py-3 bg-white border border-neutral-200 rounded-xl text-base font-medium focus:ring-2 focus:ring-neutral-900 outline-none"})]}),s.jsxs("div",{className:"md:col-span-2 space-y-1",children:[s.jsx("label",{className:"text-[10px] font-black text-neutral-400 uppercase tracking-widest px-1",children:"Examples"}),s.jsx("textarea",{rows:5,value:c.example,onChange:C=>f("example",C.target.value),className:"w-full px-4 py-3 bg-white border border-neutral-200 rounded-xl text-sm leading-relaxed resize-y focus:ring-2 focus:ring-neutral-900 outline-none"})]})]}),N==="DETAILS"&&s.jsxs("div",{className:"space-y-6 animate-in fade-in duration-300",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx("label",{className:"text-[10px] font-black text-neutral-400 uppercase tracking-widest",children:"Flags"}),s.jsx("div",{className:"flex flex-wrap gap-2 p-3 bg-white border border-neutral-200 rounded-2xl",children:[{id:"isIdiom",label:"Idiom",icon:vo},{id:"isCollocation",label:"Colloc.",icon:bo},{id:"isStandardPhrase",label:"Phrase",icon:cd},{id:"isPhrasalVerb",label:"Phrasal",icon:lh},{id:"isIrregular",label:"Irregular",icon:Rb},{id:"isPassive",label:"Archive",icon:c.isPassive?rb:Vb}].map(C=>s.jsxs("button",{type:"button",onClick:()=>d(C.id),className:`flex items-center space-x-1.5 py-1.5 px-3 rounded-lg border transition-all font-bold text-[9px] uppercase tracking-wider ${c[C.id]?"bg-neutral-900 border-neutral-900 text-white shadow-sm":"bg-white border-neutral-200 text-neutral-500 hover:border-neutral-300"}`,children:[s.jsx(C.icon,{size:10}),s.jsx("span",{children:C.label})]},C.id))})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-x-6 gap-y-4",children:[s.jsxs("div",{className:"space-y-1",children:[s.jsxs("label",{className:"text-[10px] font-black text-neutral-400 uppercase tracking-widest px-1 flex items-center",children:[s.jsx(Xb,{size:10,className:"mr-1"}),"User Groups"]}),s.jsx("input",{type:"text",value:c.groupsString,onChange:C=>f("groupsString",C.target.value),placeholder:"bird_species, env_academic...",className:"w-full px-4 py-3 bg-white border border-neutral-200 rounded-xl text-sm focus:ring-1 focus:ring-neutral-900 outline-none"})]}),s.jsxs("div",{className:"md:col-span-2 space-y-1",children:[s.jsx("label",{className:"text-[10px] font-black text-neutral-400 uppercase tracking-widest px-1",children:"Register"}),s.jsx("div",{className:"flex bg-neutral-100 p-1 rounded-xl w-fit",children:["raw","neutral","academic","casual"].map(C=>s.jsx("button",{type:"button",onClick:()=>f("register",C),className:`px-4 py-2 text-xs font-black rounded-lg transition-all flex items-center gap-2 ${c.register===C||!c.register&&C==="raw"?"bg-white shadow-sm text-neutral-900":"text-neutral-500 hover:text-neutral-800"}`,children:C.charAt(0).toUpperCase()+C.slice(1)},C))})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs("label",{className:"text-[10px] font-black text-neutral-400 uppercase tracking-widest px-1 flex items-center",children:[s.jsx(rd,{size:10,className:"mr-1"})," Prepositions / Patterns"]}),s.jsxs("div",{className:"space-y-2 p-3 bg-white border border-neutral-200 rounded-2xl",children:[c.prepositionsList.map((C,X)=>s.jsxs("div",{className:`flex items-center gap-2 transition-opacity ${C.isIgnored?"opacity-40":""}`,children:[s.jsx("input",{type:"text",value:C.prep,onChange:F=>x.update(X,{prep:F.target.value}),placeholder:"Prep",className:"w-24 px-3 py-2 bg-neutral-50 border border-neutral-200 rounded-lg text-xs font-bold focus:bg-white focus:ring-1 focus:ring-neutral-900 outline-none"}),s.jsx("input",{type:"text",value:C.usage,onChange:F=>x.update(X,{usage:F.target.value}),placeholder:"Usage Context",className:"flex-1 px-3 py-2 bg-neutral-50 border border-neutral-200 rounded-lg text-xs font-medium focus:bg-white focus:ring-1 focus:ring-neutral-900 outline-none"}),s.jsx("button",{type:"button",onClick:()=>x.toggleIgnore(X),className:"p-2 text-neutral-400 hover:text-neutral-700 rounded-lg hover:bg-neutral-100",children:C.isIgnored?s.jsx(Pu,{size:14}):s.jsx(Ui,{size:14})}),s.jsx("button",{type:"button",onClick:()=>x.remove(X),className:"p-2 text-neutral-400 hover:text-red-500 rounded-lg hover:bg-red-50",children:s.jsx(kt,{size:14})})]},X)),s.jsxs("button",{type:"button",onClick:()=>x.add({prep:"",usage:"",isIgnored:!1}),className:"w-full text-center py-2 bg-neutral-50 hover:bg-neutral-100 text-neutral-400 hover:text-neutral-700 rounded-lg text-xs font-bold transition-colors flex items-center justify-center gap-1.5 border border-neutral-200 shadow-sm",children:[s.jsx(Ja,{size:12})," Add Pattern"]})]})]}),s.jsxs("div",{className:"space-y-1",children:[s.jsxs("label",{className:"text-[10px] font-black text-neutral-400 uppercase tracking-widest px-1 flex items-center",children:[s.jsx(Hb,{size:10,className:"mr-1"})," Private Note"]}),s.jsx("textarea",{rows:3,value:c.note,onChange:C=>f("note",C.target.value),className:"w-full px-4 py-3 bg-white border border-neutral-200 rounded-xl text-sm text-neutral-600 resize-y focus:ring-1 focus:ring-neutral-900 outline-none"})]})]}),N==="CONNECTIONS"&&s.jsxs("div",{className:"space-y-6 animate-in fade-in duration-300",children:[s.jsx(Es,{title:"Collocations",items:c.collocationsArray,onUpdate:(C,X,F)=>p.update(C,{[X]:F}),onToggleIgnore:p.toggleIgnore,onRemove:p.remove,onAdd:()=>p.add({text:"",d:"",isIgnored:!1}),placeholders:{text:"Collocation phrase...",d:"Descriptive hint..."},showDescription:!0}),s.jsx(Es,{title:"Related Idioms",items:c.idiomsList,onUpdate:(C,X,F)=>g.update(C,{[X]:F}),onToggleIgnore:g.toggleIgnore,onRemove:g.remove,onAdd:()=>g.add({text:"",d:"",isIgnored:!1}),placeholders:{text:"Idiom or phrase...",d:"Descriptive hint..."},showDescription:!0}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("label",{className:"text-[10px] font-black text-neutral-400 uppercase tracking-widest",children:"Word Family"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsx(Es,{title:"Nouns",items:(((L=c.wordFamily)==null?void 0:L.nouns)||[]).map(C=>({text:C.word,isIgnored:C.isIgnored})),onUpdate:(C,X,F)=>{X==="text"&&h("nouns").update(C,"word",F)},onToggleIgnore:h("nouns").toggleIgnore,onRemove:h("nouns").remove,onAdd:h("nouns").add,placeholders:{text:"Noun form..."}}),s.jsx(Es,{title:"Verbs",items:(((Y=c.wordFamily)==null?void 0:Y.verbs)||[]).map(C=>({text:C.word,isIgnored:C.isIgnored})),onUpdate:(C,X,F)=>{X==="text"&&h("verbs").update(C,"word",F)},onToggleIgnore:h("verbs").toggleIgnore,onRemove:h("verbs").remove,onAdd:h("verbs").add,placeholders:{text:"Verb form..."}}),s.jsx(Es,{title:"Adjectives",items:(((Q=c.wordFamily)==null?void 0:Q.adjs)||[]).map(C=>({text:C.word,isIgnored:C.isIgnored})),onUpdate:(C,X,F)=>{X==="text"&&h("adjs").update(C,"word",F)},onToggleIgnore:h("adjs").toggleIgnore,onRemove:h("adjs").remove,onAdd:h("adjs").add,placeholders:{text:"Adjective form..."}}),s.jsx(Es,{title:"Adverbs",items:(((V=c.wordFamily)==null?void 0:V.advs)||[]).map(C=>({text:C.word,isIgnored:C.isIgnored})),onUpdate:(C,X,F)=>{X==="text"&&h("advs").update(C,"word",F)},onToggleIgnore:h("advs").toggleIgnore,onRemove:h("advs").remove,onAdd:h("advs").add,placeholders:{text:"Adverb form..."}})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs("label",{className:"text-[10px] font-black text-neutral-400 uppercase tracking-widest flex items-center gap-1",children:[s.jsx(No,{size:10,className:"text-amber-500"})," Word Power & Variations"]}),s.jsxs("div",{className:"space-y-2 p-3 bg-white border border-neutral-200 rounded-2xl",children:[(c.paraphrases||[]).map((C,X)=>s.jsxs("div",{className:`grid grid-cols-[1fr,auto,1fr,auto,auto] items-center gap-2 transition-opacity ${C.isIgnored?"opacity-40":""}`,children:[s.jsx("input",{type:"text",value:C.word,onChange:F=>y.update(X,{word:F.target.value}),placeholder:"Variation...",className:"px-3 py-2 bg-neutral-50 border border-neutral-200 rounded-lg text-xs font-bold focus:bg-white focus:ring-1 focus:ring-neutral-900 outline-none"}),s.jsx("select",{value:C.tone,onChange:F=>y.update(X,{tone:F.target.value}),className:"px-3 py-2 bg-neutral-50 border border-neutral-200 rounded-lg text-xs font-bold focus:bg-white focus:ring-1 focus:ring-neutral-900 outline-none appearance-none",children:B.map(F=>s.jsx("option",{value:F,children:F.charAt(0).toUpperCase()+F.slice(1)},F))}),s.jsx("input",{type:"text",value:C.context,onChange:F=>y.update(X,{context:F.target.value}),placeholder:"Context...",className:"px-3 py-2 bg-neutral-50 border border-neutral-200 rounded-lg text-xs font-medium focus:bg-white focus:ring-1 focus:ring-neutral-900 outline-none"}),s.jsx("button",{type:"button",onClick:()=>y.toggleIgnore(X),className:"p-2 text-neutral-400 hover:text-neutral-700 rounded-lg hover:bg-neutral-100",children:C.isIgnored?s.jsx(Pu,{size:14}):s.jsx(Ui,{size:14})}),s.jsx("button",{type:"button",onClick:()=>y.remove(X),className:"p-2 text-neutral-400 hover:text-red-500 rounded-lg hover:bg-red-50",children:s.jsx(kt,{size:14})})]},X)),s.jsxs("button",{type:"button",onClick:()=>y.add({word:"",context:"",tone:"synonym",isIgnored:!1}),className:"w-full text-center py-2 bg-neutral-50 hover:bg-neutral-100 text-neutral-400 hover:text-neutral-700 rounded-lg text-xs font-bold transition-colors flex items-center justify-center gap-1.5 border border-neutral-200 shadow-sm",children:[s.jsx(Ja,{size:12})," Add Variation"]})]})]})]}),N==="USAGE"&&s.jsxs("div",{className:"space-y-6 animate-in fade-in duration-300 h-full flex flex-col",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx("div",{className:"flex justify-between items-center px-1",children:s.jsxs("label",{className:"text-[10px] font-black text-neutral-400 uppercase tracking-widest flex items-center gap-2",children:[s.jsx(mo,{size:12})," Usage Guide (Markdown)"]})}),s.jsx("textarea",{value:c.essayEdit,onChange:C=>f("essayEdit",C.target.value),rows:12,className:"w-full p-4 bg-white border border-neutral-200 rounded-2xl font-mono text-xs leading-relaxed focus:ring-2 focus:ring-neutral-900 outline-none resize-y",placeholder:"Enter the Usage Guide Markdown content here..."})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("div",{className:"flex justify-between items-center px-1",children:s.jsxs("label",{className:"text-[10px] font-black text-neutral-400 uppercase tracking-widest flex items-center gap-2",children:[s.jsx(Fu,{size:12})," Practice Test (Markdown)"]})}),s.jsx("textarea",{value:c.testEdit,onChange:C=>f("testEdit",C.target.value),rows:12,className:"w-full p-4 bg-white border border-neutral-200 rounded-2xl font-mono text-xs leading-relaxed focus:ring-2 focus:ring-neutral-900 outline-none resize-y",placeholder:"Enter the Practice Test Markdown content here..."})]})]})]})})]})})};async function pv(l){if(navigator.clipboard&&navigator.clipboard.writeText)try{return await navigator.clipboard.writeText(l),!0}catch{console.warn("Clipboard API failed, trying fallback strategy")}try{const o=document.createElement("textarea");o.value=l,o.style.position="fixed",o.style.left="-9999px",o.style.top="0",document.body.appendChild(o),o.focus(),o.select();const u=document.execCommand("copy");return document.body.removeChild(o),u}catch(o){return console.error("Copy failed",o),!1}}const mv=l=>l?l.split(/[;\n\r\t,]+/).map(o=>o.trim()).filter(Boolean):[],gS=l=>{const o=new Map;return l&&mv(l).forEach(c=>{const f=c.split(":").map(x=>x.trim()),d=f[0],h=f.length>1?f[1]:f[0];if(d&&h){const x=d.toLowerCase(),p=h.toLowerCase();o.set(x,p),o.has(p)||o.set(p,p)}}),o},xS=l=>{const o=Array.from(l.keys()).sort((c,f)=>f.length-c.length);if(o.length===0)return null;const u=o.map(c=>c.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"));return new RegExp(`\\b(${u.join("|")})\\b`,"gi")},nd=({isOpen:l,onClose:o,type:u,title:c,description:f,initialData:d,onGeneratePrompt:h,onJsonReceived:x,actionLabel:p="Apply",hidePrimaryInput:g=!1,closeOnSuccess:y=!1})=>{const[S,A]=w.useState(""),[T,I]=w.useState(""),[N,R]=w.useState(""),[O,H]=w.useState(""),[U,B]=w.useState("CASUAL"),[L,Y]=w.useState(""),[Q,V]=w.useState(Ju.VARIETY),[C,X]=w.useState(""),[F,K]=w.useState("Adult"),[ie,ge]=w.useState("English"),[oe,_]=w.useState("friendly_elementary"),[W,J]=w.useState(""),[de,me]=w.useState(""),[v,j]=w.useState(null),[z,ee]=w.useState(!1),[ue,ce]=w.useState(!1),[fe,D]=w.useState(!1),[re,P]=w.useState(""),te=w.useRef(null),he=w.useRef(void 0),ye=["GENERATE_LESSON","GENERATE_WORD_LESSON","REFINE_UNIT","GENERATE_AUDIO_SCRIPT"].includes(u);if(w.useEffect(()=>{if(l&&!he.current){if(A(""),I(""),R(""),H(""),B("CASUAL"),Y(""),V(Ju.VARIETY),J(""),u==="REFINE_WORDS"&&(d!=null&&d.words)){const je=d.words.replace(/\n/g,"; ");A(je)}else ye&&(X(""),K((d==null?void 0:d.targetAudience)||"Adult"),ge((d==null?void 0:d.language)||"English"),_((d==null?void 0:d.tone)||"friendly_elementary"));me(""),j(null),D(!1),ee(!1),ce(!1)}he.current=l},[l,u,d,ye]),w.useEffect(()=>{let je={};u==="REFINE_WORDS"?je={words:g?d==null?void 0:d.words:S}:u==="REFINE_UNIT"?je={request:T,language:ie,targetAudience:F,tone:oe,format:"reading"}:u==="GENERATE_AUDIO_SCRIPT"?je={request:T,language:ie,targetAudience:F,tone:oe,format:"listening"}:u==="GENERATE_CHAPTER"?je={request:N}:u==="GENERATE_SEGMENT"?je={request:O}:u==="GENERATE_PARAPHRASE"?je={tone:U,context:L,mode:Q}:u==="EVALUATE_PARAPHRASE"?je=d:u==="GENERATE_LESSON"||u==="GENERATE_WORD_LESSON"?je={topic:C,language:ie,targetAudience:F,tone:oe,format:"reading"}:u==="GENERATE_UNIT"?je={request:T}:u==="GENERATE_PLAN"&&(je={request:W}),P(h(je))},[u,S,T,N,O,U,L,Q,d,g,C,F,ie,oe,W,h]),!l)return null;const we=async()=>{await pv(re),D(!0),setTimeout(()=>D(!1),2e3),setTimeout(()=>{var je;return(je=te.current)==null?void 0:je.focus()},100)},ot=async()=>{z||!de.trim()||(j(null),ee(!0),setTimeout(async()=>{try{let je=de.trim();je=je.replace(/^```json\s*/,"").replace(/^```\s*/,"").replace(/\s*```$/,"");let le;try{le=JSON.parse(je)}catch{try{je=je.replace(/,\s*([}\]])/g,"$1"),le=JSON.parse(je)}catch{throw new Error("Cannot read AI response. Please ensure you copied the full code.")}}ye?await x({result:le,preferences:{language:ie,targetAudience:F,tone:oe}}):await x(le),y?o():(ee(!1),ce(!0))}catch(je){console.error(je),ee(!1),j(je.message||"Failed to process.")}},50))},He=je=>{je.key==="Enter"&&(je.metaKey||je.ctrlKey)&&(je.preventDefault(),ot())},Xe=()=>s.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-3",children:[s.jsxs("div",{className:"space-y-1",children:[s.jsxs("label",{className:"text-[9px] font-black text-neutral-400 uppercase tracking-widest px-1 flex items-center gap-1",children:[s.jsx(th,{size:10})," Language"]}),s.jsxs("select",{value:ie,onChange:je=>ge(je.target.value),className:"w-full px-3 py-2 bg-white border border-neutral-200 rounded-xl text-xs font-bold focus:ring-2 focus:ring-neutral-900 outline-none appearance-none cursor-pointer",children:[s.jsx("option",{value:"English",children:"English"}),s.jsx("option",{value:"Vietnamese",children:"Vietnamese"})]})]}),s.jsxs("div",{className:"space-y-1",children:[s.jsxs("label",{className:"text-[9px] font-black text-neutral-400 uppercase tracking-widest px-1 flex items-center gap-1",children:[s.jsx(Gb,{size:10})," Audience"]}),s.jsxs("select",{value:F,onChange:je=>K(je.target.value),className:"w-full px-3 py-2 bg-white border border-neutral-200 rounded-xl text-xs font-bold focus:ring-2 focus:ring-neutral-900 outline-none appearance-none cursor-pointer",children:[s.jsx("option",{value:"Adult",children:"Adult"}),s.jsx("option",{value:"Kid",children:"Kid"})]})]}),s.jsxs("div",{className:"space-y-1",children:[s.jsxs("label",{className:"text-[9px] font-black text-neutral-400 uppercase tracking-widest px-1 flex items-center gap-1",children:[s.jsx(Ib,{size:10})," Persona"]}),s.jsxs("select",{value:oe,onChange:je=>_(je.target.value),className:"w-full px-3 py-2 bg-white border border-neutral-200 rounded-xl text-xs font-bold focus:ring-2 focus:ring-neutral-900 outline-none appearance-none cursor-pointer",children:[s.jsx("option",{value:"friendly_elementary",children:"Friendly"}),s.jsx("option",{value:"professional_professor",children:"Professional"})]})]})]});return s.jsx("div",{className:"fixed inset-0 z-[300] flex items-center justify-center p-4 bg-white/10 backdrop-blur-sm animate-in fade-in duration-200",children:s.jsxs("div",{className:"bg-white w-full max-w-lg rounded-[2.5rem] shadow-2xl flex flex-col overflow-hidden border border-neutral-200 relative ring-4 ring-neutral-100",children:[s.jsx("button",{onClick:o,disabled:z,className:"absolute top-4 right-4 p-2 text-neutral-300 hover:text-neutral-900 hover:bg-neutral-50 rounded-full transition-all z-10 disabled:opacity-0",children:s.jsx(kt,{size:18})}),s.jsxs("div",{className:"p-6 md:p-8 flex flex-col gap-6",children:[s.jsxs("div",{className:"space-y-1 pr-8",children:[s.jsxs("div",{className:"flex items-center gap-2 text-neutral-900",children:[s.jsx("div",{className:"p-1.5 bg-neutral-900 rounded-lg text-white",children:s.jsx(Is,{size:14})}),s.jsx("h3",{className:"font-black text-lg tracking-tight",children:c})]}),s.jsx("p",{className:"text-xs font-medium text-neutral-400 pl-9",children:f})]}),s.jsxs("div",{className:"py-2 space-y-4",children:[!g&&u==="REFINE_WORDS"&&s.jsxs("div",{className:"space-y-1",children:[s.jsx("label",{className:"text-[9px] font-black text-neutral-400 uppercase tracking-widest px-1",children:"Vocabulary List"}),s.jsx("textarea",{value:S,onChange:je=>A(je.target.value),disabled:z||ue,className:"w-full h-32 p-4 bg-neutral-50/50 border border-neutral-200 rounded-2xl text-sm font-medium focus:ring-2 focus:ring-neutral-900 outline-none resize-none shadow-inner leading-relaxed transition-all focus:bg-white disabled:opacity-50",placeholder:"word1; word2; word3..."}),s.jsx("p",{className:"text-[9px] text-neutral-400 px-2 text-right",children:"Edit freely. Separated by semicolon (;) or newline."})]}),["REFINE_UNIT","GENERATE_AUDIO_SCRIPT"].includes(u)&&s.jsxs("div",{className:"space-y-1",children:[s.jsx("label",{className:"text-[9px] font-black text-neutral-400 uppercase tracking-widest px-1",children:"Your Instructions"}),s.jsx("textarea",{value:T,onChange:je=>I(je.target.value),disabled:z||ue,placeholder:u==="GENERATE_AUDIO_SCRIPT"?'e.g., "Focus on the definition of key terms"':'e.g., "Add more advanced vocabulary and examples."',className:"w-full h-24 p-4 bg-neutral-50/50 border border-neutral-200 rounded-2xl text-sm font-medium focus:ring-2 focus:ring-neutral-900 outline-none resize-none transition-all focus:bg-white disabled:opacity-50"})]}),(u==="GENERATE_LESSON"||u==="GENERATE_WORD_LESSON")&&s.jsx(s.Fragment,{children:s.jsxs("div",{className:"space-y-1",children:[s.jsxs("label",{className:"text-[9px] font-black text-neutral-400 uppercase tracking-widest px-1 flex items-center gap-1",children:[s.jsx(yo,{size:10})," Topic"]}),s.jsx("input",{value:C,onChange:je=>X(je.target.value),placeholder:"e.g. Present Perfect Tense, Space Travel",className:"w-full px-4 py-2 bg-neutral-50/50 border border-neutral-200 rounded-xl text-sm font-bold focus:ring-2 focus:ring-neutral-900 outline-none"})]})}),ye&&Xe(),u==="GENERATE_UNIT"&&s.jsxs("div",{className:"space-y-1",children:[s.jsx("label",{className:"text-[9px] font-black text-neutral-400 uppercase tracking-widest px-1",children:"Topic or Request"}),s.jsx("input",{value:T,onChange:je=>I(je.target.value),disabled:z||ue,placeholder:'e.g., "Trees", "Technology", "The Ocean"',className:"w-full px-4 py-3 bg-neutral-50/50 border border-neutral-200 rounded-xl text-sm font-bold focus:ring-2 focus:ring-neutral-900 outline-none"})]}),u==="GENERATE_PLAN"&&s.jsxs("div",{className:"space-y-1",children:[s.jsx("label",{className:"text-[9px] font-black text-neutral-400 uppercase tracking-widest px-1",children:"What is your goal?"}),s.jsx("textarea",{value:W,onChange:je=>J(je.target.value),disabled:z||ue,placeholder:'e.g., "Prepare for IELTS in 30 days focusing on academic writing"',className:"w-full h-24 p-4 bg-neutral-50/50 border border-neutral-200 rounded-2xl text-sm font-medium focus:ring-2 focus:ring-neutral-900 outline-none resize-none transition-all focus:bg-white disabled:opacity-50"})]})]}),s.jsxs("div",{className:"space-y-3 pt-4 border-t border-neutral-100",children:[s.jsx("div",{className:"space-y-2",children:s.jsx("button",{onClick:we,disabled:z||ue,className:`w-full py-3 px-4 rounded-xl font-bold text-xs flex items-center justify-between transition-all group ${fe?"bg-green-50 text-green-700 border border-green-200":"bg-neutral-50 text-neutral-600 border border-neutral-200 hover:border-neutral-300 hover:bg-white"} disabled:opacity-50`,children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:`p-1.5 rounded-md ${fe?"bg-green-200 text-green-800":"bg-white text-neutral-400 shadow-sm"}`,children:fe?s.jsx(Os,{size:14}):s.jsx(vb,{size:14})}),s.jsx("span",{className:"uppercase tracking-widest text-[10px]",children:fe?"Command Copied":"Step 1: Copy Command"})]})})}),s.jsxs("div",{className:`relative flex items-start gap-2 p-1.5 rounded-2xl border-2 transition-all ${v?"border-red-100 bg-red-50/30":ue?"border-green-200 bg-green-50":"border-neutral-100 bg-white focus-within:border-neutral-900 focus-within:shadow-md"}`,children:[s.jsx("div",{className:"pl-3 py-3 shrink-0",children:ue?s.jsx(Os,{size:18,className:"text-green-600"}):s.jsx(fb,{size:18,className:v?"text-red-400":"text-neutral-400"})}),s.jsx("textarea",{ref:te,value:ue?"Data applied! Success.":de,onChange:je=>{me(je.target.value),j(null)},onKeyDown:He,disabled:z||ue,placeholder:z?"Processing data...":"Step 2: Paste AI response...",className:`w-full bg-transparent border-none text-xs font-medium placeholder:text-neutral-400 focus:ring-0 outline-none resize-none min-h-[70px] p-2 ${ue?"text-green-700 font-bold":"text-neutral-800"}`,rows:3,autoComplete:"off"}),s.jsx("button",{onClick:ot,disabled:!de.trim()||z,className:"p-2.5 rounded-xl transition-all shadow-md active:scale-90 flex items-center justify-center w-10 h-10 self-end bg-neutral-900 text-white hover:bg-neutral-800 disabled:opacity-20 disabled:scale-95",children:z?s.jsx(Ct,{size:16,className:"animate-spin"}):s.jsx(Sb,{size:16})})]})]})]})]})})},oo=({title:l,icon:o,suggestions:u})=>!u||u.length===0?null:s.jsxs("div",{className:"space-y-3",children:[s.jsxs("h4",{className:"text-xs font-black uppercase tracking-widest text-neutral-500 flex items-center gap-2 border-b border-neutral-200 pb-2",children:[o,l]}),s.jsx("ul",{className:"space-y-3",children:u.map((c,f)=>s.jsxs("li",{className:"flex items-start gap-3",children:[c.suggestion==="learn"?s.jsx(Os,{size:16,className:"text-green-500 shrink-0 mt-0.5"}):s.jsx(xb,{size:16,className:"text-neutral-400 shrink-0 mt-0.5"}),s.jsxs("div",{children:[s.jsx("p",{className:`font-bold text-sm ${c.suggestion==="ignore"?"text-neutral-500":"text-neutral-900"}`,children:c.item}),s.jsxs("p",{className:"text-xs text-neutral-600 italic",children:['"',c.reason,'"']})]})]},f))})]}),hv=({isOpen:l,onClose:o,suggestions:u})=>!l||!u?null:s.jsx("div",{className:"fixed inset-0 z-[200] flex items-center justify-center p-4 bg-black/60 backdrop-blur-sm animate-in fade-in duration-200",children:s.jsxs("div",{className:"bg-white w-full max-w-2xl rounded-[2.5rem] shadow-2xl border border-neutral-200 flex flex-col max-h-[90vh]",children:[s.jsxs("header",{className:"px-8 py-6 border-b border-neutral-100 flex justify-between items-start shrink-0",children:[s.jsxs("div",{children:[s.jsxs("h3",{className:"text-xl font-black text-neutral-900 flex items-center gap-2",children:[s.jsx(od,{size:20,className:"text-amber-500"})," Learning Suggestions"]}),s.jsx("p",{className:"text-sm text-neutral-500 mt-1",children:u.overall_summary})]}),s.jsx("button",{type:"button",onClick:o,className:"p-2 -mr-2 text-neutral-400 hover:bg-neutral-100 rounded-full",children:s.jsx(kt,{size:20})})]}),s.jsxs("main",{className:"p-8 overflow-y-auto space-y-6",children:[s.jsx(oo,{title:"Word Family",icon:s.jsx(yo,{size:14}),suggestions:u.wordFamily}),s.jsx(oo,{title:"Collocations",icon:s.jsx(bo,{size:14}),suggestions:u.collocations}),s.jsx(oo,{title:"Idioms",icon:s.jsx(vo,{size:14}),suggestions:u.idioms}),s.jsx(oo,{title:"Paraphrases (Word Power)",icon:s.jsx(No,{size:14}),suggestions:u.paraphrases})]})]})});function Bm(l,o){var u,c,f;switch(o.type){case"REINITIALIZE":const d=o.payload;return{...d,register:d.register||"raw",groupsString:((u=d.groups)==null?void 0:u.join(", "))||"",studiedStatus:d.lastReview&&d.lastGrade||"NEW",collocationsArray:d.collocationsArray||(d.collocations?d.collocations.split(`
`).map(g=>({text:g.trim(),isIgnored:!1})):[]),idiomsList:d.idiomsList||(d.idioms?d.idioms.split(`
`).map(g=>({text:g.trim(),isIgnored:!1})):[]),prepositionsList:d.prepositions||[],wordFamily:d.wordFamily||{nouns:[],verbs:[],adjs:[],advs:[]},paraphrases:d.paraphrases||[],essayEdit:((c=d.lesson)==null?void 0:c.essay)||"",testEdit:((f=d.lesson)==null?void 0:f.test)||""};case"SET_FIELD":return{...l,[o.payload.field]:o.payload.value};case"SET_FLAG":const{flag:h}=o.payload,x={...l,[h]:!l[h]};return["isIdiom","isPhrasalVerb","isCollocation","isStandardPhrase"].includes(h)&&x[h]&&(h!=="isIdiom"&&(x.isIdiom=!1),h!=="isPhrasalVerb"&&(x.isPhrasalVerb=!1),h!=="isCollocation"&&(x.isCollocation=!1),h!=="isStandardPhrase"&&(x.isStandardPhrase=!1)),x;case"SET_LIST_ITEM":return{...l,[o.payload.list]:o.payload.data};case"APPLY_AI_MERGE":const p=dv(l,o.payload);return{...l,...p,register:p.register,prepositionsList:p.prepositions||[]};default:return l}}const gv=({word:l,user:o,onSave:u,onClose:c,onSwitchToView:f})=>{const{showToast:d}=Ul(),[h,x]=w.useReducer(Bm,l,K=>Bm({},{type:"REINITIALIZE",payload:K})),[p,g]=w.useState(!1),[y,S]=w.useState(null),[A,T]=w.useState(!1),[I,N]=w.useState(!1);w.useEffect(()=>{x({type:"REINITIALIZE",payload:l}),S(null)},[l]);const R=K=>iv(K.words.split(/[,\n]+/).map(ie=>ie.trim()).filter(Boolean),o.nativeLanguage||"Vietnamese"),O=K=>{const ie=Array.isArray(K)?K[0]:K;ie&&(x({type:"APPLY_AI_MERGE",payload:ie}),g(!1))},H=()=>{y?T(!0):N(!0)},U=K=>rv(h,o),B=K=>{K&&K.overall_summary?(S(K),N(!1),T(!0)):d("Invalid suggestion format from AI.","error")},L=K=>{K&&K.preventDefault();const{groupsString:ie,studiedStatus:ge,collocationsArray:oe,idiomsList:_,prepositionsList:W,essayEdit:J,testEdit:de,...me}=h;let v=me.wordFamily;if(v){const P={};let te=!1;["nouns","verbs","adjs","advs"].forEach(he=>{var we;const ye=((we=v[he])==null?void 0:we.filter(ot=>ot.word.trim()))||[];ye.length>0&&(P[he]=ye,te=!0)}),v=te?P:void 0}let j={...me,wordFamily:v,prepositions:W.filter(P=>P.prep.trim()).length>0?W.filter(P=>P.prep.trim()):void 0,collocationsArray:oe.filter(P=>P.text.trim()),collocations:oe.filter(P=>P.text.trim()).map(P=>P.text).join(`
`),idiomsList:_.filter(P=>P.text.trim()),idioms:_.filter(P=>P.text.trim()).map(P=>P.text).join(`
`),lesson:{essay:J,test:de},groups:ie.split(",").map(P=>P.trim()).filter(Boolean),updatedAt:Date.now()};const z={...j.lastTestResults||{}},ee=new Set((j.collocationsArray||[]).filter(P=>!P.isIgnored).map(P=>P.text.toLowerCase())),ue=new Set((j.idiomsList||[]).filter(P=>!P.isIgnored).map(P=>P.text.toLowerCase())),ce=new Set((j.prepositions||[]).filter(P=>!P.isIgnored).map(P=>P.prep.toLowerCase())),fe=new Set((j.paraphrases||[]).filter(P=>!P.isIgnored).map(P=>P.word.toLowerCase())),D=new Set;j.wordFamily&&["nouns","verbs","adjs","advs"].forEach(P=>{(j.wordFamily[P]||[]).forEach(te=>{!te.isIgnored&&te.word.trim()&&D.add(te.word.trim().toLowerCase())})});for(const P in z){const te=P.split(":"),he=te[0],ye=te.slice(1).join(":").toLowerCase();let we=!1;switch(he){case"COLLOCATION_QUIZ":ee.has(ye)||(we=!0);break;case"IDIOM_QUIZ":ue.has(ye)||(we=!0);break;case"PREPOSITION_QUIZ":ce.has(ye)||(we=!0);break;case"PARAPHRASE_QUIZ":fe.has(ye)||(we=!0);break;case"WORD_FAMILY":D.has(ye)||(we=!0);break}we&&delete z[P]}j.lastTestResults=z;const re=l.lastReview&&l.lastGrade||"NEW";ge!==re?ge==="NEW"?j=wg(j):j=Sg(j,ge):(j.complexity=Za(j),j.masteryScore=Gt(j),j.gameEligibility=Qa(j)),u(j),d("Word saved successfully!","success")},Y=K=>{const ie=h[K]||[];return{update:(ge,oe)=>x({type:"SET_LIST_ITEM",payload:{list:K,data:[...ie].map((_,W)=>W===ge?{..._,...oe}:_)}}),toggleIgnore:ge=>x({type:"SET_LIST_ITEM",payload:{list:K,data:[...ie].map((oe,_)=>_===ge?{...oe,isIgnored:!oe.isIgnored}:oe)}}),remove:ge=>x({type:"SET_LIST_ITEM",payload:{list:K,data:ie.filter((oe,_)=>_!==ge)}}),add:ge=>x({type:"SET_LIST_ITEM",payload:{list:K,data:[...ie,ge]}})}},Q=K=>{const ie=h.wordFamily||{nouns:[],verbs:[],adjs:[],advs:[]},ge=oe=>x({type:"SET_LIST_ITEM",payload:{list:"wordFamily",data:{...ie,...oe}}});return{update:(oe,_,W)=>{const J=[...ie[K]||[]];J[oe]={...J[oe],[_]:W},ge({[K]:J})},toggleIgnore:oe=>{const _=[...ie[K]||[]];_[oe]={..._[oe],isIgnored:!_[oe].isIgnored},ge({[K]:_})},remove:oe=>{ge({[K]:(ie[K]||[]).filter((_,W)=>W!==oe)})},add:()=>{const oe={word:"",isIgnored:K==="advs"};ge({[K]:[...ie[K]||[],oe]})}}},V=Y("prepositionsList"),C=Y("collocationsArray"),X=Y("idiomsList"),F=Y("paraphrases");return s.jsxs(s.Fragment,{children:[s.jsx(fv,{onClose:c,onSwitchToView:()=>f(l),formData:h,setFormData:(K,ie)=>x({type:"SET_FIELD",payload:{field:K,value:ie}}),setFlag:K=>x({type:"SET_FLAG",payload:{flag:K}}),familyHandler:Q,prepList:V,collocList:C,idiomList:X,paraList:F,handleSubmit:L,onOpenAiRefine:()=>g(!0),onSuggestLearn:H,hasSuggestions:!!y}),s.jsx(hv,{isOpen:A,onClose:()=>T(!1),suggestions:y}),p&&s.jsx(nd,{isOpen:p,onClose:()=>g(!1),type:"REFINE_WORDS",title:"Manual AI Refinement",description:`Refining details for "${h.word}"`,initialData:{words:h.word},user:o,onGeneratePrompt:R,onJsonReceived:O,actionLabel:"Apply to Word",hidePrimaryInput:!0}),I&&s.jsx(nd,{isOpen:I,onClose:()=>N(!1),type:"REFINE_WORDS",title:"Get Learning Suggestions",description:"AI will suggest what to focus on based on your profile.",initialData:{words:l.word},user:o,onGeneratePrompt:U,onJsonReceived:B,hidePrimaryInput:!0})]})},xv=1500;let _l=[],Oi=null,ld=!1,Tl=null;function yv(l){const o=l.numberOfChannels,u=l.length*o*2+44,c=new ArrayBuffer(u),f=new DataView(c),d=[];let h,x,p=0,g=0;for(S(1179011410),S(u-8),S(1163280727),S(544501094),S(16),y(1),y(o),S(l.sampleRate),S(l.sampleRate*2*o),y(o*2),y(16),S(1635017060),S(u-g-4),h=0;h<l.numberOfChannels;h++)d.push(l.getChannelData(h));for(;g<u;){for(h=0;h<o;h++)x=Math.max(-1,Math.min(1,d[h][p])),x=(x<0?x*32768:x*32767)|0,f.setInt16(g,x,!0),g+=2;p++}return new Blob([c],{type:"audio/wav"});function y(A){f.setUint16(g,A,!0),g+=2}function S(A){f.setUint32(g,A,!0),g+=4}}const bv=()=>{Tl=null},Rg=async l=>{if(l)return Tl=l.replace(/\/$/,""),Tl;if(Tl)return Tl;const o=xt();return Tl=fa(o),Tl};function vv(){if(typeof window>"u"||!window.speechSynthesis)return;const l=()=>{const o=window.speechSynthesis.getVoices();o&&o.length>0&&(_l=Array.from(o))};l(),window.speechSynthesis.onvoiceschanged!==void 0&&(window.speechSynthesis.onvoiceschanged=l)}vv();const Sv=()=>new Promise(l=>{const o=window.speechSynthesis.getVoices();if(o.length>0)_l=Array.from(o),l(_l);else{const u=()=>{const c=window.speechSynthesis.getVoices();c.length>0&&(_l=Array.from(c),l(_l),window.speechSynthesis.onvoiceschanged=null)};window.speechSynthesis.onvoiceschanged=u,setTimeout(()=>{const c=window.speechSynthesis.getVoices();_l=Array.from(c),l(_l)},1e3)}}),wv=async l=>{try{const u=`${await Rg(l)}/voices`,c=await fetch(u,{method:"GET",headers:{"Content-Type":"application/json"},signal:AbortSignal.timeout(2e3)});if(!c.ok)throw new Error(`HTTP ${c.status}`);return await c.json()}catch{return null}},en=l=>{ld=l,window.dispatchEvent(new CustomEvent("audio-status-changed",{detail:{isSpeaking:ld}}))},Hi=()=>{Oi&&(Oi.pause(),Oi.src="",Oi=null),typeof window<"u"&&window.speechSynthesis&&window.speechSynthesis.cancel(),en(!1)},Mg=()=>ld,Nv=async(l,o)=>{const u=xt(),c=fa(u),f=o||Ad(l),d=u.audioCoach.activeCoach,h=u.audioCoach.coaches[d],x=f==="vi"?h.viVoice:h.enVoice,p=f==="vi"?h.viAccent:h.enAccent;try{const g=`${c}/speak`,y=await fetch(g,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({text:l,language:f,accent:p,voice:x}),signal:AbortSignal.timeout(2e4)});if(y.ok)return await y.blob()}catch(g){console.error("Prefetch failed",g)}return null},Lg=l=>{Hi(),en(!0);const o=URL.createObjectURL(l),u=new Audio(o);return Oi=u,new Promise((c,f)=>{u.play().then(()=>{u.onended=()=>{URL.revokeObjectURL(o),en(!1),c(!0)}}).catch(d=>{URL.revokeObjectURL(o),en(!1),f(d)})})},jv=async(l,o,u,c,f)=>{Hi(),en(!0);try{const h=`${await Rg(f)}/speak`,p=await fetch(h,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({text:l,language:o,accent:u,voice:c}),signal:AbortSignal.timeout(2e4)});if(!p.ok)throw new Error("Server unreachable");const g=p.headers.get("Content-Type");if(g&&g.includes("audio")){const y=await p.blob();return await Lg(y)}else return en(!1),!0}catch(d){throw en(!1),d}},Ev=(l,o,u="en")=>new Promise(c=>{if(typeof window>"u"||!window.speechSynthesis)return c(!1);Hi(),en(!0);const f=new SpeechSynthesisUtterance(l);f.lang=u==="vi"?"vi-VN":"en-US";const d=window.speechSynthesis.getVoices(),h=o&&d.find(x=>x.name===o)||d.find(x=>x.lang.startsWith(u));h&&(f.voice=h),f.rate=.95,f.onend=()=>{en(!1),c(!0)},f.onerror=()=>{en(!1),c(!1)},window.speechSynthesis.speak(f)}),Ad=l=>/[]/i.test(l)?"vi":"en",Av=l=>l?l.substring(0,xv).normalize("NFD").replace(/\*+/g,"").replace(//g,", ").replace(/[^a-zA-Z0-9.,!?%'\-\s\u00C0-\u1EF9]/g,"").trim():"",Ft=async(l,o=!1,u,c,f,d)=>{if(typeof window>"u"||!l)return;const h=Av(l);if(!h)return;if(d)try{await Lg(d);return}catch{console.warn("Play preloaded failed, falling back to standard")}const x=xt(),p=x.audioCoach.activeCoach,g=x.audioCoach.coaches[p],y=fa(x),S=u||Ad(h),A=c!==void 0?c:S==="vi"?g.viVoice:g.enVoice,T=f!==void 0?f:S==="vi"?g.viAccent:g.enAccent;try{await jv(h,S,T,A,y);return}catch{await Ev(h,A,S)}},Ug=async()=>{const l=await navigator.mediaDevices.getUserMedia({audio:!0}),o=["audio/webm;codecs=opus","audio/webm","audio/mp4"].find(u=>MediaRecorder.isTypeSupported(u));Ea=new MediaRecorder(l,o?{mimeType:o}:void 0),sd=[],Ea.ondataavailable=u=>{u.data.size>0&&sd.push(u.data)},Ea.start()};let Ea=null,sd=[];const zg=()=>new Promise(l=>{if(!Ea)return l(null);const o=Ea.mimeType||"audio/webm";Ea.onstop=()=>{const u=new Blob(sd,{type:o}),c=new FileReader;c.readAsDataURL(u),c.onloadend=()=>{const d=c.result.split(",")[1]||"";l({base64:d,mimeType:o})},Ea==null||Ea.stream.getTracks().forEach(f=>f.stop()),Ea=null},Ea.state!=="inactive"?Ea.stop():l(null)}),yS=Object.freeze(Object.defineProperty({__proto__:null,bufferToWav:yv,detectLanguage:Ad,fetchServerVoices:wv,getAvailableVoices:Sv,getIsSpeaking:Mg,prefetchSpeech:Nv,resetAudioProtocolCache:bv,speak:Ft,startRecording:Ug,stopRecording:zg,stopSpeaking:Hi},Symbol.toStringTag,{value:"Module"})),_v=({title:l,type:o,currentStep:u,totalSteps:c,onClose:f,onFinish:d,label:h="Challenge",isQuickFire:x,elapsedTime:p})=>s.jsxs("div",{className:"px-6 py-5 border-b border-neutral-100 flex items-center justify-between bg-neutral-50/50 shrink-0",children:[s.jsx("button",{onClick:f,className:"p-2 -ml-2 text-neutral-400 hover:text-neutral-900 transition-colors",title:x?"Exit to Dashboard":"Close",children:s.jsx(kt,{size:20})}),s.jsxs("div",{className:"flex flex-col items-center",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsxs("span",{className:"text-[10px] font-black text-neutral-400 uppercase tracking-widest",children:[h," ",u," of ",c]}),p&&s.jsxs("div",{className:"flex items-center gap-1 bg-neutral-200/50 px-1.5 py-0.5 rounded-md",children:[s.jsx(Pm,{size:10,className:"text-neutral-500"}),s.jsx("span",{className:"text-[10px] font-mono font-bold text-neutral-600",children:p})]})]}),s.jsx("span",{className:"text-xs font-black text-neutral-900",children:l})]}),s.jsx("button",{onClick:()=>d(x),className:"p-2 -mr-2 text-amber-500 hover:text-amber-700 transition-colors",title:x?"Finish Session & See Results":"Finish & Save",children:s.jsx(Eb,{size:20,className:x?"fill-amber-500":""})})]});class _d{constructor(){this.recognition=null,this.finalTranscript="",this.onResultCallback=null,this.onEndCallback=null,this.initBrowserRecognition()}initBrowserRecognition(){const o=window.SpeechRecognition||window.webkitSpeechRecognition;o&&(this.recognition=new o,this.recognition.continuous=!0,this.recognition.interimResults=!0,this.recognition.lang="en-US",this.recognition.onresult=u=>{let c="",f="";for(let d=u.resultIndex;d<u.results.length;++d)u.results[d].isFinal?f+=u.results[d][0].transcript:c+=u.results[d][0].transcript;this.finalTranscript+=f,this.onResultCallback&&this.onResultCallback(this.finalTranscript,c)},this.recognition.onend=()=>{this.onEndCallback&&this.onEndCallback(this.finalTranscript)},this.recognition.onerror=u=>{console.error("Speech Recognition Error:",u.error),this.stop()})}async start(o,u){if(this.onResultCallback=o,this.onEndCallback=u,this.finalTranscript="",!this.recognition){console.error("Speech Recognition not supported in this browser.");return}try{this.recognition.start()}catch(c){console.error("Speech Recognition start failed:",c)}}stop(){if(this.recognition)try{this.recognition.stop()}catch{}}}const _o=({isListening:l,onClick:o,disabled:u,className:c})=>s.jsx("button",{onClick:o,disabled:u,className:`p-2.5 rounded-xl transition-all shadow-sm flex items-center justify-center
            ${l?"bg-red-500 text-white animate-pulse ring-2 ring-red-200 border-transparent":"bg-white border border-neutral-200 text-neutral-400 hover:text-indigo-600 hover:border-indigo-300"} ${c}`,title:l?"Stop Recording":"Use Voice Input",tabIndex:-1,children:l?s.jsx(So,{size:18,fill:"currentColor"}):s.jsx(zi,{size:18})}),To=()=>{const[l,o]=w.useState({});return{validationState:l,clearValidation:h=>{o(x=>{if(!x[h])return x;const p={...x};return delete p[h],p})},getValidationClass:h=>{const x=l[h];return x==="correct"?"!border-green-500 !ring-2 !ring-green-100 !bg-green-50 text-green-900":x==="incorrect"?"!border-red-500 !ring-2 !ring-red-100 !bg-red-50 text-red-900":""},handleSmartChange:(h,x,p)=>{const g=h.target.value;if(g===" ")x(p);else if(g.endsWith("  ")){const y=g.substring(0,g.length-2),S=y.length>0?" ":"";x(y+S+p)}else x(g)},handleValidationKeyDown:(h,x,p)=>{if(h.key==="Escape"){h.preventDefault(),h.stopPropagation();const g=h.currentTarget.value,y=A=>A.trim().toLowerCase().replace(/[^a-z0-9]/g,"");let S=!1;if(Array.isArray(p)){const A=g.split(",").map(y).filter(Boolean);if(A.length===0){o(I=>({...I,[x]:null}));return}const T=new Set(p.map(y));S=A.every(I=>T.has(I))}else{const A=y(g);if(!A){o(T=>({...T,[x]:null}));return}S=y(p)===A}o(A=>({...A,[x]:S?"correct":"incorrect"}))}}}},Tv=({group:l,userAnswers:o,results:u,onAnswerChange:c,isFinishing:f,showHint:d,toggleListening:h,listeningId:x,containerRef:p})=>{const{clearValidation:g,handleSmartChange:y,handleValidationKeyDown:S,getValidationClass:A}=To();return s.jsxs("div",{ref:p,className:"flex flex-col animate-in fade-in duration-300",children:[s.jsxs("div",{className:"text-center space-y-2 mb-6",children:[s.jsx("h3",{className:"text-lg font-black text-neutral-900",children:"Preposition Drill"}),s.jsx("p",{className:"text-xs text-neutral-500 font-medium max-w-xs mx-auto",children:"Complete the collocations. Type the missing preposition(s)."})]}),s.jsx("div",{className:"space-y-4",children:l.map(T=>{var Q,V;const I=o[T.index]||"",N=u?u[T.index]:null,R=typeof N=="boolean"?N:N&&typeof N=="object"?N.correct:!1,O=N!==null&&!R,H=T.challenge.example.split("___"),U=(Q=H[0])==null?void 0:Q.trim(),B=(V=H[1])==null?void 0:V.trim(),L=`prep-${T.index}`,Y=x===L;return s.jsxs("div",{className:"w-full bg-neutral-50 border-2 border-neutral-100 rounded-2xl p-5 flex flex-wrap items-center justify-center gap-x-2 gap-y-3 shadow-sm transition-all focus-within:border-neutral-300 focus-within:shadow-md focus-within:bg-white",children:[U&&s.jsx("span",{className:"text-lg font-medium text-neutral-600 text-right",children:U}),s.jsxs("div",{className:"relative mx-1 flex items-center gap-2",children:[s.jsx("input",{type:"text",value:I,onChange:C=>{g(L),y(C,X=>c(T.index,X),T.challenge.answer)},onKeyDown:C=>{S(C,L,T.challenge.answer)},disabled:f,className:`h-10 min-w-[80px] max-w-[160px] w-[12ch] text-center text-lg font-bold rounded-lg border-b-2 outline-none transition-colors ${f?R?"bg-green-50 border-green-500 text-green-700":"bg-red-50 border-red-500 text-red-700 decoration-red-500 line-through decoration-2":`bg-white border-neutral-300 text-neutral-900 focus:border-neutral-900 focus:bg-neutral-50 ${A(L)}`}`,placeholder:"?",autoComplete:"off",autoCorrect:"off",autoCapitalize:"off"}),!f&&s.jsx(_o,{isListening:Y,onClick:()=>h(L,C=>c(T.index,C)),disabled:f}),(f&&O||d)&&s.jsxs("div",{className:"absolute left-1/2 -translate-x-1/2 top-full mt-2 z-10",children:[s.jsxs("div",{className:"bg-neutral-900 text-white text-xs font-bold py-1 px-3 rounded-lg shadow-lg whitespace-nowrap flex items-center gap-1 animate-in zoom-in-95",children:[s.jsx(Ii,{size:10,className:"text-green-400"})," ",T.challenge.answer]}),s.jsx("div",{className:"w-2 h-2 bg-neutral-900 rotate-45 absolute left-1/2 -translate-x-1/2 -top-1"})]})]}),B&&s.jsx("span",{className:"text-lg font-medium text-neutral-800 text-left",children:B})]},T.index)})})]})},Yu=({challenge:l,answer:o,onAnswer:u,isFinishing:c,result:f,showHint:d,itemLabel:h,instructionText:x,containerRef:p})=>{const[g,y]=w.useState(l.contexts.map(B=>({...B}))),[S,A]=w.useState(l.items.map(B=>({...B}))),[T,I]=w.useState(null),N=(B,L)=>{const Y=new Map(o);if(L===null)Y.delete(B);else{for(const[Q,V]of Y.entries())V===L&&Y.delete(Q);Y.set(B,L)}u(Y)};w.useEffect(()=>{const B=l.contexts.map(Y=>({...Y})),L=l.items.map(Y=>({...Y}));if(o)for(const[Y,Q]of o.entries()){const V=B.findIndex(C=>C.id===Y);V!==-1&&(B[V].matchId=Q)}y(B),A(L)},[o,l]);const R=B=>{c||I(L=>L===B?null:B)},O=B=>{c||!T||(N(B,T),I(null))},H=f&&typeof f=="object"&&"details"in f?f.details:{},U=()=>{c||u(new Map)};return s.jsxs("div",{ref:p,className:"flex flex-col gap-4 animate-in fade-in duration-300",children:[s.jsx("div",{className:"text-center",children:s.jsx("p",{className:"text-xs text-neutral-500 font-medium",children:x})}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsx("div",{className:"space-y-3",children:g.map(B=>{var X;const L=c&&H[B.id]===!0,Y=c&&H[B.id]===!1,Q=l.items.find(F=>F.id===B.matchId),V=(X=l.items.find(F=>F.pairId===B.pairId))==null?void 0:X.text;let C="border-neutral-200";return c?(L&&(C="border-green-400 bg-green-50"),Y&&(C="border-red-400 bg-red-50")):d?C="border-yellow-400 bg-yellow-50":B.matchId&&(C="border-neutral-400 bg-neutral-50"),s.jsxs("button",{onClick:()=>O(B.id),disabled:c||!T,className:`relative w-full p-3 rounded-xl border-2 text-left transition-all duration-200 ${C} disabled:cursor-not-allowed`,children:[h(B),s.jsx("p",{className:"font-medium text-xs leading-snug text-neutral-600",children:B.text}),B.matchId&&!c&&!d&&s.jsx("p",{className:"font-bold text-xs mt-2 pt-2 border-t border-neutral-200",children:Q==null?void 0:Q.text}),d&&!c&&s.jsxs("div",{className:"mt-2 pt-2 border-t flex items-center gap-2 text-yellow-700 animate-in fade-in",children:[s.jsx(Os,{size:14,className:"text-yellow-600"}),s.jsx("p",{className:"font-bold text-xs",children:V})]}),c&&s.jsxs("div",{className:"mt-2 pt-2 border-t flex items-center gap-2",children:[L?s.jsx(Os,{size:14,className:"text-green-500"}):s.jsx(kt,{size:14,className:"text-red-500"}),s.jsx("p",{className:`font-bold text-xs ${Y?"text-red-700":"text-green-700"}`,children:(Q==null?void 0:Q.text)||"No selection"})]}),c&&Y&&s.jsxs("p",{className:"text-[10px] text-green-700 font-bold mt-1",children:["Correct: ",V]})]},B.id)})}),s.jsx("div",{className:"space-y-3",children:S.map(B=>{var V;const L=T===B.id,Y=o==null?void 0:o.has(((V=g.find(C=>C.matchId===B.id))==null?void 0:V.id)||"");let Q="bg-white border-neutral-200 text-neutral-800 hover:border-neutral-900";return c&&Y?Q="bg-neutral-100 border-neutral-200 text-neutral-400 opacity-60":L?Q="bg-indigo-600 border-indigo-600 text-white ring-4 ring-indigo-100":Y&&(Q="bg-neutral-100 border-neutral-200 text-neutral-400 opacity-60"),s.jsx("button",{onClick:()=>R(B.id),disabled:c||Y,className:`w-full p-3 rounded-xl border-2 text-left transition-all duration-200 disabled:cursor-not-allowed ${Q}`,children:s.jsx("p",{className:"font-bold text-sm leading-snug",children:B.text})},B.id)})})]}),o&&o.size>0&&!c&&s.jsx("div",{className:"flex justify-center pt-2",children:s.jsxs("button",{onClick:U,className:"flex items-center gap-1.5 text-xs font-bold text-neutral-500 hover:text-neutral-900 transition-colors",children:[s.jsx(ho,{size:12})," Reset"]})})]})},Cv=({challenge:l,onAnswer:o,isFinishing:u,result:c,containerRef:f})=>{const[d,h]=w.useState(!1),[x,p]=w.useState(""),g=w.useRef(null);w.useEffect(()=>{try{g.current=new _d}catch(I){console.error("Speech Recognition not supported",I)}return()=>{var I;(I=g.current)==null||I.stop()}},[]);const y=()=>{g.current&&(p(""),h(!0),g.current.start((I,N)=>p(I+N),I=>{h(!1),o(I)}))},S=()=>{var I;(I=g.current)==null||I.stop()},A=()=>{d?S():y()},T=c===!0;return s.jsxs("div",{ref:f,className:"text-center space-y-8 animate-in fade-in duration-300 flex flex-col items-center",children:[s.jsx("p",{className:"text-sm font-bold text-neutral-500",children:"Press the button and pronounce the word below."}),s.jsx("h2",{className:"text-4xl font-black text-neutral-900 tracking-tight",children:l.word.word}),s.jsx("button",{onClick:A,disabled:u,className:`w-24 h-24 rounded-full flex items-center justify-center shadow-lg transition-all active:scale-95 disabled:opacity-50
                    ${d?"bg-neutral-900 text-white animate-pulse":"bg-red-600 text-white hover:scale-105 shadow-red-500/30"}`,children:d?s.jsx(So,{size:32,fill:"white"}):s.jsx(zi,{size:32})}),s.jsx("div",{className:"w-full max-w-sm min-h-[6rem] p-4 bg-neutral-50 border border-neutral-200 rounded-xl text-lg font-medium text-neutral-600 italic",children:x||"..."}),u&&s.jsxs("div",{className:`flex items-center gap-2 font-bold text-lg animate-in fade-in slide-in-from-bottom-2 ${T?"text-green-600":"text-red-600"}`,children:[T?s.jsx(hb,{size:20}):s.jsx(yb,{size:20}),s.jsx("span",{children:T?"Correct!":`Not quite. The word was "${l.word.word}".`})]})]})},Xu=({word:l,title:o,cue:u,options:c,answer:f,selected:d,onAnswer:h,isFinishing:x,showHint:p,containerRef:g})=>s.jsxs("div",{ref:g,className:"text-center space-y-6 animate-in fade-in duration-300 flex flex-col",children:[s.jsxs("div",{className:"space-y-1",children:[s.jsx("p",{className:"text-[10px] font-black uppercase text-neutral-400 tracking-widest",children:o}),s.jsx("h2",{className:"text-3xl font-black text-neutral-900",children:l.word}),u&&s.jsx("div",{className:"inline-flex items-center gap-2 bg-neutral-100 px-3 py-1.5 rounded-lg border border-neutral-200 max-w-sm mx-auto mt-2",children:s.jsx("span",{className:"text-xs font-bold text-neutral-700 italic",children:u})})]}),s.jsx("div",{className:"grid grid-cols-1 gap-3",children:c.map((y,S)=>{let A="bg-white border-neutral-200 hover:border-neutral-400 text-neutral-700";return x?y===f?A="bg-green-50 border-green-500 text-green-700 shadow-md ring-1 ring-green-500":y===d&&y!==f?A="bg-red-50 border-red-500 text-red-700 opacity-60":A="bg-neutral-50 border-neutral-100 text-neutral-400 opacity-40":p&&y===f?A="bg-yellow-50 border-yellow-400 text-yellow-800 shadow-md ring-1 ring-yellow-400":d===y&&(A="bg-neutral-900 border-neutral-900 text-white shadow-lg"),s.jsx("button",{disabled:x,onClick:()=>h(y),className:`p-4 rounded-2xl border-2 text-sm font-medium transition-all duration-200 text-left leading-snug active:scale-[0.98] ${A}`,children:y},S)})})]}),Ku=({word:l,title:o,cue:u,contextTag:c,answer:f,userAnswer:d,onAnswer:h,isFinishing:x,result:p,showHint:g,containerRef:y,toggleListening:S,listeningId:A})=>{const{clearValidation:T,handleSmartChange:I,handleValidationKeyDown:N,getValidationClass:R}=To(),O=p===!0,H=p===!1,U="main",B=A===U;return s.jsxs("div",{ref:y,className:"text-center space-y-8 animate-in fade-in duration-300 flex flex-col items-center",children:[s.jsxs("div",{className:"space-y-4",children:[s.jsx("p",{className:"text-[10px] font-black uppercase text-neutral-400 tracking-widest",children:o}),s.jsx("h2",{className:"text-3xl font-black text-neutral-900",children:l.word}),(u||c)&&s.jsxs("div",{className:"inline-flex items-center gap-2 bg-neutral-100 px-3 py-1.5 rounded-lg border border-neutral-200 max-w-sm",children:[c&&s.jsx("span",{className:"text-[9px] font-black uppercase bg-white px-1.5 py-0.5 rounded border border-neutral-200 text-neutral-500",children:c}),u&&s.jsx("span",{className:"text-xs font-bold text-neutral-700 italic",children:u})]})]}),s.jsxs("div",{className:"w-full max-w-md flex flex-col items-center gap-3",children:[s.jsxs("div",{className:"relative w-full",children:[s.jsx("input",{type:"text",autoFocus:!0,value:d||"",onChange:L=>{T(U),I(L,h,l.word)},onKeyDown:L=>{N(L,U,f)},disabled:x,className:`w-full text-center py-4 pl-12 pr-12 rounded-2xl border-2 text-xl font-bold focus:outline-none placeholder:text-neutral-200 transition-colors duration-200 ${x?O?"bg-green-50 border-green-500 text-green-600":"bg-red-50 border-red-500 text-red-600":`bg-neutral-50 border-transparent focus:bg-white focus:border-neutral-900 text-neutral-900 shadow-sm ${R(U)}`}`,placeholder:"Type answer...",autoComplete:"off",autoCorrect:"off",autoCapitalize:"off"}),!x&&s.jsx("div",{className:"absolute right-3 top-1/2 -translate-y-1/2",children:s.jsx(_o,{isListening:B,onClick:()=>S(U,h),disabled:x})})]}),(x&&H||g)&&s.jsx("div",{className:"text-green-600 font-bold text-lg animate-in slide-in-from-top-2 bg-green-50 px-3 py-1 rounded-lg border border-green-100 inline-block",children:f})]})]})},kv=({word:l,userAnswer:o,onAnswer:u,isFinishing:c,resultDetails:f,showHint:d,containerRef:h,toggleListening:x,listeningId:p})=>{const{clearValidation:g,handleSmartChange:y,handleValidationKeyDown:S,getValidationClass:A}=To(),T=l.wordFamily,I=o||{},N=(R,O)=>{u({...I,[R]:O})};return s.jsxs("div",{ref:h,className:"space-y-6 animate-in fade-in duration-300",children:[s.jsxs("div",{className:"text-center space-y-1",children:[s.jsx("p",{className:"text-[10px] font-black uppercase text-neutral-400 tracking-widest",children:"Word Family"}),s.jsx("h2",{className:"text-3xl font-black text-neutral-900",children:l.word}),s.jsx("p",{className:"text-xs font-bold text-neutral-500",children:"Fill related forms"})]}),s.jsx("div",{className:"grid grid-cols-1 gap-4",children:["nouns","verbs","adjs","advs"].map(R=>{const O=((T==null?void 0:T[R])||[]).filter(V=>!V.isIgnored).map(V=>V.word);if(O.length===0)return null;const H={nouns:"Noun",verbs:"Verb",adjs:"Adjective",advs:"Adverb"}[R],U=I[R]||"",B=f[R],L=c,Y=`fam-${R}`,Q=p===Y;return s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("span",{className:"w-20 text-[10px] font-black uppercase text-neutral-400 text-right",children:H}),s.jsxs("div",{className:"flex-1 relative flex items-center gap-2",children:[s.jsx("input",{type:"text",value:U,onChange:V=>{g(Y),y(V,C=>N(R,C),l.word)},onKeyDown:V=>{S(V,Y,O)},disabled:c,className:`w-full px-4 py-2 bg-neutral-50 border-2 rounded-xl text-sm font-bold outline-none transition-all ${L?B?"border-green-500 bg-green-50 text-green-800":"border-red-500 bg-red-50 text-red-800":`border-neutral-100 focus:border-neutral-900 focus:bg-white ${A(Y)}`}`,placeholder:"..."}),!c&&s.jsx(_o,{isListening:Q,onClick:()=>x(Y,V=>N(R,V)),disabled:c}),(L&&!B||d)&&s.jsx("div",{className:"text-[10px] font-bold text-green-600 mt-1 pl-1",children:((T==null?void 0:T[R])||[]).filter(V=>!V.isIgnored).map(V=>V.word).join(", ")})]})]},R)})})]})},Ov=({word:l,original:o,shuffled:u,userAnswer:c,onAnswer:f,isFinishing:d,isCorrect:h,showHint:x,containerRef:p})=>{const g=c||[],y=new Set;g.forEach(T=>{const I=u.findIndex((N,R)=>N===T&&!y.has(R));I!==-1&&y.add(I)});const S=T=>{d||f([...g,T])},A=T=>{if(d)return;const I=[...g];I.splice(T,1),f(I)};return s.jsxs("div",{ref:p,className:"flex flex-col space-y-6 animate-in fade-in duration-300",children:[s.jsxs("div",{className:"text-center space-y-1",children:[s.jsx("p",{className:"text-[10px] font-black uppercase text-neutral-400 tracking-widest",children:"Sentence Builder"}),s.jsxs("p",{className:"text-xs text-neutral-500 font-medium",children:['Reconstruct the example sentence for "',l.word,'".']})]}),s.jsxs("div",{className:`min-h-[120px] p-6 rounded-[2rem] border-2 border-dashed flex flex-wrap gap-2 items-center justify-center transition-all ${d?h?"bg-green-50 border-green-200":"bg-red-50 border-red-200":"bg-neutral-50 border-neutral-200"}`,children:[g.length===0&&!d&&s.jsx("span",{className:"text-sm font-bold text-neutral-300 italic",children:"Click words below to build sentence..."}),g.map((T,I)=>s.jsxs("button",{onClick:()=>A(I),disabled:d,className:`px-3 py-2 rounded-xl text-sm font-bold shadow-sm transition-all active:scale-95 ${d?h?"bg-green-50 text-white":"bg-red-500 text-white":"bg-white text-neutral-900 border border-neutral-100 hover:border-neutral-300"}`,children:[T," ",s.jsx(kt,{size:14,className:"inline-block ml-1"})]},I))]}),(d||x)&&s.jsxs("div",{className:"p-4 bg-yellow-50 rounded-2xl border border-yellow-100 animate-in slide-in-from-top-2",children:[s.jsx("p",{className:"text-xs font-black text-yellow-600 uppercase tracking-widest mb-1",children:"Correct Sentence"}),s.jsx("p",{className:"text-sm font-bold text-yellow-900 leading-relaxed",children:o})]}),s.jsx("div",{className:"flex flex-wrap gap-2 justify-center pt-4",children:u.map((T,I)=>{const N=y.has(I);return s.jsx("button",{onClick:()=>S(T),disabled:N||d,className:`px-4 py-2.5 rounded-xl text-sm font-bold transition-all active:scale-95 ${N?"bg-neutral-100 text-neutral-300 border-transparent cursor-default":"bg-white border-2 border-neutral-100 text-neutral-700 hover:border-neutral-900 hover:text-neutral-900 shadow-sm"}`,children:T},I)})}),!d&&g.length>0&&s.jsxs("button",{onClick:()=>f([]),className:"mx-auto flex items-center space-x-1.5 text-[10px] font-black uppercase text-neutral-400 hover:text-neutral-600 transition-colors",children:[s.jsx(kt,{size:12}),s.jsx("span",{children:"Reset"})]})]})},Iv=({word:l,forms:o,ipaOptions:u,userAnswer:c,onAnswer:f,isFinishing:d,result:h,showHint:x,containerRef:p})=>{const g=c||{},y=(S,A)=>{f({...g,[S]:A})};return s.jsxs("div",{ref:p,className:"text-center space-y-6 animate-in fade-in duration-300",children:[s.jsxs("p",{className:"text-sm font-bold text-neutral-500",children:["The word ",s.jsxs("span",{className:"font-black text-neutral-900",children:['"',l.word,'"']})," has different pronunciations. Match the IPA to the part of speech."]}),s.jsx("div",{className:"space-y-6",children:o.map(S=>{const A=g[S.pos];return s.jsxs("div",{className:"space-y-3",children:[s.jsxs("h4",{className:"text-sm font-black text-neutral-900 uppercase tracking-widest bg-neutral-100 py-1 rounded-md",children:["As a ",S.pos]}),s.jsx("div",{className:"grid grid-cols-2 gap-2",children:u.map(T=>{let I="bg-white border-neutral-200 hover:border-neutral-400 text-neutral-600";return d?T===S.ipa?I="bg-green-50 border-green-500 text-green-700 shadow-md":T===A?I="bg-red-50 border-red-500 text-red-700 opacity-60":I="bg-neutral-50 border-neutral-100 text-neutral-400 opacity-50":A===T&&(I="bg-neutral-900 border-neutral-900 text-white shadow-lg"),s.jsx("button",{disabled:d,onClick:()=>y(S.pos,T),className:`p-3 rounded-xl border-2 font-mono text-base font-medium transition-all duration-200 ${I}`,children:T},T)})})]},S.pos)})}),d&&h===!1&&!x&&s.jsx("div",{className:"text-center text-rose-600 font-bold text-sm",children:"One or more selections were incorrect."})]})},Rv=({word:l,userAnswer:o,onAnswer:u,isFinishing:c,result:f,showHint:d,containerRef:h,toggleListening:x,listeningId:p})=>{const{clearValidation:g,handleSmartChange:y,handleValidationKeyDown:S,getValidationClass:A}=To(),T=f===!0,I=f===!1,N="main",R=p===N;return s.jsxs("div",{ref:h,className:"text-center space-y-8 animate-in fade-in duration-300",children:[s.jsx("p",{className:"text-sm font-bold text-neutral-500",children:"Listen carefully and type the word."}),s.jsxs("div",{className:"space-y-6 flex flex-col items-center",children:[s.jsx("button",{onClick:()=>Ft(l.word),className:"p-6 bg-neutral-50 hover:bg-neutral-100 text-neutral-900 rounded-full shadow-sm transition-all active:scale-95",children:s.jsx(Ra,{size:32})}),s.jsxs("div",{className:"w-full max-w-sm flex flex-col items-center gap-4",children:[s.jsxs("div",{className:"relative w-full",children:[s.jsx("input",{type:"text",autoFocus:!0,value:o||"",onChange:O=>{g(N),y(O,u,l.word)},onKeyDown:O=>{S(O,N,l.word)},disabled:c,className:`w-full text-center py-4 pl-12 pr-12 rounded-2xl border-2 text-3xl font-bold focus:outline-none tracking-[0.1em] placeholder:text-neutral-200 transition-colors duration-200 ${c?T?"bg-green-50 border-green-500 text-green-600":"bg-red-50 border-red-500 text-red-600":`bg-neutral-50 border-transparent focus:bg-white focus:border-neutral-900 text-neutral-900 shadow-sm ${A(N)}`}`,placeholder:"TYPE HERE",autoComplete:"off",autoCorrect:"off",autoCapitalize:"off",spellCheck:"false"}),!c&&s.jsx("div",{className:"absolute right-3 top-1/2 -translate-y-1/2",children:s.jsx(_o,{isListening:R,onClick:()=>x(N,u),disabled:c})})]}),(c&&I||d)&&s.jsx("div",{className:"text-xl font-black text-yellow-500 animate-in fade-in slide-in-from-bottom-2",children:l.word})]})]})]})},Mv=({word:l,currentChallenge:o,currentChallengeIndex:u,userAnswers:c,handleAnswerChange:f,results:d,isFinishing:h,currentPrepositionGroup:x,showHint:p,onEnterPress:g})=>{const y=w.useRef(null),[S,A]=w.useState(null),T=w.useRef(null);w.useEffect(()=>{try{T.current=new _d}catch{}return()=>{var N;(N=T.current)==null||N.stop()}},[]),w.useEffect(()=>{var N;(N=T.current)==null||N.stop(),A(null)},[u,x]);const I=(N,R)=>{T.current&&(S===N?(T.current.stop(),A(null)):(S&&T.current.stop(),R(""),A(N),T.current.start((O,H)=>{const U=O+(H?(O?" ":"")+H:"");R(U)},O=>{const H=O.trim().replace(/[.]/g,"");R(H),A(null)})))};if(w.useEffect(()=>{const N=()=>{var H,U;const O=(H=y.current)==null?void 0:H.querySelector('input[type="text"]:not([disabled]), textarea:not([disabled])');O&&!((U=y.current)!=null&&U.contains(document.activeElement))&&O.focus()};setTimeout(N,50);const R=O=>{var H;if(!(O.metaKey||O.ctrlKey||O.altKey)){if(O.key==="Enter"){const U=document.activeElement;if(U&&U.tagName==="TEXTAREA"&&O.shiftKey)return;O.preventDefault(),g();return}if(O.key.length===1){const U=document.activeElement;((H=y.current)==null?void 0:H.contains(U))||N()}}};return window.addEventListener("keydown",R),()=>window.removeEventListener("keydown",R)},[u,g]),x)return s.jsx(Tv,{containerRef:y,group:x.group,userAnswers:c,results:d,onAnswerChange:f,isFinishing:h,showHint:p,toggleListening:I,listeningId:S});switch(o.type){case"PARAPHRASE_CONTEXT_QUIZ":{const N=o;return s.jsx(Yu,{containerRef:y,challenge:{contexts:N.contexts,items:N.paraphrases},answer:c[u],onAnswer:R=>f(u,R),isFinishing:h,result:d?d[u]:null,showHint:p,itemLabel:R=>R.tone&&s.jsx("span",{className:"inline-block text-[9px] font-black uppercase bg-neutral-100 text-neutral-500 px-1.5 py-0.5 rounded border border-neutral-200 mb-1",children:R.tone}),instructionText:"Match each phrase on the right to its correct context on the left."})}case"COLLOCATION_CONTEXT_QUIZ":{const N=o;return s.jsx(Yu,{containerRef:y,challenge:{contexts:N.contexts,items:N.collocations},answer:c[u],onAnswer:R=>f(u,R),isFinishing:h,result:d?d[u]:null,showHint:p,itemLabel:()=>null,instructionText:"Match each collocation on the right to its correct definition/cue."})}case"IDIOM_CONTEXT_QUIZ":{const N=o;return s.jsx(Yu,{containerRef:y,challenge:{contexts:N.contexts,items:N.idioms},answer:c[u],onAnswer:R=>f(u,R),isFinishing:h,result:d?d[u]:null,showHint:p,itemLabel:()=>null,instructionText:"Match each idiom on the right to its correct definition/cue."})}case"COLLOCATION_MULTICHOICE_QUIZ":{const N=o;return s.jsx(Xu,{containerRef:y,word:l,title:"Select Collocation",cue:N.cue,options:N.options,answer:N.answer,selected:c[u],onAnswer:R=>f(u,R),isFinishing:h,showHint:p})}case"COLLOCATION_QUIZ":{const N=o,R=d?d[u]:null,O=typeof R=="boolean"?R:R&&typeof R=="object"?R.correct:null;return s.jsx(Ku,{containerRef:y,word:l,title:"Fill Collocation",cue:N.cue,answer:N.answer,userAnswer:c[u],onAnswer:H=>f(u,H),isFinishing:h,result:O,showHint:p,toggleListening:I,listeningId:S})}case"IDIOM_QUIZ":{const N=o,R=d?d[u]:null,O=typeof R=="boolean"?R:R&&typeof R=="object"?R.correct:null;return s.jsx(Ku,{containerRef:y,word:l,title:"Fill Idiom",cue:N.cue,answer:N.answer,userAnswer:c[u],onAnswer:H=>f(u,H),isFinishing:h,result:O,showHint:p,toggleListening:I,listeningId:S})}case"PRONUNCIATION":return s.jsx(Cv,{containerRef:y,challenge:o,onAnswer:N=>f(u,N),isFinishing:h,result:d?d[u]:null});case"HETERONYM_QUIZ":{const N=o,R=d?d[u]:null,O=typeof R=="boolean"?R:null;return s.jsx(Iv,{containerRef:y,word:l,forms:N.forms,ipaOptions:N.ipaOptions,userAnswer:c[u],onAnswer:H=>f(u,H),isFinishing:h,result:O,showHint:p})}case"SENTENCE_SCRAMBLE":{const N=o,R=d?d[u]:null,O=typeof R=="boolean"?R:null;return s.jsx(Ov,{containerRef:y,word:l,original:N.original,shuffled:N.shuffled||[],userAnswer:c[u],onAnswer:H=>f(u,H),isFinishing:h,isCorrect:O,showHint:p})}case"SPELLING":{const N=d?d[u]:null,R=typeof N=="boolean"?N:null;return s.jsx(Rv,{containerRef:y,word:l,userAnswer:c[u],onAnswer:O=>f(u,O),isFinishing:h,result:R,showHint:p,toggleListening:I,listeningId:S})}case"IPA_QUIZ":{const N=o;return s.jsx(Xu,{containerRef:y,word:l,title:"Select Pronunciation",options:N.options,answer:N.answer,selected:c[u],onAnswer:R=>f(u,R),isFinishing:h,showHint:p})}case"MEANING_QUIZ":{const N=o;return s.jsx(Xu,{containerRef:y,word:l,title:"Select Definition",options:N.options,answer:N.answer,selected:c[u],onAnswer:R=>f(u,R),isFinishing:h,showHint:p})}case"PARAPHRASE_QUIZ":{const N=o,R=d?d[u]:null,O=typeof R=="boolean"?R:null;return s.jsx(Ku,{containerRef:y,word:l,title:"Fill Paraphrase",contextTag:N.tone,cue:N.context,answer:N.answer,userAnswer:c[u],onAnswer:H=>f(u,H),isFinishing:h,result:O,showHint:p,toggleListening:I,listeningId:S})}case"WORD_FAMILY":{const N=d?d[u]:null,R=N&&typeof N=="object"&&"details"in N?N.details:{};return s.jsx(kv,{containerRef:y,word:l,userAnswer:c[u],onAnswer:O=>f(u,O),isFinishing:h,resultDetails:R,showHint:p,toggleListening:I,listeningId:S})}default:return null}},Lv=({onBack:l,onNext:o,onIgnore:u,onHint:c,showHint:f,isBackDisabled:d,isNextDisabled:h,isLastChallenge:x,nextLabel:p,disableHints:g})=>{const y=x&&!p;return s.jsxs("div",{className:"p-4 bg-white border-t border-neutral-100 flex items-center justify-between gap-3 shrink-0",children:[s.jsx("button",{onClick:l,disabled:d,className:"p-4 rounded-2xl bg-neutral-50 text-neutral-400 hover:bg-neutral-100 hover:text-neutral-900 disabled:opacity-30 disabled:hover:bg-neutral-50 disabled:hover:text-neutral-400 transition-all",title:"Previous Question",children:s.jsx(Wm,{size:20})}),!x&&!h&&s.jsx("button",{onClick:u,className:"px-4 py-4 rounded-2xl text-neutral-400 hover:text-neutral-600 font-bold text-xs uppercase tracking-wider hover:bg-neutral-50 transition-colors",children:"Ignore"}),!h&&!g&&s.jsx("button",{onClick:c,className:`p-4 rounded-2xl transition-colors ${f?"text-yellow-500 bg-yellow-50 hover:bg-yellow-100":"text-neutral-400 hover:text-yellow-500 hover:bg-neutral-50"}`,title:"Show Hint",children:s.jsx(od,{size:20,className:f?"fill-yellow-500":""})}),s.jsxs("button",{onClick:o,disabled:h,className:"flex-1 py-4 rounded-2xl font-black text-xs uppercase tracking-widest flex items-center justify-center gap-2 shadow-lg transition-all active:scale-95 bg-neutral-900 text-white hover:bg-neutral-800",children:[s.jsx("span",{children:p||(x?"Finish":"Next")}),y?s.jsx(Fa,{size:16}):s.jsx(Ii,{size:16})]})]})},Hm=[{id:"core",title:"Core Skills",description:"Essential accuracy",color:"text-blue-700",bg:"bg-blue-50/60",border:"border-blue-100",areas:[{id:"spelling",label:"Spelling",icon:Qb,types:["SPELLING"]},{id:"sound",label:"Sound",icon:Ra,types:["PRONUNCIATION","IPA_QUIZ","HETERONYM_QUIZ"]},{id:"meaning",label:"Meaning",icon:yo,types:["MEANING_QUIZ"]},{id:"preposition",label:"Prep.",icon:rd,types:["PREPOSITION_QUIZ"]}]},{id:"advanced",title:"Advanced Usage",description:"Fluency & range",color:"text-purple-700",bg:"bg-purple-50/60",border:"border-purple-100",areas:[{id:"family",label:"Word Family",icon:ih,types:["WORD_FAMILY"]},{id:"collocation",label:"Collocation",icon:bo,types:["COLLOCATION_CONTEXT_QUIZ","COLLOCATION_MULTICHOICE_QUIZ","COLLOCATION_QUIZ"]},{id:"paraphrase",label:"Paraphrase",icon:No,types:["PARAPHRASE_CONTEXT_QUIZ","PARAPHRASE_QUIZ"]}]},{id:"bonus",title:"Good to Have",description:"Context & Flair",color:"text-amber-700",bg:"bg-amber-50/60",border:"border-amber-100",areas:[{id:"idiom",label:"Idiom",icon:vo,types:["IDIOM_CONTEXT_QUIZ","IDIOM_QUIZ"]},{id:"example",label:"Example",icon:Bb,types:["SENTENCE_SCRAMBLE"]}]}],Wu={MEANING_QUIZ:"Select",COLLOCATION_CONTEXT_QUIZ:"Match",COLLOCATION_MULTICHOICE_QUIZ:"Multi",COLLOCATION_QUIZ:"Fill",PARAPHRASE_CONTEXT_QUIZ:"Match",PARAPHRASE_QUIZ:"Fill",PREPOSITION_QUIZ:"Fill",IDIOM_QUIZ:"Fill",IDIOM_CONTEXT_QUIZ:"Match",PRONUNCIATION:"Speak",IPA_QUIZ:"IPA",HETERONYM_QUIZ:"Match",SPELLING:"Dictation",SENTENCE_SCRAMBLE:"Build",WORD_FAMILY:"Fill"},Uv=[{label:"Dictation",desc:"Listen to the word and type the exact spelling."},{label:"Speak",desc:"Pronounce the word clearly into your microphone."},{label:"IPA",desc:"Identify the correct phonetic transcription."},{label:"Select",desc:"Choose the correct meaning from options."},{label:"Fill",desc:"Type missing parts (Prepositions, Idioms, Families)."},{label:"Match",desc:"Connect related items (Collocations, Idioms, Contexts)."},{label:"Build",desc:"Reorder scrambled words to form a valid sentence."},{label:"Multi",desc:"Multiple choice for collocations."}],zv=(l,o)=>{if(o===0)return{label:"N/A",color:"bg-neutral-50 text-neutral-400 border-neutral-100"};const u=l/o*100;let c="bg-neutral-50 text-neutral-400 border-neutral-100";return u===100?c="bg-green-50 text-green-700 border-green-100":l>0?c="bg-yellow-50 text-yellow-700 border-yellow-100":c="bg-red-50 text-red-600 border-red-100",{label:`${l}/${o}`,color:c}},qm=l=>{switch(l){case"NEW":return"bg-blue-100 text-blue-700 border-blue-200";case"LEARNED":return"bg-cyan-100 text-cyan-700 border-cyan-200";case"EASY":return"bg-green-100 text-green-700 border-green-200";case"HARD":return"bg-orange-100 text-orange-700 border-orange-200";case"FORGOT":return"bg-red-100 text-red-700 border-red-200";default:return"bg-neutral-100 text-neutral-600 border-neutral-200"}},Dv=({isModal:l=!0,word:o,onClose:u,isSetupMode:c,isPreparing:f,availableChallenges:d,selectedChallengeTypes:h,onSetSelection:x,onStartTest:p,challengeStats:g,challenges:y,currentChallenge:S,currentChallengeIndex:A,userAnswers:T,handleAnswerChange:I,results:N,isFinishing:R,currentPrepositionGroup:O,isLastChallenge:H,handleNextClick:U,handleBackClick:B,handleIgnore:L,handleFinishEarly:Y,showHint:Q,onToggleHint:V,disableHints:C,sessionPosition:X,elapsedTime:F,onSelectQuick:K,onSelectPreferred:ie,onSelectZeroScore:ge,onSelectPartialScore:oe,recapData:_,onRecalculateFinish:W,isMastered:J})=>{const de=w.useRef(null),[me,v]=w.useState(!1),[j,z]=w.useState(!1);w.useEffect(()=>{de.current&&(de.current.scrollTop=0)},[A,o]);const ee=w.useMemo(()=>new Set(d.map(re=>re.type)),[d]),ue=(re,P)=>{const te=new Set(h);re.forEach(he=>te.delete(he)),P!=="none"&&te.add(P),x(te)},ce=()=>Hm.flatMap(re=>re.areas),fe=()=>{const re=new Set;ce().forEach(P=>{const te=P.types.find(he=>ee.has(he));te&&re.add(te)}),x(re)};let D;if(_){const re=Math.max(0,_.newMastery-_.oldMastery),P=Object.values(_.results.reduce((te,he)=>{if(!te[he.type]){let ye=Wu[he.type]||he.type;const we=ce().find(ot=>ot.types.includes(he.type));we&&(ye=`${we.label} ${Wu[he.type]||""}`),te[he.type]={type:he.type,label:ye.trim(),passed:0,total:0}}return te[he.type].total++,he.passed&&te[he.type].passed++,te},{}));D=s.jsxs("div",{className:"bg-white w-full max-w-md rounded-[2.5rem] shadow-2xl overflow-hidden flex flex-col max-h-[90vh] animate-in zoom-in-95 duration-500",children:[s.jsxs("div",{className:"flex-1 overflow-y-auto p-8 text-center space-y-6 custom-scrollbar",children:[s.jsx("div",{className:"inline-flex p-4 bg-green-50 rounded-full text-green-600 mb-2 shadow-inner",children:s.jsx(Fa,{size:48})}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("h2",{className:"text-3xl font-black text-neutral-900 tracking-tight",children:"Session Complete!"}),s.jsx("p",{className:"text-sm text-neutral-500 font-medium",children:"Here's how you improved."})]}),s.jsxs("div",{className:"bg-neutral-50 rounded-3xl p-6 border border-neutral-100 space-y-6",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex justify-between items-end px-1",children:[s.jsx("span",{className:"text-[10px] font-black uppercase text-neutral-400 tracking-widest",children:"Mastery Score"}),s.jsxs("span",{className:"text-sm font-black text-neutral-900 flex items-center gap-1",children:[_.oldMastery,"%",s.jsx(Ii,{size:14,className:"text-neutral-300"}),s.jsxs("span",{className:"text-green-600",children:[_.newMastery,"%"]}),re>0&&s.jsxs("span",{className:"text-[10px] bg-green-100 text-green-700 px-1.5 rounded-full ml-1",children:["+",re]})]})]}),s.jsxs("div",{className:"h-3 w-full bg-neutral-200 rounded-full overflow-hidden relative",children:[s.jsx("div",{className:"absolute top-0 left-0 h-full bg-neutral-400",style:{width:`${_.oldMastery}%`}}),s.jsx("div",{className:"absolute top-0 h-full bg-green-500 animate-pulse",style:{left:`${_.oldMastery}%`,width:`${re}%`}})]})]}),s.jsxs("div",{className:"flex items-center justify-center gap-3",children:[s.jsx("span",{className:`px-3 py-1 rounded-xl text-xs font-black uppercase border ${qm(_.oldStatus)}`,children:_.oldStatus}),s.jsx(Ii,{size:16,className:"text-neutral-300"}),s.jsx("span",{className:`px-3 py-1 rounded-xl text-xs font-black uppercase border ${qm(_.newStatus)}`,children:_.newStatus})]})]}),s.jsxs("div",{className:"space-y-2 text-left",children:[s.jsx("h4",{className:"text-[10px] font-black uppercase text-neutral-400 tracking-widest px-2",children:"Challenge Summary"}),s.jsx("div",{className:"flex flex-col gap-2",children:P.map((te,he)=>{const ye=te.passed===te.total,we=te.passed===0;let ot="bg-white border-neutral-100",He="text-neutral-700",Xe=null;return ye?(ot="bg-green-50 border-green-100",He="text-green-800",Xe=s.jsx(Os,{size:14,className:"text-green-600"})):we?(ot="bg-red-50 border-red-100",He="text-red-800",Xe=s.jsx(kt,{size:14,className:"text-red-600"})):(ot="bg-orange-50 border-orange-100",He="text-orange-800",Xe=s.jsxs("div",{className:"text-[10px] font-black text-orange-600",children:[Math.round(te.passed/te.total*100),"%"]})),s.jsxs("div",{className:`flex items-center justify-between p-3 border rounded-xl shadow-sm ${ot}`,children:[s.jsx("span",{className:`text-xs font-bold ${He}`,children:te.label}),s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsxs("span",{className:`text-[10px] font-black uppercase tracking-wider ${He}`,children:[te.passed," / ",te.total]}),s.jsx("div",{className:"p-1 rounded-full bg-white/50",children:Xe})]})]},he)})})]})]}),s.jsx("div",{className:"p-6 bg-white border-t border-neutral-100 shrink-0",children:s.jsxs("button",{onClick:W,className:"w-full py-4 bg-neutral-900 text-white rounded-2xl font-black text-sm uppercase tracking-widest shadow-xl hover:bg-neutral-800 transition-all active:scale-95 flex items-center justify-center gap-2",children:[s.jsx("span",{children:"Continue"}),s.jsx(Ii,{size:18})]})})]})}else if(c){const re=h.size===0;let P=0,te=0;g.forEach(He=>{P+=He.score,te+=He.total});const he=te>0?P/te*100:0,ye=60,we=2*Math.PI*ye,ot=we-he/100*we;D=s.jsxs("div",{className:"bg-white w-full max-w-2xl rounded-[2rem] shadow-2xl overflow-hidden flex flex-col max-h-[95vh] animate-in fade-in zoom-in-95 duration-300",children:[s.jsxs("div",{className:"px-6 py-4 border-b border-neutral-100 bg-white/80 backdrop-blur-sm flex justify-between items-center shrink-0 z-20 relative",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"w-10 h-10 bg-neutral-900 text-white rounded-xl flex items-center justify-center shadow-lg shadow-neutral-900/20",children:s.jsx(Ab,{size:20})}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-black text-neutral-900 leading-none tracking-tight",children:"Test Setup"}),s.jsxs("p",{className:"text-xs font-bold text-neutral-500 mt-1",children:["Target: ",s.jsx("span",{className:"text-neutral-900",children:o.word})]})]})]}),s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsxs("div",{className:"flex flex-col items-end mr-2",children:[s.jsx("span",{className:"text-[9px] font-black uppercase text-neutral-400 tracking-widest",children:"Mastery"}),s.jsxs("div",{className:"flex items-baseline gap-1",children:[s.jsx("span",{className:`text-xl font-black leading-none ${P===te&&te>0?"text-green-600":"text-neutral-900"}`,children:P}),s.jsxs("span",{className:"text-sm font-bold text-neutral-400",children:["/",te]})]})]}),s.jsx("button",{onClick:()=>z(!j),className:`p-2.5 rounded-xl transition-all ${j?"bg-neutral-900 text-white shadow-md":"bg-neutral-100 text-neutral-500 hover:bg-neutral-200"}`,title:"Configure Test",children:s.jsx(zb,{size:20})}),s.jsx("button",{onClick:u,className:"p-2.5 text-neutral-400 hover:text-neutral-900 hover:bg-neutral-100 rounded-xl transition-colors",children:s.jsx(kt,{size:20})})]})]}),s.jsx("div",{className:"flex-1 overflow-y-auto custom-scrollbar relative",children:j?s.jsxs("div",{className:"flex flex-col h-full animate-in slide-in-from-top-4 duration-300",children:[s.jsxs("div",{className:"px-5 py-3 bg-neutral-50 border-b border-neutral-100 flex flex-wrap gap-2 shrink-0 z-10 justify-center",children:[s.jsxs("button",{onClick:fe,className:"px-3 py-2 rounded-lg bg-white border border-neutral-200 text-neutral-600 font-bold text-[10px] uppercase tracking-wider hover:bg-neutral-50 transition-colors flex items-center gap-1.5 shadow-sm",children:[s.jsx(lh,{size:12})," All"]}),s.jsxs("button",{onClick:()=>x(new Set),className:"px-3 py-2 rounded-lg bg-white border border-neutral-200 text-neutral-400 font-bold text-[10px] uppercase tracking-wider hover:bg-neutral-50 hover:text-neutral-600 transition-colors flex items-center gap-1.5 shadow-sm",children:[s.jsx(Nb,{size:12})," Clear"]}),s.jsxs("button",{onClick:()=>v(!me),className:"px-3 py-2 rounded-lg bg-white border border-neutral-200 text-neutral-500 font-bold text-[10px] uppercase tracking-wider hover:bg-neutral-50 hover:text-indigo-500 transition-colors flex items-center gap-1.5 shadow-sm ml-auto",children:[s.jsx(gb,{size:12})," Guide"]})]}),me&&s.jsx("div",{className:"bg-neutral-50 border-b border-neutral-100 p-4 grid grid-cols-2 gap-2 animate-in fade-in slide-in-from-top-2",children:Uv.map(He=>s.jsxs("div",{className:"text-[10px] text-neutral-500 leading-tight",children:[s.jsxs("span",{className:"font-black text-indigo-600 uppercase mr-1",children:[He.label,":"]}),He.desc]},He.label))}),s.jsx("div",{className:"p-4 space-y-3",children:Hm.map(He=>{const Xe=He.areas.filter(Ce=>Ce.types.some(Re=>ee.has(Re)));if(Xe.length===0)return null;let je=0,le=0;return Xe.forEach(Ce=>{Ce.types.forEach(Re=>{const Pe=g.get(Re);Pe&&(je+=Pe.score,le+=Pe.total)})}),s.jsxs("div",{className:`rounded-2xl border ${He.border} ${He.bg} p-4`,children:[s.jsxs("div",{className:"flex items-baseline justify-between mb-3 border-b border-black/5 pb-2",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("h4",{className:`text-xs font-black uppercase tracking-widest ${He.color}`,children:He.title}),s.jsxs("span",{className:"text-[10px] font-bold text-neutral-500 opacity-60 bg-white/50 px-1.5 py-0.5 rounded-md",children:["(",je,"/",le,")"]})]}),s.jsx("span",{className:"text-[10px] font-bold text-neutral-500 opacity-60",children:He.description})]}),s.jsx("div",{className:"space-y-2",children:Xe.map(Ce=>{const Re=Ce.types.filter(lt=>ee.has(lt));if(Re.length===0)return null;const Pe=Ce.types.find(lt=>h.has(lt));let De=0,_e=0;Ce.types.forEach(lt=>{const mt=g.get(lt);mt&&(De+=mt.score,_e+=mt.total)});const pt=zv(De,_e);return s.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-3 p-2 rounded-xl bg-white/40 hover:bg-white/70 transition-colors border border-transparent hover:border-black/5",children:[s.jsxs("div",{className:"flex items-center gap-2 shrink-0",children:[s.jsx("div",{className:"p-1.5 bg-white rounded-lg shadow-sm text-neutral-600",children:s.jsx(Ce.icon,{size:14})}),s.jsx("span",{className:`text-xs font-bold ${Pe?"text-neutral-900":"text-neutral-600"}`,children:Ce.label}),s.jsx("span",{className:`text-[9px] font-black uppercase tracking-wider px-1.5 py-0.5 rounded-md border ${pt.color}`,children:pt.label})]}),s.jsx("div",{className:"flex flex-wrap gap-1.5 justify-end",children:Re.map(lt=>{const mt=Pe===lt;return s.jsx("button",{onClick:()=>ue(Ce.types,mt?"none":lt),className:`px-3 py-1.5 rounded-lg text-[10px] font-bold border transition-all ${mt?"bg-neutral-900 border-neutral-900 text-white shadow-md transform scale-105":"bg-white border-neutral-200 text-neutral-500 hover:border-neutral-300 hover:text-neutral-700"}`,children:Wu[lt]||"Quiz"},lt)})})]},Ce.id)})})]},He.id)})})]}):s.jsxs("div",{className:"flex flex-col items-center justify-center h-full p-8 space-y-8 animate-in zoom-in-95 duration-500",children:[s.jsxs("div",{className:"relative w-48 h-48 flex items-center justify-center",children:[s.jsxs("svg",{className:"absolute w-full h-full transform -rotate-90",children:[s.jsx("circle",{cx:"50%",cy:"50%",r:ye,stroke:"currentColor",strokeWidth:"12",fill:"transparent",className:"text-neutral-100"}),s.jsx("circle",{cx:"50%",cy:"50%",r:ye,stroke:"currentColor",strokeWidth:"12",fill:"transparent",strokeDasharray:we,strokeDashoffset:ot,strokeLinecap:"round",className:`transition-all duration-1000 ease-out ${he===100?"text-green-500":"text-indigo-600"}`})]}),s.jsxs("div",{className:"flex flex-col items-center",children:[s.jsxs("span",{className:"text-4xl font-black text-neutral-900 tracking-tighter",children:[he.toFixed(0),"%"]}),s.jsx("span",{className:"text-xs font-bold text-neutral-400 uppercase tracking-widest mt-1",children:"Mastery"})]})]}),s.jsx("p",{className:"text-center text-sm font-medium text-neutral-500 max-w-xs leading-relaxed",children:P===te?"Incredible! You have mastered all challenges for this word. Keep practicing to maintain it.":"Ready to improve? Choose a quick mix or focus on what you haven't mastered yet."})]})}),s.jsx("div",{className:"px-6 py-5 bg-white border-t border-neutral-100 flex items-center justify-center shrink-0 z-20 gap-4",children:j?s.jsxs("button",{onClick:p,disabled:re||f,className:"w-full py-4 bg-neutral-900 text-white rounded-2xl font-black text-sm uppercase tracking-widest flex items-center justify-center gap-3 shadow-xl hover:bg-neutral-800 transition-all active:scale-95 disabled:opacity-50 disabled:active:scale-100 hover:shadow-2xl shadow-neutral-900/20",children:[f?s.jsx(Ct,{size:18,className:"animate-spin"}):s.jsx(rh,{size:18,fill:"currentColor"}),s.jsx("span",{children:f?"Preparing...":"Start Custom Test"})]}):s.jsxs(s.Fragment,{children:[s.jsxs("button",{onClick:K,className:"flex-1 py-4 bg-white border-2 border-neutral-100 text-neutral-600 rounded-2xl font-black text-xs uppercase tracking-widest flex items-center justify-center gap-2 hover:border-amber-400 hover:text-amber-600 hover:bg-amber-50 transition-all active:scale-95 shadow-sm group",children:[s.jsx(cb,{size:18,className:"text-neutral-400 group-hover:text-amber-500 transition-colors fill-neutral-200 group-hover:fill-amber-500"}),s.jsx("span",{children:"Quick Test"})]}),J?s.jsxs("button",{onClick:oe,className:"flex-1 py-4 bg-red-600 text-white rounded-2xl font-black text-xs uppercase tracking-widest flex items-center justify-center gap-2 hover:bg-red-700 transition-all active:scale-95 shadow-lg shadow-red-200",children:[s.jsx(qb,{size:18}),s.jsx("span",{children:"Challenge"})]}):s.jsxs("button",{onClick:ge,className:"flex-1 py-4 bg-indigo-600 text-white rounded-2xl font-black text-xs uppercase tracking-widest flex items-center justify-center gap-2 hover:bg-indigo-700 transition-all active:scale-95 shadow-lg shadow-indigo-200",children:[s.jsx(ah,{size:18}),s.jsx("span",{children:"Master It"})]})]})})]})}else{let re;X&&(X.current<X.total?re="Next Item":re="Finalize"),D=s.jsxs("div",{className:"bg-white w-full max-w-md rounded-[2.5rem] shadow-2xl overflow-hidden flex flex-col max-h-[90vh] h-full",children:[s.jsx(_v,{title:S.title,type:S.type,currentStep:X?X.current:A+1,totalSteps:X?X.total:y.length,onClose:u,onFinish:Y,label:X?"Item":"Challenge",isQuickFire:!!X,elapsedTime:F}),s.jsx("div",{ref:de,className:"flex-1 p-8 overflow-y-auto no-scrollbar",children:s.jsx(Mv,{word:o,currentChallenge:S,currentChallengeIndex:A,userAnswers:T,handleAnswerChange:I,results:N,isFinishing:R,currentPrepositionGroup:O,showHint:Q,onEnterPress:U})}),s.jsx(Lv,{onBack:B,onNext:U,onIgnore:L,onHint:V,showHint:Q,isBackDisabled:X?X.current===1&&A===0:A===0,isNextDisabled:R,isLastChallenge:H,nextLabel:re,disableHints:C})]})}return l?s.jsx("div",{className:"fixed inset-0 z-[150] flex items-center justify-center p-4 bg-black/60 backdrop-blur-sm animate-in fade-in duration-200",children:D}):D},Cl=l=>[...l].sort(()=>Math.random()-.5),Bv=l=>l.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),Dt=l=>l.replace(/[^a-zA-Z0-9]/g,"").toLowerCase();function Hv(l){const o=[];if(o.push({type:"SPELLING",title:"Spelling Fill",word:l}),o.push({type:"PRONUNCIATION",title:"Speak Out",word:l}),l.meaningVi&&l.meaningVi.length>0&&o.push({type:"MEANING_QUIZ",title:"Meaning Multi Choice",options:[],answer:l.meaningVi,word:l}),l.ipaMistakes&&l.ipaMistakes.length>0&&l.ipaUs&&o.push({type:"IPA_QUIZ",title:"IPA Multi Choice",options:Cl([l.ipaUs,...l.ipaMistakes]),answer:l.ipaUs,word:l}),l.collocationsArray&&l.collocationsArray.length>0){const u=l.collocationsArray.filter(c=>!c.isIgnored&&c.d);u.forEach(c=>{o.push({type:"COLLOCATION_QUIZ",title:"Collocation Fill",word:l,fullText:c.text,cue:c.d,answer:c.text}),u.length>=4&&o.push({type:"COLLOCATION_MULTICHOICE_QUIZ",title:"Collocation Multi Choice",word:l,fullText:c.text,cue:c.d,answer:c.text,options:[]})}),u.length>=2&&o.push({type:"COLLOCATION_CONTEXT_QUIZ",title:"Collocation Match",word:l,contexts:[],collocations:[]})}if(l.idiomsList&&l.idiomsList.length>0){const u=l.idiomsList.filter(c=>!c.isIgnored&&c.d);u.forEach(c=>{o.push({type:"IDIOM_QUIZ",title:"Idiom Fill",word:l,fullText:c.text,cue:c.d,answer:c.text})}),u.length>=2&&o.push({type:"IDIOM_CONTEXT_QUIZ",title:"Idiom Match",word:l,contexts:[],idioms:[]})}if(l.prepositions&&l.prepositions.length>0&&l.prepositions.filter(c=>!c.isIgnored).forEach(c=>{let f="";const d=l.word,h=c.prep,x=c.usage;if(x&&x.toLowerCase().includes(d.toLowerCase())){const p=new RegExp(`\\b${Bv(h)}\\b`,"i");p.test(x)?f=x.replace(p,"___"):f=`${x} [___]`}else x?f=`${d} ___ ${x}`:f=`${d} ___`;o.push({type:"PREPOSITION_QUIZ",title:"Preposition Fill",example:f,answer:h,word:l})}),l.example&&l.example.trim().length>5){const u=l.example.trim().split(`
`).flatMap(c=>c.split(new RegExp("(?<=[.?!])\\s+"))).map(c=>c.trim()).filter(c=>c.length>5);for(const c of u){const f=c.split(/\s+/).filter(Boolean);if(f.length>=3){let h;if(f.length>10){h=[];let x=0;for(;x<f.length;){const p=Math.min(3,f.length-x);let g=1;p>1&&Math.random()<.5&&(p===2?g=2:g=Math.random()<.5?2:3);const y=f.slice(x,x+g).join(" ");h.push(y),x+=g}}else h=f;o.push({type:"SENTENCE_SCRAMBLE",title:"Sentence Builder",original:c.trim(),shuffled:Cl(h),word:l})}}}return l.wordFamily&&[...l.wordFamily.nouns||[],...l.wordFamily.verbs||[],...l.wordFamily.adjs||[],...l.wordFamily.advs||[]].filter(d=>!d.isIgnored&&d.word.trim()).some(d=>d.word.toLowerCase().trim()!==l.word.toLowerCase().trim())&&o.push({type:"WORD_FAMILY",title:"Word Family Fill",word:l}),l.paraphrases&&l.paraphrases.length>0&&l.paraphrases.filter(u=>!u.isIgnored).forEach(u=>{o.push({type:"PARAPHRASE_QUIZ",title:"Paraphrase Fill",tone:u.tone,context:u.context,answer:u.word,word:l})}),l.paraphrases&&l.paraphrases.filter(u=>!u.isIgnored&&u.context&&u.context.trim()).length>=2&&o.push({type:"PARAPHRASE_CONTEXT_QUIZ",title:"Paraphrase Match",word:l,contexts:[],paraphrases:[]}),o}async function Gm(l,o){const u=[];for(const c of l)if(c.type==="MEANING_QUIZ"){const f=await hh(o.userId,3,o.id),d=Cl([o.meaningVi,...f]);u.push({...c,options:d})}else if(c.type==="COLLOCATION_MULTICHOICE_QUIZ"){const d=(o.collocationsArray||[]).filter(x=>!x.isIgnored&&x.text!==c.answer).map(x=>x.text),h=Cl([c.answer,...d]).slice(0,4);u.push({...c,options:h})}else if(c.type==="PARAPHRASE_CONTEXT_QUIZ"){const f=c.word,d=(f.paraphrases||[]).filter(h=>!h.isIgnored&&h.context&&h.context.trim()).sort(()=>Math.random()-.5).slice(0,5);if(d.length>=2){const h=[],x=[];d.forEach((p,g)=>{const y=`${f.id}-${g}`;h.push({id:`context-${y}`,text:p.context,pairId:y,tone:p.tone}),x.push({id:`word-${y}`,text:p.word,pairId:y})}),u.push({...c,contexts:h,paraphrases:Cl(x)})}}else if(c.type==="COLLOCATION_CONTEXT_QUIZ"){const f=c.word,d=(f.collocationsArray||[]).filter(h=>!h.isIgnored&&h.d&&h.d.trim()).sort(()=>Math.random()-.5).slice(0,5);if(d.length>=2){const h=[],x=[];d.forEach((p,g)=>{const y=`${f.id}-col-${g}`;h.push({id:`context-${y}`,text:p.d,pairId:y}),x.push({id:`col-${y}`,text:p.text,pairId:y})}),u.push({...c,contexts:h,collocations:Cl(x)})}}else if(c.type==="IDIOM_CONTEXT_QUIZ"){const f=c.word,d=(f.idiomsList||[]).filter(h=>!h.isIgnored&&h.d&&h.d.trim()).sort(()=>Math.random()-.5).slice(0,5);if(d.length>=2){const h=[],x=[];d.forEach((p,g)=>{const y=`${f.id}-idm-${g}`;h.push({id:`context-${y}`,text:p.d,pairId:y}),x.push({id:`idm-${y}`,text:p.text,pairId:y})}),u.push({...c,contexts:h,idioms:Cl(x)})}}else u.push(c);return u}function qv(l,o){switch(l.type){case"SPELLING":return Dt(o||"")===Dt(l.word.word);case"IPA_QUIZ":return o===l.answer;case"PREPOSITION_QUIZ":return Dt(o||"")===Dt(l.answer);case"MEANING_QUIZ":return o===l.answer;case"PARAPHRASE_QUIZ":return Dt(o||"")===Dt(l.answer);case"COLLOCATION_QUIZ":return Dt(o||"")===Dt(l.answer);case"COLLOCATION_MULTICHOICE_QUIZ":return o===l.answer;case"IDIOM_QUIZ":return Dt(o||"")===Dt(l.answer);case"SENTENCE_SCRAMBLE":const u=(o||[]).join(" ");return Dt(u)===Dt(l.original);case"PRONUNCIATION":return Dt(o||"")===Dt(l.word.word);case"HETERONYM_QUIZ":{if(!o)return!1;let c=!0;for(const f of l.forms)if(o[f.pos]!==f.ipa){c=!1;break}return c}case"WORD_FAMILY":{const c={};let f=!0,d=!1;const h={nouns:"n",verbs:"v",adjs:"j",advs:"d"};return["nouns","verbs","adjs","advs"].forEach(x=>{var g;const p=(((g=l.word.wordFamily)==null?void 0:g[x])||[]).filter(y=>!y.isIgnored).map(y=>y.word);if(p.length>0){d=!0;const S=((o==null?void 0:o[x])||"").split(",").filter(Boolean).map(T=>Dt(T)),A=h[x];p.forEach(T=>{const I=Dt(T),N=S.findIndex(O=>O===I),R=N!==-1;c[`${A}:${T}`]=R,R?S.splice(N,1):f=!1}),S.length>0&&(f=!1)}}),d?{correct:f,details:c}:!0}case"PARAPHRASE_CONTEXT_QUIZ":{const c=l;if(!(o instanceof Map)||o.size===0)return{correct:!1,details:{}};const f={};let d=0;return c.contexts.forEach(h=>{const x=o.get(h.id);if(x){const p=c.paraphrases.find(g=>g.id===x);p&&p.pairId===h.pairId?(f[h.id]=!0,d++):f[h.id]=!1}else f[h.id]=!1}),{correct:d===c.contexts.length,details:f}}case"COLLOCATION_CONTEXT_QUIZ":{const c=l;if(!(o instanceof Map)||o.size===0)return{correct:!1,details:{}};const f={};let d=0;return c.contexts.forEach(h=>{const x=o.get(h.id);if(x){const p=c.collocations.find(g=>g.id===x);p&&p.pairId===h.pairId?(f[h.id]=!0,d++):f[h.id]=!1}else f[h.id]=!1}),{correct:d===c.contexts.length,details:f}}case"IDIOM_CONTEXT_QUIZ":{const c=l;if(!(o instanceof Map)||o.size===0)return{correct:!1,details:{}};const f={};let d=0;return c.contexts.forEach(h=>{const x=o.get(h.id);if(x){const p=c.idioms.find(g=>g.id===x);p&&p.pairId===h.pairId?(f[h.id]=!0,d++):f[h.id]=!1}else f[h.id]=!1}),{correct:d===c.contexts.length,details:f}}default:return!1}}const Gv=()=>{const[l,o]=w.useState([]),[u,c]=w.useState(0),[f,d]=w.useState([]),[h,x]=w.useState(null),[p,g]=w.useState(!1),[y,S]=w.useState(new Set),[A,T]=w.useState(0),[I,N]=w.useState(!1);w.useEffect(()=>{let X;return I&&!p&&(X=window.setInterval(()=>{T(F=>F+1)},1e3)),()=>clearInterval(X)},[I,p]);const R=X=>{o(X),d(new Array(X.length).fill(void 0)),c(0),x(null),g(!1),S(new Set),T(0),N(!0)},O=(X,F)=>{d(K=>{const ie=[...K];return ie[X]=F,ie})},H=l[u],U=w.useMemo(()=>{if((H==null?void 0:H.type)!=="PREPOSITION_QUIZ")return null;const X=[];let F=u;for(;F>0&&l[F-1].type==="PREPOSITION_QUIZ";)F--;for(let K=F;K<l.length&&l[K].type==="PREPOSITION_QUIZ";K++)X.push({challenge:l[K],index:K});return X.length===0?null:{startIndex:F,group:X}},[H,u,l]),B=w.useMemo(()=>U?U.startIndex+U.group.length>=l.length:u>=l.length-1,[u,l,U]),L=()=>{B||c(U?U.startIndex+U.group.length:X=>X+1)},Y=()=>{const X=U?U.startIndex-1:u-1;X>=0&&c(X)},Q=()=>{S(X=>{const F=new Set(X);return U?U.group.forEach(K=>F.add(K.index)):F.add(u),F}),L()},V=()=>{const X=[];let F=0,K=0;const ie={},ge=[];l.forEach((_,W)=>{if(y.has(W)){X[W]=null;return}K++;const J=qv(_,f[W]);X[W]=J;const de=typeof J=="boolean"?J:J.correct;if(de&&F++,ge.push({type:_.type,passed:de}),_.type==="WORD_FAMILY"&&typeof J=="object"&&"details"in J)Object.entries(J.details).forEach(([me,v])=>{ie[`WORD_FAMILY:${me}`]=v});else if(_.type==="COLLOCATION_QUIZ")ie[`COLLOCATION_QUIZ:${_.fullText}`]=de;else if(_.type==="COLLOCATION_MULTICHOICE_QUIZ")ie[`COLLOCATION_MULTICHOICE_QUIZ:${_.fullText}`]=de;else if(_.type==="IDIOM_QUIZ")ie[`IDIOM_QUIZ:${_.fullText}`]=de;else if(_.type==="PARAPHRASE_QUIZ")ie[`PARAPHRASE_QUIZ:${_.answer}`]=de;else if(_.type==="PREPOSITION_QUIZ")ie[`PREPOSITION_QUIZ:${_.answer}`]=de;else if(_.type==="PARAPHRASE_CONTEXT_QUIZ"){const me=_;typeof J=="object"&&J.details&&me.paraphrases.forEach(v=>{const j=me.contexts.find(z=>z.pairId===v.pairId);j&&J.details[j.id]&&(ie[`PARAPHRASE_CONTEXT_QUIZ:${v.text}`]=!0)}),ie[_.type]=de}else if(_.type==="COLLOCATION_CONTEXT_QUIZ"){const me=_;typeof J=="object"&&J.details&&me.collocations.forEach(v=>{const j=me.contexts.find(z=>z.pairId===v.pairId);j&&J.details[j.id]&&(ie[`COLLOCATION_CONTEXT_QUIZ:${v.text}`]=!0)}),ie[_.type]=de}else if(_.type==="IDIOM_CONTEXT_QUIZ"){const me=_;typeof J=="object"&&J.details&&me.idioms.forEach(v=>{const j=me.contexts.find(z=>z.pairId===v.pairId);j&&J.details[j.id]&&(ie[`IDIOM_CONTEXT_QUIZ:${v.text}`]=!0)}),ie[_.type]=de}else ie[_.type]=de});let oe=Fe.HARD;return K>0&&(F===K?oe=K>1?Fe.EASY:Fe.HARD:F<K/2&&(oe=Fe.FORGOT)),{finalGrade:oe,resultHistory:ie,detailedResults:ge,counts:{correct:F,tested:K},newResults:X}};return{challenges:l,currentChallengeIndex:u,currentChallenge:H,userAnswers:f,results:h,isFinishing:p,elapsedSeconds:A,currentPrepositionGroup:U,isLastChallenge:B,startTest:R,setAnswer:O,handleNext:L,handleBack:Y,handleIgnore:Q,checkAnswers:V,finishTest:()=>{N(!1),g(!0);const{newResults:X}=V();x(X)}}},Vv={SPELLING:"sp",IPA_QUIZ:"iq",PREPOSITION_QUIZ:"pq",WORD_FAMILY:"wf",MEANING_QUIZ:"mq",PARAPHRASE_QUIZ:"prq",SENTENCE_SCRAMBLE:"sc",HETERONYM_QUIZ:"hq",PRONUNCIATION:"p",COLLOCATION_QUIZ:"cq",IDIOM_QUIZ:"idq",PARAPHRASE_CONTEXT_QUIZ:"pcq",COLLOCATION_CONTEXT_QUIZ:"ccq",COLLOCATION_MULTICHOICE_QUIZ:"cmq",IDIOM_CONTEXT_QUIZ:"icq"},Qv=["PARAPHRASE_CONTEXT_QUIZ","COLLOCATION_CONTEXT_QUIZ","IDIOM_CONTEXT_QUIZ","COLLOCATION_MULTICHOICE_QUIZ","HETERONYM_QUIZ"],ll={collocation:{easy:["COLLOCATION_CONTEXT_QUIZ","COLLOCATION_MULTICHOICE_QUIZ","COLLOCATION_QUIZ"],hard:["COLLOCATION_QUIZ","COLLOCATION_CONTEXT_QUIZ","COLLOCATION_MULTICHOICE_QUIZ"]},paraphrase:{easy:["PARAPHRASE_CONTEXT_QUIZ","PARAPHRASE_QUIZ"],hard:["PARAPHRASE_QUIZ","PARAPHRASE_CONTEXT_QUIZ"]},idiom:{easy:["IDIOM_CONTEXT_QUIZ","IDIOM_QUIZ"],hard:["IDIOM_QUIZ","IDIOM_CONTEXT_QUIZ"]}},Zv=new Set([...ll.collocation.easy,...ll.paraphrase.easy,...ll.idiom.easy]),co=(l,o)=>{const u=new Set;return Object.keys(ll).forEach(c=>{const f=ll[c][o];for(const d of f){const h=d;if(l.has(h)){u.add(h);break}}}),l.forEach(c=>{Zv.has(c)||u.add(c)}),u},Yv=({word:l,onClose:o,onComplete:u,isQuickFire:c=!1,isModal:f=!0,sessionPosition:d,onPrevWord:h,disableHints:x=!1,forceShowHint:p=!1,skipSetup:g=!1,challengeFilter:y,skipRecap:S=!1})=>{const[A,T]=w.useState(!c&&!g),[I,N]=w.useState(new Set),[R,O]=w.useState(!1),[H,U]=w.useState(!1),[B,L]=w.useState(p),[Y,Q]=w.useState(null),V=Gv();w.useEffect(()=>{L(p)},[V.currentChallengeIndex,p]);const C=w.useMemo(()=>{try{return Hv(l)}catch(v){return console.error("[TestModal] Error generating challenges:",v),[]}},[l]),X=w.useMemo(()=>{const v=l.lastTestResults||{},j=new Map,z=Array.from(new Set(C.map(ue=>ue.type))),ee=(ue,ce)=>{if(v[ue]!==void 0)return v[ue];const fe=Vv[ce];if(fe){const D=ue.startsWith(ce)?ue.substring(ce.length):"",re=fe+D;return v[re]}};return z.forEach(ue=>{const ce=C.filter(D=>D.type===ue);if(ue==="WORD_FAMILY"){const D=["nouns","verbs","adjs","advs"],re={nouns:"n",verbs:"v",adjs:"j",advs:"d"};let P=0;const te=D.flatMap(he=>{var ye;return(((ye=l.wordFamily)==null?void 0:ye[he])||[]).map(we=>({...we,typeKey:he}))}).filter(he=>!he.isIgnored&&he.word);te.length>0&&te.forEach(he=>{const ye=re[he.typeKey];(v[`WORD_FAMILY:${ye}:${he.word}`]??v[`wf:${ye}:${he.word}`]??v[`WORD_FAMILY_${he.typeKey.toUpperCase()}`])===!0&&P++}),j.set(ue,{score:P,total:te.length});return}if(ue==="SENTENCE_SCRAMBLE"){const D=Object.keys(v).some(re=>(re.startsWith("SENTENCE_SCRAMBLE")||re.startsWith("sc"))&&v[re]===!0);j.set(ue,{score:D?1:0,total:1});return}let fe=0;ce.forEach(D=>{let re=!1,P="";if(D.type==="COLLOCATION_QUIZ"?P=`COLLOCATION_QUIZ:${D.fullText}`:D.type==="COLLOCATION_MULTICHOICE_QUIZ"?P=`COLLOCATION_MULTICHOICE_QUIZ:${D.fullText}`:D.type==="IDIOM_QUIZ"?P=`IDIOM_QUIZ:${D.fullText}`:D.type==="PREPOSITION_QUIZ"?P=`PREPOSITION_QUIZ:${D.answer}`:D.type==="PARAPHRASE_QUIZ"?P=`PARAPHRASE_QUIZ:${D.answer}`:D.type==="PARAPHRASE_CONTEXT_QUIZ"?P="PARAPHRASE_CONTEXT_QUIZ":D.type==="COLLOCATION_CONTEXT_QUIZ"?P="COLLOCATION_CONTEXT_QUIZ":D.type==="IDIOM_CONTEXT_QUIZ"?P="IDIOM_CONTEXT_QUIZ":P=D.type,ee(P,ue)===!0&&(re=!0),!re){if(D.type==="PARAPHRASE_QUIZ"){const te=D.answer;v[`PARAPHRASE_CONTEXT_QUIZ:${te}`]===!0&&(re=!0)}else if(D.type==="COLLOCATION_QUIZ"){const te=D.fullText;v[`COLLOCATION_CONTEXT_QUIZ:${te}`]===!0&&(re=!0),ee(`COLLOCATION_MULTICHOICE_QUIZ:${te}`,"COLLOCATION_MULTICHOICE_QUIZ")===!0&&(re=!0)}else if(D.type==="IDIOM_QUIZ"){const te=D.fullText;v[`IDIOM_CONTEXT_QUIZ:${te}`]===!0&&(re=!0)}}re&&fe++}),j.set(ue,{score:fe,total:ce.length})}),j},[l,C]);w.useEffect(()=>{if(c&&!R&&V.challenges.length===0){if(C.length===0){setTimeout(o,100);return}(async()=>{O(!0);let j=C;y&&(j=C.filter(y)),j.length===0&&(j=C.filter(ee=>ee.type!=="SPELLING")),j.length===0&&(j=C);const z=j[Math.floor(Math.random()*j.length)];if(!z){O(!1),setTimeout(o,500);return}try{const ee=await Gm([z],l);ee.length>0?(V.startTest(ee),T(!1)):setTimeout(o,500)}catch{setTimeout(o,500)}finally{O(!1)}})()}},[c,C,l,y]),w.useEffect(()=>{g&&!c&&C.length>0&&V.challenges.length===0&&!R&&ie()},[g,c,C.length,V.challenges.length,R]),w.useEffect(()=>{if(c||C.length===0)return;const v=Object.keys(l.lastTestResults||{}).length>0,j=new Set;!v&&!g?(U(!1),C.forEach(z=>j.add(z.type))):(U(!0),["MEANING_QUIZ","PREPOSITION_QUIZ","COLLOCATION_CONTEXT_QUIZ"].forEach(z=>{C.some(ee=>ee.type===z)&&j.add(z)})),N(j)},[C,l,c,g]);const F=v=>{U(!1),N(j=>{const z=new Set(j);return z.has(v)?z.delete(v):z.add(v),z})},K=async v=>{const j=v||I;let z=C.filter(ce=>j.has(ce.type));if(j.has("SENTENCE_SCRAMBLE")){const ce=z.filter(fe=>fe.type==="SENTENCE_SCRAMBLE");if(ce.length>1){const fe=ce[Math.floor(Math.random()*ce.length)];z=z.filter(D=>D.type!=="SENTENCE_SCRAMBLE"),z.push(fe)}}if(z.length===0)return;O(!0);const ue=(await Gm(z,l)).sort(()=>Math.random()-.5);V.startTest(ue),O(!1),T(!1)},ie=async()=>{const v=new Set(C.map(ee=>ee.type)),j=new Set;v.has("MEANING_QUIZ")&&j.add("MEANING_QUIZ");for(const ee of ll.collocation.easy)if(v.has(ee)){j.add(ee);break}for(const ee of ll.paraphrase.easy)if(v.has(ee)){j.add(ee);break}const z=[];v.has("IPA_QUIZ")&&z.push("IPA_QUIZ"),v.has("PREPOSITION_QUIZ")&&z.push("PREPOSITION_QUIZ"),v.has("WORD_FAMILY")&&z.push("WORD_FAMILY");for(const ee of ll.idiom.easy)if(v.has(ee)){z.push(ee);break}if(z.length>0){const ee=z[Math.floor(Math.random()*z.length)];j.add(ee)}if(j.size===0){const ee=co(v,"easy");if(ee.size>0){U(!0),K(ee);return}return}U(!0),K(j)},ge=()=>{const v=new Set,j=Ed(l),z=l.lastTestResults||{},ee=j.filter(ce=>!ce.testKeys.some(fe=>z[fe]===!0));if(ee.length===0){if(X.forEach((fe,D)=>{fe.score<fe.total&&v.add(D)}),v.size===0)return;const ce=co(v,"easy");K(ce);return}C.forEach(ce=>{let fe=[];ce.type==="COLLOCATION_QUIZ"?fe.push(`COLLOCATION_QUIZ:${ce.fullText}`):ce.type==="COLLOCATION_MULTICHOICE_QUIZ"?fe.push(`COLLOCATION_MULTICHOICE_QUIZ:${ce.fullText}`):ce.type==="COLLOCATION_CONTEXT_QUIZ"||(ce.type==="PARAPHRASE_QUIZ"?fe.push(`PARAPHRASE_QUIZ:${ce.answer}`):ce.type==="PREPOSITION_QUIZ"?fe.push(`PREPOSITION_QUIZ:${ce.answer}`):ce.type==="SPELLING"?fe.push("SPELLING"):ce.type==="PRONUNCIATION"?fe.push("PRONUNCIATION"):ce.type==="MEANING_QUIZ"?fe.push("MEANING_QUIZ"):ce.type==="IPA_QUIZ"?fe.push("IPA_QUIZ"):ce.type==="WORD_FAMILY"?fe.push("WORD_FAMILY"):ce.type==="SENTENCE_SCRAMBLE"&&fe.push("SENTENCE_SCRAMBLE")),fe.some(re=>ee.some(P=>P.testKeys.includes(re)||P.testKeys.some(te=>te.startsWith("WORD_FAMILY")&&re==="WORD_FAMILY")))&&v.add(ce.type),ce.type==="COLLOCATION_CONTEXT_QUIZ"&&ee.filter(P=>P.key.startsWith("colloc:")).length>0&&v.add(ce.type),ce.type==="PARAPHRASE_CONTEXT_QUIZ"&&ee.filter(P=>P.key.startsWith("para:")).length>0&&v.add(ce.type),ce.type==="IDIOM_CONTEXT_QUIZ"&&ee.filter(P=>P.key.startsWith("idiom:")).length>0&&v.add(ce.type)}),v.size===0&&X.forEach((ce,fe)=>{ce.score<ce.total&&v.add(fe)});const ue=co(v,"easy");U(!1),K(ue)},oe=async()=>{const v=new Set(C.map(z=>z.type)),j=co(v,"hard");j.size!==0&&(U(!1),K(j))},_=(v=!1)=>{const{finalGrade:j,resultHistory:z,detailedResults:ee,counts:ue}=V.checkAnswers();if(V.finishTest(),S||c)setTimeout(()=>u(j,z,v,ue),1e3);else{const ce=l.masteryScore||0,fe=l.lastReview&&l.lastGrade||"NEW",D={...l,lastTestResults:{...l.lastTestResults||{},...z}},re=Gt(D);Q({oldMastery:ce,newMastery:re,oldStatus:fe,newStatus:j,results:ee,finalGrade:j,resultHistory:z,counts:ue})}},W=()=>{V.isLastChallenge?_(!1):V.handleNext()},J=v=>{const j=Math.floor(v/60),z=v%60;return`${j}:${z.toString().padStart(2,"0")}`},de=w.useMemo(()=>{const v=new Map;return X.forEach((j,z)=>{Qv.includes(z)||v.set(z,j)}),v},[X]),me=w.useMemo(()=>Gt(l)===100,[l]);if(!A&&!R&&!V.currentChallenge)return f?s.jsx("div",{className:"fixed inset-0 z-[150] flex items-center justify-center p-4 bg-black/60 backdrop-blur-sm",children:s.jsxs("div",{className:"bg-white p-6 rounded-2xl shadow-xl text-center space-y-4",children:[s.jsx("p",{className:"text-red-500 font-bold",children:"Failed to load challenge."}),s.jsx("button",{onClick:o,className:"px-4 py-2 bg-neutral-100 rounded-lg text-sm font-bold",children:"Close"})]})}):s.jsxs("div",{className:"flex flex-col items-center justify-center h-full p-6 text-center space-y-4",children:[s.jsx(Ct,{className:"animate-spin text-neutral-400",size:32}),s.jsx("p",{className:"text-red-500 font-bold",children:"Error loading."}),s.jsx("button",{onClick:o,className:"text-xs underline text-neutral-500",children:"Return"})]});if((c||g)&&(R||!V.currentChallenge)){const v=s.jsxs("div",{className:"w-full h-full flex flex-col items-center justify-center p-8 text-center space-y-4",children:[s.jsx(Ct,{className:"animate-spin text-neutral-400",size:32}),s.jsx("p",{className:"text-xs font-black text-neutral-500 uppercase tracking-widest",children:"Preparing..."})]});return f?s.jsx("div",{className:"fixed inset-0 z-[150] flex items-center justify-center p-4 bg-black/60 backdrop-blur-sm",children:s.jsx("div",{className:"bg-white w-full max-w-md rounded-[2.5rem] shadow-2xl overflow-hidden flex flex-col h-[500px]",children:v})}):v}return s.jsx(Dv,{isModal:f,word:l,onClose:o,isSetupMode:A,isPreparing:R,availableChallenges:C,selectedChallengeTypes:I,onToggleChallenge:F,onSetSelection:v=>{N(v),U(!1)},onStartTest:()=>K(),challenges:V.challenges,currentChallenge:V.currentChallenge,currentChallengeIndex:V.currentChallengeIndex,userAnswers:V.userAnswers,handleAnswerChange:V.setAnswer,results:V.results,isFinishing:V.isFinishing,currentPrepositionGroup:V.currentPrepositionGroup,isLastChallenge:V.isLastChallenge,handleNextClick:W,handleBackClick:V.handleBack,handleIgnore:V.handleIgnore,handleFinishEarly:_,showHint:B,onToggleHint:()=>L(!B),sessionPosition:d,challengeStats:de,disableHints:x,onSelectQuick:ie,onSelectPreferred:ge,onSelectZeroScore:ge,onSelectPartialScore:oe,isQuickMode:H,elapsedTime:J(V.elapsedSeconds),recapData:Y,onRecalculateFinish:()=>Y&&u(Y.finalGrade,Y.resultHistory,!1,Y.counts),isMastered:me})};typeof window<"u"&&(window.checkMarkdownQuiz=l=>{const o=l.getAttribute("data-answer");if(!o)return;const c=l.value.trim().toLowerCase()===o.trim().toLowerCase();l.classList.remove("border-neutral-300","text-neutral-900","focus:border-indigo-600"),l.classList.remove("border-green-500","text-green-700","bg-green-50"),l.classList.remove("border-red-500","text-red-700","bg-red-50"),c?l.classList.add("border-green-500","text-green-700","bg-green-50"):l.classList.add("border-red-500","text-red-700","bg-red-50")},window.checkDropdownQuiz=l=>{const o=l.parentElement;if(!o)return;const u=o.querySelector("select");if(!u)return;const c=u.getAttribute("data-answer"),f=u.value;if(!f)return;const d=f===c;if(u.disabled=!0,l.disabled=!0,l.classList.add("opacity-0","pointer-events-none"),u.classList.remove("border-neutral-300","text-neutral-900","focus:border-indigo-600"),u.classList.remove("bg-white"),d)u.classList.add("border-green-500","text-green-700","bg-green-50","font-bold");else{u.classList.add("border-red-500","text-red-700","bg-red-50","line-through");const h=document.createElement("span");h.className="ml-2 text-xs font-bold text-green-600 bg-green-50 px-1.5 py-0.5 rounded border border-green-200 animate-in fade-in",h.innerText=c||"",o.appendChild(h)}},window.checkMultiChoice=l=>{var d;const o=l.parentElement;if(!o)return;const u=o.getAttribute("data-answer"),c=(d=l.textContent)==null?void 0:d.trim();o.querySelectorAll("button").forEach(h=>{var x;h.disabled=!0,h.classList.add("opacity-50","cursor-not-allowed"),((x=h.textContent)==null?void 0:x.trim())===u&&(h.classList.remove("bg-white","text-neutral-700","opacity-50"),h.classList.add("bg-green-500","text-white","border-green-600"))}),c===u?(l.classList.remove("opacity-50"),l.classList.add("ring-2","ring-green-300")):(l.classList.remove("bg-white","text-neutral-700","opacity-50"),l.classList.add("bg-red-500","text-white","border-red-600"))});const Xv=l=>{if(!l[0].trim().startsWith("|"))return null;const o=[];for(const p of l)if(p.trim().startsWith("|"))o.push(p);else break;if(o.length===0)return null;const u=p=>{const g=p.split("|");return p.trim().startsWith("|")&&g.shift(),p.trim().endsWith("|")&&g.pop(),g.map(y=>y.trim())},c=/^\|?(\s*:?-+:?\s*\|)+\s*$/;let f=!1;o.length>1&&c.test(o[1].trim())&&(f=!0);let d='<div class="overflow-x-auto my-4 border border-neutral-200 rounded-xl shadow-sm"><table class="w-full text-sm text-left border-collapse">';const h=u(o[0]);d+='<thead class="bg-neutral-50 text-neutral-900 uppercase font-bold text-xs"><tr>',h.forEach(p=>d+=`<th class="px-6 py-3 border-b border-neutral-200 min-w-[100px]">${p}</th>`),d+="</tr></thead>",d+='<tbody class="divide-y divide-neutral-100 bg-white">';const x=f?2:1;for(let p=x;p<o.length;p++){const g=u(o[p]);d+='<tr class="hover:bg-neutral-50/50 transition-colors">';for(let y=0;y<h.length;y++){const S=g[y]||"";d+=`<td class="px-6 py-4 font-medium text-neutral-600 align-top">${S}</td>`}d+="</tr>"}return d+="</tbody></table></div>",{html:d,consumed:o.length}},Kv=l=>l.replace(/\[HIDDEN:\s*(.*?)\]/gi,(o,u)=>`<button type="button" onclick="this.outerHTML='<span class=\\'px-1.5 py-0.5 bg-green-50 border border-green-200 text-green-800 rounded-md text-sm font-bold animate-in fade-in zoom-in-95 inline-block align-baseline mx-1\\'>${u.trim().replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"\\'")}</span>'" class="inline-flex flex-nowrap whitespace-nowrap items-center gap-1.5 px-2 py-0.5 bg-indigo-50 hover:bg-indigo-100 text-indigo-600 rounded-md text-[10px] font-black uppercase tracking-wider transition-colors select-none border border-indigo-100 shadow-sm align-middle my-0.5 mx-1"><svg xmlns="http://www.w3.org/2000/svg" width="10" height="10" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3" stroke-linecap="round" stroke-linejoin="round" class="shrink-0"><path d="M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z"/><circle cx="12" cy="12" r="3"/></svg>Reveal</button>`),Wv=l=>l.replace(/\[Quiz:\s*(.*?)\]/gi,(o,u)=>{const c=u.trim(),f=Math.max(3,c.length);return`<span class="inline-flex items-center gap-1 align-middle mx-1 whitespace-nowrap"><input type="text" data-answer="${c.replace(/"/g,"&quot;")}" placeholder="?" class="border-b-2 border-neutral-300 bg-transparent text-center font-bold text-neutral-900 outline-none focus:border-indigo-600 transition-all rounded-t-md px-1 py-0.5 text-sm" style="width: ${f}ch; min-width: 40px;" onkeydown="if(event.key==='Enter') window.checkMarkdownQuiz(this)" /><button onclick="window.checkMarkdownQuiz(this.previousElementSibling)" class="p-1 text-neutral-400 hover:text-indigo-600 transition-colors bg-neutral-100 hover:bg-indigo-50 rounded-full shadow-sm" title="Check Answer"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3" stroke-linecap="round" stroke-linejoin="round"><path d="M20 6 9 17l-5-5"/></svg></button></span>`}),$v=l=>l.replace(/\[Select:\s*(.*?)\]/gi,(o,u)=>{const c=u.split("|").map(x=>x.trim()).filter(x=>x.length>0);if(c.length<2)return`[Invalid Select: ${u}]`;const f=c[0],d=[...c];for(let x=d.length-1;x>0;x--){const p=Math.floor(Math.random()*(x+1));[d[x],d[p]]=[d[p],d[x]]}let h='<span class="inline-flex items-center gap-1 align-middle mx-1 whitespace-nowrap">';return h+=`<select data-answer="${f.replace(/"/g,"&quot;")}" class="border-b-2 border-neutral-300 bg-transparent font-bold text-neutral-900 outline-none focus:border-indigo-600 transition-all rounded-t-md px-2 py-0.5 text-sm cursor-pointer hover:bg-neutral-50 appearance-none pr-6 relative" style="min-width: 80px;">`,h+='<option value="" disabled selected>Select...</option>',d.forEach(x=>{h+=`<option value="${x.replace(/"/g,"&quot;")}">${x}</option>`}),h+="</select>",h+='<button onclick="window.checkDropdownQuiz(this)" class="p-1 text-neutral-400 hover:text-indigo-600 transition-colors bg-neutral-100 hover:bg-indigo-50 rounded-full shadow-sm" title="Check Answer"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3" stroke-linecap="round" stroke-linejoin="round"><path d="M20 6 9 17l-5-5"/></svg></button>',h+="</span>",h}),Fv=l=>l.replace(/\[Multi:\s*(.*?)\]/gi,(o,u)=>{const c=u.split("|").map(x=>x.trim()).filter(x=>x.length>0);if(c.length<2)return`[Invalid Multi: ${u}]`;const f=c[0],d=[...c];for(let x=d.length-1;x>0;x--){const p=Math.floor(Math.random()*(x+1));[d[x],d[p]]=[d[p],d[x]]}let h=`<span class="inline-flex flex-wrap items-center gap-1.5 align-middle mx-1" data-answer="${f.replace(/"/g,"&quot;")}">`;return d.forEach(x=>{h+=`<button onclick="window.checkMultiChoice(this)" class="px-2 py-1 bg-white border border-neutral-200 text-neutral-700 rounded-md text-xs font-bold hover:bg-neutral-50 hover:border-neutral-300 transition-all shadow-sm select-none">${x}</button>`}),h+="</span>",h}),Pv=l=>l.replace(/\[Formula:?\s*(.*?)\]/gi,(o,u)=>{const c=u.split("|").map(d=>d.trim());let f='<div class="flex flex-wrap items-center gap-2 p-3 my-3 bg-amber-50 border-l-4 border-amber-400 rounded-r-xl shadow-sm">';return f+='<span class="text-[10px] font-black text-amber-500 uppercase tracking-widest mr-1 select-none">Formula</span>',c.forEach(d=>{/^[+,.]+$/.test(d)?f+=`<span class="font-bold text-amber-700">${d}</span>`:f+=`<span class="px-2 py-1 bg-white border border-amber-200 rounded-lg text-amber-900 font-mono text-sm font-bold shadow-sm">${d}</span>`}),f+="</div>",f}),Jv=l=>{const o=/\[Audio-(VN|EN)\]([\s\S]*?)\[\/(?:Audio-(?:VN|EN))?\]/gi;return l.replace(o,(u,c,f)=>`<button onclick="window.handleLessonSpeak('${f.replace(/\[HIDDEN:.*?\]/gi,"").replace(/\[Quiz:.*?\]/gi,"").replace(/\[Select:.*?\]/gi,"").replace(/\[Multi:.*?\]/gi,"").replace(/\[Formula:.*?\]/gi,"").replace(/[#*`_~[\]()]/g,"").replace(/[\u{1F600}-\u{1F64F}\u{1F300}-\u{1F5FF}\u{1F680}-\u{1F6FF}\u{2600}-\u{26FF}\u{2700}-\u{27BF}]/gu,"").replace(/\n/g," ").trim().replace(/'/g,"\\'")}')" class="inline-flex items-center justify-center w-6 h-6 mr-1.5 bg-indigo-600 text-white hover:bg-indigo-700 rounded-md transition-all active:scale-90 align-middle shadow-sm" title="Listen"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3" stroke-linecap="round" stroke-linejoin="round"><path d="M11 5L6 9H2v6h4l5 4V5z"/><path d="M15.54 8.46a5 5 0 0 1 0 7.07"/></svg></button>`+f.trim())},Vm=l=>{if(!l)return"";let o=Jv(l);o=Wv(o),o=$v(o),o=Fv(o),o=Pv(o),o=Kv(o);const u=o.split(`
`),c=[],f=[],d=(h=0)=>{for(;f.length>h;){const x=f.pop();c.push(x.type==="ul"?"</ul>":"</ol>")}};for(let h=0;h<u.length;h++){const x=u[h],p=x.trim();if(!p&&f.length===0){c.push('<br class="block my-2" />');continue}const g=Xv(u.slice(h));if(g){d(0),c.push(g.html),h+=g.consumed-1;continue}if(/^([-*_])\s*(\1\s*){2,}$/.test(p)){d(0),c.push('<hr class="my-6 border-t-2 border-neutral-100" />');continue}if(p.startsWith("# ")){d(0),c.push(`<h1 class="text-3xl font-black text-neutral-900 mb-4 mt-8 pb-2 border-b border-neutral-100 leading-tight">${p.substring(2)}</h1>`);continue}if(p.startsWith("## ")){d(0),c.push(`<h2 class="text-xl font-extrabold text-neutral-800 mb-3 mt-6 leading-tight">${p.substring(3)}</h2>`);continue}if(p.startsWith("### ")){d(0),c.push(`<h3 class="text-lg font-bold text-neutral-700 mb-2 mt-4 leading-tight">${p.substring(4)}</h3>`);continue}if(p.startsWith("> ")){d(0),c.push(`<blockquote class="border-l-4 border-amber-400 bg-amber-50 pl-4 py-3 pr-2 my-4 rounded-r-lg text-sm text-neutral-700 font-medium italic shadow-sm">${p.substring(2)}</blockquote>`);continue}const y=p.match(/^\[(?!(HIDDEN:|Quiz:|Select:|QUIZ:|Multi:|Formula:|Audio-|(\/\])))(.*)\]$/);if(y){d(0);const N='<svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="shrink-0 mt-0.5 text-sky-500"><path d="M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.8 1.3 1.5 1.5 2.5"/><path d="M9 18h6"/><path d="M10 22h4"/></svg>',R=y[3].trim();c.push(`
                <div class="flex items-start gap-3 my-4 p-4 bg-sky-50 border-l-4 border-sky-400 rounded-r-lg shadow-sm">
                    ${N}
                    <div class="text-sm text-sky-900 font-medium leading-relaxed">
                        ${R}
                    </div>
                </div>
            `);continue}const S=x.match(/^(\s*)/),A=S?S[0].length:0,T=x.match(/^\s*[-*]\s+(.*)/),I=x.match(/^\s*(\d+)\.\s+(.*)/);if(T||I){const N=T?"ul":"ol",R=T?T[1]:I[2],O=I?I[1]:void 0;if(f.length===0||A>f[f.length-1].indent)c.push(N==="ul"?'<ul class="list-disc list-outside pl-5 my-3 space-y-1 text-neutral-700 marker:text-neutral-400">':'<ol class="list-decimal list-outside pl-5 my-3 space-y-1 text-neutral-700 marker:font-bold marker:text-neutral-500">'),f.push({type:N,indent:A});else if(A<f[f.length-1].indent)for(;f.length>0&&A<f[f.length-1].indent;)d(f.length-1);N==="ol"&&O?c.push(`<li value="${O}" class="pl-1">${R}</li>`):c.push(`<li class="pl-1">${R}</li>`);continue}p!==""&&(d(0),c.push(`<p class="mb-2 leading-relaxed text-neutral-600">${x}</p>`))}return d(0),c.join("").replace(/!\[(.*?)\]\((.*?)\)/g,'<img alt="$1" src="$2" class="max-w-full h-auto rounded-lg my-4 shadow-md border border-neutral-200" />').replace(/\[(.*?)\]\((.*?)\)/g,'<a href="$2" target="_blank" rel="noopener noreferrer" class="text-indigo-600 font-bold hover:underline">$1</a>').replace(/\*\*(.*?)\*\*/g,'<strong class="font-black text-neutral-900">$1</strong>').replace(/\*(.*?)\*/g,'<span class="italic font-normal text-inherit">$1</span>').replace(/`([^`]+)`/g,'<code class="bg-neutral-100 text-pink-600 px-1.5 py-0.5 rounded text-xs font-mono font-bold border border-neutral-200">$1</code>')},e2=({score:l})=>{const f=2*Math.PI*16,d=f-l/100*f;let h="text-neutral-400";return l>=80?h="text-green-500":l>=50?h="text-yellow-500":l>0&&(h="text-orange-500"),s.jsxs("div",{className:"relative flex items-center justify-center",style:{width:36,height:36},children:[s.jsxs("svg",{className:"absolute",width:36,height:36,children:[s.jsx("circle",{className:"text-neutral-100",stroke:"currentColor",strokeWidth:4,fill:"transparent",r:16,cx:36/2,cy:36/2}),s.jsx("circle",{className:h,stroke:"currentColor",strokeWidth:4,fill:"transparent",r:16,cx:36/2,cy:36/2,strokeDasharray:f,strokeDashoffset:d,strokeLinecap:"round",style:{transform:"rotate(-90deg)",transformOrigin:"50% 50%",transition:"stroke-dashoffset 0.5s ease-out"}})]}),s.jsx("span",{className:`text-[10px] font-black ${h}`,children:l})]})},t2=({word:l})=>{const o=l.masteryScore??0;return s.jsxs("div",{className:"relative group/score",children:[s.jsx(e2,{score:o}),s.jsxs("div",{className:"absolute top-full left-1/2 -translate-x-1/2 mt-2 w-max px-3 py-1.5 bg-neutral-800 text-white text-[10px] font-black rounded-lg opacity-0 group-hover/score:opacity-100 transition-opacity pointer-events-none z-10 uppercase tracking-wider",children:["Mastery Score",s.jsx("div",{className:"absolute bottom-full left-1/2 -translate-x-1/2 w-2 h-2 bg-neutral-800 rotate-45"})]})]})},a2=({register:l})=>{if(!l||l==="neutral"||l==="raw")return null;const o={academic:"bg-purple-100 text-purple-800 border-purple-200",casual:"bg-sky-100 text-sky-800 border-sky-200"},u={academic:"ACADEMIC",casual:"CASUAL"};return s.jsx("span",{className:`px-2 py-0.5 rounded text-[8px] font-black uppercase border ${o[l]}`,children:u[l]})},n2=l=>{const o={intensified:"bg-orange-100 text-orange-700 border-orange-200",softened:"bg-blue-100 text-blue-700 border-blue-200",synonym:"bg-neutral-100 text-neutral-600 border-neutral-200",academic:"bg-purple-100 text-purple-700 border-purple-200",casual:"bg-sky-100 text-sky-700 border-sky-200"};return s.jsx("span",{className:`px-2 py-0.5 rounded text-[8px] font-black uppercase border ${o[l]||o.synonym}`,children:l})},Qm=({label:l,options:o,selectedId:u,onSelect:c,buttonClass:f,disabled:d=!1})=>{const[h,x]=w.useState(!1),p=w.useRef(null),g=o.find(y=>y.id===u)||o[0];return w.useEffect(()=>{const y=S=>{p.current&&!p.current.contains(S.target)&&x(!1)};return document.addEventListener("mousedown",y),()=>document.removeEventListener("mousedown",y)},[]),s.jsxs("div",{className:"relative",ref:p,children:[s.jsxs("button",{type:"button",onClick:()=>x(!h),className:f,disabled:d,children:[l&&s.jsx("span",{className:"text-[9px] font-black uppercase tracking-widest text-neutral-400 mr-2",children:l}),g.icon,s.jsx("span",{className:"text-xs font-black uppercase tracking-wider",children:g.label}),s.jsx(Fm,{size:14,className:`transition-transform duration-200 ${h?"rotate-180":""}`})]}),h&&!d&&s.jsx("div",{className:"absolute right-0 top-full mt-2 w-48 bg-white rounded-2xl shadow-xl border border-neutral-100 z-50 p-2 overflow-hidden animate-in fade-in zoom-in-95 flex flex-col gap-1",children:o.map(y=>s.jsxs("button",{type:"button",onClick:()=>{c(y.id),x(!1)},className:`w-full flex items-center gap-3 px-3 py-2.5 rounded-lg text-xs font-bold transition-colors ${u===y.id?"bg-neutral-100 text-neutral-900":"text-neutral-600 hover:bg-neutral-50 hover:text-neutral-900"}`,children:[y.icon,s.jsx("span",{children:y.label})]},y.id))})]})},l2=({word:l,onClose:o,onChallengeRequest:u,onMimicRequest:c,onEditRequest:f,onUpdate:d,linkedUnits:h,relatedWords:x,relatedByGroup:p,onNavigateToWord:g,onAddVariantToLibrary:y,addingVariant:S,existingVariants:A,isViewOnly:T=!1,appliedAccent:I,initialTab:N="OVERVIEW",onGenerateLesson:R})=>{var ce,fe,D,re,P,te,he,ye,we,ot,He,Xe,je;const[O,H]=w.useState(()=>Ao("ielts_pro_word_view_settings",{showHidden:!1,highlightFailed:!0,isLearnView:!0})),[U,B]=w.useState(!1),[L,Y]=w.useState(N),[Q,V]=w.useState(new Set),C=w.useRef(null);w.useEffect(()=>{Ig("ielts_pro_word_view_settings",O)},[O]);const X=(le,Ce)=>H(Re=>({...Re,[le]:Ce}));w.useEffect(()=>{const le=Ce=>{C.current&&!C.current.contains(Ce.target)&&B(!1)};return document.addEventListener("mousedown",le),()=>document.removeEventListener("mousedown",le)},[]),w.useEffect(()=>(window.handleLessonSpeak=le=>Ft(le),()=>{delete window.handleLessonSpeak}),[]);const F=[{id:"NEW",label:"New",icon:s.jsx("div",{className:"w-3 h-3 rounded-full bg-blue-500"})},{id:Fe.LEARNED,label:"Learned",icon:s.jsx("div",{className:"w-3 h-3 rounded-full bg-cyan-500"})},{id:Fe.FORGOT,label:"Forgot",icon:s.jsx("div",{className:"w-3 h-3 rounded-full bg-rose-500"})},{id:Fe.HARD,label:"Hard",icon:s.jsx("div",{className:"w-3 h-3 rounded-full bg-orange-500"})},{id:Fe.EASY,label:"Easy",icon:s.jsx("div",{className:"w-3 h-3 rounded-full bg-green-500"})}],K=l.lastReview&&l.lastGrade||"NEW",ie=le=>{if(!T)if(le==="NEW"){const Ce=wg(l);d(Ce)}else{const Ce=Sg(l,le);d(Ce)}},ge=[{id:tt.RAW,label:"Raw",icon:s.jsx(eh,{size:14,className:"text-neutral-400"})},{id:tt.REFINED,label:"Needs Review",icon:s.jsx(dh,{size:14,className:"text-indigo-500"})},{id:tt.VERIFIED,label:"Verified",icon:s.jsx(oh,{size:14,className:"text-emerald-500"})},{id:tt.FAILED,label:"Incorrect",icon:s.jsx(ch,{size:14,className:"text-rose-500"})}],oe=(le,Ce,Re,Pe)=>{const De=Array.isArray(Ce)?Ce.filter(_e=>O.showHidden||!_e.isIgnored):[];return De.length===0?null:s.jsxs("div",{className:"space-y-1",children:[s.jsx("span",{className:`text-[8px] font-black uppercase text-${Re}-600 tracking-widest ml-1`,children:le}),s.jsx("div",{className:"flex flex-col gap-1",children:De.map((_e,pt)=>{var yt,ta;const lt=A.has(_e.word.toLowerCase()),mt=`WORD_FAMILY:${Pe}:${_e.word.toLowerCase().trim()}`,pa=l.lastTestResults&&mt in l.lastTestResults,Us=pa?l.lastTestResults[mt]:void 0;let tn=!1;if(pa)tn=Us===!1;else{const wt=`WORD_FAMILY_${Pe.toUpperCase()}`,il=(yt=l.lastTestResults)==null?void 0:yt[wt];(il===!1||il===void 0&&((ta=l.lastTestResults)==null?void 0:ta.WORD_FAMILY)===!1)&&(tn=!0)}const ea=O.highlightFailed&&tn&&!_e.isIgnored,Dl=_e.isIgnored;let _a="bg-white border-neutral-100 hover:border-neutral-300";return ea?_a="bg-red-50 border-red-200 hover:border-red-300":Dl&&(_a="bg-neutral-50/50 border-neutral-100 opacity-60"),s.jsxs("div",{className:`flex items-center justify-between px-2 py-1.5 rounded-lg border group transition-colors ${_a}`,children:[" ",s.jsxs("div",{className:"flex flex-col overflow-hidden",children:[" ",s.jsxs("div",{className:"flex items-center gap-1.5",children:[" ",s.jsx("span",{className:`text-[10px] font-bold truncate ${ea?"text-red-700":"text-neutral-900"} ${Dl?"line-through decoration-neutral-400":""}`,children:_e.word})," ",s.jsx("button",{onClick:wt=>{wt.stopPropagation(),Ft(_e.word)},className:"text-neutral-300 hover:text-indigo-500 transition-colors p-0.5",children:s.jsx(Ra,{size:10})})," ",ea&&s.jsx(wn,{size:10,className:"text-red-500 fill-red-100 shrink-0"})," "]})," "]})," ",s.jsx("button",{type:"button",disabled:S===_e.word||lt,onClick:()=>y({word:_e.word,ipa:""},"family"),className:`p-1 rounded-md transition-all ${lt?"text-green-500 cursor-default":"text-neutral-300 hover:text-neutral-900 hover:bg-neutral-100"}`,children:S===_e.word?s.jsx(Ct,{size:10,className:"animate-spin"}):lt?s.jsx(Fa,{size:10}):s.jsx(Ja,{size:10})})," "]},pt)})})]})},_=({title:le,icon:Ce,children:Re,className:Pe})=>s.jsxs("div",{className:`space-y-2 ${Pe||""}`,children:[s.jsxs("div",{className:"flex items-center gap-1.5 text-[10px] font-black uppercase tracking-widest text-neutral-400 border-b border-neutral-100 pb-1 mb-2",children:[s.jsx(Ce,{size:12}),s.jsx("span",{children:le})]}),Re]}),W=U1(l.nextReview),J=!!(l.wordFamily&&((ce=l.wordFamily.nouns)!=null&&ce.length||(fe=l.wordFamily.verbs)!=null&&fe.length||(D=l.wordFamily.adjs)!=null&&D.length||(re=l.wordFamily.advs)!=null&&re.length)),de=(l.prepositions||[]).filter(le=>O.showHidden||!le.isIgnored),me=(l.collocationsArray||[]).filter(le=>O.showHidden||!le.isIgnored),v=(l.idiomsList||[]).filter(le=>O.showHidden||!le.isIgnored),j=(l.paraphrases||[]).filter(le=>O.showHidden||!le.isIgnored),z=O.highlightFailed&&((P=l.lastTestResults)==null?void 0:P.SPELLING)===!1;O.highlightFailed&&(((te=l.lastTestResults)==null?void 0:te.IPA_QUIZ)===!1||((he=l.lastTestResults)==null||he.PRONUNCIATION)),w.useMemo(()=>{if(!l.wordFamily)return[];const le=[],Ce=["nouns","verbs","adjs","advs"],Re={nouns:"Noun",verbs:"Verb",adjs:"Adjective",advs:"Adverb"};return Ce.forEach(Pe=>{(l.wordFamily[Pe]||[]).forEach(De=>{(O.showHidden||!De.isIgnored)&&le.push({word:De.word,type:Re[Pe],ipa:De.ipaUs})})}),le},[l.wordFamily,O.showHidden]);const ee=w.useMemo(()=>{var le;return(le=l.lesson)!=null&&le.essay?Vm(l.lesson.essay):null},[(ye=l.lesson)==null?void 0:ye.essay]),ue=w.useMemo(()=>{var le;return(le=l.lesson)!=null&&le.test?Vm(l.lesson.test):null},[(we=l.lesson)==null?void 0:we.test]);return s.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center p-4 bg-black/40 backdrop-blur-sm animate-in fade-in duration-200",children:s.jsxs("div",{className:"bg-white w-full max-w-6xl rounded-[2.5rem] shadow-2xl overflow-hidden flex flex-col max-h-[90vh]",children:[s.jsx("header",{className:"px-8 py-4 border-b border-neutral-100 bg-neutral-50/30 flex flex-col gap-1 shrink-0",children:s.jsxs("div",{className:"flex justify-between items-start w-full gap-4",children:[s.jsx("div",{className:"flex-1",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("h2",{className:`text-2xl font-black tracking-tight leading-none ${z?"text-red-600":"text-neutral-900"}`,children:l.word}),z&&s.jsx(wn,{size:16,className:"text-red-500 fill-red-100"}),!l.isPassive&&s.jsxs(s.Fragment,{children:[s.jsx("button",{onClick:le=>{le.stopPropagation(),Ft(l.word)},className:"p-2 text-neutral-400 hover:bg-neutral-100 hover:text-neutral-900 rounded-full transition-colors",title:"Pronounce",children:s.jsx(Ra,{size:18})}),s.jsx("button",{onClick:le=>{le.stopPropagation(),c()},className:"p-2 text-neutral-400 hover:bg-neutral-100 hover:text-neutral-900 rounded-full transition-colors",title:"Mimic",children:s.jsx(zi,{size:18})})]}),s.jsxs("div",{className:"relative group",children:[s.jsx("button",{className:"p-2 text-neutral-400 hover:bg-neutral-100 hover:text-neutral-900 rounded-full transition-colors",children:s.jsx(yo,{size:18})}),s.jsxs("div",{className:"absolute top-full left-1/2 -translate-x-1/2 mt-2 w-max max-w-xs px-3 py-2 bg-neutral-800 text-white text-xs font-bold rounded-lg opacity-0 group-hover:opacity-100 transition-opacity pointer-events-none z-10",children:[l.meaningVi,s.jsx("div",{className:"absolute bottom-full left-1/2 -translate-x-1/2 w-2 h-2 bg-neutral-800 rotate-45"})]})]}),s.jsx(t2,{word:l})]})}),s.jsxs("div",{className:"flex items-center gap-2 flex-shrink-0",children:[s.jsx(Qm,{options:F,selectedId:K,onSelect:ie,buttonClass:"flex items-center gap-2 px-3 py-2 bg-white rounded-lg hover:bg-neutral-100 transition-colors shadow-sm border border-neutral-200",disabled:T}),s.jsxs("div",{className:"relative",ref:C,children:[s.jsx("button",{onClick:()=>B(!U),className:`p-2 rounded-lg transition-colors ${U?"bg-neutral-900 text-white shadow-sm":"bg-white border border-neutral-200 text-neutral-400 hover:text-neutral-900"}`,title:"View Options",children:s.jsx(Ui,{size:16})}),U&&s.jsxs("div",{className:"absolute right-0 top-full mt-2 w-56 bg-white rounded-2xl shadow-xl border border-neutral-100 z-50 p-2 overflow-hidden animate-in fade-in zoom-in-95 flex flex-col gap-1",children:[s.jsx("div",{className:"px-3 py-2 text-[9px] font-black text-neutral-400 uppercase tracking-widest border-b border-neutral-50",children:"View Options"}),s.jsxs("button",{onClick:()=>X("isLearnView",!O.isLearnView),className:"w-full flex items-center justify-between px-3 py-2 rounded-lg hover:bg-neutral-50 text-xs font-bold text-neutral-700 transition-colors",children:[s.jsx("span",{children:"Learn View"}),O.isLearnView?s.jsx(Fa,{size:14,className:"text-green-500"}):s.jsx("div",{className:"w-4 h-4 rounded-full border border-neutral-200"})]}),s.jsxs("button",{onClick:()=>X("showHidden",!O.showHidden),className:"w-full flex items-center justify-between px-3 py-2 rounded-lg hover:bg-neutral-50 text-xs font-bold text-neutral-700 transition-colors",children:[s.jsx("span",{children:"Show Ignored Items"}),O.showHidden?s.jsx(Fa,{size:14,className:"text-green-500"}):s.jsx("div",{className:"w-4 h-4 rounded-full border border-neutral-200"})]}),s.jsxs("button",{onClick:()=>X("highlightFailed",!O.highlightFailed),className:"w-full flex items-center justify-between px-3 py-2 rounded-lg hover:bg-neutral-50 text-xs font-bold text-neutral-700 transition-colors",children:[s.jsx("span",{children:"Highlight Failed"}),O.highlightFailed?s.jsx(Fa,{size:14,className:"text-green-500"}):s.jsx("div",{className:"w-4 h-4 rounded-full border border-neutral-200"})]})]})]}),!T&&s.jsxs(s.Fragment,{children:[s.jsx("button",{onClick:u,className:"p-2 bg-amber-100 text-amber-600 hover:text-amber-900 rounded-lg hover:bg-amber-200 transition-colors",title:"Practice",children:s.jsx($m,{size:16})}),s.jsx("button",{onClick:f,className:"p-2 bg-neutral-100 text-neutral-600 hover:text-neutral-900 rounded-lg hover:bg-neutral-200 transition-colors",children:s.jsx(Ob,{size:16})})]}),s.jsx("button",{onClick:o,className:"p-2 bg-white border border-neutral-200 text-neutral-400 hover:text-neutral-900 rounded-lg transition-colors",children:s.jsx(kt,{size:16})})]})]})}),s.jsxs("nav",{className:"px-8 border-b border-neutral-100 bg-white flex items-center gap-6 shrink-0 overflow-x-auto no-scrollbar",children:[s.jsx("button",{onClick:()=>Y("OVERVIEW"),className:`py-3 px-1 text-[10px] font-black uppercase tracking-widest border-b-2 transition-all ${L==="OVERVIEW"?"border-neutral-900 text-neutral-900":"border-transparent text-neutral-400 hover:text-neutral-600"}`,children:"Overview"}),s.jsxs("button",{onClick:()=>Y("USAGE"),className:`py-3 px-1 text-[10px] font-black uppercase tracking-widest border-b-2 transition-all flex items-center gap-2 ${L==="USAGE"?"border-indigo-600 text-indigo-600":"border-transparent text-neutral-400 hover:text-neutral-600"}`,children:[s.jsx(mo,{size:14})," Usage"]}),s.jsxs("button",{onClick:()=>Y("TEST"),className:`py-3 px-1 text-[10px] font-black uppercase tracking-widest border-b-2 transition-all flex items-center gap-2 ${L==="TEST"?"border-emerald-600 text-emerald-600":"border-transparent text-neutral-400 hover:text-neutral-600"}`,children:[s.jsx(Fu,{size:14})," Practice Test"]})]}),s.jsxs("div",{className:"flex-1 overflow-y-auto no-scrollbar px-6 pt-4 pb-8 bg-neutral-50/20",children:[L==="OVERVIEW"&&s.jsxs("div",{className:"space-y-6 animate-in fade-in duration-300",children:[s.jsxs("div",{className:"px-2 py-3 bg-white border border-neutral-100 rounded-2xl flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4 shadow-sm",children:[s.jsxs("div",{className:"flex items-center gap-4 flex-wrap",children:[s.jsx("div",{className:"flex flex-col",children:s.jsx("p",{className:"px-2 py-1 bg-neutral-50 rounded-lg text-sm font-mono font-medium border border-neutral-200 text-neutral-500",children:l.ipaUs||"/?/"})}),s.jsxs("div",{className:"flex flex-col",children:[s.jsx(a2,{register:l.register}),(!l.register||l.register==="raw")&&s.jsx("span",{className:"px-2 py-1 bg-neutral-100 text-neutral-400 rounded-lg text-[10px] font-black uppercase tracking-tighter border border-neutral-200",children:"Neutral"})]})]}),s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx(Qm,{label:"Quality",options:ge,selectedId:l.quality,onSelect:le=>d({...l,quality:le}),buttonClass:"flex items-center gap-2 p-1.5 bg-neutral-50 border border-neutral-200 hover:bg-neutral-100 rounded-xl transition-all",disabled:T}),!l.isPassive&&s.jsx("div",{className:"flex flex-col items-end",children:s.jsxs("div",{className:"flex items-center gap-1.5 px-2 py-1 bg-neutral-50 border border-neutral-200 rounded-lg text-xs font-bold text-neutral-500",title:`Next Review: ${W.label}`,children:[s.jsx(Pm,{size:12}),s.jsx("span",{className:`text-[11px] font-black uppercase ${W.urgency==="due"?"text-rose-500":"text-green-600"}`,children:W.label})]})})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[l.note&&s.jsx("div",{className:"md:col-span-4",children:s.jsx("p",{className:"text-sm text-neutral-700 bg-yellow-50/50 p-4 rounded-xl border border-yellow-100 italic leading-relaxed whitespace-pre-wrap",children:l.note})}),s.jsx(_,{title:"Examples",icon:vo,className:"md:col-span-4",children:l.example?s.jsx("div",{className:"flex flex-col gap-2",children:l.example.split(`
`).filter(le=>le.trim()!=="").map((le,Ce)=>s.jsxs("div",{className:"flex items-start gap-2 px-3 py-2 bg-neutral-50 border border-neutral-100 rounded-xl group hover:border-neutral-200 transition-all",children:[s.jsx("span",{className:"text-sm font-medium text-neutral-700 leading-relaxed flex-1 select-text cursor-text",children:le}),s.jsx("button",{onClick:()=>Ft(le),className:"p-1.5 text-neutral-400 hover:text-indigo-500 hover:bg-white rounded-lg transition-all shrink-0",children:s.jsx(Ra,{size:14})})]},Ce))}):s.jsx("div",{className:"text-[10px] text-neutral-300 italic px-1",children:"No examples added."})}),s.jsxs("div",{className:"space-y-1 md:col-span-4",children:[s.jsxs("label",{className:"text-[10px] font-black text-neutral-400 uppercase tracking-widest flex items-center gap-1",children:[s.jsx(rd,{size:10})," Prepositions"]}),de.length>0?s.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-5 gap-2 bg-white border border-neutral-100 p-3 rounded-xl shadow-sm",children:de.map((le,Ce)=>{var _e,pt;const Re=`PREPOSITION_QUIZ:${le.prep}`,Pe=(_e=l.lastTestResults)==null?void 0:_e[Re],De=O.highlightFailed&&(Pe===!1||Pe===void 0&&((pt=l.lastTestResults)==null?void 0:pt.PREPOSITION_QUIZ)===!1)&&!le.isIgnored;return s.jsxs("div",{className:`flex items-center justify-between gap-3 p-2 rounded-lg border transition-colors ${De?"bg-red-50 border-red-200":"bg-neutral-50/30 border-neutral-100"} ${le.isIgnored?"opacity-50":""}`,children:[s.jsxs("div",{className:"flex items-center gap-2 min-w-0",children:[De&&s.jsx(wn,{size:10,className:"text-red-500 shrink-0"}),s.jsx("span",{className:`font-bold text-xs shrink-0 ${De?"text-red-700":"text-neutral-900"} ${le.isIgnored?"line-through":""}`,children:le.prep}),s.jsx("span",{className:`font-medium text-[10px] truncate ${De?"text-red-400":"text-neutral-500"}`,children:le.usage})]}),le.usage&&s.jsx("button",{onClick:()=>Ft(le.usage),className:"text-neutral-300 hover:text-indigo-500 transition-colors p-1 shrink-0",children:s.jsx(Ra,{size:12})})]},Ce)})}):s.jsx("div",{className:"text-[10px] text-neutral-300 italic px-1",children:"No prepositions."})]}),s.jsxs("div",{className:"space-y-1 md:col-span-4",children:[s.jsxs("label",{className:"text-[10px] font-black text-neutral-400 uppercase tracking-widest flex items-center gap-1",children:[s.jsx(ih,{size:10})," Word Family"]}),s.jsx("div",{className:"p-3 bg-neutral-50 rounded-xl border border-neutral-100",children:J?s.jsxs("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-3",children:[oe("Nouns",(ot=l.wordFamily)==null?void 0:ot.nouns,"blue","nouns"),oe("Verbs",(He=l.wordFamily)==null?void 0:He.verbs,"green","verbs"),oe("Adjectives",(Xe=l.wordFamily)==null?void 0:Xe.adjs,"orange","adjs"),oe("Adverbs",(je=l.wordFamily)==null?void 0:je.advs,"purple","advs")]}):s.jsx("span",{className:"text-[10px] text-neutral-300 italic",children:"No family data available."})})]}),s.jsxs("div",{className:"space-y-1 md:col-span-4",children:[s.jsxs("label",{className:"text-[10px] font-black text-neutral-400 uppercase tracking-widest flex items-center gap-1",children:[s.jsx(bo,{size:10})," Collocations"]}),me.length>0?s.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-5 gap-2 bg-white border border-neutral-200 p-3 rounded-xl",children:me.map((le,Ce)=>{var lt,mt;const Re=A.has(le.text.toLowerCase()),Pe=`COLLOCATION_QUIZ:${le.text}`,De=(lt=l.lastTestResults)==null?void 0:lt[Pe];let _e=!1;O.highlightFailed&&!le.isIgnored&&(De===!1||De===void 0&&((mt=l.lastTestResults)==null?void 0:mt.COLLOCATION_QUIZ)===!1)&&(_e=!0);let pt="bg-indigo-50/50 border-indigo-100 text-indigo-900";return _e?pt="bg-red-50 border-red-200 text-red-700":le.isIgnored&&(pt="bg-neutral-50 border-neutral-100 text-neutral-400"),s.jsxs("div",{className:`flex items-start justify-between gap-2 px-3 py-2 rounded-lg border text-xs font-bold transition-colors ${pt}`,children:[s.jsxs("div",{className:"flex-1 overflow-hidden",children:[_e&&s.jsx(wn,{size:12,className:"text-red-500 shrink-0"}),s.jsx("span",{className:`truncate ${le.isIgnored?"line-through":""}`,title:le.text,children:le.text}),le.d&&!le.isIgnored&&s.jsx("div",{className:"text-[10px] italic text-neutral-400 mt-0.5 normal-case font-medium",children:le.d})]}),s.jsx("button",{onClick:()=>Ft(le.text),className:"text-neutral-300 hover:text-indigo-500 transition-colors p-0.5",children:s.jsx(Ra,{size:10})}),s.jsx("button",{type:"button",disabled:S===le.text||Re||le.isIgnored,onClick:()=>y({word:le.text,ipa:""},"collocation"),className:`p-1 rounded-md transition-all shrink-0 ${Re?"text-green-500 cursor-default":le.isIgnored?"text-neutral-300 cursor-not-allowed":"text-neutral-400 hover:text-neutral-900 hover:bg-white/50"}`,title:Re?"Already in library":"Add to library",children:S===le.text?s.jsx(Ct,{size:12,className:"animate-spin"}):Re?s.jsx(Fa,{size:12}):s.jsx(Ja,{size:12})})]},Ce)})}):s.jsx("div",{className:"text-[10px] text-neutral-300 italic px-1",children:"No collocations."})]}),s.jsxs("div",{className:"space-y-1 md:col-span-4",children:[s.jsxs("label",{className:"text-[10px] font-black text-neutral-400 uppercase tracking-widest flex items-center gap-1",children:[s.jsx(No,{size:10,className:"text-amber-500"})," Variations"]}),j.length>0?s.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-5 gap-3",children:j.map((le,Ce)=>{var lt,mt;const Re=A.has(le.word.toLowerCase()),Pe=`PARAPHRASE_QUIZ:${le.word}`,De=(lt=l.lastTestResults)==null?void 0:lt[Pe],_e=O.highlightFailed&&(De===!1||De===void 0&&((mt=l.lastTestResults)==null?void 0:mt.PARAPHRASE_QUIZ)===!1)&&!le.isIgnored,pt=le.isIgnored;return s.jsxs("div",{className:`flex items-start justify-between gap-2 border px-3 py-2 rounded-xl shadow-sm ${_e?"bg-red-50 border-red-200":pt?"bg-neutral-50 border-neutral-100 opacity-60":"bg-white border-neutral-200"}`,children:[s.jsxs("div",{className:"flex-1 overflow-hidden",children:[s.jsxs("div",{className:"flex justify-between items-center mb-1",children:[n2(le.tone),_e&&s.jsx(wn,{size:12,className:"text-red-500 fill-red-100"})]}),s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx("div",{className:`text-xs font-bold ${_e?"text-red-800":"text-neutral-800"} ${pt?"line-through":""}`,children:le.word}),s.jsx("button",{onClick:()=>Ft(le.word),className:"text-neutral-300 hover:text-indigo-500 transition-colors p-0.5",children:s.jsx(Ra,{size:10})})]}),s.jsx("div",{className:`text-[10px] italic truncate ${_e?"text-red-400":"text-neutral-400"}`,title:le.context,children:le.context})]}),s.jsx("button",{type:"button",disabled:S===le.word||Re,onClick:()=>y({word:le.word,ipa:""},"paraphrase"),className:`p-1 rounded-md transition-all mt-1 shrink-0 ${Re?"text-green-500 cursor-default":"text-neutral-300 hover:text-neutral-900 hover:bg-neutral-100"}`,children:S===le.word?s.jsx(Ct,{size:10,className:"animate-spin"}):Re?s.jsx(Fa,{size:10}):s.jsx(Ja,{size:10})})]},Ce)})}):s.jsx("div",{className:"text-[10px] text-neutral-300 italic",children:"No variations available."})]}),s.jsxs("div",{className:"space-y-1 md:col-span-4",children:[s.jsxs("label",{className:"text-[10px] font-black text-neutral-400 uppercase tracking-widest flex items-center gap-1",children:[s.jsx(cd,{size:10})," Related Idioms"]}),v.length>0?s.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-5 gap-2 bg-white border border-neutral-200 p-3 rounded-xl",children:v.map((le,Ce)=>{var lt,mt;const Re=A.has(le.text.toLowerCase()),Pe=`IDIOM_QUIZ:${le.text}`,De=(lt=l.lastTestResults)==null?void 0:lt[Pe];let _e=!1;O.highlightFailed&&!le.isIgnored&&(De===!1||De===void 0&&((mt=l.lastTestResults)==null?void 0:mt.IDIOM_QUIZ)===!1)&&(_e=!0);let pt="bg-amber-50/50 border-amber-100 text-amber-900";return _e?pt="bg-red-50 border-red-200 text-red-700":le.isIgnored&&(pt="bg-neutral-50 border-neutral-100 text-neutral-400"),s.jsxs("div",{className:`flex items-start justify-between gap-2 px-3 py-2 rounded-lg border text-xs font-bold transition-colors ${pt}`,children:[s.jsxs("div",{className:"flex-1 overflow-hidden",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[_e&&s.jsx(wn,{size:12,className:"text-red-500 shrink-0"}),s.jsx("span",{className:`truncate ${le.isIgnored?"line-through":""}`,title:le.text,children:le.text}),s.jsx("button",{onClick:()=>Ft(le.text),className:"text-neutral-300 hover:text-indigo-500 transition-colors p-0.5",children:s.jsx(Ra,{size:10})})]}),le.d&&!le.isIgnored&&s.jsx("div",{className:"text-[10px] italic text-neutral-400 mt-0.5 normal-case font-medium",children:le.d})]}),s.jsx("button",{type:"button",disabled:S===le.text||Re||le.isIgnored,onClick:()=>y({word:le.text,ipa:""},"idiom"),className:`p-1 rounded-md transition-all shrink-0 ${Re?"text-green-500 cursor-default":le.isIgnored?"text-neutral-300 cursor-not-allowed":"text-neutral-400 hover:text-neutral-900 hover:bg-white/50"}`,title:Re?"Already in library":"Add to library",children:S===le.text?s.jsx(Ct,{size:12,className:"animate-spin"}):Re?s.jsx(Fa,{size:12}):s.jsx(Ja,{size:12})})]},Ce)})}):s.jsx("div",{className:"text-[10px] text-neutral-300 italic px-1",children:"No related idioms found."})]})]})]}),L==="USAGE"&&s.jsxs("div",{className:"animate-in fade-in slide-in-from-bottom-2 duration-500 flex flex-col h-full space-y-8",children:[ee?s.jsx("div",{className:"prose prose-sm max-w-none prose-headings:font-black prose-headings:text-neutral-900 prose-p:text-neutral-600 prose-p:leading-relaxed prose-img:rounded-xl prose-img:shadow-md prose-strong:text-neutral-900 prose-a:text-indigo-600 overflow-x-auto",dangerouslySetInnerHTML:{__html:ee}}):s.jsxs("div",{className:"flex flex-col items-center justify-center py-20 bg-white border-2 border-dashed border-neutral-200 rounded-[2.5rem] space-y-4",children:[s.jsx("div",{className:"p-4 bg-indigo-50 rounded-full text-indigo-600",children:s.jsx(mo,{size:32})}),s.jsxs("div",{className:"text-center",children:[s.jsx("p",{className:"font-black text-neutral-900",children:"No Usage Guide"}),s.jsx("p",{className:"text-xs text-neutral-400 font-medium",children:"Generate a structural guide with tables and examples."})]}),!T&&s.jsxs("button",{onClick:()=>R==null?void 0:R("ESSAY"),className:"px-6 py-3 bg-neutral-900 text-white rounded-2xl font-black text-xs uppercase tracking-widest flex items-center gap-2 hover:bg-neutral-800 transition-all active:scale-95 shadow-lg",children:[s.jsx(Is,{size:16})," Generate Usage Guide"]})]}),ee&&!T&&s.jsx("div",{className:"flex justify-center border-t border-neutral-100 pt-6",children:s.jsxs("button",{onClick:()=>R==null?void 0:R("ESSAY"),className:"flex items-center gap-2 px-4 py-2 bg-neutral-50 text-neutral-500 hover:text-indigo-600 hover:bg-indigo-50 border border-neutral-200 hover:border-indigo-200 rounded-xl text-[10px] font-black uppercase tracking-widest transition-all",children:[s.jsx(ho,{size:12})," ",s.jsx("span",{children:"Refresh Usage Guide"})]})})]}),L==="TEST"&&s.jsxs("div",{className:"animate-in fade-in slide-in-from-bottom-2 duration-500 flex flex-col h-full space-y-8",children:[ue?s.jsx("div",{className:"prose prose-sm max-w-none prose-headings:font-black prose-headings:text-neutral-900 prose-p:text-neutral-600 prose-p:leading-relaxed prose-img:rounded-xl prose-img:shadow-md prose-strong:text-neutral-900 prose-a:text-indigo-600",dangerouslySetInnerHTML:{__html:ue}}):s.jsxs("div",{className:"flex flex-col items-center justify-center py-20 bg-white border-2 border-dashed border-neutral-200 rounded-[2.5rem] space-y-4",children:[s.jsx("div",{className:"p-4 bg-emerald-50 rounded-full text-emerald-600",children:s.jsx(Fu,{size:32})}),s.jsxs("div",{className:"text-center",children:[s.jsx("p",{className:"font-black text-neutral-900",children:"No Practice Test"}),s.jsx("p",{className:"text-xs text-neutral-400 font-medium",children:"Create an interactive test based on this word's usage."})]}),!T&&s.jsxs("button",{onClick:()=>R==null?void 0:R("TEST"),className:"px-6 py-3 bg-neutral-900 text-white rounded-2xl font-black text-xs uppercase tracking-widest flex items-center gap-2 hover:bg-neutral-800 transition-all active:scale-95 shadow-lg",children:[s.jsx(Is,{size:16})," Generate Test"]})]}),ue&&!T&&s.jsx("div",{className:"flex justify-center border-t border-neutral-100 pt-6",children:s.jsxs("button",{onClick:()=>R==null?void 0:R("TEST"),className:"flex items-center gap-2 px-4 py-2 bg-neutral-50 text-neutral-500 hover:text-emerald-600 hover:bg-emerald-50 border border-neutral-200 hover:border-emerald-200 rounded-xl text-[10px] font-black uppercase tracking-widest transition-all",children:[s.jsx(ho,{size:12})," ",s.jsx("span",{children:"Regenerate Test"})]})})]})]})]})})},Zm=l=>l.toLowerCase().replace(/[.,!?;:]/g,"").trim();function s2(l,o){const u=l.toLowerCase(),c=o.toLowerCase(),f=[];let d=0,h=0,x=0;const p=(u.length+c.length)*2+100;for(;(d<u.length||h<c.length)&&x<p;)if(x++,d<u.length&&h<c.length&&u[d]===c[h])f.push({char:u[d],status:"correct"}),d++,h++;else if(d<u.length&&(h>=c.length||u[d]!==c[h])){const g=c.indexOf(u[d],h);g!==-1&&g-h<3?(h=g,f.push({char:u[d],status:"correct"}),d++,h++):(f.push({char:u[d],status:"wrong"}),d++)}else h++;return f}function i2(l,o){const u=l.split(/\s+/).filter(Boolean),c=Zm(o).split(/\s+/).filter(Boolean);let f=0,d=0;const h=u.map(p=>{const g=Zm(p);f+=g.length;let y=-1;if(c.forEach((S,A)=>{y===-1&&S===g&&(y=A)}),y===-1&&c.forEach((S,A)=>{y===-1&&S.length>=2&&(S.startsWith(g.substring(0,2))||g.startsWith(S.substring(0,2)))&&(y=A)}),y!==-1){const S=c[y];c.splice(y,1);const A=s2(p,S),T=A.filter(N=>N.status==="correct").length;d+=T;const I=T===g.length?"correct":"near";return{word:p,status:I,chars:A}}return{word:p,status:"missing",chars:p.split("").map(S=>({char:S,status:"missing"}))}});return{score:f>0?Math.round(d/f*100):0,words:h}}const uo=3e3,Dg=({target:l,onClose:o,onSaveScore:u})=>{const[c,f]=w.useState(!1),d=w.useRef(!1),[h,x]=w.useState(""),[p,g]=w.useState(null),[y,S]=w.useState(null),[A,T]=w.useState(uo),[I,N]=w.useState(null),[R,O]=w.useState(!1),[H,U]=w.useState(!1),B=w.useRef(new _d),L=w.useRef(null),Y=w.useRef(Date.now()),{showToast:Q}=Ul(),V=w.useCallback(async()=>{if(I){U(!H);return}O(!0);try{const oe=l.trim().toLowerCase(),_=Ms().find(me=>me.word.toLowerCase()===oe);if(_&&_.ipaUs){N(_.ipaUs),U(!0),O(!1);return}const W=xt(),J=fa(W),de=await fetch(`${J}/api/convert/ipa?text=${encodeURIComponent(l)}`);if(de.ok){const me=await de.json();N(me.ipa),U(!0)}else Q("IPA server unavailable","error")}catch{Q("Failed to fetch IPA","error")}finally{O(!1)}},[l,I,H,Q]),C=w.useCallback(async oe=>{L.current&&(clearInterval(L.current),L.current=null),B.current.stop();const _=await zg();_&&g(_),f(!1),d.current=!1;const W=i2(l,oe);S(W),u&&u(W.score)},[l,u]),X=w.useCallback(()=>{Y.current=Date.now(),T(uo)},[]),F=w.useCallback(oe=>{L.current&&clearInterval(L.current),Y.current=Date.now(),T(uo),L.current=setInterval(()=>{const W=Date.now()-Y.current,J=Math.max(0,uo-W);T(J),J<=0&&d.current&&C(oe)},50)},[C]);w.useEffect(()=>()=>{L.current&&clearInterval(L.current),B.current.stop()},[]);const K=async()=>{if(c)await C(h);else{x(""),S(null),g(null);try{await Ug(),f(!0),d.current=!0,X(),F(""),B.current.start((oe,_)=>{const W=oe+_;x(W),X()},oe=>{d.current&&(x(oe),C(oe))})}catch(oe){console.error(oe),f(!1),d.current=!1}}},ie=()=>{p&&new Audio(`data:${p.mimeType};base64,${p.base64}`).play()},ge=()=>{const oe=Ao("vocab_pro_mimic_practice_queue",[]);if(oe.some(W=>W.text===l)){Q("Already in Pronunciation Queue","info");return}const _={id:`quick-save-${Date.now()}`,text:l,sourceWord:l.length>30?l.substring(0,30)+"...":l,type:"Quick Practice"};Ig("vocab_pro_mimic_practice_queue",[...oe,_]),Q("Saved to Pronunciation Page","success")};return s.jsx("div",{className:"fixed inset-0 z-[10000] flex items-center justify-center p-4 bg-black/60 backdrop-blur-sm animate-in fade-in duration-200",children:s.jsxs("div",{className:"bg-white w-full max-w-md rounded-[2.5rem] shadow-2xl border border-neutral-200 p-8 flex flex-col items-center gap-6 relative",children:[s.jsx("button",{onClick:o,className:"absolute top-6 right-6 p-2 text-neutral-300 hover:text-neutral-900 hover:bg-neutral-100 rounded-full transition-all",children:s.jsx(kt,{size:20})}),s.jsxs("div",{className:"text-center space-y-1 mt-2",children:[s.jsx("span",{className:"text-[10px] font-black uppercase text-neutral-400 tracking-widest",children:"Mimic Practice"}),s.jsx("h3",{className:"text-xl font-bold text-neutral-900 leading-tight",children:"Practice Selected Phrase"})]}),s.jsxs("div",{className:"w-full p-6 bg-neutral-50 rounded-[2rem] border border-neutral-200 flex flex-col items-center gap-3 min-h-[120px] overflow-hidden",children:[s.jsx("div",{className:"flex flex-wrap justify-center gap-x-2 gap-y-1 overflow-y-auto custom-scrollbar max-h-[25vh] items-center",children:l.split(/\s+/).map((oe,_)=>{const W=y==null?void 0:y.words[_];return s.jsx("span",{onClick:()=>Ft(oe),className:"text-2xl font-black cursor-pointer hover:underline decoration-neutral-300 transition-all flex",children:W!=null&&W.chars?W.chars.map((J,de)=>s.jsx("span",{className:J.status==="correct"?"text-emerald-500":J.status==="wrong"?"text-rose-500":"text-neutral-300",children:J.char},de)):s.jsx("span",{className:"text-neutral-900",children:oe})},_)})}),H&&I&&s.jsx("div",{className:"px-4 py-1.5 bg-white border border-neutral-200 rounded-xl text-sm font-mono font-medium text-neutral-500 animate-in slide-in-from-top-2 duration-300",children:I})]}),s.jsxs("div",{className:"flex flex-col items-center gap-4 w-full",children:[c?s.jsxs("div",{className:"flex items-center gap-2 text-rose-500 animate-pulse",children:[s.jsx(_m,{size:20}),s.jsx("span",{className:"text-xs font-black uppercase tracking-widest",children:"Listening..."})]}):h&&s.jsxs("p",{className:"text-sm font-medium italic text-neutral-500 line-clamp-2",children:['"',h,'"']}),y&&s.jsxs("div",{className:"text-center animate-in zoom-in-95",children:[s.jsxs("div",{className:`text-4xl font-black ${y.score>80?"text-emerald-500":y.score>50?"text-amber-500":"text-rose-500"}`,children:[y.score,"%"]}),s.jsx("p",{className:"text-[9px] font-bold text-neutral-400 uppercase tracking-widest",children:"Accuracy"})]})]}),s.jsxs("div",{className:"flex items-center gap-4 pt-2",children:[s.jsx("button",{onClick:()=>Ft(l),className:"p-4 rounded-2xl bg-neutral-100 text-neutral-600 hover:text-neutral-900 transition-all",title:"Listen",children:s.jsx(Ra,{size:24})}),s.jsx("button",{onClick:V,disabled:R,className:`p-4 rounded-2xl transition-all ${H?"bg-indigo-600 text-white shadow-md":"bg-neutral-100 text-neutral-600 hover:text-indigo-600"}`,title:"Show Phonetic (IPA)",children:R?s.jsx(Ct,{size:24,className:"animate-spin"}):s.jsx(ob,{size:24})}),s.jsx("button",{onClick:K,className:`w-20 h-20 rounded-full flex items-center justify-center shadow-lg transition-all transform active:scale-105 ${c?"bg-rose-600 text-white scale-110 shadow-rose-500/50 ring-8 ring-rose-500/10":"bg-white border-4 border-neutral-100 text-neutral-900 hover:scale-105"}`,title:"Record",children:c?A<=1e3?s.jsx("span",{className:"text-2xl font-black tabular-nums animate-in fade-in duration-300",children:(A/1e3).toFixed(1)}):s.jsx(_m,{size:28,className:"animate-pulse"}):s.jsx(zi,{size:28})}),s.jsx("button",{onClick:ie,disabled:!p||c,className:`p-4 rounded-2xl transition-all ${p&&!c?"bg-indigo-100 text-indigo-600 hover:text-indigo-900":"bg-neutral-50 text-neutral-300 cursor-not-allowed"}`,title:"Play recording",children:s.jsx(rh,{size:24,fill:p&&!c?"currentColor":"none"})}),s.jsx("button",{onClick:ge,className:"p-4 rounded-2xl bg-neutral-100 text-neutral-600 hover:text-indigo-600 transition-all",title:"Save to Pronunciation Page",children:s.jsx(Cb,{size:24})})]})]})})},r2=({word:l,onClose:o,onNavigateToWord:u,onEditRequest:c,onUpdate:f,onGainXp:d,isViewOnly:h=!1,initialTab:x="OVERVIEW"})=>{const[p,g]=w.useState(l),[y,S]=w.useState([]),[A,T]=w.useState({}),[I,N]=w.useState({}),[R,O]=w.useState(null),[H,U]=w.useState(new Set),[B,L]=w.useState(!1),[Y,Q]=w.useState(!1);w.useEffect(()=>{g(l)},[l]),w.useEffect(()=>{(async()=>{if(!p)return;const de=[],me=p.wordFamily;me&&de.push(...(me.nouns||[]).map(te=>te.word.toLowerCase().trim()),...(me.verbs||[]).map(te=>te.word.toLowerCase().trim()),...(me.adjs||[]).map(te=>te.word.toLowerCase().trim()),...(me.advs||[]).map(te=>te.word.toLowerCase().trim()));const v=p.paraphrases;v&&de.push(...v.map(te=>te.word.toLowerCase().trim()));const j=p.idiomsList;j&&de.push(...j.map(te=>te.text.toLowerCase().trim()));const z=p.collocationsArray;z&&de.push(...z.map(te=>te.text.toLowerCase().trim()));const ee=[...new Set(de.filter(Boolean))],ue=new Set;for(const te of ee){if(!te)continue;await ad(p.userId,te)&&ue.add(te)}U(ue);const ce=await V1(p.userId,p.id);S(ce);const fe=Ms(),D={};(p.groups||[]).filter(te=>te.toLowerCase()!=="ielts").forEach(te=>{const he=fe.filter(ye=>{var we;return ye.userId===p.userId&&ye.id!==p.id&&((we=ye.groups)==null?void 0:we.includes(te))});he.length>0&&(D[te]=he)}),T(D);const P={};(p.groups||[]).forEach(te=>{const he=fe.filter(ye=>{var we;return ye.userId===p.userId&&ye.id!==p.id&&((we=ye.groups)==null?void 0:we.includes(te))});he.length>0&&(P[te]=he)}),N(P)})()},[p]);const V=async(J,de="family")=>{if(!(!J.word||R||H.has(J.word.toLowerCase()))){O(J.word);try{const me=`From ${de} of "${p.word}"`,v=[...p.groups||[],`word-${de}`],j={...Ng(J.word,J.ipa||"",`Added from ${de}`,"",me,v),userId:p.userId};await Eo(j),U(z=>new Set(z).add(J.word.toLowerCase()))}finally{O(null)}}},C=async(J,de,me,v)=>{const j={...p};de&&(j.lastTestResults={...j.lastTestResults||{},...de}),j.masteryScore=Gt(j),await f(j),L(!1),g(j)},X=J=>{f(J),g(J)},[F,K]=w.useState(null),ie=J=>{K(J)},ge=J=>{const de=xt(),me=de.audioCoach.activeCoach,v=de.audioCoach.coaches[me].name;return F==="ESSAY"?ov(p,J,v):cv(p,J,v)},oe=J=>{const{result:de}=J,me=de||J,v={...p,lesson:{...p.lesson||{}}};F==="ESSAY"?v.lesson.essay=me.content:v.lesson.test=me.content,X(v),K(null)},W=xt().audio.appliedAccent;return s.jsxs(s.Fragment,{children:[B&&s.jsx(Yv,{word:p,onComplete:C,onClose:()=>L(!1)}),Y&&s.jsx(Dg,{target:p.word,onClose:()=>Q(!1)}),s.jsx(l2,{word:p,onClose:o,onChallengeRequest:()=>L(!0),onMimicRequest:()=>Q(!0),onEditRequest:()=>c(p),onUpdate:X,linkedUnits:y,relatedWords:A,relatedByGroup:I,onNavigateToWord:u,onAddVariantToLibrary:V,addingVariant:R,existingVariants:H,appliedAccent:W,isViewOnly:h,initialTab:x,onGenerateLesson:ie}),F&&s.jsx("div",{className:"z-[2000]",children:s.jsx("div",{className:"relative z-[500]",children:s.jsx(nd,{isOpen:!!F,onClose:()=>K(null),type:"GENERATE_WORD_LESSON",title:F==="ESSAY"?`Generate Usage Guide: ${p.word}`:`Generate Practice Test: ${p.word}`,description:F==="ESSAY"?"AI will create a structured usage guide with tables and examples.":"AI will design an interactive test for this word.",initialData:{},onGeneratePrompt:ge,onJsonReceived:oe,closeOnSuccess:!0})})})]})},o2=({isOpen:l,title:o,message:u,confirmText:c,isProcessing:f,onConfirm:d,onClose:h,confirmButtonClass:x="bg-red-600 text-white hover:bg-red-700 shadow-red-200",icon:p=s.jsx(wo,{size:40})})=>l?s.jsx("div",{className:"fixed inset-0 z-[200] flex items-center justify-center p-4 bg-black/60 backdrop-blur-sm animate-in fade-in duration-200",children:s.jsx("div",{className:"bg-white w-full max-w-sm rounded-[2.5rem] shadow-2xl border border-neutral-200 overflow-hidden animate-in zoom-in-95 duration-200",children:s.jsxs("div",{className:"p-8 text-center space-y-6",children:[s.jsx("div",{className:"mx-auto w-20 h-20 bg-neutral-50 text-neutral-500 rounded-full flex items-center justify-center border-4 border-white shadow-sm",children:p}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("h3",{className:"text-2xl font-black text-neutral-900 leading-tight",children:o}),s.jsx("p",{className:"text-neutral-500 text-sm leading-relaxed",children:u})]}),s.jsxs("div",{className:"flex flex-col gap-3",children:[s.jsxs("button",{disabled:f,onClick:d,className:`w-full py-4 rounded-2xl font-black text-sm transition-all shadow-lg active:scale-95 flex items-center justify-center space-x-2 disabled:opacity-50 ${x}`,children:[f?s.jsx(Ct,{size:18,className:"animate-spin"}):null,s.jsx("span",{children:f?"PROCESSING...":c})]}),s.jsx("button",{disabled:f,onClick:h,className:"w-full py-4 bg-neutral-100 text-neutral-500 rounded-2xl font-bold text-sm hover:bg-neutral-200 transition-all active:scale-95 disabled:opacity-50",children:"Cancel"})]})]})})}):null,c2=1e3,u2=300,Ym={woman_teacher:{url:"https://raw.githubusercontent.com/Tarikul-Islam-Anik/Animated-Fluent-Emojis/master/Emojis/People/Woman%20Teacher.png",bg:"bg-indigo-50"},man_teacher:{url:"https://raw.githubusercontent.com/Tarikul-Islam-Anik/Animated-Fluent-Emojis/master/Emojis/People/Man%20Teacher.png",bg:"bg-blue-50"},fox:{url:"https://raw.githubusercontent.com/Tarikul-Islam-Anik/Animated-Fluent-Emojis/master/Emojis/Animals/Fox.png",bg:"bg-orange-100"},koala:{url:"https://raw.githubusercontent.com/Tarikul-Islam-Anik/Animated-Fluent-Emojis/master/Emojis/Animals/Koala.png",bg:"bg-teal-100"},pet:{url:"https://raw.githubusercontent.com/Tarikul-Islam-Anik/Animated-Fluent-Emojis/master/Emojis/Animals/Cat%20Face.png",bg:"bg-pink-100"},owl:{url:"https://raw.githubusercontent.com/Tarikul-Islam-Anik/Animated-Fluent-Emojis/master/Emojis/Animals/Owl.png",bg:"bg-yellow-100"},panda:{url:"https://raw.githubusercontent.com/Tarikul-Islam-Anik/Animated-Fluent-Emojis/master/Emojis/Animals/Panda.png",bg:"bg-emerald-100"},unicorn:{url:"https://raw.githubusercontent.com/Tarikul-Islam-Anik/Animated-Fluent-Emojis/master/Emojis/Animals/Unicorn.png",bg:"bg-purple-100"}},d2=({user:l,currentView:o,onNavigate:u,onViewWord:c,isAnyModalOpen:f})=>{const{showToast:d}=Ul(),[h,x]=w.useState(xt()),[p,g]=w.useState(Mg()),[y,S]=w.useState(!1),[A,T]=w.useState(null),[I,N]=w.useState(!1),[R,O]=w.useState(null),[H,U]=w.useState(null),[B,L]=w.useState(!1),[Y,Q]=w.useState(!1),[V,C]=w.useState(!1),[X,F]=w.useState(!1),K=w.useRef(null),ie=w.useRef(null),ge=h.audioCoach.activeCoach,oe=h.audioCoach.coaches[ge],_=W(oe.avatar);function W(D){return D.startsWith("http")||D.startsWith("data:")?{url:D,bg:"bg-white border-2 border-neutral-100"}:Ym[D]||Ym.woman_teacher}const J=async D=>{if(D){Q(!1),L(!0),ie.current&&ie.current.abort(),ie.current=new AbortController;try{const re=fa(h),P=await fetch(`${re}/api/lookup/cambridge?word=${encodeURIComponent(D)}`,{signal:ie.current.signal});if(P.ok){const te=await P.json();Q(te.exists)}}catch{}finally{L(!1)}}},de=async D=>{if(!D||!l.id)return;const re=await ad(l.id,D);C(!!re)};w.useEffect(()=>{const D=()=>x(xt()),re=P=>g(P.detail.isSpeaking);return window.addEventListener("config-updated",D),window.addEventListener("audio-status-changed",re),()=>{window.removeEventListener("config-updated",D),window.removeEventListener("audio-status-changed",re)}},[]),w.useEffect(()=>{const D=P=>{if(!h.interface.rightClickCommandEnabled)return;const te=window.getSelection(),he=te==null?void 0:te.toString().trim();if(he){P.preventDefault();const we=te.getRangeAt(0).getBoundingClientRect(),ot=we.top>250?"top":"bottom";U({x:we.left+we.width/2,y:ot==="top"?we.top:we.bottom,placement:ot}),T(null),S(!0),de(he),he.split(/\s+/).filter(Boolean).length<=5?J(he):Q(!1)}else U(null)},re=P=>{K.current&&!K.current.contains(P.target)&&y&&(S(!1),U(null))};return document.addEventListener("contextmenu",D),document.addEventListener("mousedown",re),()=>{document.removeEventListener("contextmenu",D),document.removeEventListener("mousedown",re)}},[h.interface.rightClickCommandEnabled,y,h.server,l.id]);const me=async()=>{var re,P;const D=(re=window.getSelection())==null?void 0:re.toString().trim();if(D){N(!0),S(!1),U(null);try{const he=await(await fetch(`https://api.mymemory.translated.net/get?q=${encodeURIComponent(D)}&langpair=en|vi`)).json();if((P=he==null?void 0:he.responseData)!=null&&P.translatedText){const ye=he.responseData.translatedText;T({text:ye,icon:s.jsx(Tb,{size:18,className:"text-blue-500"})}),S(!0),Ft(ye,!1,"vi",oe.viVoice,oe.viAccent)}}catch{d("Translation error!","error")}finally{N(!1)}}},v=async()=>{var re;const D=(re=window.getSelection())==null?void 0:re.toString().trim();if(D){D.length>c2?d("Text is too long to read!","error"):Ft(D,!1,"en",oe.enVoice,oe.enAccent),N(!0),S(!1),U(null);try{const P=D.toLowerCase(),te=Ms().find(we=>we.word.toLowerCase()===P);if(te&&te.ipaUs){T({text:`**IPA:** ${te.ipaUs}`,icon:s.jsx(jm,{size:18,className:"text-emerald-500"})}),S(!0),N(!1);return}const he=fa(h),ye=await fetch(`${he}/api/convert/ipa?text=${encodeURIComponent(D)}&mode=2`);if(ye.ok){const we=await ye.json();T({text:`**IPA:** ${we.ipa}`,icon:s.jsx(jm,{size:18,className:"text-purple-500"})}),S(!0)}}catch{}finally{N(!1)}}},j=async()=>{var re;const D=(re=window.getSelection())==null?void 0:re.toString().trim();if(!(!D||V)){F(!0);try{let P,te=null;try{const he=await Y1([D]);he.length>0&&(te=he[0])}catch{}te?(P={...te,id:crypto.randomUUID?crypto.randomUUID():"id-"+Date.now()+"-"+Math.random().toString(36).substr(2,9),userId:l.id,createdAt:Date.now(),updatedAt:Date.now(),quality:tt.REFINED,source:"refine",nextReview:Date.now(),interval:0,easeFactor:2.5,consecutiveCorrect:0,forgotCount:0,lastReview:void 0,lastGrade:void 0,lastTestResults:{},groups:[...te.groups||[],"coach-added"]},P.complexity=Za(P),P.masteryScore=Gt(P),P.gameEligibility=Qa(P)):P={...Ng(D,"","","","",["coach-added"],!1,!1,!1,!1,D.includes(" ")),userId:l.id,quality:tt.RAW},await Eo(P),d(`"${D}" added!`,"success"),C(!0),S(!1),U(null)}catch{d("Add error!","error")}finally{F(!1)}}},z=async()=>{var P;const D=(P=window.getSelection())==null?void 0:P.toString().trim();if(!D||!l.id||!c||f)return;const re=await ad(l.id,D);re&&(S(!1),U(null),c(re))},ee=()=>{var te;const D=(te=window.getSelection())==null?void 0:te.toString().trim();if(!D)return;const re=D.toLowerCase().replace(/\s+/g,"-"),P=`https://dictionary.cambridge.org/dictionary/english/${encodeURIComponent(re)}`;window.open(P,"_blank"),S(!1),U(null)},ue=()=>{var re;const D=(re=window.getSelection())==null?void 0:re.toString().trim();if(D){if(D.length>u2){d("Selection too long for mimic!","error");return}S(!1),U(null),O(D)}else d("Highlight text to practice!","info")},ce=()=>s.jsx("div",{ref:K,className:"bg-white/95 backdrop-blur-xl p-1.5 rounded-[1.8rem] shadow-2xl border border-neutral-200 flex flex-col gap-1 w-[160px] animate-in fade-in zoom-in-95 duration-200",children:s.jsxs("div",{className:"grid grid-cols-6 gap-1",children:[s.jsx("button",{type:"button",onClick:me,className:"col-span-2 aspect-square bg-indigo-50 text-indigo-600 rounded-2xl flex items-center justify-center hover:bg-indigo-100 transition-all active:scale-90 shadow-sm font-black text-xs",title:"Ting Vit",children:"VI"}),V?s.jsx("button",{type:"button",onClick:z,disabled:f,className:"col-span-2 aspect-square bg-sky-50 text-sky-600 rounded-2xl flex items-center justify-center hover:bg-sky-100 transition-all active:scale-90 shadow-sm",title:"View Word Details",children:s.jsx(Ui,{size:15})}):s.jsx("button",{type:"button",onClick:j,disabled:X,className:"col-span-2 aspect-square bg-green-50 text-green-600 rounded-2xl flex items-center justify-center hover:bg-green-100 transition-all active:scale-90 shadow-sm",title:"Add to Library",children:X?s.jsx(Ct,{size:14,className:"animate-spin"}):s.jsx(Ja,{size:15})}),s.jsx("button",{type:"button",onClick:v,className:"col-span-2 aspect-square bg-purple-50 text-purple-600 rounded-2xl flex items-center justify-center hover:bg-purple-100 transition-all active:scale-90 shadow-sm",title:"Read & Phonetics (EN)",children:s.jsx(Ra,{size:15})}),s.jsx("div",{className:"col-span-1"}),s.jsx("button",{type:"button",onClick:ue,className:"col-span-2 aspect-square bg-amber-50 text-amber-500 rounded-2xl flex items-center justify-center hover:bg-amber-100 transition-all active:scale-95 shadow-sm",title:"Mimic Practice",children:s.jsx(zi,{size:15})}),s.jsx("button",{type:"button",onClick:ee,disabled:B||!Y,className:`col-span-2 aspect-square rounded-2xl flex items-center justify-center transition-all shadow-sm ${Y?"bg-blue-50 text-blue-600 hover:bg-blue-100":"bg-neutral-50 text-neutral-300 cursor-not-allowed"}`,title:"Cambridge Lookup",children:B?s.jsx(Ct,{size:14,className:"animate-spin"}):s.jsx(Ub,{size:15})}),s.jsx("div",{className:"col-span-1"})]})}),fe=D=>{const re=new RegExp("\\*\\*(.*?)\\*\\*","g");return D.replace(re,"<strong>$1</strong>")};return s.jsxs(s.Fragment,{children:[y&&H&&s.jsx("div",{className:"fixed z-[2147483647]",style:{left:`${H.x}px`,top:`${H.y}px`,transform:H.placement==="top"?"translate(-50%, -100%) translateY(-10px)":"translate(-50%, 0) translateY(10px)"},children:s.jsx(ce,{})}),s.jsx("div",{className:"fixed bottom-0 left-6 z-[2147483646] flex flex-col items-start pointer-events-none",children:s.jsx("div",{className:"flex flex-col items-center pointer-events-auto group pb-0 pt-10",onMouseEnter:()=>S(!0),onMouseLeave:()=>setTimeout(()=>S(!1),300),children:s.jsxs("div",{className:"relative",children:[y&&!H&&s.jsx("div",{className:"absolute bottom-16 left-0 z-50 animate-in fade-in slide-in-from-bottom-2 duration-200",children:A?s.jsxs("div",{className:"bg-white p-5 rounded-[2.5rem] shadow-2xl border border-neutral-200 w-72 relative",children:[s.jsx("button",{onClick:()=>T(null),className:"absolute top-4 right-4 text-neutral-300 hover:text-neutral-900",children:s.jsx(kt,{size:14})}),s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx("div",{className:"shrink-0 mt-1",children:A.icon||s.jsx(cd,{size:18})}),s.jsx("div",{className:"text-xs font-medium text-neutral-700 leading-relaxed",dangerouslySetInnerHTML:{__html:fe(A.text)}})]})]}):s.jsx(ce,{})}),s.jsx("button",{onClick:D=>{p&&(D.stopPropagation(),Hi())},className:`w-14 h-14 rounded-2xl flex items-center justify-center transition-all duration-300 transform shadow-2xl relative z-10 ${_.bg} ${y?"ring-4 ring-white":"hover:scale-110 mb-1"}`,children:I?s.jsx(Ct,{size:20,className:"animate-spin text-neutral-400"}):s.jsxs(s.Fragment,{children:[s.jsx("img",{src:_.url,className:`w-10 h-10 object-contain ${p?"opacity-30 scale-90 blur-[1px]":""}`,alt:"Coach"}),p&&s.jsx("div",{className:"absolute inset-0 flex items-center justify-center text-indigo-600 animate-in fade-in zoom-in duration-200",children:s.jsx(So,{size:24,fill:"currentColor"})})]})})]})})}),R&&s.jsx(Dg,{target:R,onClose:()=>O(null)})]})},f2=({isOpen:l,onClose:o,backups:u,onRestore:c,onNewUser:f,onLocalRestore:d,isRestoring:h,title:x="Server Backups",description:p="Select a user profile to restore."})=>{if(!l)return null;const g=y=>y<1024*1024?`${(y/1024).toFixed(1)} KB`:`${(y/(1024*1024)).toFixed(1)} MB`;return s.jsx("div",{className:"fixed inset-0 z-[9999] flex items-center justify-center p-4 bg-black/60 backdrop-blur-sm animate-in fade-in duration-200",children:s.jsxs("div",{className:"bg-white w-full max-w-lg rounded-[2.5rem] shadow-2xl border border-neutral-200 flex flex-col max-h-[85vh]",children:[s.jsxs("header",{className:"px-8 py-6 border-b border-neutral-100 flex justify-between items-center shrink-0",children:[s.jsxs("div",{children:[s.jsxs("h3",{className:"text-xl font-black text-neutral-900 flex items-center gap-2",children:[s.jsx(bb,{size:20})," ",x]}),s.jsx("p",{className:"text-sm text-neutral-500 mt-1",children:p})]}),s.jsx("button",{onClick:o,disabled:h,className:"p-2 -mr-2 text-neutral-400 hover:bg-neutral-100 rounded-full",children:s.jsx(kt,{size:20})})]}),s.jsx("main",{className:"flex-1 overflow-y-auto p-6 space-y-3 custom-scrollbar",children:u.length===0?s.jsx("div",{className:"text-center py-10 text-neutral-400 font-medium italic",children:"No backups found on server."}):u.map(y=>s.jsxs("div",{className:"flex items-center justify-between p-4 rounded-2xl bg-neutral-50 border border-neutral-100 hover:border-neutral-300 transition-all group",children:[s.jsxs("div",{className:"flex items-center gap-3 overflow-hidden",children:[s.jsx("div",{className:"p-2.5 bg-white rounded-xl text-neutral-500 shadow-sm",children:s.jsx(Yb,{size:18})}),s.jsxs("div",{className:"min-w-0",children:[s.jsx("h4",{className:"font-bold text-sm text-neutral-900 truncate",children:y.name}),s.jsxs("div",{className:"flex items-center gap-2 text-[10px] text-neutral-500 font-medium",children:[s.jsx("span",{className:"font-black text-indigo-600",children:new Date(y.date).toLocaleString()}),s.jsx("span",{className:"w-1 h-1 rounded-full bg-neutral-300"}),s.jsx("span",{children:g(y.size)})]})]})]}),s.jsx("button",{onClick:()=>c(y.id),disabled:h,className:"px-4 py-2 bg-white border border-neutral-200 text-indigo-600 rounded-xl font-black text-[10px] uppercase tracking-wider hover:bg-indigo-50 hover:border-indigo-200 transition-all shadow-sm active:scale-95 disabled:opacity-50",children:h?s.jsx(Ct,{size:14,className:"animate-spin"}):"Restore"})]},y.id))}),s.jsxs("footer",{className:"px-6 py-4 border-t border-neutral-100 bg-neutral-50/30 shrink-0 flex flex-col gap-3 rounded-b-[2.5rem]",children:[s.jsxs("button",{onClick:f,disabled:h,className:"w-full py-3 bg-neutral-900 text-white rounded-xl font-bold text-xs flex items-center justify-center gap-2 shadow-lg hover:bg-neutral-800 transition-all active:scale-95",children:[s.jsx(Ja,{size:16}),s.jsx("span",{children:"I am a New User (Create Profile)"})]}),s.jsx("div",{className:"flex justify-center",children:s.jsxs("button",{onClick:d,disabled:h,className:"flex items-center gap-1.5 text-[10px] font-bold text-neutral-400 hover:text-neutral-600 transition-colors py-1 px-2 rounded-lg hover:bg-neutral-100",children:[s.jsx(jb,{size:12}),s.jsx("span",{children:"Or restore from local file"})]})})]})]})})},p2=({isOpen:l,onClose:o,onRetry:u,onStop:c,status:f,serverUrl:d,scanningUrl:h})=>{const x=xt(),[p,g]=w.useState(f),[y,S]=w.useState(d||fa(x));if(w.useEffect(()=>{l&&S(d||fa(x))},[l,d]),w.useEffect(()=>{g(f)},[f]),!l)return null;const A=()=>{window.open(y,"_blank")},T=async()=>{g("scanning"),await u(y)},I=async()=>{g("scanning"),await u(void 0)},N=()=>{c(),g("failed")};return s.jsxs("div",{className:"fixed inset-0 z-[9999] flex items-center justify-center p-4 bg-neutral-900/80 backdrop-blur-sm animate-in fade-in duration-300",children:[s.jsxs("div",{className:"bg-white w-full max-w-md rounded-[2.5rem] shadow-2xl border border-neutral-200 overflow-hidden flex flex-col animate-in zoom-in-95 duration-300",children:[s.jsxs("div",{className:`p-8 text-center space-y-4 ${p==="failed"?"bg-red-50":"bg-indigo-50"}`,children:[s.jsxs("div",{className:"mx-auto w-20 h-20 bg-white rounded-full flex items-center justify-center shadow-sm relative",children:[p==="scanning"&&s.jsxs(s.Fragment,{children:[s.jsx(Ct,{size:40,className:"text-indigo-500 animate-spin"}),s.jsx("div",{className:"absolute inset-0 rounded-full border-4 border-indigo-100 border-t-indigo-500 animate-spin"})]}),p==="failed"&&s.jsx(wo,{size:40,className:"text-red-500"}),p==="success"&&s.jsx(Kb,{size:40,className:"text-green-500"})]}),s.jsxs("div",{className:"space-y-1",children:[s.jsx("h3",{className:"text-2xl font-black text-neutral-900 tracking-tight",children:p==="scanning"?"Connecting...":p==="failed"?"Connection Failed":"Connected!"}),s.jsx("p",{className:"text-sm font-medium text-neutral-500",children:p==="scanning"?h?"Scanning network...":"Contacting Vocab Pro Server...":p==="failed"?"Could not talk to the server.":"Server found. Syncing..."})]})]}),s.jsxs("div",{className:"p-6 space-y-6",children:[p==="scanning"&&s.jsxs("div",{className:"flex flex-col gap-4",children:[s.jsx("div",{className:"h-2 w-full bg-neutral-100 rounded-full overflow-hidden",children:s.jsx("div",{className:"h-full bg-indigo-500 animate-progress-indeterminate"})}),s.jsxs("div",{className:"bg-neutral-50 p-4 rounded-2xl border border-neutral-100 text-center animate-pulse",children:[s.jsx("p",{className:"text-[10px] font-black uppercase text-neutral-400 tracking-widest mb-1",children:"Checking Endpoint"}),s.jsx("p",{className:"text-sm font-bold text-neutral-600 truncate",children:h||"..."})]}),s.jsxs("button",{onClick:N,className:"mx-auto px-6 py-2 bg-white border border-red-200 text-red-600 rounded-xl font-bold text-xs flex items-center gap-2 hover:bg-red-50 transition-colors shadow-sm",children:[s.jsx(So,{size:12,fill:"currentColor"})," Stop"]})]}),p==="failed"&&s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx("label",{className:"text-[10px] font-black text-neutral-400 uppercase tracking-widest px-1",children:"Server Address"}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx("input",{type:"text",value:y,onChange:R=>S(R.target.value),className:"flex-1 px-4 py-3 bg-neutral-50 border border-neutral-200 rounded-xl text-sm font-bold text-neutral-800 focus:outline-none focus:ring-2 focus:ring-neutral-900",placeholder:"http://localhost:3000"}),s.jsx("button",{onClick:T,className:"px-4 py-3 bg-neutral-900 text-white rounded-xl font-bold text-sm flex items-center gap-2 hover:bg-neutral-800 shadow-lg active:scale-95",children:s.jsx(sh,{size:16})})]})]}),s.jsx("div",{className:"grid grid-cols-2 gap-3 pt-2",children:s.jsxs("button",{onClick:I,className:"col-span-2 py-3 bg-white border border-neutral-200 text-neutral-600 rounded-xl font-bold text-xs flex items-center justify-center gap-2 hover:bg-neutral-50 hover:text-neutral-900 transition-colors",children:[s.jsx(Lb,{size:14}),s.jsx("span",{children:"Auto-Scan Network"})]})}),s.jsxs("div",{className:"p-4 bg-amber-50 border border-amber-100 rounded-2xl flex flex-col gap-3",children:[s.jsxs("div",{className:"flex gap-3",children:[s.jsx(Db,{size:20,className:"text-amber-600 shrink-0 mt-0.5"}),s.jsxs("div",{className:"space-y-1",children:[s.jsx("h4",{className:"text-xs font-black text-amber-800 uppercase tracking-wide",children:"HTTPS Security"}),s.jsx("p",{className:"text-[10px] text-amber-700 leading-relaxed font-medium",children:"If the URL is correct but connection fails, your browser blocked it."})]})]}),s.jsxs("button",{onClick:A,className:"w-full py-2 bg-amber-100 text-amber-800 rounded-lg font-bold text-xs flex items-center justify-center gap-2 hover:bg-amber-200 transition-colors",children:[s.jsx(Jm,{size:12}),s.jsx("span",{children:"Open & Trust Certificate"})]})]})]}),p==="success"&&s.jsx("div",{className:"text-center py-4",children:s.jsx("p",{className:"text-green-600 font-bold text-lg animate-bounce",children:"Ready to go!"})})]}),p==="failed"&&s.jsx("div",{className:"p-4 border-t border-neutral-100 bg-neutral-50 flex justify-center",children:s.jsxs("button",{onClick:o,className:"text-xs font-bold text-neutral-400 hover:text-neutral-600 flex items-center gap-1 transition-colors",children:[s.jsx(kt,{size:14})," Continue Offline"]})})]}),s.jsx("style",{children:`
                @keyframes progress-indeterminate {
                    0% { width: 30%; transform: translateX(-100%); }
                    50% { width: 30%; transform: translateX(150%); }
                    100% { width: 30%; transform: translateX(350%); }
                }
                .animate-progress-indeterminate {
                    animation: progress-indeterminate 1.5s infinite linear;
                }
            `})]})},m2=({isOpen:l,onClose:o,onPush:u,onRestore:c,type:f,localDate:d,serverDate:h,isProcessing:x})=>{if(!l)return null;const p=f==="restore";return s.jsx("div",{className:"fixed inset-0 z-[10000] flex items-center justify-center p-4 bg-neutral-900/80 backdrop-blur-sm animate-in fade-in duration-300",children:s.jsxs("div",{className:"bg-white w-full max-w-md rounded-[2.5rem] shadow-2xl border border-neutral-200 overflow-hidden flex flex-col animate-in zoom-in-95 duration-300",children:[s.jsxs("div",{className:`p-8 text-center space-y-4 ${p?"bg-indigo-50":"bg-emerald-50"}`,children:[s.jsxs("div",{className:"mx-auto w-20 h-20 bg-white rounded-full flex items-center justify-center shadow-sm relative",children:[p?s.jsx(Em,{size:40,className:"text-indigo-500"}):s.jsx(Am,{size:40,className:"text-emerald-500"}),s.jsx("div",{className:"absolute -top-1 -right-1 bg-amber-500 rounded-full p-1 border-2 border-white",children:s.jsx(wo,{size:12,className:"text-white"})})]}),s.jsxs("div",{className:"space-y-1",children:[s.jsx("h3",{className:"text-2xl font-black text-neutral-900 tracking-tight",children:p?"Update Available":"Unsaved Progress"}),s.jsx("p",{className:"text-sm font-medium text-neutral-500",children:p?"The server has a newer version of your data.":"Your local data is newer than the cloud backup."})]})]}),s.jsxs("div",{className:"p-8 space-y-6",children:[s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-1 p-3 bg-neutral-50 rounded-2xl border border-neutral-100",children:[s.jsx("p",{className:"text-[9px] font-black uppercase text-neutral-400 tracking-widest",children:"Local Device"}),s.jsx("p",{className:"text-xs font-bold text-neutral-700",children:d})]}),s.jsxs("div",{className:"space-y-1 p-3 bg-neutral-50 rounded-2xl border border-neutral-100",children:[s.jsx("p",{className:"text-[9px] font-black uppercase text-neutral-400 tracking-widest",children:"Cloud Server"}),s.jsx("p",{className:"text-xs font-bold text-neutral-700",children:h})]})]}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("button",{onClick:p?c:u,disabled:x,className:`w-full py-4 rounded-2xl font-black text-sm transition-all shadow-lg active:scale-95 flex items-center justify-center space-x-2 ${p?"bg-indigo-600 text-white hover:bg-indigo-700 shadow-indigo-200":"bg-emerald-600 text-white hover:bg-emerald-700 shadow-emerald-200"}`,children:[x?s.jsx(Ct,{size:18,className:"animate-spin"}):p?s.jsx(Em,{size:18}):s.jsx(Am,{size:18}),s.jsx("span",{children:p?"RESTORE FROM CLOUD":"PUSH TO CLOUD"})]}),s.jsx("button",{onClick:o,disabled:x,className:"w-full py-4 bg-neutral-100 text-neutral-500 rounded-2xl font-bold text-sm hover:bg-neutral-200 transition-all",children:"Ignore for now"})]})]}),s.jsx("div",{className:"bg-neutral-50 px-8 py-4 border-t border-neutral-100",children:s.jsx("p",{className:"text-[9px] font-medium text-neutral-400 text-center leading-relaxed",children:"Automatic synchronization helps keep your library consistent across all your devices."})})]})})},h2=Vt.lazy(()=>Jt(()=>import("./Dashboard-CnL8QB6f.js"),__vite__mapDeps([0,1,2]))),g2=Vt.lazy(()=>Jt(()=>import("./ReviewSession-DyQUkxEq.js"),__vite__mapDeps([3,4]))),x2=Vt.lazy(()=>Jt(()=>import("./WordList-BmzF5D95.js"),__vite__mapDeps([5,6,7,8,9,10,11]))),y2=Vt.lazy(()=>Jt(()=>import("./ReadingUnitPage-CKmI10j_.js"),__vite__mapDeps([12,6,7,8,9,10,11,13,14,15,16,17,18,19,20,21,22,23,24,25,26,1,2,27])).then(l=>({default:l.ReadingUnitPage}))),b2=Vt.lazy(()=>Jt(()=>import("./SettingsView-HtUf5_P7.js"),__vite__mapDeps([28,29,24,30,26,17,7,8,9,10,11])).then(l=>({default:l.SettingsView}))),v2=Vt.lazy(()=>Jt(()=>import("./Discover-G1TADS5G.js"),__vite__mapDeps([31,29,24,16,4,11,10]))),S2=Vt.lazy(()=>Jt(()=>import("./WritingStudioPage-BkX9qAhZ.js"),__vite__mapDeps([32,18,11,10,9,33,8,20,21,13,19,22,15,16,17,23,24,27])).then(l=>({default:l.WritingStudioPage}))),w2=Vt.lazy(()=>Jt(()=>import("./IrregularVerbs-CHxsS_An.js"),__vite__mapDeps([34,35,11,10,27,33]))),N2=Vt.lazy(()=>Jt(()=>import("./MimicPractice-BtlJOY1O.js"),__vite__mapDeps([36,37,38,23,11])).then(l=>({default:l.MimicPractice}))),j2=Vt.lazy(()=>Jt(()=>import("./ListeningCardPage-Be59TMUU.js"),__vite__mapDeps([39,18,11,20,21,13,8,9,19,22,15,16,17,23,24,10,25,26,1,14,38,27,30])).then(l=>({default:l.ListeningCardPage}))),E2=Vt.lazy(()=>Jt(()=>import("./LessonLibraryV2-BD5Q55tl.js"),__vite__mapDeps([40,18,11,8,9,13,41,30,15,16,17,22,23,24,10,35])).then(l=>({default:l.LessonLibraryV2}))),A2=Vt.lazy(()=>Jt(()=>import("./PlanningPage-wzeMgJHR.js"),__vite__mapDeps([42,18,11,19,9,13,25,17,26,1,14,2])).then(l=>({default:l.PlanningPage}))),$u=Vt.lazy(()=>Jt(()=>import("./SpeakingCardPage-PNc0TWZw.js"),__vite__mapDeps([43,18,11,8,9,20,21,13,19,22,15,16,17,23,24,10,14,41,30,38,2,37,27])).then(l=>({default:l.SpeakingCardPage}))),_2=Vt.lazy(()=>Jt(()=>import("./WordBookPage-BKV8JNDG.js"),__vite__mapDeps([44,13,15,16,11,17,23,21,24,27])).then(l=>({default:l.WordBookPage}))),T2=[{id:"DASHBOARD",view:"DASHBOARD",icon:"https://raw.githubusercontent.com/Tarikul-Islam-Anik/Animated-Fluent-Emojis/master/Emojis/Objects/Mobile%20Phone.png",label:"Dashboard"},{id:"BROWSE",view:"BROWSE",icon:"https://raw.githubusercontent.com/Tarikul-Islam-Anik/Animated-Fluent-Emojis/master/Emojis/Objects/Books.png",label:"Library"},{id:"UNIT_LIBRARY",view:"UNIT_LIBRARY",icon:"https://raw.githubusercontent.com/Tarikul-Islam-Anik/Animated-Fluent-Emojis/master/Emojis/Objects/Open%20Book.png",label:"Reading"},{id:"LESSON",view:"LESSON",icon:"https://raw.githubusercontent.com/Tarikul-Islam-Anik/Animated-Fluent-Emojis/master/Emojis/Objects/Notebook.png",label:"Lesson"},{id:"LISTENING",view:"LISTENING",icon:"https://raw.githubusercontent.com/Tarikul-Islam-Anik/Animated-Fluent-Emojis/master/Emojis/Objects/Headphone.png",label:"Listening"},{id:"SPEAKING",view:"SPEAKING",icon:"https://raw.githubusercontent.com/Tarikul-Islam-Anik/Animated-Fluent-Emojis/master/Emojis/Objects/Microphone.png",label:"Speaking"},{id:"WRITING",view:"WRITING",icon:"https://raw.githubusercontent.com/Tarikul-Islam-Anik/Animated-Fluent-Emojis/master/Emojis/Objects/Memo.png",label:"Writing"}],C2=({controller:l,onNavigate:o,onLogoutRequest:u,onSwitchUser:c})=>{const{currentUser:f,view:d,setView:h,sessionType:x,isSidebarOpen:p,setIsSidebarOpen:g,forceExpandAdd:y,openAddWordLibrary:S,serverStatus:A,handleBackup:T,hasUnsavedChanges:I,nextAutoBackupTime:N,triggerServerBackup:R}=l,[O,H]=w.useState(0);w.useEffect(()=>{if(!N){H(0);return}const B=setInterval(()=>{const Y=Date.now(),Q=N-Y,V=Math.ceil(Q/1e3);H(Math.max(0,V)),V<=-2&&(A==="connected"&&R(),clearInterval(B))},1e3),L=N-Date.now();return H(Math.max(0,Math.ceil(L/1e3))),()=>clearInterval(B)},[N,A,R]);const U=N?`Auto-sync in ${O}s...`:I?"Unsaved Changes - Sync Now":"Sync to Server";return f?s.jsx(s.Fragment,{children:s.jsxs("aside",{className:`fixed md:relative inset-y-0 left-0 z-50 w-64 bg-white border-r border-neutral-200 transform ${p?"translate-x-0":"-translate-x-full"} md:translate-x-0 transition-transform duration-300 ease-in-out flex flex-col p-6`,children:[s.jsxs("div",{className:"mb-6",children:[s.jsxs("div",{className:"flex items-center justify-between gap-2",children:[s.jsxs("div",{className:"flex items-center space-x-3 overflow-hidden flex-1",children:[s.jsx("img",{src:f.avatar,className:"w-10 h-10 rounded-2xl bg-neutral-100 shrink-0"}),s.jsxs("div",{className:"flex-1 overflow-hidden",children:[s.jsx("div",{className:"text-sm font-bold text-neutral-900 truncate",children:f.name}),s.jsx("div",{className:"text-[10px] text-neutral-400 font-bold truncate",children:f.role})]})]}),s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx("button",{onClick:c,className:"p-2 rounded-full border-2 border-indigo-100 bg-white text-indigo-500 hover:border-indigo-500 hover:text-indigo-600 hover:bg-indigo-50 transition-all shadow-sm",title:"Switch User",children:s.jsx(uh,{size:16})}),s.jsx("button",{onClick:()=>g(!1),className:"md:hidden p-2 text-neutral-400",children:s.jsx(kt,{size:24})})]})]}),s.jsxs("div",{className:"mt-4 flex items-center space-x-2",children:[s.jsx("button",{onClick:()=>o("SETTINGS"),className:"p-2 bg-neutral-50 hover:bg-neutral-100 rounded-xl transition-all active:scale-90 border border-neutral-100",title:"Settings",children:s.jsx("img",{src:"https://raw.githubusercontent.com/Tarikul-Islam-Anik/Animated-Fluent-Emojis/master/Emojis/Objects/Gear.png",alt:"Settings",className:"w-6 h-6 object-contain"})}),s.jsx("button",{onClick:()=>o("PLANNING"),className:"p-2 bg-neutral-50 hover:bg-neutral-100 rounded-xl transition-all active:scale-90 border border-neutral-100",title:"Study Plan",children:s.jsx("img",{src:"https://raw.githubusercontent.com/Tarikul-Islam-Anik/Animated-Fluent-Emojis/master/Emojis/Objects/Spiral%20Calendar.png",alt:"Planning",className:"w-6 h-6 object-contain"})}),s.jsx("button",{onClick:()=>o("DISCOVER"),className:"p-2 bg-neutral-50 hover:bg-neutral-100 rounded-xl transition-all active:scale-90 border border-neutral-100",title:"Games & Discover",children:s.jsx("img",{src:"https://raw.githubusercontent.com/Tarikul-Islam-Anik/Animated-Fluent-Emojis/master/Emojis/Activities/Video%20Game.png",alt:"Games",className:"w-6 h-6 object-contain"})}),A==="connected"&&s.jsxs("button",{onClick:()=>T(),className:`p-2 rounded-xl transition-all active:scale-90 border animate-in fade-in relative ${I&&!N?"bg-orange-50 border-orange-200 shadow-[0_0_10px_rgba(249,115,22,0.4)]":"bg-neutral-50 border-neutral-100 hover:bg-neutral-100"}`,title:U,children:[s.jsx("img",{src:"https://raw.githubusercontent.com/Tarikul-Islam-Anik/Animated-Fluent-Emojis/master/Emojis/Symbols/Up%20Arrow.png",alt:"Sync",className:"w-3 h-3 object-contain"}),I&&s.jsx("span",{className:`absolute top-0 right-0 w-2.5 h-2.5 rounded-full border-2 border-white -mt-1 -mr-1 ${N?"bg-green-50":"bg-orange-500 animate-ping"}`}),I&&s.jsx("span",{className:`absolute top-0 right-0 w-2.5 h-2.5 rounded-full border-2 border-white -mt-1 -mr-1 ${N?"bg-green-500":"bg-orange-500"}`})]})]})]}),s.jsxs("nav",{className:"flex-1 overflow-y-auto space-y-1",children:[x&&d!=="REVIEW"&&s.jsx("div",{className:"relative group animate-in fade-in duration-300 mb-1",children:s.jsxs("button",{onClick:()=>{h("REVIEW"),g(!1)},className:"w-full flex items-center justify-between px-4 py-3 rounded-xl font-bold text-sm bg-green-500 text-white shadow-lg shadow-green-500/20",children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx(ub,{size:20}),s.jsx("span",{children:"Study Now"})]}),s.jsxs("div",{className:"relative flex h-3 w-3",children:[s.jsx("span",{className:"animate-ping absolute inline-flex h-full w-full rounded-full bg-white opacity-75"}),s.jsx("span",{className:"relative inline-flex rounded-full h-3 w-3 bg-white"})]})]})}),T2.map(B=>{const L=d===B.view&&(B.id!=="BROWSE"||!y),Y=B.id==="SPEAKING"&&d==="SPEAKING";return s.jsx("div",{className:"relative group",children:s.jsx("button",{onClick:()=>o(B.view),className:`w-full flex items-center justify-between px-4 py-3 rounded-xl font-bold text-sm transition-colors ${L||Y?"bg-neutral-900 text-white shadow-sm":"text-neutral-500 hover:bg-neutral-100"}`,children:s.jsxs("div",{className:"flex items-center space-x-3",children:[typeof B.icon=="string"?s.jsx("img",{src:B.icon,className:`w-5 h-5 object-contain transition-all ${L||Y?"opacity-100":"opacity-70 group-hover:opacity-100"}`,alt:B.label}):s.jsx(B.icon,{size:20}),s.jsx("span",{children:B.label})]})})},B.id)})]})]})}):null},k2=({controller:l})=>{const{view:o,currentUser:u,stats:c,xpToNextLevel:f,wotd:d,setGlobalViewWord:h,setView:x,lastBackupTime:p,handleBackup:g,restoreFromServerAction:y,triggerLocalRestore:S,triggerLocalBackup:A,triggerServerBackup:T,handleNavigateToList:I,startDueReviewSession:N,startNewLearnSession:R,sessionWords:O,sessionType:H,sessionFocus:U,updateWord:B,bulkUpdateWords:L,handleSessionComplete:Y,gainExperienceAndLevelUp:Q,recalculateXpAndLevelUp:V,handleRetrySession:C,deleteWord:X,bulkDeleteWords:F,startSession:K,initialListFilter:ie,setInitialListFilter:ge,forceExpandAdd:oe,setForceExpandAdd:_,handleUpdateUser:W,refreshGlobalStats:J,handleLibraryReset:de,apiUsage:me,xpGained:v,lastMasteryScoreUpdateTimestamp:j,isWotdComposed:z,randomizeWotd:ee,handleComposeWithWord:ue,writingContextWord:ce,consumeWritingContext:fe,serverStatus:D,isAutoRestoreOpen:re,setIsAutoRestoreOpen:P,autoRestoreCandidates:te,handleNewUserSetup:he,handleLocalRestoreSetup:ye,handleSwitchUser:we,planningAction:ot,consumePlanningAction:He}=l;if(!u)return null;switch(o){case"DASHBOARD":return s.jsx(h2,{userId:u.id,user:u,totalCount:c.total,dueCount:c.due,newCount:c.new,xpToNextLevel:f,wotd:d,onViewWotd:h,setView:x,lastBackupTime:p,onBackup:g,onRestore:()=>{},restoreFromServerAction:async()=>await y(),triggerLocalRestore:S,onLocalBackup:A,onServerBackup:T,onNavigateToWordList:I,onStartDueReview:N,onStartNewLearn:R,isWotdComposed:z,onComposeWotd:ue,onRandomizeWotd:ee,serverStatus:D,onAction:Xe=>{(Xe==="PLAN_AI"||Xe==="PLAN_IMPORT")&&l.handleSpecialAction(Xe)}});case"WORDBOOK":return s.jsx(_2,{user:u});case"PLANNING":return s.jsx(A2,{user:u,initialAction:ot,onActionConsumed:He});case"REVIEW":return O&&H?s.jsx(g2,{user:u,sessionWords:O,sessionType:H,sessionFocus:U,onUpdate:B,onBulkUpdate:L,onComplete:Y,onRetry:C}):null;case"BROWSE":return s.jsx(x2,{user:u,onDelete:async Xe=>await X(Xe),onBulkDelete:async Xe=>await F(Xe),onUpdate:B,onStartSession:Xe=>K(Xe,"custom"),initialFilter:ie,onInitialFilterApplied:()=>ge(null),forceExpandAdd:oe,onExpandAddConsumed:()=>_(!1),onNavigate:x});case"LESSON":return s.jsx(E2,{user:u,onStartSession:Xe=>K(Xe,"custom"),onExit:()=>x("DASHBOARD"),onNavigate:x,onUpdateUser:W,initialLessonId:l.targetLessonId,onConsumeLessonId:l.consumeTargetLessonId});case"UNIT_LIBRARY":return s.jsx(y2,{user:u,onStartSession:Xe=>K(Xe,"new_study"),onUpdateUser:W});case"SETTINGS":return s.jsx(b2,{user:u,onUpdateUser:W,onRefresh:J,onNuke:de,apiUsage:me});case"DISCOVER":return s.jsx(v2,{user:u,xpToNextLevel:f,totalWords:c.total,onExit:()=>x("DASHBOARD"),onGainXp:Q,onRecalculateXp:V,xpGained:v,onStartSession:K,onUpdateUser:W,lastMasteryScoreUpdateTimestamp:j,onBulkUpdate:L});case"SPEAKING":return s.jsx($u,{user:u,onNavigate:x});case"NATIVE_SPEAK":return s.jsx($u,{user:u,onNavigate:x});case"WRITING":return s.jsx(S2,{user:u,initialContextWord:ce,onConsumeContext:fe});case"IRREGULAR_VERBS":return s.jsx(w2,{user:u,onGlobalViewWord:h});case"MIMIC":return s.jsx(N2,{});case"LISTENING":return s.jsx(j2,{user:u});case"EXPERIMENT":return s.jsx($u,{user:u,onNavigate:x});default:return s.jsxs("div",{children:["Unknown view: ",o]})}},O2=({controller:l})=>{const{view:o,isSidebarOpen:u,setIsSidebarOpen:c,globalViewWord:f,setGlobalViewWord:d,updateWord:h,gainExperienceAndLevelUp:x,sessionType:p,clearSessionState:g,setView:y,handleLogout:S,setForceExpandAdd:A,openAddWordLibrary:T,currentUser:I,stats:N,startDueReviewSession:R,startNewLearnSession:O,lastBackupTime:H,isAutoRestoreOpen:U,setIsAutoRestoreOpen:B,autoRestoreCandidates:L,restoreFromServerAction:Y,handleNewUserSetup:Q,handleLocalRestoreSetup:V,handleSwitchUser:C,isConnectionModalOpen:X,setIsConnectionModalOpen:F,connectionScanStatus:K,handleScanAndConnect:ie,handleStopScan:ge,syncPrompt:oe,setSyncPrompt:_,isSyncing:W,handleSyncPush:J,handleSyncRestore:de}=l,[me,v]=w.useState(null),[j,z]=w.useState({isOpen:!1,targetView:null,andThen:void 0}),ee=(ye,we)=>{p&&ye!=="REVIEW"?z({isOpen:!0,targetView:ye,andThen:we}):(A(!!we),y(ye),c(!1))},ue=(ye,we)=>{switch(ye){case"REVIEW":R();break;case"BROWSE":O();break;case"LESSON":we&&we.lessonId&&l.setTargetLessonId(we.lessonId),ee("LESSON");break;case"PLAN_AI":l.setPlanningAction("AI"),ee("PLANNING");break;case"PLAN_IMPORT":l.setPlanningAction("IMPORT"),ee("PLANNING");break;default:ee(ye)}},ce=()=>{p?z({isOpen:!0,targetView:null,andThen:S}):S()},fe=()=>{j.targetView?(g(),y(j.targetView),j.andThen?j.andThen():A(!1),c(!1)):j.andThen&&(g(),j.andThen()),z({isOpen:!1,targetView:null,andThen:void 0})},D=()=>{z({isOpen:!1,targetView:null,andThen:void 0})},re=ye=>{d(null),v(ye)},P=ye=>{h(ye),v(null)},[te,he]=w.useState(!1);return s.jsxs("div",{className:"min-h-screen bg-neutral-50 md:flex",children:[s.jsx(C2,{controller:l,onNavigate:ee,onLogoutRequest:ce,onSwitchUser:C}),s.jsx("div",{className:`fixed inset-0 bg-black/30 z-40 md:hidden ${u?"block":"hidden"}`,onClick:()=>c(!1)}),s.jsxs("main",{className:"flex-1 p-6 md:p-10 overflow-y-auto relative",children:[s.jsx("button",{onClick:()=>c(!0),className:"md:hidden fixed top-4 left-4 p-2 bg-white/80 backdrop-blur-sm rounded-full shadow-md z-30",children:s.jsx(kb,{size:24})}),s.jsx(w.Suspense,{fallback:s.jsx("div",{className:"flex justify-center p-20",children:s.jsx(Ct,{className:"animate-spin text-neutral-300",size:32})}),children:s.jsx(k2,{controller:l})})]}),I&&s.jsx(d2,{user:I,stats:N,currentView:o,lastBackupTime:H,onNavigate:ue,onViewWord:d,isAnyModalOpen:!!f||!!me}),f&&s.jsx(r2,{word:f,onClose:()=>d(null),onNavigateToWord:d,onEditRequest:re,onUpdate:h,onGainXp:x}),me&&s.jsx(gv,{user:l.currentUser,word:me,onSave:P,onClose:()=>v(null),onSwitchToView:ye=>{v(null),d(ye)}}),s.jsx(o2,{isOpen:j.isOpen,title:"End Current Session?",message:"Navigating away will end your current study session. Are you sure you want to continue?",confirmText:"End Session",isProcessing:!1,onConfirm:fe,onClose:D,icon:s.jsx(wo,{size:40,className:"text-orange-500"}),confirmButtonClass:"bg-orange-600 text-white hover:bg-orange-700 shadow-orange-200"}),s.jsx(f2,{isOpen:U,onClose:()=>B(!1),backups:L,onRestore:ye=>{he(!0),Y(ye).finally(()=>he(!1))},isRestoring:te,title:"User Selection",description:"We found existing profiles on the server. Select yours to restore.",onNewUser:Q,onLocalRestore:V}),s.jsx(p2,{isOpen:X,onClose:()=>F(!1),onRetry:ie,onStop:ge,status:K,scanningUrl:l.scanningUrl}),oe&&s.jsx(m2,{isOpen:oe.isOpen,onClose:()=>_(null),onPush:J,onRestore:de,type:oe.type,localDate:oe.localDate,serverDate:oe.serverDate,isProcessing:W})]})},I2=()=>s.jsx("div",{className:"fixed inset-0 z-[9999] flex items-center justify-center p-4 bg-neutral-950/90 backdrop-blur-md animate-in fade-in duration-500",children:s.jsxs("div",{className:"bg-white w-full max-w-md rounded-[3rem] shadow-2xl border-2 border-neutral-100 overflow-hidden animate-in zoom-in-95 duration-500",children:[s.jsxs("div",{className:"bg-neutral-900 p-8 text-white text-center space-y-4",children:[s.jsxs("div",{className:"mx-auto w-20 h-20 bg-white/10 rounded-full flex items-center justify-center border-4 border-white/20 mb-2 relative",children:[s.jsx(wb,{size:40,className:"animate-pulse"}),s.jsx("div",{className:"absolute -top-1 -right-1 bg-red-500 rounded-full p-1 border-2 border-neutral-900",children:s.jsx(wn,{size:14})})]}),s.jsx("h3",{className:"text-2xl font-black tracking-tighter uppercase",children:"Connection Lost"})]}),s.jsxs("div",{className:"p-10 text-center space-y-6",children:[s.jsxs("div",{className:"space-y-3",children:[s.jsx("p",{className:"text-lg font-black text-neutral-900 leading-tight",children:"Database link interrupted"}),s.jsxs("p",{className:"text-neutral-500 text-sm leading-relaxed font-medium",children:["The connection to your local storage was closed unexpectedly by the browser.",s.jsx("br",{}),s.jsx("br",{}),"Don't worry, ",s.jsx("strong",{children:"your data is safe"}),". Refreshing the application will restore the connection immediately."]})]}),s.jsxs("button",{onClick:()=>{localStorage.setItem("vocab_pro_auto_restore","true"),window.location.reload()},className:"w-full py-5 bg-neutral-900 text-white rounded-2xl font-black text-sm hover:bg-neutral-800 transition-all shadow-xl shadow-neutral-900/20 active:scale-95 flex items-center justify-center space-x-3",children:[s.jsx(ho,{size:20}),s.jsx("span",{children:"REFRESH APPLICATION"})]})]}),s.jsx("div",{className:"bg-neutral-50 px-8 py-4 flex items-center justify-center space-x-2 border-t border-neutral-100",children:s.jsx("span",{className:"text-[10px] font-black text-neutral-400 uppercase tracking-widest",children:"Safe Persistent Storage"})})]})}),R2=()=>{const l=nv(),{isLoaded:o,isResetting:u,resetStep:c,view:f,currentUser:d,handleLogin:h}=l,[x,p]=w.useState(!1);return w.useEffect(()=>{fh();const g=()=>p(!0);return window.addEventListener("db-connection-lost",g),()=>window.removeEventListener("db-connection-lost",g)},[]),x?s.jsx(I2,{}):o?u?s.jsxs("div",{className:"h-screen w-screen flex flex-col items-center justify-center bg-white space-y-4",children:[s.jsx(Ct,{size:40,className:"text-neutral-900 animate-spin"}),s.jsx("p",{className:"text-sm font-bold text-neutral-500",children:c})]}):f==="AUTH"||!d?s.jsx(x1,{onLogin:h}):s.jsx(O2,{controller:l}):s.jsxs("div",{className:"h-screen w-screen flex flex-col items-center justify-center bg-white space-y-4",children:[s.jsx(Is,{size:40,className:"text-neutral-900"}),s.jsx("p",{className:"text-sm font-bold text-neutral-500",children:"Vocab Pro"})]})},M2=()=>{const[l,o]=w.useState(0),u=w.useCallback(()=>{o(c=>c+1)},[]);return w.useEffect(()=>(window.addEventListener("vocab-pro-force-ui-reload",u),()=>window.removeEventListener("vocab-pro-force-ui-reload",u)),[u]),s.jsx(y1,{children:s.jsx(R2,{},l)})},Bg=document.getElementById("root");if(!Bg)throw new Error("Could not find root element to mount to");const L2=nb.createRoot(Bg);L2.render(s.jsx(Vt.StrictMode,{children:s.jsx(M2,{})}));export{H1 as $,Wm as A,ub as B,Fm as C,Ul as D,Ui as E,jb as F,Ao as G,Sg as H,Gt as I,Ed as J,Ms as K,sh as L,q2 as M,mv as N,Y1 as O,ad as P,tt as Q,Vt as R,oh as S,Yv as T,Za as U,Ra as V,dh as W,kt as X,Qa as Y,No as Z,Ng as _,mb as a,lh as a$,mo as a0,gS as a1,Qb as a2,Ja as a3,xS as a4,Ig as a5,Ob as a6,rh as a7,gh as a8,B2 as a9,iv as aA,Yb as aB,th as aC,uh as aD,fa as aE,fb as aF,ah as aG,zi as aH,nh as aI,bv as aJ,wv as aK,xo as aL,wo as aM,Jt as aN,ho as aO,ih as aP,Pm as aQ,zg as aR,Ug as aS,Db as aT,Sv as aU,_1 as aV,wg as aW,Ub as aX,jm as aY,rd as aZ,vo as a_,H2 as aa,D2 as ab,V2 as ac,G2 as ad,Eo as ae,G1 as af,q1 as ag,Mb as ah,wn as ai,nd as aj,jo as ak,wd as al,Rs as am,Jb as an,Vb as ao,db as ap,o2 as aq,Gb as ar,Nh as as,r1 as at,o1 as au,Bi as av,Y2 as aw,z1 as ax,uv as ay,dv as az,U2 as b,md as b$,bo as b0,cd as b1,rb as b2,So as b3,U1 as b4,eh as b5,ch as b6,Bb as b7,_b as b8,qb as b9,rS as bA,oS as bB,tS as bC,Hi as bD,aS as bE,Nb as bF,Fu as bG,kb as bH,Nv as bI,J2 as bJ,vd as bK,c1 as bL,sS as bM,iS as bN,eS as bO,hS as bP,pS as bQ,mS as bR,Pu as bS,Dg as bT,X2 as bU,Tb as bV,W2 as bW,F2 as bX,dS as bY,fS as bZ,ob as b_,pb as ba,z2 as bb,Mi as bc,Vm as bd,Q2 as be,t1 as bf,Di as bg,a1 as bh,f1 as bi,cS as bj,uS as bk,nS as bl,Z2 as bm,lS as bn,hb as bo,yb as bp,Dt as bq,bd as br,s1 as bs,n1 as bt,qh as bu,l1 as bv,_d as bw,i2 as bx,Sd as by,u1 as bz,pe as c,hd as c0,gd as c1,d1 as c2,lg as c3,K2 as c4,$2 as c5,P2 as c6,_m as c7,Fh as c8,Ph as c9,i1 as ca,yS as cb,gb as d,od as e,Rb as f,Xm as g,bb as h,Is as i,s as j,xt as k,Nd as l,Cg as m,Os as n,Fe as o,yo as p,Ct as q,w as r,Ft as s,$m as t,Ii as u,Fa as v,r2 as w,gv as x,xb as y,Eb as z};
