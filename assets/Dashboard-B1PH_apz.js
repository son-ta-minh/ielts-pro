import{c as S,j as e,r as m,C as be,L as fe,a as J,b as X,d as Q,F as ve,B as je,S as we,R as te,W as Ne,e as ye,G as ke,T as Se,f as D,P as se,M as ae,g as B,A as G,h as Ce,i as Le,k as Te,l as Re,m as Ie,n as Me,o as Ee,p as Pe,q as De,s as ze,t as $e,u as _e,v as We,w as Be}from"./index-BtoOhDNg.js";import{D as Z}from"./download-B1yIpi90.js";import{H as le}from"./headphones-cbUzmcAl.js";import{F as re}from"./file-clock-g9EWeeb7.js";import{K as Ge,B as Ue}from"./keyboard-BYAjHUSP.js";import{S as Oe,a as Ae}from"./split-nzpKrlaG.js";import{L as Ve}from"./list-todo-COYX74nB.js";/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fe=S("ChartColumn",[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ne=S("Dumbbell",[["path",{d:"M14.4 14.4 9.6 9.6",key:"ic80wn"}],["path",{d:"M18.657 21.485a2 2 0 1 1-2.829-2.828l-1.767 1.768a2 2 0 1 1-2.829-2.829l6.364-6.364a2 2 0 1 1 2.829 2.829l-1.768 1.767a2 2 0 1 1 2.828 2.829z",key:"nnl7wr"}],["path",{d:"m21.5 21.5-1.4-1.4",key:"1f1ice"}],["path",{d:"M3.9 3.9 2.5 2.5",key:"1evmna"}],["path",{d:"M6.404 12.768a2 2 0 1 1-2.829-2.829l1.768-1.767a2 2 0 1 1-2.828-2.829l2.828-2.828a2 2 0 1 1 2.829 2.828l1.767-1.768a2 2 0 1 1 2.829 2.829z",key:"yhosts"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const He=S("HardDrive",[["line",{x1:"22",x2:"2",y1:"12",y2:"12",key:"1y58io"}],["path",{d:"M5.45 5.11 2 12v6a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-6l-3.45-6.89A2 2 0 0 0 16.76 4H7.24a2 2 0 0 0-1.79 1.11z",key:"oot6mr"}],["line",{x1:"6",x2:"6.01",y1:"16",y2:"16",key:"sgf278"}],["line",{x1:"10",x2:"10.01",y1:"16",y2:"16",key:"1l4acy"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qe=S("History",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ye=S("LayoutDashboard",[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ke=S("MessagesSquare",[["path",{d:"M14 9a2 2 0 0 1-2 2H6l-4 4V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2z",key:"p1xzt8"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v11l-4-4h-6a2 2 0 0 1-2-2v-1",key:"1cx29u"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Je=S("Percent",[["line",{x1:"19",x2:"5",y1:"5",y2:"19",key:"1x9vlm"}],["circle",{cx:"6.5",cy:"6.5",r:"2.5",key:"4mh3h7"}],["circle",{cx:"17.5",cy:"17.5",r:"2.5",key:"1mdrzq"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xe=S("Puzzle",[["path",{d:"M15.39 4.39a1 1 0 0 0 1.68-.474 2.5 2.5 0 1 1 3.014 3.015 1 1 0 0 0-.474 1.68l1.683 1.682a2.414 2.414 0 0 1 0 3.414L19.61 15.39a1 1 0 0 1-1.68-.474 2.5 2.5 0 1 0-3.014 3.015 1 1 0 0 1 .474 1.68l-1.683 1.682a2.414 2.414 0 0 1-3.414 0L8.61 19.61a1 1 0 0 0-1.68.474 2.5 2.5 0 1 1-3.014-3.015 1 1 0 0 0 .474-1.68l-1.683-1.682a2.414 2.414 0 0 1 0-3.414L4.39 8.61a1 1 0 0 1 1.68.474 2.5 2.5 0 1 0 3.014-3.015 1 1 0 0 1-.474-1.68l1.683-1.682a2.414 2.414 0 0 1 3.414 0z",key:"w46dr5"}]]),ee=({value:t,max:s,label:l})=>{const o=s>0?t/s*100:0;return e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex justify-between items-center mb-1",children:[e.jsx("span",{className:"text-[10px] font-black text-neutral-400 uppercase tracking-widest",children:l}),e.jsxs("span",{className:"text-xs font-bold text-neutral-500",children:[t," / ",s]})]}),e.jsx("div",{className:"h-1.5 w-full bg-neutral-100 rounded-full overflow-hidden border border-neutral-200/50",children:e.jsx("div",{className:"h-full bg-green-500 rounded-full transition-all duration-1000",style:{width:`${o}%`}})})]})},Qe=t=>{const s=t??0;return s>=80?"bg-green-100 text-green-700":s>=50?"bg-yellow-100 text-yellow-700":s>0?"bg-orange-100 text-orange-700":"bg-neutral-100 text-neutral-500"},Ze=({learnedToday:t,reviewedToday:s,maxLearn:l,maxReview:o,learnedWords:n,reviewedWords:i,onViewWord:r})=>{const x=[...n,...i].sort((c,h)=>(h.lastReview||0)-(c.lastReview||0));return e.jsxs("section",{className:"bg-white p-5 rounded-3xl border border-neutral-200 shadow-sm flex flex-col h-full",children:[e.jsxs("div",{className:"flex justify-between items-start mb-4",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx("h3",{className:"text-sm font-black text-neutral-900 uppercase tracking-widest flex items-center gap-2",children:"Daily Progress"}),e.jsx("p",{className:"text-[10px] text-neutral-400 font-medium",children:"Activity for today."})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-xl font-black text-blue-600 leading-none",children:t}),e.jsx("p",{className:"text-[8px] font-bold text-blue-500 uppercase tracking-wider",children:"New"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-xl font-black text-orange-600 leading-none",children:s}),e.jsx("p",{className:"text-[8px] font-bold text-orange-500 uppercase tracking-wider",children:"Rev"})]})]})]}),e.jsxs("div",{className:"space-y-3 flex-1",children:[e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx(ee,{value:t,max:l,label:"Learn Goal"}),e.jsx(ee,{value:s,max:o,label:"Review Goal"})]}),x.length>0?e.jsxs("div",{className:"pt-2 border-t border-neutral-100 flex-1 min-h-0 flex flex-col",children:[e.jsxs("h4",{className:"text-[9px] font-black uppercase tracking-widest text-neutral-400 mb-2",children:["Recent Activity (",x.length,")"]}),e.jsx("div",{className:"flex-1 overflow-y-auto space-y-1 pr-1 custom-scrollbar max-h-32",children:x.map(c=>e.jsxs("button",{onClick:()=>r(c),className:"w-full flex items-center gap-2 text-left p-1.5 rounded-lg hover:bg-neutral-50 group",children:[e.jsx("div",{className:`w-1.5 h-1.5 rounded-full shrink-0 ${n.some(h=>h.id===c.id)?"bg-blue-500":"bg-orange-500"}`}),e.jsx("span",{className:"text-xs font-bold text-neutral-700 flex-1 truncate group-hover:text-neutral-900",children:c.word}),e.jsx("span",{className:`text-[9px] font-black px-1 py-0.5 rounded ${Qe(c.masteryScore)}`,children:c.masteryScore??0})]},c.id))})]}):e.jsx("div",{className:"flex-1 flex items-center justify-center text-[10px] text-neutral-300 italic pt-4",children:"No activity recorded today."})]})]})},et=()=>{const t="2026-02-20T12:35:00.683Z";try{const s=new Date(t),l=s.getFullYear(),o=(s.getMonth()+1).toString().padStart(2,"0"),n=s.getDate().toString().padStart(2,"0"),i=s.getHours().toString().padStart(2,"0"),r=s.getMinutes().toString().padStart(2,"0");return`v${l}${o}${n}_${i}${r}`}catch{return"v_error"}},ie=({percent:t,size:s=20,stroke:l=2.5})=>{const o=(s-l)/2,n=2*Math.PI*o,i=n-t/100*n;let r="text-neutral-300";return t>=80?r="text-green-500":t>=40?r="text-yellow-500":t>0&&(r="text-orange-500"),e.jsx("div",{className:"relative flex items-center justify-center",style:{width:s,height:s},children:e.jsxs("svg",{className:"transform -rotate-90",width:s,height:s,children:[e.jsx("circle",{className:"text-neutral-100 group-hover:text-neutral-800 transition-colors",stroke:"currentColor",strokeWidth:l,fill:"transparent",r:o,cx:s/2,cy:s/2}),e.jsx("circle",{className:`${r} transition-all duration-500 ease-out`,stroke:"currentColor",strokeWidth:l,strokeLinecap:"round",fill:"transparent",r:o,cx:s/2,cy:s/2,style:{strokeDasharray:n,strokeDashoffset:i}})]})})},u=({label:t,subLabel:s,progress:l,icon:o,color:n,bg:i,onClick:r,disabled:x,largeSub:c})=>e.jsxs("button",{onClick:r,disabled:x,className:"flex items-start gap-3 p-3 rounded-2xl border border-neutral-100 bg-white hover:bg-neutral-900 hover:border-neutral-900 hover:shadow-lg transition-all active:scale-95 w-full text-left group disabled:opacity-60 disabled:cursor-not-allowed disabled:hover:bg-white disabled:hover:border-neutral-100 disabled:hover:shadow-none",children:[e.jsx("div",{className:`p-2 rounded-xl ${i} ${n} group-hover:scale-110 transition-transform shrink-0 mt-0.5`,children:e.jsx(o,{size:18})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("div",{className:`text-xs font-black text-neutral-900 ${x?"":"group-hover:text-white"} transition-colors tracking-tight leading-tight`,children:t}),s&&e.jsx("div",{className:`font-medium text-neutral-400 ${x?"":"group-hover:text-neutral-300"} transition-colors mt-0.5 leading-snug ${c?"text-[10px]":"text-[10px] truncate"}`,children:s})]}),typeof l=="number"&&e.jsx("div",{className:"shrink-0 ml-1",children:e.jsx(ie,{percent:l})})]}),tt=({stats:t})=>{const s=(i,r)=>r>0?Math.round(i/r*100):0,l=t?t.speaking.freeTalk.completed+t.speaking.native.completed+t.speaking.conversation.completed:0,o=t?t.speaking.freeTalk.total+t.speaking.native.total+t.speaking.conversation.total:0,n=({label:i,completed:r,total:x,icon:c,colorClass:h})=>e.jsxs("div",{className:"flex items-center justify-between p-2 rounded-xl bg-neutral-50/50 hover:bg-neutral-50 transition-colors border border-transparent hover:border-neutral-100",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:`p-1.5 rounded-lg ${h} bg-white shadow-sm`,children:e.jsx(c,{size:12})}),e.jsx("span",{className:"text-[10px] font-bold text-neutral-700",children:i})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("span",{className:"text-[9px] font-medium text-neutral-400",children:[r,"/",x]}),e.jsx(ie,{percent:s(r,x),size:18})]})]});return e.jsxs("div",{className:"bg-white p-5 rounded-3xl border border-neutral-200 shadow-sm flex flex-col gap-4 h-full justify-center",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("div",{className:"p-1.5 bg-neutral-900 text-white rounded-lg",children:e.jsx(Je,{size:14})}),e.jsx("h3",{className:"text-sm font-black text-neutral-900 uppercase tracking-widest",children:"Mastery Status"})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-3",children:[e.jsx(n,{label:"Reading",completed:(t==null?void 0:t.reading.completed)||0,total:(t==null?void 0:t.reading.total)||0,icon:D,colorClass:"text-indigo-600"}),e.jsx(n,{label:"Listening",completed:(t==null?void 0:t.listening.completed)||0,total:(t==null?void 0:t.listening.total)||0,icon:le,colorClass:"text-sky-600"}),e.jsx(n,{label:"Writing",completed:(t==null?void 0:t.writing.completed)||0,total:(t==null?void 0:t.writing.total)||0,icon:se,colorClass:"text-pink-600"}),e.jsx(n,{label:"Speaking",completed:l,total:o,icon:ae,colorClass:"text-rose-600"}),e.jsx(n,{label:"Grammar",completed:(t==null?void 0:t.lessons.grammar.completed)||0,total:(t==null?void 0:t.lessons.grammar.total)||0,icon:B,colorClass:"text-purple-600"}),e.jsx(n,{label:"Verbs",completed:(t==null?void 0:t.lessons.irregular.completed)||0,total:(t==null?void 0:t.lessons.irregular.total)||0,icon:re,colorClass:"text-orange-600"}),e.jsx(n,{label:"Pronunciation",completed:(t==null?void 0:t.speaking.pronunciation.completed)||0,total:(t==null?void 0:t.speaking.pronunciation.total)||0,icon:G,colorClass:"text-emerald-600"}),e.jsx(n,{label:"Lessons",completed:(t==null?void 0:t.lessons.general.completed)||0,total:(t==null?void 0:t.lessons.general.total)||0,icon:D,colorClass:"text-blue-600"})]})]})},st=({stats:t,totalCount:s,newCount:l,studyingCount:o,masteredCount:n,rawCount:i,refinedCount:r,onStartNew:x,onStartDue:c,onRefineRaw:h,onVerifyRefined:d})=>{const j=s>0?l/s*100:0,f=s>0?o/s*100:0,b=s>0?n/s*100:0;return e.jsxs("div",{className:"bg-white p-5 rounded-3xl border border-neutral-200 shadow-sm flex flex-col gap-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-indigo-50 rounded-xl text-indigo-600 shadow-md",children:e.jsx(je,{size:18})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-base font-black text-neutral-900 tracking-tight",children:"Vocabulary Center"}),e.jsx("p",{className:"text-[10px] font-medium text-neutral-400",children:"Manage and expand your lexical resource."})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"lg:col-span-2 flex flex-col justify-center gap-4 p-4 bg-neutral-50 rounded-2xl border border-neutral-100",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-xs font-black text-neutral-500 uppercase tracking-wider",children:"Distribution"}),e.jsxs("span",{className:"text-xs font-bold text-neutral-400",children:[s," Total Words"]})]}),e.jsxs("div",{className:"h-4 bg-white rounded-full flex overflow-hidden border border-neutral-200 shadow-inner",children:[e.jsx("div",{className:"h-full bg-purple-500",style:{width:`${b}%`}}),e.jsx("div",{className:"h-full bg-cyan-500",style:{width:`${f}%`}}),e.jsx("div",{className:"h-full bg-neutral-300",style:{width:`${j}%`}})]}),e.jsxs("div",{className:"flex items-center justify-between gap-2 mt-1",children:[e.jsxs("div",{className:"flex items-center gap-1.5",children:[e.jsx("div",{className:"w-2 h-2 rounded-full bg-purple-500"}),e.jsxs("span",{className:"text-[10px] font-bold text-neutral-600",children:["Mastered (",n,")"]})]}),e.jsxs("div",{className:"flex items-center gap-1.5",children:[e.jsx("div",{className:"w-2 h-2 rounded-full bg-cyan-500"}),e.jsxs("span",{className:"text-[10px] font-bold text-neutral-600",children:["Learning (",o,")"]})]}),e.jsxs("div",{className:"flex items-center gap-1.5",children:[e.jsx("div",{className:"w-2 h-2 rounded-full bg-neutral-300"}),e.jsxs("span",{className:"text-[10px] font-bold text-neutral-600",children:["New (",l,")"]})]})]})]}),e.jsxs("div",{className:"lg:col-span-2 grid grid-cols-2 gap-3",children:[e.jsx(u,{label:"Learn New",subLabel:`${t?t.vocab.new:"-"} words ready`,icon:we,color:"text-indigo-600",bg:"bg-indigo-50",onClick:x,disabled:!t||t.vocab.new===0}),e.jsx(u,{label:"Review",subLabel:`${t?t.vocab.due:"-"} words due`,icon:te,color:"text-amber-600",bg:"bg-amber-50",onClick:c,disabled:!t||t.vocab.due===0}),e.jsx(u,{label:"Refine",subLabel:`${i} raw words`,icon:Ne,color:"text-purple-600",bg:"bg-purple-50",onClick:h,disabled:i===0}),e.jsx(u,{label:"Verify",subLabel:`${r} pending`,icon:ye,color:"text-emerald-600",bg:"bg-emerald-50",onClick:d,disabled:r===0})]})]})]})},at=({isLoading:t,onAction:s})=>e.jsxs("div",{className:"bg-white p-5 rounded-3xl border border-neutral-200 shadow-sm flex flex-col gap-4 relative overflow-hidden",children:[t&&e.jsx("div",{className:"absolute top-4 right-4 animate-spin text-neutral-300",children:e.jsx(te,{size:16})}),e.jsx("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-neutral-900 rounded-xl text-white shadow-md",children:e.jsx(ke,{size:18})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-base font-black text-neutral-900 tracking-tight",children:"Study Center"}),e.jsx("p",{className:"text-[10px] font-medium text-neutral-400",children:"Track your mastery across all skills."})]})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"flex flex-col gap-2 md:col-span-2 lg:col-span-2",children:[e.jsxs("div",{className:"flex items-center gap-2 text-neutral-400 px-1",children:[e.jsx(Se,{size:12}),e.jsx("span",{className:"font-black uppercase tracking-widest text-[10px]",children:"Skills"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsx(u,{largeSub:!0,label:"Reading",subLabel:"Master comprehension with interactive texts.",icon:D,color:"text-indigo-600",bg:"bg-indigo-50",onClick:()=>s("UNIT_LIBRARY")}),e.jsx(u,{largeSub:!0,label:"Listening",subLabel:"Train your ear with diverse audio clips.",icon:le,color:"text-sky-600",bg:"bg-sky-50",onClick:()=>s("LISTENING")}),e.jsx(u,{largeSub:!0,label:"Writing",subLabel:"Practice Task 1 & 2 with AI feedback.",icon:se,color:"text-pink-600",bg:"bg-pink-50",onClick:()=>s("WRITING")}),e.jsx(u,{largeSub:!0,label:"Speaking",subLabel:"Simulate real IELTS speaking tests.",icon:ae,color:"text-rose-600",bg:"bg-rose-50",onClick:()=>s("SPEAKING")})]})]}),e.jsxs("div",{className:"flex flex-col gap-2 md:col-span-2 lg:col-span-2",children:[e.jsxs("div",{className:"flex items-center gap-2 text-neutral-400 px-1",children:[e.jsx(B,{size:12}),e.jsx("span",{className:"font-black uppercase tracking-widest text-[10px]",children:"Domains"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsx(u,{largeSub:!0,label:"Grammar",subLabel:"Deep dive into essential grammar rules.",icon:B,color:"text-purple-600",bg:"bg-purple-50",onClick:()=>s("LESSON_GRAMMAR")}),e.jsx(u,{largeSub:!0,label:"Irregular Verb",subLabel:"Master tricky verb forms and usage.",icon:re,color:"text-orange-600",bg:"bg-orange-50",onClick:()=>s("IRREGULAR_VERBS")}),e.jsx(u,{largeSub:!0,label:"Pronunciation",subLabel:"Perfect your accent and intonation.",icon:G,color:"text-emerald-600",bg:"bg-emerald-50",onClick:()=>s("MIMIC")}),e.jsx(u,{largeSub:!0,label:"Lesson",subLabel:"Structured lessons for holistic learning.",icon:D,color:"text-blue-600",bg:"bg-blue-50",onClick:()=>s("LESSON")})]})]})]})]}),lt=({onAction:t})=>e.jsxs("div",{className:"bg-white p-5 rounded-3xl border border-neutral-200 shadow-sm flex flex-col gap-3",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-fuchsia-50 rounded-xl text-fuchsia-600 shadow-md",children:e.jsx(ne,{size:18})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-base font-black text-neutral-900 tracking-tight",children:"Practice Arcade"}),e.jsx("p",{className:"text-[10px] font-medium text-neutral-400",children:"Targeted drills to refine specific lexical skills."})]})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-2",children:[e.jsx(u,{label:"Listening & Spelling",subLabel:"Dictation drills to sharpen auditory accuracy.",largeSub:!0,icon:Ge,color:"text-cyan-600",bg:"bg-cyan-50",onClick:()=>t("DICTATION")}),e.jsx(u,{label:"Grammar & Syntax",subLabel:"Unscramble sentences to master word order.",largeSub:!0,icon:Ce,color:"text-emerald-600",bg:"bg-emerald-50",onClick:()=>t("SENTENCE_SCRAMBLE")}),e.jsx(u,{label:"Phonetic Accuracy",subLabel:"Refine pronunciation with minimal pairs and IPA.",largeSub:!0,icon:G,color:"text-rose-600",bg:"bg-rose-50",onClick:()=>t("IPA_SORTER")}),e.jsx(u,{label:"Dependent Prepositions",subLabel:"Master verb, noun, and adjective preposition pairings.",largeSub:!0,icon:Le,color:"text-violet-600",bg:"bg-violet-50",onClick:()=>t("PREPOSITION_POWER")}),e.jsx(u,{label:"Contextual Usage",subLabel:"Match synonyms and idioms to correct contexts.",largeSub:!0,icon:Xe,color:"text-sky-600",bg:"bg-sky-50",onClick:()=>t("PARAPHRASE_CONTEXT")}),e.jsx(u,{label:"Rapid Recall",subLabel:"Speed test: Connect terms with definitions.",largeSub:!0,icon:Ue,color:"text-fuchsia-600",bg:"bg-fuchsia-50",onClick:()=>t("WORD_SCATTER")}),e.jsx(u,{label:"Natural Expression",subLabel:"Master native phrases and idioms in context.",largeSub:!0,icon:Ke,color:"text-amber-600",bg:"bg-amber-50",onClick:()=>t("NATURAL_EXPRESSION")}),e.jsx(u,{label:"Intensity Scale",subLabel:"Link nuanced words by their scale of intensity.",largeSub:!0,icon:Oe,color:"text-orange-600",bg:"bg-orange-50",onClick:()=>t("INTENSITY_SCALE")}),e.jsx(u,{label:"Word Contrast",subLabel:"Contrast and identify confusing word pairs.",largeSub:!0,icon:Ae,color:"text-indigo-600",bg:"bg-indigo-50",onClick:()=>t("COMPARISON_LAB")})]})]}),rt=({goalStats:t,onAction:s})=>{const l=t.totalTasks>0?Math.round(t.completedTasks/t.totalTasks*100):0;return e.jsxs("div",{className:"bg-white p-5 rounded-3xl border border-neutral-200 shadow-sm flex flex-col justify-center h-full",children:[e.jsxs("div",{className:"flex justify-between items-start mb-2",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx("h3",{className:"text-[10px] font-black text-neutral-400 uppercase tracking-widest",children:"Active Plan"}),e.jsxs("p",{className:"text-xl font-black text-neutral-900 leading-none",children:[t.completedTasks," / ",t.totalTasks," ",e.jsx("span",{className:"text-xs text-neutral-400 font-bold",children:"Tasks"})]})]}),e.jsx("button",{onClick:()=>s("PLANNING"),className:"p-2 text-neutral-300 hover:text-neutral-900 hover:bg-neutral-50 rounded-lg transition-colors -mr-2 -mt-2",children:e.jsx(Ve,{size:18})})]}),e.jsx("div",{className:"w-full h-3 bg-neutral-100 rounded-full overflow-hidden mb-2",children:e.jsx("div",{className:`h-full transition-all duration-1000 ${l===100?"bg-green-500":"bg-indigo-500"}`,style:{width:`${l}%`}})}),e.jsxs("p",{className:"text-[10px] font-bold text-neutral-400 text-right",children:[l,"% Completed"]})]})},nt=({lastBackupTime:t,onBackup:s,onRestore:l,serverStatus:o})=>{const[n,i]=m.useState(""),[r,x]=m.useState(!1),c=m.useRef(null),[h,d]=m.useState(!1),j=m.useRef(null);return m.useEffect(()=>{const f=()=>{if(!t){i("Last backup: Never");return}const N=Date.now()-t,C=Math.floor(N/(1e3*60*60*24)),L=Math.floor(N/(1e3*60*60)%24),w=Math.floor(N/(1e3*60)%60);C>0?i(`Last backup: ${C}d ago`):L>0?i(`Last backup: ${L}h ago`):w>0?i(`Last backup: ${w}m ago`):i("Last backup: < 1m ago")};f();const b=setInterval(f,60*1e3);return()=>clearTimeout(b)},[t]),m.useEffect(()=>{const f=b=>{c.current&&!c.current.contains(b.target)&&x(!1),j.current&&!j.current.contains(b.target)&&d(!1)};return document.addEventListener("mousedown",f),()=>document.removeEventListener("mousedown",f)},[]),e.jsxs("div",{className:"flex shrink-0 items-center justify-between space-x-3 px-3 py-2 rounded-2xl border-2 shadow-sm bg-white border-neutral-200 text-neutral-800",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(qe,{size:14}),e.jsx("span",{className:"font-medium text-xs whitespace-nowrap",children:n})]}),e.jsxs("div",{className:"flex items-center space-x-2 pl-2",children:[o==="connected"?e.jsxs("div",{className:"relative",ref:c,children:[e.jsxs("button",{onClick:()=>x(!r),className:`px-4 py-2 bg-indigo-50 text-indigo-700 rounded-xl font-black text-[10px] flex items-center gap-2 transition-all active:scale-95 border border-indigo-100 shadow-sm uppercase tracking-widest ${r?"bg-indigo-100":"hover:bg-indigo-100"}`,children:[e.jsx(J,{size:14}),e.jsx("span",{children:"Backup"}),e.jsx(X,{size:12,className:`transition-transform ${r?"rotate-180":""}`})]}),r&&e.jsxs("div",{className:"absolute right-0 top-full mt-2 w-36 bg-white rounded-xl shadow-xl border border-neutral-100 z-50 overflow-hidden animate-in fade-in zoom-in-95",children:[e.jsxs("button",{onClick:()=>{s("server"),x(!1)},className:"w-full flex items-center gap-2 px-4 py-3 text-xs font-bold text-neutral-700 hover:bg-neutral-50 transition-colors text-left",children:[e.jsx(Q,{size:14,className:"text-sky-500"})," To Server"]}),e.jsx("div",{className:"h-px bg-neutral-100 mx-2"}),e.jsxs("button",{onClick:()=>{s("file"),x(!1)},className:"w-full flex items-center gap-2 px-4 py-3 text-xs font-bold text-neutral-700 hover:bg-neutral-50 transition-colors text-left",children:[e.jsx(He,{size:14,className:"text-indigo-500"})," To File"]})]})]}):e.jsxs("button",{onClick:()=>s("file"),className:"px-4 py-2 bg-indigo-50 text-indigo-700 rounded-xl font-black text-[10px] flex items-center gap-2 hover:bg-indigo-100 transition-all active:scale-95 border border-indigo-100 shadow-sm uppercase tracking-widest",children:[e.jsx(J,{size:14}),e.jsx("span",{children:"Backup"})]}),o==="connected"?e.jsxs("div",{className:"relative",ref:j,children:[e.jsxs("button",{onClick:()=>d(!h),className:`px-4 py-2 bg-emerald-50 text-emerald-700 rounded-xl font-black text-[10px] flex items-center gap-2 transition-all active:scale-95 border border-emerald-100 shadow-sm uppercase tracking-widest ${h?"bg-emerald-100":"hover:bg-emerald-100"}`,children:[e.jsx(Z,{size:14}),e.jsx("span",{children:"Restore"}),e.jsx(X,{size:12,className:`transition-transform ${h?"rotate-180":""}`})]}),h&&e.jsxs("div",{className:"absolute right-0 top-full mt-2 w-36 bg-white rounded-xl shadow-xl border border-neutral-100 z-50 overflow-hidden animate-in fade-in zoom-in-95",children:[e.jsxs("button",{onClick:()=>{l("server"),d(!1)},className:"w-full flex items-center gap-2 px-4 py-3 text-xs font-bold text-neutral-700 hover:bg-neutral-50 transition-colors text-left",children:[e.jsx(Q,{size:14,className:"text-sky-500"})," From Server"]}),e.jsx("div",{className:"h-px bg-neutral-100 mx-2"}),e.jsxs("button",{onClick:()=>{l("file"),d(!1)},className:"w-full flex items-center gap-2 px-4 py-3 text-xs font-bold text-neutral-700 hover:bg-neutral-50 transition-colors text-left",children:[e.jsx(ve,{size:14,className:"text-amber-500"})," From File"]})]})]}):e.jsxs("button",{onClick:()=>l("file"),className:"px-4 py-2 bg-emerald-50 text-emerald-700 rounded-xl font-black text-[10px] flex items-center gap-2 hover:bg-emerald-100 transition-all active:scale-95 border border-emerald-100 shadow-sm uppercase tracking-widest",children:[e.jsx(Z,{size:14}),e.jsx("span",{children:"Restore"})]})]})]})},it=({onNavigate:t,totalCount:s,newCount:l,rawCount:o,refinedCount:n,reviewStats:i,lastBackupTime:r,onBackup:x,onRestore:c,serverStatus:h,onAction:d,onStartNewLearn:j,onStartDueReview:f,dayProgress:b,dailyGoals:N,onNavigateToWordList:C,goalStats:L,studyStats:w,isStatsLoading:z})=>{const $=m.useMemo(()=>et(),[]),[v,T]=m.useState(()=>{const y=sessionStorage.getItem("dashboard_active_tab");return y==="STUDY"||y==="PRACTICE"||y==="INSIGHT"?y:"STUDY"});return m.useEffect(()=>{sessionStorage.setItem("dashboard_active_tab",v)},[v]),e.jsxs("div",{className:"space-y-4 animate-in fade-in duration-500",children:[e.jsxs("header",{className:"flex flex-col sm:flex-row justify-between sm:items-start gap-4 mb-4",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-baseline gap-2",children:[e.jsx("h2",{className:"text-3xl font-black text-neutral-900 tracking-tight",children:"IELTS Vocab Pro"}),e.jsx("span",{className:"text-[10px] font-bold text-neutral-400 font-mono tracking-tighter bg-neutral-100 px-1.5 py-0.5 rounded-md border border-neutral-200",children:$})]}),e.jsx("div",{className:"flex items-center gap-3 mt-2",children:h==="connected"?e.jsxs("div",{className:"px-3 py-1.5 rounded-full border flex items-center gap-2 bg-emerald-50 border-emerald-200 text-emerald-700",children:[e.jsx("div",{className:"w-2 h-2 rounded-full bg-emerald-500"}),e.jsx("span",{className:"text-[10px] font-black uppercase tracking-widest",children:"Cloud Connected"})]}):e.jsxs("div",{className:"flex items-center gap-2 px-1.5 py-1.5 rounded-full border bg-red-50 border-red-200 text-red-700 shadow-sm pr-1.5",children:[e.jsxs("div",{className:"flex items-center gap-2 px-2",children:[e.jsx("div",{className:"w-2 h-2 rounded-full bg-red-500 animate-pulse"}),e.jsx("span",{className:"text-[10px] font-black uppercase tracking-widest",children:"Offline Mode"}),e.jsxs("div",{className:"relative group/tooltip",children:[e.jsx(be,{size:12,className:"cursor-help opacity-70 hover:opacity-100"}),e.jsxs("div",{className:"absolute left-0 top-full mt-2 w-56 p-3 bg-neutral-900 text-white text-[10px] leading-relaxed font-medium rounded-xl opacity-0 group-hover/tooltip:opacity-100 transition-opacity pointer-events-none z-50 shadow-xl border border-neutral-700",children:["Disconnected from Vocab Server. Server backup and high-quality voices are unavailable.",e.jsx("div",{className:"absolute -top-1 left-3 w-2 h-2 bg-neutral-900 rotate-45 border-l border-t border-neutral-700"})]})]})]}),e.jsx("div",{className:"w-px h-3 bg-red-200"}),e.jsxs("button",{onClick:()=>{sessionStorage.setItem("vocab_pro_settings_tab","SERVER"),t("SETTINGS")},className:"flex items-center gap-1 px-3 py-1 bg-blue-600 border border-blue-700 rounded-full shadow-sm hover:bg-blue-700 transition-all group/btn",children:[e.jsx(fe,{size:10,className:"text-white"}),e.jsx("span",{className:"text-[10px] font-black uppercase tracking-widest text-white",children:"Connect"})]})]})})]}),e.jsx("div",{className:"flex flex-col items-end gap-2",children:e.jsx(nt,{lastBackupTime:r,onBackup:x,onRestore:c,serverStatus:h})})]}),e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{className:"inline-flex p-1 bg-white border-2 border-neutral-100 rounded-2xl w-fit shadow-sm self-start",children:[e.jsxs("button",{onClick:()=>T("STUDY"),className:`w-28 py-2.5 rounded-xl text-xs font-black uppercase tracking-wider flex items-center justify-center gap-2 transition-all duration-300 ${v==="STUDY"?"bg-neutral-900 text-white shadow-lg transform scale-[1.02]":"text-neutral-500 hover:text-neutral-900 hover:bg-neutral-50"}`,children:[e.jsx(Ye,{size:16})," Study"]}),e.jsxs("button",{onClick:()=>T("PRACTICE"),className:`w-28 py-2.5 rounded-xl text-xs font-black uppercase tracking-wider flex items-center justify-center gap-2 transition-all duration-300 ${v==="PRACTICE"?"bg-neutral-900 text-white shadow-lg transform scale-[1.02]":"text-neutral-500 hover:text-neutral-900 hover:bg-neutral-50"}`,children:[e.jsx(ne,{size:16})," Practice"]}),e.jsxs("button",{onClick:()=>T("INSIGHT"),className:`w-28 py-2.5 rounded-xl text-xs font-black uppercase tracking-wider flex items-center justify-center gap-2 transition-all duration-300 ${v==="INSIGHT"?"bg-neutral-900 text-white shadow-lg transform scale-[1.02]":"text-neutral-500 hover:text-neutral-900 hover:bg-neutral-50"}`,children:[e.jsx(Fe,{size:16})," Insight"]})]})}),v==="STUDY"&&e.jsxs("div",{className:"space-y-4 animate-in fade-in slide-in-from-bottom-2 duration-300",children:[e.jsx(st,{stats:w,totalCount:s,newCount:l,studyingCount:i.learned,masteredCount:i.mastered,rawCount:o,refinedCount:n,onStartNew:j,onStartDue:f,onRefineRaw:()=>C("raw"),onVerifyRefined:()=>C("refined")}),e.jsx(at,{stats:w,isLoading:z,onAction:y=>d(y)})]}),v==="PRACTICE"&&e.jsx("div",{className:"space-y-4 animate-in fade-in slide-in-from-bottom-2 duration-300",children:e.jsx(lt,{onAction:d})}),v==="INSIGHT"&&e.jsxs("div",{className:"space-y-4 animate-in fade-in slide-in-from-bottom-2 duration-300",children:[e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-4",children:[e.jsx("div",{className:"lg:col-span-2",children:e.jsx(tt,{stats:w})}),e.jsx("div",{className:"lg:col-span-1",children:e.jsx(rt,{goalStats:L,onAction:d})})]}),e.jsx("div",{className:"grid grid-cols-1 gap-4",children:e.jsx(Ze,{learnedToday:b.learned,reviewedToday:b.reviewed,maxLearn:N.max_learn_per_day,maxReview:N.max_review_per_day,learnedWords:b.learnedWords,reviewedWords:b.reviewedWords,onViewWord:()=>{}})})]})]})},ht=({userId:t,totalCount:s,user:l,wotd:o,serverStatus:n,restoreFromServerAction:i,triggerLocalRestore:r,onLocalBackup:x,onServerBackup:c,onAction:h,...d})=>{const[j,f]=m.useState(0),[b,N]=m.useState(0),[C,L]=m.useState({learned:0,reviewed:0,learnedWords:[],reviewedWords:[]}),[w,z]=m.useState({learned:0,mastered:0,statusForgot:0,statusHard:0,statusEasy:0,statusLearned:0}),[$,v]=m.useState({totalTasks:0,completedTasks:0}),[T,y]=m.useState(null),[oe,U]=m.useState(!1),ce=Te().dailyGoals,O=async()=>{try{const g=await We(t);let k=0,p=0;g.forEach(R=>{var I,M;k+=((I=R.todos)==null?void 0:I.length)||0,p+=((M=R.todos)==null?void 0:M.filter(P=>P.status==="CLOSED").length)||0}),v({totalTasks:k,completedTasks:p})}catch(g){console.warn("Failed to fetch goal stats",g)}},_=m.useCallback(async()=>{U(!0);try{const[g,k,p,R,I,M,P,A]=await Promise.all([Re(t),Ie(t),Me(t),Ee(t),Pe(t),De(t),ze(t),$e(t)]),V=_e().filter(a=>a.userId===t).filter(a=>!a.isPassive),ge=V.filter(a=>!a.lastReview&&a.quality==="VERIFIED").length,me=V.filter(a=>a.lastReview&&a.nextReview<=Date.now()&&a.quality!=="FAILED").length,F=g.filter(a=>{var E;return(E=a.tags)==null?void 0:E.some(W=>W.toLowerCase().includes("grammar"))}),H=g.filter(a=>a.type==="comparison"),q=g.filter(a=>a.type==="intensity"),Y=g.filter(a=>{var E;return!((E=a.tags)!=null&&E.some(W=>W.toLowerCase().includes("grammar")))}),K=JSON.parse(localStorage.getItem("vocab_pro_mimic_practice_queue")||"[]"),pe=K.length,he=K.filter(a=>(a.lastScore||0)>=80).length;y({vocab:{new:ge,due:me},lessons:{general:{completed:Y.filter(a=>a.focusColor==="green").length,total:Y.length},irregular:{completed:p.filter(a=>a.lastTestResult==="pass").length,total:p.length},grammar:{completed:F.filter(a=>a.focusColor==="green").length,total:F.length},comparison:{completed:H.filter(a=>a.focusColor==="green").length,total:H.length},scale:{completed:q.filter(a=>a.focusColor==="green").length,total:q.length}},reading:{completed:k.filter(a=>a.focusColor==="green").length,total:k.length},speaking:{freeTalk:{completed:M.filter(a=>a.focusColor==="green").length,total:M.length},native:{completed:R.filter(a=>a.focusColor==="green").length,total:R.length},conversation:{completed:I.filter(a=>a.focusColor==="green").length,total:I.length},pronunciation:{completed:he,total:pe}},listening:{completed:P.filter(a=>a.focusColor==="green").length,total:P.length},writing:{completed:A.filter(a=>a.focusColor==="green").length,total:A.length}})}catch(g){console.error("Failed to fetch study stats",g)}finally{U(!1)}},[t]);m.useEffect(()=>{const g=async()=>{const p=Be();p&&(p.dayProgress&&L(p.dayProgress),f(p.dashboardStats.rawCount||0),N(p.dashboardStats.refinedCount||0),p.reviewCounts&&z({learned:p.reviewCounts.learned||0,mastered:p.reviewCounts.mastered||0,statusForgot:p.reviewCounts.statusForgot||0,statusHard:p.reviewCounts.statusHard||0,statusEasy:p.reviewCounts.statusEasy||0,statusLearned:p.reviewCounts.statusLearned||0}))};t&&(g(),O(),_());const k=()=>{g(),O()};return window.addEventListener("datastore-updated",k),()=>{window.removeEventListener("datastore-updated",k)}},[t,s,_]);const de=g=>{g==="server"&&i?i():g==="file"&&r?r():g==="file"&&d.onRestore()},xe=g=>{g==="server"&&c?c():x()},ue={user:l,totalCount:s,dueCount:d.dueCount,newCount:d.newCount,learnedCount:w.learned,rawCount:j,refinedCount:b,reviewStats:w,wotd:o,isWotdComposed:d.isWotdComposed||!1,onRandomizeWotd:d.onRandomizeWotd||(()=>{}),onComposeWotd:()=>{d.onComposeWotd&&o&&d.onComposeWotd(o)},goalStats:$,studyStats:T,isStatsLoading:oe,onRefreshStats:_,onNavigate:d.setView,onNavigateToWordList:d.onNavigateToWordList,onStartDueReview:d.onStartDueReview,onStartNewLearn:d.onStartNewLearn,lastBackupTime:d.lastBackupTime,onBackup:xe,onRestore:de,dayProgress:C,dailyGoals:ce,serverStatus:n,onAction:h||(()=>{})};return e.jsx(e.Fragment,{children:e.jsx(it,{...ue})})};export{ht as default};
