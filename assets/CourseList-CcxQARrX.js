import{c as B,a0 as Ke,r,k as b,aM as v,J as vt,bk as jt,j as e,I as q,H as yt,bI as wt,ak as Te,S as kt,au as Nt,ag as $e,f as ye,aA as Fe,O as Ct,X as je,ax as Mt,aC as Ee,aS as Pe,bB as Je,M as St,G as Tt,aK as zt,ba as $t}from"./index-DtfRLDN6.js";import{g as Ft,a as Et}from"./getGenerateLessonTestPrompt-CmfFHSDH.js";import{C as ze}from"./chevron-left-CW2OtC6F.js";import{M as Pt}from"./minus-D2_8XMm2.js";import{M as Dt}from"./music-8xfenBAJ.js";/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const De=B("ArrowDown",[["path",{d:"M12 5v14",key:"s699le"}],["path",{d:"m19 12-7 7-7-7",key:"1idqje"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Oe=B("ArrowUp",[["path",{d:"m5 12 7-7 7 7",key:"hav0vg"}],["path",{d:"M12 19V5",key:"x0mq9r"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ot=B("Calculator",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",key:"1nb95v"}],["line",{x1:"8",x2:"16",y1:"6",y2:"6",key:"x4nwl0"}],["line",{x1:"16",x2:"16",y1:"14",y2:"18",key:"wjye3r"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M8 18h.01",key:"lrp35t"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const At=B("Code",[["polyline",{points:"16 18 22 12 16 6",key:"z7tu5w"}],["polyline",{points:"8 6 2 12 8 18",key:"1eg1df"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lt=B("FlaskConical",[["path",{d:"M10 2v7.527a2 2 0 0 1-.211.896L4.72 20.55a1 1 0 0 0 .9 1.45h12.76a1 1 0 0 0 .9-1.45l-5.069-10.127A2 2 0 0 1 14 9.527V2",key:"pzvekw"}],["path",{d:"M8.5 2h7",key:"csnxdl"}],["path",{d:"M7 16h10",key:"wp8him"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const It=B("PanelsTopLeft",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M9 21V9",key:"1oto5p"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ut=B("PenTool",[["path",{d:"M15.707 21.293a1 1 0 0 1-1.414 0l-1.586-1.586a1 1 0 0 1 0-1.414l5.586-5.586a1 1 0 0 1 1.414 0l1.586 1.586a1 1 0 0 1 0 1.414z",key:"nt11vn"}],["path",{d:"m18 13-1.375-6.874a1 1 0 0 0-.746-.776L3.235 2.028a1 1 0 0 0-1.207 1.207L5.35 15.879a1 1 0 0 0 .776.746L13 18",key:"15qc1e"}],["path",{d:"m2.3 2.3 7.286 7.286",key:"1wuzzi"}],["circle",{cx:"11",cy:"11",r:"2",key:"xmgehs"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ge=B("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bt=B("Video",[["path",{d:"m16 13 5.223 3.482a.5.5 0 0 0 .777-.416V7.87a.5.5 0 0 0-.752-.432L16 10.5",key:"ftymec"}],["rect",{x:"2",y:"6",width:"14",height:"12",rx:"2",key:"158x01"}]]),be=["#22c55e","#3b82f6","#f59e0b","#ef4444","#8b5cf6","#06b6d4","#f97316"],Ge=u=>u.replace(/\.md$/i,""),ve=u=>/__test\.md$/i.test(u),qe=u=>u.replace(/\.md$/i,"__Test.md"),Rt=u=>{if(!u)return[];const H=u.split(`
`),l=[];let i=null;const A=()=>{i&&((i.content.trim()||i.title!=="Introduction")&&l.push(i),i=null)};return H.forEach(S=>{const W=S.match(/^#\s+(.+)/),T=S.match(/^##\s+(.+)/);W?(i||(i={title:"Introduction",content:""}),i.content+=`${S}
`):T?(A(),i={title:T[1].trim(),content:`${S}
`}):(i||(i={title:"Introduction",content:""}),i.content+=`${S}
`)}),A(),l.length>0?l:[{title:"General",content:u}]},_t=({courseId:u,courseTitle:H})=>{const{showToast:l}=Ke(),[i,A]=r.useState([]),[S,W]=r.useState(null),[T,le]=r.useState("lesson"),[j,$]=r.useState(""),[p,F]=r.useState("home"),[L,E]=r.useState(!0),[Z,R]=r.useState(!1),[g,y]=r.useState(0),[I,K]=r.useState(!1),ae=r.useRef(null),[de,U]=r.useState(!1),[we,P]=r.useState(!1),[ue,xe]=r.useState(null),[D,_]=r.useState(""),X=140,[V,J]=r.useState(""),[he,n]=r.useState(""),[d,f]=r.useState(!1),[x,w]=r.useState(null),[me,ie]=r.useState(""),[pe,ke]=r.useState(be[0]),[ee,te]=r.useState(!1),[se,Ne]=r.useState(null),[Xe,Ae]=r.useState(!1),[oe,Ce]=r.useState(null),[Qe,Le]=r.useState(!1),[ce,Ye]=r.useState(!1),[G,fe]=r.useState(null),[Ze,Me]=r.useState(""),Se=r.useMemo(()=>i.flatMap(t=>t.modules.filter(s=>!ve(s.filename))),[i]),Q=r.useMemo(()=>{var t,s;return((t=i.find(a=>a.isDefault))==null?void 0:t.id)||((s=i[0])==null?void 0:s.id)||""},[i]),N=r.useMemo(()=>Se.find(t=>t.id===S),[Se,S]),z=r.useMemo(()=>Rt(j),[j]),O=z[g],Ie=r.useMemo(()=>{const t=new Map;return z.forEach((s,a)=>{s.content.split(`
`).forEach(o=>{const c=o.trim().match(/^#{1,4}\s+(.+)/);if(!c)return;const h=c[1].trim().toLowerCase();h&&!t.has(h)&&t.set(h,a)})}),t},[z]),C=r.useCallback(async()=>{E(!0);try{const t=b(),s=v(t),a=await fetch(`${s}/api/courses/${u}/sessions`);if(a.ok){const o=await a.json();A(Array.isArray(o)?o:[])}else l("Failed to load course sessions","error")}catch(t){console.error("Failed to load sessions",t),l("Failed to load course sessions","error")}finally{E(!1)}},[u,l]),Ue=r.useCallback(async t=>{E(!0);try{const s=b(),a=v(s),o=await fetch(`${a}/api/courses/${u}/modules/${t}`);if(o.ok){const c=await o.json();$(c.content||""),y(0)}else if(o.status===404)$(""),y(0);else throw new Error(`Failed to load module content: ${o.status}`)}catch(s){console.error("Failed to load module content",s),l("Failed to load module content","error")}finally{E(!1)}},[u,l]);r.useEffect(()=>{C()},[C]),r.useEffect(()=>(window.handleLessonSpeak=(t,s)=>{vt(t,!1,s)},()=>{delete window.handleLessonSpeak}),[]),r.useEffect(()=>{const t=s=>{ae.current&&!ae.current.contains(s.target)&&K(!1)};return document.addEventListener("mousedown",t),()=>document.removeEventListener("mousedown",t)},[]),r.useEffect(()=>(window.resolveMarkdownNav=t=>{if(p!=="module")return!1;const s=Ie.get(t);if(s===void 0)return!1;const a=()=>{const o=Array.from(document.querySelectorAll("h1, h2, h3, h4")),c=o.find(m=>(m.textContent||"").trim().toLowerCase()===t),h=o.find(m=>(m.textContent||"").trim().toLowerCase().includes(t)),k=c||h;k?k.scrollIntoView({behavior:"smooth",block:"start"}):window.scrollTo({top:0,behavior:"smooth"})};return s!==g?(y(s),requestAnimationFrame(()=>requestAnimationFrame(a))):a(),!0},()=>{delete window.resolveMarkdownNav}),[p,Ie,g]);const et=t=>{W(t.id),le("lesson"),fe(null),Me(""),Ue(t.filename),F("module")},Be=t=>{if(!N||t===T)return;const s=t==="lesson"?N.filename:qe(N.filename);le(t),F("module"),Ue(s)};r.useEffect(()=>{T==="lesson"&&Me(j)},[T,j]);const tt=()=>{N&&fe(T==="practice"?"test":"lesson")},st=t=>{if(!N)return"";const s=b(),a=s.audioCoach.activeCoach,o=s.audioCoach.coaches[a].name,c=N.title||Ge(N.filename);return G==="test"?Ft(c,Ze||"",t.request||"",[]):Et({task:j!=null&&j.trim()?"refine_reading":"create_reading",currentLesson:{title:c,description:N.description||"",content:j},topic:t.request||c,userRequest:t.request||"",language:t.language||"English",targetAudience:t.targetAudience||"Adult",tone:t.tone||"professional_professor",coachName:o})},ot=async t=>{const s=(t==null?void 0:t.result)||t,a=typeof(s==null?void 0:s.content)=="string"?s.content:"";if(!a){l("AI response missing content","error");return}$(a),G==="lesson"?(Me(a),l("Lesson content refined!","success")):l("Practice test generated!","success"),fe(null)},nt=async()=>{if(!N)return;const t=T==="lesson"?N.filename:qe(N.filename);R(!0);try{const s=b(),a=v(s);if((await fetch(`${a}/api/courses/${u}/modules/${t}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({content:j})})).ok)l("Module content saved","success"),F("module");else throw new Error("Save failed")}catch(s){console.error("Failed to save content",s),l("Failed to save content","error")}finally{R(!1)}},Re=t=>{_(""),J(""),n(t||Q),U(!0)},rt=async()=>{if(D.trim()){te(!0);try{const t=b(),s=v(t),a=await fetch(`${s}/api/courses/${u}/modules`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({title:D,description:V,sessionId:he||Q})});if(a.ok)l("Module created successfully","success"),U(!1),_(""),J(""),C();else{const o=await a.json();l(o.error||"Failed to create module","error")}}catch(t){console.error(t),l("Failed to create module","error")}finally{te(!1)}}},lt=async()=>{if(!(!ue||!D.trim())){te(!0);try{const t=b(),s=v(t),a=await fetch(`${s}/api/courses/${u}/modules/${ue.filename}/rename`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({newTitle:D,description:V})});if(a.ok)l("Module renamed successfully","success"),P(!1),xe(null),_(""),J(""),C();else{const o=await a.json();l(o.error||"Failed to rename module","error")}}catch(t){console.error(t),l("Failed to rename module","error")}finally{te(!1)}}},at=(t,s)=>{s.stopPropagation(),xe(t),_(Ge(t.filename)),J(t.description||""),P(!0)},it=(t,s)=>{s.stopPropagation(),Ne(t)},ct=async()=>{if(se){Ae(!0);try{const t=b(),s=v(t);(await fetch(`${s}/api/courses/${u}/modules/${se.filename}`,{method:"DELETE"})).ok?(l("Module deleted successfully","success"),Ne(null),C()):l("Failed to delete module","error")}catch(t){console.error(t),l("Failed to delete module","error")}finally{Ae(!1)}}},_e=async(t,s,a,o)=>{o.stopPropagation();const c=i.find(M=>M.id===t);if(!c)return;const h=c.modules.map((M,Y)=>({module:M,originalIndex:Y})).filter(({module:M})=>!ve(M.filename)).map(({originalIndex:M})=>M),k=h.indexOf(s);if(k===-1)return;const m=a==="up"?k-1:k+1;if(m<0||m>=h.length)return;const ne=h[m],re=[...c.modules];[re[s],re[ne]]=[re[ne],re[s]],A(M=>M.map(Y=>Y.id===t?{...Y,modules:re}:Y));try{const M=b(),Y=v(M);(await fetch(`${Y}/api/courses/${u}/sessions/${t}/modules/order`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({orderedFilenames:re.map(bt=>bt.filename)})})).ok||l("Failed to reorder modules","error"),C()}catch(M){console.error(M),l("Failed to reorder modules","error"),C()}},dt=async(t,s,a)=>{if(a.stopPropagation(),!(!Q||t===Q))try{const o=b(),c=v(o),h=await fetch(`${c}/api/courses/${u}/modules/${s.filename}/session`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({targetSessionId:Q})});if(h.ok)l("Module removed from session","success"),C();else{const k=await h.json();l(k.error||"Failed to remove module from session","error")}}catch(o){console.error(o),l("Failed to remove module from session","error")}},ut=async(t,s,a)=>{if(a.stopPropagation(),i.length<2)return;const o=i.findIndex(h=>h.id===t);if(o===-1)return;const c=i[(o+1)%i.length];if(!(!c||c.id===t))try{const h=b(),k=v(h),m=await fetch(`${k}/api/courses/${u}/modules/${s.filename}/session`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({targetSessionId:c.id})});if(m.ok)l(`Moved to ${c.title||"Default Session"}`,"success"),C();else{const ne=await m.json();l(ne.error||"Failed to move module","error")}}catch(h){console.error(h),l("Failed to move module","error")}},xt=()=>{w(null),ie(""),ke(be[0]),f(!0)},ht=(t,s)=>{s.stopPropagation(),w(t),ie(t.title||""),ke(t.borderColor||be[0]),f(!0)},mt=async()=>{te(!0);try{const t=b(),s=v(t),a=x?`${s}/api/courses/${u}/sessions/${x.id}`:`${s}/api/courses/${u}/sessions`,c=await fetch(a,{method:x?"PUT":"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({title:me,borderColor:pe})});if(c.ok)l(x?"Session updated":"Session created","success"),f(!1),w(null),C();else{const h=await c.json();l(h.error||"Failed to save session","error")}}catch(t){console.error(t),l("Failed to save session","error")}finally{te(!1)}},Ve=async(t,s,a)=>{if(a.stopPropagation(),s==="up"&&t===0||s==="down"&&t===i.length-1)return;const o=[...i],c=s==="up"?t-1:t+1;[o[t],o[c]]=[o[c],o[t]],A(o);try{const h=b(),k=v(h);(await fetch(`${k}/api/courses/${u}/sessions/order`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({orderedSessionIds:o.map(ne=>ne.id)})})).ok||(l("Failed to reorder sessions","error"),C())}catch(h){console.error(h),l("Failed to reorder sessions","error"),C()}},pt=(t,s)=>{s.stopPropagation();const a=t.modules.some(o=>!ve(o.filename));t.isDefault||a||Ce(t)},ft=async()=>{if(oe){Le(!0);try{const t=b(),s=v(t),a=await fetch(`${s}/api/courses/${u}/sessions/${oe.id}`,{method:"DELETE"});if(a.ok)l("Session deleted","success"),Ce(null),C();else{const o=await a.json();l(o.error||"Failed to delete session","error")}}catch(t){console.error(t),l("Failed to delete session","error")}finally{Le(!1)}}},gt=r.useMemo(()=>jt((O==null?void 0:O.content)||""),[O]);return L&&p==="home"&&Se.length===0?e.jsx("div",{className:"h-full flex items-center justify-center",children:e.jsx(q,{className:"w-8 h-8 animate-spin text-indigo-600"})}):e.jsxs("div",{className:"h-full flex flex-col bg-neutral-50/30",children:[p!=="home"&&e.jsxs("div",{className:"flex-shrink-0 px-4 sm:px-6 py-3 border-b flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3 bg-white/80 backdrop-blur-md sticky top-0 z-20",children:[e.jsxs("div",{className:"flex items-center gap-3 min-h-8",children:[p!=="home"&&e.jsx("button",{onClick:()=>F("home"),className:"p-2 hover:bg-neutral-100 rounded-full transition-colors text-neutral-500",title:"Back to Courses",children:e.jsx(yt,{size:20})}),(p==="module"||p==="edit")&&N&&e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:()=>Be("lesson"),className:`px-3 py-2 text-xs font-black rounded-xl border-2 uppercase tracking-widest transition-all ${T==="lesson"?"bg-neutral-900 text-white border-neutral-900":"bg-white text-neutral-600 border-neutral-100 hover:bg-neutral-50"}`,children:"Lesson"}),e.jsx("button",{onClick:()=>Be("practice"),className:`px-3 py-2 text-xs font-black rounded-xl border-2 uppercase tracking-widest transition-all ${T==="practice"?"bg-neutral-900 text-white border-neutral-900":"bg-white text-neutral-600 border-neutral-100 hover:bg-neutral-50"}`,children:"Practice"})]})]}),p==="module"&&z.length>1&&e.jsxs("div",{className:"hidden sm:flex absolute left-1/2 -translate-x-1/2 items-center gap-2",children:[e.jsx("button",{onClick:()=>y(Math.max(0,g-1)),disabled:g===0,className:"p-1.5 bg-neutral-100 rounded-lg text-neutral-600 hover:bg-neutral-200 disabled:opacity-30 transition-colors",children:e.jsx(ze,{size:16})}),e.jsxs("div",{className:"relative",ref:ae,children:[e.jsx("button",{onClick:()=>K(!I),className:"flex flex-col items-center hover:bg-neutral-100 rounded-lg px-4 py-1 transition-colors min-w-[140px]",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"font-bold text-xs text-neutral-900 truncate max-w-[120px]",children:O==null?void 0:O.title}),e.jsx(wt,{size:10,className:"text-neutral-400"})]})}),I&&e.jsx("div",{className:"absolute top-full left-1/2 -translate-x-1/2 mt-2 w-64 bg-white rounded-xl shadow-2xl border border-neutral-100 p-1 animate-in fade-in zoom-in-95 origin-top z-50",children:e.jsx("div",{className:"max-h-60 overflow-y-auto custom-scrollbar",children:z.map((t,s)=>e.jsxs("button",{onClick:()=>{y(s),K(!1)},className:`w-full text-left px-3 py-2 rounded-lg text-xs font-bold truncate ${s===g?"bg-indigo-50 text-indigo-700":"text-neutral-600 hover:bg-neutral-50"}`,children:[e.jsx("span",{className:"inline-block w-4 text-neutral-300 font-mono text-[10px]",children:s+1}),t.title]},s))})})]}),e.jsx("button",{onClick:()=>y(Math.min(z.length-1,g+1)),disabled:g===z.length-1,className:"p-1.5 bg-neutral-100 rounded-lg text-neutral-600 hover:bg-neutral-200 disabled:opacity-30 transition-colors",children:e.jsx(Te,{size:16})})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[p==="edit"&&N&&e.jsxs("button",{onClick:tt,className:"flex items-center gap-2 px-4 py-2 text-xs font-black border-2 border-amber-100 bg-amber-50 text-amber-700 rounded-xl hover:bg-amber-100 transition-all active:scale-95 uppercase tracking-widest",children:[e.jsx(kt,{size:14}),"AI Refine"]}),p==="edit"?e.jsxs("button",{onClick:nt,disabled:Z,className:"flex items-center gap-2 px-4 py-2 text-xs font-black bg-indigo-600 text-white rounded-xl hover:bg-indigo-700 disabled:opacity-50 transition-all shadow-lg shadow-indigo-200 active:scale-95 uppercase tracking-widest",children:[Z?e.jsx(q,{size:14,className:"animate-spin"}):e.jsx(Nt,{size:14}),"Save Changes"]}):p==="module"?e.jsxs("button",{onClick:()=>F("edit"),className:"flex items-center gap-2 px-4 py-2 text-xs font-black border-2 border-neutral-100 bg-white text-neutral-600 rounded-xl hover:bg-neutral-50 transition-all active:scale-95 uppercase tracking-widest",children:[e.jsx(ge,{size:14}),"Edit Content"]}):null]}),p==="module"&&z.length>1&&e.jsxs("div",{className:"flex sm:hidden items-center justify-between gap-2 w-full",children:[e.jsxs("button",{onClick:()=>y(Math.max(0,g-1)),disabled:g===0,className:"flex-1 flex items-center justify-center gap-1 p-2 bg-neutral-100 rounded-lg text-neutral-600 disabled:opacity-30",children:[e.jsx(ze,{size:16}),"Prev"]}),e.jsx("div",{className:"text-[11px] font-bold text-neutral-500 truncate text-center flex-1",children:O==null?void 0:O.title}),e.jsxs("button",{onClick:()=>y(Math.min(z.length-1,g+1)),disabled:g===z.length-1,className:"flex-1 flex items-center justify-center gap-1 p-2 bg-neutral-100 rounded-lg text-neutral-600 disabled:opacity-30",children:["Next",e.jsx(Te,{size:16})]})]})]}),e.jsx("div",{className:"flex-grow overflow-hidden relative",children:p==="home"?e.jsx("div",{className:"h-full overflow-y-auto p-6 md:p-8",children:e.jsxs("div",{className:"max-w-5xl mx-auto",children:[e.jsxs("div",{className:"mb-6 text-center relative",children:[e.jsx("h1",{className:"text-3xl font-black text-neutral-900 tracking-tight mb-2",children:H}),e.jsx("p",{className:"text-sm font-medium text-neutral-500",children:"Master your skills with structured sessions and modules."}),e.jsxs("div",{className:"absolute right-0 top-0 flex items-center gap-2",children:[e.jsxs("button",{onClick:()=>Ye(t=>!t),className:`px-4 py-2.5 rounded-xl transition-all shadow-sm border flex items-center gap-2 font-bold text-xs ${ce?"bg-neutral-900 text-white border-neutral-900":"bg-white text-neutral-600 border-neutral-200 hover:text-neutral-900 hover:border-neutral-300"}`,title:ce?"Done Editing":"Edit Sessions",children:[e.jsx(ge,{size:14}),e.jsx("span",{children:ce?"Done":"Edit"})]}),e.jsx("button",{onClick:xt,className:"p-3 bg-white border border-neutral-200 text-neutral-700 rounded-xl shadow-sm hover:bg-neutral-50 transition-all active:scale-95",title:"New Session",children:e.jsx($e,{size:18})}),e.jsx("button",{onClick:()=>Re(Q),className:"p-3 bg-neutral-900 text-white rounded-xl shadow-lg hover:bg-neutral-800 transition-all active:scale-95",title:"Add Module",children:e.jsx(ye,{size:18})})]})]}),L?e.jsx("div",{className:"flex justify-center p-10",children:e.jsx(q,{className:"w-8 h-8 animate-spin text-neutral-300"})}):e.jsx("div",{className:"space-y-4",children:i.map((t,s)=>{const a=t.modules.map((o,c)=>({mod:o,originalIndex:c})).filter(({mod:o})=>!ve(o.filename));return e.jsxs("div",{className:"rounded-2xl bg-white border p-3",style:{borderColor:t.borderColor||"#22c55e"},children:[e.jsxs("div",{className:"flex items-center justify-between gap-3 mb-3",children:[e.jsx("div",{className:"min-h-5 text-sm font-black text-neutral-900 truncate",children:t.title||""}),ce&&e.jsxs("div",{className:"flex items-center gap-1 shrink-0",children:[e.jsx("button",{onClick:o=>Re(t.id),className:"p-1.5 text-neutral-400 hover:text-neutral-900 hover:bg-neutral-100 rounded-md transition-colors",title:"Add Module To Session",children:e.jsx($e,{size:13})}),e.jsx("button",{onClick:o=>Ve(s,"up",o),disabled:s===0,className:"p-1.5 text-neutral-400 hover:text-indigo-600 hover:bg-indigo-50 rounded-md transition-colors disabled:opacity-30",title:"Move Session Up",children:e.jsx(Oe,{size:13})}),e.jsx("button",{onClick:o=>Ve(s,"down",o),disabled:s===i.length-1,className:"p-1.5 text-neutral-400 hover:text-indigo-600 hover:bg-indigo-50 rounded-md transition-colors disabled:opacity-30",title:"Move Session Down",children:e.jsx(De,{size:13})}),e.jsx("button",{onClick:o=>ht(t,o),className:"p-1.5 text-neutral-400 hover:text-indigo-600 hover:bg-indigo-50 rounded-md transition-colors",title:"Edit Session",children:e.jsx(ge,{size:13})}),e.jsx("button",{onClick:o=>pt(t,o),disabled:t.isDefault||a.length>0,className:"p-1.5 text-neutral-400 hover:text-red-600 hover:bg-red-50 rounded-md transition-colors disabled:opacity-30",title:t.isDefault?"Default session cannot be deleted":a.length>0?"Only empty session can be deleted":"Delete Session",children:e.jsx(Fe,{size:13})})]})]}),a.length===0?e.jsx("div",{className:"text-xs font-bold text-neutral-400 px-2 py-4 border border-dashed border-neutral-200 rounded-xl",children:"Empty session"}):e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-3",children:a.map(({mod:o,originalIndex:c},h)=>{var k;return e.jsxs("div",{onClick:()=>et(o),className:"group relative flex items-start gap-3 p-3 rounded-2xl border border-neutral-100 bg-white hover:bg-neutral-900 hover:border-neutral-900 hover:shadow-lg transition-all active:scale-95 text-left cursor-pointer",children:[e.jsx("div",{className:"p-2 rounded-xl bg-indigo-50 text-indigo-600 group-hover:scale-110 transition-transform shrink-0 mt-0.5",children:e.jsx(ye,{size:16})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("div",{className:"text-xs font-black text-neutral-900 group-hover:text-white transition-colors tracking-tight leading-tight line-clamp-2",children:o.title}),e.jsx("div",{className:"mt-1 text-[10px] font-medium text-neutral-400 group-hover:text-neutral-300 transition-colors leading-snug line-clamp-2",children:((k=o.description)==null?void 0:k.trim())||"No description yet."})]}),e.jsx("div",{className:"w-auto",children:ce&&e.jsxs("div",{className:"flex items-center gap-0.5 shrink-0 mt-0.5",children:[e.jsx("button",{onClick:m=>_e(t.id,c,"up",m),disabled:h===0,className:"p-1 text-neutral-400 hover:text-indigo-600 hover:bg-indigo-50 rounded-md transition-colors disabled:opacity-30",title:"Move Up",children:e.jsx(Oe,{size:13})}),e.jsx("button",{onClick:m=>_e(t.id,c,"down",m),disabled:h===a.length-1,className:"p-1 text-neutral-400 hover:text-indigo-600 hover:bg-indigo-50 rounded-md transition-colors disabled:opacity-30",title:"Move Down",children:e.jsx(De,{size:13})}),e.jsx("button",{onClick:m=>at(o,m),className:"p-1 text-neutral-400 hover:text-indigo-600 hover:bg-indigo-50 rounded-md transition-colors",title:"Rename",children:e.jsx(ge,{size:13})}),i.length>1&&e.jsx("button",{onClick:m=>ut(t.id,o,m),className:"p-1 text-neutral-400 hover:text-blue-600 hover:bg-blue-50 rounded-md transition-colors",title:"Move To Next Session",children:e.jsx(Ct,{size:13})}),!t.isDefault&&e.jsx("button",{onClick:m=>dt(t.id,o,m),className:"p-1 text-neutral-400 hover:text-amber-600 hover:bg-amber-50 rounded-md transition-colors",title:"Remove From Session",children:e.jsx(Pt,{size:13})}),e.jsx("button",{onClick:m=>it(o,m),className:"p-1 text-neutral-400 hover:text-red-600 hover:bg-red-50 rounded-md transition-colors",title:"Delete Module",children:e.jsx(Fe,{size:13})})]})})]},o.id)})})]},t.id)})})]})}):p==="edit"?e.jsx("div",{className:"h-full flex flex-col",children:e.jsx("textarea",{value:j,onChange:t=>$(t.target.value),className:"flex-grow w-full p-8 text-sm resize-none focus:outline-none font-mono leading-relaxed bg-neutral-50/50",placeholder:"# Module Title\\n\\nIntro content...\\n\\n## Section 1\\n\\nContent..."})}):e.jsx("div",{className:"h-full overflow-y-auto px-6 py-4 md:px-8 md:py-6 bg-white",children:e.jsxs("div",{className:"max-w-4xl mx-auto",children:[e.jsx("div",{className:"prose prose-neutral max-w-none prose-headings:font-black prose-headings:tracking-tight prose-p:leading-relaxed prose-strong:font-black prose-a:text-indigo-600 prose-img:rounded-3xl prose-img:shadow-xl",dangerouslySetInnerHTML:{__html:gt}}),e.jsxs("div",{className:"mt-16 pt-8 border-t flex items-center justify-between",children:[e.jsxs("button",{onClick:()=>y(Math.max(0,g-1)),disabled:g===0,className:"flex items-center gap-2 px-4 py-2 rounded-xl font-bold text-sm text-neutral-500 hover:bg-neutral-100 disabled:opacity-0 transition-colors",children:[e.jsx(ze,{size:18})," Previous"]}),e.jsx("button",{onClick:()=>F("home"),className:"px-4 py-2 rounded-xl font-black text-[10px] uppercase tracking-widest text-neutral-400 hover:text-neutral-900 hover:bg-neutral-50 transition-colors",children:"Back to Overview"}),e.jsxs("button",{onClick:()=>y(Math.min(z.length-1,g+1)),disabled:g===z.length-1,className:"flex items-center gap-2 px-4 py-2 rounded-xl font-bold text-sm text-indigo-600 hover:bg-indigo-50 disabled:opacity-0 transition-colors",children:["Next ",e.jsx(Te,{size:18})]})]})]})})}),de&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/50 backdrop-blur-sm animate-in fade-in",children:e.jsxs("div",{className:"bg-white rounded-3xl shadow-2xl w-full max-w-md p-6 animate-in zoom-in-95",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h3",{className:"text-xl font-black text-neutral-900",children:"New Module"}),e.jsx("button",{onClick:()=>U(!1),className:"p-2 hover:bg-neutral-100 rounded-full text-neutral-400",children:e.jsx(je,{size:20})})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold text-neutral-500 uppercase tracking-widest mb-2",children:"Module Title"}),e.jsx("input",{type:"text",value:D,onChange:t=>_(t.target.value),className:"w-full p-4 bg-neutral-50 border border-neutral-200 rounded-xl font-bold text-neutral-900 focus:outline-none focus:ring-2 focus:ring-indigo-500",placeholder:"e.g. Writing Task 1",autoFocus:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold text-neutral-500 uppercase tracking-widest mb-2",children:"Short Description"}),e.jsx("textarea",{value:V,onChange:t=>J(t.target.value.slice(0,X)),rows:3,className:"w-full p-3 bg-neutral-50 border border-neutral-200 rounded-xl font-medium text-sm text-neutral-900 focus:outline-none focus:ring-2 focus:ring-indigo-500 resize-none",placeholder:"A short summary shown on the module card..."}),e.jsxs("div",{className:"text-[10px] font-bold text-neutral-400 mt-1 text-right",children:[V.length,"/",X]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold text-neutral-500 uppercase tracking-widest mb-2",children:"Session"}),e.jsx("select",{value:he||Q,onChange:t=>n(t.target.value),className:"w-full p-3 bg-neutral-50 border border-neutral-200 rounded-xl font-bold text-neutral-900 focus:outline-none focus:ring-2 focus:ring-indigo-500",children:i.map(t=>e.jsx("option",{value:t.id,children:t.title||"(Default Session)"},t.id))})]}),e.jsxs("div",{className:"flex justify-end gap-2 pt-4",children:[e.jsx("button",{onClick:()=>U(!1),className:"px-6 py-3 rounded-xl font-bold text-neutral-500 hover:bg-neutral-100 transition-colors",children:"Cancel"}),e.jsxs("button",{onClick:rt,disabled:!D.trim()||ee,className:"px-6 py-3 rounded-xl font-black text-white bg-neutral-900 hover:bg-neutral-800 disabled:opacity-50 transition-colors flex items-center gap-2",children:[ee&&e.jsx(q,{size:16,className:"animate-spin"}),"Create Module"]})]})]})]})}),we&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/50 backdrop-blur-sm animate-in fade-in",children:e.jsxs("div",{className:"bg-white rounded-3xl shadow-2xl w-full max-w-md p-6 animate-in zoom-in-95",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h3",{className:"text-xl font-black text-neutral-900",children:"Rename Module"}),e.jsx("button",{onClick:()=>P(!1),className:"p-2 hover:bg-neutral-100 rounded-full text-neutral-400",children:e.jsx(je,{size:20})})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold text-neutral-500 uppercase tracking-widest mb-2",children:"Module Title"}),e.jsx("input",{type:"text",value:D,onChange:t=>_(t.target.value),className:"w-full p-4 bg-neutral-50 border border-neutral-200 rounded-xl font-bold text-neutral-900 focus:outline-none focus:ring-2 focus:ring-indigo-500",placeholder:"e.g. Writing Task 1",autoFocus:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold text-neutral-500 uppercase tracking-widest mb-2",children:"Short Description"}),e.jsx("textarea",{value:V,onChange:t=>J(t.target.value.slice(0,X)),rows:3,className:"w-full p-3 bg-neutral-50 border border-neutral-200 rounded-xl font-medium text-sm text-neutral-900 focus:outline-none focus:ring-2 focus:ring-indigo-500 resize-none",placeholder:"A short summary shown on the module card..."}),e.jsxs("div",{className:"text-[10px] font-bold text-neutral-400 mt-1 text-right",children:[V.length,"/",X]})]}),e.jsxs("div",{className:"flex justify-end gap-2 pt-4",children:[e.jsx("button",{onClick:()=>P(!1),className:"px-6 py-3 rounded-xl font-bold text-neutral-500 hover:bg-neutral-100 transition-colors",children:"Cancel"}),e.jsxs("button",{onClick:lt,disabled:!D.trim()||ee,className:"px-6 py-3 rounded-xl font-black text-white bg-neutral-900 hover:bg-neutral-800 disabled:opacity-50 transition-colors flex items-center gap-2",children:[ee&&e.jsx(q,{size:16,className:"animate-spin"}),"Save Changes"]})]})]})]})}),d&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/50 backdrop-blur-sm animate-in fade-in",children:e.jsxs("div",{className:"bg-white rounded-3xl shadow-2xl w-full max-w-md p-6 animate-in zoom-in-95",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h3",{className:"text-xl font-black text-neutral-900",children:x?"Edit Session":"New Session"}),e.jsx("button",{onClick:()=>f(!1),className:"p-2 hover:bg-neutral-100 rounded-full text-neutral-400",children:e.jsx(je,{size:20})})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold text-neutral-500 uppercase tracking-widest mb-2",children:"Session Title"}),e.jsx("input",{type:"text",value:me,onChange:t=>ie(t.target.value),className:"w-full p-4 bg-neutral-50 border border-neutral-200 rounded-xl font-bold text-neutral-900 focus:outline-none focus:ring-2 focus:ring-indigo-500",placeholder:"Leave blank for no title"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold text-neutral-500 uppercase tracking-widest mb-2",children:"Border Color"}),e.jsx("div",{className:"flex items-center gap-2",children:be.map(t=>e.jsx("button",{onClick:()=>ke(t),className:`w-8 h-8 rounded-full border-2 transition-all ${pe===t?"ring-2 ring-neutral-900 ring-offset-2":"border-white"}`,style:{backgroundColor:t},title:t},t))})]}),e.jsxs("div",{className:"flex justify-end gap-2 pt-4",children:[e.jsx("button",{onClick:()=>f(!1),className:"px-6 py-3 rounded-xl font-bold text-neutral-500 hover:bg-neutral-100 transition-colors",children:"Cancel"}),e.jsxs("button",{onClick:mt,disabled:ee,className:"px-6 py-3 rounded-xl font-black text-white bg-neutral-900 hover:bg-neutral-800 disabled:opacity-50 transition-colors flex items-center gap-2",children:[ee&&e.jsx(q,{size:16,className:"animate-spin"}),x?"Save Session":"Create Session"]})]})]})]})}),G&&N&&e.jsx(Mt,{isOpen:!!G,onClose:()=>fe(null),type:G==="test"?"GENERATE_AUDIO_SCRIPT":"REFINE_UNIT",title:G==="test"?"Add Practice Test":j!=null&&j.trim()?"Refine Lesson":"Generate Lesson",description:G==="test"?"AI will design a separate test based on lesson content.":"Enter instructions for the AI.",initialData:{format:G==="test"?"test":"reading"},onGeneratePrompt:st,onJsonReceived:ot,actionLabel:"Apply Changes",closeOnSuccess:!0}),e.jsx(Ee,{isOpen:!!se,title:"Delete Module?",message:e.jsxs("span",{children:["Are you sure you want to delete ",e.jsxs("span",{className:"font-bold text-neutral-900",children:['"',se==null?void 0:se.title,'"']}),"? This action cannot be undone."]}),confirmText:"Delete Module",isProcessing:Xe,onConfirm:ct,onClose:()=>Ne(null),icon:e.jsx(Pe,{size:40,className:"text-red-500"}),confirmButtonClass:"bg-red-600 text-white hover:bg-red-700 shadow-red-200"}),e.jsx(Ee,{isOpen:!!oe,title:"Delete Session?",message:e.jsxs("span",{children:["Delete session ",e.jsxs("span",{className:"font-bold text-neutral-900",children:['"',(oe==null?void 0:oe.title)||"(Untitled)",'"']}),"? Session must be empty before delete."]}),confirmText:"Delete Session",isProcessing:Qe,onConfirm:ft,onClose:()=>Ce(null),icon:e.jsx(Pe,{size:40,className:"text-red-500"}),confirmButtonClass:"bg-red-600 text-white hover:bg-red-700 shadow-red-200"})]})},He=[{name:"BookOpen",icon:ye},{name:"Video",icon:Bt},{name:"Mic",icon:St},{name:"PenTool",icon:Ut},{name:"GraduationCap",icon:Tt},{name:"Globe",icon:zt},{name:"Layout",icon:It},{name:"Code",icon:At},{name:"Music",icon:Dt},{name:"Calculator",icon:Ot},{name:"FlaskConical",icon:Lt},{name:"Briefcase",icon:$t}],We=[{bg:"bg-rose-50",text:"text-rose-600",border:"hover:border-rose-200",iconBg:"group-hover:bg-rose-100",hoverText:"group-hover:text-rose-700"},{bg:"bg-orange-50",text:"text-orange-600",border:"hover:border-orange-200",iconBg:"group-hover:bg-orange-100",hoverText:"group-hover:text-orange-700"},{bg:"bg-amber-50",text:"text-amber-600",border:"hover:border-amber-200",iconBg:"group-hover:bg-amber-100",hoverText:"group-hover:text-amber-700"},{bg:"bg-emerald-50",text:"text-emerald-600",border:"hover:border-emerald-200",iconBg:"group-hover:bg-emerald-100",hoverText:"group-hover:text-emerald-700"},{bg:"bg-cyan-50",text:"text-cyan-600",border:"hover:border-cyan-200",iconBg:"group-hover:bg-cyan-100",hoverText:"group-hover:text-cyan-700"},{bg:"bg-blue-50",text:"text-blue-600",border:"hover:border-blue-200",iconBg:"group-hover:bg-blue-100",hoverText:"group-hover:text-blue-700"},{bg:"bg-indigo-50",text:"text-indigo-600",border:"hover:border-indigo-200",iconBg:"group-hover:bg-indigo-100",hoverText:"group-hover:text-indigo-700"},{bg:"bg-violet-50",text:"text-violet-600",border:"hover:border-violet-200",iconBg:"group-hover:bg-violet-100",hoverText:"group-hover:text-violet-700"},{bg:"bg-fuchsia-50",text:"text-fuchsia-600",border:"hover:border-fuchsia-200",iconBg:"group-hover:bg-fuchsia-100",hoverText:"group-hover:text-fuchsia-700"},{bg:"bg-pink-50",text:"text-pink-600",border:"hover:border-pink-200",iconBg:"group-hover:bg-pink-100",hoverText:"group-hover:text-pink-700"}],Kt=({initialCourseId:u,onConsumeInitialCourseId:H})=>{const{showToast:l}=Ke(),[i,A]=r.useState([]),[S,W]=r.useState(null),[T,le]=r.useState(!0),[j,$]=r.useState(!1),[p,F]=r.useState(null),[L,E]=r.useState(""),[Z,R]=r.useState("BookOpen"),[g,y]=r.useState(!1),[I,K]=r.useState(null),[ae,de]=r.useState(!1),[U,we]=r.useState(!1),P=async()=>{le(!0);try{const n=b(),d=v(n),f=await fetch(`${d}/api/courses`);if(f.ok){const x=await f.json();A(x)}}catch(n){console.error("Failed to load courses",n),l("Failed to load courses","error")}finally{le(!1)}};r.useEffect(()=>{P()},[l]),r.useEffect(()=>{if(u&&i.length>0){const n=i.find(d=>d.id===u);n&&(W(n),H&&H())}},[u,i,H]);const ue=async()=>{if(L.trim()){y(!0);try{const n=b(),d=v(n),f=await fetch(`${d}/api/courses`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({title:L,icon:Z})});if(f.ok)l("Course created successfully","success"),$(!1),E(""),R("BookOpen"),P();else{const x=await f.json();l(x.error||"Failed to create course","error")}}catch(n){console.error(n),l("Failed to create course","error")}finally{y(!1)}}},xe=async()=>{if(!(!p||!L.trim())){y(!0);try{const n=b(),d=v(n);(await fetch(`${d}/api/courses/${p.id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({title:L,icon:Z})})).ok?(l("Course updated successfully","success"),$(!1),F(null),E(""),R("BookOpen"),P()):l("Failed to update course","error")}catch(n){console.error(n),l("Failed to update course","error")}finally{y(!1)}}},D=(n,d)=>{d.stopPropagation(),d.preventDefault(),K(n)},_=async()=>{if(I){de(!0);try{const n=b(),d=v(n);(await fetch(`${d}/api/courses/${I.id}`,{method:"DELETE"})).ok?(l("Course deleted successfully","success"),K(null),P()):l("Failed to delete course","error")}catch(n){console.error(n),l("Failed to delete course","error")}finally{de(!1)}}},X=async(n,d,f)=>{f.stopPropagation(),f.preventDefault();const x=[...i];if(d==="up"&&n>0)[x[n],x[n-1]]=[x[n-1],x[n]];else if(d==="down"&&n<x.length-1)[x[n],x[n+1]]=[x[n+1],x[n]];else return;A(x);try{const w=b(),me=v(w),ie=x.map(pe=>pe.id);await fetch(`${me}/api/courses/order`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({orderedIds:ie})})}catch(w){console.error("Failed to reorder courses",w),l("Failed to save order","error"),P()}},V=()=>{F(null),E(""),R("BookOpen"),$(!0)},J=(n,d)=>{d.stopPropagation(),d.preventDefault(),F(n),E(n.title),R(n.icon||"BookOpen"),$(!0)},he=n=>{const d=He.find(f=>f.name===n);return d?d.icon:ye};return S?e.jsxs("div",{className:"h-full flex flex-col",children:[e.jsx("div",{className:"flex-shrink-0 px-6 py-3 border-b flex items-center bg-white/80 backdrop-blur-md sticky top-0 z-20",children:e.jsx("button",{onClick:()=>W(null),className:"text-sm font-bold text-neutral-500 hover:text-neutral-900 transition-colors",children:"Back to Courses"})}),e.jsx("div",{className:"flex-grow overflow-hidden",children:e.jsx(_t,{courseId:S.id,courseTitle:S.title})})]}):e.jsxs("div",{className:"h-full overflow-y-auto",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"mb-8 flex flex-col sm:flex-row justify-between items-start sm:items-center gap-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-black text-neutral-900 tracking-tight",children:"Course Library"}),e.jsx("p",{className:"text-neutral-500 mt-2 font-medium",children:"Select a course to start learning."})]}),e.jsxs("div",{className:"flex items-center gap-2 shrink-0",children:[e.jsxs("button",{onClick:()=>we(n=>!n),className:`px-4 py-3 rounded-xl transition-all shadow-sm border flex items-center gap-2 font-bold text-xs ${U?"bg-neutral-900 text-white border-neutral-900":"bg-white text-neutral-600 border-neutral-200 hover:text-neutral-900 hover:border-neutral-300"}`,title:U?"Done Editing":"Edit Courses",children:[e.jsx(Je,{size:16}),e.jsx("span",{children:U?"Done":"Edit"})]}),e.jsxs("button",{onClick:V,className:"flex items-center gap-2.5 p-2 bg-white border border-neutral-200 rounded-2xl hover:border-indigo-400 hover:shadow-sm transition-all group shrink-0",title:"Create New Course",children:[e.jsx("div",{className:"w-10 h-10 bg-indigo-50 rounded-xl flex items-center justify-center group-hover:scale-110 transition-transform shrink-0",children:e.jsx($e,{size:18,className:"text-indigo-600"})}),e.jsx("span",{className:"text-sm font-black text-neutral-900 pr-3",children:"New Course"})]})]})]}),T?e.jsx("div",{className:"flex justify-center p-10",children:e.jsx(q,{className:"w-8 h-8 animate-spin text-neutral-300"})}):e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-3",children:i.map((n,d)=>{const f=he(n.icon),x=We[d%We.length];return e.jsxs("div",{onClick:()=>W(n),className:`group relative flex items-center p-4 bg-white border border-neutral-200 rounded-2xl ${x.border} hover:shadow-md transition-all text-left active:scale-[0.99] cursor-pointer h-24`,children:[e.jsx("div",{className:`w-10 h-10 rounded-xl ${x.bg} flex items-center justify-center ${x.text} ${x.iconBg} transition-colors mr-3 shrink-0`,children:e.jsx(f,{size:20})}),e.jsxs("div",{className:"flex-grow min-w-0 pr-16",children:[e.jsx("h3",{className:`text-sm font-black text-neutral-900 ${x.hoverText} transition-colors leading-tight line-clamp-2`,children:n.title}),n.isSystem&&e.jsx("span",{className:"text-[10px] font-bold text-neutral-400 uppercase tracking-wider mt-1 block",children:"System"})]}),U&&e.jsxs("div",{className:"absolute right-2 top-1/2 -translate-y-1/2 flex flex-col gap-1",children:[e.jsxs("div",{className:"flex gap-1",children:[e.jsx("button",{onClick:w=>X(d,"up",w),disabled:d===0,className:"p-1.5 text-neutral-300 hover:text-neutral-600 hover:bg-neutral-100 rounded-lg disabled:opacity-30",title:"Move Up",children:e.jsx(Oe,{size:14})}),e.jsx("button",{onClick:w=>X(d,"down",w),disabled:d===i.length-1,className:"p-1.5 text-neutral-300 hover:text-neutral-600 hover:bg-neutral-100 rounded-lg disabled:opacity-30",title:"Move Down",children:e.jsx(De,{size:14})})]}),e.jsxs("div",{className:"flex gap-1",children:[e.jsx("button",{onClick:w=>J(n,w),className:"p-1.5 text-neutral-300 hover:text-indigo-600 hover:bg-indigo-50 rounded-lg transition-colors",title:"Edit",children:e.jsx(Je,{size:14})}),!n.isSystem&&e.jsx("button",{onClick:w=>D(n,w),className:"p-1.5 text-neutral-300 hover:text-red-600 hover:bg-red-50 rounded-lg transition-colors",title:"Delete",children:e.jsx(Fe,{size:14})})]})]})]},n.id)})})]}),j&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/50 backdrop-blur-sm animate-in fade-in",children:e.jsxs("div",{className:"bg-white rounded-3xl shadow-2xl w-full max-w-md p-6 animate-in zoom-in-95",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h3",{className:"text-xl font-black text-neutral-900",children:p?"Edit Course":"New Course"}),e.jsx("button",{onClick:()=>$(!1),className:"p-2 hover:bg-neutral-100 rounded-full text-neutral-400",children:e.jsx(je,{size:20})})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold text-neutral-500 uppercase tracking-widest mb-2",children:"Course Title"}),e.jsx("input",{type:"text",value:L,onChange:n=>E(n.target.value),className:"w-full p-4 bg-neutral-50 border border-neutral-200 rounded-xl font-bold text-neutral-900 focus:outline-none focus:ring-2 focus:ring-indigo-500",placeholder:"e.g. Advanced Grammar",autoFocus:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold text-neutral-500 uppercase tracking-widest mb-2",children:"Icon"}),e.jsx("div",{className:"grid grid-cols-6 gap-2",children:He.map(({name:n,icon:d})=>e.jsx("button",{onClick:()=>R(n),className:`p-3 rounded-xl flex items-center justify-center transition-all ${Z===n?"bg-indigo-600 text-white shadow-lg shadow-indigo-500/30 scale-110":"bg-neutral-50 text-neutral-400 hover:bg-neutral-100 hover:text-neutral-600"}`,children:e.jsx(d,{size:20})},n))})]}),e.jsxs("div",{className:"flex justify-end gap-2 pt-4",children:[e.jsx("button",{onClick:()=>$(!1),className:"px-6 py-3 rounded-xl font-bold text-neutral-500 hover:bg-neutral-100 transition-colors",children:"Cancel"}),e.jsxs("button",{onClick:p?xe:ue,disabled:!L.trim()||g,className:"px-6 py-3 rounded-xl font-black text-white bg-neutral-900 hover:bg-neutral-800 disabled:opacity-50 transition-colors flex items-center gap-2",children:[g&&e.jsx(q,{size:16,className:"animate-spin"}),p?"Save Changes":"Create Course"]})]})]})]})}),e.jsx(Ee,{isOpen:!!I,title:"Delete Course?",message:e.jsxs("span",{children:["Are you sure you want to delete ",e.jsxs("span",{className:"font-bold text-neutral-900",children:['"',I==null?void 0:I.title,'"']}),"? This action cannot be undone."]}),confirmText:"Delete Course",isProcessing:ae,onConfirm:_,onClose:()=>K(null),icon:e.jsx(Pe,{size:40,className:"text-red-500"}),confirmButtonClass:"bg-red-600 text-white hover:bg-red-700 shadow-red-200"})]})};export{Kt as CourseList};
