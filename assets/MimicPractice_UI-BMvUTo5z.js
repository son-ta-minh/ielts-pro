import{c as ee,r as b,j as e,X as v,a4 as O,E as W,bF as q,i as te,b3 as se,ao as re,a as ae,t as le,bS as ne,V as ie,s as oe,bL as de,a$ as ce,M as xe,a8 as ue,v as he,aE as me,ai as be}from"./index-CoN3Y1vu.js";import{E as pe}from"./ear-C0Lv_u1j.js";import{P as fe}from"./pen-CNR6LTc3.js";import{C as je}from"./chevron-left-C3NeCtfP.js";/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ge=ee("List",[["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 18h.01",key:"1tta3j"}],["path",{d:"M3 6h.01",key:"1rqtza"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 18h13",key:"1lx6n3"}],["path",{d:"M8 6h13",key:"ik3vkj"}]]),Q=({isOpen:s,onClose:w,onSave:r,initialData:a})=>{const[o,d]=b.useState(""),u=b.useRef(null);b.useEffect(()=>{s&&(d((a==null?void 0:a.text)||""),setTimeout(()=>{var n;return(n=u.current)==null?void 0:n.focus()},100))},[s,a]);const p=n=>{n.preventDefault(),o.trim()&&r(o.trim())};return s?e.jsx("div",{className:"fixed inset-0 z-[210] flex items-center justify-center p-4 bg-black/60 backdrop-blur-sm animate-in fade-in duration-200",children:e.jsxs("form",{onSubmit:p,className:"bg-white w-full max-w-lg rounded-[2.5rem] shadow-2xl border border-neutral-200 flex flex-col",children:[e.jsxs("header",{className:"px-8 py-6 border-b border-neutral-100 flex justify-between items-start shrink-0",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-black text-neutral-900",children:a?"Edit Phrase":"Add New Phrase"}),e.jsx("p",{className:"text-sm text-neutral-500",children:"Enter the text you want to practice mimicking."})]}),e.jsx("button",{type:"button",onClick:w,className:"p-2 -mr-2 text-neutral-400 hover:bg-neutral-100 rounded-full",children:e.jsx(v,{size:20})})]}),e.jsx("main",{className:"p-8",children:e.jsx("textarea",{ref:u,value:o,onChange:n=>d(n.target.value),placeholder:"e.g. It's not a matter of if, but when.",rows:5,className:"w-full p-4 bg-neutral-50 border border-neutral-200 rounded-xl font-medium resize-none focus:ring-2 focus:ring-neutral-900 outline-none text-base leading-relaxed",required:!0})}),e.jsx("footer",{className:"px-8 py-6 border-t border-neutral-100 flex justify-end shrink-0 bg-neutral-50/50 rounded-b-[2.5rem]",children:e.jsxs("button",{type:"submit",className:"px-6 py-3 bg-neutral-900 text-white rounded-xl font-black text-xs flex items-center gap-2 uppercase tracking-widest",children:[e.jsx(be,{size:14})," Save Phrase"]})})]})}):null},Ne=({score:s})=>s===void 0?e.jsx("div",{className:"w-2 h-2 rounded-full bg-neutral-200",title:"Not practiced yet"}):e.jsx("div",{className:`flex items-center justify-center px-1.5 py-0.5 rounded-md ${s>=80?"bg-green-100 text-green-700":s>=50?"bg-yellow-100 text-yellow-700":"bg-red-100 text-red-700"}`,children:e.jsx("span",{className:"text-[9px] font-black",children:s})}),Ee=({targetText:s,sourceWord:w,isRecording:r,isRevealed:a,userTranscript:o,userAudioUrl:d,onToggleRecord:u,onPlayTarget:p,onPlayUser:n,onToggleReveal:V,onNext:G,onClearTranscript:ve,isEmpty:I,onClose:h,pagedItems:B,page:c,pageSize:k,totalPages:f,onPageChange:y,onPageSizeChange:X,onSelect:Y,currentAbsoluteIndex:A,autoSpeak:j,onToggleAutoSpeak:H,autoReveal:g,onToggleAutoReveal:J,isGlobalMode:z,localAnalysis:l,onAddItem:C,onEditItem:K,onDeleteItem:T,onRandomize:Z,isModalOpen:E,editingItem:S,onCloseModal:$,onSaveItem:M,ipa:P,showIpa:F,isIpaLoading:L,onToggleIpa:_})=>{const[R,we]=b.useState(!0);if(I)return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-center space-y-4 relative bg-white",children:[h&&e.jsx("button",{onClick:h,className:"absolute top-6 right-6 p-2 text-neutral-400 hover:bg-neutral-100 rounded-full",children:e.jsx(v,{size:24})}),e.jsx("div",{className:"p-4 bg-neutral-100 rounded-full text-neutral-400",children:e.jsx(pe,{size:40})}),e.jsx("h3",{className:"text-xl font-black text-neutral-900",children:"Queue is Empty"}),e.jsxs("button",{onClick:C,className:"mt-4 px-6 py-3 bg-neutral-900 text-white rounded-xl font-black text-xs flex items-center gap-2 uppercase tracking-widest",children:[e.jsx(O,{size:14})," Add New"]})]}),e.jsx(Q,{isOpen:E,onClose:$,onSave:M,initialData:S})]});const U=z?"h-full rounded-[2.5rem] shadow-sm border border-neutral-200":"h-full";return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:`flex w-full bg-white relative overflow-hidden ${U}`,children:[e.jsxs("div",{className:`h-full border-r border-neutral-100 bg-neutral-50/50 flex flex-col shrink-0 transition-all duration-300 ease-in-out ${R?"w-80 opacity-100":"w-0 opacity-0 border-none overflow-hidden"}`,children:[e.jsx("div",{className:"p-4 border-b border-neutral-100 bg-white space-y-3 shrink-0",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2 text-neutral-500",children:[e.jsx(ge,{size:18}),e.jsx("span",{className:"text-xs font-black uppercase tracking-widest",children:"Queue"})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("button",{onClick:J,className:`p-2 rounded-lg border transition-all shadow-sm ${g?"bg-sky-100 border-sky-200 text-sky-600":"bg-white border-neutral-200 text-neutral-400 hover:text-neutral-600"}`,title:`Auto Reveal Text: ${g?"ON":"OFF"}`,children:g?e.jsx(W,{size:14}):e.jsx(q,{size:14})}),e.jsx("button",{onClick:H,className:`p-2 rounded-lg border transition-all shadow-sm ${j?"bg-amber-100 border-amber-200 text-amber-600":"bg-white border-neutral-200 text-neutral-400 hover:text-neutral-600"}`,title:`Auto Speak: ${j?"ON":"OFF"}`,children:e.jsx(te,{size:14,fill:j?"currentColor":"none"})}),e.jsx("button",{onClick:Z,className:"p-2 bg-white border border-neutral-200 text-neutral-500 rounded-lg hover:text-indigo-600 transition-all shadow-sm",title:"Shuffle Queue",children:e.jsx(se,{size:14})}),e.jsx("button",{onClick:C,className:"p-2 bg-neutral-900 text-white border border-neutral-900 rounded-lg hover:bg-neutral-800 transition-all shadow-sm",children:e.jsx(O,{size:14})})]})]})}),e.jsx("div",{className:"flex-1 overflow-y-auto p-2 space-y-1 custom-scrollbar",children:B.map((t,x)=>{const m=c*k+x===A;return e.jsxs("div",{className:`w-full text-left rounded-lg border transition-all group relative ${m?"bg-white border-neutral-900 shadow-sm ring-1 ring-neutral-900/5":"border-transparent hover:bg-neutral-100"}`,children:[e.jsxs("button",{onClick:()=>Y(x),className:"w-full px-3 py-3 flex items-start gap-3",children:[e.jsx("div",{className:"mt-0.5 shrink-0",children:e.jsx(Ne,{score:t.lastScore})}),e.jsx("span",{className:`text-xs font-bold leading-snug line-clamp-2 ${m?"text-neutral-900":"text-neutral-600"}`,children:t.text})]}),e.jsxs("div",{className:"absolute top-1/2 -translate-y-1/2 right-2 flex items-center bg-white/90 rounded-full opacity-0 group-hover:opacity-100 transition-opacity shadow-sm border border-neutral-100",children:[e.jsx("button",{onClick:()=>K(t),className:"p-1.5 text-neutral-400 hover:text-indigo-600",children:e.jsx(fe,{size:12})}),e.jsx("button",{onClick:()=>T(t),className:"p-1.5 text-neutral-400 hover:text-red-600",children:e.jsx(re,{size:12})})]})]},t.id)})}),e.jsxs("div",{className:"p-3 border-t border-neutral-100 bg-white flex items-center justify-between shrink-0",children:[e.jsx("select",{value:k,onChange:t=>X(Number(t.target.value)),className:"bg-neutral-50 border border-neutral-200 rounded-lg px-2 py-1 text-[10px] font-bold text-neutral-600 focus:outline-none focus:ring-1 focus:ring-neutral-900",children:[10,15,20,30].map(t=>e.jsx("option",{value:t,children:t},t))}),f>1&&e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("button",{onClick:()=>y(c-1),disabled:c===0,className:"p-1.5 rounded-lg hover:bg-neutral-100 text-neutral-400 disabled:opacity-30 disabled:hover:bg-transparent",children:e.jsx(je,{size:16})}),e.jsxs("span",{className:"text-[10px] font-black text-neutral-400 tabular-nums",children:[c+1,"/",f]}),e.jsx("button",{onClick:()=>y(c+1),disabled:c>=f-1,className:"p-1.5 rounded-lg hover:bg-neutral-100 text-neutral-400 disabled:opacity-30 disabled:hover:bg-transparent",children:e.jsx(ae,{size:16})})]})]})]}),e.jsxs("div",{className:"flex-1 h-full flex flex-col relative overflow-y-auto",children:[h&&e.jsx("button",{onClick:h,className:"absolute top-4 right-4 p-2 text-neutral-400 hover:bg-neutral-100 rounded-full z-50",children:e.jsx(v,{size:20})}),e.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center p-4 space-y-6 animate-in fade-in",children:[e.jsx("div",{className:"relative w-full max-w-2xl",children:e.jsxs("div",{className:"p-6 md:p-8 rounded-[2rem] border-2 text-center transition-all duration-300 min-h-[180px] flex flex-col items-center justify-center relative bg-white border-neutral-200 shadow-xl shadow-neutral-100",children:[z&&e.jsx("div",{className:"absolute top-6 left-6 px-3 py-1 bg-neutral-50 rounded-lg text-[10px] font-black uppercase tracking-widest text-neutral-400 border border-neutral-100",children:"Pronunciation Practice"}),e.jsx("button",{onClick:V,className:"absolute top-6 right-6 p-2 text-neutral-300 hover:text-indigo-500",children:a?e.jsx(q,{size:20}):e.jsx(W,{size:20})}),e.jsxs("div",{className:"relative px-4 w-full flex flex-col items-center gap-4",children:[e.jsx("div",{className:"flex flex-wrap justify-center gap-x-1.5 gap-y-1",children:s==null?void 0:s.split(/\s+/).map((t,x)=>{const i=l==null?void 0:l.words[x],m=(i==null?void 0:i.status)==="missing";return e.jsx("span",{onClick:()=>le(t),className:`text-xl md:text-2xl font-bold cursor-pointer hover:underline decoration-neutral-200 transition-all flex leading-normal ${a||l?"opacity-100":"text-transparent blur-md select-none"}`,children:i!=null&&i.chars?i.chars.map((N,D)=>e.jsx("span",{className:N.status==="correct"?"text-emerald-600":N.status==="wrong"?"text-rose-500":"text-rose-300",children:N.char},D)):e.jsx("span",{className:m?"text-neutral-300":"text-neutral-800",children:t})},x)})}),F&&P&&e.jsx("div",{className:"px-4 py-1.5 bg-neutral-50 border border-neutral-100 rounded-xl text-lg font-mono font-medium text-neutral-500 animate-in slide-in-from-top-2 duration-500",children:P}),!a&&!l&&e.jsx("div",{className:"absolute inset-0 flex items-center justify-center pointer-events-none",children:e.jsx("span",{className:"text-neutral-200 text-xs font-bold uppercase tracking-widest animate-pulse",children:"Speak to reveal result"})})]}),l&&e.jsxs("div",{className:"mt-4 flex flex-col items-center gap-1 animate-in slide-in-from-top-2",children:[e.jsx("div",{className:"text-[10px] font-black text-neutral-400 uppercase tracking-widest",children:"Accuracy"}),e.jsxs("div",{className:`text-4xl font-black ${l.score>80?"text-emerald-500":l.score>50?"text-amber-500":"text-rose-500"}`,children:[l.score,"%"]})]})]})}),e.jsxs("div",{className:"min-h-16 flex flex-col items-center justify-center w-full max-w-xl text-center",children:[r?e.jsxs("div",{className:"flex items-center gap-2 text-rose-500 animate-pulse",children:[e.jsx(ne,{size:24}),e.jsx("span",{className:"font-black text-sm uppercase tracking-widest",children:"Listening..."})]}):!o&&e.jsx("p",{className:"text-neutral-300 text-xs font-medium",children:"Tap the microphone and read the phrase aloud"}),o&&!r&&e.jsxs("div",{className:"space-y-1 animate-in fade-in",children:[e.jsx("p",{className:"text-neutral-400 text-[10px] font-black uppercase tracking-widest",children:"What we heard"}),e.jsxs("p",{className:"text-lg font-medium italic text-neutral-600 line-clamp-2",children:['"',o,'"']})]})]}),e.jsxs("div",{className:"flex items-center gap-6",children:[e.jsx("button",{onClick:p,className:"p-4 rounded-2xl bg-white border border-neutral-200 text-neutral-600 hover:text-indigo-600 shadow-sm transition-all active:scale-95",children:e.jsx(ie,{size:24})}),e.jsx("button",{onClick:_,disabled:L,className:`p-4 rounded-2xl border transition-all shadow-sm ${F?"bg-indigo-600 text-white shadow-lg scale-105":"bg-white border-neutral-200 text-neutral-600 hover:text-indigo-600"}`,title:"Show Phonetic (IPA)",children:L?e.jsx(oe,{size:24,className:"animate-spin"}):e.jsx(de,{size:24})}),e.jsx("button",{onClick:u,className:`w-24 h-24 rounded-full flex items-center justify-center shadow-xl transition-all transform ${r?"bg-rose-500 text-white scale-110 ring-8 ring-rose-100":"bg-white border-4 border-neutral-100 text-neutral-900 hover:border-neutral-200 hover:scale-105"}`,children:r?e.jsx(ce,{size:32,fill:"currentColor"}):e.jsx(xe,{size:32})}),e.jsx("button",{onClick:n,disabled:!d||r,className:`p-4 rounded-2xl border transition-all shadow-sm ${d&&!r?"bg-white border-neutral-200 text-neutral-600 hover:text-indigo-600":"bg-neutral-50 border-neutral-100 text-neutral-300 cursor-not-allowed"}`,children:e.jsx(ue,{size:24,fill:d&&!r?"currentColor":"none"})})]}),e.jsxs("button",{onClick:G,className:"px-8 py-4 rounded-2xl font-black text-xs uppercase tracking-widest flex items-center gap-2 transition-all shadow-lg bg-neutral-900 text-white hover:bg-neutral-800 active:scale-95",children:[e.jsx("span",{children:"Next Phrase"}),e.jsx(he,{size:16})]})]}),e.jsx("div",{className:"px-8 pb-6",children:e.jsxs("div",{className:"p-4 bg-indigo-50 border border-indigo-100 rounded-2xl flex items-start gap-3",children:[e.jsx("div",{className:"p-1.5 bg-indigo-500 text-white rounded-lg shadow-sm",children:e.jsx(me,{size:16})}),e.jsxs("div",{className:"text-[10px] text-indigo-700 leading-relaxed font-medium",children:[e.jsx("b",{className:"text-[10px] uppercase tracking-wider block mb-0.5",children:"Visual Feedback Guide:"}),e.jsx("span",{className:"text-emerald-600 font-black",children:"GREEN"}),": Correct. ",e.jsx("span",{className:"text-rose-500 font-black",children:"RED"}),": Mispronounced. ",e.jsx("span",{className:"text-neutral-400 font-black",children:"GRAY"}),": Missing."]})]})})]})]}),e.jsx(Q,{isOpen:E,onClose:$,onSave:M,initialData:S})]})};export{Ee as M};
