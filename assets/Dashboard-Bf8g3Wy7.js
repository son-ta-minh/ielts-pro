import{c as y,r as h,j as e,C as R,a as k,B as S,L as E,R as z,E as C,W,S as D,b as N,d as $,P as M,e as H,g as I,f as F}from"./index-CJGDCpC1.js";import{D as V}from"./download-Bzohcal9.js";import{U as T}from"./upload-Ccex1nbK.js";/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B=y("CalendarCheck",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}],["path",{d:"m9 16 2 2 4-4",key:"19s6y9"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _=y("History",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]]),w=({value:s,max:n,label:l})=>{const d=n>0?s/n*100:0;return e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex justify-between items-center mb-1",children:[e.jsx("span",{className:"text-[10px] font-black text-neutral-400 uppercase tracking-widest",children:l}),e.jsxs("span",{className:"text-xs font-bold text-neutral-500",children:[s," / ",n]})]}),e.jsx("div",{className:"h-2 w-full bg-neutral-100 rounded-full overflow-hidden border border-neutral-200/50",children:e.jsx("div",{className:"h-full bg-green-500 rounded-full",style:{width:`${d}%`}})})]})},A=s=>{const n=s??0;return n>=80?"bg-green-100 text-green-700":n>=50?"bg-yellow-100 text-yellow-700":n>0?"bg-orange-100 text-orange-700":"bg-neutral-100 text-neutral-500"},U=({learnedToday:s,reviewedToday:n,maxLearn:l,maxReview:d,learnedWords:r,reviewedWords:i,onViewWord:a})=>{const[u,m]=h.useState(!0),o=[...r,...i].sort((t,x)=>(x.lastReview||0)-(t.lastReview||0));return e.jsxs("section",{className:"bg-white p-6 rounded-3xl border border-neutral-200 shadow-sm",children:[e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsxs("h3",{className:"text-lg font-bold text-neutral-900 flex items-center gap-2",children:[e.jsx(B,{size:18})," Daily Progress"]}),e.jsx("p",{className:"text-xs text-neutral-400 font-medium",children:"Your learning and review activity for today."})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-2xl font-black text-blue-600",children:s}),e.jsx("p",{className:"text-[9px] font-bold text-blue-500 uppercase",children:"Learned"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-2xl font-black text-orange-600",children:n}),e.jsx("p",{className:"text-[9px] font-bold text-orange-500 uppercase",children:"Reviewed"})]})]})]}),e.jsxs("div",{className:"mt-4 pt-4 border-t border-neutral-100 space-y-4",children:[e.jsxs("div",{className:"flex gap-4",children:[e.jsx(w,{value:s,max:l,label:"Learn Goal"}),e.jsx(w,{value:n,max:d,label:"Review Goal"})]}),o.length>0&&e.jsxs("div",{children:[e.jsxs("button",{onClick:()=>m(!u),className:"w-full flex justify-between items-center text-left py-2",children:[e.jsxs("h4",{className:"text-[10px] font-black uppercase tracking-widest text-neutral-400",children:["Today's Activity (",o.length,")"]}),u?e.jsx(R,{size:16,className:"text-neutral-400"}):e.jsx(k,{size:16,className:"text-neutral-400"})]}),u&&e.jsx("div",{className:"mt-2 max-h-40 overflow-y-auto space-y-1 pr-2",children:o.map(t=>e.jsxs("button",{onClick:()=>a(t),className:"w-full flex items-center gap-2 text-left p-2 rounded-lg hover:bg-neutral-50",children:[e.jsx("div",{className:`w-2 h-2 rounded-full ${r.some(x=>x.id===t.id)?"bg-blue-500":"bg-orange-500"}`}),e.jsx("span",{className:"text-sm font-bold text-neutral-800 flex-1 truncate",children:t.word}),e.jsx("span",{className:`text-xs font-black px-1.5 py-0.5 rounded-md ${A(t.masteryScore)}`,children:t.masteryScore??0}),e.jsx("span",{className:"text-xs text-neutral-400 font-mono",children:new Date(t.lastReview).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]},t.id))})]})]})]})},G=({word:s,onView:n,isComposed:l,onCompose:d,onRandomize:r})=>s?e.jsxs("div",{className:"bg-white p-6 rounded-3xl border border-neutral-200 shadow-sm group transition-all hover:border-neutral-300 hover:shadow-md flex flex-col gap-2",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"p-1 bg-amber-50 rounded-full",children:e.jsx(N,{size:10,className:"text-amber-500 fill-amber-500"})}),e.jsx("h3",{className:"text-[10px] font-black text-neutral-400 uppercase tracking-widest",children:"Word of the Day"})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[d&&e.jsx("button",{onClick:i=>{i.stopPropagation(),d(s)},className:`p-1.5 rounded-lg transition-colors ${l?"text-green-500 bg-green-50":"text-neutral-400 hover:text-neutral-900 hover:bg-neutral-100"}`,title:l?"Already composed":"Compose",children:l?e.jsx($,{size:14}):e.jsx(M,{size:14})}),e.jsx("button",{onClick:n,className:"p-1.5 text-neutral-400 hover:text-neutral-900 hover:bg-neutral-100 rounded-lg transition-colors",title:"Details",children:e.jsx(C,{size:14})}),r&&e.jsx("button",{onClick:i=>{i.stopPropagation(),r()},className:"p-1.5 text-neutral-400 hover:text-neutral-900 hover:bg-neutral-100 rounded-lg transition-colors",title:"Randomize",children:e.jsx(H,{size:14})})]})]}),e.jsx("h4",{className:"text-3xl font-black text-neutral-900 tracking-tight",children:s.word})]}):e.jsxs("div",{className:"bg-white p-6 rounded-3xl border border-neutral-200 shadow-sm flex flex-col items-center justify-center text-center",children:[e.jsx(N,{size:32,className:"text-neutral-300 mb-4"}),e.jsx("h4",{className:"font-bold text-neutral-400",children:"Word of the Day"}),e.jsx("p",{className:"text-xs text-neutral-300",children:"Add words to your library to see one here."})]}),O=({lastBackupTime:s,onBackup:n,onRestore:l})=>{const[d,r]=h.useState("");h.useEffect(()=>{const a=()=>{if(!s){r("Last backup: Never");return}const m=Date.now()-s,o=Math.floor(m/(1e3*60*60*24)),t=Math.floor(m/(1e3*60*60)%24),x=Math.floor(m/(1e3*60)%60);o>0?r(`Last backup: ${o}d ago`):t>0?r(`Last backup: ${t}h ago`):x>0?r(`Last backup: ${x}m ago`):r("Last backup: < 1m ago")};a();const u=setInterval(a,60*1e3);return()=>clearInterval(u)},[s]);const i=h.useMemo(()=>s?Date.now()-s>4320*60*1e3:!0,[s]);return e.jsxs("div",{className:`flex shrink-0 items-center justify-between space-x-3 px-3 py-2 rounded-2xl border-2 shadow-sm ${i?"bg-white border-amber-200 text-amber-900":"bg-white border-neutral-200 text-neutral-800"}`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(_,{size:14}),e.jsx("span",{className:"font-medium text-xs whitespace-nowrap",children:d})]}),e.jsxs("div",{className:"flex items-center space-x-2 pl-2",children:[e.jsxs("button",{onClick:n,className:`px-3 py-1.5 rounded-lg text-[10px] font-black uppercase tracking-widest transition-colors flex items-center space-x-1.5 ${i?"bg-amber-500 text-white hover:bg-amber-600":"bg-neutral-900 text-white hover:bg-neutral-800"}`,children:[e.jsx(V,{size:12}),e.jsx("span",{children:"Backup"})]}),e.jsxs("button",{onClick:l,className:`px-3 py-1.5 rounded-lg text-[10px] font-black uppercase tracking-widest transition-colors flex items-center space-x-1.5 ${i?"bg-amber-100 text-amber-600 hover:bg-amber-200":"bg-neutral-100 text-neutral-500 hover:bg-neutral-200"}`,children:[e.jsx(T,{size:12}),e.jsx("span",{children:"Restore"})]})]})]})},Y=({totalCount:s,newCount:n,rawCount:l,refinedCount:d,reviewStats:r,onRefineRaw:i,onVerifyRefined:a,onViewLibrary:u})=>{const o=s.toString().length>4?"text-2xl":"text-4xl";return e.jsxs("div",{className:"bg-white p-6 rounded-3xl border border-neutral-200 shadow-sm flex flex-col h-full",children:[e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsx("h3",{className:"text-[10px] font-black text-neutral-400 uppercase tracking-widest",children:"Library Health"}),e.jsx("button",{onClick:u,className:"group text-neutral-300 hover:text-neutral-900 transition-colors p-2 -mr-2",children:e.jsx(k,{size:20})})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-6 my-6 flex-grow",children:[e.jsx("div",{className:"flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:`${o} font-black text-neutral-900`,children:s}),e.jsx("div",{className:"text-xs font-bold text-neutral-400",children:"Total Words"})]})}),e.jsx("div",{className:"flex flex-col justify-center space-y-3",children:["New","Learning","Mastered"].map(t=>{const x=t==="New"?n:t==="Learning"?r.learned:r.mastered,f=t==="New"?"bg-blue-500":t==="Learning"?"bg-cyan-500":"bg-purple-500";return t==="Learning"?e.jsxs("div",{className:"relative group",children:[e.jsxs("div",{className:"flex items-center justify-between text-xs",children:[e.jsxs("div",{className:"flex items-center gap-2 font-bold text-neutral-600",children:[e.jsx("div",{className:`w-2 h-2 rounded-full ${f}`}),t,e.jsx(C,{size:12,className:"text-neutral-400 group-hover:text-neutral-900 transition-colors"})]}),e.jsx("div",{className:"font-black text-neutral-900",children:x})]}),e.jsxs("div",{className:"absolute bottom-full left-1/2 -translate-x-1/2 mb-2 w-32 bg-neutral-900 text-white rounded-lg p-2 text-xs shadow-lg opacity-0 group-hover:opacity-100 transition-opacity pointer-events-none z-10",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"font-bold text-rose-400",children:"Forgot"}),e.jsx("span",{className:"font-black",children:r.statusForgot})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"font-bold text-orange-400",children:"Hard"}),e.jsx("span",{className:"font-black",children:r.statusHard})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"font-bold text-cyan-400",children:"Just Learned"}),e.jsx("span",{className:"font-black",children:r.statusLearned})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"font-bold text-green-400",children:"Easy"}),e.jsx("span",{className:"font-black",children:r.statusEasy})]})]}),e.jsx("div",{className:"absolute top-full left-1/2 -translate-x-1/2 w-2 h-2 bg-neutral-900 rotate-45"})]})]},t):e.jsx("div",{children:e.jsxs("div",{className:"flex items-center justify-between text-xs",children:[e.jsxs("div",{className:"flex items-center gap-2 font-bold text-neutral-600",children:[e.jsx("div",{className:`w-2 h-2 rounded-full ${f}`}),t]}),e.jsx("div",{className:"font-black text-neutral-900",children:x})]})},t)})})]}),e.jsxs("div",{className:"mt-auto flex flex-col sm:flex-row gap-2",children:[e.jsxs("button",{onClick:i,disabled:l===0,className:"flex-1 justify-between px-4 py-3 bg-indigo-50 text-indigo-700 rounded-xl font-black text-xs flex items-center hover:bg-indigo-100 transition-all active:scale-95 disabled:opacity-50 disabled:hover:bg-indigo-50 border border-indigo-100 shadow-sm",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(W,{size:12}),e.jsx("span",{children:"REFINE RAW"})]}),e.jsx("span",{className:"px-2 py-0.5 bg-indigo-200/50 rounded-md font-black",children:l})]}),e.jsxs("button",{onClick:a,disabled:d===0,className:"flex-1 justify-between px-4 py-3 bg-emerald-50 text-emerald-700 rounded-xl font-black text-xs flex items-center hover:bg-emerald-100 transition-all active:scale-95 disabled:opacity-50 disabled:hover:bg-emerald-50 border border-emerald-100 shadow-sm",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(D,{size:12}),e.jsx("span",{children:"VERIFY REFINED"})]}),e.jsx("span",{className:"px-2 py-0.5 bg-emerald-200/50 rounded-md font-black",children:d})]})]})]})},q=({totalCount:s,dueCount:n,newCount:l,rawCount:d,refinedCount:r,reviewStats:i,wotd:a,onViewWotd:u,setView:m,onNavigateToWordList:o,onStartDueReview:t,onStartNewLearn:x,lastBackupTime:f,onBackup:j,onRestore:v,dayProgress:b,dailyGoals:g,isWotdComposed:p,onComposeWotd:c,onRandomizeWotd:L})=>e.jsxs("div",{className:"space-y-10 animate-in fade-in duration-500",children:[e.jsxs("header",{className:"flex flex-col sm:flex-row justify-between sm:items-center gap-6",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-3xl font-black text-neutral-900 tracking-tight",children:"Vocab Pro"}),e.jsx("p",{className:"text-neutral-500 mt-2 font-medium",children:"Don't memorize random lists. Curate the words you actually use."})]}),e.jsx(O,{lastBackupTime:f,onBackup:j,onRestore:v})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsx(Y,{totalCount:s,newCount:l,rawCount:d,refinedCount:r,reviewStats:i,onRefineRaw:()=>o("raw"),onVerifyRefined:()=>o("refined"),onViewLibrary:()=>m("BROWSE")}),e.jsxs("div",{className:"md:col-span-1 flex flex-col gap-6",children:[e.jsxs("div",{className:"bg-white p-6 rounded-3xl border border-neutral-200 shadow-sm flex flex-col gap-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"p-1 bg-green-50 rounded-full",children:e.jsx(S,{size:10,className:"text-green-600"})}),e.jsx("h3",{className:"text-[10px] font-black text-neutral-400 uppercase tracking-widest",children:"Study Now"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsxs("button",{onClick:x,disabled:l===0,className:"flex-1 justify-between px-4 py-3 bg-blue-500 text-white rounded-xl font-black text-xs flex items-center hover:bg-blue-600 transition-all active:scale-95 disabled:opacity-50 shadow-lg shadow-blue-500/10",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(E,{size:12}),e.jsx("span",{children:"LEARN NEW"})]}),e.jsx("span",{className:"px-2 py-0.5 bg-white/20 rounded-md text-white font-black",children:l})]}),e.jsxs("button",{onClick:t,disabled:n===0,className:"flex-1 justify-between px-4 py-3 bg-orange-500 text-white rounded-xl font-black text-xs flex items-center hover:bg-orange-600 transition-all active:scale-95 disabled:opacity-50 shadow-lg shadow-orange-500/10",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(z,{size:12}),e.jsx("span",{children:"REVIEW DUE"})]}),e.jsx("span",{className:"px-2 py-0.5 bg-white/20 rounded-md text-white font-black",children:n})]})]})]}),e.jsx(G,{word:a,onView:()=>a&&u(a),isComposed:p,onCompose:c,onRandomize:L})]})]}),e.jsx(U,{learnedToday:b.learned,reviewedToday:b.reviewed,maxLearn:g.max_learn_per_day,maxReview:g.max_review_per_day,learnedWords:b.learnedWords,reviewedWords:b.reviewedWords,onViewWord:u})]}),Q=({userId:s,totalCount:n,user:l,xpToNextLevel:d,wotd:r,onViewWotd:i,...a})=>{const[u,m]=h.useState(0),[o,t]=h.useState(0),[x,f]=h.useState({learned:0,reviewed:0,learnedWords:[],reviewedWords:[]}),[j,v]=h.useState({learned:0,mastered:0,statusForgot:0,statusHard:0,statusEasy:0,statusLearned:0}),b=I().dailyGoals;h.useEffect(()=>{const p=async()=>{const c=F();c&&(c.dayProgress&&f(c.dayProgress),m(c.dashboardStats.rawCount||0),t(c.dashboardStats.refinedCount),c.reviewCounts&&v({learned:c.reviewCounts.learned||0,mastered:c.reviewCounts.mastered||0,statusForgot:c.reviewCounts.statusForgot||0,statusHard:c.reviewCounts.statusHard||0,statusEasy:c.reviewCounts.statusEasy||0,statusLearned:c.reviewCounts.statusLearned||0}))};return s&&p(),window.addEventListener("datastore-updated",p),()=>{window.removeEventListener("datastore-updated",p)}},[s,n]);const g={totalCount:n,dueCount:a.dueCount,newCount:a.newCount,rawCount:u,refinedCount:o,reviewStats:j,wotd:r,onViewWotd:i,setView:a.setView,onNavigateToWordList:a.onNavigateToWordList,onStartDueReview:a.onStartDueReview,onStartNewLearn:a.onStartNewLearn,lastBackupTime:a.lastBackupTime,onBackup:a.onBackup,onRestore:a.onRestore,dayProgress:x,dailyGoals:b,isWotdComposed:a.isWotdComposed,onComposeWotd:a.onComposeWotd,onRandomizeWotd:a.onRandomizeWotd};return e.jsx(q,{...g})};export{Q as default};
