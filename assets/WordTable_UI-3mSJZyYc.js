import{c as w,r as F,j as e,k as ge,ad as is,aY as fe,E as os,Z as ie,aZ as cs,a_ as oe,a$ as ce,_ as ds,P as de,q as xs,b0 as us,b1 as hs,b2 as ps,b3 as ms,aD as _,b4 as bs,s as xe,ac as gs,b5 as ue,b6 as fs,aq as M,aj as k,a as je,X as we,S as Ne,W as ye,a1 as js,al as he,b7 as ws,b8 as Ns,p as P}from"./index-CaR-JOI2.js";import{F as pe,T as ys}from"./TagBrowser-C0YLXfPa.js";import{S as me}from"./square-check-big-BtnvfkPl.js";import{C as ks}from"./chevron-left-DMfAoMaA.js";/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const be=w("Activity",[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vs=w("BookMarked",[["path",{d:"M10 2v8l3-3 3 3V2",key:"sqw3rj"}],["path",{d:"M4 19.5v-15A2.5 2.5 0 0 1 6.5 2H19a1 1 0 0 1 1 1v18a1 1 0 0 1-1 1H6.5a1 1 0 0 1 0-5H20",key:"k3hazp"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cs=w("BookPlus",[["path",{d:"M12 7v6",key:"lw1j43"}],["path",{d:"M4 19.5v-15A2.5 2.5 0 0 1 6.5 2H19a1 1 0 0 1 1 1v18a1 1 0 0 1-1 1H6.5a1 1 0 0 1 0-5H20",key:"k3hazp"}],["path",{d:"M9 10h6",key:"9gxzsh"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zs=w("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const As=w("Columns2",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M12 3v18",key:"108xh3"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ps=w("ListFilter",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M7 12h10",key:"b7w52i"}],["path",{d:"M10 18h4",key:"1ulq68"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const O=w("Unlink",[["path",{d:"m18.84 12.25 1.72-1.71h-.02a5.004 5.004 0 0 0-.12-7.07 5.006 5.006 0 0 0-6.95 0l-1.72 1.71",key:"yqzxt4"}],["path",{d:"m5.17 11.75-1.71 1.71a5.004 5.004 0 0 0 .12 7.07 5.006 5.006 0 0 0 6.95 0l1.71-1.71",key:"4qinb0"}],["line",{x1:"8",x2:"8",y1:"2",y2:"5",key:"1041cp"}],["line",{x1:"2",x2:"5",y1:"8",y2:"8",key:"14m1p5"}],["line",{x1:"16",x2:"16",y1:"19",y2:"22",key:"rzdirn"}],["line",{x1:"19",x2:"22",y1:"16",y2:"16",key:"ox905f"}]]),_s={showIPA:!1,showMeaning:!1,blurMeaning:!0,showProgress:!0,showDue:!1,showAiIcon:!0,showFamilyIcon:!0,showPrepIcon:!0,showMastery:!0,showComplexity:!0},u=({label:t,checked:n,onChange:N,subItem:d})=>e.jsxs("button",{onClick:N,className:`w-full flex items-center justify-between px-3 py-2 rounded-lg hover:bg-neutral-50 text-xs font-bold text-neutral-700 ${d?"pl-8":""}`,children:[e.jsx("span",{className:"flex items-center gap-2",children:t}),n?e.jsx(ge,{size:14,className:"text-green-500"}):e.jsx("div",{className:"w-3.5 h-3.5 rounded-full border border-neutral-200"})]}),Fs=t=>{if(!t.lastReview)return e.jsx("span",{className:"inline-flex px-2 py-0.5 rounded-md text-[8px] font-black uppercase bg-blue-50 text-blue-600 border border-blue-100 whitespace-nowrap",children:"New"});switch(t.lastGrade){case P.FORGOT:return e.jsx("span",{className:"inline-flex px-2 py-0.5 rounded-md text-[8px] font-black uppercase bg-rose-50 text-rose-600 border border-rose-100 whitespace-nowrap",children:"Forgot"});case P.LEARNED:return e.jsx("span",{className:"inline-flex px-2 py-0.5 rounded-md text-[8px] font-black uppercase bg-cyan-50 text-cyan-600 border border-cyan-100 whitespace-nowrap",children:"Learned"});case P.HARD:return e.jsx("span",{className:"inline-flex px-2 py-0.5 rounded-md text-[8px] font-black uppercase bg-orange-50 text-orange-600 border border-orange-100 whitespace-nowrap",children:"Hard"});case P.EASY:return e.jsx("span",{className:"inline-flex px-2 py-0.5 rounded-md text-[8px] font-black uppercase bg-green-50 text-green-600 border border-green-100 whitespace-nowrap",children:"Easy"});default:return e.jsx("span",{className:"inline-flex px-2 py-0.5 rounded-md text-[8px] font-black uppercase bg-neutral-50 text-neutral-400 border border-neutral-100 whitespace-nowrap",children:"Studied"})}},Ms=t=>{switch(t){case M.VERIFIED:return e.jsx("span",{title:"Verified Content",children:e.jsx(Ne,{size:14,className:"text-emerald-500"})});case M.REFINED:return e.jsx("span",{title:"AI Refined - Needs Verification",children:e.jsx(ye,{size:14,className:"text-indigo-500"})});case M.FAILED:return e.jsx("span",{title:"Verification Failed",children:e.jsx(Ns,{size:14,className:"text-rose-500"})});default:return e.jsx("span",{title:"Raw Content",children:e.jsx(ws,{size:14,className:"text-neutral-300"})})}},Ss=t=>{const n=t??0;return n>=80?"text-green-700 bg-green-100":n>=50?"text-yellow-700 bg-yellow-100":n>0?"text-orange-700 bg-orange-100":"text-neutral-500 bg-neutral-100"},Is=[{id:"vocab",label:"Vocabulary",icon:xs},{id:"idiom",label:"Idiom",icon:us},{id:"phrasal",label:"Phrasal Verb",icon:hs},{id:"collocation",label:"Collocation",icon:ps},{id:"phrase",label:"Phrase",icon:ms},{id:"pronun",label:"Pronunciation",icon:_},{id:"archive",label:"Archive",icon:bs}],Rs=({icon:t,className:n})=>t?(t==null?void 0:t.startsWith("http"))||(t==null?void 0:t.startsWith("data:image"))?e.jsx("img",{src:t,className:`object-contain ${n}`,alt:"Book icon"}):e.jsx("span",{className:n,children:t}):null,Bs=({isOpen:t,onClose:n,onConfirm:N,books:d,selectedCount:z})=>{const[b,S]=F.useState(""),v=F.useMemo(()=>{const i=new Map;return d.forEach(o=>{const l=o.topic.split(":")[0].trim()||"General";i.has(l)||i.set(l,[]),i.get(l).push(o)}),Array.from(i.entries()).sort((o,l)=>o[0].localeCompare(l[0]))},[d]),r=F.useMemo(()=>{if(!b.trim())return v;const i=b.toLowerCase();return v.map(([o,l])=>{const g=l.filter(I=>I.topic.toLowerCase().includes(i));return[o,g]}).filter(([o,l])=>l.length>0)},[v,b]);return t?e.jsx("div",{className:"fixed inset-0 z-[200] flex items-center justify-center p-4 bg-black/60 backdrop-blur-sm animate-in fade-in duration-200",children:e.jsxs("div",{className:"bg-white w-full max-w-md rounded-[2.5rem] shadow-2xl border border-neutral-200 flex flex-col max-h-[80vh]",children:[e.jsxs("header",{className:"px-8 py-6 border-b border-neutral-100 flex justify-between items-start shrink-0",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-black text-neutral-900",children:"Add to Word Book"}),e.jsxs("p",{className:"text-xs text-neutral-500 font-bold mt-1 truncate",children:["Adding ",z," items..."]})]}),e.jsx("button",{onClick:n,className:"p-2 -mr-2 text-neutral-400 hover:bg-neutral-100 rounded-full",children:e.jsx(we,{size:20})})]}),e.jsx("div",{className:"p-4 border-b border-neutral-50",children:e.jsxs("div",{className:"relative",children:[e.jsx(fe,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-neutral-300",size:14}),e.jsx("input",{value:b,onChange:i=>S(i.target.value),placeholder:"Search book...",className:"w-full pl-9 pr-4 py-2 bg-neutral-50 border border-neutral-200 rounded-xl text-xs font-bold focus:ring-2 focus:ring-neutral-900 outline-none",autoFocus:!0})]})}),e.jsxs("main",{className:"p-4 overflow-y-auto flex-1 space-y-6 custom-scrollbar",children:[r.map(([i,o])=>e.jsxs("div",{className:"space-y-2",children:[e.jsx("h4",{className:"px-3 text-[10px] font-black uppercase text-neutral-400 tracking-widest",children:i}),e.jsx("div",{className:"space-y-1",children:o.map(l=>{const g=l.topic.split(":").slice(1).join(":").trim()||l.topic;return e.jsxs("button",{onClick:()=>N(l.id),className:"w-full text-left px-4 py-3 rounded-xl border border-neutral-100 hover:border-neutral-300 hover:bg-neutral-50 transition-all font-bold text-sm text-neutral-700 flex items-center gap-3 group",children:[e.jsx("div",{className:"w-8 h-8 rounded-lg flex items-center justify-center bg-neutral-100 group-hover:bg-white border border-transparent group-hover:border-neutral-200 shrink-0",children:e.jsx(Rs,{icon:l.icon,className:"text-base"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"truncate",children:g}),e.jsxs("p",{className:"text-[10px] text-neutral-400 font-medium",children:[l.words.length," words"]})]}),e.jsx(je,{size:14,className:"text-neutral-300 group-hover:text-neutral-900"})]},l.id)})})]},i)),r.length===0&&e.jsx("div",{className:"text-center py-10 text-neutral-400 italic text-xs font-medium",children:"No books found."})]}),e.jsx("footer",{className:"px-8 py-4 border-t border-neutral-100 bg-neutral-50/50 rounded-b-[2.5rem] flex justify-end",children:e.jsx("button",{onClick:n,className:"px-5 py-2 text-xs font-bold text-neutral-500 hover:text-neutral-900",children:"Cancel"})})]})}):null},Qs=({words:t,total:n,loading:N,page:d,pageSize:z,onPageChange:b,onPageSizeChange:S,onPractice:v,context:r,onViewWord:i,onEditWord:o,onDelete:l,onHardDelete:g,query:I,setQuery:ke,activeFilters:ve,refinedFilter:Ce,statusFilter:ze,registerFilter:Ae,sourceFilter:Pe,compositionFilter:Fe,bookFilter:R,specificBookId:Me,onSpecificBookChange:Se,isAddExpanded:B,isFilterMenuOpen:E,quickAddInput:Q,setQuickAddInput:Ie,isAdding:V,isViewMenuOpen:L,selectedIds:h,setSelectedIds:U,wordToDelete:p,setWordToDelete:$,isDeleting:Re,setIsDeleting:Y,wordToHardDelete:f,setWordToHardDelete:C,isHardDeleting:Z,setIsHardDeleting:q,isAiModalOpen:Es,setIsAiModalOpen:Be,notification:W,viewMenuRef:Ee,visibility:a,setVisibility:x,handleToggleFilter:Le,handleBatchAddSubmit:Ue,onOpenBulkDeleteModal:X,onOpenBulkHardDeleteModal:K,onBulkVerify:$e,selectedWordsToRefine:Ls,selectedRawWordsCount:J,handleGenerateRefinePrompt:Us,handleAiRefinementResult:$s,setStatusFilter:qe,setRefinedFilter:We,setRegisterFilter:Ge,setSourceFilter:Oe,setCompositionFilter:_e,setBookFilter:Qe,setIsViewMenuOpen:Ve,setIsFilterMenuOpen:Ye,setIsAddExpanded:Ze,selectedWordsMissingHintsCount:T,onOpenHintModal:Xe,showTagBrowserButton:Ke,tagTree:D,selectedTag:Je,onSelectTag:H,selectedTypes:Te,toggleType:De,onOpenWordBook:ee,onOpenAddToBookModal:He,isAddToBookModalOpen:es,setIsAddToBookModalOpen:ss,wordBooks:se,onConfirmAddToBook:ts,onAddToPronunciation:as})=>{const[G,rs]=F.useState(!1),te=Math.ceil(n/z),ls=e.jsxs("span",{children:["Are you sure you want to permanently delete ",e.jsxs("span",{className:"font-bold text-neutral-900",children:['"',p==null?void 0:p.word,'"']}),"? This action cannot be undone."]}),ns=e.jsxs("span",{children:["Remove ",e.jsxs("span",{className:"font-bold text-neutral-900",children:['"',p==null?void 0:p.word,'"']})," from this unit? It remains in your library."]});return e.jsxs("div",{className:"space-y-6 animate-in fade-in duration-500 relative",children:[W&&e.jsxs("div",{className:"fixed top-20 left-1/2 -translate-x-1/2 z-[300] bg-neutral-900 text-white px-6 py-3 rounded-2xl shadow-2xl border border-neutral-800 animate-in slide-in-from-top-4 flex items-center space-x-2",children:[W.type==="success"?e.jsx(ge,{size:18,className:"text-green-400"}):e.jsx(is,{size:18,className:"text-orange-400"}),e.jsx("span",{className:"text-sm font-bold",children:W.message})]}),e.jsxs("div",{className:"flex flex-col gap-4",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-6",children:[e.jsxs("div",{children:[e.jsx("h2",{className:`${r==="library"?"text-3xl":"text-lg"} font-black text-neutral-900 tracking-tight`,children:r==="library"?"Word Library":"Unit Vocabulary"}),e.jsxs("p",{className:`${r==="library"?"text-neutral-500 mt-2 font-medium":"text-neutral-500 text-xs font-bold mt-0.5"}`,children:[n," items",r==="library"?" collected.":"."]})]}),r==="library"&&ee&&e.jsxs("button",{onClick:ee,className:"flex items-center gap-2.5 p-2 bg-white border border-neutral-200 rounded-2xl hover:border-indigo-400 hover:shadow-sm transition-all group shrink-0",children:[e.jsx("div",{className:"w-10 h-10 bg-indigo-50 rounded-xl flex items-center justify-center group-hover:scale-110 transition-transform shrink-0",children:e.jsx("img",{src:"https://raw.githubusercontent.com/Tarikul-Islam-Anik/Animated-Fluent-Emojis/master/Emojis/Objects/Open%20Book.png",className:"w-6 h-6 object-contain",alt:"Word Book"})}),e.jsx("span",{className:"text-sm font-black text-neutral-900 pr-3",children:"Word Book"})]})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-3",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx(fe,{className:"absolute left-3.5 top-1/2 -translate-y-1/2 text-neutral-400",size:16}),e.jsx("input",{type:"text",value:I,onChange:s=>ke(s.target.value),placeholder:"Search words...",className:"w-full pl-10 pr-4 py-3 bg-white border border-neutral-200 rounded-xl text-sm font-bold focus:outline-none focus:ring-2 focus:ring-neutral-900 transition-all shadow-sm"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("div",{className:"relative",ref:Ee,children:[e.jsxs("button",{onClick:()=>Ve(!L),className:`px-4 py-3 rounded-xl transition-all shadow-sm border flex items-center gap-2 font-bold text-xs ${L?"bg-neutral-900 text-white border-neutral-900":"bg-white text-neutral-600 border-neutral-200 hover:text-neutral-900 hover:border-neutral-300"}`,title:"View Options",children:[e.jsx(os,{size:16})," ",e.jsx("span",{className:"hidden sm:inline",children:"View"})]}),L&&e.jsxs("div",{className:"absolute right-0 top-full mt-2 w-64 bg-white rounded-2xl shadow-xl border border-neutral-100 z-50 p-2 overflow-hidden animate-in fade-in zoom-in-95 flex flex-col gap-1",children:[e.jsx("div",{className:"px-3 py-2 text-[9px] font-black text-neutral-400 uppercase tracking-widest border-b border-neutral-50",children:"Columns"}),e.jsx(u,{label:e.jsxs(e.Fragment,{children:[e.jsx(As,{size:14}),"Meaning"]}),checked:a.showMeaning,onChange:()=>x(s=>({...s,showMeaning:!s.showMeaning}))}),a.showMeaning&&e.jsx(u,{label:"Hide until hover",subItem:!0,checked:a.blurMeaning,onChange:()=>x(s=>({...s,blurMeaning:!s.blurMeaning}))}),e.jsx(u,{label:e.jsxs(e.Fragment,{children:[e.jsx(be,{size:14}),"Progress Status"]}),checked:a.showProgress,onChange:()=>x(s=>({...s,showProgress:!s.showProgress}))}),e.jsx(u,{label:e.jsxs(e.Fragment,{children:[e.jsx(zs,{size:14}),"Due Date"]}),checked:a.showDue,onChange:()=>x(s=>({...s,showDue:!s.showDue}))}),e.jsx(u,{label:e.jsxs(e.Fragment,{children:[e.jsx(ie,{size:14}),"Mastery Score"]}),checked:a.showMastery,onChange:()=>x(s=>({...s,showMastery:!s.showMastery}))}),e.jsx(u,{label:e.jsxs(e.Fragment,{children:[e.jsx(cs,{size:14}),"Complexity"]}),checked:a.showComplexity,onChange:()=>x(s=>({...s,showComplexity:!s.showComplexity}))}),e.jsx("div",{className:"px-3 py-2 text-[9px] font-black text-neutral-400 uppercase tracking-widest border-b border-neutral-50 mt-1",children:"Details"}),e.jsx(u,{label:"IPA Phonetic",checked:a.showIPA,onChange:()=>x(s=>({...s,showIPA:!s.showIPA}))}),e.jsx("div",{className:"px-3 py-2 text-[9px] font-black text-neutral-400 uppercase tracking-widest border-b border-neutral-50 mt-1",children:"Indicators"}),e.jsx(u,{label:e.jsxs(e.Fragment,{children:[e.jsx(be,{size:14,className:"text-blue-500"})," Quality Status"]}),checked:a.showAiIcon,onChange:()=>x(s=>({...s,showAiIcon:!s.showAiIcon}))}),e.jsx(u,{label:e.jsxs(e.Fragment,{children:[e.jsx(oe,{size:14,className:"text-purple-500"})," Word Family"]}),checked:a.showFamilyIcon,onChange:()=>x(s=>({...s,showFamilyIcon:!s.showFamilyIcon}))}),e.jsx(u,{label:e.jsxs(e.Fragment,{children:[e.jsx(ce,{size:14,className:"text-orange-500"})," Prepositions"]}),checked:a.showPrepIcon,onChange:()=>x(s=>({...s,showPrepIcon:!s.showPrepIcon}))})]})]}),e.jsxs("button",{onClick:()=>Ye(!E),className:`px-4 py-3 rounded-xl transition-all shadow-sm border flex items-center gap-2 font-bold text-xs ${E?"bg-neutral-900 text-white border-neutral-900":"bg-white text-neutral-600 border-neutral-200 hover:text-neutral-900 hover:border-neutral-300"}`,title:"Filter",children:[e.jsx(Ps,{size:16})," ",e.jsx("span",{className:"hidden sm:inline",children:"Filter"})]}),Ke&&e.jsxs("button",{onClick:()=>rs(!G),className:`px-4 py-3 rounded-xl transition-all shadow-sm border flex items-center gap-2 font-bold text-xs ${G?"bg-neutral-900 text-white border-neutral-900":"bg-white text-neutral-500 border-neutral-200 hover:text-neutral-900 hover:border-neutral-300"}`,title:"Browse Groups",children:[e.jsx(pe,{size:16})," ",e.jsx("span",{className:"hidden sm:inline",children:"Groups"})]}),e.jsxs("button",{onClick:()=>Ze(!B),className:`px-4 py-3 rounded-xl transition-all shadow-sm border flex items-center gap-2 font-bold text-xs ${B?"bg-neutral-900 text-white border-neutral-900":"bg-white text-neutral-500 border-neutral-200 hover:text-neutral-900 hover:border-neutral-300"}`,title:"Add Words",children:[e.jsx(ds,{size:16})," ",e.jsx("span",{className:"hidden sm:inline",children:"Add"})]})]})]}),G&&D&&H&&e.jsx(ys,{tagTree:D,selectedTag:Je||null,onSelectTag:H,title:"Group Browser",icon:e.jsx(pe,{size:16})}),E&&e.jsxs("div",{className:"bg-white border border-neutral-100 p-4 rounded-2xl grid gap-4 shadow-sm animate-in slide-in-from-top-2",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center gap-2",children:[e.jsx("span",{className:"text-[10px] font-black text-neutral-400 uppercase tracking-widest w-16 shrink-0",children:"Type"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:["all","vocab","idiom","phrasal","colloc","phrase","preposition","pronun","archive","duplicate"].map(s=>{const c=ve.has(s),m=s==="duplicate";let y="bg-white text-neutral-500 border-neutral-200 hover:border-neutral-300";return c&&(y=m?"bg-rose-600 text-white border-rose-600":"bg-neutral-900 text-white border-neutral-900"),e.jsx("button",{onClick:()=>Le(s),className:`px-3 py-1 rounded-lg text-[10px] font-bold uppercase tracking-wider transition-all border ${y}`,children:s==="all"?"All":s.charAt(0).toUpperCase()+s.slice(1)},s)})})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-6 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"status-filter",className:"text-[10px] font-black text-neutral-400 uppercase tracking-widest block mb-1",children:"Status"}),e.jsx("select",{id:"status-filter",value:ze,onChange:s=>qe(s.target.value),className:"w-full px-3 py-2 rounded-lg text-xs font-bold bg-white border border-neutral-200 focus:ring-2 focus:ring-neutral-900 outline-none appearance-none",children:[{id:"all",label:"Any"},{id:"new",label:"New"},{id:"learned",label:"Learned"},{id:"easy",label:"Easy"},{id:"hard",label:"Hard"},{id:"forgot",label:"Forgot"}].map(s=>e.jsx("option",{value:s.id,children:s.label},s.id))})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"quality-filter",className:"text-[10px] font-black text-neutral-400 uppercase tracking-widest block mb-1",children:"Quality"}),e.jsx("select",{id:"quality-filter",value:Ce,onChange:s=>We(s.target.value),className:"w-full px-3 py-2 rounded-lg text-xs font-bold bg-white border border-neutral-200 focus:ring-2 focus:ring-neutral-900 outline-none appearance-none",children:[{id:"all",label:"Any"},{id:"verified",label:"Verified"},{id:"refined",label:"Refined"},{id:"raw",label:"Raw"},{id:"failed",label:"Failed"}].map(s=>e.jsx("option",{value:s.id,children:s.label},s.id))})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"register-filter",className:"text-[10px] font-black text-neutral-400 uppercase tracking-widest block mb-1",children:"Register"}),e.jsx("select",{id:"register-filter",value:Ae,onChange:s=>Ge(s.target.value),className:"w-full px-3 py-2 rounded-lg text-xs font-bold bg-white border border-neutral-200 focus:ring-2 focus:ring-neutral-900 outline-none appearance-none",children:[{id:"all",label:"Any"},{id:"raw",label:"Raw"},{id:"academic",label:"Academic"},{id:"casual",label:"Casual"},{id:"neutral",label:"Neutral"}].map(s=>e.jsx("option",{value:s.id,children:s.label},s.id))})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"source-filter",className:"text-[10px] font-black text-neutral-400 uppercase tracking-widest block mb-1",children:"Source"}),e.jsx("select",{id:"source-filter",value:Pe,onChange:s=>Oe(s.target.value),className:"w-full px-3 py-2 rounded-lg text-xs font-bold bg-white border border-neutral-200 focus:ring-2 focus:ring-neutral-900 outline-none appearance-none",children:[{id:"all",label:"Any"},{id:"app",label:"App"},{id:"manual",label:"Manual"},{id:"refine",label:"Refine"}].map(s=>e.jsx("option",{value:s.id,children:s.label},s.id))})]}),e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"composition-filter",className:"text-[10px] font-black text-neutral-400 uppercase tracking-widest block mb-1 flex items-center gap-1",children:[e.jsx(de,{size:10})," Usage"]}),e.jsx("select",{id:"composition-filter",value:Fe,onChange:s=>_e(s.target.value),className:"w-full px-3 py-2 rounded-lg text-xs font-bold bg-white border border-neutral-200 focus:ring-2 focus:ring-neutral-900 outline-none appearance-none",children:[{id:"all",label:"Any"},{id:"composed",label:"Used in Writing"},{id:"not_composed",label:"Not Used"}].map(s=>e.jsx("option",{value:s.id,children:s.label},s.id))})]}),e.jsxs("div",{className:"flex flex-col gap-1",children:[e.jsxs("label",{htmlFor:"book-filter",className:"text-[10px] font-black text-neutral-400 uppercase tracking-widest block mb-1 flex items-center gap-1",children:[e.jsx(vs,{size:10})," Book"]}),e.jsxs("div",{className:"flex gap-1",children:[e.jsx("select",{id:"book-filter",value:R,onChange:s=>Qe(s.target.value),className:`flex-1 px-3 py-2 rounded-lg text-xs font-bold bg-white border border-neutral-200 focus:ring-2 focus:ring-neutral-900 outline-none appearance-none ${R==="specific"?"w-24":""}`,children:[{id:"all",label:"Any"},{id:"in_book",label:"In a Book"},{id:"not_in_book",label:"Not in Book"},{id:"specific",label:"Specific Book"}].map(s=>e.jsx("option",{value:s.id,children:s.label},s.id))}),R==="specific"&&e.jsxs("select",{value:Me,onChange:s=>Se(s.target.value),className:"flex-[2] px-3 py-2 rounded-lg text-xs font-bold bg-white border border-neutral-200 focus:ring-2 focus:ring-neutral-900 outline-none appearance-none animate-in slide-in-from-left-2",children:[e.jsx("option",{value:"",children:"Select Book..."}),se.map(s=>{const c=s.topic.split(":"),m=c.length>1?c.slice(1).join(":").trim():s.topic,y=c.length>1?c[0].trim():"General";return e.jsxs("option",{value:s.id,children:[y,": ",m]},s.id)})]})]})]})]})]})]}),B&&e.jsxs("div",{className:"bg-white p-6 rounded-[2rem] border-2 border-neutral-100 shadow-xl space-y-4 animate-in slide-in-from-top-4 duration-300",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-[10px] font-black text-neutral-400 uppercase tracking-widest px-1",children:"Select Type"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:Is.map(s=>{const c=s.icon,m=Te.has(s.id);return e.jsxs("button",{onClick:()=>De(s.id),className:`flex items-center gap-2 px-3 py-2 rounded-xl border-2 transition-all ${m?"bg-neutral-900 border-neutral-900 text-white shadow-sm":"bg-white border-neutral-100 text-neutral-500 hover:border-neutral-300 hover:text-neutral-800"}`,children:[e.jsx(c,{size:14}),e.jsx("span",{className:"text-[10px] font-bold uppercase tracking-wide",children:s.label})]},s.id)})})]}),e.jsx("textarea",{autoFocus:!0,value:Q,onChange:s=>Ie(s.target.value),placeholder:"e.g. resilient; ubiquitous; mitigate; ...",className:"w-full h-24 p-4 bg-neutral-50 border border-neutral-200 rounded-2xl text-sm font-medium focus:ring-2 focus:ring-neutral-900 focus:outline-none resize-none"}),e.jsx("div",{className:"flex justify-end gap-3",children:e.jsxs("button",{onClick:Ue,disabled:V||!Q.trim(),className:"px-6 py-3 bg-neutral-100 text-neutral-600 rounded-xl font-black text-[10px] flex items-center space-x-2 hover:bg-neutral-200 transition-all active:scale-95 disabled:opacity-50 uppercase tracking-widest",children:[V?e.jsx(xe,{className:"animate-spin",size:14}):e.jsx(gs,{size:14}),e.jsx("span",{children:"Add Words"})]})})]}),e.jsx("div",{className:"bg-white rounded-[2rem] border border-neutral-200 shadow-sm overflow-hidden min-h-[400px]",children:N?e.jsxs("div",{className:"flex flex-col items-center justify-center h-80 space-y-4",children:[e.jsx(xe,{className:"animate-spin text-neutral-200",size:32}),e.jsx("p",{className:"text-xs font-black text-neutral-400 uppercase tracking-widest",children:"Loading..."})]}):e.jsxs("div",{className:"overflow-x-auto",children:[e.jsxs("table",{className:"w-full text-left border-collapse",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-neutral-50/50 border-b border-neutral-100",children:[e.jsx("th",{className:"px-4 py-3 w-10",children:e.jsx("button",{onClick:()=>U(h.size===t.length&&t.length>0?new Set:new Set(t.map(s=>s.id))),className:"text-neutral-300 hover:text-neutral-900",children:h.size===t.length&&t.length>0?e.jsx(me,{size:18,className:"text-neutral-900"}):e.jsx(ue,{size:18})})}),e.jsx("th",{className:"px-2 py-3 text-[10px] font-black text-neutral-400 uppercase tracking-widest",children:"Vocabulary"}),a.showMeaning&&e.jsx("th",{className:"px-4 py-3 text-[10px] font-black text-neutral-400 uppercase tracking-widest max-w-[200px]",children:"Meaning / Definition"}),(a.showProgress||a.showDue)&&e.jsx("th",{className:"px-6 py-3 text-center text-[10px] font-black text-neutral-400 uppercase tracking-widest",children:"Progress"}),a.showComplexity&&e.jsx("th",{className:"px-4 py-3 text-center text-[10px] font-black text-neutral-400 uppercase tracking-widest",children:"Complexity"}),a.showMastery&&e.jsx("th",{className:"px-4 py-3 text-center text-[10px] font-black text-neutral-400 uppercase tracking-widest",children:"Mastery"}),e.jsx("th",{className:"px-6 py-3 text-right text-[10px] font-black text-neutral-400 uppercase tracking-widest",children:"Actions"})]})}),e.jsx("tbody",{className:"divide-y divide-neutral-50",children:t.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:6,className:"p-20 text-center text-sm font-medium italic text-neutral-300",children:"No items found."})}):t.map(s=>{var ae,re,le,ne;const c=h.has(s.id),m=fs(s.nextReview),y=s.wordFamily&&((((ae=s.wordFamily.nouns)==null?void 0:ae.length)||0)>0||(((re=s.wordFamily.verbs)==null?void 0:re.length)||0)>0||(((le=s.wordFamily.adjs)==null?void 0:le.length)||0)>0||(((ne=s.wordFamily.advs)==null?void 0:ne.length)||0)>0);return e.jsxs("tr",{className:`hover:bg-neutral-50/80 cursor-pointer group transition-colors ${c?"bg-blue-50/30":""}`,onClick:()=>i(s),children:[e.jsx("td",{className:"px-4 py-2",onClick:j=>{j.stopPropagation();const A=new Set(h);A.has(s.id)?A.delete(s.id):A.add(s.id),U(A)},children:c?e.jsx(me,{size:18,className:"text-blue-600"}):e.jsx(ue,{size:18,className:"text-neutral-200 group-hover:text-neutral-400"})}),e.jsxs("td",{className:"px-2 py-2",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"font-bold text-neutral-900",children:s.word}),e.jsxs("div",{className:"flex gap-1",children:[a.showAiIcon&&Ms(s.quality),a.showFamilyIcon&&y&&e.jsx("span",{title:"Has Word Family",children:e.jsx(oe,{size:12,className:"text-purple-500"})}),a.showPrepIcon&&s.prepositions&&s.prepositions.length>0&&e.jsx("span",{title:"Has Prepositions",children:e.jsx(ce,{size:12,className:"text-orange-500"})})]})]}),a.showIPA&&e.jsxs("div",{className:"flex items-center flex-wrap gap-x-2 gap-y-1 mt-0.5",children:[e.jsx("span",{className:"text-[10px] font-mono text-neutral-400",children:s.ipa||"/?/"}),s.needsPronunciationFocus&&e.jsx(_,{size:12,className:"text-rose-500"})]})]}),a.showMeaning&&e.jsx("td",{className:"px-4 py-2 max-w-[200px] align-middle",children:e.jsx("div",{className:`text-sm text-neutral-600 leading-snug transition-all duration-300 ${a.blurMeaning?"opacity-0 group-hover:opacity-100 select-none cursor-help":""}`,children:s.meaningVi})}),(a.showProgress||a.showDue)&&e.jsx("td",{className:"px-6 py-2 text-center",children:e.jsxs("div",{className:"flex flex-row items-center justify-center gap-2",children:[a.showProgress&&Fs(s),a.showDue&&e.jsx("div",{className:`inline-flex items-center space-x-1 px-2 py-0.5 rounded-full text-[9px] font-black uppercase tracking-wider ${m.urgency==="due"?"bg-rose-50 text-rose-600 border border-rose-100":"bg-neutral-50 text-neutral-400 border border-neutral-100"}`,children:e.jsx("span",{children:m.label})})]})}),a.showComplexity&&e.jsx("td",{className:"px-4 py-2 text-center align-middle",children:e.jsx("span",{className:"text-xs font-black text-neutral-500 bg-neutral-100 px-2 py-0.5 rounded-md border border-neutral-200",children:s.complexity??0})}),a.showMastery&&e.jsx("td",{className:"px-4 py-2 text-center align-middle",children:e.jsx("span",{className:`inline-block px-2 py-0.5 rounded-md text-xs font-black ${Ss(s.masteryScore)}`,children:s.masteryScore??0})}),e.jsx("td",{className:"px-6 py-2 text-right",children:e.jsxs("div",{className:"flex items-center justify-end space-x-1 opacity-0 group-hover:opacity-100 transition-opacity",children:[e.jsx("button",{onClick:j=>{j.stopPropagation(),o(s)},className:"p-2 text-neutral-300 hover:text-neutral-900 transition-all",children:e.jsx(de,{size:16})}),r==="unit"&&s.quality===M.RAW&&g&&C&&e.jsx("button",{onClick:j=>{j.stopPropagation(),C(s)},className:"p-2 text-neutral-300 hover:text-red-700 transition-all",title:"Delete Raw Word from Library",children:e.jsx(k,{size:16})}),e.jsx("button",{onClick:j=>{j.stopPropagation(),$(s)},className:"p-2 text-neutral-300 hover:text-rose-500 transition-all",title:r==="unit"?"Unlink from Unit":"Delete from Library",children:r==="unit"?e.jsx(O,{size:16}):e.jsx(k,{size:16})})]})})]},s.id)})})]}),e.jsxs("div",{className:"p-6 bg-neutral-50/30 flex items-center justify-between border-t border-neutral-100",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{className:"text-[10px] font-black text-neutral-400 uppercase tracking-widest",children:"Size"}),e.jsx("select",{value:z,onChange:s=>S(Number(s.target.value)),className:"bg-white border border-neutral-200 rounded-lg px-2 py-1 text-xs font-bold",children:[10,25,50,100].map(s=>e.jsx("option",{value:s,children:s},s))})]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{disabled:d===0,onClick:()=>b(d-1),className:"px-3 py-1.5 bg-white border border-neutral-200 rounded-lg text-xs font-bold disabled:opacity-30",children:e.jsx(ks,{size:14})}),e.jsxs("span",{className:"text-[10px] font-black text-neutral-400 uppercase tracking-widest self-center",children:["Page ",d+1," of ",te||1]}),e.jsx("button",{disabled:d+1>=te,onClick:()=>b(d+1),className:"px-3 py-1.5 bg-white border border-neutral-200 rounded-lg text-xs font-bold disabled:opacity-30",children:e.jsx(je,{size:14})})]})]})]})}),h.size>0&&e.jsx("div",{className:"fixed bottom-8 left-1/2 -translate-x-1/2 z-[200] w-full max-w-4xl px-4 animate-in slide-in-from-bottom-8",children:e.jsxs("div",{className:"bg-neutral-900 text-white rounded-[2rem] p-4 shadow-2xl flex items-center justify-between border border-neutral-800",children:[e.jsxs("div",{className:"flex items-center space-x-4 pl-2",children:[e.jsx("button",{onClick:()=>U(new Set),className:"text-neutral-500 hover:text-white transition-colors",children:e.jsx(we,{size:20})}),e.jsx("div",{children:e.jsxs("div",{className:"text-sm font-black",children:[h.size," selected"]})})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[X&&e.jsxs("button",{onClick:X,className:`px-4 py-3 rounded-xl text-xs font-black flex items-center space-x-2 transition-colors ${r==="unit"?"bg-orange-500/10 hover:bg-orange-500/20 text-orange-500":"bg-red-500/10 hover:bg-red-500/20 text-red-500"}`,children:[r==="unit"?e.jsx(O,{size:14}):e.jsx(k,{size:14}),e.jsx("span",{children:r==="unit"?"Unlink":"Delete"})]}),r==="unit"&&K&&J>0&&e.jsxs("button",{onClick:K,className:"px-4 py-3 rounded-xl text-xs font-black flex items-center space-x-2 transition-all bg-red-500/10 hover:bg-red-500/20 text-red-500",children:[e.jsx(k,{size:14}),e.jsxs("span",{children:["Delete Raw (",J,")"]})]}),e.jsxs("button",{onClick:()=>$e(h),className:"px-4 py-3 bg-green-500/10 hover:bg-green-500/20 text-green-500 rounded-xl text-xs font-black flex items-center space-x-2 transition-colors",children:[e.jsx(Ne,{size:14})," ",e.jsx("span",{children:"Verify"})]}),T>0&&e.jsxs("button",{onClick:Xe,className:"px-4 py-3 bg-white/10 hover:bg-white/20 text-white rounded-xl text-xs font-black flex items-center space-x-2 transition-colors",title:"Generate hints for collocations and idioms",children:[e.jsx(ie,{size:14})," ",e.jsxs("span",{children:["Refine Hints (",T,")"]})]}),e.jsxs("button",{onClick:()=>{Be(!0)},className:"px-4 py-3 bg-white/10 hover:bg-white/20 text-white rounded-xl text-xs font-black flex items-center space-x-2 transition-colors",children:[e.jsx(ye,{size:14})," ",e.jsx("span",{children:"Refine"})]}),e.jsxs("button",{onClick:He,className:"px-4 py-3 bg-indigo-500/20 hover:bg-indigo-500/30 text-indigo-400 rounded-xl text-xs font-black flex items-center space-x-2 transition-colors",children:[e.jsx(Cs,{size:14})," ",e.jsx("span",{children:"Add to Book"})]}),e.jsxs("button",{onClick:as,className:"px-4 py-3 bg-purple-500/10 hover:bg-purple-500/20 text-purple-500 rounded-xl text-xs font-black flex items-center space-x-2 transition-colors",children:[e.jsx(_,{size:14})," ",e.jsx("span",{children:"Pronunciation"})]}),e.jsxs("button",{onClick:()=>v(h),className:"px-5 py-3 bg-blue-600 hover:bg-blue-500 text-white rounded-xl text-xs font-black flex items-center space-x-2",children:[e.jsx(js,{size:14,fill:"currentColor"})," ",e.jsx("span",{children:"Practice"})]})]})]})}),e.jsx(he,{isOpen:!!p,title:r==="unit"?"Unlink Word?":"Delete Word?",message:r==="unit"?ns:ls,confirmText:r==="unit"?"UNLINK":"CONFIRM DELETE",isProcessing:Re,onConfirm:async()=>{p&&(Y(!0),await l(p),Y(!1),$(null))},onClose:()=>$(null),confirmButtonClass:r==="unit"?"bg-orange-600 text-white hover:bg-orange-700 shadow-orange-200":"bg-red-600 text-white hover:bg-red-700 shadow-red-200",icon:r==="unit"?e.jsx(O,{size:40,className:"text-orange-500"}):e.jsx(k,{size:40,className:"text-red-500"})}),g&&f&&C&&Z!==void 0&&q&&e.jsx(he,{isOpen:!!f,title:"Permanently Delete Word?",message:e.jsxs("span",{children:["Are you sure you want to permanently delete ",e.jsxs("span",{className:"font-bold text-neutral-900",children:['"',f==null?void 0:f.word,'"']})," from your library? This action cannot be undone."]}),confirmText:"CONFIRM DELETE",isProcessing:Z,onConfirm:async()=>{f&&(q(!0),await g(f),q(!1),C(null))},onClose:()=>C(null),confirmButtonClass:"bg-red-600 text-white hover:bg-red-700 shadow-red-200",icon:e.jsx(k,{size:40,className:"text-red-500"})}),e.jsx(Bs,{isOpen:es,onClose:()=>ss(!1),onConfirm:ts,books:se,selectedCount:h.size})]})};export{be as A,vs as B,_s as D,O as U,Qs as W};
