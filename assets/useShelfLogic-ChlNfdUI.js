import{c as O,j as e,a as Y,k as R,r as x,E as P,K as G,G as J,T as K,y as $,a8 as X,P as H,a9 as Q,X as Z,aY as U,o as ee,A as L}from"./index-B3KWeLkU.js";import{B as E,I as te,C as se,T as re}from"./ShelfModals-cA0pNG5-.js";import{C as le}from"./chevron-left-2m-dxZ4Z.js";import{C as _}from"./circle-n86TJllY.js";import{U as ae}from"./UniversalCard-BEpekLLf.js";import{P as ne}from"./pen-CS976BOh.js";import{P as ie}from"./palette-CPVvo9zo.js";import{S as oe}from"./search-Ds1c2rF0.js";import{S as ce}from"./square-check-big-BRLh1A9n.js";/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const de=O("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xe=O("Folder",[["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}]]),Ce=({label:s,onNext:a,onPrev:c,actions:p,children:n,className:h,isEmpty:r,emptyAction:l,coverColor:u,coverIcon:j,titleColor:w})=>{const v=u||"#4e342e",i=v.startsWith("http")||v.startsWith("data:image");return e.jsxs("div",{className:`px-4 md:px-12 pt-10 pb-4 rounded-3xl transition-all duration-500 relative overflow-hidden ${h}`,style:{backgroundColor:i?"#262626":v,boxShadow:"inset 0 0 100px rgba(0,0,0,0.5)"},children:[e.jsx("div",{className:"absolute inset-0 pointer-events-none opacity-20",style:{backgroundImage:i?`url(${v})`:"repeating-linear-gradient(90deg, rgba(255,255,255,0.05), rgba(255,255,255,0.05) 1px, transparent 1px, transparent 30px)",backgroundSize:i?"cover":"auto",backgroundPosition:"center"}}),e.jsxs("div",{className:"flex items-center justify-between group mb-12 relative -top-3.5 z-10",style:{borderBottom:"3px solid rgba(0,0,0,0.4)",paddingBottom:"0.1rem",boxShadow:"0 5px 5px -3px rgba(0,0,0,0.5)"},children:[e.jsx("div",{className:"flex items-center gap-2",children:c&&e.jsx("button",{onClick:c,className:"p-2 md:p-3 bg-black/20 text-white/50 rounded-full hover:bg-black/40 hover:text-white transition-all",children:e.jsx(le,{size:24})})}),e.jsxs("div",{className:"flex items-center gap-4 relative",children:[e.jsxs("div",{className:"bg-gradient-to-b from-slate-200 to-slate-400 px-6 py-2 rounded-lg shadow-inner border-t border-slate-400/50 w-fit flex items-center gap-3 min-h-[50px]",children:[j?e.jsx(E,{icon:j,className:"text-2xl drop-shadow-md w-8 h-8 object-contain"}):e.jsx(xe,{size:20,className:"text-slate-600 opacity-50"}),e.jsx("h3",{className:"text-xl md:text-2xl font-black text-neutral-900 tracking-tight truncate max-w-[200px] md:max-w-md text-center select-none drop-shadow-sm",style:{color:w},children:s})]}),p&&e.jsx("div",{className:"absolute left-full ml-4 opacity-0 group-hover:opacity-100 transition-opacity flex items-center gap-2",children:p})]}),e.jsx("div",{className:"flex items-center gap-2",children:a&&e.jsx("button",{onClick:a,className:"p-2 md:p-3 bg-black/20 text-white/50 rounded-full hover:bg-black/40 hover:text-white transition-all",children:e.jsx(Y,{size:24})})})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-[repeat(auto-fill,10rem)] gap-x-6 md:gap-x-8 gap-y-10 min-h-[50vh] -mt-12 pb-8 relative z-10",style:{backgroundImage:"repeating-linear-gradient(to bottom, transparent, transparent 14rem, rgba(0,0,0,0.4) 14rem, rgba(0,0,0,0.4) 14.25rem, transparent 14.25rem, transparent 16.5rem)"},children:[n,r&&e.jsxs("div",{className:"col-span-full flex flex-col items-center justify-center text-white/30 h-64 border-2 border-dashed border-white/10 rounded-3xl",children:[e.jsx("p",{className:"font-black uppercase tracking-widest text-xs mb-4",children:"This collection is empty"}),l]})]})]})},M=["#5d4037","#3e2723","#1a237e","#1b5e20","#b71c1c","#0ea5e9","#10b981","#f59e0b","#ec4899","#8b5cf6","#0f172a","#171717","#334155","#450a0a","#1e1b4b","#bae6fd","#bbf7d0","#fef08a","#fecaca","#ddd6fe"],ue=s=>{let a=0;for(let c=0;c<s.length;c++)a=s.charCodeAt(c)+((a<<5)-a);return M[Math.abs(a)%M.length]},me=({id:s,title:a,subTitle:c,icon:p,color:n,onClick:h,actions:r,status:l,footer:u,titleColor:j,titleSize:w,titleTop:v,titleLeft:i,iconTop:N,iconLeft:b})=>{const C=n||ue(s),m=!!(C.startsWith("http")||C.startsWith("data:image")),d=l==="completed",o=v!==void 0||i!==void 0||N!==void 0||b!==void 0;return e.jsx("div",{className:"group [perspective:1000px] translate-y-0 cursor-pointer",onClick:h,children:e.jsxs("div",{className:`relative w-full aspect-[5/7] rounded-lg shadow-lg transition-all duration-300 transform group-hover:shadow-2xl group-hover:shadow-black/40 group-hover:[transform:rotateY(-15deg)_scale(1.05)] overflow-hidden ${d?"ring-2 ring-emerald-400/60 shadow-[0_0_20px_rgba(52,211,153,0.3)]":""}`,style:{backgroundColor:m?"#262626":C,transformStyle:"preserve-3d",transform:"rotateY(-5deg) rotateX(2deg)"},children:[m&&e.jsx("img",{src:C,className:"absolute inset-0 w-full h-full object-cover",alt:""}),e.jsx("div",{className:"absolute top-0 left-0 bottom-0 w-6 bg-gradient-to-r from-black/40 to-transparent rounded-l-lg z-10"}),e.jsx("div",{className:"absolute top-0 left-0 bottom-0 w-1.5 bg-white/10 z-10 border-r border-white/5"}),e.jsxs("div",{className:`absolute inset-2 border-2 border-black/10 rounded-sm z-10 ${m?"":"bg-black/5"} ${o?"":"flex flex-col items-center justify-center p-3 text-center"}`,children:[l==="completed"&&e.jsx("div",{className:"absolute top-2 right-2 text-emerald-500 bg-white rounded-full p-1 shadow-md z-20",title:"Completed",children:e.jsx(R,{size:16,fill:"currentColor",className:"text-white"})}),l==="active"&&e.jsx("div",{className:"absolute top-2 right-2 text-blue-300",title:"Active",children:e.jsx(_,{size:10,fill:"currentColor"})}),p&&e.jsx("div",{className:`text-white drop-shadow-md transform group-hover:scale-110 transition-transform ${o?"absolute":"mb-4"}`,style:o?{top:`${N??40}%`,left:`${b??50}%`,transform:"translate(-50%, -50%)"}:void 0,children:p}),e.jsx("h3",{className:`font-serif font-bold leading-tight drop-shadow-md line-clamp-3 ${o?"absolute w-full text-center px-2":"mb-1"}`,style:{fontSize:w?`${Math.min(w,24)}px`:"16px",color:j||"#ffffff",top:o?`${v??55}%`:void 0,left:o?`${i??50}%`:void 0,transform:o?"translate(-50%, -50%)":void 0},children:a}),c&&!o&&e.jsx("p",{className:"text-[10px] font-bold text-white/70 uppercase tracking-wider",children:c}),u&&!o&&e.jsx("div",{className:"mt-auto pt-2 text-white/80 text-[10px]",children:u})]}),!m&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"absolute top-4 left-4 right-4 h-px bg-gradient-to-r from-transparent via-white/40 to-transparent z-10 opacity-50"}),e.jsx("div",{className:"absolute bottom-4 left-4 right-4 h-px bg-gradient-to-r from-transparent via-white/40 to-transparent z-10 opacity-50"})]}),r&&e.jsx("div",{className:"absolute top-2 left-2 z-20 flex flex-col gap-1.5 opacity-0 group-hover:opacity-100 transition-all",children:r})]})})},Se=({isOpen:s,setIsOpen:a,viewOptions:c,filterOptions:p,customSection:n})=>{const h=x.useRef(null);return x.useEffect(()=>{const r=l=>{h.current&&!h.current.contains(l.target)&&a(!1)};return document.addEventListener("mousedown",r),()=>document.removeEventListener("mousedown",r)},[a]),e.jsxs("div",{className:"relative",ref:h,children:[e.jsx("button",{onClick:()=>a(!s),className:`p-3 rounded-xl border transition-all shadow-sm ${s?"bg-neutral-900 text-white border-neutral-900":"bg-white border-neutral-200 text-neutral-600 hover:bg-neutral-50"}`,title:"View & Filter",children:e.jsx(P,{size:16})}),s&&e.jsxs("div",{className:"absolute top-full right-0 mt-2 w-64 bg-white rounded-2xl shadow-xl border border-neutral-100 z-50 p-2 overflow-hidden animate-in fade-in zoom-in-95 flex flex-col gap-1",children:[p&&p.length>0&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"px-3 py-2 text-[9px] font-black text-neutral-400 uppercase tracking-widest border-b border-neutral-50 flex items-center gap-2",children:[e.jsx(de,{size:10})," Content Type"]}),e.jsx("div",{className:"p-1 grid grid-cols-3 gap-1 bg-neutral-100 rounded-xl mb-2",children:p.map(r=>e.jsx("button",{onClick:r.onClick,className:`py-1.5 text-[9px] font-black rounded-lg transition-all ${r.isActive?"bg-white shadow-sm text-neutral-900":"text-neutral-500 hover:text-neutral-700"}`,children:r.label},r.value))})]}),n,e.jsxs("div",{className:"px-3 py-2 text-[9px] font-black text-neutral-400 uppercase tracking-widest border-b border-neutral-50 flex items-center gap-2",children:[e.jsx(P,{size:10})," Visibility"]}),c.map((r,l)=>e.jsxs("button",{onClick:r.onChange,className:"flex items-center justify-between w-full px-3 py-2 text-xs font-bold rounded-lg hover:bg-neutral-50 transition-colors",children:[e.jsx("span",{children:r.label}),r.checked?e.jsx(R,{size:14,className:"text-green-500"}):e.jsx(_,{size:14,className:"text-neutral-300"})]},l))]})]})},pe=({isOpen:s,onClose:a,items:c,currentIds:p,onAdd:n,itemIcon:h})=>{const[r,l]=x.useState(""),[u,j]=x.useState(new Set),w=x.useMemo(()=>{const i=r.toLowerCase();return c.filter(N=>!p.has(N.id)&&N.title.toLowerCase().includes(i))},[c,r,p]),v=i=>{j(N=>{const b=new Set(N);return b.has(i)?b.delete(i):b.add(i),b})};return s?e.jsx("div",{className:"fixed inset-0 z-[250] flex items-center justify-center p-4 bg-black/60 backdrop-blur-sm animate-in fade-in",children:e.jsxs("div",{className:"bg-white w-full max-w-lg rounded-[2.5rem] shadow-2xl border border-neutral-200 flex flex-col max-h-[80vh]",children:[e.jsxs("header",{className:"px-8 py-6 border-b border-neutral-100 flex justify-between items-center",children:[e.jsx("h3",{className:"text-xl font-black text-neutral-900",children:"Add Content"}),e.jsx("button",{onClick:a,className:"p-2 text-neutral-400 hover:bg-neutral-100 rounded-full",children:e.jsx(Z,{size:20})})]}),e.jsx("div",{className:"p-4 border-b border-neutral-50",children:e.jsxs("div",{className:"relative",children:[e.jsx(oe,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-neutral-300",size:14}),e.jsx("input",{value:r,onChange:i=>l(i.target.value),placeholder:"Search library...",className:"w-full pl-9 pr-4 py-2 bg-neutral-50 border border-neutral-200 rounded-xl text-xs font-bold focus:ring-2 focus:ring-neutral-900 outline-none"})]})}),e.jsxs("main",{className:"flex-1 overflow-y-auto p-4 space-y-2 custom-scrollbar",children:[w.map(i=>e.jsxs("div",{onClick:()=>v(i.id),className:`flex items-center justify-between p-3 rounded-xl border cursor-pointer transition-all ${u.has(i.id)?"bg-indigo-50 border-indigo-200":"bg-white border-neutral-100 hover:border-neutral-300"}`,children:[e.jsxs("div",{className:"flex items-center gap-3",children:[h&&e.jsx("div",{className:"text-neutral-400",children:h}),e.jsxs("div",{children:[e.jsx("div",{className:"font-bold text-sm text-neutral-900",children:i.title}),i.subtitle&&e.jsx("div",{className:"text-xs text-neutral-500",children:i.subtitle})]})]}),u.has(i.id)?e.jsx(ce,{size:20,className:"text-indigo-600"}):e.jsx(U,{size:20,className:"text-neutral-300"})]},i.id)),w.length===0&&e.jsx("p",{className:"text-center text-xs text-neutral-400 py-10",children:"No matching items found."})]}),e.jsxs("footer",{className:"px-8 py-4 border-t border-neutral-100 flex justify-end gap-3",children:[e.jsx("button",{onClick:a,className:"px-5 py-2 text-xs font-bold text-neutral-500 hover:text-neutral-900",children:"Cancel"}),e.jsxs("button",{onClick:()=>{n(Array.from(u)),a()},disabled:u.size===0,className:"px-6 py-2.5 bg-neutral-900 text-white rounded-xl font-black text-xs flex items-center gap-2 disabled:opacity-50",children:[e.jsx($,{size:14})," Add (",u.size,")"]})]})]})}):null},ke=({book:s,items:a,availableItems:c,onBack:p,onUpdateBook:n,onAddItem:h,onRemoveItem:r,onOpenItem:l,onEditItem:u,onFocusChange:j,onToggleFocus:w,itemIcon:v})=>{const[i,N]=x.useState(!1),[b,C]=x.useState(""),[m,d]=x.useState(!1),[o,f]=x.useState(""),[g,S]=x.useState(!1),[z,I]=x.useState(""),[D,A]=x.useState(!1),T=x.useRef(null),{showToast:W}=G(),F=x.useMemo(()=>{const t=s.title.split(":");return t.length>1?t.slice(1).join(":").trim():s.title},[s.title]);x.useEffect(()=>{var t,y;C(F),f(s.icon||""),I((t=s.color)!=null&&t.startsWith("http")||(y=s.color)!=null&&y.startsWith("data:")?s.color:"")},[s,F]),x.useEffect(()=>{const t=y=>{T.current&&!T.current.contains(y.target)&&S(!1)};return document.addEventListener("mousedown",t),()=>document.removeEventListener("mousedown",t)},[]);const B=()=>{const y=`${s.title.split(":")[0].trim()}: ${b.trim()}`;y!==s.title&&n({title:y}),N(!1)},V=()=>{o!==s.icon&&n({icon:o.trim()}),d(!1)},q=t=>{h(t),W(`Added ${t.length} items.`,"success")};return e.jsxs("div",{className:"h-full flex flex-col animate-in fade-in duration-500",children:[e.jsxs("header",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center p-4 gap-4 shrink-0 bg-white border-b border-neutral-100 z-20",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("button",{onClick:p,className:"flex items-center gap-2 text-sm font-bold text-neutral-500 hover:text-neutral-900 transition-colors",children:[" ",e.jsx(J,{size:16})," Back "]}),e.jsxs("div",{className:"flex items-center gap-4",children:[m?e.jsx("input",{value:o,onChange:t=>f(t.target.value),onBlur:V,onKeyDown:t=>{t.key==="Enter"&&t.currentTarget.blur()},autoFocus:!0,placeholder:"Emoji",className:"text-2xl w-24 text-center bg-neutral-100 border border-neutral-300 rounded-lg py-1 outline-none ring-2 ring-indigo-300"}):e.jsx("div",{onClick:()=>d(!0),className:"p-1 rounded-lg hover:bg-neutral-100 cursor-pointer min-w-10 flex items-center justify-center",children:s.icon?e.jsx(E,{icon:s.icon,className:"text-2xl w-10 h-10 flex items-center justify-center mx-auto"}):e.jsx("div",{className:"w-10 h-10 rounded-xl border-2 border-dashed border-neutral-200 flex items-center justify-center text-neutral-300",children:e.jsx(te,{size:18})})}),i?e.jsx("input",{value:b,onChange:t=>C(t.target.value),onBlur:B,onKeyDown:t=>{t.key==="Enter"&&t.currentTarget.blur()},autoFocus:!0,className:"text-xl font-black text-neutral-900 bg-neutral-100 border border-neutral-300 rounded-lg px-2 py-1 outline-none ring-2 ring-indigo-300"}):e.jsxs("div",{onClick:()=>N(!0),className:"group/title relative p-1 rounded-lg hover:bg-neutral-100 cursor-pointer flex items-center gap-2",children:[e.jsx("h2",{className:"text-xl font-black text-neutral-900 tracking-tight",style:{color:s.titleColor||"#171717",fontSize:s.titleSize?`${s.titleSize}px`:"inherit"},children:b}),e.jsx(ne,{size:14,className:"text-neutral-400 opacity-0 group-hover/title:opacity-100 transition-opacity"})]})]})]}),e.jsxs("div",{className:"flex items-center gap-6",children:[e.jsxs("div",{className:"relative",ref:T,children:[e.jsxs("button",{onClick:()=>S(!g),className:`p-2.5 rounded-xl transition-all border shadow-sm flex items-center justify-center gap-2 ${g?"bg-neutral-900 text-white border-neutral-900 shadow-md":"bg-white text-neutral-500 border-neutral-200 hover:bg-neutral-50 hover:text-neutral-900"}`,title:"Change Cover Design",children:[e.jsx(ie,{size:18}),g&&e.jsx("span",{className:"text-[10px] font-black uppercase tracking-widest mr-1",children:"Design"})]}),g&&e.jsxs("div",{className:"absolute top-full right-0 mt-3 p-5 bg-white rounded-3xl shadow-[0_20px_50px_-12px_rgba(0,0,0,0.25)] border border-neutral-100 z-[100] animate-in fade-in zoom-in-95 origin-top-right w-80 space-y-5",children:[e.jsx("div",{className:"flex justify-center border-b border-neutral-100 pb-4",children:e.jsx("div",{className:"w-32 h-44 shadow-lg rounded-lg overflow-hidden transform rotate-2",children:e.jsx(me,{id:s.id,title:b,icon:e.jsx(E,{icon:o||s.icon||"",className:"text-3xl"}),color:s.color,titleColor:s.titleColor,titleSize:s.titleSize,titleTop:s.titleTop,titleLeft:s.titleLeft,iconTop:s.iconTop,iconLeft:s.iconLeft,onClick:()=>{}})})}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("div",{className:"flex items-center gap-2 px-1 border-b border-neutral-50 pb-2",children:e.jsx("span",{className:"text-[10px] font-black text-neutral-400 uppercase tracking-widest",children:"Cover Color"})}),e.jsx("div",{className:"grid grid-cols-5 gap-3 justify-items-center",children:se.map(t=>e.jsx("button",{onClick:()=>n({color:t}),className:`w-8 h-8 rounded-full transition-all hover:scale-125 active:scale-90 ${s.color===t?"ring-2 ring-neutral-900 ring-offset-2 scale-110 shadow-md":"opacity-90 hover:opacity-100 shadow-sm border border-black/5"}`,style:{backgroundColor:t}},t))})]}),e.jsxs("div",{className:"space-y-3 pt-2 border-t border-neutral-50",children:[e.jsx("div",{className:"flex items-center gap-2 px-1",children:e.jsx("span",{className:"text-[10px] font-black text-neutral-400 uppercase tracking-widest",children:"Title Style"})}),e.jsxs("div",{className:"space-y-3 px-1",children:[e.jsx("div",{className:"grid grid-cols-5 gap-3 justify-items-center",children:re.map(t=>e.jsx("button",{onClick:()=>n({titleColor:t}),className:`w-6 h-6 rounded-md border transition-all ${s.titleColor===t?"ring-2 ring-indigo-500":"border-neutral-200"}`,style:{backgroundColor:t}},t))}),e.jsxs("div",{className:"flex items-center gap-3 bg-neutral-50 p-2 rounded-xl",children:[e.jsx(K,{size:14,className:"text-neutral-400"}),e.jsx("input",{type:"range",min:"12",max:"48",value:s.titleSize||24,onChange:t=>n({titleSize:parseInt(t.target.value)}),className:"flex-1 accent-neutral-900 h-1"})]})]})]}),e.jsxs("div",{className:"space-y-3 pt-2 border-t border-neutral-50",children:[e.jsxs("div",{className:"flex items-center justify-between px-1",children:[e.jsx("span",{className:"text-[10px] font-black text-neutral-400 uppercase tracking-widest",children:"Layout"}),e.jsx("button",{onClick:()=>n({titleTop:void 0,titleLeft:void 0,iconTop:void 0,iconLeft:void 0}),className:"text-[8px] font-black text-indigo-600 hover:underline uppercase",children:"Center All"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 px-1",children:[e.jsxs("div",{className:"space-y-1.5",children:[e.jsx("label",{className:"text-[8px] font-bold text-neutral-400 uppercase flex items-center gap-1",children:"Title Pos"}),e.jsxs("div",{className:"flex gap-1",children:[e.jsx("input",{type:"number",value:s.titleTop??50,onChange:t=>n({titleTop:parseInt(t.target.value)}),className:"w-full px-2 py-1 bg-neutral-50 border border-neutral-200 rounded-md text-[10px] font-bold"}),e.jsx("input",{type:"number",value:s.titleLeft??50,onChange:t=>n({titleLeft:parseInt(t.target.value)}),className:"w-full px-2 py-1 bg-neutral-50 border border-neutral-200 rounded-md text-[10px] font-bold"})]})]}),e.jsxs("div",{className:"space-y-1.5",children:[e.jsx("label",{className:"text-[8px] font-bold text-neutral-400 uppercase flex items-center gap-1",children:"Icon Pos"}),e.jsxs("div",{className:"flex gap-1",children:[e.jsx("input",{type:"number",value:s.iconTop??40,onChange:t=>n({iconTop:parseInt(t.target.value)}),className:"w-full px-2 py-1 bg-neutral-50 border border-neutral-200 rounded-md text-[10px] font-bold"}),e.jsx("input",{type:"number",value:s.iconLeft??50,onChange:t=>n({iconLeft:parseInt(t.target.value)}),className:"w-full px-2 py-1 bg-neutral-50 border border-neutral-200 rounded-md text-[10px] font-bold"})]})]})]})]}),e.jsxs("div",{className:"space-y-2 pt-2 border-t border-neutral-50",children:[e.jsx("label",{className:"text-[9px] font-black text-neutral-400 uppercase tracking-widest px-1",children:"Image URL"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{value:z,onChange:t=>I(t.target.value),onKeyDown:t=>{t.key==="Enter"&&(n({color:z.trim()}),S(!1))},placeholder:"https://...",className:"flex-1 px-3 py-1.5 bg-neutral-50 border border-neutral-200 rounded-lg text-[10px] font-medium focus:ring-1 focus:ring-neutral-900 outline-none"}),e.jsx("button",{onClick:()=>n({color:z.trim()}),className:"p-1.5 bg-neutral-900 text-white rounded-lg hover:bg-neutral-800",children:e.jsx($,{size:14})})]})]})]})]}),e.jsxs("button",{onClick:()=>A(!0),className:"px-4 py-2 bg-white border border-neutral-200 text-neutral-600 rounded-lg font-bold text-xs flex items-center gap-2 hover:bg-neutral-50 transition-all shadow-sm",children:[e.jsx($,{size:14})," Add Content"]})]})]}),e.jsx("main",{className:"flex-1 overflow-y-auto p-4 md:p-8 bg-neutral-50/50 relative",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-6 relative z-10",children:[a.map((t,y)=>e.jsx(ae,{title:t.title,compact:!1,onClick:()=>l(t),isCompleted:t.isCompleted,focusColor:t.focusColor,onFocusChange:k=>j(t,k),isFocused:t.isFocused,onToggleFocus:()=>w(t),actions:e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("button",{onClick:k=>{k.stopPropagation(),l(t)},className:"p-1.5 text-neutral-400 hover:text-indigo-600 hover:bg-indigo-50 rounded-lg transition-colors",title:"Read",children:e.jsx(X,{size:14})}),e.jsx("button",{onClick:k=>{k.stopPropagation(),u(t)},className:"p-1.5 text-neutral-400 hover:text-neutral-900 hover:bg-neutral-100 rounded-lg transition-colors",title:"Edit",children:e.jsx(H,{size:14})}),e.jsx("button",{onClick:k=>{k.stopPropagation(),r(t.id)},className:"p-1.5 text-neutral-400 hover:text-red-600 hover:bg-red-50 rounded-lg transition-colors",title:"Remove from Book",children:e.jsx(Q,{size:14})})]}),children:t.subtitle&&e.jsx("p",{className:"line-clamp-2 text-xs",children:t.subtitle})},`${t.id}-${y}`)),a.length===0&&e.jsxs("div",{className:"col-span-full py-20 text-center text-neutral-400 border-2 border-dashed border-neutral-200 rounded-3xl",children:[e.jsx("p",{className:"font-bold",children:"This book is empty."}),e.jsx("p",{className:"text-sm mt-1",children:'Click "Add Content" to fill it up.'})]})]})}),e.jsx(pe,{isOpen:D,onClose:()=>A(!1),items:c,currentIds:new Set(a.map(t=>t.id)),onAdd:q,itemIcon:v})]})},ze=(s,a)=>{const[c,p]=x.useState(()=>ee(a,[])),[n,h]=x.useState(0),{showToast:r}=G(),l=x.useMemo(()=>{const m=new Set(s.map(f=>{const g=f.title.split(":");return g.length>1?g[0].trim():"General"})),d=new Set([...c,...Array.from(m)]),o=Array.from(d).sort((f,g)=>f==="General"?-1:g==="General"?1:f.localeCompare(g));return o.length>0?o:["General"]},[s,c]);x.useEffect(()=>{n>=l.length&&h(Math.max(0,l.length-1))},[l.length]);const u=l[n]||"General",j=x.useMemo(()=>s.filter(m=>{const d=m.title.split(":");return(d.length>1?d[0].trim():"General")===u}),[s,u]);return{allShelves:l,currentShelfName:u,booksOnCurrentShelf:j,currentShelfIndex:n,addShelf:m=>{const d=m.trim();if(l.map(f=>f.toLowerCase()).includes(d.toLowerCase()))return r("Shelf name already exists.","error"),!1;const o=[...c,d];return p(o),L(a,o),l.length,setTimeout(()=>{},0),r(`Shelf "${d}" created.`,"success"),!0},renameShelf:(m,d)=>{const o=u,f=m.trim();if(l.map(S=>S.toLowerCase()).includes(f.toLowerCase()))return r("Shelf name already exists.","error"),!1;let g;return c.includes(o)?g=c.map(S=>S===o?f:S):g=[...c,f],p(g),L(a,g),d(o,f),r(`Renamed to "${f}".`,"success"),!0},removeShelf:()=>{if(j.length>0)return r("Cannot remove a shelf that contains books.","error"),!1;if(u==="General")return r("Cannot remove General shelf.","error"),!1;const m=c.filter(d=>d!==u);return p(m),L(a,m),h(d=>Math.max(0,d-1)),!0},nextShelf:()=>h((n+1)%l.length),prevShelf:()=>h((n-1+l.length)%l.length),selectShelf:m=>{const d=l.indexOf(m);d!==-1&&h(d)}}};export{ke as G,Ce as U,Se as V,me as a,ze as u};
