import{c as Y,r as n,j as e,aB as Ee,P as Ce,aC as ue,aD as pt,ah as pe,D as oe,aE as Le,aF as $e,V as We,aG as Je,aH as Ge,aI as Ke,aJ as ht,aK as mt,aL as Se,a6 as Te,C as Pe,t as gt,aM as ft,m as Ae,ao as qe,a3 as Xe,aN as Ye,a as Ue,s as ne,aO as bt,aP as jt,aQ as vt,F as yt,o as Nt,a7 as wt,aR as kt,K as Re,U as Ve,O as Ct,Y as St,I as At,_ as Rt,a0 as ze,u as zt,ar as It,aS as Me,k as xe,ai as Qe,L as Et,h as Lt,X as Tt,aT as Pt,aU as Mt,aV as Dt,aW as Ze,aX as Ot,aY as _t,aZ as Ut,E as Fe,aq as Ne,a_ as Vt,f as Ft,a$ as Ht,b0 as Bt,b1 as $t,b2 as Wt,b3 as Jt,b4 as Gt,b5 as Kt}from"./index-CMQqxrid.js";import{A as et,S as qt,T as Xt}from"./AvatarSelectionModal-DvXqVPCz.js";import{P as tt}from"./pause-Kg13yPfL.js";import{F as He}from"./folder-BZ95i3E9.js";import{C as Yt,F as Qt}from"./file-audio-IhqI2iGW.js";import{B as Zt,A as es,D as we}from"./WordTable_UI-BHQpG0yQ.js";import{E as ts}from"./ear-wSrosEk_.js";import{L as ss}from"./list-todo-CLdhw3uF.js";import{D as as}from"./download-DzneKFzD.js";import{C as ns}from"./circle-BFdDN-84.js";import{P as rs}from"./pen-DfbuXqx4.js";import"./palette-D0CO4zEM.js";import"./TagBrowser-Cpvbz8ig.js";import"./square-check-big-Dj3Ze1lB.js";import"./chevron-left-Bz0xBzMD.js";/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ls=Y("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const he=Y("FolderOpen",[["path",{d:"m6 14 1.5-2.9A2 2 0 0 1 9.24 10H20a2 2 0 0 1 1.94 2.5l-1.54 6a2 2 0 0 1-1.95 1.5H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H18a2 2 0 0 1 2 2v2",key:"usdka0"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const os=Y("LayoutTemplate",[["rect",{width:"18",height:"7",x:"3",y:"3",rx:"1",key:"f1a2em"}],["rect",{width:"9",height:"7",x:"3",y:"14",rx:"1",key:"jqznyg"}],["rect",{width:"5",height:"7",x:"16",y:"14",rx:"1",key:"q5h2i8"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const is=Y("School",[["path",{d:"M14 22v-4a2 2 0 1 0-4 0v4",key:"hhkicm"}],["path",{d:"m18 10 3.447 1.724a1 1 0 0 1 .553.894V20a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2v-7.382a1 1 0 0 1 .553-.894L6 10",key:"1xqip1"}],["path",{d:"M18 5v17",key:"1sw6gf"}],["path",{d:"m4 6 7.106-3.553a2 2 0 0 1 1.788 0L20 6",key:"9d2mlk"}],["path",{d:"M6 5v17",key:"1xfsm0"}],["circle",{cx:"12",cy:"9",r:"2",key:"1092wv"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cs=Y("Scissors",[["circle",{cx:"6",cy:"6",r:"3",key:"1lh9wr"}],["path",{d:"M8.12 8.12 12 12",key:"1alkpv"}],["path",{d:"M20 4 8.12 15.88",key:"xgtan2"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["path",{d:"M14.8 14.8 20 20",key:"ptml3r"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const st=Y("Server",[["rect",{width:"20",height:"8",x:"2",y:"2",rx:"2",ry:"2",key:"ngkwjq"}],["rect",{width:"20",height:"8",x:"2",y:"14",rx:"2",ry:"2",key:"iecqi9"}],["line",{x1:"6",x2:"6.01",y1:"6",y2:"6",key:"16zg32"}],["line",{x1:"6",x2:"6.01",y1:"18",y2:"18",key:"nzw8ys"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ds=Y("Table",[["path",{d:"M12 3v18",key:"108xh3"}],["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ie=Y("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const at=Y("Wrench",[["path",{d:"M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.77-3.77a6 6 0 0 1-7.94 7.94l-6.91 6.91a2.12 2.12 0 0 1-3-3l6.91-6.91a6 6 0 0 1 7.94-7.94l-3.76 3.76z",key:"cbrjhi"}]]),us=["Vietnamese","Spanish","Chinese (Simplified)","Chinese (Traditional)","Japanese","Korean","French","German","Italian","Portuguese","Russian","Arabic","Hindi","Thai","Indonesian","Turkish"],xs=[{level:1,title:"Vocab Novice"},{level:5,title:"Word Apprentice"},{level:10,title:"Lexical Explorer"},{level:20,title:"Master Grammarian"},{level:30,title:"IELTS Wordsmith"},{level:50,title:"IELTS Luminary"}],ps=({profileData:t,onProfileChange:c,onAvatarChange:l,onSaveProfile:d})=>{const[u,b]=n.useState(!1),s=xs.some(v=>v.title===t.role),m={id:"settings-user",name:t.name,avatar:t.avatar,lastLogin:0,experience:0,level:100,peakLevel:100,adventure:{}};return e.jsxs("section",{className:"bg-white p-8 rounded-[2.5rem] border border-neutral-200 shadow-sm flex flex-col space-y-8",children:[e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:"p-3 bg-neutral-100 text-neutral-600 rounded-2xl",children:e.jsx(Ee,{size:24})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-black text-neutral-900",children:"Your Profile"}),e.jsx("p",{className:"text-xs text-neutral-400",children:"Identity and learning context."})]})]}),e.jsxs("div",{className:"flex flex-col md:flex-row items-center gap-6 p-4 bg-neutral-50 rounded-3xl border border-neutral-100",children:[e.jsxs("div",{className:"relative group shrink-0",children:[e.jsx("img",{src:t.avatar,alt:"Current Avatar",className:"w-24 h-24 rounded-2xl bg-white shadow-sm border-2 border-white object-contain"}),e.jsx("button",{onClick:()=>b(!0),className:"absolute inset-0 bg-black/40 rounded-2xl flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity text-white font-bold text-xs",children:"Change"}),e.jsx("button",{onClick:()=>b(!0),className:"absolute -bottom-2 -right-2 p-2 bg-neutral-900 text-white rounded-full shadow-md hover:scale-110 transition-transform",title:"Edit Avatar",children:e.jsx(Ce,{size:14})})]}),e.jsxs("div",{className:"flex-1 w-full md:w-auto",children:[e.jsx("label",{className:"block text-[10px] font-black text-neutral-400 uppercase tracking-widest px-1 mb-2",children:"Display Name"}),e.jsx("input",{name:"name",value:t.name,onChange:c,className:"w-full px-4 py-3 bg-white border border-neutral-200 rounded-xl font-bold text-lg focus:ring-2 focus:ring-neutral-900 outline-none",placeholder:"Enter your name"}),e.jsx("button",{onClick:()=>b(!0),className:"mt-2 text-xs font-bold text-indigo-600 hover:underline md:hidden",children:"Select Identity"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 pt-2",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-[10px] font-black text-neutral-400 uppercase tracking-widest px-1 mb-2",children:"Role / Title"}),e.jsx("input",{name:"role",value:t.role,onChange:c,placeholder:"e.g., Student",className:"w-full px-4 py-3 bg-neutral-50 border border-neutral-200 rounded-xl font-medium focus:ring-1 focus:ring-neutral-300 outline-none",readOnly:s})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-[10px] font-black text-neutral-400 uppercase tracking-widest px-1 mb-2",children:"Current Level"}),e.jsx("input",{name:"currentLevel",value:t.currentLevel,onChange:c,placeholder:"e.g., Intermediate, Advanced",className:"w-full px-4 py-3 bg-neutral-50 border border-neutral-200 rounded-xl font-medium focus:ring-1 focus:ring-neutral-300 outline-none"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-[10px] font-black text-neutral-400 uppercase tracking-widest px-1 mb-2",children:"Target"}),e.jsx("input",{name:"target",value:t.target,onChange:c,placeholder:"e.g., Fluent communication",className:"w-full px-4 py-3 bg-neutral-50 border border-neutral-200 rounded-xl font-medium focus:ring-1 focus:ring-neutral-300 outline-none"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-[10px] font-black text-neutral-400 uppercase tracking-widest px-1 mb-2 flex items-center gap-2",children:[e.jsx(ue,{size:12})," Native Language"]}),e.jsx("select",{name:"nativeLanguage",value:t.nativeLanguage,onChange:c,className:"w-full px-4 py-3 bg-neutral-50 border border-neutral-200 rounded-xl font-medium appearance-none focus:ring-1 focus:ring-neutral-300 outline-none",children:us.map(v=>e.jsx("option",{value:v,children:v},v))})]})]})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:"p-3 bg-amber-50 text-amber-600 rounded-2xl",children:e.jsx(ue,{size:24})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-black text-neutral-900",children:"Lesson Preferences"}),e.jsx("p",{className:"text-xs text-neutral-400",children:"Settings for AI generated units in Lesson page"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 pt-4 border-t border-neutral-100",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-[10px] font-black text-neutral-400 uppercase tracking-widest px-1 mb-2 flex items-center gap-2",children:[e.jsx(ue,{size:12})," Content Language"]}),e.jsxs("select",{name:"lessonLanguage",value:t.lessonLanguage,onChange:c,className:"w-full px-4 py-3 bg-neutral-50 border border-neutral-200 rounded-xl font-medium appearance-none",children:[e.jsx("option",{value:"English",children:"English"}),e.jsx("option",{value:"Vietnamese",children:"Vietnamese"})]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-[10px] font-black text-neutral-400 uppercase tracking-widest px-1 mb-2 flex items-center gap-2",children:[e.jsx(pt,{size:12})," Target Audience"]}),e.jsxs("select",{name:"lessonAudience",value:t.lessonAudience,onChange:c,className:"w-full px-4 py-3 bg-neutral-50 border border-neutral-200 rounded-xl font-medium appearance-none",children:[e.jsx("option",{value:"Kid",children:"Kid"}),e.jsx("option",{value:"Adult",children:"Adult"})]})]})]})]}),e.jsxs("button",{onClick:d,className:"w-full py-4 bg-neutral-900 text-white rounded-2xl font-black text-xs hover:bg-neutral-800 transition-all flex items-center justify-center space-x-2",children:[e.jsx(pe,{size:16})," ",e.jsx("span",{children:"SAVE PROFILE"})]}),e.jsx(et,{isOpen:u,onClose:()=>b(!1),onSelectAvatar:l,currentUser:m})]})},Be=({label:t,langCode:c,currentVoice:l,serverData:d,onChange:u,onPreview:b,filterHighQuality:s})=>{if(!d)return e.jsxs("div",{className:"space-y-1 opacity-50",children:[e.jsx("label",{className:"text-[10px] font-black text-neutral-400 uppercase tracking-widest px-1",children:t}),e.jsx("div",{className:"w-full bg-neutral-100 border border-neutral-200 rounded-xl px-4 py-2 text-xs font-bold text-neutral-400",children:"Server Offline"})]});const m=d.voices.filter(w=>w.language===c||w.language.toLowerCase().startsWith(c)?s?w.name.includes("Enhanced")||w.name.includes("Premium"):!0:!1),v=m.reduce((w,x)=>{const p=x.accent||"Standard";return w[p]||(w[p]=[]),w[p].push(x),w},{}),P=w=>{const x=w.target.value;if(!x){const S=c==="en"?"en_US":"vi_VN";u("",S),b("",S);return}const p=d.voices.find(S=>S.name===x);p&&(u(p.name,p.accent),setTimeout(()=>b(p.name,p.accent),100))};return e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"flex justify-between items-center px-1",children:[e.jsx("label",{className:"text-[10px] font-black text-neutral-400 uppercase tracking-widest",children:t}),e.jsxs("button",{type:"button",onClick:()=>b(l,c==="en"?"en_US":"vi_VN"),className:"text-[10px] font-black text-indigo-600 uppercase tracking-widest flex items-center gap-1 hover:underline",children:[e.jsx(Te,{size:10,fill:"currentColor"})," Test"]})]}),e.jsxs("div",{className:"relative",children:[e.jsxs("select",{value:l,onChange:P,className:"w-full appearance-none bg-white border border-neutral-200 rounded-xl px-4 py-3 pr-10 text-xs font-bold focus:ring-2 focus:ring-neutral-900 outline-none transition-all",children:[e.jsx("option",{value:"",children:"Default System Voice"}),Object.entries(v).map(([w,x])=>e.jsx("optgroup",{label:w.replace(/[_]/g," ").toUpperCase(),children:x.map(p=>e.jsx("option",{value:p.name,children:p.name},p.name))},w)),m.length===0&&e.jsxs("option",{disabled:!0,children:["No ",s?"high quality ":"","voices found"]})]}),e.jsx(Pe,{size:16,className:"absolute right-4 top-1/2 -translate-y-1/2 text-neutral-400 pointer-events-none"})]})]})},hs=({config:t,onConfigChange:c,onSaveSettings:l})=>{const[d,u]=n.useState(null),[b,s]=n.useState(!1),[m,v]=n.useState(!1),{showToast:P}=oe(),w=Le(t),x=t.audioCoach.activeCoach,p=t.audioCoach.coaches[x],S=async()=>{ht();const j=await mt(w);u(j||null)};n.useEffect(()=>{S()},[w]);const C=(j,y=!1)=>{const k={...t.audioCoach.coaches};if(k[x]={...k[x],...j},c("audioCoach","coaches",k),y){const z={...t,audioCoach:{...t.audioCoach,coaches:k}};Se(z),P("Settings saved automatically.","success",1e3)}},A=j=>{c("interface","buddyVoiceEnabled",j);const y={...t,interface:{...t.interface,buddyVoiceEnabled:j}};Se(y)},T=(j,y,k)=>{gt(j==="en"?"Hello! I am your study companion. Ready to learn?":"Xin chào! Mình là bạn đồng hành của bạn. Sẵn sàng chưa?",!0,j,y,k)},R={id:"coach-setup",name:p.name,avatar:p.avatar,level:999,peakLevel:999,experience:0,lastLogin:0,adventure:{}};return e.jsxs("section",{className:"bg-white p-8 rounded-[2.5rem] border border-neutral-200 shadow-sm flex flex-col space-y-8 animate-in fade-in duration-300",children:[e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:"p-3 bg-neutral-100 text-neutral-600 rounded-2xl",children:e.jsx($e,{size:24})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-black text-neutral-900",children:"Audio Coach"}),e.jsx("p",{className:"text-xs text-neutral-400",children:"Customize your AI study companion."})]})]}),e.jsxs("button",{onClick:l,className:"px-5 py-2.5 bg-neutral-900 text-white rounded-xl font-black text-[10px] flex items-center space-x-2 active:scale-95 uppercase tracking-widest hover:bg-neutral-800 transition-all shadow-md",children:[e.jsx(pe,{size:14}),e.jsx("span",{children:"Save"})]})]}),e.jsx("div",{className:"space-y-4 pt-4 border-t border-neutral-100",children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center gap-2 text-[10px] font-black text-neutral-400 uppercase tracking-widest px-1",children:[e.jsx(We,{size:12})," Interaction"]}),e.jsxs("label",{onClick:()=>A(!t.interface.buddyVoiceEnabled),className:"flex items-center justify-between px-4 py-4 bg-white border border-neutral-200 rounded-2xl cursor-pointer hover:bg-neutral-50 transition-all shadow-sm group",children:[e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"text-sm font-black text-neutral-900",children:"Enable Dialogue"}),e.jsx("span",{className:"text-xs text-neutral-500 font-medium mt-0.5",children:"Read advice, tips, and greetings aloud"})]}),e.jsx("div",{className:`w-11 h-6 rounded-full transition-all flex items-center p-1 ${t.interface.buddyVoiceEnabled?"bg-indigo-600":"bg-neutral-200"}`,children:e.jsx("div",{className:`w-4 h-4 bg-white rounded-full shadow-md transition-transform duration-300 ${t.interface.buddyVoiceEnabled?"translate-x-5":"translate-x-0"}`})})]})]})}),e.jsxs("div",{className:"space-y-6 pt-4 border-t border-neutral-100",children:[e.jsx("div",{className:"flex items-center justify-between px-1",children:e.jsxs("label",{className:"text-[10px] font-black text-neutral-400 uppercase tracking-widest flex items-center gap-2",children:[e.jsx(Ee,{size:12})," Coach Identity"]})}),e.jsxs("div",{className:"flex flex-col md:flex-row gap-6",children:[e.jsx("div",{className:"shrink-0 flex justify-center md:justify-start",children:e.jsxs("div",{className:"relative group w-24 h-24",children:[e.jsxs("div",{className:"w-full h-full rounded-[2rem] bg-neutral-100 border-2 border-neutral-200 p-2 overflow-hidden shadow-sm relative",children:[e.jsx("img",{src:p.avatar,className:"w-full h-full object-contain",alt:"Coach Avatar"}),e.jsx("div",{onClick:()=>s(!0),className:"absolute inset-0 bg-black/10 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity cursor-pointer z-10",children:e.jsx("div",{className:"bg-white p-2 rounded-xl shadow-sm",children:e.jsx(Ce,{size:16,className:"text-neutral-900"})})})]}),e.jsx("button",{onClick:()=>s(!0),className:"absolute bottom-0 right-0 translate-x-1 translate-y-1 p-1.5 bg-neutral-900 text-white rounded-lg shadow-md hover:scale-110 transition-transform group-hover:opacity-0",title:"Change Avatar",children:e.jsx(Ce,{size:10})})]})}),e.jsxs("div",{className:"flex-1 space-y-4",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx("label",{className:"text-[10px] font-bold text-neutral-400 uppercase tracking-wider px-1",children:"Name"}),e.jsx("input",{type:"text",value:p.name,onChange:j=>C({name:j.target.value}),onBlur:()=>C({},!0),placeholder:"Coach Name",className:"w-full px-4 py-3 bg-neutral-50 border border-neutral-200 rounded-xl text-sm font-bold focus:ring-2 focus:ring-neutral-900 outline-none transition-all"})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("label",{className:"text-[10px] font-bold text-neutral-400 uppercase tracking-wider px-1",children:"Persona Style"}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("button",{type:"button",onClick:()=>C({persona:"friendly_elementary"},!0),className:`flex flex-col items-center justify-center gap-2 px-4 py-3 rounded-xl border-2 transition-all ${p.persona==="friendly_elementary"?"bg-amber-50 border-amber-200 text-amber-700":"bg-white border-neutral-100 text-neutral-400 hover:border-neutral-200"}`,children:[e.jsx(is,{size:18}),e.jsx("span",{className:"text-[10px] font-black uppercase",children:"Teacher"})]}),e.jsxs("button",{type:"button",onClick:()=>C({persona:"professional_professor"},!0),className:`flex flex-col items-center justify-center gap-2 px-4 py-3 rounded-xl border-2 transition-all ${p.persona==="professional_professor"?"bg-indigo-50 border-indigo-200 text-indigo-700":"bg-white border-neutral-100 text-neutral-400 hover:border-neutral-200"}`,children:[e.jsx(Je,{size:18}),e.jsx("span",{className:"text-[10px] font-black uppercase",children:"Professor"})]})]})]})]})]})]}),e.jsxs("div",{className:"space-y-6 pt-4 border-t border-neutral-100",children:[e.jsxs("div",{className:"flex items-center justify-between px-1",children:[e.jsxs("div",{className:"flex items-center gap-2 text-[10px] font-black text-neutral-400 uppercase tracking-widest",children:[e.jsx(Ge,{size:12})," Voice Settings"]}),e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer group select-none",children:[e.jsx("div",{className:`w-4 h-4 rounded border flex items-center justify-center transition-colors ${m?"bg-indigo-600 border-indigo-600":"bg-white border-neutral-300 group-hover:border-indigo-400"}`,children:m&&e.jsx(qt,{size:10,className:"text-white",fill:"currentColor"})}),e.jsx("input",{type:"checkbox",className:"hidden",checked:m,onChange:j=>v(j.target.checked)}),e.jsx("span",{className:`text-[10px] font-bold transition-colors ${m?"text-indigo-700":"text-neutral-500"}`,children:"Only High Quality"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsx(Be,{label:"English Voice",langCode:"en",currentVoice:p.enVoice,serverData:d,onChange:(j,y)=>C({enVoice:j,enAccent:y},!0),onPreview:(j,y)=>T("en",j,y),filterHighQuality:m}),e.jsx(Be,{label:"Vietnamese Voice",langCode:"vi",currentVoice:p.viVoice,serverData:d,onChange:(j,y)=>C({viVoice:j,viAccent:y},!0),onPreview:(j,y)=>T("vi",j,y),filterHighQuality:m})]})]}),e.jsxs("div",{className:"p-4 bg-neutral-50 rounded-2xl border border-neutral-200 flex items-start gap-3",children:[e.jsx(Ke,{size:16,className:"text-neutral-400 mt-0.5 shrink-0"}),e.jsx("p",{className:"text-[10px] text-neutral-500 leading-relaxed font-medium",children:"Pronunciation practice uses your browser's built-in recognition engine for maximum compatibility and privacy. The selected voices above are used for reading text aloud."})]}),e.jsx(et,{isOpen:b,onClose:()=>s(!1),onSelectAvatar:j=>C({avatar:j},!0),currentUser:R})]})},ms=({audioBlob:t,onTrim:c,onCancel:l})=>{const d=n.useRef(null),[u,b]=n.useState(null),[s,m]=n.useState(null),[v,P]=n.useState(0),[w,x]=n.useState(1),[p,S]=n.useState(!1),C=n.useRef(null);n.useRef(0),n.useEffect(()=>((async()=>{const k=new(window.AudioContext||window.webkitAudioContext),z=await t.arrayBuffer(),L=await k.decodeAudioData(z);b(k),m(L),A(L,0,1)})(),()=>{u&&u.close()}),[t]);const A=(y,k,z)=>{const L=d.current;if(!L)return;const o=L.getContext("2d");if(!o)return;const g=L.width,h=L.height;o.clearRect(0,0,g,h);const M=y.getChannelData(0),B=Math.ceil(M.length/g),_=h/2;o.fillStyle="#e5e7eb",o.fillRect(0,0,g,h),o.fillStyle="#6366f1",o.beginPath();for(let U=0;U<g;U++){let V=1,r=-1;for(let I=0;I<B;I++){const F=M[U*B+I];F<V&&(V=F),F>r&&(r=F)}o.fillRect(U,(1+V)*_,1,Math.max(1,(r-V)*_))}o.fillStyle="rgba(0, 0, 0, 0.4)";const H=k*g,$=z*g;o.fillRect(0,0,H,h),o.fillRect($,0,g-$,h),o.fillStyle="#ef4444",o.fillRect(H-2,0,4,h),o.fillRect($-2,0,4,h)};n.useEffect(()=>{s&&A(s,v,w)},[v,w,s]);const T=()=>{var g;if(!u||!s)return;if(p){(g=C.current)==null||g.stop(),S(!1);return}const y=s.duration,k=y*v,L=y*w-k,o=u.createBufferSource();o.buffer=s,o.connect(u.destination),o.start(0,k,L),o.onended=()=>S(!1),C.current=o,S(!0)},R=async()=>{if(!u||!s)return;const{bufferToWav:y}=await ft(async()=>{const{bufferToWav:h}=await import("./index-CMQqxrid.js").then(M=>M.cl);return{bufferToWav:h}},[]);s.duration;const k=Math.floor(v*s.length),z=Math.floor(w*s.length),L=z-k,o=u.createBuffer(s.numberOfChannels,L,s.sampleRate);for(let h=0;h<s.numberOfChannels;h++){const M=s.getChannelData(h);o.getChannelData(h).set(M.subarray(k,z))}const g=y(o);c(g)},j=y=>{const k=d.current;if(!k)return;const z=k.getBoundingClientRect(),L=y.clientX-z.left,o=Math.max(0,Math.min(1,L/z.width)),g=Math.abs(o-v),h=Math.abs(o-w),M=g<h,B=H=>{const $=H.clientX-z.left,U=Math.max(0,Math.min(1,$/z.width));M?P(Math.min(U,w-.05)):x(Math.max(U,v+.05))},_=()=>{window.removeEventListener("mousemove",B),window.removeEventListener("mouseup",_)};window.addEventListener("mousemove",B),window.addEventListener("mouseup",_)};return e.jsxs("div",{className:"flex flex-col gap-4 p-4 bg-white rounded-2xl border border-neutral-200",children:[e.jsx("div",{className:"relative h-24 bg-neutral-100 rounded-xl overflow-hidden cursor-pointer",onMouseDown:j,children:e.jsx("canvas",{ref:d,width:600,height:100,className:"w-full h-full"})}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("button",{onClick:T,className:"flex items-center gap-2 px-4 py-2 bg-neutral-900 text-white rounded-xl text-xs font-bold uppercase tracking-wider hover:bg-neutral-800 transition-all",children:[p?e.jsx(tt,{size:14}):e.jsx(Te,{size:14}),p?"Stop":"Preview"]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:l,className:"px-4 py-2 text-neutral-500 hover:text-neutral-900 font-bold text-xs",children:"Cancel"}),e.jsxs("button",{onClick:R,className:"flex items-center gap-2 px-4 py-2 bg-indigo-600 text-white rounded-xl text-xs font-bold uppercase tracking-wider hover:bg-indigo-500 transition-all",children:[e.jsx(cs,{size:14})," Trim & Use"]})]})]}),e.jsx("p",{className:"text-[10px] text-neutral-400 text-center",children:"Drag the red bars to trim audio."})]})},gs=()=>{const t=Ae(),c=Le(t),{showToast:l}=oe(),[d,u]=n.useState({}),[b,s]=n.useState(""),[m,v]=n.useState(""),[P,w]=n.useState(!1),[x,p]=n.useState(!1),[S,C]=n.useState(null),[A,T]=n.useState(null),[R,j]=n.useState(""),[y,k]=n.useState(""),[z,L]=n.useState(!1),[o,g]=n.useState(null),[h,M]=n.useState(""),[B,_]=n.useState([]),[H,$]=n.useState(!1),[U,V]=n.useState(null),r=n.useRef(null),[I,F]=n.useState(!1),se=n.useRef(null),Z=async()=>{w(!0);try{const a=await fetch(`${c}/api/audio/mappings`);a.ok&&u(await a.json())}catch(a){console.error("Failed to fetch mappings",a)}finally{w(!1)}};n.useEffect(()=>{Z()},[c]),n.useEffect(()=>()=>{r.current&&(r.current.pause(),r.current=null)},[]);const G=async(a,f="")=>{$(!0),_([]);try{const E=encodeURIComponent(f),X=await fetch(`${c}/api/audio/files/${a}?path=${E}`);if(X.ok){const te=await X.json();_(te.items),M(te.currentPath)}else l("Failed to load files","error")}catch{l("Connection error","error")}finally{$(!1)}},me=a=>{g(a),j(a),M(""),G(a,"")},ge=a=>{if(!o)return;const f=h?`${h}/${a}`:a;G(o,f)},ie=()=>{if(!o||!h)return;const a=h.split("/");a.pop();const f=a.join("/");G(o,f)},fe=async()=>{if(!(!b||!m))try{const f=await(await fetch(`${c}/api/audio/mappings`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:b,path:m})})).json();f.success?(u(f.mappings),s(""),v(""),l("Mapping added!","success")):l(f.error||"Failed to add mapping","error")}catch{l("Connection error","error")}},ce=async a=>{try{const E=await(await fetch(`${c}/api/audio/mappings/${encodeURIComponent(a)}`,{method:"DELETE"})).json();E.success&&(u(E.mappings),o===a&&(g(null),_([]),M("")))}catch{l("Failed to delete","error")}},W=async()=>{await vt(),p(!0),C(null),T(null)},re=async()=>{const a=await jt();if(p(!1),a){const f=atob(a.base64),E=new Array(f.length);for(let ae=0;ae<f.length;ae++)E[ae]=f.charCodeAt(ae);const X=new Uint8Array(E),te=new Blob([X],{type:a.mimeType});C(te),T(te)}},ee=a=>{var E;const f=(E=a.target.files)==null?void 0:E[0];f&&(C(f),T(f),k(f.name))},be=async()=>{if(!A||!R||!y){l("Please select audio, target folder, and filename.","error");return}L(!0);const a=new FormData;a.append("mapName",R),a.append("filename",y),a.append("audio",A,y);try{const E=await(await fetch(`${c}/api/audio/upload`,{method:"POST",body:a})).json();E.success?(l("Audio uploaded successfully!","success"),C(null),T(null),k(""),o===R&&G(R,h)):l(E.error||"Upload failed","error")}catch{l("Upload error","error")}finally{L(!1)}},de=a=>{if(!o)return"";const f=h?`${h}/${a}`:a;return`${c}/api/audio/stream/${o}/${f}`},je=a=>{const f=de(a);f&&(bt(f),l("Audio URL copied to clipboard!","success"))},ve=a=>{var X;const f=de(a);if(!f)return;if(U===f&&I){(X=r.current)==null||X.pause(),F(!1);return}r.current&&r.current.pause();const E=new Audio(f);r.current=E,V(f),E.play().then(()=>F(!0)).catch(()=>{l("Failed to play audio","error"),F(!1)}),E.onended=()=>F(!1),E.onerror=()=>{F(!1),V(null)}};return e.jsxs("section",{className:"bg-white p-8 rounded-[2.5rem] border border-neutral-200 shadow-sm flex flex-col space-y-8",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:"p-3 bg-neutral-100 text-neutral-600 rounded-2xl",children:e.jsx(We,{size:24})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-black text-neutral-900",children:"Audio Server"}),e.jsx("p",{className:"text-xs text-neutral-400",children:"Map local folders and manage audio assets."})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h4",{className:"text-[10px] font-black uppercase text-neutral-400 tracking-widest px-1",children:"Directory Mappings"}),e.jsxs("div",{className:"bg-neutral-50 rounded-2xl border border-neutral-200 overflow-hidden",children:[Object.entries(d).length===0?e.jsx("div",{className:"p-6 text-center text-xs text-neutral-400",children:"No mappings configured."}):e.jsx("div",{className:"divide-y divide-neutral-200",children:Object.entries(d).map(([a,f])=>e.jsxs("div",{className:"p-4 flex items-center justify-between hover:bg-white transition-colors group",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(He,{size:14,className:"text-indigo-500"}),e.jsx("span",{className:"font-bold text-sm text-neutral-800",children:a})]}),e.jsx("div",{className:"text-[10px] text-neutral-500 font-mono mt-1 ml-6",children:f})]}),e.jsxs("div",{className:"flex items-center gap-2 opacity-0 group-hover:opacity-100 transition-opacity",children:[e.jsxs("button",{onClick:()=>me(a),className:"px-3 py-1.5 bg-indigo-50 text-indigo-600 rounded-lg text-[10px] font-bold uppercase tracking-wider hover:bg-indigo-100 transition-colors flex items-center gap-1.5",children:[e.jsx(he,{size:12})," Browse"]}),e.jsx("button",{onClick:()=>ce(a),className:"p-2 text-neutral-400 hover:text-red-500 hover:bg-red-50 rounded-lg transition-all",children:e.jsx(qe,{size:14})})]})]},a))}),e.jsxs("div",{className:"p-4 bg-white border-t border-neutral-200 flex flex-col md:flex-row gap-3",children:[e.jsx("input",{value:b,onChange:a=>s(a.target.value),placeholder:"Logical Name (e.g. 'Cam15')",className:"flex-1 px-3 py-2 bg-neutral-50 border border-neutral-200 rounded-xl text-xs font-bold outline-none focus:border-indigo-500"}),e.jsx("input",{value:m,onChange:a=>v(a.target.value),placeholder:"Physical Path (e.g. ~/Music/Cam15)",className:"flex-[2] px-3 py-2 bg-neutral-50 border border-neutral-200 rounded-xl text-xs font-medium outline-none focus:border-indigo-500"}),e.jsxs("button",{onClick:fe,disabled:!b||!m,className:"px-4 py-2 bg-neutral-900 text-white rounded-xl font-bold text-xs flex items-center gap-2 hover:bg-neutral-800 disabled:opacity-50",children:[e.jsx(Xe,{size:14})," Add"]})]})]})]}),e.jsxs("div",{className:"space-y-4 pt-4 border-t border-neutral-100",children:[e.jsxs("div",{className:"flex justify-between items-center px-1",children:[e.jsx("h4",{className:"text-[10px] font-black uppercase text-neutral-400 tracking-widest",children:"File Browser"}),o&&e.jsx("button",{onClick:()=>G(o,h),className:"text-neutral-400 hover:text-neutral-900 transition-colors p-1",title:"Refresh List",children:e.jsx(Ye,{size:12,className:H?"animate-spin":""})})]}),e.jsxs("div",{className:"bg-neutral-50 rounded-2xl border border-neutral-200 overflow-hidden flex flex-col min-h-[300px]",children:[e.jsxs("div",{className:"p-3 border-b border-neutral-200 bg-white space-y-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("select",{value:o||"",onChange:a=>me(a.target.value),className:"px-3 py-2 bg-neutral-50 border border-neutral-200 rounded-xl text-xs font-bold text-neutral-700 outline-none focus:ring-2 focus:ring-neutral-900",children:[e.jsx("option",{value:"",disabled:!0,children:"Select Mapping..."}),Object.keys(d).map(a=>e.jsx("option",{value:a,children:a},a))]}),e.jsx("div",{className:"flex-1 flex items-center gap-1 overflow-hidden",children:h&&e.jsxs(e.Fragment,{children:[e.jsx(Ue,{size:14,className:"text-neutral-300 shrink-0"}),e.jsx("span",{className:"text-xs font-mono text-neutral-500 truncate",title:h,children:h})]})})]}),h&&e.jsxs("button",{onClick:ie,className:"flex items-center gap-1.5 px-3 py-1.5 bg-neutral-100 text-neutral-600 rounded-lg text-[10px] font-bold hover:bg-neutral-200 transition-colors w-fit",children:[e.jsx(Yt,{size:12})," Up One Level"]})]}),e.jsx("div",{className:"flex-1 overflow-y-auto max-h-[400px] p-2 custom-scrollbar",children:o?H?e.jsxs("div",{className:"h-full flex flex-col items-center justify-center text-neutral-400 space-y-2 py-10",children:[e.jsx(ne,{size:24,className:"animate-spin"}),e.jsx("p",{className:"text-[10px] font-bold uppercase tracking-wider",children:"Loading..."})]}):B.length===0?e.jsxs("div",{className:"h-full flex flex-col items-center justify-center text-neutral-400 space-y-2 py-10",children:[e.jsx(Qt,{size:32,className:"opacity-20"}),e.jsx("p",{className:"text-xs font-medium",children:"Empty folder."})]}):e.jsx("div",{className:"grid grid-cols-1 gap-1",children:B.map((a,f)=>{if(a.type==="directory")return e.jsxs("div",{onClick:()=>ge(a.name),className:"flex items-center justify-between p-2 rounded-lg hover:bg-white hover:shadow-sm border border-transparent hover:border-neutral-100 transition-all cursor-pointer group",children:[e.jsxs("div",{className:"flex items-center gap-3 min-w-0",children:[e.jsx("div",{className:"p-2 rounded-full bg-blue-50 text-blue-500",children:e.jsx(He,{size:14,fill:"currentColor"})}),e.jsx("span",{className:"text-xs font-bold text-neutral-700 truncate",children:a.name})]}),e.jsx(Ue,{size:14,className:"text-neutral-300 group-hover:text-neutral-500"})]},`${a.name}-${f}`);{const E=U==null?void 0:U.endsWith(`/${encodeURIComponent(a.name)}`);return e.jsxs("div",{className:"flex items-center justify-between p-2 rounded-lg hover:bg-white hover:shadow-sm border border-transparent hover:border-neutral-100 transition-all group",children:[e.jsxs("div",{className:"flex items-center gap-3 min-w-0",children:[e.jsx("button",{onClick:()=>ve(a.name),className:`p-2 rounded-full transition-colors ${E&&I?"bg-indigo-100 text-indigo-600":"bg-neutral-100 text-neutral-500 hover:bg-neutral-200 hover:text-neutral-900"}`,children:E&&I?e.jsx(tt,{size:12,fill:"currentColor"}):e.jsx(Te,{size:12,fill:"currentColor"})}),e.jsx("span",{className:`text-xs font-medium truncate ${E?"text-indigo-700 font-bold":"text-neutral-700"}`,children:a.name})]}),e.jsxs("button",{onClick:()=>je(a.name),className:"flex items-center gap-1.5 px-2 py-1.5 text-[10px] font-bold text-neutral-400 hover:text-indigo-600 hover:bg-indigo-50 rounded-md transition-colors opacity-0 group-hover:opacity-100",title:"Copy Stream URL",children:[e.jsx(ls,{size:12})," ",e.jsx("span",{className:"hidden sm:inline",children:"Link"})]})]},`${a.name}-${f}`)}})}):e.jsxs("div",{className:"h-full flex flex-col items-center justify-center text-neutral-400 space-y-2 py-10",children:[e.jsx(he,{size:32,className:"opacity-20"}),e.jsx("p",{className:"text-xs font-medium",children:"Select a map to view audio files."})]})})]})]}),e.jsxs("div",{className:"space-y-4 pt-4 border-t border-neutral-100",children:[e.jsx("h4",{className:"text-[10px] font-black uppercase text-neutral-400 tracking-widest px-1",children:"Audio Tool"}),S?e.jsxs("div",{className:"space-y-6",children:[e.jsx(ms,{audioBlob:S,onTrim:a=>{T(a),l("Trimmed!","success")},onCancel:()=>{C(null),T(null)}}),e.jsxs("div",{className:"p-6 bg-neutral-50 rounded-[2rem] border border-neutral-200 space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx("label",{className:"text-[10px] font-black uppercase text-neutral-400 px-1",children:"Target Folder"}),e.jsxs("select",{value:R,onChange:a=>j(a.target.value),className:"w-full px-4 py-3 rounded-xl border border-neutral-200 text-xs font-bold bg-white focus:ring-2 focus:ring-neutral-900 outline-none",children:[e.jsx("option",{value:"",children:"Select Mapping..."}),Object.keys(d).map(a=>e.jsx("option",{value:a,children:a},a))]})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("label",{className:"text-[10px] font-black uppercase text-neutral-400 px-1",children:"Filename"}),e.jsx("input",{value:y,onChange:a=>k(a.target.value),placeholder:"track_01.wav",className:"w-full px-4 py-3 rounded-xl border border-neutral-200 text-xs font-bold bg-white focus:ring-2 focus:ring-neutral-900 outline-none"})]})]}),e.jsxs("button",{onClick:be,disabled:z||!R||!y,className:"w-full py-4 bg-neutral-900 text-white rounded-xl font-black text-sm uppercase tracking-widest hover:bg-neutral-800 disabled:opacity-50 transition-all flex items-center justify-center gap-2",children:[z?e.jsx(ne,{size:18,className:"animate-spin"}):e.jsx(Ie,{size:18}),e.jsx("span",{children:"Upload to Server"})]})]})]}):e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("button",{onClick:x?re:W,className:`p-8 rounded-3xl border-2 border-dashed flex flex-col items-center justify-center gap-3 transition-all ${x?"bg-red-50 border-red-400 text-red-600 animate-pulse":"bg-neutral-50 border-neutral-200 text-neutral-500 hover:bg-white hover:border-indigo-400 hover:text-indigo-600"}`,children:[e.jsx(Ge,{size:32}),e.jsx("span",{className:"font-bold text-sm",children:x?"Stop Recording":"Record Voice"})]}),e.jsxs("button",{onClick:()=>{var a;return(a=se.current)==null?void 0:a.click()},className:"p-8 rounded-3xl border-2 border-dashed bg-neutral-50 border-neutral-200 text-neutral-500 flex flex-col items-center justify-center gap-3 transition-all hover:bg-white hover:border-indigo-400 hover:text-indigo-600",children:[e.jsx(Ie,{size:32}),e.jsx("span",{className:"font-bold text-sm",children:"Upload File"}),e.jsx("input",{type:"file",ref:se,className:"hidden",accept:"audio/*",onChange:ee})]})]})]})]})},fs=({junkTags:t,onJunkTagsChange:c})=>{const[l,d]=n.useState(""),u=()=>{const s=l.trim().toLowerCase();s&&!t.includes(s)&&c([...t,s].sort()),d("")},b=s=>{c(t.filter(m=>m!==s))};return e.jsxs("div",{className:"space-y-4 pt-4 border-t border-neutral-100",children:[e.jsxs("div",{className:"flex items-center gap-2 text-[10px] font-black text-neutral-400 uppercase tracking-widest px-1",children:[e.jsx(wt,{size:12})," Junk Tag List"]}),e.jsxs("div",{className:"p-4 bg-neutral-50 rounded-2xl border border-neutral-100 space-y-3",children:[e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{value:l,onChange:s=>d(s.target.value),onKeyDown:s=>{s.key==="Enter"&&(s.preventDefault(),u())},placeholder:"Add a tag to remove...",className:"flex-1 px-3 py-2 bg-white border border-neutral-200 rounded-lg text-xs font-bold"}),e.jsx("button",{onClick:u,className:"p-2.5 bg-neutral-900 text-white rounded-lg flex items-center justify-center",children:e.jsx(Xe,{size:14})})]}),t.length>0?e.jsx("div",{className:"flex flex-wrap gap-2",children:t.map(s=>e.jsxs("div",{className:"flex items-center gap-1 bg-white pl-3 pr-1 py-1 rounded-full border border-neutral-200 text-xs font-bold text-neutral-700",children:[e.jsx("span",{children:s}),e.jsx("button",{onClick:()=>b(s),className:"p-1 text-neutral-400 hover:text-red-500 hover:bg-red-50 rounded-full",children:e.jsx(qe,{size:12})})]},s))}):e.jsx("p",{className:"text-center text-xs text-neutral-400 py-2",children:"No junk tags defined."})]})]})},K=({checked:t,onChange:c,label:l,icon:d})=>e.jsxs("button",{onClick:c,className:`flex items-center gap-2 px-3 py-2 rounded-lg border transition-all ${t?"bg-indigo-50 border-indigo-200 text-indigo-800":"bg-white border-neutral-200 text-neutral-500 hover:bg-neutral-50"}`,children:[d&&e.jsx(d,{size:14}),t?e.jsx(Nt,{size:14}):e.jsx(ns,{size:14}),e.jsx("span",{className:"text-xs font-bold uppercase",children:l})]}),bs=t=>{const{jsonInputRef:c,dataScope:l,onDataScopeChange:d,onJSONImport:u,onJSONExport:b,isNormalizing:s,onOpenNormalizeModal:m,junkTags:v,onJunkTagsChange:P,normalizeOptions:w,onNormalizeOptionsChange:x}=t,[p,S]=n.useState(!1),{showToast:C}=oe(),A=R=>{d({...l,[R]:!l[R]})},T=async()=>{S(!0);try{await kt();const j=Re().filter(o=>o.quality===Ve.RAW);if(j.length===0){C("No RAW words found to refine.","info"),S(!1);return}const y=j.map(o=>o.word),k=await Ct(y);if(k.length===0){C("No refined data found on server.","info"),S(!1);return}const z=[],L=new Map(k.map(o=>[o.word.toLowerCase().trim(),o]));for(const o of j){const g=L.get(o.word.toLowerCase().trim());if(g){const h={...o,ipa:g.ipa,ipaUs:g.ipaUs,ipaUk:g.ipaUk,meaningVi:g.meaningVi,example:g.example,collocationsArray:g.collocationsArray,idiomsList:g.idiomsList,paraphrases:g.paraphrases,wordFamily:g.wordFamily,prepositions:g.prepositions,isIdiom:g.isIdiom,isCollocation:g.isCollocation,isPhrasalVerb:g.isPhrasalVerb,quality:Ve.REFINED,updatedAt:Date.now()};h.complexity=St(h),h.masteryScore=At(h),h.gameEligibility=Rt(h),z.push(h)}}z.length>0&&(await ze(z),C(`Successfully refined ${z.length} words from server!`,"success"))}catch(R){console.error(R),C("Failed to refine from server.","error")}finally{S(!1)}};return e.jsxs("section",{className:"bg-white p-8 rounded-[2.5rem] border border-neutral-200 shadow-sm flex flex-col space-y-8",children:[e.jsxs("div",{className:"flex items-center space-x-4 mb-2",children:[e.jsx("div",{className:"p-3 bg-indigo-50 text-indigo-600 rounded-2xl",children:e.jsx(yt,{size:24})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-black text-neutral-900",children:"Data Management"}),e.jsx("p",{className:"text-xs text-neutral-400",children:"Backup, restore, and optimize your library."})]})]}),e.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsx("label",{className:"text-[10px] font-black text-neutral-400 uppercase tracking-widest px-1",children:"Manual Backup / Restore"}),e.jsxs("div",{className:"flex flex-wrap gap-2",children:[e.jsx(K,{checked:l.user,onChange:()=>A("user"),label:"User Profile"}),e.jsx(K,{checked:l.vocabulary,onChange:()=>A("vocabulary"),label:"Word Library"}),e.jsx(K,{checked:l.wordBook,onChange:()=>A("wordBook"),label:"Word Books",icon:Zt}),e.jsx(K,{checked:l.lesson,onChange:()=>A("lesson"),label:"Lessons"}),e.jsx(K,{checked:l.reading,onChange:()=>A("reading"),label:"Reading"}),e.jsx(K,{checked:l.writing,onChange:()=>A("writing"),label:"Writing"}),e.jsx(K,{checked:l.speaking,onChange:()=>A("speaking"),label:"Speaking"}),e.jsx(K,{checked:l.listening,onChange:()=>A("listening"),label:"Listening"}),e.jsx(K,{checked:l.mimic,onChange:()=>A("mimic"),label:"Pronunciation Queue",icon:ts}),e.jsx(K,{checked:l.planning,onChange:()=>A("planning"),label:"Planning",icon:ss})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("button",{onClick:()=>{var R;return(R=c.current)==null?void 0:R.click()},className:"py-4 border-2 border-neutral-900 text-neutral-900 rounded-2xl font-black text-xs hover:bg-neutral-50 transition-all flex items-center justify-center space-x-2",children:[e.jsx(Ie,{size:16})," ",e.jsx("span",{children:"IMPORT"}),e.jsx("input",{type:"file",ref:c,className:"hidden",accept:".json",onChange:u})]}),e.jsxs("button",{onClick:b,className:"py-4 bg-neutral-900 text-white rounded-2xl font-black text-xs hover:bg-neutral-800 transition-all flex items-center justify-center space-x-2",children:[e.jsx(as,{size:16})," ",e.jsx("span",{children:"EXPORT"})]})]})]})}),e.jsx(fs,{junkTags:v,onJunkTagsChange:P}),e.jsxs("div",{className:"pt-4 border-t border-neutral-100 grid grid-cols-1 md:grid-cols-2 gap-3",children:[e.jsxs("button",{onClick:m,disabled:s,className:"w-full py-4 bg-white border border-neutral-200 rounded-2xl text-neutral-600 hover:bg-neutral-50 transition-all flex items-center justify-center space-x-3 group",children:[e.jsx("div",{className:"p-2 bg-neutral-100 group-hover:bg-orange-50 rounded-lg transition-colors",children:s?e.jsx(ne,{size:16,className:"animate-spin text-orange-600"}):e.jsx(at,{size:16,className:"text-orange-600"})}),e.jsxs("div",{className:"text-left",children:[e.jsx("div",{className:"text-xs font-black uppercase tracking-widest leading-none",children:"Normalize Data"}),e.jsx("div",{className:"text-[9px] font-bold text-neutral-400 mt-1",children:"Clean junk tags & legacy data"})]})]}),e.jsxs("button",{onClick:T,disabled:p,className:"w-full py-4 bg-white border border-neutral-200 rounded-2xl text-neutral-600 hover:bg-neutral-50 transition-all flex items-center justify-center space-x-3 group",children:[e.jsx("div",{className:"p-2 bg-neutral-100 group-hover:bg-blue-50 rounded-lg transition-colors",children:p?e.jsx(ne,{size:16,className:"animate-spin text-blue-600"}):e.jsx(ue,{size:16,className:"text-blue-600"})}),e.jsxs("div",{className:"text-left",children:[e.jsx("div",{className:"text-xs font-black uppercase tracking-widest leading-none",children:"Refine from Server"}),e.jsx("div",{className:"text-[9px] font-bold text-neutral-400 mt-1",children:"Update RAW words from Cloud"})]})]})]})]})},js=({srsConfig:t,onSrsConfigChange:c,onResetSrsConfig:l,onSaveSettings:d})=>e.jsxs("section",{className:"bg-white p-8 rounded-[2.5rem] border border-neutral-200 shadow-sm flex flex-col space-y-6",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:"p-3 bg-purple-50 text-purple-600 rounded-2xl",children:e.jsx(zt,{size:24})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-black text-neutral-900",children:"Spaced Repetition Algorithm"}),e.jsx("p",{className:"text-xs text-neutral-400",children:"Customize the learning intervals and multipliers."})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-x-6 gap-y-4 pt-4 border-t border-neutral-100",children:[e.jsx("div",{className:"col-span-2 text-[10px] font-black text-neutral-400 uppercase tracking-widest px-1",children:"Initial Intervals"}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-neutral-600 mb-1",children:"New word (Easy)"}),e.jsx("input",{type:"number",step:"1",min:"1",name:"initialEasy",value:t.initialEasy,onChange:c,className:"w-full px-4 py-2 bg-neutral-50 border border-neutral-200 rounded-xl font-bold"}),e.jsx("p",{className:"text-[9px] text-neutral-400 mt-1",children:"Next review in X days."})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-neutral-600 mb-1",children:"New word (Hard)"}),e.jsx("input",{type:"number",step:"1",min:"1",name:"initialHard",value:t.initialHard,onChange:c,className:"w-full px-4 py-2 bg-neutral-50 border border-neutral-200 rounded-xl font-bold"}),e.jsx("p",{className:"text-[9px] text-neutral-400 mt-1",children:"Next review in X days."})]}),e.jsx("div",{className:"col-span-2 text-[10px] font-black text-neutral-400 uppercase tracking-widest px-1 pt-2",children:"Interval Multipliers"}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-neutral-600 mb-1",children:"'Easy' after 'Easy'"}),e.jsx("input",{type:"number",step:"0.1",min:"1",name:"easyEasy",value:t.easyEasy,onChange:c,className:"w-full px-4 py-2 bg-neutral-50 border border-neutral-200 rounded-xl font-bold"}),e.jsx("p",{className:"text-[9px] text-neutral-400 mt-1",children:"Grows interval fastest (e.g., 2.5x)."})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-neutral-600 mb-1",children:"'Easy' after 'Hard'"}),e.jsx("input",{type:"number",step:"0.1",min:"1",name:"hardEasy",value:t.hardEasy,onChange:c,className:"w-full px-4 py-2 bg-neutral-50 border border-neutral-200 rounded-xl font-bold"}),e.jsx("p",{className:"text-[9px] text-neutral-400 mt-1",children:"Helps recover from a 'Hard' rating (e.g., 2.0x)."})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-neutral-600 mb-1",children:"'Hard' after 'Hard'"}),e.jsx("input",{type:"number",step:"0.1",min:"1",name:"hardHard",value:t.hardHard,onChange:c,className:"w-full px-4 py-2 bg-neutral-50 border border-neutral-200 rounded-xl font-bold"}),e.jsx("p",{className:"text-[9px] text-neutral-400 mt-1",children:"Slowly increases interval (e.g., 1.3x)."})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-neutral-600 mb-1",children:"'Hard' after 'Easy' (Penalty)"}),e.jsx("input",{type:"number",step:"0.1",max:"1",name:"easyHardPenalty",value:t.easyHardPenalty,onChange:c,className:"w-full px-4 py-2 bg-neutral-50 border border-neutral-200 rounded-xl font-bold"}),e.jsx("p",{className:"text-[9px] text-neutral-400 mt-1",children:"Reduces interval if you forget (e.g., 0.5x)."})]})]}),e.jsxs("div",{className:"flex gap-3 pt-4 border-t border-neutral-100",children:[e.jsx("button",{onClick:l,type:"button",className:"flex-1 py-3 bg-neutral-100 text-neutral-500 rounded-xl font-bold text-xs uppercase tracking-widest hover:bg-neutral-200 transition-all",children:"Reset Defaults"}),e.jsx("button",{onClick:d,type:"button",className:"flex-1 py-3 bg-neutral-900 text-white rounded-xl font-bold text-xs uppercase tracking-widest hover:bg-neutral-800 transition-all",children:"Save Settings"})]})]}),vs=({goalConfig:t,onGoalConfigChange:c,onSaveSettings:l})=>e.jsxs("section",{className:"bg-white p-8 rounded-[2.5rem] border border-neutral-200 shadow-sm flex flex-col space-y-6",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:"p-3 bg-green-50 text-green-600 rounded-2xl",children:e.jsx(It,{size:24})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-black text-neutral-900",children:"Daily Goals"}),e.jsx("p",{className:"text-xs text-neutral-400",children:"Set your daily learning and review targets."})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-x-6 gap-y-4 pt-4 border-t border-neutral-100",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-neutral-600 mb-1",children:"Max New Words per Day"}),e.jsx("input",{type:"number",step:"1",min:"1",name:"max_learn_per_day",value:t.max_learn_per_day,onChange:c,className:"w-full px-4 py-2 bg-neutral-50 border border-neutral-200 rounded-xl font-bold"}),e.jsx("p",{className:"text-[9px] text-neutral-400 mt-1",children:"Target for learning new vocabulary."})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-neutral-600 mb-1",children:"Max Reviews per Day"}),e.jsx("input",{type:"number",step:"1",min:"1",name:"max_review_per_day",value:t.max_review_per_day,onChange:c,className:"w-full px-4 py-2 bg-neutral-50 border border-neutral-200 rounded-xl font-bold"}),e.jsx("p",{className:"text-[9px] text-neutral-400 mt-1",children:"Target for reviewing existing vocabulary."})]})]}),e.jsx("div",{className:"flex justify-end pt-4 border-t border-neutral-100",children:e.jsx("button",{onClick:l,className:"w-full md:w-auto py-3 px-6 bg-neutral-900 text-white rounded-2xl font-black text-xs hover:bg-neutral-800 transition-all flex items-center justify-center space-x-2",children:e.jsx("span",{children:"SAVE GOALS"})})})]}),ys=({onOpenClearProgressModal:t,onOpenNukeModal:c,isAdmin:l,onToggleAdmin:d})=>e.jsxs("section",{className:"bg-red-50 p-8 rounded-[2.5rem] border-2 border-red-100 shadow-sm flex flex-col space-y-6",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:"p-3 bg-red-100 text-red-600 rounded-2xl",children:e.jsx(Me,{size:24})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-black text-red-900",children:"Danger Zone"}),e.jsx("p",{className:"text-xs text-red-500",children:"Actions in this zone are irreversible."})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("button",{onClick:d,className:`p-4 border-2 rounded-2xl text-left transition-colors group ${l?"bg-neutral-900 border-neutral-900":"bg-white border-red-100 hover:border-red-500"}`,children:[e.jsxs("div",{className:`font-black flex items-center gap-2 ${l?"text-white":"text-red-600"}`,children:[e.jsx(Xt,{size:16}),l?"Disable Developer Mode":"Enable Developer Mode"]}),e.jsx("div",{className:`text-xs mt-1 ${l?"text-neutral-400":"text-neutral-500"}`,children:l?"Admin tools enabled in Discover.":"Unlocks cheat tools for testing."})]}),e.jsx("div",{className:"hidden md:block"})," ",e.jsxs("button",{onClick:t,className:"p-4 bg-white border-2 border-red-100 rounded-2xl text-left hover:border-red-500 transition-colors group",children:[e.jsx("div",{className:"font-black text-red-600",children:"Clear All Progress"}),e.jsx("div",{className:"text-xs text-neutral-500 mt-1",children:"Reset all SRS data, but keep your words."})]}),e.jsxs("button",{onClick:c,className:"p-4 bg-white border-2 border-red-100 rounded-2xl text-left hover:border-red-500 transition-colors group",children:[e.jsx("div",{className:"font-black text-red-600",children:"Reset Full Library"}),e.jsx("div",{className:"text-xs text-neutral-500 mt-1",children:"Delete ALL your data and restore the app to its initial state."})]})]})]}),Ns=["localhost","macm2.local","macm4.local"],ws=({config:t,onConfigChange:c,onSaveSettings:l})=>{const[d,u]=n.useState("checking"),[b,s]=n.useState("idle"),[m,v]=n.useState(!1),[P,w]=n.useState(""),[x,p]=n.useState(!1),[S,C]=n.useState(""),[A,T]=n.useState([]),[R,j]=n.useState(!1),[y,k]=n.useState(!1),[z,L]=n.useState(null),{showToast:o}=oe(),g=Le(t),h=async()=>{u("checking");try{const r=await fetch(`${g}/api/health`);if(r.ok){const I=await r.json();u("connected"),v(!1),I.backupDir&&w(I.backupDir);const F=await Dt();T(F)}else u("error"),v(!0),T([])}catch{u("error"),v(!0),T([])}};n.useEffect(()=>{h()},[g]),n.useEffect(()=>{d==="connected"&&!t.sync.autoBackupEnabled&&c("sync","autoBackupEnabled",!0)},[d]),n.useEffect(()=>{x&&C(P||t.server.backupPath)},[x,P,t.server.backupPath]);const M=r=>{c("server",null,{...t.server,...r})},B=r=>{M({useCustomUrl:r.target.checked})},_=()=>{C("~/Library/Mobile Documents/com~apple~CloudDocs/VocabPro")},H=async()=>{if(S.trim()){s("updating");try{const r=await fetch(`${g}/api/config/backup-path`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({path:S})}),I=await r.json();if(r.ok)s("success"),M({backupPath:S}),w(I.path||S),p(!1),setTimeout(()=>s("idle"),3e3);else throw new Error(I.error||"Server rejected path")}catch(r){s("error"),o(r.message,"error"),setTimeout(()=>s("idle"),3e3)}}},$=async r=>{k(!0),window.isRestoring=!0;try{const I=await Ot(r);I&&I.type==="success"?(o("Data restored successfully! Reloading...","success"),I.updatedUser&&(localStorage.setItem("vocab_pro_current_user_id",I.updatedUser.id),localStorage.setItem("vocab_pro_current_user_name",I.updatedUser.name),I.backupTimestamp&&localStorage.setItem("vocab_pro_last_backup_timestamp",String(I.backupTimestamp))),setTimeout(()=>window.location.reload(),1500)):(o("Restore failed.","error"),k(!1),window.isRestoring=!1)}catch{o("Restore encountered an error.","error"),k(!1),window.isRestoring=!1}},U=()=>{const r=document.createElement("input");r.type="file",r.accept=".json",r.style.display="none",r.onchange=async I=>{var G;const F=(G=I.target.files)==null?void 0:G[0];if(!F)return;const se=localStorage.getItem("vocab_pro_current_user_id")||"u-vocab-master",Z=await Ze(F,se);Z.type==="success"?(o("Restore successful! Reloading...","success"),setTimeout(()=>window.location.reload(),1500)):o(`Restore failed: ${Z.message}`,"error"),r.parentNode&&r.parentNode.removeChild(r)},document.body.appendChild(r),r.click()},V=r=>r?r.includes("/Library/Mobile Documents/com~apple~CloudDocs")?r.replace(/\/Users\/[^\/]+\/Library\/Mobile Documents\/com~apple~CloudDocs/g,"{iCloud}"):r.startsWith("/Users/")?r.replace(/\/Users\/[^\/]+/,"{Home}"):r.startsWith("/home/")?r.replace(/\/home\/[^\/]+/,"{Home}"):r:"Not Configured";return e.jsxs("section",{className:"bg-white p-8 rounded-[2.5rem] border border-neutral-200 shadow-sm flex flex-col space-y-6 animate-in fade-in duration-300",children:[e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:"p-3 bg-neutral-100 text-neutral-600 rounded-2xl",children:e.jsx(st,{size:24})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-black text-neutral-900",children:"Server & Connection"}),e.jsx("p",{className:"text-xs text-neutral-400",children:"Manage connection state."})]})]}),e.jsxs("button",{onClick:l,className:"px-5 py-2.5 bg-neutral-900 text-white rounded-xl font-black text-[10px] flex items-center space-x-2 active:scale-95 uppercase tracking-widest hover:bg-neutral-800 transition-all",children:[e.jsx(pe,{size:14}),e.jsx("span",{children:"Save"})]})]}),e.jsxs("div",{className:"p-6 bg-neutral-50 rounded-[2rem] border border-neutral-100 space-y-6",children:[e.jsxs("div",{className:`flex items-center justify-between px-4 py-3 rounded-xl border ${d==="connected"?"bg-emerald-50 border-emerald-200":"bg-white border-neutral-200"}`,children:[e.jsxs("div",{className:"flex items-center gap-3",children:[d==="checking"&&e.jsx(ne,{size:18,className:"animate-spin text-neutral-400"}),d==="connected"&&e.jsx(xe,{size:18,className:"text-emerald-500"}),d==="error"&&e.jsx(Qe,{size:18,className:"text-red-500"}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"text-[10px] font-black uppercase text-neutral-400 tracking-widest",children:"Status"}),e.jsx("span",{className:`text-sm font-bold ${d==="connected"?"text-emerald-700":d==="error"?"text-red-600":"text-neutral-600"}`,children:d==="checking"?"Checking...":d==="connected"?"Active":"Disconnected"})]})]}),d==="connected"?e.jsx("button",{onClick:()=>v(!m),className:"flex items-center gap-2 px-3 py-1.5 bg-white border border-neutral-200 rounded-lg text-[10px] font-black uppercase text-neutral-500 hover:text-indigo-600 hover:border-indigo-200 transition-colors",children:m?"Hide Config":"Configure"}):e.jsxs("button",{onClick:h,className:"flex items-center gap-2 px-3 py-1.5 bg-neutral-900 text-white rounded-lg text-[10px] font-black uppercase hover:bg-neutral-700 transition-colors",children:[e.jsx(Ye,{size:12})," Try Connect"]})]}),(d!=="connected"||m)&&e.jsxs("div",{className:"space-y-4 animate-in fade-in slide-in-from-top-2 pt-2 border-t border-neutral-200/50",children:[e.jsxs("div",{className:"flex items-center justify-between px-1",children:[e.jsxs("label",{className:"text-[10px] font-black text-neutral-400 uppercase tracking-widest flex items-center gap-1",children:[e.jsx(Et,{size:10})," Host Details"]}),e.jsx("div",{className:"flex items-center gap-2",children:e.jsxs("label",{className:"text-[10px] font-bold text-neutral-500 cursor-pointer flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",checked:t.server.useCustomUrl,onChange:B,className:"accent-indigo-600 w-3 h-3"}),"Custom URL"]})})]}),t.server.useCustomUrl?e.jsx("input",{type:"text",value:t.server.customUrl,onChange:r=>M({customUrl:r.target.value}),placeholder:"https://myserver.local:3000",className:"w-full px-4 py-2.5 bg-white border border-neutral-200 rounded-xl text-sm font-bold focus:ring-2 focus:ring-neutral-900 outline-none"}):e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{className:"col-span-2 relative",children:[e.jsx("select",{value:t.server.host,onChange:r=>M({host:r.target.value}),className:"w-full h-full appearance-none bg-white border border-neutral-200 rounded-xl px-4 py-2.5 text-sm font-bold focus:ring-2 focus:ring-neutral-900 outline-none pr-10",children:Ns.map(r=>e.jsx("option",{value:r,children:r},r))}),e.jsx("div",{className:"absolute right-3 top-1/2 -translate-y-1/2 pointer-events-none text-neutral-400",children:e.jsx(Pe,{size:16})})]}),e.jsx("input",{type:"number",value:t.server.port,onChange:r=>M({port:parseInt(r.target.value)||3e3}),className:"w-full px-4 py-2.5 bg-white border border-neutral-200 rounded-xl text-sm font-bold focus:ring-2 focus:ring-neutral-900 outline-none"})]}),e.jsxs("div",{className:"p-3 bg-blue-50 rounded-xl border border-blue-100 flex gap-2",children:[e.jsx(Ke,{size:14,className:"text-blue-500 shrink-0 mt-0.5"}),e.jsxs("p",{className:"text-[10px] text-blue-700 font-medium leading-tight",children:["Server must run on HTTPS. If stuck, try opening ",e.jsx("a",{href:`${g}/api/health`,target:"_blank",rel:"noreferrer",className:"underline font-bold",children:"Health Check"})," to verify certificate."]})]})]}),d==="connected"&&A.length>0&&e.jsxs("div",{className:"space-y-3 pt-4 border-t border-neutral-200/50 animate-in fade-in",children:[e.jsxs("label",{className:"text-[10px] font-black text-neutral-400 uppercase tracking-widest px-1 flex items-center gap-1",children:[e.jsx(Lt,{size:10})," Server Data"]}),e.jsxs("div",{className:"flex items-center justify-between p-3 bg-indigo-50 border border-indigo-100 rounded-xl",children:[e.jsxs("div",{className:"flex flex-col",children:[e.jsxs("span",{className:"text-xs font-bold text-indigo-900",children:["Found ",A.length," user backups"]}),e.jsx("span",{className:"text-[10px] text-indigo-600",children:"You can restore a profile from the server."})]}),e.jsx("button",{onClick:()=>j(!0),className:"px-4 py-2 bg-white text-indigo-700 rounded-lg font-black text-[10px] uppercase shadow-sm hover:bg-indigo-100 transition-colors border border-indigo-200",children:"Browse & Restore"})]})]}),d==="connected"&&e.jsxs("div",{className:"space-y-5 pt-4 border-t border-neutral-200/50 animate-in fade-in",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"text-[10px] font-black text-neutral-400 uppercase tracking-widest px-1 flex items-center gap-1",children:[e.jsx(he,{size:10})," Storage Path"]}),x?e.jsxs("div",{className:"flex gap-2 animate-in fade-in zoom-in-95",children:[e.jsxs("div",{className:"flex-1 relative",children:[e.jsx("input",{type:"text",value:S,onChange:r=>C(r.target.value),className:"w-full pl-4 pr-10 py-2.5 bg-white border-2 border-indigo-500 rounded-xl text-xs font-bold text-neutral-900 focus:outline-none shadow-sm",placeholder:"Enter absolute server path...",autoFocus:!0,onKeyDown:r=>{r.key==="Enter"&&H(),r.key==="Escape"&&p(!1)}}),e.jsx("button",{onClick:()=>p(!1),className:"absolute right-2 top-1/2 -translate-y-1/2 p-1 text-neutral-400 hover:text-neutral-700",children:e.jsx(Tt,{size:14})})]}),e.jsxs("button",{onClick:H,disabled:b==="updating",className:`px-4 rounded-xl font-black text-[10px] uppercase transition-all shadow-md active:scale-95 flex items-center gap-1.5 ${b==="success"?"bg-green-500 text-white":"bg-neutral-900 text-white hover:bg-neutral-800"}`,children:[b==="updating"?e.jsx(ne,{size:14,className:"animate-spin"}):e.jsx(pe,{size:14}),e.jsx("span",{children:"Save"})]})]}):e.jsxs("div",{className:"flex items-center justify-between p-3 bg-white border border-neutral-200 rounded-xl group",children:[e.jsxs("div",{className:"flex items-center gap-3 overflow-hidden",children:[e.jsx("div",{className:"p-2 bg-neutral-100 rounded-lg text-neutral-500",children:e.jsx(he,{size:16})}),e.jsxs("div",{className:"flex flex-col min-w-0",children:[e.jsx("span",{className:"text-[10px] font-black text-neutral-400 uppercase tracking-wider",children:"Active Directory"}),e.jsx("span",{className:"text-xs font-bold text-neutral-800 truncate",title:P||t.server.backupPath,children:V(P||t.server.backupPath)})]})]}),e.jsx("button",{onClick:()=>p(!0),className:"p-2 text-neutral-400 hover:text-indigo-600 hover:bg-indigo-50 rounded-lg transition-colors",title:"Change Path",children:e.jsx(rs,{size:16})})]}),x&&e.jsx("div",{className:"flex justify-end",children:e.jsx("button",{onClick:_,className:"text-[10px] font-bold text-sky-600 hover:underline hover:text-sky-700 transition-colors",children:"Use iCloud Documents Path"})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"text-[10px] font-black text-neutral-400 uppercase tracking-widest px-1 flex items-center gap-1",children:[e.jsx(Pt,{size:10})," Backup Debounce Time"]}),e.jsxs("div",{className:"flex items-center gap-3 p-3 bg-white border border-neutral-200 rounded-xl",children:[e.jsx("input",{type:"range",min:"5",max:"300",step:"5",value:t.sync.autoBackupInterval,onChange:r=>c("sync","autoBackupInterval",parseInt(r.target.value)),className:"flex-1 h-2 bg-neutral-100 rounded-lg appearance-none cursor-pointer accent-neutral-900"}),e.jsxs("div",{className:"w-16 text-center font-black text-sm text-neutral-900",children:[t.sync.autoBackupInterval,"s"]})]})]})]})]}),e.jsx(Mt,{isOpen:R,onClose:()=>j(!1),backups:A,onRestore:$,onNewUser:()=>j(!1),onLocalRestore:U,isRestoring:y})]})},ke=[{id:"PROFILE",label:"Profile",icon:Ee},{id:"INTERFACE",label:"Interface Defaults",icon:os},{id:"SERVER",label:"Server & Connection",icon:st},{id:"AUDIO_COACH",label:"Audio Coach",icon:$e},{id:"AUDIO_SERVER",label:"Audio Server",icon:_t},{id:"LEARNING",label:"Learning",icon:Je},{id:"DATA",label:"Data Management",icon:Ut},{id:"DANGER",label:"Danger Zone",icon:Me,color:"text-red-500"}],ks=t=>{const{currentView:c,isDropdownOpen:l,notification:d,importStatus:u,setCurrentView:b,setIsDropdownOpen:s,mobileNavRef:m,children:v}=t,P=ke.find(x=>x.id===c),w=()=>{var x,p,S,C,A;switch(c){case"PROFILE":return e.jsx(ps,{profileData:t.profileData,onProfileChange:t.onProfileChange,onAvatarChange:t.onAvatarChange,onSaveProfile:t.onSaveProfile});case"SERVER":return e.jsx(ws,{config:t.config,onConfigChange:t.onConfigChange,onSaveSettings:t.onSaveSettings});case"AUDIO_COACH":return e.jsx(hs,{config:t.config,onConfigChange:t.onConfigChange,onSaveSettings:t.onSaveSettings});case"AUDIO_SERVER":return e.jsx(gs,{});case"DATA":return e.jsxs("div",{className:"space-y-6",children:[e.jsx(bs,{jsonInputRef:t.jsonInputRef,dataScope:t.dataScope,onDataScopeChange:t.onDataScopeChange,onJSONImport:t.onJSONImport,onJSONExport:t.onJSONExport,isNormalizing:t.isNormalizing,onOpenNormalizeModal:t.onOpenNormalizeModal,junkTags:t.junkTags,onJunkTagsChange:t.onJunkTagsChange,normalizeOptions:t.normalizeOptions,onNormalizeOptionsChange:t.onNormalizeOptionsChange}),e.jsxs("div",{className:"bg-white p-6 rounded-[2rem] border border-neutral-200 shadow-sm animate-in fade-in",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-indigo-50 text-indigo-600 rounded-xl",children:e.jsx(es,{size:20})}),e.jsx("h3",{className:"font-black text-lg text-neutral-900",children:"System Diagnostics"})]}),e.jsx("button",{onClick:t.onRunDiagnostics,className:"px-4 py-2 bg-neutral-900 text-white rounded-xl text-xs font-bold uppercase tracking-widest hover:bg-neutral-800 transition-all active:scale-95",children:"Run Check"})]}),t.dbStats?e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("h4",{className:"text-[10px] font-black uppercase text-neutral-400 tracking-widest px-1",children:"Database Stores"}),e.jsx("div",{className:"bg-neutral-50 rounded-xl p-3 border border-neutral-100 text-xs font-mono space-y-1",children:Object.entries(t.dbStats).map(([T,R])=>e.jsxs("div",{className:"flex justify-between",children:[e.jsxs("span",{children:[T,":"]}),e.jsx("span",{className:R===-1?"text-red-500 font-bold":"text-neutral-900 font-bold",children:R===-1?"ERROR":R})]},T))})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("h4",{className:"text-[10px] font-black uppercase text-neutral-400 tracking-widest px-1",children:"Safety Lock Status"}),e.jsxs("div",{className:`p-4 rounded-xl border ${(x=t.lsHealth)!=null&&x.hasBackup?"bg-green-50 border-green-200":"bg-red-50 border-red-200"}`,children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[(p=t.lsHealth)!=null&&p.hasBackup?e.jsx(xe,{size:16,className:"text-green-600"}):e.jsx(Me,{size:16,className:"text-red-600"}),e.jsx("span",{className:`font-bold text-sm ${(S=t.lsHealth)!=null&&S.hasBackup?"text-green-900":"text-red-900"}`,children:(C=t.lsHealth)!=null&&C.hasBackup?"Emergency Backup Active":"No Emergency Backup Found"})]}),((A=t.lsHealth)==null?void 0:A.hasBackup)&&e.jsxs("div",{className:"text-xs text-green-700 space-y-1",children:[e.jsxs("p",{children:["Size: ",(t.lsHealth.backupSize/1024).toFixed(1)," KB"]}),e.jsxs("p",{children:["Last Sync: ",t.lsHealth.backupTimestamp]})]})]})]})]}):e.jsx("p",{className:"text-center text-neutral-400 text-xs italic py-4",children:'Click "Run Check" to inspect internal database state.'})]})]});case"LEARNING":return e.jsxs("div",{className:"space-y-6 animate-in fade-in duration-300",children:[e.jsx(vs,{goalConfig:t.goalConfig,onGoalConfigChange:t.onGoalConfigChange,onSaveSettings:t.onSaveSettings}),e.jsx(js,{srsConfig:t.config.srs,onSrsConfigChange:t.onSrsConfigChange,onResetSrsConfig:t.onResetSrsConfig,onSaveSettings:t.onSaveSettings})]});case"DANGER":return e.jsx(ys,{onOpenClearProgressModal:t.onOpenClearProgressModal,onOpenNukeModal:t.onOpenNukeModal,isAdmin:t.isAdmin,onToggleAdmin:t.onToggleAdmin});case"INTERFACE":return null;default:return null}};return e.jsxs("div",{className:"max-w-6xl mx-auto space-y-10 pb-20",children:[e.jsxs("header",{children:[e.jsx("h2",{className:"text-3xl font-black text-neutral-900 tracking-tight",children:"Settings"}),e.jsx("p",{className:"text-neutral-500 mt-2 font-medium",children:"Manage your data and personalize your learning experience."})]}),d&&e.jsxs("div",{className:"fixed top-10 left-1/2 -translate-x-1/2 z-[300] bg-neutral-900 text-white px-6 py-3 rounded-2xl shadow-2xl border border-neutral-800 animate-in slide-in-from-top-4 flex items-center space-x-2",children:[e.jsx(xe,{size:18,className:"text-green-400"}),e.jsx("span",{className:"text-sm font-bold",children:d})]}),u&&e.jsx("div",{className:`p-6 rounded-[2rem] border-2 animate-in slide-in-from-top-4 ${u.type==="success"?"bg-green-50 border-green-100 text-green-700":"bg-red-50 border-red-100 text-red-700"}`,children:e.jsxs("div",{className:"flex items-start space-x-4",children:[u.type==="success"?e.jsx(xe,{size:24}):e.jsx(Qe,{size:24}),e.jsxs("div",{children:[e.jsx("div",{className:"font-black text-lg",children:u.message}),u.detail&&e.jsx("div",{className:"text-sm opacity-80 mt-1 font-medium",children:u.detail})]})]})}),e.jsxs("div",{className:"relative lg:hidden mb-6",ref:m,children:[e.jsxs("button",{onClick:()=>s(!l),className:"w-full flex items-center justify-between text-left px-4 py-3 bg-white border border-neutral-200 rounded-xl text-sm font-bold text-neutral-900 hover:bg-neutral-50 transition-colors shadow-sm",children:[P&&e.jsxs("span",{className:"flex items-center space-x-3",children:[e.jsx(P.icon,{size:18,className:P.color}),e.jsx("span",{children:P.label})]}),e.jsx(Pe,{size:18,className:`text-neutral-400 transition-transform ${l?"rotate-180":""}`})]}),l&&e.jsx("div",{className:"absolute top-full mt-2 w-full bg-white rounded-2xl shadow-lg border border-neutral-100 z-20 p-2 animate-in fade-in duration-150",children:ke.map(x=>e.jsxs("button",{onClick:()=>{b(x.id),s(!1)},className:`w-full text-left flex items-center space-x-3 px-3 py-2 text-sm font-medium rounded-lg transition-colors ${c===x.id?"bg-neutral-900 text-white":`${x.color||"text-neutral-700"} hover:bg-neutral-50`}`,children:[e.jsx(x.icon,{size:16}),e.jsx("span",{children:x.label})]},x.id))})]}),e.jsxs("div",{className:"flex flex-col lg:flex-row gap-12",children:[e.jsx("aside",{className:"hidden lg:block lg:w-1/4",children:e.jsx("nav",{className:"space-y-1.5",children:ke.map(x=>e.jsxs("button",{onClick:()=>b(x.id),className:`w-full flex items-center space-x-3 px-4 py-3 rounded-xl font-bold text-sm transition-colors ${c===x.id?"bg-neutral-100 text-neutral-900":`${x.color||"text-neutral-500"} hover:bg-neutral-50 hover:text-neutral-900`}`,children:[e.jsx(x.icon,{size:18}),e.jsx("span",{children:x.label})]},x.id))})}),e.jsx("main",{className:"flex-1 lg:w-3/4",children:e.jsxs("div",{className:"animate-in fade-in duration-300",children:[w(),v]},c)})]})]})},q=({checked:t,onChange:c,label:l,subLabel:d,icon:u})=>e.jsxs("label",{onClick:b=>{b.preventDefault(),c(!t)},className:"flex items-center justify-between px-4 py-3 cursor-pointer group hover:bg-neutral-50 rounded-xl transition-all border border-transparent hover:border-neutral-100",children:[e.jsxs("div",{className:"flex flex-col",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[u&&e.jsx(u,{size:14,className:t?"text-neutral-900":"text-neutral-400"}),e.jsx("span",{className:"text-xs font-bold text-neutral-700 group-hover:text-neutral-900",children:l})]}),d&&e.jsx("span",{className:"text-[10px] text-neutral-400 font-medium",children:d})]}),e.jsx("div",{className:`w-9 h-5 rounded-full transition-all flex items-center p-1 ${t?"bg-neutral-900":"bg-neutral-200"}`,children:e.jsx("div",{className:`w-3.5 h-3.5 bg-white rounded-full shadow-sm transition-transform ${t?"translate-x-4":"translate-x-0"}`})})]}),Cs=()=>{const[t,c]=n.useState(()=>{try{const s=localStorage.getItem("ielts_pro_library_view_settings");return s?{...we,...JSON.parse(s)}:we}catch{return we}}),[l,d]=n.useState(()=>{const s={showHidden:!1,highlightFailed:!0,isLearnView:!0};try{const m=localStorage.getItem("ielts_pro_word_view_settings");return m?{...s,...JSON.parse(m)}:s}catch{return s}}),u=(s,m)=>{const v={...t,[s]:m};c(v),localStorage.setItem("ielts_pro_library_view_settings",JSON.stringify(v))},b=(s,m)=>{const v={...l,[s]:m};d(v),localStorage.setItem("ielts_pro_word_view_settings",JSON.stringify(v))};return e.jsxs("section",{className:"bg-white p-8 rounded-[2.5rem] border border-neutral-200 shadow-sm flex flex-col space-y-8 animate-in fade-in duration-300",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:"p-3 bg-teal-50 text-teal-600 rounded-2xl",children:e.jsx(Fe,{size:24})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-black text-neutral-900",children:"Interface Defaults"}),e.jsx("p",{className:"text-xs text-neutral-400",children:"Customize what you see across the app library and cards."})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-2 text-[10px] font-black text-neutral-400 uppercase tracking-widest px-1",children:[e.jsx(ds,{size:12})," Word Library Columns"]}),e.jsxs("div",{className:"bg-white border border-neutral-200 rounded-2xl p-1 grid grid-cols-1 md:grid-cols-2 gap-x-4",children:[e.jsx(q,{checked:t.showMeaning,onChange:s=>u("showMeaning",s),label:"Definition / Meaning"}),e.jsx(q,{checked:t.blurMeaning,onChange:s=>u("blurMeaning",s),label:"Blur Definition (Spoiler)",subLabel:"Hide meaning until hovered"}),e.jsx(q,{checked:t.showIPA,onChange:s=>u("showIPA",s),label:"IPA Phonetic"}),e.jsx(q,{checked:t.showProgress,onChange:s=>u("showProgress",s),label:"Progress Badge"}),e.jsx(q,{checked:t.showDue,onChange:s=>u("showDue",s),label:"Due Date"}),e.jsx(q,{checked:t.showAiIcon,onChange:s=>u("showAiIcon",s),label:"AI Refined Indicator"}),e.jsx(q,{checked:t.showComplexity,onChange:s=>u("showComplexity",s),label:"Complexity Column"})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-2 text-[10px] font-black text-neutral-400 uppercase tracking-widest px-1",children:[e.jsx(Fe,{size:12})," Word Detail View"]}),e.jsxs("div",{className:"bg-white border border-neutral-200 rounded-2xl p-1 grid grid-cols-1 md:grid-cols-2 gap-x-4",children:[e.jsx(q,{checked:l.isLearnView,onChange:s=>b("isLearnView",s),label:"Learn View by Default",subLabel:"Hides extra info like examples, tags"}),e.jsx(q,{checked:l.highlightFailed,onChange:s=>b("highlightFailed",s),label:"Highlight Failed Tests",subLabel:"Red highlight for failed drill items"}),e.jsx(q,{checked:l.showHidden,onChange:s=>b("showHidden",s),label:"Show Ignored Items",subLabel:"Show ignored collocations/family members"})]})]})]})},Fs=({user:t,onUpdateUser:c,onRefresh:l,onNuke:d,apiUsage:u})=>{var De,Oe;const b=n.useRef(null),s=n.useRef(null),{showToast:m}=oe(),[v,P]=n.useState(()=>{const i=sessionStorage.getItem("vocab_pro_settings_tab");return i?(sessionStorage.removeItem("vocab_pro_settings_tab"),i):"PROFILE"});n.useEffect(()=>{const i=sessionStorage.getItem("vocab_pro_settings_tab");i&&(sessionStorage.removeItem("vocab_pro_settings_tab"),P(i))},[]);const[w,x]=n.useState(!1),[p,S]=n.useState({user:!0,vocabulary:!0,lesson:!0,reading:!0,writing:!0,speaking:!0,listening:!0,mimic:!0,wordBook:!0,planning:!0}),[C,A]=n.useState(null),[T,R]=n.useState(!1),[j,y]=n.useState(!1),[k,z]=n.useState(!1),[L,o]=n.useState(null),[g,h]=n.useState(!1),[M,B]=n.useState(!1),[_,H]=n.useState({removeJunkTags:!0,removeMultiWordData:!0,cleanHeadwords:!0}),[$,U]=n.useState(""),[V,r]=n.useState(Ae()),[I,F]=n.useState([]),[se,Z]=n.useState(!0),[G,me]=n.useState(!1),[ge,ie]=n.useState(null),[fe,ce]=n.useState(null),[W,re]=n.useState({name:t.name,avatar:t.avatar,role:t.role||"",currentLevel:t.currentLevel||"",target:t.target||"",nativeLanguage:t.nativeLanguage||"English",lessonLanguage:((De=t.lessonPreferences)==null?void 0:De.language)||"English",lessonAudience:((Oe=t.lessonPreferences)==null?void 0:Oe.targetAudience)||"Adult"});n.useEffect(()=>{var i,N;re({name:t.name,avatar:t.avatar,role:t.role||"",currentLevel:t.currentLevel||"",target:t.target||"",nativeLanguage:t.nativeLanguage||"English",lessonLanguage:((i=t.lessonPreferences)==null?void 0:i.language)||"English",lessonAudience:((N=t.lessonPreferences)==null?void 0:N.targetAudience)||"Adult"})},[t]),n.useEffect(()=>{const i=localStorage.getItem("gemini_api_keys")||"";if(U(i),L){const N=setTimeout(()=>o(null),4e3);return()=>clearTimeout(N)}},[L]),n.useEffect(()=>{(async()=>{Z(!0);const O=await Ht();F(O),Z(!1)})();const N=()=>{r(Ae())};return window.addEventListener("config-updated",N),()=>{window.removeEventListener("config-updated",N)}},[]),n.useEffect(()=>{const i=N=>{s.current&&!s.current.contains(N.target)&&x(!1)};return document.addEventListener("mousedown",i),()=>document.removeEventListener("mousedown",i)},[]);const ee=(i,N,O)=>{r(J=>{const Q={...J};return N===null&&typeof O=="object"?Q[i]=O:Q[i]={...J[i],[N]:O},Q})},be=i=>{ee("interface","junkTags",i)},de=i=>{re(N=>({...N,[i.target.name]:i.target.value}))},je=i=>{re(N=>({...N,avatar:i}))},ve=async()=>{const i={...t,name:W.name.trim()||t.name,role:W.role.trim(),currentLevel:W.currentLevel.trim(),target:W.target.trim(),nativeLanguage:W.nativeLanguage,avatar:W.avatar,lessonPreferences:{language:W.lessonLanguage,targetAudience:W.lessonAudience.trim(),tone:V.audioCoach.coaches[V.audioCoach.activeCoach].persona}};await c(i),o("Profile & Preferences updated successfully!")},a=()=>{localStorage.setItem("gemini_api_keys",$.trim()),o("API Keys have been saved locally.")},f=()=>{localStorage.removeItem("vocab_pro_api_usage"),window.dispatchEvent(new CustomEvent("apiUsageUpdated")),o("API usage counter has been reset.")},E=i=>{ee("srs",i.target.name,parseFloat(i.target.value))},X=i=>{const N=i.target.type==="checkbox"?i.target.checked:i.target.value;ee("ai",i.target.name,N)},te=i=>{ee("dailyGoals",i.target.name,parseInt(i.target.value,10))},ae=()=>{Se(V),o("Settings saved!")},nt=()=>{r(i=>({...i,srs:Wt})),o("SRS settings reset to defaults.")},rt=async i=>{var J;const N=(J=i.target.files)==null?void 0:J[0];if(!N)return;A(null);const O=await Ze(N,t.id,p);A(O),O.type==="success"&&(m("Restore successful! The app will now reload.","success",2e3),O.updatedUser&&await Gt(O.updatedUser),setTimeout(()=>{window.location.reload()},2e3)),b.current&&(b.current.value="")},lt=async()=>{await Jt(t.id,t,p)},ot=async()=>{z(!0);try{const N=(await Re()).map(O=>Kt(O));await ze(N),o("All learning progress has been reset.")}catch(i){A({type:"error",message:"Failed to clear progress",detail:i.message})}finally{z(!1),y(!1)}},it=async()=>{B(!0),h(!1);let i=0;const N=new Set(V.interface.junkTags.map(O=>O.toLowerCase()));try{const O=Re(),J=[];for(const ut of O){let le=!1;const D={...ut};if(_.removeJunkTags&&N.size>0&&D.tags){const _e=D.tags.length;D.tags=D.tags.filter(xt=>!N.has(xt.toLowerCase())),D.tags.length!==_e&&(le=!0)}_.removeMultiWordData&&(D.isIdiom||D.isPhrasalVerb||D.isCollocation||D.isStandardPhrase)&&(D.wordFamily&&(D.wordFamily=void 0,le=!0),D.collocationsArray&&D.collocationsArray.length>0&&(D.collocations=void 0,D.collocationsArray=void 0,le=!0)),_.cleanHeadwords&&D.word&&D.word.includes('"')&&(D.word=D.word.replace(/"/g,"").trim(),le=!0),le&&(D.updatedAt=Date.now(),J.push(D))}i=J.length,i>0&&await ze(J);let Q=`Normalized ${i} item(s).`;i===0&&(Q="No items needed normalization based on selected options."),m(Q,"success")}catch(O){m("Failed to normalize data.","error"),console.error("Normalization Error:",O)}finally{B(!1)}},ct=async()=>{ie(null),ce(null);const i=await Bt();ie(i);const N=$t();ce(N),m("Diagnostic run complete.","info")},dt=async()=>{await c({...t,isAdmin:!t.isAdmin}),o(`Developer Mode ${t.isAdmin?"Disabled":"Enabled"}`)},ye=({id:i,label:N,checked:O,onChange:J})=>e.jsxs("label",{htmlFor:i,className:"flex items-center gap-2 p-3 bg-neutral-50 rounded-lg border border-neutral-200 cursor-pointer",children:[e.jsx("input",{id:i,type:"checkbox",checked:O,onChange:Q=>J(Q.target.checked),className:"h-4 w-4 rounded border-gray-300 text-indigo-600 focus:ring-indigo-500"}),e.jsx("span",{className:"text-sm font-medium",children:N})]});return e.jsxs(e.Fragment,{children:[e.jsx(ks,{currentView:v,isDropdownOpen:w,notification:L,importStatus:C,profileData:W,config:V,isVoiceLoading:se,availableVoices:I,apiKeyInput:$,apiUsage:u,jsonInputRef:b,dataScope:p,onDataScopeChange:S,mobileNavRef:s,setCurrentView:P,setIsDropdownOpen:x,onProfileChange:de,onAvatarChange:je,onSaveProfile:ve,onConfigChange:ee,onAiConfigChange:X,onApiKeyInputChange:i=>U(i.target.value),onSaveApiKeys:a,onResetUsage:f,onSaveSettings:ae,onJSONImport:rt,onJSONExport:lt,onSrsConfigChange:E,onResetSrsConfig:nt,onOpenClearProgressModal:()=>y(!0),onOpenNukeModal:()=>R(!0),isNormalizing:M,onOpenNormalizeModal:()=>h(!0),isApplyingAccent:G,onApplyAccent:()=>{},isAdmin:!!t.isAdmin,onToggleAdmin:dt,junkTags:V.interface.junkTags,onJunkTagsChange:be,normalizeOptions:_,onNormalizeOptionsChange:H,goalConfig:V.dailyGoals,onGoalConfigChange:te,dbStats:ge,lsHealth:fe,onRunDiagnostics:ct,children:v==="INTERFACE"&&e.jsx(Cs,{})}),e.jsx(Ne,{isOpen:T,title:"Delete all data?",message:e.jsxs(e.Fragment,{children:["This will permanently delete ",e.jsx("strong",{className:"text-red-600",children:"ALL"})," vocabulary, progress, and profiles. This action cannot be undone."]}),confirmText:"YES, DELETE EVERYTHING",isProcessing:!1,onConfirm:()=>{d(),R(!1)},onClose:()=>R(!1),confirmButtonClass:"bg-red-600 text-white hover:bg-red-700 shadow-red-200",icon:e.jsx(Vt,{size:40,className:"text-red-500"})}),e.jsx(Ne,{isOpen:j,title:"Clear All Progress?",message:"This will reset the review schedule for ALL words in your library. Your words and their content will NOT be deleted. This action cannot be undone.",confirmText:"Yes, Clear Progress",isProcessing:k,onConfirm:ot,onClose:()=>y(!1),icon:e.jsx(Ft,{size:40,className:"text-orange-500"}),confirmButtonClass:"bg-orange-50 text-white hover:bg-orange-600 shadow-orange-200"}),e.jsx(Ne,{isOpen:g,title:"Normalize Data",message:e.jsxs("div",{className:"space-y-4 text-left",children:[e.jsx("p",{children:"Select normalization actions to perform. This process will update your entire library and cannot be undone."}),e.jsx(ye,{id:"norm-junk",label:"Remove junk tags from all words",checked:_.removeJunkTags,onChange:i=>H(N=>({...N,removeJunkTags:i}))}),e.jsx(ye,{id:"norm-multi",label:"Clean multi-word items (phrases, idioms)",checked:_.removeMultiWordData,onChange:i=>H(N=>({...N,removeMultiWordData:i}))}),e.jsx(ye,{id:"norm-quotes",label:"Clean headwords (remove quotes)",checked:_.cleanHeadwords,onChange:i=>H(N=>({...N,cleanHeadwords:i}))})]}),confirmText:"Yes, Normalize",isProcessing:M,onConfirm:it,onClose:()=>h(!1),icon:e.jsx(at,{size:40,className:"text-orange-500"}),confirmButtonClass:"bg-orange-50 text-white hover:bg-orange-600 shadow-orange-200"})]})};export{Fs as SettingsView};
