import{c as Fe,r as s,j as e,X as he,ae as be,I as ge,by as je,S as Le,h as Oe,bz as Ue,ay as Qe,ai as qe,H as me,bA as De,V as He,E as Ge,A as Be,ah as ve,b2 as Ke,M as Ve,K as Je,aM as Ye,as as Xe,$ as de,ag as xe,bf as Ze,_ as et,bB as we,bC as tt,t as st,k as nt,aK as rt,aA as at,bD as lt}from"./index-CBs60Vx-.js";import{E as ot}from"./ear-RDxsLEl_.js";import{C as it}from"./chevron-left-aFv9EB8D.js";/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ct=Fe("List",[["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 18h.01",key:"1tta3j"}],["path",{d:"M3 6h.01",key:"1rqtza"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 18h13",key:"1lx6n3"}],["path",{d:"M8 6h13",key:"ik3vkj"}]]),ye=({isOpen:o,onClose:T,onSave:a,initialData:f})=>{const[x,m]=s.useState(""),R=s.useRef(null);s.useEffect(()=>{o&&(m((f==null?void 0:f.text)||""),setTimeout(()=>{var d;return(d=R.current)==null?void 0:d.focus()},100))},[o,f]);const _=d=>{d.preventDefault(),x.trim()&&a(x.trim())};return o?e.jsx("div",{className:"fixed inset-0 z-[210] flex items-center justify-center p-4 bg-black/60 backdrop-blur-sm animate-in fade-in duration-200",children:e.jsxs("form",{onSubmit:_,className:"bg-white w-full max-w-lg rounded-[2.5rem] shadow-2xl border border-neutral-200 flex flex-col",children:[e.jsxs("header",{className:"px-8 py-6 border-b border-neutral-100 flex justify-between items-start shrink-0",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-black text-neutral-900",children:f?"Edit Phrase":"Add New Phrase"}),e.jsx("p",{className:"text-sm text-neutral-500",children:"Enter the text you want to practice mimicking."})]}),e.jsx("button",{type:"button",onClick:T,className:"p-2 -mr-2 text-neutral-400 hover:bg-neutral-100 rounded-full",children:e.jsx(he,{size:20})})]}),e.jsx("main",{className:"p-8",children:e.jsx("textarea",{ref:R,value:x,onChange:d=>m(d.target.value),placeholder:"e.g. It's not a matter of if, but when.",rows:5,className:"w-full p-4 bg-neutral-50 border border-neutral-200 rounded-xl font-medium resize-none focus:ring-2 focus:ring-neutral-900 outline-none text-base leading-relaxed",required:!0})}),e.jsx("footer",{className:"px-8 py-6 border-t border-neutral-100 flex justify-end shrink-0 bg-neutral-50/50 rounded-b-[2.5rem]",children:e.jsxs("button",{type:"submit",className:"px-6 py-3 bg-neutral-900 text-white rounded-xl font-black text-xs flex items-center gap-2 uppercase tracking-widest",children:[e.jsx(Xe,{size:14})," Save Phrase"]})})]})}):null},ut=({score:o})=>o===void 0?e.jsx("div",{className:"w-2 h-2 rounded-full bg-neutral-200",title:"Not practiced yet"}):e.jsx("div",{className:`flex items-center justify-center px-1.5 py-0.5 rounded-md ${o>=80?"bg-green-100 text-green-700":o>=50?"bg-yellow-100 text-yellow-700":"bg-red-100 text-red-700"}`,children:e.jsx("span",{className:"text-[9px] font-black",children:o})}),dt=({targetText:o,sourceWord:T,isRecording:a,isRevealed:f,userTranscript:x,userAudioUrl:m,onToggleRecord:R,onPlayTarget:_,onPlayUser:d,onToggleReveal:$,onNext:p,onClearTranscript:fe,isEmpty:le,onClose:j,pagedItems:G,page:v,pageSize:W,totalPages:M,onPageChange:w,onPageSizeChange:oe,onSelect:z,currentAbsoluteIndex:ie,autoSpeak:F,onToggleAutoSpeak:r,autoReveal:y,onToggleAutoReveal:B,isGlobalMode:Z,localAnalysis:b,onAddItem:K,onEditItem:L,onDeleteItem:ce,onRandomize:V,isModalOpen:O,editingItem:J,onCloseModal:ee,onSaveItem:te,ipa:se,showIpa:U,isIpaLoading:P,onToggleIpa:Y})=>{const[Q,q]=s.useState(!0),[ne,N]=s.useState(null),[I,k]=s.useState(!1),[S,X]=s.useState(()=>{const n=localStorage.getItem("mimic_play_speed");return n?Number(n):1}),C=s.useRef(null),g=s.useRef(null);s.useEffect(()=>{const n=g.current;n&&o&&setTimeout(()=>{if(!g.current)return;n.style.fontSize="1.5rem";const l=n.parentElement;if(l){const u=n.scrollWidth,c=l.clientWidth;if(u>c){const D=c/u*24;n.style.fontSize=`${Math.max(D,14)}px`}}},50)},[o]),s.useEffect(()=>{localStorage.setItem("mimic_play_speed",String(S))},[S]);const re=n=>{const l=n.toLowerCase().replace(/[^a-z]/g,"");if(!l)return 1;const u=l.match(/[aeiouy]+/g);return u?u.length:1},E=()=>{if(!o)return;const n=o.split(/\s+/);if(I){clearTimeout(C.current),k(!1),N(null);return}let l=0;k(!0);const u=()=>{if(l>=n.length){k(!1),N(null);return}N(l);const c=n[l];let H=400*re(c)/S;/[,.]/.test(c)&&(H+=300/S),/[!?;]/.test(c)&&(H+=500/S),/[:]/.test(c)&&(H+=400/S),l++,C.current=setTimeout(u,H)};u()};if(le)return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-center space-y-4 relative bg-white",children:[j&&e.jsx("button",{onClick:j,className:"absolute top-6 right-6 p-2 text-neutral-400 hover:bg-neutral-100 rounded-full",children:e.jsx(he,{size:24})}),e.jsx("div",{className:"p-4 bg-neutral-100 rounded-full text-neutral-400",children:e.jsx(ot,{size:40})}),e.jsx("h3",{className:"text-xl font-black text-neutral-900",children:"Queue is Empty"}),e.jsxs("button",{onClick:K,className:"mt-4 px-6 py-3 bg-neutral-900 text-white rounded-xl font-black text-xs flex items-center gap-2 uppercase tracking-widest",children:[e.jsx(be,{size:14})," Add New"]})]}),e.jsx(ye,{isOpen:O,onClose:ee,onSave:te,initialData:J})]});const A=Z?"h-full":"h-full rounded-[2.5rem] shadow-sm border border-neutral-200";return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:`flex w-full bg-white relative overflow-hidden ${A}`,children:[e.jsxs("div",{className:`h-full border-r border-neutral-100 bg-neutral-50/50 flex flex-col shrink-0 transition-all duration-300 ease-in-out ${Q?"w-80 opacity-100":"w-0 opacity-0 border-none overflow-hidden"}`,children:[e.jsx("div",{className:"p-4 border-b border-neutral-100 bg-white space-y-3 shrink-0",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2 text-neutral-500",children:[e.jsx(ct,{size:18}),e.jsx("span",{className:"text-xs font-black uppercase tracking-widest",children:"Queue"})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("button",{onClick:B,className:`p-2 rounded-lg border transition-all shadow-sm ${y?"bg-sky-100 border-sky-200 text-sky-600":"bg-white border-neutral-200 text-neutral-400 hover:text-neutral-600"}`,title:`Auto Reveal Text: ${y?"ON":"OFF"}`,children:y?e.jsx(ge,{size:14}):e.jsx(je,{size:14})}),e.jsx("button",{onClick:r,className:`p-2 rounded-lg border transition-all shadow-sm ${F?"bg-amber-100 border-amber-200 text-amber-600":"bg-white border-neutral-200 text-neutral-400 hover:text-neutral-600"}`,title:`Auto Speak: ${F?"ON":"OFF"}`,children:e.jsx(Le,{size:14,fill:F?"currentColor":"none"})}),e.jsx("button",{onClick:V,className:"p-2 bg-white border border-neutral-200 text-neutral-500 rounded-lg hover:text-indigo-600 transition-all shadow-sm",title:"Shuffle Queue",children:e.jsx(Oe,{size:14})}),e.jsx("button",{onClick:K,className:"p-2 bg-neutral-900 text-white border border-neutral-900 rounded-lg hover:bg-neutral-800 transition-all shadow-sm",children:e.jsx(be,{size:14})})]})]})}),e.jsx("div",{className:"flex-1 overflow-y-auto p-2 space-y-1 custom-scrollbar",children:G.map((n,l)=>{const c=v*W+l===ie;return e.jsxs("div",{className:`w-full text-left rounded-lg border transition-all group relative ${c?"bg-white border-neutral-900 shadow-sm ring-1 ring-neutral-900/5":"border-transparent hover:bg-neutral-100"}`,children:[e.jsxs("button",{onClick:()=>z(l),className:"w-full px-3 py-3 flex items-start gap-3",children:[e.jsx("div",{className:"mt-0.5 shrink-0",children:e.jsx(ut,{score:n.lastScore})}),e.jsx("span",{className:`text-xs font-bold leading-snug line-clamp-2 ${c?"text-neutral-900":"text-neutral-600"}`,children:n.text})]}),e.jsxs("div",{className:"absolute top-1/2 -translate-y-1/2 right-2 flex items-center bg-white/90 rounded-full opacity-0 group-hover:opacity-100 transition-opacity shadow-sm border border-neutral-100",children:[e.jsx("button",{onClick:()=>L(n),className:"p-1.5 text-neutral-400 hover:text-indigo-600",children:e.jsx(Ue,{size:12})}),e.jsx("button",{onClick:()=>ce(n),className:"p-1.5 text-neutral-400 hover:text-red-600",children:e.jsx(Qe,{size:12})})]})]},n.id)})}),e.jsxs("div",{className:"p-3 border-t border-neutral-100 bg-white flex items-center justify-between shrink-0",children:[e.jsx("select",{value:W,onChange:n=>oe(Number(n.target.value)),className:"bg-neutral-50 border border-neutral-200 rounded-lg px-2 py-1 text-[10px] font-bold text-neutral-600 focus:outline-none focus:ring-1 focus:ring-neutral-900",children:[10,15,20,30].map(n=>e.jsx("option",{value:n,children:n},n))}),M>1&&e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("button",{onClick:()=>w(v-1),disabled:v===0,className:"p-1.5 rounded-lg hover:bg-neutral-100 text-neutral-400 disabled:opacity-30 disabled:hover:bg-transparent",children:e.jsx(it,{size:16})}),e.jsxs("span",{className:"text-[10px] font-black text-neutral-400 tabular-nums",children:[v+1,"/",M]}),e.jsx("button",{onClick:()=>w(v+1),disabled:v>=M-1,className:"p-1.5 rounded-lg hover:bg-neutral-100 text-neutral-400 disabled:opacity-30 disabled:hover:bg-transparent",children:e.jsx(qe,{size:16})})]})]})]}),e.jsxs("div",{className:"flex-1 h-full flex flex-col relative overflow-y-auto",children:[j&&e.jsx("button",{onClick:j,className:"absolute top-4 right-4 p-2 text-neutral-400 hover:bg-neutral-100 rounded-full z-50",children:e.jsx(he,{size:20})}),e.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center p-4 space-y-6 animate-in fade-in",children:[e.jsx("div",{className:"relative w-full max-w-2xl",children:e.jsxs("div",{className:"p-6 md:p-8 rounded-[2rem] border-2 text-center transition-all duration-300 min-h-[180px] flex flex-col items-center justify-center relative bg-white border-neutral-200 shadow-xl shadow-neutral-100",children:[e.jsx("button",{onClick:$,className:"absolute top-6 right-6 p-2 text-neutral-300 hover:text-indigo-500",children:f?e.jsx(je,{size:20}):e.jsx(ge,{size:20})}),e.jsxs("div",{className:"relative px-4 w-full flex flex-col items-center gap-4",children:[e.jsx("div",{ref:g,className:"flex flex-wrap justify-center gap-x-1.5 gap-y-1",style:{fontSize:"1.5rem",lineHeight:"1.4"},children:o==null?void 0:o.split(/\s+/).map((n,l)=>{const u=b==null?void 0:b.words[l];let c="text-neutral-800";if(u)switch(u.status){case"correct":c="text-emerald-600";break;case"near":c="text-amber-500";break;case"wrong":c="text-rose-500";break;case"missing":c="text-neutral-300";break;default:c="text-neutral-800"}const D=u&&u.status!=="missing";return e.jsx("span",{onClick:()=>me(n),onMouseEnter:()=>N(l),onMouseLeave:()=>N(null),className:`font-bold cursor-pointer transition-all leading-normal px-1 rounded ${ne===l?"bg-indigo-100/70":""} ${f||D?"opacity-100":"text-transparent blur-md select-none"}`,children:e.jsx("span",{className:c,children:n})},l)})}),U&&se&&e.jsx("div",{className:"w-full self-stretch px-4 py-3 bg-neutral-50 border border-neutral-200 rounded-2xl text-base font-mono font-normal text-neutral-600 leading-relaxed text-left animate-in slide-in-from-top-2 duration-500 flex flex-wrap gap-x-2 gap-y-1",children:se.replace(/\//g,"").split(/\s+/).map((n,l)=>e.jsx("span",{className:`transition-all px-1 rounded ${ne===l?"bg-indigo-100/70 text-indigo-900":""}`,children:n},l))}),!f&&!b&&e.jsx("div",{className:"absolute inset-0 flex items-center justify-center pointer-events-none",children:e.jsx("span",{className:"text-neutral-200 text-xs font-bold uppercase tracking-widest animate-pulse",children:"Speak to reveal result"})})]}),b&&e.jsxs("div",{className:"mt-4 flex flex-col items-center gap-1 animate-in slide-in-from-top-2",children:[e.jsx("div",{className:"text-[10px] font-black text-neutral-400 uppercase tracking-widest",children:"Accuracy"}),e.jsxs("div",{className:`text-4xl font-black ${b.score>80?"text-emerald-500":b.score>50?"text-amber-500":"text-rose-500"}`,children:[b.score,"%"]})]})]})}),e.jsxs("div",{className:"min-h-16 flex flex-col items-center justify-center w-full max-w-xl text-center",children:[a?e.jsxs("div",{className:"flex items-center gap-2 text-rose-500 animate-pulse",children:[e.jsx(De,{size:24}),e.jsx("span",{className:"font-black text-sm uppercase tracking-widest",children:"Listening..."})]}):!x&&e.jsx("p",{className:"text-neutral-300 text-xs font-medium",children:"Tap the microphone and read the phrase aloud"}),x&&!a&&e.jsxs("div",{className:"space-y-1 animate-in fade-in",children:[e.jsx("p",{className:"text-neutral-400 text-[10px] font-black uppercase tracking-widest",children:"What we heard"}),e.jsxs("p",{className:"text-lg font-medium italic text-neutral-600 line-clamp-2",children:['"',x,'"']})]})]}),e.jsxs("div",{className:"flex items-center gap-6",children:[e.jsx("button",{onClick:_,className:"p-4 rounded-2xl bg-white border border-neutral-200 text-neutral-600 hover:text-indigo-600 shadow-sm transition-all active:scale-95",children:e.jsx(He,{size:24})}),e.jsx("button",{onClick:Y,disabled:P,className:`p-4 rounded-2xl border transition-all shadow-sm ${U?"bg-indigo-600 text-white shadow-lg scale-105":"bg-white border-neutral-200 text-neutral-600 hover:text-indigo-600"}`,title:"Show Phonetic (IPA)",children:P?e.jsx(Ge,{size:24,className:"animate-spin"}):e.jsx(Be,{size:24})}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:E,disabled:!o,className:`p-4 rounded-2xl border transition-all shadow-sm ${I?"bg-neutral-900 text-white scale-105":"bg-white border-neutral-200 text-neutral-600 hover:text-indigo-600"}`,title:"Auto Highlight",children:e.jsx(ve,{size:24})}),e.jsxs("select",{value:S,onChange:n=>X(Number(n.target.value)),className:"text-xs border border-neutral-200 rounded-lg px-2 py-1 bg-white",children:[e.jsx("option",{value:.5,children:"75 WPM"}),e.jsx("option",{value:.75,children:"110 WPM"}),e.jsx("option",{value:1,children:"150 WPM"}),e.jsx("option",{value:1.25,children:"190 WPM"}),e.jsx("option",{value:1.5,children:"225 WPM"}),e.jsx("option",{value:1.75,children:"260 WPM"}),e.jsx("option",{value:2,children:"300 WPM"}),e.jsx("option",{value:2.25,children:"325 WPM"}),e.jsx("option",{value:2.5,children:"350 WPM"}),e.jsx("option",{value:2.75,children:"375 WPM"}),e.jsx("option",{value:3,children:"400 WPM"})]})]}),e.jsx("button",{onClick:R,className:`w-24 h-24 rounded-full flex items-center justify-center shadow-xl transition-all transform ${a?"bg-rose-500 text-white scale-110 ring-8 ring-rose-100":"bg-white border-4 border-neutral-100 text-neutral-900 hover:border-neutral-200 hover:scale-105"}`,children:a?e.jsx(Ke,{size:32,fill:"currentColor"}):e.jsx(Ve,{size:32})}),e.jsx("button",{onClick:d,disabled:!m||a,className:`p-4 rounded-2xl border transition-all shadow-sm ${m&&!a?"bg-white border-neutral-200 text-neutral-600 hover:text-indigo-600":"bg-neutral-50 border-neutral-100 text-neutral-300 cursor-not-allowed"}`,children:e.jsx(ve,{size:24,fill:m&&!a?"currentColor":"none"})})]}),e.jsxs("button",{onClick:p,className:"px-8 py-4 rounded-2xl font-black text-xs uppercase tracking-widest flex items-center gap-2 transition-all shadow-lg bg-neutral-900 text-white hover:bg-neutral-800 active:scale-95",children:[e.jsx("span",{children:"Next Phrase"}),e.jsx(Je,{size:16})]})]}),e.jsx("div",{className:"px-8 pb-6",children:e.jsxs("div",{className:"p-4 bg-indigo-50 border border-indigo-100 rounded-2xl flex items-start gap-3",children:[e.jsx("div",{className:"p-1.5 bg-indigo-500 text-white rounded-lg shadow-sm",children:e.jsx(Ye,{size:16})}),e.jsxs("div",{className:"text-[10px] text-indigo-700 leading-relaxed font-medium",children:[e.jsx("b",{className:"text-[10px] uppercase tracking-wider block mb-0.5",children:"Visual Feedback Guide:"}),e.jsx("span",{className:"text-emerald-600 font-black",children:"GREEN"}),": Correct. ",e.jsx("span",{className:"text-rose-500 font-black",children:"RED"}),": Mispronounced. ",e.jsx("span",{className:"text-neutral-400 font-black",children:"GRAY"}),": Missing."]})]})})]})]}),e.jsx(ye,{isOpen:O,onClose:ee,onSave:te,initialData:J})]})},Ne="vocab_pro_mimic_practice_queue",xt=({scopedWord:o,onClose:T})=>{const[a,f]=s.useState([]),[x,m]=s.useState(0),[R,_]=s.useState(!1),[d,$]=s.useState(0),[p,fe]=s.useState(10),[le,j]=s.useState(!1),[G,v]=s.useState(null),[W,M]=s.useState(null),[w,oe]=s.useState(()=>de("vocab_pro_mimic_autospeak",!1)),[z,ie]=s.useState(()=>de("vocab_pro_mimic_autoreveal",!0)),F=s.useRef(w);s.useEffect(()=>{xe("vocab_pro_mimic_autospeak",w),F.current=w},[w]),s.useEffect(()=>{xe("vocab_pro_mimic_autoreveal",z)},[z]);const r=a[x]||null,[y,B]=s.useState(!1),[Z,b]=s.useState(!1),[K,L]=s.useState(""),[ce,V]=s.useState(0),[O,J]=s.useState(null),[ee,te]=s.useState("audio/webm"),[se,U]=s.useState(null),[P,Y]=s.useState(null),[Q,q]=s.useState(!1),[ne,N]=s.useState(!1),[I,k]=s.useState(null),S=!1,X=s.useRef(new Ze),C=s.useRef(null),g=s.useRef(null),re=s.useRef(()=>{}),{showToast:E}=et(),A=K.substring(ce).trimStart();s.useEffect(()=>{if(y&&r&&A){const t=we(r.text,A);k(t)}},[A,y,r]);const n=t=>{f(t),xe(Ne,t),_(t.length===0)};s.useEffect(()=>{const t=de(Ne,[]);f(t),_(t.length===0),m(0)},[]),s.useEffect(()=>{const t=Math.ceil(a.length/p);d>=t&&t>0&&$(t-1)},[a.length,p]),s.useEffect(()=>{const t=Math.floor(x/p);t!==d&&$(t)},[x,p]);const l=t=>{const h=[{id:`mimic-${Date.now()}`,text:t,sourceWord:"Manual",type:"Phrase"},...a];n(h),m(0),j(!1)},u=(t,i)=>{n(a.map(h=>h.id===t?{...h,text:i}:h)),j(!1),v(null)},c=t=>{M(t)},D=()=>{if(!W)return;const t=a.filter(h=>h.id!==W.id);let i=x;i>=t.length&&(i=Math.max(0,t.length-1)),m(i),n(t),M(null),E("Phrase removed.","success")},H=()=>{if(a.length<2)return;const t=[...a].sort(()=>Math.random()-.5);n(t),m(0),E("Queue shuffled!","success")},ke=t=>{fe(t),$(0)},Se=()=>{v(null),j(!0)},Ce=t=>{v(t),j(!0)},ze=t=>{G?u(G.id,t):l(t)},ae=s.useCallback(async(t=!1)=>{g.current&&clearTimeout(g.current),B(!1),X.current.stop();try{const i=await tt();!t&&i&&(J(i.base64),te(i.mimeType))}catch(i){console.error("Audio capture failed",i)}},[]);s.useEffect(()=>{re.current=ae},[ae]);const Me=s.useCallback(async()=>{if(r){if(P&&Q){q(!1);return}if(P&&!Q){q(!0);return}N(!0);try{const t=r.text.trim().toLowerCase(),i=st().find(h=>h.word.toLowerCase()===t);if(i&&i.ipaUs){Y(i.ipaUs),q(!0),N(!1);return}else{const h=nt(),ue=rt(h),pe=await fetch(`${ue}/api/convert/ipa?text=${encodeURIComponent(r.text)}`);if(pe.ok){const We=await pe.json();Y(We.ipa),q(!0)}else E("IPA server unavailable","error")}}catch{E("Failed to fetch IPA","error")}finally{N(!1)}}},[r,P,Q,E]);s.useEffect(()=>{if(y&&ae(!0),b(z),L(""),V(0),J(null),U(null),k(null),Y(null),q(!1),C.current&&(C.current.pause(),C.current=null),F.current&&r){const t=setTimeout(()=>me(r.text),500);return()=>clearTimeout(t)}},[r==null?void 0:r.id,z]),s.useEffect(()=>()=>{X.current.stop(),g.current&&clearTimeout(g.current)},[]);const Pe=async()=>{if(r)if(y){await ae();const t=we(r.text,A);k(t);const i=a.map((h,ue)=>ue===x?{...h,lastScore:t.score}:h);n(i)}else{L(""),V(0),U(null),k(null);try{await lt(),B(!0),g.current&&clearTimeout(g.current),g.current=setTimeout(()=>re.current(),1e4),X.current.start((t,i)=>L(t+i),t=>L(t))}catch(t){console.error("Failed to start recording",t),B(!1)}}},Ie=()=>{V(K.length),U(null),k(null)},Ee=()=>r&&me(r.text),Ae=()=>{if(O){C.current&&C.current.pause();const t=new Audio(`data:${ee};base64,${O}`);C.current=t,t.play()}},Te=()=>{a.length>0&&m(t=>(t+1)%a.length)},Re=t=>{t>=0&&t<a.length&&m(t)},_e=Math.ceil(a.length/p),$e=a.slice(d*p,(d+1)*p);return e.jsxs(e.Fragment,{children:[e.jsx(dt,{targetText:(r==null?void 0:r.text)||null,sourceWord:(r==null?void 0:r.sourceWord)||"",type:(r==null?void 0:r.type)||"",isRecording:y,isRevealed:Z,userTranscript:A,matchStatus:se,userAudioUrl:O,onToggleRecord:Pe,onPlayTarget:Ee,onPlayUser:Ae,onToggleReveal:()=>b(!Z),onNext:Te,onClearTranscript:Ie,isEmpty:R,onClose:T,pagedItems:$e,page:d,pageSize:p,totalPages:_e,onPageChange:$,onPageSizeChange:ke,onSelect:t=>Re(d*p+t),currentAbsoluteIndex:x,autoSpeak:w,onToggleAutoSpeak:()=>oe(!w),autoReveal:z,onToggleAutoReveal:()=>ie(!z),isGlobalMode:!o,isAnalyzing:S,onAnalyze:()=>{},aiAnalysis:I?{isCorrect:I.score>80,score:I.score,feedbackHtml:""}:null,localAnalysis:I,onAddItem:Se,onEditItem:Ce,onDeleteItem:c,onRandomize:H,isModalOpen:le,editingItem:G,onCloseModal:()=>j(!1),onSaveItem:ze,ipa:P,showIpa:Q,isIpaLoading:ne,onToggleIpa:Me}),e.jsx(at,{isOpen:!!W,title:"Delete Phrase?",message:"Are you sure you want to remove this phrase from your pronunciation queue?",confirmText:"Delete",isProcessing:!1,onConfirm:D,onClose:()=>M(null),icon:null,confirmButtonClass:"bg-red-600 text-white hover:bg-red-700"})]})},pt=({scopedWord:o,onClose:T})=>e.jsx("div",{className:"flex flex-col h-full bg-white",children:e.jsx("div",{className:"flex-grow overflow-hidden",children:e.jsx(xt,{scopedWord:o,onClose:T})})});export{pt as MimicPractice};
