import{c as T,j as e,af as U,ag as F,ah as Je,Z as ce,r as u,ai as de,d as $,$ as xe,aj as We,ak as $e,al as Ue,am as Ge,an as Be,y as ue,ao as me,D as Ke,C as he,Y as qe,ap as Ye,F as Ze,q as Xe,a5 as Qe,z as ea,aq as ge,ar as aa,E as te,G as ta,g as se,a6 as H,R as sa,as as na,at as la,au as ra,av as ia,aw as oa,ax as ne,i as le,ay as ca,o as re}from"./index-Gt8en8nb.js";import{S as da}from"./school-DIAmz0pt.js";import{B as xa,C as ua,D as J}from"./WordTable_UI-DBhYbT-8.js";import{E as ma}from"./ear-CwAIiGZ_.js";import{U as ha}from"./upload-BAL9_xSL.js";import{D as ga}from"./download-yI9lKb8k.js";import{C as pa}from"./circle-BWUoDYmY.js";import{T as ba}from"./target-CDeXYkpk.js";import{T as fa}from"./terminal-3ZeC5Ubl.js";import"./TagBrowser-BKDot2N6.js";import"./search-zoyTxZGY.js";import"./square-check-big-CuUXJce7.js";import"./chevron-left-CHoHolDa.js";/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ja=T("FileJson",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 12a1 1 0 0 0-1 1v1a1 1 0 0 1-1 1 1 1 0 0 1 1 1v1a1 1 0 0 0 1 1",key:"1oajmo"}],["path",{d:"M14 18a1 1 0 0 0 1-1v-1a1 1 0 0 1 1-1 1 1 0 0 1-1-1v-1a1 1 0 0 0-1-1",key:"mpwhp6"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const va=T("Hash",[["line",{x1:"4",x2:"20",y1:"9",y2:"9",key:"4lhtct"}],["line",{x1:"4",x2:"20",y1:"15",y2:"15",key:"vyu0kd"}],["line",{x1:"10",x2:"8",y1:"3",y2:"21",key:"1ggp8o"}],["line",{x1:"16",x2:"14",y1:"3",y2:"21",key:"weycgp"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Na=T("LayoutTemplate",[["rect",{width:"18",height:"7",x:"3",y:"3",rx:"1",key:"f1a2em"}],["rect",{width:"9",height:"7",x:"3",y:"14",rx:"1",key:"jqznyg"}],["rect",{width:"5",height:"7",x:"16",y:"14",rx:"1",key:"q5h2i8"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wa=T("ShieldAlert",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"M12 8v4",key:"1got3b"}],["path",{d:"M12 16h.01",key:"1drbdi"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ya=T("Table",[["path",{d:"M12 3v18",key:"108xh3"}],["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pe=T("Wrench",[["path",{d:"M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.77-3.77a6 6 0 0 1-7.94 7.94l-6.91 6.91a2.12 2.12 0 0 1-3-3l6.91-6.91a6 6 0 0 1 7.94-7.94l-3.76 3.76z",key:"cbrjhi"}]]),ka=["Vietnamese","Spanish","Chinese (Simplified)","Chinese (Traditional)","Japanese","Korean","French","German","Italian","Portuguese","Russian","Arabic","Hindi","Thai","Indonesian","Turkish"],Ca=[{level:1,title:"Vocab Novice"},{level:5,title:"Word Apprentice"},{level:10,title:"Lexical Explorer"},{level:20,title:"Master Grammarian"},{level:30,title:"IELTS Wordsmith"},{level:50,title:"IELTS Luminary"}],Sa=({profileData:a,onProfileChange:s,onSaveProfile:l})=>{const o=Ca.some(r=>r.title===a.role);return e.jsxs("section",{className:"bg-white p-8 rounded-[2.5rem] border border-neutral-200 shadow-sm flex flex-col space-y-8",children:[e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:"p-3 bg-neutral-100 text-neutral-600 rounded-2xl",children:e.jsx(U,{size:24})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-black text-neutral-900",children:"Your Profile"}),e.jsx("p",{className:"text-xs text-neutral-400",children:"Basic context for your learning profile."})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 pt-4 border-t border-neutral-100",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-[10px] font-black text-neutral-400 uppercase tracking-widest px-1 mb-2",children:"Display Name"}),e.jsx("input",{name:"name",value:a.name,onChange:s,className:"w-full px-4 py-3 bg-white border border-neutral-200 rounded-xl font-bold"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-[10px] font-black text-neutral-400 uppercase tracking-widest px-1 mb-2",children:"Role / Title"}),e.jsx("input",{name:"role",value:a.role,onChange:s,placeholder:"e.g., Student",className:"w-full px-4 py-3 bg-neutral-50 border border-neutral-200 rounded-xl font-medium",readOnly:o})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-[10px] font-black text-neutral-400 uppercase tracking-widest px-1 mb-2",children:"Current Level"}),e.jsx("input",{name:"currentLevel",value:a.currentLevel,onChange:s,placeholder:"e.g., Intermediate, Advanced",className:"w-full px-4 py-3 bg-neutral-50 border border-neutral-200 rounded-xl font-medium"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-[10px] font-black text-neutral-400 uppercase tracking-widest px-1 mb-2",children:"Target"}),e.jsx("input",{name:"target",value:a.target,onChange:s,placeholder:"e.g., Fluent communication, Academic writing",className:"w-full px-4 py-3 bg-neutral-50 border border-neutral-200 rounded-xl font-medium"})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsxs("label",{className:"block text-[10px] font-black text-neutral-400 uppercase tracking-widest px-1 mb-2 flex items-center gap-2",children:[e.jsx(F,{size:12})," Native Language"]}),e.jsx("select",{name:"nativeLanguage",value:a.nativeLanguage,onChange:s,className:"w-full px-4 py-3 bg-neutral-50 border border-neutral-200 rounded-xl font-medium appearance-none",children:ka.map(r=>e.jsx("option",{value:r,children:r},r))})]})]})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:"p-3 bg-amber-50 text-amber-600 rounded-2xl",children:e.jsx(F,{size:24})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-black text-neutral-900",children:"Content Preferences"}),e.jsx("p",{className:"text-xs text-neutral-400",children:"Settings for generated materials."})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 pt-4 border-t border-neutral-100",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-[10px] font-black text-neutral-400 uppercase tracking-widest px-1 mb-2 flex items-center gap-2",children:[e.jsx(F,{size:12})," Content Language"]}),e.jsxs("select",{name:"lessonLanguage",value:a.lessonLanguage,onChange:s,className:"w-full px-4 py-3 bg-neutral-50 border border-neutral-200 rounded-xl font-medium appearance-none",children:[e.jsx("option",{value:"English",children:"English"}),e.jsx("option",{value:"Vietnamese",children:"Vietnamese"})]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-[10px] font-black text-neutral-400 uppercase tracking-widest px-1 mb-2 flex items-center gap-2",children:[e.jsx(Je,{size:12})," Target Audience"]}),e.jsxs("select",{name:"lessonAudience",value:a.lessonAudience,onChange:s,className:"w-full px-4 py-3 bg-neutral-50 border border-neutral-200 rounded-xl font-medium appearance-none",children:[e.jsx("option",{value:"Kid",children:"Kid"}),e.jsx("option",{value:"Adult",children:"Adult"})]})]})]})]}),e.jsxs("button",{onClick:l,className:"w-full py-4 bg-neutral-900 text-white rounded-2xl font-black text-xs hover:bg-neutral-800 transition-all flex items-center justify-center space-x-2",children:[e.jsx(ce,{size:16})," ",e.jsx("span",{children:"SAVE PROFILE"})]})]})},Aa=[{id:"woman_teacher",label:"Ms. Learn",url:"https://raw.githubusercontent.com/Tarikul-Islam-Anik/Animated-Fluent-Emojis/master/Emojis/People/Woman%20Teacher.png",bg:"bg-indigo-50"},{id:"man_teacher",label:"Mr. Teach",url:"https://raw.githubusercontent.com/Tarikul-Islam-Anik/Animated-Fluent-Emojis/master/Emojis/People/Man%20Teacher.png",bg:"bg-blue-50"},{id:"fox",label:"Vix (Fox)",url:"https://raw.githubusercontent.com/Tarikul-Islam-Anik/Animated-Fluent-Emojis/master/Emojis/Animals/Fox.png",bg:"bg-orange-100"},{id:"koala",label:"Nami (Koala)",url:"https://raw.githubusercontent.com/Tarikul-Islam-Anik/Animated-Fluent-Emojis/master/Emojis/Animals/Koala.png",bg:"bg-teal-100"},{id:"pet",label:"Mochi (Cat)",url:"https://raw.githubusercontent.com/Tarikul-Islam-Anik/Animated-Fluent-Emojis/master/Emojis/Animals/Cat%20Face.png",bg:"bg-pink-100"},{id:"owl",label:"Hootie (Owl)",url:"https://raw.githubusercontent.com/Tarikul-Islam-Anik/Animated-Fluent-Emojis/master/Emojis/Animals/Owl.png",bg:"bg-yellow-100"},{id:"panda",label:"Bamboo (Panda)",url:"https://raw.githubusercontent.com/Tarikul-Islam-Anik/Animated-Fluent-Emojis/master/Emojis/Animals/Panda.png",bg:"bg-emerald-100"},{id:"unicorn",label:"Spark (Unicorn)",url:"https://raw.githubusercontent.com/Tarikul-Islam-Anik/Animated-Fluent-Emojis/master/Emojis/Animals/Unicorn.png",bg:"bg-purple-100"}],ie=({label:a,langCode:s,currentVoice:l,serverData:o,onChange:r,onPreview:m})=>{if(!o)return e.jsxs("div",{className:"space-y-1 opacity-50",children:[e.jsx("label",{className:"text-[10px] font-black text-neutral-400 uppercase tracking-widest px-1",children:a}),e.jsx("div",{className:"w-full bg-neutral-100 border border-neutral-200 rounded-xl px-4 py-2 text-xs font-bold text-neutral-400",children:"Offline"})]});const t=o.voices.filter(h=>h.language===s||h.language.toLowerCase().startsWith(s)),d=t.reduce((h,j)=>{const c=j.accent||"Standard";return h[c]||(h[c]=[]),h[c].push(j),h},{}),p=h=>{const j=h.target.value;if(!j){const i=s==="en"?"en_US":"vi_VN";r("",i),m("",i);return}const c=t.find(i=>i.name===j);c&&(r(c.name,c.accent),setTimeout(()=>m(c.name,c.accent),100))};return e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"flex justify-between items-center px-1",children:[e.jsx("label",{className:"text-[10px] font-black text-neutral-400 uppercase tracking-widest",children:a}),e.jsxs("button",{type:"button",onClick:()=>m(l,s==="en"?"en_US":"vi_VN"),className:"text-[10px] font-black text-indigo-600 uppercase tracking-widest flex items-center gap-1 hover:underline",children:[e.jsx(Ke,{size:10,fill:"currentColor"})," Test"]})]}),e.jsxs("div",{className:"relative",children:[e.jsxs("select",{value:l,onChange:p,className:"w-full appearance-none bg-white border border-neutral-100 rounded-xl px-4 py-2 pr-10 text-xs font-bold focus:ring-2 focus:ring-neutral-900 outline-none transition-all",children:[e.jsx("option",{value:"",children:"Default OS"}),Object.entries(d).map(([h,j])=>e.jsx("optgroup",{label:h.replace(/[_]/g," ").toUpperCase(),children:j.map(c=>e.jsx("option",{value:c.name,children:c.name},c.name))},h))]}),e.jsx(he,{size:14,className:"absolute right-3 top-1/2 -translate-y-1/2 text-neutral-300 pointer-events-none"})]})]})},oe=({type:a,config:s,serverData:l,onUpdate:o,isActive:r})=>{const m=(t,d,p)=>{ue(t==="en"?"This is a sample of my voice.":"Đây là mẫu giọng nói của mình.",!0,t,d,p)};return e.jsxs("div",{className:`p-6 rounded-[2rem] border-2 transition-all space-y-5 ${r?"bg-white border-neutral-900 shadow-md scale-[1.02]":"bg-neutral-50/50 border-neutral-100 opacity-60"}`,children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`p-2 rounded-xl ${r?"bg-neutral-900 text-white":"bg-neutral-200 text-neutral-400"}`,children:e.jsx(U,{size:18})}),e.jsxs("span",{className:"text-sm font-black uppercase tracking-widest",children:[a," Coach"]})]}),r&&e.jsx("span",{className:"px-2 py-0.5 bg-green-50 text-white rounded text-[8px] font-black uppercase tracking-widest",children:"Active"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx("label",{className:"text-[10px] font-black text-neutral-400 uppercase tracking-widest px-1",children:"Display Name"}),e.jsx("input",{type:"text",value:s.name,onChange:t=>o({name:t.target.value}),placeholder:"e.g. Victor",className:"w-full px-4 py-2 bg-neutral-50 border border-neutral-200 rounded-xl text-xs font-bold focus:ring-2 focus:ring-neutral-900 outline-none"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-[10px] font-black text-neutral-400 uppercase tracking-widest px-1",children:"Avatar Identity"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:Aa.map(t=>e.jsx("button",{onClick:()=>o({avatar:t.id}),className:`w-10 h-10 rounded-xl overflow-hidden border-2 transition-all p-1 ${s.avatar===t.id?"border-neutral-900 bg-white":"border-transparent bg-neutral-100 opacity-50"}`,children:e.jsx("img",{src:t.url,className:"w-full h-full object-contain",alt:t.label})},t.id))})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-[10px] font-black text-neutral-400 uppercase tracking-widest px-1",children:"Persona"}),e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsxs("button",{type:"button",onClick:()=>o({persona:"friendly_elementary"}),className:`flex items-center gap-2 px-3 py-2 rounded-xl border text-[10px] font-bold uppercase tracking-wider transition-all ${s.persona==="friendly_elementary"?"bg-amber-50 border-amber-200 text-amber-700":"bg-white border-neutral-100 text-neutral-400"}`,children:[e.jsx(da,{size:14})," ",e.jsx("span",{children:"Teacher"})]}),e.jsxs("button",{type:"button",onClick:()=>o({persona:"professional_professor"}),className:`flex items-center gap-2 px-3 py-2 rounded-xl border text-[10px] font-bold uppercase tracking-wider transition-all ${s.persona==="professional_professor"?"bg-indigo-50 border-indigo-200 text-indigo-700":"bg-white border-neutral-100 text-neutral-400"}`,children:[e.jsx(me,{size:14})," ",e.jsx("span",{children:"Professor"})]})]})]}),e.jsx(ie,{label:"English Voice",langCode:"en",currentVoice:s.enVoice,serverData:l,onChange:(t,d)=>o({enVoice:t,enAccent:d}),onPreview:(t,d)=>m("en",t,d)}),e.jsx(ie,{label:"Vietnamese Voice",langCode:"vi",currentVoice:s.viVoice,serverData:l,onChange:(t,d)=>o({viVoice:t,viAccent:d}),onPreview:(t,d)=>m("vi",t,d)})]})]})},Ea=({config:a,onConfigChange:s,onSaveSettings:l})=>{const[o,r]=u.useState(null),[m,t]=u.useState("checking"),d=async()=>{t("checking");const i=await Be(a.audioCoach.serverPort);i?(r(i),t("connected")):(t("disconnected"),r(null))};u.useEffect(()=>{d()},[a.audioCoach.serverPort]);const p=i=>{s("audioCoach","activeCoach",i);const f=a.audioCoach.coaches[i];setTimeout(()=>{ue(`I am now your active coach. Call me ${f.name}.`,!0,"en",f.enVoice,f.enAccent)},100)},h=(i,f)=>{const k={...a.audioCoach.coaches};k[i]={...k[i],...f},s("audioCoach","coaches",k)},j=(i,f)=>{const k=parseInt(f.target.value,10);isNaN(k)||s("audioCoach",i,k)},c=i=>{s("interface","buddyVoiceEnabled",i)};return e.jsxs("section",{className:"bg-white p-8 rounded-[2.5rem] border border-neutral-200 shadow-sm flex flex-col space-y-8 animate-in fade-in duration-300",children:[e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:"p-3 bg-neutral-100 text-neutral-600 rounded-2xl",children:e.jsx(de,{size:24})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-black text-neutral-900",children:"Audio Coach"}),e.jsx("p",{className:"text-xs text-neutral-400",children:"Personalize your study companions."})]})]}),e.jsxs("button",{onClick:l,className:"px-5 py-2.5 bg-neutral-900 text-white rounded-xl font-black text-[10px] flex items-center space-x-2 active:scale-95 uppercase tracking-widest hover:bg-neutral-800 transition-all shadow-md",children:[e.jsx(ce,{size:14}),e.jsx("span",{children:"Save"})]})]}),e.jsxs("div",{className:"p-5 bg-neutral-50 rounded-2xl border border-neutral-100 flex flex-col md:flex-row items-center gap-6",children:[e.jsx("div",{className:"flex-1 space-y-3",children:e.jsxs("div",{className:"flex items-center gap-2",children:[m==="connected"?e.jsx($,{size:16,className:"text-emerald-500"}):e.jsx(xe,{size:16,className:"text-red-500"}),e.jsx("span",{className:"text-xs font-black uppercase tracking-wider text-neutral-600",children:"Local TTS Server"}),e.jsxs("div",{className:"relative",children:[e.jsx(va,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-neutral-300",size:14}),e.jsx("input",{type:"number",value:a.audioCoach.serverPort,onChange:i=>j("serverPort",i),className:"w-20 pl-8 pr-2 py-1.5 bg-white border border-neutral-200 rounded-lg text-xs font-bold focus:ring-2 focus:ring-neutral-900 outline-none",placeholder:"3000"})]})]})}),e.jsx("button",{onClick:d,className:"p-2.5 bg-white border border-neutral-200 text-neutral-500 rounded-xl hover:bg-neutral-50 transition-all shadow-sm",children:e.jsx(We,{size:16})})]}),e.jsx("div",{className:"space-y-4 pt-4 border-t border-neutral-100",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center gap-2 text-[10px] font-black text-neutral-400 uppercase tracking-widest px-1",children:[e.jsx($e,{size:12})," Dialogue Voice"]}),e.jsxs("label",{onClick:()=>c(!a.interface.buddyVoiceEnabled),className:"flex items-center justify-between px-4 py-3 bg-neutral-100 border border-neutral-200 rounded-xl cursor-pointer hover:bg-neutral-200 transition-all",children:[e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"text-xs font-black text-neutral-700",children:"Enable Dialogue"}),e.jsx("span",{className:"text-[10px] text-neutral-500 font-medium",children:"Read advice bubbles aloud"})]}),e.jsx("div",{className:`w-9 h-5 rounded-full transition-all flex items-center p-1 ${a.interface.buddyVoiceEnabled?"bg-neutral-900":"bg-neutral-300"}`,children:e.jsx("div",{className:`w-3.5 h-3.5 bg-white rounded-full shadow-sm transition-transform ${a.interface.buddyVoiceEnabled?"translate-x-4":"translate-x-0"}`})})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center gap-2 text-[10px] font-black text-neutral-400 uppercase tracking-widest px-1",children:[e.jsx(Ue,{size:12})," STT Engine"]}),e.jsxs("div",{className:"px-4 py-3 bg-neutral-100 border border-neutral-200 rounded-xl flex items-center justify-between",children:[e.jsx("span",{className:"text-xs font-black text-neutral-700 uppercase tracking-widest",children:"Browser (Native)"}),e.jsx("span",{className:"px-2 py-0.5 rounded text-[8px] font-black uppercase border bg-emerald-50 text-emerald-700 border-emerald-200",children:"Connected"})]})]})]})}),e.jsxs("div",{className:"space-y-4 pt-4 border-t border-neutral-100",children:[e.jsxs("div",{className:"flex justify-between items-center px-1",children:[e.jsx("label",{className:"text-[10px] font-black text-neutral-400 uppercase tracking-widest",children:"Active Companion"}),e.jsxs("div",{className:"flex bg-neutral-100 p-1 rounded-xl",children:[e.jsx("button",{onClick:()=>p("male"),className:`px-4 py-2 text-[10px] font-black uppercase rounded-lg transition-all ${a.audioCoach.activeCoach==="male"?"bg-white shadow-sm text-neutral-900":"text-neutral-400 hover:text-neutral-600"}`,children:"Male"}),e.jsx("button",{onClick:()=>p("female"),className:`px-4 py-2 text-[10px] font-black uppercase rounded-lg transition-all ${a.audioCoach.activeCoach==="female"?"bg-white shadow-sm text-neutral-900":"text-neutral-400 hover:text-neutral-600"}`,children:"Female"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsx(oe,{type:"male",config:a.audioCoach.coaches.male,serverData:o,isActive:a.audioCoach.activeCoach==="male",onUpdate:i=>h("male",i)}),e.jsx(oe,{type:"female",config:a.audioCoach.coaches.female,serverData:o,isActive:a.audioCoach.activeCoach==="female",onUpdate:i=>h("female",i)})]})]}),e.jsxs("div",{className:"p-4 bg-indigo-50 rounded-2xl border border-indigo-100 flex items-start gap-3",children:[e.jsx(Ge,{size:16,className:"text-indigo-500 mt-0.5 shrink-0"}),e.jsx("p",{className:"text-[10px] text-indigo-700 leading-relaxed font-medium",children:"Pronunciation practice uses your browser's built-in recognition engine for maximum compatibility and privacy."})]})]})},Ta=({junkTags:a,onJunkTagsChange:s})=>{const[l,o]=u.useState(""),r=()=>{const t=l.trim().toLowerCase();t&&!a.includes(t)&&s([...a,t].sort()),o("")},m=t=>{s(a.filter(d=>d!==t))};return e.jsxs("div",{className:"space-y-4 pt-4 border-t border-neutral-100",children:[e.jsxs("div",{className:"flex items-center gap-2 text-[10px] font-black text-neutral-400 uppercase tracking-widest px-1",children:[e.jsx(Ze,{size:12})," Junk Tag List"]}),e.jsxs("div",{className:"p-4 bg-neutral-50 rounded-2xl border border-neutral-100 space-y-3",children:[e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{value:l,onChange:t=>o(t.target.value),onKeyDown:t=>{t.key==="Enter"&&(t.preventDefault(),r())},placeholder:"Add a tag to remove...",className:"flex-1 px-3 py-2 bg-white border border-neutral-200 rounded-lg text-xs font-bold"}),e.jsx("button",{onClick:r,className:"p-2.5 bg-neutral-900 text-white rounded-lg flex items-center justify-center",children:e.jsx(Xe,{size:14})})]}),a.length>0?e.jsx("div",{className:"flex flex-wrap gap-2",children:a.map(t=>e.jsxs("div",{className:"flex items-center gap-1 bg-white pl-3 pr-1 py-1 rounded-full border border-neutral-200 text-xs font-bold text-neutral-700",children:[e.jsx("span",{children:t}),e.jsx("button",{onClick:()=>m(t),className:"p-1 text-neutral-400 hover:text-red-500 hover:bg-red-50 rounded-full",children:e.jsx(Qe,{size:12})})]},t))}):e.jsx("p",{className:"text-center text-xs text-neutral-400 py-2",children:"No junk tags defined."})]})]})},N=({checked:a,onChange:s,label:l,icon:o})=>e.jsxs("button",{onClick:s,className:`flex items-center gap-2 px-3 py-2 rounded-lg border transition-all ${a?"bg-indigo-50 border-indigo-200 text-indigo-800":"bg-white border-neutral-200 text-neutral-500 hover:bg-neutral-50"}`,children:[o&&e.jsx(o,{size:14}),a?e.jsx(Ye,{size:14}):e.jsx(pa,{size:14}),e.jsx("span",{className:"text-xs font-bold uppercase",children:l})]}),za=a=>{const{jsonInputRef:s,dataScope:l,onDataScopeChange:o,onJSONImport:r,onJSONExport:m,isNormalizing:t,onOpenNormalizeModal:d,junkTags:p,onJunkTagsChange:h,normalizeOptions:j,onNormalizeOptionsChange:c}=a,i=f=>{o({...l,[f]:!l[f]})};return e.jsxs("section",{className:"bg-white p-8 rounded-[2.5rem] border border-neutral-200 shadow-sm flex flex-col space-y-6",children:[e.jsxs("div",{className:"flex items-center space-x-4 mb-2",children:[e.jsx("div",{className:"p-3 bg-indigo-50 text-indigo-600 rounded-2xl",children:e.jsx(ja,{size:24})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-black text-neutral-900",children:"Data Management"}),e.jsx("p",{className:"text-xs text-neutral-400",children:"Backup, restore, and optimize your library."})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("label",{className:"text-[10px] font-black text-neutral-400 uppercase tracking-widest px-1",children:"Backup / Restore Content"}),e.jsxs("div",{className:"flex flex-wrap gap-2",children:[e.jsx(N,{checked:l.user,onChange:()=>i("user"),label:"User Profile"}),e.jsx(N,{checked:l.vocabulary,onChange:()=>i("vocabulary"),label:"Word Library"}),e.jsx(N,{checked:l.wordBook,onChange:()=>i("wordBook"),label:"Word Books",icon:xa}),e.jsx(N,{checked:l.lesson,onChange:()=>i("lesson"),label:"Lessons"}),e.jsx(N,{checked:l.reading,onChange:()=>i("reading"),label:"Reading"}),e.jsx(N,{checked:l.writing,onChange:()=>i("writing"),label:"Writing"}),e.jsx(N,{checked:l.speaking,onChange:()=>i("speaking"),label:"Speaking"}),e.jsx(N,{checked:l.listening,onChange:()=>i("listening"),label:"Listening"}),e.jsx(N,{checked:l.mimic,onChange:()=>i("mimic"),label:"Pronunciation Queue",icon:ma}),e.jsx(N,{checked:l.calendar,onChange:()=>i("calendar"),label:"Calendar",icon:ua})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("button",{onClick:()=>{var f;return(f=s.current)==null?void 0:f.click()},className:"py-4 border-2 border-neutral-900 text-neutral-900 rounded-2xl font-black text-xs hover:bg-neutral-50 transition-all flex items-center justify-center space-x-2",children:[e.jsx(ha,{size:16})," ",e.jsx("span",{children:"IMPORT"}),e.jsx("input",{type:"file",ref:s,className:"hidden",accept:".json",onChange:r})]}),e.jsxs("button",{onClick:m,className:"py-4 bg-neutral-900 text-white rounded-2xl font-black text-xs hover:bg-neutral-800 transition-all flex items-center justify-center space-x-2",children:[e.jsx(ga,{size:16})," ",e.jsx("span",{children:"EXPORT"})]})]}),e.jsx(Ta,{junkTags:p,onJunkTagsChange:h}),e.jsx("div",{className:"pt-4 border-t border-neutral-100 grid grid-cols-1 md:grid-cols-2 gap-3",children:e.jsxs("button",{onClick:d,disabled:t,className:"w-full py-4 bg-white border border-neutral-200 rounded-2xl text-neutral-600 hover:bg-neutral-50 transition-all flex items-center justify-center space-x-3 group",children:[e.jsx("div",{className:"p-2 bg-neutral-100 group-hover:bg-orange-50 rounded-lg transition-colors",children:t?e.jsx(qe,{size:16,className:"animate-spin text-orange-600"}):e.jsx(pe,{size:16,className:"text-orange-600"})}),e.jsxs("div",{className:"text-left",children:[e.jsx("div",{className:"text-xs font-black uppercase tracking-widest leading-none",children:"Normalize Data"}),e.jsx("div",{className:"text-[9px] font-bold text-neutral-400 mt-1",children:"Clean junk tags & legacy data"})]})]})})]})},Ia=({srsConfig:a,onSrsConfigChange:s,onResetSrsConfig:l,onSaveSettings:o})=>e.jsxs("section",{className:"bg-white p-8 rounded-[2.5rem] border border-neutral-200 shadow-sm flex flex-col space-y-6",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:"p-3 bg-purple-50 text-purple-600 rounded-2xl",children:e.jsx(ea,{size:24})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-black text-neutral-900",children:"Spaced Repetition Algorithm"}),e.jsx("p",{className:"text-xs text-neutral-400",children:"Customize the learning intervals and multipliers."})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-x-6 gap-y-4 pt-4 border-t border-neutral-100",children:[e.jsx("div",{className:"col-span-2 text-[10px] font-black text-neutral-400 uppercase tracking-widest px-1",children:"Initial Intervals"}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-neutral-600 mb-1",children:"New word (Easy)"}),e.jsx("input",{type:"number",step:"1",min:"1",name:"initialEasy",value:a.initialEasy,onChange:s,className:"w-full px-4 py-2 bg-neutral-50 border border-neutral-200 rounded-xl font-bold"}),e.jsx("p",{className:"text-[9px] text-neutral-400 mt-1",children:"Next review in X days."})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-neutral-600 mb-1",children:"New word (Hard)"}),e.jsx("input",{type:"number",step:"1",min:"1",name:"initialHard",value:a.initialHard,onChange:s,className:"w-full px-4 py-2 bg-neutral-50 border border-neutral-200 rounded-xl font-bold"}),e.jsx("p",{className:"text-[9px] text-neutral-400 mt-1",children:"Next review in X days."})]}),e.jsx("div",{className:"col-span-2 text-[10px] font-black text-neutral-400 uppercase tracking-widest px-1 pt-2",children:"Interval Multipliers"}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-neutral-600 mb-1",children:"'Easy' after 'Easy'"}),e.jsx("input",{type:"number",step:"0.1",min:"1",name:"easyEasy",value:a.easyEasy,onChange:s,className:"w-full px-4 py-2 bg-neutral-50 border border-neutral-200 rounded-xl font-bold"}),e.jsx("p",{className:"text-[9px] text-neutral-400 mt-1",children:"Grows interval fastest (e.g., 2.5x)."})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-neutral-600 mb-1",children:"'Easy' after 'Hard'"}),e.jsx("input",{type:"number",step:"0.1",min:"1",name:"hardEasy",value:a.hardEasy,onChange:s,className:"w-full px-4 py-2 bg-neutral-50 border border-neutral-200 rounded-xl font-bold"}),e.jsx("p",{className:"text-[9px] text-neutral-400 mt-1",children:"Helps recover from a 'Hard' rating (e.g., 2.0x)."})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-neutral-600 mb-1",children:"'Hard' after 'Hard'"}),e.jsx("input",{type:"number",step:"0.1",min:"1",name:"hardHard",value:a.hardHard,onChange:s,className:"w-full px-4 py-2 bg-neutral-50 border border-neutral-200 rounded-xl font-bold"}),e.jsx("p",{className:"text-[9px] text-neutral-400 mt-1",children:"Slowly increases interval (e.g., 1.3x)."})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-neutral-600 mb-1",children:"'Hard' after 'Easy' (Penalty)"}),e.jsx("input",{type:"number",step:"0.1",max:"1",name:"easyHardPenalty",value:a.easyHardPenalty,onChange:s,className:"w-full px-4 py-2 bg-neutral-50 border border-neutral-200 rounded-xl font-bold"}),e.jsx("p",{className:"text-[9px] text-neutral-400 mt-1",children:"Reduces interval if you forget (e.g., 0.5x)."})]})]}),e.jsxs("div",{className:"flex gap-3 pt-4 border-t border-neutral-100",children:[e.jsx("button",{onClick:l,type:"button",className:"flex-1 py-3 bg-neutral-100 text-neutral-500 rounded-xl font-bold text-xs uppercase tracking-widest hover:bg-neutral-200 transition-all",children:"Reset Defaults"}),e.jsx("button",{onClick:o,type:"button",className:"flex-1 py-3 bg-neutral-900 text-white rounded-xl font-bold text-xs uppercase tracking-widest hover:bg-neutral-800 transition-all",children:"Save Settings"})]})]}),La=({goalConfig:a,onGoalConfigChange:s,onSaveSettings:l})=>e.jsxs("section",{className:"bg-white p-8 rounded-[2.5rem] border border-neutral-200 shadow-sm flex flex-col space-y-6",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:"p-3 bg-green-50 text-green-600 rounded-2xl",children:e.jsx(ba,{size:24})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-black text-neutral-900",children:"Daily Goals"}),e.jsx("p",{className:"text-xs text-neutral-400",children:"Set your daily learning and review targets."})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-x-6 gap-y-4 pt-4 border-t border-neutral-100",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-neutral-600 mb-1",children:"Max New Words per Day"}),e.jsx("input",{type:"number",step:"1",min:"1",name:"max_learn_per_day",value:a.max_learn_per_day,onChange:s,className:"w-full px-4 py-2 bg-neutral-50 border border-neutral-200 rounded-xl font-bold"}),e.jsx("p",{className:"text-[9px] text-neutral-400 mt-1",children:"Target for learning new vocabulary."})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-neutral-600 mb-1",children:"Max Reviews per Day"}),e.jsx("input",{type:"number",step:"1",min:"1",name:"max_review_per_day",value:a.max_review_per_day,onChange:s,className:"w-full px-4 py-2 bg-neutral-50 border border-neutral-200 rounded-xl font-bold"}),e.jsx("p",{className:"text-[9px] text-neutral-400 mt-1",children:"Target for reviewing existing vocabulary."})]})]}),e.jsx("div",{className:"flex justify-end pt-4 border-t border-neutral-100",children:e.jsx("button",{onClick:l,className:"w-full md:w-auto py-3 px-6 bg-neutral-900 text-white rounded-2xl font-black text-xs hover:bg-neutral-800 transition-all flex items-center justify-center space-x-2",children:e.jsx("span",{children:"SAVE GOALS"})})})]}),Oa=({onOpenClearProgressModal:a,onOpenNukeModal:s,isAdmin:l,onToggleAdmin:o})=>e.jsxs("section",{className:"bg-red-50 p-8 rounded-[2.5rem] border-2 border-red-100 shadow-sm flex flex-col space-y-6",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:"p-3 bg-red-100 text-red-600 rounded-2xl",children:e.jsx(ge,{size:24})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-black text-red-900",children:"Danger Zone"}),e.jsx("p",{className:"text-xs text-red-500",children:"Actions in this zone are irreversible."})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("button",{onClick:o,className:`p-4 border-2 rounded-2xl text-left transition-colors group ${l?"bg-neutral-900 border-neutral-900":"bg-white border-red-100 hover:border-red-500"}`,children:[e.jsxs("div",{className:`font-black flex items-center gap-2 ${l?"text-white":"text-red-600"}`,children:[e.jsx(fa,{size:16}),l?"Disable Developer Mode":"Enable Developer Mode"]}),e.jsx("div",{className:`text-xs mt-1 ${l?"text-neutral-400":"text-neutral-500"}`,children:l?"Admin tools enabled in Discover.":"Unlocks cheat tools for testing."})]}),e.jsx("div",{className:"hidden md:block"})," ",e.jsxs("button",{onClick:a,className:"p-4 bg-white border-2 border-red-100 rounded-2xl text-left hover:border-red-500 transition-colors group",children:[e.jsx("div",{className:"font-black text-red-600",children:"Clear All Progress"}),e.jsx("div",{className:"text-xs text-neutral-500 mt-1",children:"Reset all SRS data, but keep your words."})]}),e.jsxs("button",{onClick:s,className:"p-4 bg-white border-2 border-red-100 rounded-2xl text-left hover:border-red-500 transition-colors group",children:[e.jsx("div",{className:"font-black text-red-600",children:"Reset Full Library"}),e.jsx("div",{className:"text-xs text-neutral-500 mt-1",children:"Delete ALL your data and restore the app to its initial state."})]})]})]}),W=[{id:"PROFILE",label:"Profile",icon:U},{id:"INTERFACE",label:"Interface Defaults",icon:Na},{id:"AUDIO_COACH",label:"Audio Coach",icon:de},{id:"LEARNING",label:"Learning",icon:me},{id:"DATA",label:"Data Management",icon:aa},{id:"DANGER",label:"Danger Zone",icon:ge,color:"text-red-500"}],Pa=a=>{const{currentView:s,isDropdownOpen:l,notification:o,importStatus:r,setCurrentView:m,setIsDropdownOpen:t,mobileNavRef:d,children:p}=a,h=W.find(c=>c.id===s),j=()=>{switch(s){case"PROFILE":return e.jsx(Sa,{profileData:a.profileData,onProfileChange:a.onProfileChange,onSaveProfile:a.onSaveProfile});case"AUDIO_COACH":return e.jsx(Ea,{config:a.config,onConfigChange:a.onConfigChange,onSaveSettings:a.onSaveSettings});case"DATA":return e.jsx(za,{jsonInputRef:a.jsonInputRef,dataScope:a.dataScope,onDataScopeChange:a.onDataScopeChange,onJSONImport:a.onJSONImport,onJSONExport:a.onJSONExport,isNormalizing:a.isNormalizing,onOpenNormalizeModal:a.onOpenNormalizeModal,junkTags:a.junkTags,onJunkTagsChange:a.onJunkTagsChange,normalizeOptions:a.normalizeOptions,onNormalizeOptionsChange:a.onNormalizeOptionsChange});case"LEARNING":return e.jsxs("div",{className:"space-y-6 animate-in fade-in duration-300",children:[e.jsx(La,{goalConfig:a.goalConfig,onGoalConfigChange:a.onGoalConfigChange,onSaveSettings:a.onSaveSettings}),e.jsx(Ia,{srsConfig:a.config.srs,onSrsConfigChange:a.onSrsConfigChange,onResetSrsConfig:a.onResetSrsConfig,onSaveSettings:a.onSaveSettings})]});case"DANGER":return e.jsx(Oa,{onOpenClearProgressModal:a.onOpenClearProgressModal,onOpenNukeModal:a.onOpenNukeModal,isAdmin:a.isAdmin,onToggleAdmin:a.onToggleAdmin});case"INTERFACE":return null;default:return null}};return e.jsxs("div",{className:"max-w-6xl mx-auto space-y-10 pb-20",children:[e.jsxs("header",{children:[e.jsx("h2",{className:"text-3xl font-black text-neutral-900 tracking-tight",children:"Settings"}),e.jsx("p",{className:"text-neutral-500 mt-2 font-medium",children:"Manage your data and personalize your learning experience."})]}),o&&e.jsxs("div",{className:"fixed top-10 left-1/2 -translate-x-1/2 z-[300] bg-neutral-900 text-white px-6 py-3 rounded-2xl shadow-2xl border border-neutral-800 animate-in slide-in-from-top-4 flex items-center space-x-2",children:[e.jsx($,{size:18,className:"text-green-400"}),e.jsx("span",{className:"text-sm font-bold",children:o})]}),r&&e.jsx("div",{className:`p-6 rounded-[2rem] border-2 animate-in slide-in-from-top-4 ${r.type==="success"?"bg-green-50 border-green-100 text-green-700":"bg-red-50 border-red-100 text-red-700"}`,children:e.jsxs("div",{className:"flex items-start space-x-4",children:[r.type==="success"?e.jsx($,{size:24}):e.jsx(xe,{size:24}),e.jsxs("div",{children:[e.jsx("div",{className:"font-black text-lg",children:r.message}),r.detail&&e.jsx("div",{className:"text-sm opacity-80 mt-1 font-medium",children:r.detail})]})]})}),e.jsxs("div",{className:"relative lg:hidden mb-6",ref:d,children:[e.jsxs("button",{onClick:()=>t(!l),className:"w-full flex items-center justify-between text-left px-4 py-3 bg-white border border-neutral-200 rounded-xl text-sm font-bold text-neutral-900 hover:bg-neutral-50 transition-colors shadow-sm",children:[h&&e.jsxs("span",{className:"flex items-center space-x-3",children:[e.jsx(h.icon,{size:18,className:h.color}),e.jsx("span",{children:h.label})]}),e.jsx(he,{size:18,className:`text-neutral-400 transition-transform ${l?"rotate-180":""}`})]}),l&&e.jsx("div",{className:"absolute top-full mt-2 w-full bg-white rounded-2xl shadow-lg border border-neutral-100 z-20 p-2 animate-in fade-in duration-150",children:W.map(c=>e.jsxs("button",{onClick:()=>{m(c.id),t(!1)},className:`w-full text-left flex items-center space-x-3 px-3 py-2 text-sm font-medium rounded-lg transition-colors ${s===c.id?"bg-neutral-900 text-white":`${c.color||"text-neutral-700"} hover:bg-neutral-50`}`,children:[e.jsx(c.icon,{size:16}),e.jsx("span",{children:c.label})]},c.id))})]}),e.jsxs("div",{className:"flex flex-col lg:flex-row gap-12",children:[e.jsx("aside",{className:"hidden lg:block lg:w-1/4",children:e.jsx("nav",{className:"space-y-1.5",children:W.map(c=>e.jsxs("button",{onClick:()=>m(c.id),className:`w-full flex items-center space-x-3 px-4 py-3 rounded-xl font-bold text-sm transition-colors ${s===c.id?"bg-neutral-100 text-neutral-900":`${c.color||"text-neutral-500"} hover:bg-neutral-50 hover:text-neutral-900`}`,children:[e.jsx(c.icon,{size:18}),e.jsx("span",{children:c.label})]},c.id))})}),e.jsx("main",{className:"flex-1 lg:w-3/4",children:e.jsxs("div",{className:"animate-in fade-in duration-300",children:[j(),p]},s)})]})]})},w=({checked:a,onChange:s,label:l,subLabel:o,icon:r})=>e.jsxs("label",{onClick:m=>{m.preventDefault(),s(!a)},className:"flex items-center justify-between px-4 py-3 cursor-pointer group hover:bg-neutral-50 rounded-xl transition-all border border-transparent hover:border-neutral-100",children:[e.jsxs("div",{className:"flex flex-col",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[r&&e.jsx(r,{size:14,className:a?"text-neutral-900":"text-neutral-400"}),e.jsx("span",{className:"text-xs font-bold text-neutral-700 group-hover:text-neutral-900",children:l})]}),o&&e.jsx("span",{className:"text-[10px] text-neutral-400 font-medium",children:o})]}),e.jsx("div",{className:`w-9 h-5 rounded-full transition-all flex items-center p-1 ${a?"bg-neutral-900":"bg-neutral-200"}`,children:e.jsx("div",{className:`w-3.5 h-3.5 bg-white rounded-full shadow-sm transition-transform ${a?"translate-x-4":"translate-x-0"}`})})]}),Va=()=>{const[a,s]=u.useState(()=>{try{const t=localStorage.getItem("ielts_pro_library_view_settings");return t?{...J,...JSON.parse(t)}:J}catch{return J}}),[l,o]=u.useState(()=>{const t={showHidden:!1,highlightFailed:!0,isLearnView:!0};try{const d=localStorage.getItem("ielts_pro_word_view_settings");return d?{...t,...JSON.parse(d)}:t}catch{return t}}),r=(t,d)=>{const p={...a,[t]:d};s(p),localStorage.setItem("ielts_pro_library_view_settings",JSON.stringify(p))},m=(t,d)=>{const p={...l,[t]:d};o(p),localStorage.setItem("ielts_pro_word_view_settings",JSON.stringify(p))};return e.jsxs("section",{className:"bg-white p-8 rounded-[2.5rem] border border-neutral-200 shadow-sm flex flex-col space-y-8 animate-in fade-in duration-300",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:"p-3 bg-teal-50 text-teal-600 rounded-2xl",children:e.jsx(te,{size:24})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-black text-neutral-900",children:"Interface Defaults"}),e.jsx("p",{className:"text-xs text-neutral-400",children:"Customize what you see across the app library and cards."})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-2 text-[10px] font-black text-neutral-400 uppercase tracking-widest px-1",children:[e.jsx(ya,{size:12})," Word Library Columns"]}),e.jsxs("div",{className:"bg-white border border-neutral-200 rounded-2xl p-1 grid grid-cols-1 md:grid-cols-2 gap-x-4",children:[e.jsx(w,{checked:a.showMeaning,onChange:t=>r("showMeaning",t),label:"Definition / Meaning"}),e.jsx(w,{checked:a.blurMeaning,onChange:t=>r("blurMeaning",t),label:"Blur Definition (Spoiler)",subLabel:"Hide meaning until hovered"}),e.jsx(w,{checked:a.showIPA,onChange:t=>r("showIPA",t),label:"IPA Phonetic"}),e.jsx(w,{checked:a.showProgress,onChange:t=>r("showProgress",t),label:"Progress Badge"}),e.jsx(w,{checked:a.showDue,onChange:t=>r("showDue",t),label:"Due Date"}),e.jsx(w,{checked:a.showAiIcon,onChange:t=>r("showAiIcon",t),label:"AI Refined Indicator"}),e.jsx(w,{checked:a.showComplexity,onChange:t=>r("showComplexity",t),label:"Complexity Column"})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-2 text-[10px] font-black text-neutral-400 uppercase tracking-widest px-1",children:[e.jsx(te,{size:12})," Word Detail View"]}),e.jsxs("div",{className:"bg-white border border-neutral-200 rounded-2xl p-1 grid grid-cols-1 md:grid-cols-2 gap-x-4",children:[e.jsx(w,{checked:l.isLearnView,onChange:t=>m("isLearnView",t),label:"Learn View by Default",subLabel:"Hides extra info like examples, tags"}),e.jsx(w,{checked:l.highlightFailed,onChange:t=>m("highlightFailed",t),label:"Highlight Failed Tests",subLabel:"Red highlight for failed drill items"}),e.jsx(w,{checked:l.showHidden,onChange:t=>m("showHidden",t),label:"Show Ignored Items",subLabel:"Show ignored collocations/family members"})]})]})]})},Ya=({user:a,onUpdateUser:s,onRefresh:l,onNuke:o,apiUsage:r})=>{var Q,ee;const m=u.useRef(null),t=u.useRef(null),{showToast:d}=ta(),[p,h]=u.useState("PROFILE"),[j,c]=u.useState(!1),[i,f]=u.useState({user:!0,vocabulary:!0,lesson:!0,reading:!0,writing:!0,speaking:!0,listening:!0,mimic:!0,wordBook:!0,calendar:!0}),[k,O]=u.useState(null),[be,P]=u.useState(!1),[fe,V]=u.useState(!1),[je,G]=u.useState(!1),[D,C]=u.useState(null),[ve,M]=u.useState(!1),[B,K]=u.useState(!1),[S,L]=u.useState({removeJunkTags:!0,removeMultiWordData:!0,cleanHeadwords:!0}),[q,Y]=u.useState(""),[A,R]=u.useState(se()),[Ne,we]=u.useState([]),[ye,Z]=u.useState(!0),[ke,Da]=u.useState(!1),[y,X]=u.useState({name:a.name,role:a.role||"",currentLevel:a.currentLevel||"",target:a.target||"",nativeLanguage:a.nativeLanguage||"English",lessonLanguage:((Q=a.lessonPreferences)==null?void 0:Q.language)||"English",lessonAudience:((ee=a.lessonPreferences)==null?void 0:ee.targetAudience)||"Adult"});u.useEffect(()=>{var n,x;X({name:a.name,role:a.role||"",currentLevel:a.currentLevel||"",target:a.target||"",nativeLanguage:a.nativeLanguage||"English",lessonLanguage:((n=a.lessonPreferences)==null?void 0:n.language)||"English",lessonAudience:((x=a.lessonPreferences)==null?void 0:x.targetAudience)||"Adult"})},[a]),u.useEffect(()=>{const n=localStorage.getItem("gemini_api_keys")||"";if(Y(n),D){const x=setTimeout(()=>C(null),4e3);return()=>clearTimeout(x)}},[D]),u.useEffect(()=>{(async()=>{Z(!0);const b=await na();we(b),Z(!1)})();const x=()=>{R(se())};return window.addEventListener("config-updated",x),()=>{window.removeEventListener("config-updated",x)}},[]),u.useEffect(()=>{const n=x=>{t.current&&!t.current.contains(x.target)&&c(!1)};return document.addEventListener("mousedown",n),()=>document.removeEventListener("mousedown",n)},[]);const z=(n,x,b)=>{R(v=>{const E={...v,[n]:{...v[n],[x]:b}};return n==="audioCoach"&&ne(E),E})},Ce=n=>{z("interface","junkTags",n)},Se=n=>{X(x=>({...x,[n.target.name]:n.target.value}))},Ae=async()=>{const n={...a,name:y.name.trim()||a.name,role:y.role.trim(),currentLevel:y.currentLevel.trim(),target:y.target.trim(),nativeLanguage:y.nativeLanguage,avatar:`https://api.dicebear.com/7.x/avataaars/svg?seed=${y.name.trim()||a.name}`,lessonPreferences:{language:y.lessonLanguage,targetAudience:y.lessonAudience.trim(),tone:A.audioCoach.coaches[A.audioCoach.activeCoach].persona}};await s(n),C("Profile & Preferences updated successfully!")},Ee=()=>{localStorage.setItem("gemini_api_keys",q.trim()),C("API Keys have been saved locally.")},Te=()=>{localStorage.removeItem("vocab_pro_api_usage"),window.dispatchEvent(new CustomEvent("apiUsageUpdated")),C("API usage counter has been reset.")},ze=n=>{z("srs",n.target.name,parseFloat(n.target.value))},Ie=n=>{const x=n.target.type==="checkbox"?n.target.checked:n.target.value;z("ai",n.target.name,x)},Le=n=>{z("dailyGoals",n.target.name,parseInt(n.target.value,10))},Oe=()=>{ne(A),C("Settings saved!")},Pe=()=>{R(n=>({...n,srs:la})),C("SRS settings reset to defaults.")},Ve=async n=>{var v;const x=(v=n.target.files)==null?void 0:v[0];if(!x)return;O(null);const b=await ia(x,a.id,i);O(b),b.type==="success"&&(d("Restore successful! The app will now reload.","success",2e3),b.updatedUser&&await oa(b.updatedUser),setTimeout(()=>{window.location.reload()},2e3)),m.current&&(m.current.value="")},De=async()=>{await ra(a.id,a,i)},Me=async()=>{G(!0);try{const x=(await le()).map(b=>ca(b));await re(x),C("All learning progress has been reset.")}catch(n){O({type:"error",message:"Failed to clear progress",detail:n.message})}finally{G(!1),V(!1)}},Re=async()=>{K(!0),M(!1);let n=0;const x=new Set(A.interface.junkTags.map(b=>b.toLowerCase()));try{const b=le(),v=[];for(const Fe of b){let I=!1;const g={...Fe};if(S.removeJunkTags&&x.size>0&&g.tags){const ae=g.tags.length;g.tags=g.tags.filter(He=>!x.has(He.toLowerCase())),g.tags.length!==ae&&(I=!0)}S.removeMultiWordData&&(g.isIdiom||g.isPhrasalVerb||g.isCollocation||g.isStandardPhrase)&&(g.wordFamily&&(g.wordFamily=void 0,I=!0),g.collocationsArray&&g.collocationsArray.length>0&&(g.collocations=void 0,g.collocationsArray=void 0,I=!0)),S.cleanHeadwords&&g.word&&g.word.includes('"')&&(g.word=g.word.replace(/"/g,"").trim(),I=!0),I&&(g.updatedAt=Date.now(),v.push(g))}n=v.length,n>0&&await re(v);let E=`Normalized ${n} item(s).`;n===0&&(E="No items needed normalization based on selected options."),d(E,"success")}catch(b){d("Failed to normalize data.","error"),console.error("Normalization Error:",b)}finally{K(!1)}},_e=async()=>{await s({...a,isAdmin:!a.isAdmin}),C(`Developer Mode ${a.isAdmin?"Disabled":"Enabled"}`)},_=({id:n,label:x,checked:b,onChange:v})=>e.jsxs("label",{htmlFor:n,className:"flex items-center gap-2 p-3 bg-neutral-50 rounded-lg border border-neutral-200 cursor-pointer",children:[e.jsx("input",{id:n,type:"checkbox",checked:b,onChange:E=>v(E.target.checked),className:"h-4 w-4 rounded border-gray-300 text-indigo-600 focus:ring-indigo-500"}),e.jsx("span",{className:"text-sm font-medium",children:x})]});return e.jsxs(e.Fragment,{children:[e.jsx(Pa,{currentView:p,isDropdownOpen:j,notification:D,importStatus:k,profileData:y,config:A,isVoiceLoading:ye,availableVoices:Ne,apiKeyInput:q,apiUsage:r,jsonInputRef:m,dataScope:i,onDataScopeChange:f,mobileNavRef:t,setCurrentView:h,setIsDropdownOpen:c,onProfileChange:Se,onSaveProfile:Ae,onConfigChange:z,onAiConfigChange:Ie,onApiKeyInputChange:n=>Y(n.target.value),onSaveApiKeys:Ee,onResetUsage:Te,onSaveSettings:Oe,onJSONImport:Ve,onJSONExport:De,onSrsConfigChange:ze,onResetSrsConfig:Pe,onOpenClearProgressModal:()=>V(!0),onOpenNukeModal:()=>P(!0),isNormalizing:B,onOpenNormalizeModal:()=>M(!0),isApplyingAccent:ke,onApplyAccent:()=>{},isAdmin:!!a.isAdmin,onToggleAdmin:_e,junkTags:A.interface.junkTags,onJunkTagsChange:Ce,normalizeOptions:S,onNormalizeOptionsChange:L,goalConfig:A.dailyGoals,onGoalConfigChange:Le,children:p==="INTERFACE"&&e.jsx(Va,{})}),e.jsx(H,{isOpen:be,title:"Delete all data?",message:e.jsxs(e.Fragment,{children:["This will permanently delete ",e.jsx("strong",{className:"text-red-600",children:"ALL"})," vocabulary, progress, and profiles. This action cannot be undone."]}),confirmText:"YES, DELETE EVERYTHING",isProcessing:!1,onConfirm:()=>{o(),P(!1)},onClose:()=>P(!1),confirmButtonClass:"bg-red-600 text-white hover:bg-red-700 shadow-red-200",icon:e.jsx(wa,{size:40,className:"text-red-500"})}),e.jsx(H,{isOpen:fe,title:"Clear All Progress?",message:"This will reset the review schedule for ALL words in your library. Your words and their content will NOT be deleted. This action cannot be undone.",confirmText:"Yes, Clear Progress",isProcessing:je,onConfirm:Me,onClose:()=>V(!1),icon:e.jsx(sa,{size:40,className:"text-orange-500"}),confirmButtonClass:"bg-orange-50 text-white hover:bg-orange-600 shadow-orange-200"}),e.jsx(H,{isOpen:ve,title:"Normalize Data",message:e.jsxs("div",{className:"space-y-4 text-left",children:[e.jsx("p",{children:"Select normalization actions to perform. This process will update your entire library and cannot be undone."}),e.jsx(_,{id:"norm-junk",label:"Remove junk tags from all words",checked:S.removeJunkTags,onChange:n=>L(x=>({...x,removeJunkTags:n}))}),e.jsx(_,{id:"norm-multi",label:"Clean multi-word items (phrases, idioms)",checked:S.removeMultiWordData,onChange:n=>L(x=>({...x,removeMultiWordData:n}))}),e.jsx(_,{id:"norm-quotes",label:"Clean headwords (remove quotes)",checked:S.cleanHeadwords,onChange:n=>L(x=>({...x,cleanHeadwords:n}))})]}),confirmText:"Yes, Normalize",isProcessing:B,onConfirm:Re,onClose:()=>M(!1),icon:e.jsx(pe,{size:40,className:"text-orange-500"}),confirmButtonClass:"bg-orange-50 text-white hover:bg-orange-600 shadow-orange-200"})]})};export{Ya as SettingsView};
