import{c as A,j as e,a as G,i as P,r as p,E as $,C as V,_ as K,H as Z,x as L,I as _,D as Q,T as U,a6 as ee,P as te,a7 as se,X as re,aR as le,n as ae,z as E}from"./index-DYhIwCf6.js";import{B as I,I as ne,C as ie,T as oe,U as ce}from"./ShelfModals-BT9_zalU.js";import{C as D}from"./chevron-left-Ck-FfZ7q.js";import{S as B}from"./search-CZmdTd69.js";import{C as W}from"./circle-DVAJG8mm.js";import{P as de}from"./pen-D5rYf6vN.js";import{P as ue}from"./target-46uWdCmU.js";import{S as xe}from"./square-check-big-DGGNzDvA.js";/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const me=A("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pe=A("Folder",[["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const he=A("PackageOpen",[["path",{d:"M12 22v-9",key:"x3hkom"}],["path",{d:"M15.17 2.21a1.67 1.67 0 0 1 1.63 0L21 4.57a1.93 1.93 0 0 1 0 3.36L8.82 14.79a1.655 1.655 0 0 1-1.64 0L3 12.43a1.93 1.93 0 0 1 0-3.36z",key:"2ntwy6"}],["path",{d:"M20 13v3.87a2.06 2.06 0 0 1-1.11 1.83l-6 3.08a1.93 1.93 0 0 1-1.78 0l-6-3.08A2.06 2.06 0 0 1 4 16.87V13",key:"1pmm1c"}],["path",{d:"M21 12.43a1.93 1.93 0 0 0 0-3.36L8.83 2.2a1.64 1.64 0 0 0-1.63 0L3 4.57a1.93 1.93 0 0 0 0 3.36l12.18 6.86a1.636 1.636 0 0 0 1.63 0z",key:"12ttoo"}]]),$e=({label:t,onNext:a,onPrev:n,actions:o,children:i,className:c,isEmpty:r,emptyAction:l,coverColor:d,coverIcon:j,titleColor:m})=>{const u=d||"#4e342e",x=u.startsWith("http")||u.startsWith("data:image");return e.jsxs("div",{className:`px-4 md:px-12 pt-10 pb-4 rounded-3xl transition-all duration-500 relative overflow-hidden ${c}`,style:{backgroundColor:x?"#262626":u,boxShadow:"inset 0 0 100px rgba(0,0,0,0.5)"},children:[e.jsx("div",{className:"absolute inset-0 pointer-events-none opacity-20",style:{backgroundImage:x?`url(${u})`:"repeating-linear-gradient(90deg, rgba(255,255,255,0.05), rgba(255,255,255,0.05) 1px, transparent 1px, transparent 30px)",backgroundSize:x?"cover":"auto",backgroundPosition:"center"}}),e.jsxs("div",{className:"flex items-center justify-between group mb-12 relative -top-3.5 z-10",style:{borderBottom:"3px solid rgba(0,0,0,0.4)",paddingBottom:"0.1rem",boxShadow:"0 5px 5px -3px rgba(0,0,0,0.5)"},children:[e.jsx("div",{className:"flex items-center gap-2",children:n&&e.jsx("button",{onClick:n,className:"p-2 md:p-3 bg-black/20 text-white/50 rounded-full hover:bg-black/40 hover:text-white transition-all",children:e.jsx(D,{size:24})})}),e.jsxs("div",{className:"flex items-center gap-4 relative",children:[e.jsxs("div",{className:"bg-gradient-to-b from-slate-200 to-slate-400 px-6 py-2 rounded-lg shadow-inner border-t border-slate-400/50 w-fit flex items-center gap-3 min-h-[50px]",children:[j?e.jsx(I,{icon:j,className:"text-2xl drop-shadow-md w-8 h-8 object-contain"}):e.jsx(pe,{size:20,className:"text-slate-600 opacity-50"}),e.jsx("h3",{className:"text-xl md:text-2xl font-black text-neutral-900 tracking-tight truncate max-w-[200px] md:max-w-md text-center select-none drop-shadow-sm",style:{color:m},children:t})]}),o&&e.jsx("div",{className:"absolute left-full ml-4 opacity-0 group-hover:opacity-100 transition-opacity flex items-center gap-2",children:o})]}),e.jsx("div",{className:"flex items-center gap-2",children:a&&e.jsx("button",{onClick:a,className:"p-2 md:p-3 bg-black/20 text-white/50 rounded-full hover:bg-black/40 hover:text-white transition-all",children:e.jsx(G,{size:24})})})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-[repeat(auto-fill,10rem)] gap-x-6 md:gap-x-8 gap-y-10 min-h-[50vh] -mt-12 pb-8 relative z-10",style:{backgroundImage:"repeating-linear-gradient(to bottom, transparent, transparent 14rem, rgba(0,0,0,0.4) 14rem, rgba(0,0,0,0.4) 14.25rem, transparent 14.25rem, transparent 16.5rem)"},children:[i,r&&e.jsxs("div",{className:"col-span-full flex flex-col items-center justify-center text-white/30 h-64 border-2 border-dashed border-white/10 rounded-3xl",children:[e.jsx("p",{className:"font-black uppercase tracking-widest text-xs mb-4",children:"This collection is empty"}),l]})]})]})},F=["#5d4037","#3e2723","#1a237e","#1b5e20","#b71c1c","#0ea5e9","#10b981","#f59e0b","#ec4899","#8b5cf6","#0f172a","#171717","#334155","#450a0a","#1e1b4b","#bae6fd","#bbf7d0","#fef08a","#fecaca","#ddd6fe"],fe=t=>{let a=0;for(let n=0;n<t.length;n++)a=t.charCodeAt(n)+((a<<5)-a);return F[Math.abs(a)%F.length]},ge=({id:t,title:a,subTitle:n,icon:o,color:i,onClick:c,actions:r,status:l,footer:d,titleColor:j,titleSize:m,titleTop:u,titleLeft:x,iconTop:C,iconLeft:w})=>{const h=i||fe(t),v=!!(h.startsWith("http")||h.startsWith("data:image")),b=l==="completed",f=u!==void 0||x!==void 0||C!==void 0||w!==void 0;return e.jsx("div",{className:"group [perspective:1000px] translate-y-0 cursor-pointer",onClick:c,children:e.jsxs("div",{className:`relative w-full aspect-[5/7] rounded-lg shadow-lg transition-all duration-300 transform group-hover:shadow-2xl group-hover:shadow-black/40 group-hover:[transform:rotateY(-15deg)_scale(1.05)] overflow-hidden ${b?"ring-2 ring-emerald-400/60 shadow-[0_0_20px_rgba(52,211,153,0.3)]":""}`,style:{backgroundColor:v?"#262626":h,transformStyle:"preserve-3d",transform:"rotateY(-5deg) rotateX(2deg)"},children:[v&&e.jsx("img",{src:h,className:"absolute inset-0 w-full h-full object-cover",alt:""}),e.jsx("div",{className:"absolute top-0 left-0 bottom-0 w-6 bg-gradient-to-r from-black/40 to-transparent rounded-l-lg z-10"}),e.jsx("div",{className:"absolute top-0 left-0 bottom-0 w-1.5 bg-white/10 z-10 border-r border-white/5"}),e.jsxs("div",{className:`absolute inset-2 border-2 border-black/10 rounded-sm z-10 ${v?"":"bg-black/5"} ${f?"":"flex flex-col items-center justify-center p-3 text-center"}`,children:[l==="completed"&&e.jsx("div",{className:"absolute top-2 right-2 text-emerald-500 bg-white rounded-full p-1 shadow-md z-20",title:"Completed",children:e.jsx(P,{size:16,fill:"currentColor",className:"text-white"})}),l==="active"&&e.jsx("div",{className:"absolute top-2 right-2 text-blue-300",title:"Active",children:e.jsx(W,{size:10,fill:"currentColor"})}),o&&e.jsx("div",{className:`text-white drop-shadow-md transform group-hover:scale-110 transition-transform ${f?"absolute":"mb-4"}`,style:f?{top:`${C??40}%`,left:`${w??50}%`,transform:"translate(-50%, -50%)"}:void 0,children:o}),e.jsx("h3",{className:`font-serif font-bold leading-tight drop-shadow-md line-clamp-3 ${f?"absolute w-full text-center px-2":"mb-1"}`,style:{fontSize:m?`${Math.min(m,24)}px`:"16px",color:j||"#ffffff",top:f?`${u??55}%`:void 0,left:f?`${x??50}%`:void 0,transform:f?"translate(-50%, -50%)":void 0},children:a}),n&&!f&&e.jsx("p",{className:"text-[10px] font-bold text-white/70 uppercase tracking-wider",children:n}),d&&!f&&e.jsx("div",{className:"mt-auto pt-2 text-white/80 text-[10px]",children:d})]}),!v&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"absolute top-4 left-4 right-4 h-px bg-gradient-to-r from-transparent via-white/40 to-transparent z-10 opacity-50"}),e.jsx("div",{className:"absolute bottom-4 left-4 right-4 h-px bg-gradient-to-r from-transparent via-white/40 to-transparent z-10 opacity-50"})]}),r&&e.jsx("div",{className:"absolute top-2 left-2 z-20 flex flex-col gap-1.5 opacity-0 group-hover:opacity-100 transition-all",children:r})]})})},be=({title:t,subtitle:a,icon:n,minorSkills:o,actions:i})=>e.jsxs("header",{className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-4 animate-in fade-in slide-in-from-top-4 duration-500",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-3",children:[n&&e.jsx("div",{className:"text-indigo-600",children:n}),e.jsx("h2",{className:"text-3xl font-black text-neutral-900 tracking-tight",children:t})]}),a&&e.jsx("p",{className:"text-neutral-500 mt-1 font-medium",children:a})]}),e.jsxs("div",{className:"flex items-center gap-3 flex-wrap justify-end",children:[o&&e.jsx("div",{className:"flex items-center gap-2 pr-3 border-r border-neutral-200",children:o}),i]})]}),ve=({query:t="",onQueryChange:a,searchPlaceholder:n="Search...",schema:o=[],activeFilters:i,onFilterChange:c,extraControls:r})=>!a&&o.length===0&&!r?null:e.jsxs("div",{className:"flex flex-col xl:flex-row gap-4",children:[a&&e.jsxs("div",{className:"relative flex-1 min-w-[250px]",children:[e.jsx(B,{className:"absolute left-3.5 top-1/2 -translate-y-1/2 text-neutral-400",size:16}),e.jsx("input",{type:"text",value:t,onChange:l=>a(l.target.value),placeholder:n,className:"w-full pl-10 pr-4 py-3 bg-white border border-neutral-200 rounded-xl text-sm font-bold focus:outline-none focus:ring-2 focus:ring-neutral-900 transition-all shadow-sm"})]}),e.jsxs("div",{className:"flex items-center gap-2 overflow-x-auto pb-1 no-scrollbar flex-wrap",children:[o.map(l=>{var j,m;const d=i[l.id]||(l.choices?l.choices[0].value:"");return l.type==="select"?e.jsxs("div",{className:"relative shrink-0",children:[e.jsx("select",{value:d,onChange:u=>c(l.id,u.target.value),className:"pl-3 pr-8 py-3 bg-white border border-neutral-200 rounded-xl text-xs font-bold text-neutral-700 focus:outline-none focus:ring-2 focus:ring-neutral-900 shadow-sm appearance-none cursor-pointer hover:bg-neutral-50 transition-colors",children:(j=l.choices)==null?void 0:j.map(u=>e.jsx("option",{value:u.value,children:u.label},u.value))}),e.jsx("div",{className:"absolute inset-y-0 right-0 pr-2 flex items-center pointer-events-none text-neutral-400",children:e.jsx("svg",{className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})})]},l.id):l.type==="pill"?e.jsx("div",{className:"flex bg-neutral-100 p-1 rounded-xl shrink-0",children:(m=l.choices)==null?void 0:m.map(u=>{const x=d===u.value;return e.jsx("button",{onClick:()=>c(l.id,u.value),className:`px-3 py-2 rounded-lg text-[10px] font-black uppercase tracking-wider transition-all ${x?"bg-white shadow-sm text-neutral-900":"text-neutral-500 hover:text-neutral-700"}`,children:u.label},u.value)})},l.id):null}),r]})]}),je=({schema:t,currentSettings:a,onChange:n})=>{const[o,i]=p.useState(!1),c=p.useRef(null);return p.useEffect(()=>{const r=l=>{c.current&&!c.current.contains(l.target)&&i(!1)};return document.addEventListener("mousedown",r),()=>document.removeEventListener("mousedown",r)},[]),t.length===0?null:e.jsxs("div",{className:"relative",ref:c,children:[e.jsxs("button",{onClick:()=>i(!o),className:`px-4 py-3 rounded-xl transition-all shadow-sm border flex items-center gap-2 font-bold text-xs ${o?"bg-neutral-900 text-white border-neutral-900":"bg-white text-neutral-600 border-neutral-200 hover:text-neutral-900 hover:border-neutral-300"}`,title:"View Options",children:[e.jsx($,{size:16}),e.jsx("span",{className:"hidden sm:inline",children:"View"})]}),o&&e.jsxs("div",{className:"absolute right-0 top-full mt-2 w-64 bg-white rounded-2xl shadow-xl border border-neutral-100 z-50 p-2 overflow-hidden animate-in fade-in zoom-in-95 flex flex-col gap-1",children:[e.jsx("div",{className:"px-3 py-2 text-[9px] font-black text-neutral-400 uppercase tracking-widest border-b border-neutral-50 mb-1",children:"Display Settings"}),t.map(r=>!r.type||r.type==="toggle"?e.jsxs("button",{onClick:()=>n(r.key,!a[r.key]),className:"w-full flex items-center justify-between px-3 py-2 rounded-lg hover:bg-neutral-50 text-xs font-bold text-neutral-700 transition-colors",children:[e.jsx("span",{children:r.label}),a[r.key]?e.jsx(P,{size:16,className:"text-green-500"}):e.jsx("div",{className:"w-4 h-4 rounded-full border border-neutral-200"})]},r.key):r.type==="select"&&r.choices?e.jsxs("div",{className:"px-3 py-2 flex flex-col gap-1",children:[e.jsx("span",{className:"text-[10px] font-bold text-neutral-500",children:r.label}),e.jsxs("div",{className:"relative",children:[e.jsx("select",{value:a[r.key],onChange:d=>n(r.key,d.target.value),className:"w-full appearance-none bg-neutral-50 border border-neutral-200 rounded-lg py-1.5 pl-3 pr-8 text-xs font-bold text-neutral-800 focus:outline-none focus:ring-1 focus:ring-neutral-900",children:r.choices.map(d=>e.jsx("option",{value:d.value,children:d.label},String(d.value)))}),e.jsx(V,{size:14,className:"absolute right-2 top-1/2 -translate-y-1/2 text-neutral-400 pointer-events-none"})]})]},r.key):null)]})]})},Ne=({isLoading:t,isEmpty:a,emptyMessage:n="No items found.",emptyAction:o,children:i,className:c=""})=>t?e.jsxs("div",{className:"flex flex-col items-center justify-center py-32 animate-in fade-in",children:[e.jsx(K,{className:"animate-spin text-neutral-300 mb-4",size:32}),e.jsx("p",{className:"text-xs font-black text-neutral-400 uppercase tracking-widest",children:"Loading Content..."})]}):a?e.jsxs("div",{className:"flex flex-col items-center justify-center py-24 border-2 border-dashed border-neutral-200 rounded-[2rem] text-center animate-in zoom-in-95",children:[e.jsx("div",{className:"p-4 bg-neutral-50 rounded-full mb-4",children:e.jsx(he,{size:32,className:"text-neutral-300"})}),e.jsx("p",{className:"text-sm font-bold text-neutral-500 mb-4",children:n}),o]}):e.jsx("div",{className:`grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-6 pb-20 animate-in fade-in slide-in-from-bottom-4 duration-500 ${c}`,children:i}),Ie=t=>{const{title:a,subtitle:n,icon:o,minorSkills:i,actions:c,config:r,query:l,onQueryChange:d,activeFilters:j,onFilterChange:m,isLoading:u,isEmpty:x,emptyMessage:C,aboveGrid:w,pagination:h,children:v}=t,[b,f]=p.useState(()=>{var y;const g={};return(y=r.viewSchema)==null||y.forEach(S=>g[S.key]=S.default),g}),N=(g,y)=>{f(S=>({...S,[g]:y}))};return e.jsxs("div",{className:"space-y-8 max-w-[1600px] mx-auto",children:[e.jsx(be,{title:a,subtitle:n,icon:o,minorSkills:i,actions:c}),e.jsx(ve,{query:l,onQueryChange:d,schema:r.filterSchema,activeFilters:j,onFilterChange:m,extraControls:r.viewSchema&&r.viewSchema.length>0?e.jsx(je,{schema:r.viewSchema,currentSettings:b,onChange:N}):null}),w&&e.jsx("div",{className:"animate-in fade-in slide-in-from-top-2",children:w}),e.jsx(Ne,{isLoading:u,isEmpty:x,emptyMessage:C,children:v(b)}),!u&&!x&&h&&e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-center pt-8 border-t border-neutral-100 gap-4",children:[e.jsx("div",{className:"flex items-center gap-2 order-2 sm:order-1",children:h.pageSize&&h.onPageSizeChange&&e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"text-[10px] font-black text-neutral-400 uppercase tracking-widest",children:"Size:"}),e.jsx("select",{value:h.pageSize,onChange:g=>{var y;return(y=h.onPageSizeChange)==null?void 0:y.call(h,Number(g.target.value))},className:"bg-neutral-50 text-xs font-bold rounded-lg px-2 py-1.5 border-transparent focus:border-neutral-300 focus:ring-0 text-neutral-600 cursor-pointer hover:bg-neutral-100 transition-colors",children:[12,24,48,96].map(g=>e.jsx("option",{value:g,children:g},g))})]})}),e.jsxs("div",{className:"flex items-center gap-2 bg-white border border-neutral-200 rounded-xl px-2 py-1.5 shadow-sm order-1 sm:order-2",children:[e.jsx("button",{disabled:h.page===0,onClick:()=>h.onPageChange(h.page-1),className:"p-1.5 rounded-lg text-neutral-400 hover:bg-neutral-100 hover:text-neutral-900 disabled:opacity-30 disabled:hover:bg-transparent transition-all",children:e.jsx(D,{size:18})}),e.jsxs("span",{className:"text-[10px] font-black text-neutral-500 uppercase tracking-widest px-2 min-w-[80px] text-center",children:["Page ",h.page+1," of ",h.totalPages||1]}),e.jsx("button",{disabled:h.page>=h.totalPages-1,onClick:()=>h.onPageChange(h.page+1),className:"p-1.5 rounded-lg text-neutral-400 hover:bg-neutral-100 hover:text-neutral-900 disabled:opacity-30 disabled:hover:bg-transparent transition-all",children:e.jsx(G,{size:18})})]}),e.jsx("div",{className:"flex items-center justify-end min-w-[100px] order-3",children:h.totalItems!==void 0&&e.jsxs("span",{className:"text-[10px] font-black text-neutral-300 uppercase tracking-widest",children:["Total: ",h.totalItems]})})]})]})},Ae=({viewMenu:t,browseGroups:a,browseTags:n,addActions:o,extraActions:i})=>{const[c,r]=p.useState(!1),l=p.useRef(null);p.useEffect(()=>{const m=u=>{l.current&&!l.current.contains(u.target)&&r(!1)};return document.addEventListener("mousedown",m),()=>document.removeEventListener("mousedown",m)},[]);const d=o.length>1,j=()=>{if(o.length===0)return null;if(!d){const m=o[0],u=m.icon;return e.jsxs("button",{onClick:m.onClick,disabled:m.disabled,className:"px-6 py-3 bg-neutral-900 text-white rounded-xl font-black text-xs flex items-center space-x-2 transition-all hover:bg-neutral-800 active:scale-95 uppercase tracking-widest shadow-sm disabled:opacity-50",children:[e.jsx(u,{size:16}),e.jsx("span",{children:m.label})]})}return e.jsxs("div",{className:"relative",ref:l,children:[e.jsxs("button",{onClick:()=>r(!c),className:"px-6 py-3 bg-neutral-900 text-white rounded-xl font-black text-xs flex items-center space-x-2 transition-all hover:bg-neutral-800 active:scale-95 uppercase tracking-widest shadow-sm",children:[e.jsx(L,{size:16}),e.jsx("span",{children:"Add"}),e.jsx(V,{size:14,className:`transition-transform ${c?"rotate-180":""}`})]}),c&&e.jsx("div",{className:"absolute top-full right-0 mt-2 w-56 bg-white rounded-2xl shadow-xl border border-neutral-100 z-50 p-2 overflow-hidden animate-in fade-in zoom-in-95 flex flex-col gap-1",children:o.map((m,u)=>{const x=m.icon;return e.jsxs("button",{onClick:()=>{m.onClick(),r(!1)},disabled:m.disabled,className:"w-full flex items-center gap-3 px-3 py-2.5 rounded-lg text-xs font-bold text-neutral-600 hover:bg-neutral-50 hover:text-neutral-900 transition-colors disabled:opacity-50",children:[e.jsx(x,{size:16,className:"text-neutral-500"}),e.jsx("span",{children:m.label})]},u)})})]})};return e.jsxs(e.Fragment,{children:[t,n&&e.jsx("button",{onClick:n.onToggle,className:`p-3 border border-neutral-200 text-neutral-600 rounded-xl hover:bg-neutral-50 active:scale-95 transition-all shadow-sm ${n.isOpen?"bg-neutral-100":"bg-white"}`,children:e.jsx(Z,{size:16})}),i,j()]})},Pe=({isOpen:t,setIsOpen:a,viewOptions:n,filterOptions:o,customSection:i})=>{const c=p.useRef(null);return p.useEffect(()=>{const r=l=>{c.current&&!c.current.contains(l.target)&&a(!1)};return document.addEventListener("mousedown",r),()=>document.removeEventListener("mousedown",r)},[a]),e.jsxs("div",{className:"relative",ref:c,children:[e.jsx("button",{onClick:()=>a(!t),className:`p-3 rounded-xl border transition-all shadow-sm ${t?"bg-neutral-900 text-white border-neutral-900":"bg-white border-neutral-200 text-neutral-600 hover:bg-neutral-50"}`,title:"View & Filter",children:e.jsx($,{size:16})}),t&&e.jsxs("div",{className:"absolute top-full right-0 mt-2 w-64 bg-white rounded-2xl shadow-xl border border-neutral-100 z-50 p-2 overflow-hidden animate-in fade-in zoom-in-95 flex flex-col gap-1",children:[o&&o.length>0&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"px-3 py-2 text-[9px] font-black text-neutral-400 uppercase tracking-widest border-b border-neutral-50 flex items-center gap-2",children:[e.jsx(me,{size:10})," Content Type"]}),e.jsx("div",{className:"p-1 grid grid-cols-3 gap-1 bg-neutral-100 rounded-xl mb-2",children:o.map(r=>e.jsx("button",{onClick:r.onClick,className:`py-1.5 text-[9px] font-black rounded-lg transition-all ${r.isActive?"bg-white shadow-sm text-neutral-900":"text-neutral-500 hover:text-neutral-700"}`,children:r.label},r.value))})]}),i,e.jsxs("div",{className:"px-3 py-2 text-[9px] font-black text-neutral-400 uppercase tracking-widest border-b border-neutral-50 flex items-center gap-2",children:[e.jsx($,{size:10})," Visibility"]}),n.map((r,l)=>e.jsxs("button",{onClick:r.onChange,className:"flex items-center justify-between w-full px-3 py-2 text-xs font-bold rounded-lg hover:bg-neutral-50 transition-colors",children:[e.jsx("span",{children:r.label}),r.checked?e.jsx(P,{size:14,className:"text-green-500"}):e.jsx(W,{size:14,className:"text-neutral-300"})]},l))]})]})},we=({isOpen:t,onClose:a,items:n,currentIds:o,onAdd:i,itemIcon:c})=>{const[r,l]=p.useState(""),[d,j]=p.useState(new Set),m=p.useMemo(()=>{const x=r.toLowerCase();return n.filter(C=>!o.has(C.id)&&C.title.toLowerCase().includes(x))},[n,r,o]),u=x=>{j(C=>{const w=new Set(C);return w.has(x)?w.delete(x):w.add(x),w})};return t?e.jsx("div",{className:"fixed inset-0 z-[250] flex items-center justify-center p-4 bg-black/60 backdrop-blur-sm animate-in fade-in",children:e.jsxs("div",{className:"bg-white w-full max-w-lg rounded-[2.5rem] shadow-2xl border border-neutral-200 flex flex-col max-h-[80vh]",children:[e.jsxs("header",{className:"px-8 py-6 border-b border-neutral-100 flex justify-between items-center",children:[e.jsx("h3",{className:"text-xl font-black text-neutral-900",children:"Add Content"}),e.jsx("button",{onClick:a,className:"p-2 text-neutral-400 hover:bg-neutral-100 rounded-full",children:e.jsx(re,{size:20})})]}),e.jsx("div",{className:"p-4 border-b border-neutral-50",children:e.jsxs("div",{className:"relative",children:[e.jsx(B,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-neutral-300",size:14}),e.jsx("input",{value:r,onChange:x=>l(x.target.value),placeholder:"Search library...",className:"w-full pl-9 pr-4 py-2 bg-neutral-50 border border-neutral-200 rounded-xl text-xs font-bold focus:ring-2 focus:ring-neutral-900 outline-none"})]})}),e.jsxs("main",{className:"flex-1 overflow-y-auto p-4 space-y-2 custom-scrollbar",children:[m.map(x=>e.jsxs("div",{onClick:()=>u(x.id),className:`flex items-center justify-between p-3 rounded-xl border cursor-pointer transition-all ${d.has(x.id)?"bg-indigo-50 border-indigo-200":"bg-white border-neutral-100 hover:border-neutral-300"}`,children:[e.jsxs("div",{className:"flex items-center gap-3",children:[c&&e.jsx("div",{className:"text-neutral-400",children:c}),e.jsxs("div",{children:[e.jsx("div",{className:"font-bold text-sm text-neutral-900",children:x.title}),x.subtitle&&e.jsx("div",{className:"text-xs text-neutral-500",children:x.subtitle})]})]}),d.has(x.id)?e.jsx(xe,{size:20,className:"text-indigo-600"}):e.jsx(le,{size:20,className:"text-neutral-300"})]},x.id)),m.length===0&&e.jsx("p",{className:"text-center text-xs text-neutral-400 py-10",children:"No matching items found."})]}),e.jsxs("footer",{className:"px-8 py-4 border-t border-neutral-100 flex justify-end gap-3",children:[e.jsx("button",{onClick:a,className:"px-5 py-2 text-xs font-bold text-neutral-500 hover:text-neutral-900",children:"Cancel"}),e.jsxs("button",{onClick:()=>{i(Array.from(d)),a()},disabled:d.size===0,className:"px-6 py-2.5 bg-neutral-900 text-white rounded-xl font-black text-xs flex items-center gap-2 disabled:opacity-50",children:[e.jsx(L,{size:14})," Add (",d.size,")"]})]})]})}):null},Oe=({book:t,items:a,availableItems:n,onBack:o,onUpdateBook:i,onAddItem:c,onRemoveItem:r,onOpenItem:l,onEditItem:d,onFocusChange:j,onToggleFocus:m,itemIcon:u})=>{const[x,C]=p.useState(!1),[w,h]=p.useState(""),[v,b]=p.useState(!1),[f,N]=p.useState(""),[g,y]=p.useState(!1),[S,O]=p.useState(""),[q,M]=p.useState(!1),T=p.useRef(null),{showToast:H}=_(),R=p.useMemo(()=>{const s=t.title.split(":");return s.length>1?s.slice(1).join(":").trim():t.title},[t.title]);p.useEffect(()=>{var s,k;h(R),N(t.icon||""),O((s=t.color)!=null&&s.startsWith("http")||(k=t.color)!=null&&k.startsWith("data:")?t.color:"")},[t,R]),p.useEffect(()=>{const s=k=>{T.current&&!T.current.contains(k.target)&&y(!1)};return document.addEventListener("mousedown",s),()=>document.removeEventListener("mousedown",s)},[]);const J=()=>{const k=`${t.title.split(":")[0].trim()}: ${w.trim()}`;k!==t.title&&i({title:k}),C(!1)},X=()=>{f!==t.icon&&i({icon:f.trim()}),b(!1)},Y=s=>{c(s),H(`Added ${s.length} items.`,"success")};return e.jsxs("div",{className:"h-full flex flex-col animate-in fade-in duration-500",children:[e.jsxs("header",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center p-4 gap-4 shrink-0 bg-white border-b border-neutral-100 z-20",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("button",{onClick:o,className:"flex items-center gap-2 text-sm font-bold text-neutral-500 hover:text-neutral-900 transition-colors",children:[" ",e.jsx(Q,{size:16})," Back "]}),e.jsxs("div",{className:"flex items-center gap-4",children:[v?e.jsx("input",{value:f,onChange:s=>N(s.target.value),onBlur:X,onKeyDown:s=>{s.key==="Enter"&&s.currentTarget.blur()},autoFocus:!0,placeholder:"Emoji",className:"text-2xl w-24 text-center bg-neutral-100 border border-neutral-300 rounded-lg py-1 outline-none ring-2 ring-indigo-300"}):e.jsx("div",{onClick:()=>b(!0),className:"p-1 rounded-lg hover:bg-neutral-100 cursor-pointer min-w-10 flex items-center justify-center",children:t.icon?e.jsx(I,{icon:t.icon,className:"text-2xl w-10 h-10 flex items-center justify-center mx-auto"}):e.jsx("div",{className:"w-10 h-10 rounded-xl border-2 border-dashed border-neutral-200 flex items-center justify-center text-neutral-300",children:e.jsx(ne,{size:18})})}),x?e.jsx("input",{value:w,onChange:s=>h(s.target.value),onBlur:J,onKeyDown:s=>{s.key==="Enter"&&s.currentTarget.blur()},autoFocus:!0,className:"text-xl font-black text-neutral-900 bg-neutral-100 border border-neutral-300 rounded-lg px-2 py-1 outline-none ring-2 ring-indigo-300"}):e.jsxs("div",{onClick:()=>C(!0),className:"group/title relative p-1 rounded-lg hover:bg-neutral-100 cursor-pointer flex items-center gap-2",children:[e.jsx("h2",{className:"text-xl font-black text-neutral-900 tracking-tight",style:{color:t.titleColor||"#171717",fontSize:t.titleSize?`${t.titleSize}px`:"inherit"},children:w}),e.jsx(de,{size:14,className:"text-neutral-400 opacity-0 group-hover/title:opacity-100 transition-opacity"})]})]})]}),e.jsxs("div",{className:"flex items-center gap-6",children:[e.jsxs("div",{className:"relative",ref:T,children:[e.jsxs("button",{onClick:()=>y(!g),className:`p-2.5 rounded-xl transition-all border shadow-sm flex items-center justify-center gap-2 ${g?"bg-neutral-900 text-white border-neutral-900 shadow-md":"bg-white text-neutral-500 border-neutral-200 hover:bg-neutral-50 hover:text-neutral-900"}`,title:"Change Cover Design",children:[e.jsx(ue,{size:18}),g&&e.jsx("span",{className:"text-[10px] font-black uppercase tracking-widest mr-1",children:"Design"})]}),g&&e.jsxs("div",{className:"absolute top-full right-0 mt-3 p-5 bg-white rounded-3xl shadow-[0_20px_50px_-12px_rgba(0,0,0,0.25)] border border-neutral-100 z-[100] animate-in fade-in zoom-in-95 origin-top-right w-80 space-y-5",children:[e.jsx("div",{className:"flex justify-center border-b border-neutral-100 pb-4",children:e.jsx("div",{className:"w-32 h-44 shadow-lg rounded-lg overflow-hidden transform rotate-2",children:e.jsx(ge,{id:t.id,title:w,icon:e.jsx(I,{icon:f||t.icon||"",className:"text-3xl"}),color:t.color,titleColor:t.titleColor,titleSize:t.titleSize,titleTop:t.titleTop,titleLeft:t.titleLeft,iconTop:t.iconTop,iconLeft:t.iconLeft,onClick:()=>{}})})}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("div",{className:"flex items-center gap-2 px-1 border-b border-neutral-50 pb-2",children:e.jsx("span",{className:"text-[10px] font-black text-neutral-400 uppercase tracking-widest",children:"Cover Color"})}),e.jsx("div",{className:"grid grid-cols-5 gap-3 justify-items-center",children:ie.map(s=>e.jsx("button",{onClick:()=>i({color:s}),className:`w-8 h-8 rounded-full transition-all hover:scale-125 active:scale-90 ${t.color===s?"ring-2 ring-neutral-900 ring-offset-2 scale-110 shadow-md":"opacity-90 hover:opacity-100 shadow-sm border border-black/5"}`,style:{backgroundColor:s}},s))})]}),e.jsxs("div",{className:"space-y-3 pt-2 border-t border-neutral-50",children:[e.jsx("div",{className:"flex items-center gap-2 px-1",children:e.jsx("span",{className:"text-[10px] font-black text-neutral-400 uppercase tracking-widest",children:"Title Style"})}),e.jsxs("div",{className:"space-y-3 px-1",children:[e.jsx("div",{className:"grid grid-cols-5 gap-3 justify-items-center",children:oe.map(s=>e.jsx("button",{onClick:()=>i({titleColor:s}),className:`w-6 h-6 rounded-md border transition-all ${t.titleColor===s?"ring-2 ring-indigo-500":"border-neutral-200"}`,style:{backgroundColor:s}},s))}),e.jsxs("div",{className:"flex items-center gap-3 bg-neutral-50 p-2 rounded-xl",children:[e.jsx(U,{size:14,className:"text-neutral-400"}),e.jsx("input",{type:"range",min:"12",max:"48",value:t.titleSize||24,onChange:s=>i({titleSize:parseInt(s.target.value)}),className:"flex-1 accent-neutral-900 h-1"})]})]})]}),e.jsxs("div",{className:"space-y-3 pt-2 border-t border-neutral-50",children:[e.jsxs("div",{className:"flex items-center justify-between px-1",children:[e.jsx("span",{className:"text-[10px] font-black text-neutral-400 uppercase tracking-widest",children:"Layout"}),e.jsx("button",{onClick:()=>i({titleTop:void 0,titleLeft:void 0,iconTop:void 0,iconLeft:void 0}),className:"text-[8px] font-black text-indigo-600 hover:underline uppercase",children:"Center All"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 px-1",children:[e.jsxs("div",{className:"space-y-1.5",children:[e.jsx("label",{className:"text-[8px] font-bold text-neutral-400 uppercase flex items-center gap-1",children:"Title Pos"}),e.jsxs("div",{className:"flex gap-1",children:[e.jsx("input",{type:"number",value:t.titleTop??50,onChange:s=>i({titleTop:parseInt(s.target.value)}),className:"w-full px-2 py-1 bg-neutral-50 border border-neutral-200 rounded-md text-[10px] font-bold"}),e.jsx("input",{type:"number",value:t.titleLeft??50,onChange:s=>i({titleLeft:parseInt(s.target.value)}),className:"w-full px-2 py-1 bg-neutral-50 border border-neutral-200 rounded-md text-[10px] font-bold"})]})]}),e.jsxs("div",{className:"space-y-1.5",children:[e.jsx("label",{className:"text-[8px] font-bold text-neutral-400 uppercase flex items-center gap-1",children:"Icon Pos"}),e.jsxs("div",{className:"flex gap-1",children:[e.jsx("input",{type:"number",value:t.iconTop??40,onChange:s=>i({iconTop:parseInt(s.target.value)}),className:"w-full px-2 py-1 bg-neutral-50 border border-neutral-200 rounded-md text-[10px] font-bold"}),e.jsx("input",{type:"number",value:t.iconLeft??50,onChange:s=>i({iconLeft:parseInt(s.target.value)}),className:"w-full px-2 py-1 bg-neutral-50 border border-neutral-200 rounded-md text-[10px] font-bold"})]})]})]})]}),e.jsxs("div",{className:"space-y-2 pt-2 border-t border-neutral-50",children:[e.jsx("label",{className:"text-[9px] font-black text-neutral-400 uppercase tracking-widest px-1",children:"Image URL"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{value:S,onChange:s=>O(s.target.value),onKeyDown:s=>{s.key==="Enter"&&(i({color:S.trim()}),y(!1))},placeholder:"https://...",className:"flex-1 px-3 py-1.5 bg-neutral-50 border border-neutral-200 rounded-lg text-[10px] font-medium focus:ring-1 focus:ring-neutral-900 outline-none"}),e.jsx("button",{onClick:()=>i({color:S.trim()}),className:"p-1.5 bg-neutral-900 text-white rounded-lg hover:bg-neutral-800",children:e.jsx(L,{size:14})})]})]})]})]}),e.jsxs("button",{onClick:()=>M(!0),className:"px-4 py-2 bg-white border border-neutral-200 text-neutral-600 rounded-lg font-bold text-xs flex items-center gap-2 hover:bg-neutral-50 transition-all shadow-sm",children:[e.jsx(L,{size:14})," Add Content"]})]})]}),e.jsx("main",{className:"flex-1 overflow-y-auto p-4 md:p-8 bg-neutral-50/50 relative",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-6 relative z-10",children:[a.map((s,k)=>e.jsx(ce,{title:s.title,compact:!1,onClick:()=>l(s),isCompleted:s.isCompleted,focusColor:s.focusColor,onFocusChange:z=>j(s,z),isFocused:s.isFocused,onToggleFocus:()=>m(s),actions:e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("button",{onClick:z=>{z.stopPropagation(),l(s)},className:"p-1.5 text-neutral-400 hover:text-indigo-600 hover:bg-indigo-50 rounded-lg transition-colors",title:"Read",children:e.jsx(ee,{size:14})}),e.jsx("button",{onClick:z=>{z.stopPropagation(),d(s)},className:"p-1.5 text-neutral-400 hover:text-neutral-900 hover:bg-neutral-100 rounded-lg transition-colors",title:"Edit",children:e.jsx(te,{size:14})}),e.jsx("button",{onClick:z=>{z.stopPropagation(),r(s.id)},className:"p-1.5 text-neutral-400 hover:text-red-600 hover:bg-red-50 rounded-lg transition-colors",title:"Remove from Book",children:e.jsx(se,{size:14})})]}),children:s.subtitle&&e.jsx("p",{className:"line-clamp-2 text-xs",children:s.subtitle})},`${s.id}-${k}`)),a.length===0&&e.jsxs("div",{className:"col-span-full py-20 text-center text-neutral-400 border-2 border-dashed border-neutral-200 rounded-3xl",children:[e.jsx("p",{className:"font-bold",children:"This book is empty."}),e.jsx("p",{className:"text-sm mt-1",children:'Click "Add Content" to fill it up.'})]})]})}),e.jsx(we,{isOpen:q,onClose:()=>M(!1),items:n,currentIds:new Set(a.map(s=>s.id)),onAdd:Y,itemIcon:u})]})},Me=(t,a)=>{const[n,o]=p.useState(()=>ae(a,[])),[i,c]=p.useState(0),{showToast:r}=_(),l=p.useMemo(()=>{const v=new Set(t.map(N=>{const g=N.title.split(":");return g.length>1?g[0].trim():"General"})),b=new Set([...n,...Array.from(v)]),f=Array.from(b).sort((N,g)=>N==="General"?-1:g==="General"?1:N.localeCompare(g));return f.length>0?f:["General"]},[t,n]);p.useEffect(()=>{i>=l.length&&c(Math.max(0,l.length-1))},[l.length]);const d=l[i]||"General",j=p.useMemo(()=>t.filter(v=>{const b=v.title.split(":");return(b.length>1?b[0].trim():"General")===d}),[t,d]);return{allShelves:l,currentShelfName:d,booksOnCurrentShelf:j,currentShelfIndex:i,addShelf:v=>{const b=v.trim();if(l.map(N=>N.toLowerCase()).includes(b.toLowerCase()))return r("Shelf name already exists.","error"),!1;const f=[...n,b];return o(f),E(a,f),l.length,setTimeout(()=>{},0),r(`Shelf "${b}" created.`,"success"),!0},renameShelf:(v,b)=>{const f=d,N=v.trim();if(l.map(y=>y.toLowerCase()).includes(N.toLowerCase()))return r("Shelf name already exists.","error"),!1;let g;return n.includes(f)?g=n.map(y=>y===f?N:y):g=[...n,N],o(g),E(a,g),b(f,N),r(`Renamed to "${N}".`,"success"),!0},removeShelf:()=>{if(j.length>0)return r("Cannot remove a shelf that contains books.","error"),!1;if(d==="General")return r("Cannot remove General shelf.","error"),!1;const v=n.filter(b=>b!==d);return o(v),E(a,v),c(b=>Math.max(0,b-1)),!0},nextShelf:()=>c((i+1)%l.length),prevShelf:()=>c((i-1+l.length)%l.length),selectShelf:v=>{const b=l.indexOf(v);b!==-1&&c(b)}}};export{Oe as G,Ie as R,$e as U,Pe as V,ge as a,Ae as b,Me as u};
