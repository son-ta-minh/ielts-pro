import{c as C,j as e,r as b,C as pe,L as fe,a as Q,b as Z,d as ee,F as ve,B as je,S as we,R as se,W as Ne,e as ye,G as ke,f as V,g as le,A as G,M as re,h as Ce,i as Se,P as Le,k as Re,l as Te,m as Me,n as Ie,o as Ee,p as De,q as Pe,s as ze,t as $e,u as _e,v as We}from"./index-C9-ZVUHn.js";import{D as te,L as Oe}from"./list-todo-0HRj4ZhC.js";import{F as ne}from"./file-clock-BPUFarYU.js";import{S as oe,a as ie}from"./split-CmoHzaue.js";import{K as Be,B as Ae}from"./keyboard-CEiUdgl4.js";/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ue=C("ChartColumn",[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ce=C("Dumbbell",[["path",{d:"M14.4 14.4 9.6 9.6",key:"ic80wn"}],["path",{d:"M18.657 21.485a2 2 0 1 1-2.829-2.828l-1.767 1.768a2 2 0 1 1-2.829-2.829l6.364-6.364a2 2 0 1 1 2.829 2.829l-1.768 1.767a2 2 0 1 1 2.828 2.829z",key:"nnl7wr"}],["path",{d:"m21.5 21.5-1.4-1.4",key:"1f1ice"}],["path",{d:"M3.9 3.9 2.5 2.5",key:"1evmna"}],["path",{d:"M6.404 12.768a2 2 0 1 1-2.829-2.829l1.768-1.767a2 2 0 1 1-2.828-2.829l2.828-2.828a2 2 0 1 1 2.829 2.828l1.767-1.768a2 2 0 1 1 2.829 2.829z",key:"yhosts"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fe=C("HardDrive",[["line",{x1:"22",x2:"2",y1:"12",y2:"12",key:"1y58io"}],["path",{d:"M5.45 5.11 2 12v6a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-6l-3.45-6.89A2 2 0 0 0 16.76 4H7.24a2 2 0 0 0-1.79 1.11z",key:"oot6mr"}],["line",{x1:"6",x2:"6.01",y1:"16",y2:"16",key:"sgf278"}],["line",{x1:"10",x2:"10.01",y1:"16",y2:"16",key:"1l4acy"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ve=C("History",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ge=C("LayoutDashboard",[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const He=C("MessagesSquare",[["path",{d:"M14 9a2 2 0 0 1-2 2H6l-4 4V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2z",key:"p1xzt8"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v11l-4-4h-6a2 2 0 0 1-2-2v-1",key:"1cx29u"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qe=C("Percent",[["line",{x1:"19",x2:"5",y1:"5",y2:"19",key:"1x9vlm"}],["circle",{cx:"6.5",cy:"6.5",r:"2.5",key:"4mh3h7"}],["circle",{cx:"17.5",cy:"17.5",r:"2.5",key:"1mdrzq"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ye=C("Puzzle",[["path",{d:"M15.39 4.39a1 1 0 0 0 1.68-.474 2.5 2.5 0 1 1 3.014 3.015 1 1 0 0 0-.474 1.68l1.683 1.682a2.414 2.414 0 0 1 0 3.414L19.61 15.39a1 1 0 0 1-1.68-.474 2.5 2.5 0 1 0-3.014 3.015 1 1 0 0 1 .474 1.68l-1.683 1.682a2.414 2.414 0 0 1-3.414 0L8.61 19.61a1 1 0 0 0-1.68.474 2.5 2.5 0 1 1-3.014-3.015 1 1 0 0 0 .474-1.68l-1.683-1.682a2.414 2.414 0 0 1 0-3.414L4.39 8.61a1 1 0 0 1 1.68.474 2.5 2.5 0 1 0 3.014-3.015 1 1 0 0 1-.474-1.68l1.683-1.682a2.414 2.414 0 0 1 3.414 0z",key:"w46dr5"}]]),ae=({value:t,max:a,label:l})=>{const o=a>0?t/a*100:0;return e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex justify-between items-center mb-1",children:[e.jsx("span",{className:"text-[10px] font-black text-neutral-400 uppercase tracking-widest",children:l}),e.jsxs("span",{className:"text-xs font-bold text-neutral-500",children:[t," / ",a]})]}),e.jsx("div",{className:"h-1.5 w-full bg-neutral-100 rounded-full overflow-hidden border border-neutral-200/50",children:e.jsx("div",{className:"h-full bg-green-500 rounded-full transition-all duration-1000",style:{width:`${o}%`}})})]})},Je=t=>{const a=t??0;return a>=80?"bg-green-100 text-green-700":a>=50?"bg-yellow-100 text-yellow-700":a>0?"bg-orange-100 text-orange-700":"bg-neutral-100 text-neutral-500"},Ke=({learnedToday:t,reviewedToday:a,maxLearn:l,maxReview:o,learnedWords:n,reviewedWords:i,onViewWord:r})=>{const d=[...n,...i].sort((c,x)=>(x.lastReview||0)-(c.lastReview||0));return e.jsxs("section",{className:"bg-white p-5 rounded-3xl border border-neutral-200 shadow-sm flex flex-col h-full",children:[e.jsxs("div",{className:"flex justify-between items-start mb-4",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx("h3",{className:"text-sm font-black text-neutral-900 uppercase tracking-widest flex items-center gap-2",children:"Daily Progress"}),e.jsx("p",{className:"text-[10px] text-neutral-400 font-medium",children:"Activity for today."})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-xl font-black text-blue-600 leading-none",children:t}),e.jsx("p",{className:"text-[8px] font-bold text-blue-500 uppercase tracking-wider",children:"New"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-xl font-black text-orange-600 leading-none",children:a}),e.jsx("p",{className:"text-[8px] font-bold text-orange-500 uppercase tracking-wider",children:"Rev"})]})]})]}),e.jsxs("div",{className:"space-y-3 flex-1",children:[e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx(ae,{value:t,max:l,label:"Learn Goal"}),e.jsx(ae,{value:a,max:o,label:"Review Goal"})]}),d.length>0?e.jsxs("div",{className:"pt-2 border-t border-neutral-100 flex-1 min-h-0 flex flex-col",children:[e.jsxs("h4",{className:"text-[9px] font-black uppercase tracking-widest text-neutral-400 mb-2",children:["Recent Activity (",d.length,")"]}),e.jsx("div",{className:"flex-1 overflow-y-auto space-y-1 pr-1 custom-scrollbar max-h-32",children:d.map(c=>e.jsxs("button",{type:"button",onClick:x=>{x.preventDefault(),x.stopPropagation(),r(c)},className:"w-full flex items-center gap-2 text-left p-1.5 rounded-lg hover:bg-neutral-50 group",children:[e.jsx("div",{className:`w-1.5 h-1.5 rounded-full shrink-0 ${n.some(x=>x.id===c.id)?"bg-blue-500":"bg-orange-500"}`}),e.jsx("span",{className:"text-xs font-bold text-neutral-700 flex-1 truncate group-hover:text-neutral-900",children:c.word}),e.jsx("span",{className:`text-[9px] font-black px-1 py-0.5 rounded ${Je(c.masteryScore)}`,children:c.masteryScore??0})]},c.id))})]}):e.jsx("div",{className:"flex-1 flex items-center justify-center text-[10px] text-neutral-300 italic pt-4",children:"No activity recorded today."})]})]})},Xe=()=>{const t="2026-02-27T08:34:32.797Z";try{const a=new Date(t),l=a.getFullYear(),o=(a.getMonth()+1).toString().padStart(2,"0"),n=a.getDate().toString().padStart(2,"0"),i=a.getHours().toString().padStart(2,"0"),r=a.getMinutes().toString().padStart(2,"0");return`v${l}${o}${n}_${i}${r}`}catch{return"v_error"}},de=({percent:t,size:a=20,stroke:l=2.5})=>{const o=(a-l)/2,n=2*Math.PI*o,i=n-t/100*n;let r="text-neutral-300";return t>=80?r="text-green-500":t>=40?r="text-yellow-500":t>0&&(r="text-orange-500"),e.jsx("div",{className:"relative flex items-center justify-center",style:{width:a,height:a},children:e.jsxs("svg",{className:"transform -rotate-90",width:a,height:a,children:[e.jsx("circle",{className:"text-neutral-100 group-hover:text-neutral-800 transition-colors",stroke:"currentColor",strokeWidth:l,fill:"transparent",r:o,cx:a/2,cy:a/2}),e.jsx("circle",{className:`${r} transition-all duration-500 ease-out`,stroke:"currentColor",strokeWidth:l,strokeLinecap:"round",fill:"transparent",r:o,cx:a/2,cy:a/2,style:{strokeDasharray:n,strokeDashoffset:i}})]})})},g=({label:t,subLabel:a,progress:l,icon:o,color:n,bg:i,onClick:r,disabled:d,largeSub:c})=>e.jsxs("button",{onClick:r,disabled:d,className:"flex items-start gap-3 p-3 rounded-2xl border border-neutral-100 bg-white hover:bg-neutral-900 hover:border-neutral-900 hover:shadow-lg transition-all active:scale-95 w-full text-left group disabled:opacity-60 disabled:cursor-not-allowed disabled:hover:bg-white disabled:hover:border-neutral-100 disabled:hover:shadow-none",children:[e.jsx("div",{className:`p-2 rounded-xl ${i} ${n} group-hover:scale-110 transition-transform shrink-0 mt-0.5`,children:e.jsx(o,{size:18})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("div",{className:`text-xs font-black text-neutral-900 ${d?"":"group-hover:text-white"} transition-colors tracking-tight leading-tight`,children:t}),a&&e.jsx("div",{className:`font-medium text-neutral-400 ${d?"":"group-hover:text-neutral-300"} transition-colors mt-0.5 leading-snug ${c?"text-[10px]":"text-[10px] truncate"}`,children:a})]}),typeof l=="number"&&e.jsx("div",{className:"shrink-0 ml-1",children:e.jsx(de,{percent:l})})]}),Qe=({stats:t})=>{const a=(i,r)=>r>0?Math.round(i/r*100):0,l=t?t.speaking.freeTalk.completed+t.speaking.native.completed+t.speaking.conversation.completed:0,o=t?t.speaking.freeTalk.total+t.speaking.native.total+t.speaking.conversation.total:0,n=({label:i,completed:r,total:d,icon:c,colorClass:x})=>e.jsxs("div",{className:"flex items-center justify-between p-2 rounded-xl bg-neutral-50/50 hover:bg-neutral-50 transition-colors border border-transparent hover:border-neutral-100",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:`p-1.5 rounded-lg ${x} bg-white shadow-sm`,children:e.jsx(c,{size:12})}),e.jsx("span",{className:"text-[10px] font-bold text-neutral-700",children:i})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("span",{className:"text-[9px] font-medium text-neutral-400",children:[r,"/",d]}),e.jsx(de,{percent:a(r,d),size:18})]})]});return e.jsxs("div",{className:"bg-white p-5 rounded-3xl border border-neutral-200 shadow-sm flex flex-col gap-4 h-full justify-center",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("div",{className:"p-1.5 bg-neutral-900 text-white rounded-lg",children:e.jsx(qe,{size:14})}),e.jsx("h3",{className:"text-sm font-black text-neutral-900 uppercase tracking-widest",children:"Mastery Status"})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-3",children:[e.jsx(n,{label:"Reading",completed:(t==null?void 0:t.reading.completed)||0,total:(t==null?void 0:t.reading.total)||0,icon:V,colorClass:"text-indigo-600"}),e.jsx(n,{label:"Writing",completed:(t==null?void 0:t.writing.completed)||0,total:(t==null?void 0:t.writing.total)||0,icon:Le,colorClass:"text-pink-600"}),e.jsx(n,{label:"Speaking",completed:l,total:o,icon:re,colorClass:"text-rose-600"}),e.jsx(n,{label:"Grammar",completed:(t==null?void 0:t.lessons.grammar.completed)||0,total:(t==null?void 0:t.lessons.grammar.total)||0,icon:le,colorClass:"text-purple-600"}),e.jsx(n,{label:"Verbs",completed:(t==null?void 0:t.lessons.irregular.completed)||0,total:(t==null?void 0:t.lessons.irregular.total)||0,icon:ne,colorClass:"text-orange-600"}),e.jsx(n,{label:"Pronunciation",completed:(t==null?void 0:t.speaking.pronunciation.completed)||0,total:(t==null?void 0:t.speaking.pronunciation.total)||0,icon:G,colorClass:"text-emerald-600"}),e.jsx(n,{label:"Lessons",completed:(t==null?void 0:t.lessons.general.completed)||0,total:(t==null?void 0:t.lessons.general.total)||0,icon:V,colorClass:"text-blue-600"})]})]})},Ze=({stats:t,totalCount:a,newCount:l,studyingCount:o,masteredCount:n,rawCount:i,refinedCount:r,onStartNew:d,onStartDue:c,onRefineRaw:x,onVerifyRefined:v})=>{const u=a>0?l/a*100:0,j=a>0?o/a*100:0,p=a>0?n/a*100:0;return e.jsxs("div",{className:"bg-white p-5 rounded-3xl border border-neutral-200 shadow-sm flex flex-col gap-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-indigo-50 rounded-xl text-indigo-600 shadow-md",children:e.jsx(je,{size:18})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-base font-black text-neutral-900 tracking-tight",children:"Vocabulary Center"}),e.jsx("p",{className:"text-[10px] font-medium text-neutral-400",children:"Manage and expand your lexical resource."})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"lg:col-span-2 flex flex-col justify-center gap-4 p-4 bg-neutral-50 rounded-2xl border border-neutral-100",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-xs font-black text-neutral-500 uppercase tracking-wider",children:"Distribution"}),e.jsxs("span",{className:"text-xs font-bold text-neutral-400",children:[a," Total Words"]})]}),e.jsxs("div",{className:"h-4 bg-white rounded-full flex overflow-hidden border border-neutral-200 shadow-inner",children:[e.jsx("div",{className:"h-full bg-purple-500",style:{width:`${p}%`}}),e.jsx("div",{className:"h-full bg-cyan-500",style:{width:`${j}%`}}),e.jsx("div",{className:"h-full bg-neutral-300",style:{width:`${u}%`}})]}),e.jsxs("div",{className:"flex items-center justify-between gap-2 mt-1",children:[e.jsxs("div",{className:"flex items-center gap-1.5",children:[e.jsx("div",{className:"w-2 h-2 rounded-full bg-purple-500"}),e.jsxs("span",{className:"text-[10px] font-bold text-neutral-600",children:["Mastered (",n,")"]})]}),e.jsxs("div",{className:"flex items-center gap-1.5",children:[e.jsx("div",{className:"w-2 h-2 rounded-full bg-cyan-500"}),e.jsxs("span",{className:"text-[10px] font-bold text-neutral-600",children:["Learning (",o,")"]})]}),e.jsxs("div",{className:"flex items-center gap-1.5",children:[e.jsx("div",{className:"w-2 h-2 rounded-full bg-neutral-300"}),e.jsxs("span",{className:"text-[10px] font-bold text-neutral-600",children:["New (",l,")"]})]})]})]}),e.jsxs("div",{className:"lg:col-span-2 grid grid-cols-2 gap-3",children:[e.jsx(g,{label:"Learn New",subLabel:`${t?t.vocab.new:"-"} words ready`,icon:we,color:"text-indigo-600",bg:"bg-indigo-50",onClick:d,disabled:!t||t.vocab.new===0}),e.jsx(g,{label:"Review",subLabel:`${t?t.vocab.due:"-"} words due`,icon:se,color:"text-amber-600",bg:"bg-amber-50",onClick:c,disabled:!t||t.vocab.due===0}),e.jsx(g,{label:"Refine",subLabel:`${i} raw words`,icon:Ne,color:"text-purple-600",bg:"bg-purple-50",onClick:x,disabled:i===0}),e.jsx(g,{label:"Verify",subLabel:`${r} pending`,icon:ye,color:"text-emerald-600",bg:"bg-emerald-50",onClick:v,disabled:r===0})]})]})]})},et=({isLoading:t,onAction:a})=>e.jsxs("div",{className:"bg-white p-5 rounded-3xl border border-neutral-200 shadow-sm flex flex-col gap-4 relative overflow-hidden",children:[t&&e.jsx("div",{className:"absolute top-4 right-4 animate-spin text-neutral-300",children:e.jsx(se,{size:16})}),e.jsx("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-neutral-900 rounded-xl text-white shadow-md",children:e.jsx(ke,{size:18})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-base font-black text-neutral-900 tracking-tight",children:"Study Center"}),e.jsx("p",{className:"text-[10px] font-medium text-neutral-400",children:"Track your mastery across all skills."})]})]})}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-2",children:[e.jsx(g,{largeSub:!0,label:"Lesson",subLabel:"Explore all learning materials.",icon:V,color:"text-blue-600",bg:"bg-blue-50",onClick:()=>a("LESSON_ONLY")}),e.jsx(g,{largeSub:!0,label:"Grammar",subLabel:"Deep dive into essential grammar rules.",icon:le,color:"text-purple-600",bg:"bg-purple-50",onClick:()=>a("LESSON_GRAMMAR")}),e.jsx(g,{largeSub:!0,label:"Irregular Verb",subLabel:"Master tricky verb forms and usage.",icon:ne,color:"text-orange-600",bg:"bg-orange-50",onClick:()=>a("IRREGULAR_VERBS")}),e.jsx(g,{largeSub:!0,label:"Pronunciation",subLabel:"Perfect your accent and intonation.",icon:G,color:"text-emerald-600",bg:"bg-emerald-50",onClick:()=>a("PRONUNCIATION_ROADMAP")}),e.jsx(g,{largeSub:!0,label:"Word Intensity",subLabel:"Master nuanced words by their scale.",icon:oe,color:"text-orange-600",bg:"bg-orange-50",onClick:()=>a("LESSON_SCALE")}),e.jsx(g,{largeSub:!0,label:"Confusing Words",subLabel:"Contrast and identify confusing pairs.",icon:ie,color:"text-indigo-600",bg:"bg-indigo-50",onClick:()=>a("LESSON_DIFF")})]})]}),tt=({onAction:t})=>e.jsxs("div",{className:"bg-white p-5 rounded-3xl border border-neutral-200 shadow-sm flex flex-col gap-3",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-fuchsia-50 rounded-xl text-fuchsia-600 shadow-md",children:e.jsx(ce,{size:18})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-base font-black text-neutral-900 tracking-tight",children:"Practice Arcade"}),e.jsx("p",{className:"text-[10px] font-medium text-neutral-400",children:"Targeted drills to refine specific lexical skills."})]})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-2",children:[e.jsx(g,{label:"Pronunciation Focus",subLabel:"Targeted speech practice.",largeSub:!0,icon:re,color:"text-rose-600",bg:"bg-rose-50",onClick:()=>t("MIMIC")}),e.jsx(g,{label:"Listening & Spelling",subLabel:"Dictation drills to sharpen auditory accuracy.",largeSub:!0,icon:Be,color:"text-cyan-600",bg:"bg-cyan-50",onClick:()=>t("DICTATION")}),e.jsx(g,{label:"Grammar & Syntax",subLabel:"Unscramble sentences to master word order.",largeSub:!0,icon:Ce,color:"text-emerald-600",bg:"bg-emerald-50",onClick:()=>t("SENTENCE_SCRAMBLE")}),e.jsx(g,{label:"Phonetic Accuracy",subLabel:"Refine pronunciation with minimal pairs and IPA.",largeSub:!0,icon:G,color:"text-rose-600",bg:"bg-rose-50",onClick:()=>t("IPA_SORTER")}),e.jsx(g,{label:"Dependent Prepositions",subLabel:"Master verb, noun, and adjective preposition pairings.",largeSub:!0,icon:Se,color:"text-violet-600",bg:"bg-violet-50",onClick:()=>t("PREPOSITION_POWER")}),e.jsx(g,{label:"Contextual Usage",subLabel:"Match synonyms and idioms to correct contexts.",largeSub:!0,icon:Ye,color:"text-sky-600",bg:"bg-sky-50",onClick:()=>t("PARAPHRASE_CONTEXT")}),e.jsx(g,{label:"Rapid Recall",subLabel:"Speed test: Connect terms with definitions.",largeSub:!0,icon:Ae,color:"text-fuchsia-600",bg:"bg-fuchsia-50",onClick:()=>t("WORD_SCATTER")}),e.jsx(g,{label:"Natural Expression",subLabel:"Master native phrases and idioms in context.",largeSub:!0,icon:He,color:"text-amber-600",bg:"bg-amber-50",onClick:()=>t("NATURAL_EXPRESSION")}),e.jsx(g,{label:"Intensity Scale",subLabel:"Link nuanced words by their scale of intensity.",largeSub:!0,icon:oe,color:"text-orange-600",bg:"bg-orange-50",onClick:()=>t("INTENSITY_SCALE")}),e.jsx(g,{label:"Word Contrast",subLabel:"Contrast and identify confusing word pairs.",largeSub:!0,icon:ie,color:"text-indigo-600",bg:"bg-indigo-50",onClick:()=>t("COMPARISON_LAB")})]})]}),at=({goalStats:t,onAction:a})=>{const l=t.totalTasks>0?Math.round(t.completedTasks/t.totalTasks*100):0;return e.jsxs("div",{className:"bg-white p-5 rounded-3xl border border-neutral-200 shadow-sm flex flex-col justify-center h-full",children:[e.jsxs("div",{className:"flex justify-between items-start mb-2",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx("h3",{className:"text-[10px] font-black text-neutral-400 uppercase tracking-widest",children:"Active Plan"}),e.jsxs("p",{className:"text-xl font-black text-neutral-900 leading-none",children:[t.completedTasks," / ",t.totalTasks," ",e.jsx("span",{className:"text-xs text-neutral-400 font-bold",children:"Tasks"})]})]}),e.jsx("button",{onClick:()=>a("PLANNING"),className:"p-2 text-neutral-300 hover:text-neutral-900 hover:bg-neutral-50 rounded-lg transition-colors -mr-2 -mt-2",children:e.jsx(Oe,{size:18})})]}),e.jsx("div",{className:"w-full h-3 bg-neutral-100 rounded-full overflow-hidden mb-2",children:e.jsx("div",{className:`h-full transition-all duration-1000 ${l===100?"bg-green-500":"bg-indigo-500"}`,style:{width:`${l}%`}})}),e.jsxs("p",{className:"text-[10px] font-bold text-neutral-400 text-right",children:[l,"% Completed"]})]})},st=({lastBackupTime:t,onBackup:a,onRestore:l,serverStatus:o})=>{const[n,i]=b.useState(""),[r,d]=b.useState(!1),c=b.useRef(null),[x,v]=b.useState(!1),u=b.useRef(null);return b.useEffect(()=>{const j=()=>{if(!t){i("Last backup: Never");return}const y=Date.now()-t,S=Math.floor(y/(1e3*60*60*24)),L=Math.floor(y/(1e3*60*60)%24),f=Math.floor(y/(1e3*60)%60);S>0?i(`Last backup: ${S}d ago`):L>0?i(`Last backup: ${L}h ago`):f>0?i(`Last backup: ${f}m ago`):i("Last backup: < 1m ago")};j();const p=setInterval(j,60*1e3);return()=>clearTimeout(p)},[t]),b.useEffect(()=>{const j=p=>{c.current&&!c.current.contains(p.target)&&d(!1),u.current&&!u.current.contains(p.target)&&v(!1)};return document.addEventListener("mousedown",j),()=>document.removeEventListener("mousedown",j)},[]),e.jsxs("div",{className:"flex shrink-0 items-center justify-between space-x-3 px-3 py-2 rounded-2xl border-2 shadow-sm bg-white border-neutral-200 text-neutral-800",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ve,{size:14}),e.jsx("span",{className:"font-medium text-xs whitespace-nowrap",children:n})]}),e.jsxs("div",{className:"flex items-center space-x-2 pl-2",children:[o==="connected"?e.jsxs("div",{className:"relative",ref:c,children:[e.jsxs("button",{onClick:()=>d(!r),className:`px-4 py-2 bg-indigo-50 text-indigo-700 rounded-xl font-black text-[10px] flex items-center gap-2 transition-all active:scale-95 border border-indigo-100 shadow-sm uppercase tracking-widest ${r?"bg-indigo-100":"hover:bg-indigo-100"}`,children:[e.jsx(Q,{size:14}),e.jsx("span",{children:"Backup"}),e.jsx(Z,{size:12,className:`transition-transform ${r?"rotate-180":""}`})]}),r&&e.jsxs("div",{className:"absolute right-0 top-full mt-2 w-36 bg-white rounded-xl shadow-xl border border-neutral-100 z-50 overflow-hidden animate-in fade-in zoom-in-95",children:[e.jsxs("button",{onClick:()=>{a("server"),d(!1)},className:"w-full flex items-center gap-2 px-4 py-3 text-xs font-bold text-neutral-700 hover:bg-neutral-50 transition-colors text-left",children:[e.jsx(ee,{size:14,className:"text-sky-500"})," To Server"]}),e.jsx("div",{className:"h-px bg-neutral-100 mx-2"}),e.jsxs("button",{onClick:()=>{a("file"),d(!1)},className:"w-full flex items-center gap-2 px-4 py-3 text-xs font-bold text-neutral-700 hover:bg-neutral-50 transition-colors text-left",children:[e.jsx(Fe,{size:14,className:"text-indigo-500"})," To File"]})]})]}):e.jsxs("button",{onClick:()=>a("file"),className:"px-4 py-2 bg-indigo-50 text-indigo-700 rounded-xl font-black text-[10px] flex items-center gap-2 hover:bg-indigo-100 transition-all active:scale-95 border border-indigo-100 shadow-sm uppercase tracking-widest",children:[e.jsx(Q,{size:14}),e.jsx("span",{children:"Backup"})]}),o==="connected"?e.jsxs("div",{className:"relative",ref:u,children:[e.jsxs("button",{onClick:()=>v(!x),className:`px-4 py-2 bg-emerald-50 text-emerald-700 rounded-xl font-black text-[10px] flex items-center gap-2 transition-all active:scale-95 border border-emerald-100 shadow-sm uppercase tracking-widest ${x?"bg-emerald-100":"hover:bg-emerald-100"}`,children:[e.jsx(te,{size:14}),e.jsx("span",{children:"Restore"}),e.jsx(Z,{size:12,className:`transition-transform ${x?"rotate-180":""}`})]}),x&&e.jsxs("div",{className:"absolute right-0 top-full mt-2 w-36 bg-white rounded-xl shadow-xl border border-neutral-100 z-50 overflow-hidden animate-in fade-in zoom-in-95",children:[e.jsxs("button",{onClick:()=>{l("server"),v(!1)},className:"w-full flex items-center gap-2 px-4 py-3 text-xs font-bold text-neutral-700 hover:bg-neutral-50 transition-colors text-left",children:[e.jsx(ee,{size:14,className:"text-sky-500"})," From Server"]}),e.jsx("div",{className:"h-px bg-neutral-100 mx-2"}),e.jsxs("button",{onClick:()=>{l("file"),v(!1)},className:"w-full flex items-center gap-2 px-4 py-3 text-xs font-bold text-neutral-700 hover:bg-neutral-50 transition-colors text-left",children:[e.jsx(ve,{size:14,className:"text-amber-500"})," From File"]})]})]}):e.jsxs("button",{onClick:()=>l("file"),className:"px-4 py-2 bg-emerald-50 text-emerald-700 rounded-xl font-black text-[10px] flex items-center gap-2 hover:bg-emerald-100 transition-all active:scale-95 border border-emerald-100 shadow-sm uppercase tracking-widest",children:[e.jsx(te,{size:14}),e.jsx("span",{children:"Restore"})]})]})]})},lt=({onNavigate:t,totalCount:a,newCount:l,rawCount:o,refinedCount:n,reviewStats:i,lastBackupTime:r,onBackup:d,onRestore:c,serverStatus:x,onAction:v,onStartNewLearn:u,onStartDueReview:j,dayProgress:p,dailyGoals:y,onNavigateToWordList:S,goalStats:L,studyStats:f,isStatsLoading:P,onViewWord:W,serverUrl:O})=>{const B=b.useMemo(()=>Xe(),[]),[w,R]=b.useState(()=>{const N=sessionStorage.getItem("dashboard_active_tab");return N==="STUDY"||N==="PRACTICE"||N==="INSIGHT"?N:"STUDY"});return b.useEffect(()=>{sessionStorage.setItem("dashboard_active_tab",w)},[w]),e.jsxs("div",{className:"space-y-4 animate-in fade-in duration-500",children:[e.jsxs("header",{className:"flex flex-col sm:flex-row justify-between sm:items-start gap-4 mb-4",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-baseline gap-2",children:[e.jsx("h2",{className:"text-3xl font-black text-neutral-900 tracking-tight",children:"IELTS Vocab Pro"}),e.jsx("span",{className:"text-[10px] font-bold text-neutral-400 font-mono tracking-tighter bg-neutral-100 px-1.5 py-0.5 rounded-md border border-neutral-200",children:B})]}),e.jsx("div",{className:"flex items-center gap-3 mt-2",children:x==="connected"?e.jsxs("div",{className:"px-3 py-1.5 rounded-full border flex items-center gap-2 bg-emerald-50 border-emerald-200 text-emerald-700",children:[e.jsx("div",{className:"w-2 h-2 rounded-full bg-emerald-500"}),e.jsxs("span",{className:"text-[10px] font-black tracking-widest break-all",children:["Connected to: ",O||"Unknown Host"]})]}):e.jsxs("div",{className:"flex items-center gap-2 px-1.5 py-1.5 rounded-full border bg-red-50 border-red-200 text-red-700 shadow-sm pr-1.5",children:[e.jsxs("div",{className:"flex items-center gap-2 px-2",children:[e.jsx("div",{className:"w-2 h-2 rounded-full bg-red-500 animate-pulse"}),e.jsx("span",{className:"text-[10px] font-black uppercase tracking-widest",children:"Offline Mode"}),e.jsxs("div",{className:"relative group/tooltip",children:[e.jsx(pe,{size:12,className:"cursor-help opacity-70 hover:opacity-100"}),e.jsxs("div",{className:"absolute left-0 top-full mt-2 w-56 p-3 bg-neutral-900 text-white text-[10px] leading-relaxed font-medium rounded-xl opacity-0 group-hover/tooltip:opacity-100 transition-opacity pointer-events-none z-50 shadow-xl border border-neutral-700",children:["Disconnected from Vocab Server. Server backup and high-quality voices are unavailable.",e.jsx("div",{className:"absolute -top-1 left-3 w-2 h-2 bg-neutral-900 rotate-45 border-l border-t border-neutral-700"})]})]})]}),e.jsx("div",{className:"w-px h-3 bg-red-200"}),e.jsxs("button",{onClick:()=>{sessionStorage.setItem("vocab_pro_settings_tab","SERVER"),t("SETTINGS")},className:"flex items-center gap-1 px-3 py-1 bg-blue-600 border border-blue-700 rounded-full shadow-sm hover:bg-blue-700 transition-all group/btn",children:[e.jsx(fe,{size:10,className:"text-white"}),e.jsx("span",{className:"text-[10px] font-black uppercase tracking-widest text-white",children:"Connect"})]})]})})]}),e.jsx("div",{className:"flex flex-col items-end gap-2",children:e.jsx(st,{lastBackupTime:r,onBackup:d,onRestore:c,serverStatus:x})})]}),e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{className:"inline-flex p-1 bg-white border-2 border-neutral-100 rounded-2xl w-fit shadow-sm self-start",children:[e.jsxs("button",{onClick:()=>R("STUDY"),className:`w-28 py-2.5 rounded-xl text-xs font-black uppercase tracking-wider flex items-center justify-center gap-2 transition-all duration-300 ${w==="STUDY"?"bg-neutral-900 text-white shadow-lg transform scale-[1.02]":"text-neutral-500 hover:text-neutral-900 hover:bg-neutral-50"}`,children:[e.jsx(Ge,{size:16})," Study"]}),e.jsxs("button",{onClick:()=>R("PRACTICE"),className:`w-28 py-2.5 rounded-xl text-xs font-black uppercase tracking-wider flex items-center justify-center gap-2 transition-all duration-300 ${w==="PRACTICE"?"bg-neutral-900 text-white shadow-lg transform scale-[1.02]":"text-neutral-500 hover:text-neutral-900 hover:bg-neutral-50"}`,children:[e.jsx(ce,{size:16})," Practice"]}),e.jsxs("button",{onClick:()=>R("INSIGHT"),className:`w-28 py-2.5 rounded-xl text-xs font-black uppercase tracking-wider flex items-center justify-center gap-2 transition-all duration-300 ${w==="INSIGHT"?"bg-neutral-900 text-white shadow-lg transform scale-[1.02]":"text-neutral-500 hover:text-neutral-900 hover:bg-neutral-50"}`,children:[e.jsx(Ue,{size:16})," Insight"]})]})}),w==="STUDY"&&e.jsxs("div",{className:"space-y-4 animate-in fade-in slide-in-from-bottom-2 duration-300",children:[e.jsx(Ze,{stats:f,totalCount:a,newCount:l,studyingCount:i.learned,masteredCount:i.mastered,rawCount:o,refinedCount:n,onStartNew:u,onStartDue:j,onRefineRaw:()=>S("raw"),onVerifyRefined:()=>S("refined")}),e.jsx(et,{stats:f,isLoading:P,onAction:N=>v(N)})]}),w==="PRACTICE"&&e.jsx("div",{className:"space-y-4 animate-in fade-in slide-in-from-bottom-2 duration-300",children:e.jsx(tt,{onAction:v})}),w==="INSIGHT"&&e.jsxs("div",{className:"space-y-4 animate-in fade-in slide-in-from-bottom-2 duration-300",children:[e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-4",children:[e.jsx("div",{className:"lg:col-span-2",children:e.jsx(Qe,{stats:f})}),e.jsx("div",{className:"lg:col-span-1",children:e.jsx(at,{goalStats:L,onAction:v})})]}),(()=>{const N=(f==null?void 0:f.vocab.new)??0,z=(f==null?void 0:f.vocab.due)??0,A=Math.min(y.max_learn_per_day,N),$=Math.min(y.max_review_per_day,z),T=Math.max(A,p.learned),U=Math.max($,p.reviewed);return e.jsx("div",{className:"grid grid-cols-1 gap-4",children:e.jsx(Ke,{learnedToday:p.learned,reviewedToday:p.reviewed,maxLearn:T,maxReview:U,learnedWords:p.learnedWords,reviewedWords:p.reviewedWords,onViewWord:W})})})()]})]})},xt=({userId:t,totalCount:a,user:l,wotd:o,serverStatus:n,serverUrl:i,restoreFromServerAction:r,triggerLocalRestore:d,onLocalBackup:c,onServerBackup:x,onAction:v,...u})=>{const[j,p]=b.useState(0),[y,S]=b.useState(0),[L,f]=b.useState({learned:0,reviewed:0,learnedWords:[],reviewedWords:[]}),[P,W]=b.useState({learned:0,mastered:0,statusForgot:0,statusHard:0,statusEasy:0,statusLearned:0}),[O,B]=b.useState({totalTasks:0,completedTasks:0}),[w,R]=b.useState(null),[N,z]=b.useState(!1),A=Re().dailyGoals,$=async()=>{try{const m=await _e(t);let k=0,h=0;m.forEach(M=>{var I,E;k+=((I=M.todos)==null?void 0:I.length)||0,h+=((E=M.todos)==null?void 0:E.filter(_=>_.status==="CLOSED").length)||0}),B({totalTasks:k,completedTasks:h})}catch(m){console.warn("Failed to fetch goal stats",m)}},T=b.useCallback(async()=>{z(!0);try{const[m,k,h,M,I,E,_]=await Promise.all([Te(t),Me(t),Ie(t),Ee(t),De(t),Pe(t),ze(t)]),H=$e().filter(s=>s.userId===t).filter(s=>!s.isPassive),me=H.filter(s=>!s.lastReview&&s.quality==="VERIFIED").length,ge=H.filter(s=>s.lastReview&&s.nextReview<=Date.now()&&s.quality!=="FAILED").length,q=m.filter(s=>{var D;return(D=s.tags)==null?void 0:D.some(F=>F.toLowerCase().includes("grammar"))}),Y=m.filter(s=>s.type==="comparison"),J=m.filter(s=>s.type==="intensity"),K=m.filter(s=>{var D;return!((D=s.tags)!=null&&D.some(F=>F.toLowerCase().includes("grammar")))}),X=JSON.parse(localStorage.getItem("vocab_pro_mimic_practice_queue")||"[]"),be=X.length,he=X.filter(s=>(s.lastScore||0)>=80).length;R({vocab:{new:me,due:ge},lessons:{general:{completed:K.filter(s=>s.focusColor==="green").length,total:K.length},irregular:{completed:h.filter(s=>s.lastTestResult==="pass").length,total:h.length},grammar:{completed:q.filter(s=>s.focusColor==="green").length,total:q.length},comparison:{completed:Y.filter(s=>s.focusColor==="green").length,total:Y.length},scale:{completed:J.filter(s=>s.focusColor==="green").length,total:J.length}},reading:{completed:k.filter(s=>s.focusColor==="green").length,total:k.length},speaking:{freeTalk:{completed:E.filter(s=>s.focusColor==="green").length,total:E.length},native:{completed:M.filter(s=>s.focusColor==="green").length,total:M.length},conversation:{completed:I.filter(s=>s.focusColor==="green").length,total:I.length},pronunciation:{completed:he,total:be}},writing:{completed:_.filter(s=>s.focusColor==="green").length,total:_.length}})}catch(m){console.error("Failed to fetch study stats",m)}finally{z(!1)}},[t]);b.useEffect(()=>{const m=async()=>{const h=We();h&&(h.dayProgress&&f(h.dayProgress),p(h.dashboardStats.rawCount||0),S(h.dashboardStats.refinedCount||0),h.reviewCounts&&W({learned:h.reviewCounts.learned||0,mastered:h.reviewCounts.mastered||0,statusForgot:h.reviewCounts.statusForgot||0,statusHard:h.reviewCounts.statusHard||0,statusEasy:h.reviewCounts.statusEasy||0,statusLearned:h.reviewCounts.statusLearned||0}))};t&&(m(),$(),T());const k=()=>{m(),$()};return window.addEventListener("datastore-updated",k),()=>{window.removeEventListener("datastore-updated",k)}},[t,a,T]);const U=m=>{m==="server"&&r?r():m==="file"&&d?d():m==="file"&&u.onRestore()},xe=m=>{m==="server"&&x?x():c()},ue={user:l,totalCount:a,dueCount:u.dueCount,newCount:u.newCount,learnedCount:P.learned,rawCount:j,refinedCount:y,reviewStats:P,wotd:o,isWotdComposed:u.isWotdComposed||!1,onRandomizeWotd:u.onRandomizeWotd||(()=>{}),onComposeWotd:()=>{u.onComposeWotd&&o&&u.onComposeWotd(o)},goalStats:O,studyStats:w,isStatsLoading:N,onRefreshStats:T,onNavigate:u.setView,onNavigateToWordList:u.onNavigateToWordList,onStartDueReview:u.onStartDueReview,onStartNewLearn:u.onStartNewLearn,lastBackupTime:u.lastBackupTime,onBackup:xe,onRestore:U,dayProgress:L,dailyGoals:A,serverStatus:n,serverUrl:i,onAction:v||(()=>{}),onViewWord:u.onViewWord};return e.jsx(e.Fragment,{children:e.jsx(lt,{...ue})})};export{xt as default};
