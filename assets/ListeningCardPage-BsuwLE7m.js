import{c as Q,r as s,a1 as we,ai as ye,a0 as Ne,j as e,aM as ke,P as Se,ay as Z,aj as te,ag as se,bb as Ce,T as Te,az as ne,t as Ie,bx as B,X as K,at as Ae,by as D,bz as Pe,bA as Fe,I as ze}from"./index-DlcwiDRU.js";import{R as Ee,a as Le}from"./ResourceActions-BYr5Dd88.js";import{V as Me}from"./ViewMenu-JzJJnDWQ.js";import{U as Oe}from"./UniversalCard-BoQJi0lF.js";import{T as $e}from"./TagBrowser-BwapqxhZ.js";import{M as Re,F as re}from"./FileSelector-Dtw-Gtql.js";import{E as le}from"./ear-DATQQaov.js";import{T as Ue}from"./tag-DtA6u-TV.js";import{F as He}from"./file-text-eZt1bUfW.js";import{P as Be}from"./pause-DPlqZoqq.js";import"./chevron-left-DFu9WfAr.js";import"./filter-ejETUAxp.js";import"./folder-BcWbh4HZ.js";import"./server-fCctYs-m.js";import"./list-todo-C0TnkWGN.js";/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ae=Q("FileAudio",[["path",{d:"M17.5 22h.5a2 2 0 0 0 2-2V7l-5-5H6a2 2 0 0 0-2 2v3",key:"rslqgf"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M2 19a2 2 0 1 1 4 0v1a2 2 0 1 1-4 0v-4a6 6 0 0 1 12 0v4a2 2 0 1 1-4 0v-1a2 2 0 1 1 4 0",key:"9f7x3i"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ve=Q("Highlighter",[["path",{d:"m9 11-6 6v3h9l3-3",key:"1a3l36"}],["path",{d:"m22 12-4.6 4.6a2 2 0 0 1-2.8 0l-5.2-5.2a2 2 0 0 1 0-2.8L14 4",key:"14a9rk"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const We=Q("SkipBack",[["polygon",{points:"19 20 9 12 19 4 19 20",key:"o2sva"}],["line",{x1:"5",x2:"5",y1:"19",y2:"5",key:"1ocqjk"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qe=Q("SkipForward",[["polygon",{points:"5 4 15 12 5 20 5 4",key:"16p6eg"}],["line",{x1:"19",x2:"19",y1:"5",y2:"19",key:"futhcm"}]]),ee="vocab_pro_listening_view",_e=({text:c})=>{const k=c.split(/({.*?})/g);return e.jsx("span",{className:"leading-relaxed",children:k.map((f,l)=>f.startsWith("{")&&f.endsWith("}")?e.jsx("span",{className:"inline-block bg-red-100 text-red-700 px-1.5 py-0.5 rounded-md font-bold mx-0.5 border border-red-200 text-[0.9em] align-baseline",children:f.slice(1,-1)},l):e.jsx("span",{children:f},l))})},Qe=({rawText:c,onUpdate:k,readOnly:f=!1})=>{const l=s.useRef(null),[r,m]=s.useState(null),S=s.useMemo(()=>{const n=[],b=/({.*?})/g;let o,a=0;for(;(o=b.exec(c))!==null;)o.index>a&&n.push({text:c.slice(a,o.index),isHighlight:!1,start:a,end:o.index}),n.push({text:o[0],isHighlight:!0,start:o.index,end:b.lastIndex}),a=b.lastIndex;return a<c.length&&n.push({text:c.slice(a),isHighlight:!1,start:a,end:c.length}),n},[c]),g=()=>{if(f)return;const n=window.getSelection(),b=a=>{if(!a)return null;let p=a.nodeType===3?a.parentElement:a;for(;p&&p!==l.current&&!p.hasAttribute("data-index");)p=p.parentElement;return p&&p.hasAttribute("data-index")?parseInt(p.getAttribute("data-index"),10):null};if(!n||!n.anchorNode||!n.focusNode){m(null);return}const o=b(n.anchorNode);if(o!==null){const a=S[o];if(a.isHighlight){m({type:"remove",start:a.start,end:a.end});return}}if(!n.isCollapsed){const a=b(n.focusNode);if(o!==null&&o===a){const p=S[o];if(!p.isHighlight){const A=n.anchorNode;if(A&&A.nodeType===3){const v=Math.min(n.anchorOffset,n.focusOffset),L=Math.max(n.anchorOffset,n.focusOffset),d=p.start+v,P=p.start+L;if(n.toString()){m({type:"add",start:d,end:P});return}}}}}m(null)},j=()=>{var n;if(r){if(r.type==="remove"){const b=c.slice(0,r.start),o=c.slice(r.start+1,r.end-1),a=c.slice(r.end);k(b+o+a)}else{const b=c.slice(0,r.start),o=c.slice(r.start,r.end),a=c.slice(r.end);k(`${b}{${o}}${a}`)}m(null),(n=window.getSelection())==null||n.removeAllRanges()}};return e.jsxs("div",{className:"relative h-full flex flex-col",children:[e.jsx("div",{className:"sticky top-4 z-50 h-0 flex justify-center pointer-events-none overflow-visible",children:e.jsxs("button",{onClick:n=>{n.preventDefault(),j()},disabled:!r,className:`pointer-events-auto flex items-center gap-1.5 px-4 py-2.5 rounded-full text-xs font-black shadow-xl transition-all transform duration-200 border-2 border-white ring-1 ring-black/5 ${r?"translate-y-0 opacity-100 scale-100":"-translate-y-4 opacity-0 scale-95 pointer-events-none"} ${(r==null?void 0:r.type)==="remove"?"bg-white text-rose-600 shadow-rose-100":"bg-neutral-900 text-white shadow-neutral-200"}`,children:[(r==null?void 0:r.type)==="remove"?e.jsx(Fe,{size:14}):e.jsx(Ve,{size:14}),e.jsx("span",{children:(r==null?void 0:r.type)==="remove"?"Unhighlight":"Highlight"})]})}),e.jsx("div",{ref:l,className:"text-lg font-medium text-neutral-800 leading-relaxed whitespace-pre-wrap px-6 pb-20 pt-6 select-text cursor-text font-mono",onMouseUp:g,onKeyUp:g,children:S.map((n,b)=>e.jsx("span",{"data-index":b,className:n.isHighlight?"bg-red-100 text-red-700 px-1 rounded-md font-bold mx-0.5 border border-red-200 cursor-pointer hover:bg-red-200 hover:border-red-300 transition-colors":"",children:n.isHighlight?n.text.slice(1,-1):n.text},`${b}-${n.start}`))})]})},Ge=({isOpen:c,onClose:k,item:f,onUpdate:l})=>{const r=f.audioLinks||[],[m,S]=s.useState(0),[g,j]=s.useState(!1),[n,b]=s.useState(0),[o,a]=s.useState(0),[p,A]=s.useState(f.text),[v,L]=s.useState(!1),d=s.useRef(null);s.useEffect(()=>()=>{C()},[]),s.useEffect(()=>{c?(A(f.text),z(0,!1)):(C(),S(0))},[c,f]);const P=i=>{A(i),l({...f,text:i})},C=()=>{d.current&&(d.current.pause(),d.current=null),D(),j(!1),a(0),b(0)},z=(i,y)=>{if(C(),S(i),r.length>0&&r[i]){const F=r[i],E=new Audio(F);d.current=E,E.addEventListener("loadedmetadata",()=>{b(E.duration)}),E.addEventListener("timeupdate",()=>{a(E.currentTime)}),E.addEventListener("ended",()=>{j(!1),i<r.length-1?z(i+1,!0):a(0)}),E.addEventListener("error",()=>{j(!1)}),y&&(E.play().catch(console.error),j(!0))}},T=()=>{if(r.length>0)d.current?g?(d.current.pause(),j(!1)):(d.current.play().catch(console.error),j(!0)):z(m,!0);else if(g)D(),j(!1);else{const i=f.text.replace(/[{}]/g,"");ze(i),j(!0);const y=i.length/10*1e3;setTimeout(()=>j(!1),y)}},V=i=>{const y=Number(i.target.value);a(y),d.current&&(d.current.currentTime=y)},$=()=>{m>0&&z(m-1,!0)},R=()=>{m<r.length-1&&z(m+1,!0)},W=()=>{C(),k()};if(!c)return null;const h=r.length>0?decodeURIComponent(r[m].split("/").pop()||`Track ${m+1}`):"System Voice (TTS)",w=i=>{const y=Math.floor(i/60),F=Math.floor(i%60);return`${y}:${F.toString().padStart(2,"0")}`};return e.jsx("div",{className:"fixed inset-0 z-[250] flex items-center justify-center p-4 bg-black/60 backdrop-blur-sm animate-in fade-in",children:e.jsxs("div",{className:"bg-white w-full max-w-7xl rounded-[2.5rem] shadow-2xl border border-neutral-200 flex flex-col h-[90vh] overflow-hidden",children:[e.jsxs("header",{className:"px-8 py-6 border-b border-neutral-100 flex justify-between items-center bg-white z-10 shrink-0",children:[e.jsxs("div",{children:[e.jsxs("h3",{className:"text-xl font-black text-neutral-900 flex items-center gap-2",children:[e.jsx(le,{size:20})," Listening Practice"]}),e.jsx("p",{className:"text-xs text-neutral-500 font-bold mt-1 max-w-[250px] truncate",children:f.title||f.note||"Practice Session"})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("div",{className:"bg-neutral-100 p-1 rounded-xl flex items-center",children:[e.jsx("button",{onClick:()=>L(!1),className:`px-4 py-2 rounded-lg text-xs font-bold transition-all ${v?"text-neutral-500":"bg-white shadow-sm text-neutral-900"}`,children:"Read"}),e.jsx("button",{onClick:()=>L(!0),className:`px-4 py-2 rounded-lg text-xs font-bold transition-all ${v?"bg-white shadow-sm text-neutral-900":"text-neutral-500"}`,children:"Edit Raw"})]}),e.jsx("button",{onClick:W,className:"p-2 text-neutral-400 hover:bg-neutral-100 rounded-full",children:e.jsx(K,{size:20})})]})]}),e.jsx("div",{className:"flex-1 flex flex-col overflow-hidden relative bg-neutral-50/50",children:e.jsx("div",{className:"flex-1 overflow-y-auto p-8 custom-scrollbar relative",children:v?e.jsx("textarea",{value:p,onChange:i=>P(i.target.value),className:"w-full h-full p-6 bg-white border border-neutral-200 rounded-2xl resize-none outline-none text-lg font-medium leading-relaxed font-mono text-neutral-700 shadow-sm",placeholder:"Paste transcript here..."}):e.jsx("div",{className:"h-full flex flex-col bg-white border border-neutral-200 rounded-2xl shadow-sm p-8 overflow-y-auto",children:e.jsx(Qe,{rawText:p,onUpdate:P})})})}),e.jsxs("div",{className:"px-6 py-3 bg-white border-t border-neutral-100 shrink-0 flex items-center gap-4",children:[e.jsxs("div",{className:"w-48 shrink-0",children:[e.jsx("h4",{className:"text-xs font-bold text-neutral-900 truncate",children:h}),r.length>1&&e.jsxs("p",{className:"text-[9px] font-black text-neutral-400 uppercase tracking-widest",children:["Track ",m+1,"/",r.length]})]}),e.jsxs("div",{className:"flex-1 flex items-center gap-3",children:[e.jsx("button",{onClick:$,disabled:m===0,className:"p-2 text-neutral-400 hover:text-neutral-900 disabled:opacity-30 transition-colors",children:e.jsx(We,{size:18,fill:"currentColor"})}),e.jsx("button",{onClick:T,className:"w-10 h-10 bg-neutral-900 text-white rounded-full flex items-center justify-center shadow-md hover:scale-105 active:scale-95 transition-all",children:g?e.jsx(Be,{size:16,fill:"currentColor"}):e.jsx(te,{size:16,fill:"currentColor",className:"ml-0.5"})}),e.jsx("button",{onClick:R,disabled:m===r.length-1,className:"p-2 text-neutral-400 hover:text-neutral-900 disabled:opacity-30 transition-colors",children:e.jsx(qe,{size:18,fill:"currentColor"})}),e.jsxs("div",{className:"flex-1 flex items-center gap-3 ml-2",children:[e.jsx("span",{className:"text-[10px] font-mono font-bold text-neutral-400 w-8 text-right",children:w(o)}),e.jsxs("div",{className:"flex-1 h-1.5 bg-neutral-100 rounded-full relative group cursor-pointer",children:[r.length>0&&e.jsx("input",{type:"range",min:"0",max:n||100,value:o,onChange:V,className:"absolute inset-0 w-full h-full opacity-0 cursor-pointer z-10"}),e.jsx("div",{className:"absolute top-0 left-0 h-full bg-neutral-900 rounded-full transition-all",style:{width:`${n?o/n*100:0}%`}})]}),e.jsx("span",{className:"text-[10px] font-mono font-bold text-neutral-400 w-8 text-left",children:w(n)})]})]})]})]})})},Je=({isOpen:c,onClose:k,onSave:f,initialData:l})=>{const[r,m]=s.useState(""),[S,g]=s.useState(""),[j,n]=s.useState(""),[b,o]=s.useState("/"),[a,p]=s.useState(""),[A,v]=s.useState([]),[L,d]=s.useState(!1),[P,C]=s.useState(null),[z,T]=s.useState(!1);s.useEffect(()=>{var h;if(c)if(m((l==null?void 0:l.title)||""),g((l==null?void 0:l.text)||""),n((l==null?void 0:l.note)||""),v((l==null?void 0:l.audioLinks)||[]),(l==null?void 0:l.path)===void 0){const w=(l==null?void 0:l.tags)||[],i=w.find(F=>F.startsWith("/")),y=w.filter(F=>!F.startsWith("/"));o(i||"/"),p(y.join(", "))}else o((l==null?void 0:l.path)||"/"),p(((h=l==null?void 0:l.tags)==null?void 0:h.join(", "))||"")},[c,l]);const V=h=>{if(h.preventDefault(),S.trim()){const w=a.split(",").map(i=>i.trim()).filter(Boolean);f(r.trim(),S.trim(),j.trim(),b.trim(),w,A)}},$=h=>{const{url:w,transcript:i}=h;v(y=>[...y,w]),i&&(S.trim()?(C(i),T(!0)):g(i))},R=()=>{P&&g(P),C(null),T(!1)},W=h=>{v(w=>w.filter((i,y)=>y!==h))};return c?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"fixed inset-0 z-[200] flex items-center justify-center p-4 bg-black/60 backdrop-blur-sm animate-in fade-in duration-200",children:e.jsxs("form",{onSubmit:V,className:"bg-white w-full max-w-lg rounded-[2.5rem] shadow-2xl border border-neutral-200 flex flex-col max-h-[90vh]",children:[e.jsxs("header",{className:"px-8 py-6 border-b border-neutral-100 flex justify-between items-start shrink-0",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-black text-neutral-900",children:l?"Edit Listening Card":"New Listening Card"}),e.jsx("p",{className:"text-sm text-neutral-500",children:"Add text script and attach audio."})]}),e.jsx("button",{type:"button",onClick:k,className:"p-2 -mr-2 text-neutral-400 hover:bg-neutral-100 rounded-full",children:e.jsx(K,{size:20})})]}),e.jsxs("main",{className:"p-8 space-y-6 overflow-y-auto custom-scrollbar",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"block text-xs font-bold text-neutral-500",children:"Title"}),e.jsx("input",{value:r,onChange:h=>m(h.target.value),placeholder:"e.g. Unit 1 Podcast",className:"w-full px-4 py-3 bg-neutral-50 border border-neutral-200 rounded-xl font-bold text-lg focus:ring-2 focus:ring-neutral-900 outline-none"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"block text-xs font-bold text-neutral-500",children:"Script / Transcript"}),e.jsx("div",{className:"relative",children:e.jsx("textarea",{value:S,onChange:h=>g(h.target.value),placeholder:"Paste full transcript here...",rows:6,className:"w-full p-4 bg-neutral-50 border border-neutral-200 rounded-xl font-medium resize-none focus:ring-2 focus:ring-neutral-900 outline-none text-sm leading-relaxed",required:!0})}),e.jsx("p",{className:"text-[10px] text-neutral-400 italic",children:"You can highlight key phrases in Practice mode."})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("label",{className:"block text-xs font-bold text-neutral-500",children:"Attached Audio"}),e.jsxs("button",{type:"button",onClick:()=>d(!0),className:"flex items-center gap-1 text-[10px] font-bold text-indigo-600 hover:bg-indigo-50 px-2 py-1 rounded-lg transition-colors",children:[e.jsx(se,{size:12})," From Server"]})]}),e.jsxs("div",{className:"space-y-2",children:[A.length===0&&e.jsx("p",{className:"text-[10px] text-neutral-400 italic px-2",children:"No audio files attached."}),A.map((h,w)=>e.jsxs("div",{className:"flex items-center justify-between p-2 bg-neutral-50 rounded-lg border border-neutral-200",children:[e.jsxs("div",{className:"flex items-center gap-2 overflow-hidden",children:[e.jsx(ae,{size:14,className:"text-emerald-500 shrink-0"}),e.jsx("span",{className:"text-xs font-mono text-neutral-600 truncate",children:decodeURIComponent(h.split("/").pop()||"file")})]}),e.jsx("button",{type:"button",onClick:()=>W(w),className:"p-1 text-neutral-400 hover:text-red-500 hover:bg-red-50 rounded-full",children:e.jsx(K,{size:14})})]},w))]})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("label",{className:"block text-xs font-bold text-neutral-500",children:"Note (Optional)"}),e.jsx("input",{value:j,onChange:h=>n(h.target.value),placeholder:"e.g. Fast speech, linking sounds...",className:"w-full px-4 py-3 bg-neutral-50 border border-neutral-200 rounded-xl font-medium text-sm"})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("label",{className:"block text-xs font-bold text-neutral-500",children:"Tags"}),e.jsx("input",{value:a,onChange:h=>p(h.target.value),placeholder:"linking, elision...",className:"w-full px-4 py-3 bg-neutral-50 border border-neutral-200 rounded-xl font-medium text-sm"})]})]}),e.jsx("footer",{className:"px-8 py-6 border-t border-neutral-100 flex justify-end shrink-0 bg-neutral-50/50 rounded-b-[2.5rem]",children:e.jsxs("button",{type:"submit",className:"px-6 py-3 bg-neutral-900 text-white rounded-xl font-black text-xs flex items-center gap-2 uppercase tracking-widest",children:[e.jsx(Ae,{size:14})," Save Item"]})})]})}),e.jsx(re,{isOpen:L,onClose:()=>d(!1),onSelect:$,type:"audio",title:"Select Audio"}),e.jsx(ne,{isOpen:z,title:"Replace Script?",message:"This audio file comes with a linked transcript. Do you want to replace your current text content with it?",confirmText:"Replace",isProcessing:!1,onConfirm:R,onClose:()=>T(!1),icon:e.jsx(He,{size:40,className:"text-indigo-500"}),confirmButtonClass:"bg-indigo-600 text-white hover:bg-indigo-700 shadow-indigo-200"})]}):null},ut=({user:c})=>{const[k,f]=s.useState([]),[l,r]=s.useState(!0),[m,S]=s.useState(!1),[g,j]=s.useState(()=>we(ee,{showNote:!0,compact:!1,showType:!0})),[n,b]=s.useState(""),[o,a]=s.useState(null),[p,A]=s.useState(!1),[v,L]=s.useState("all"),[d,P]=s.useState("all"),[C,z]=s.useState(0),[T,V]=s.useState(12),[$,R]=s.useState(null);s.useEffect(()=>{ye(ee,g)},[g]);const[W,h]=s.useState(!1),[w,i]=s.useState(null),[y,F]=s.useState(null),[E,Y]=s.useState(!1),{showToast:M}=Ne(),q=async()=>{r(!0);const t=await Ie(c.id);f(t.sort((u,x)=>x.createdAt-u.createdAt)),r(!1)};s.useEffect(()=>{q()},[c.id]),s.useEffect(()=>{z(0)},[o,T,v,d,n]);const oe=s.useMemo(()=>v!=="all"||d!=="all",[v,d]),_=s.useMemo(()=>{let t=k;const u=n.toLowerCase().trim();return u&&(t=t.filter(x=>(x.title||"").toLowerCase().includes(u)||(x.text||"").toLowerCase().includes(u))),v==="focused"&&(t=t.filter(x=>x.isFocused)),d!=="all"&&(t=t.filter(x=>x.focusColor===d)),o&&(o==="Uncategorized"?t=t.filter(x=>{const N=x.path??(x.tags||[]).find(U=>U.startsWith("/"));return!(N&&N!=="/"&&N!=="")}):t=t.filter(x=>{var N,I;return((N=x.path)==null?void 0:N.startsWith(o))||((I=x.tags)==null?void 0:I.includes(o))})),t},[k,o,v,d,n]),ie=s.useMemo(()=>{const t=C*T;return _.slice(t,t+T)},[_,C,T]),ce=()=>{i(null),h(!0)},de=t=>{i(t),h(!0)},ue=async()=>{y&&(await Pe(y.id),F(null),M("Deleted item.","success"),q())},xe=async(t,u,x,N,I,U)=>{try{const O=Date.now();if(w){const H={...w,title:t,text:u,note:x,path:N,tags:I,audioLinks:U,updatedAt:O};await B(H),M("Item updated!","success")}else{const H={id:`lst-${O}-${Math.random()}`,userId:c.id,title:t,text:u,note:x,path:N,tags:I,audioLinks:U,createdAt:O,updatedAt:O};await B(H),M("Item added!","success")}h(!1),q()}catch{M("Failed to save item.","error")}},he=async t=>{const{url:u,filename:x,transcript:N,transcriptTitle:I,map:U,path:O}=t;if(!N){M("No transcript found for selected file.","error");return}const H=U||"Unknown",G=O?`/${O}`:"",je=I?`${H}${G} - ${I}`:x,J=Date.now(),ve={id:`lst-scripted-${J}-${Math.random()}`,userId:c.id,title:je,text:N,note:`Imported from ${H}${G}`,path:G||"/",tags:["scripted-audio"],audioLinks:[u],createdAt:J,updatedAt:J};try{await B(ve),M("Scripted Audio Card Created!","success"),q()}catch{M("Failed to create card.","error")}},pe=async t=>{await B(t),R(t),q()},X=t=>{R(t)},fe=()=>{f(t=>[...t].sort(()=>Math.random()-.5)),M("Shuffled!","success")},me=async(t,u)=>{const x={...t,focusColor:u||void 0,updatedAt:Date.now()};u||delete x.focusColor,f(N=>N.map(I=>I.id===t.id?x:I)),await B(x)},ge=async t=>{const u={...t,isFocused:!t.isFocused,updatedAt:Date.now()};f(x=>x.map(N=>N.id===t.id?u:N)),await B(u)},be=t=>{if(t.title)return e.jsx("div",{className:"font-black text-lg text-neutral-900 leading-tight",children:t.title});const u=t.text.split(/\s+/),x=u.length>15?u.slice(0,15).join(" ")+"...":t.text;return e.jsx("div",{className:"font-medium text-lg text-neutral-700 leading-tight",children:e.jsx(_e,{text:x})})};return e.jsxs(e.Fragment,{children:[e.jsx(Ee,{title:"Listening Library",subtitle:"Practice listening reflexes and capture difficult phrases.",icon:e.jsx("img",{src:"https://raw.githubusercontent.com/Tarikul-Islam-Anik/Animated-Fluent-Emojis/master/Emojis/Objects/Headphone.png",className:"w-8 h-8 object-contain",alt:"Listening"}),query:n,onQueryChange:b,searchPlaceholder:"Search title or text...",config:{},isLoading:l,isEmpty:_.length===0,emptyMessage:"No difficult phrases saved.",activeFilters:{},onFilterChange:()=>{},pagination:{page:C,totalPages:Math.ceil(_.length/T),onPageChange:z,pageSize:T,onPageSizeChange:V,totalItems:_.length},aboveGrid:e.jsx(e.Fragment,{children:p&&e.jsx($e,{items:k,selectedTag:o,onSelectTag:a,forcedView:"tags",title:"Browse Tags",icon:e.jsx(Ue,{size:16})})}),actions:e.jsx(Le,{viewMenu:e.jsx(Me,{isOpen:m,setIsOpen:S,hasActiveFilters:oe,customSection:e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"px-3 py-2 text-[9px] font-black text-neutral-400 uppercase tracking-widest border-b border-neutral-50 flex items-center gap-2",children:[e.jsx(Te,{size:10})," Focus & Status"]}),e.jsxs("div",{className:"p-1 flex flex-col gap-1 bg-neutral-100 rounded-xl mb-2",children:[e.jsx("button",{onClick:()=>L(v==="all"?"focused":"all"),className:`w-full py-1.5 text-[9px] font-black rounded-lg transition-all ${v==="focused"?"bg-white shadow-sm text-red-600":"text-neutral-500 hover:text-neutral-700"}`,children:v==="focused"?"Focused Only":"All Items"}),e.jsxs("div",{className:"flex gap-1",children:[e.jsx("button",{onClick:()=>P(d==="green"?"all":"green"),className:`flex-1 h-6 rounded-lg border-2 transition-all ${d==="green"?"bg-emerald-500 border-emerald-600":"bg-white border-neutral-200 hover:bg-emerald-50"}`}),e.jsx("button",{onClick:()=>P(d==="yellow"?"all":"yellow"),className:`flex-1 h-6 rounded-lg border-2 transition-all ${d==="yellow"?"bg-amber-400 border-amber-500":"bg-white border-neutral-200 hover:bg-amber-50"}`}),e.jsx("button",{onClick:()=>P(d==="red"?"all":"red"),className:`flex-1 h-6 rounded-lg border-2 transition-all ${d==="red"?"bg-rose-500 border-rose-600":"bg-white border-neutral-200 hover:bg-rose-50"}`})]})]})]}),viewOptions:[{label:"Show Notes",checked:g.showNote,onChange:()=>j(t=>({...t,showNote:!t.showNote}))},{label:"Show Card Type",checked:g.showType,onChange:()=>j(t=>({...t,showType:!t.showType}))},{label:"Compact Mode",checked:g.compact,onChange:()=>j(t=>({...t,compact:!t.compact}))}]}),browseTags:{isOpen:p,onToggle:()=>{A(!p)}},addActions:[{label:"Add Scripted Audio",icon:ae,onClick:()=>Y(!0)},{label:"Add Phrase",icon:se,onClick:ce}],extraActions:e.jsx(e.Fragment,{children:e.jsx("button",{onClick:fe,disabled:k.length<2,className:"p-3 bg-white border border-neutral-200 text-neutral-600 rounded-xl hover:bg-neutral-50 active:scale-95 transition-all shadow-sm disabled:opacity-50",title:"Randomize",children:e.jsx(Ce,{size:16})})})}),children:()=>e.jsx(e.Fragment,{children:ie.map(t=>e.jsx(Oe,{title:be(t),badge:g.showType?{label:"Listening",colorClass:"bg-red-50 text-red-600 border-red-100",icon:le}:void 0,tags:t.tags,compact:g.compact,onClick:()=>X(t),focusColor:t.focusColor,onFocusChange:u=>me(t,u),isFocused:t.isFocused,onToggleFocus:()=>ge(t),isCompleted:t.focusColor==="green",footer:e.jsxs("div",{className:"flex justify-between items-center mt-2",children:[e.jsx("div",{className:"flex items-center gap-2",children:t.audioLinks&&t.audioLinks.length>0&&e.jsxs("div",{className:"flex items-center gap-1.5 text-[10px] font-black text-emerald-600 bg-emerald-50 px-2 py-1 rounded-full w-fit uppercase tracking-wider border border-emerald-100",children:[e.jsx(Re,{size:10})," ",t.audioLinks.length," Tracks"]})}),e.jsxs("button",{onClick:u=>{u.stopPropagation(),X(t)},className:"flex items-center gap-1.5 px-4 py-2 bg-indigo-600 text-white rounded-xl font-black text-[10px] uppercase tracking-widest hover:bg-indigo-700 transition-all shadow-md shadow-indigo-200 active:scale-95",title:"Practice",children:[e.jsx(te,{size:12,fill:"currentColor"})," ",e.jsx("span",{children:"Practice"})]})]}),actions:e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:u=>{u.stopPropagation(),de(t)},className:"p-1.5 text-neutral-400 hover:text-neutral-900 hover:bg-neutral-100 rounded-lg transition-colors",title:"Edit",children:e.jsx(Se,{size:14})}),e.jsx("button",{onClick:u=>{u.stopPropagation(),F(t)},className:"p-1.5 text-neutral-400 hover:text-rose-600 hover:bg-rose-50 rounded-lg transition-colors",title:"Delete",children:e.jsx(Z,{size:14})})]}),children:g.showNote&&t.note&&e.jsxs("div",{className:"flex items-center gap-2 text-xs text-neutral-500 font-medium bg-neutral-50 px-2 py-1 rounded-lg w-fit mb-2",children:[e.jsx(ke,{size:12})," ",t.note]})},t.id))})}),e.jsx(Je,{isOpen:W,onClose:()=>h(!1),onSave:xe,initialData:w}),$&&e.jsx(Ge,{isOpen:!!$,onClose:()=>R(null),item:$,onUpdate:pe}),e.jsx(re,{isOpen:E,onClose:()=>Y(!1),onSelect:he,type:"audio",title:"Select Audio"}),e.jsx(ne,{isOpen:!!y,title:"Delete Phrase?",message:"Are you sure you want to remove this phrase?",confirmText:"Delete",isProcessing:!1,onConfirm:ue,onClose:()=>F(null),icon:e.jsx(Z,{size:40,className:"text-red-500"})})]})};export{ut as ListeningCardPage,ut as default};
